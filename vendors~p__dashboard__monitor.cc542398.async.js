(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{"+K+b":function(Se,ft,L){var U=L("JHRd");function E(T){var e=new T.constructor(T.byteLength);return new U(e).set(new U(T)),e}Se.exports=E},"+Qka":function(Se,ft,L){var U=L("fmRc"),E=L("t2Dn"),T=L("cq/+"),e=L("T1AV"),t=L("GoyQ"),l=L("mTTR"),s=L("itsj");function c(r,h,n,i,a){r!==h&&T(h,function(o,u){if(a||(a=new U),t(o))e(r,h,u,n,c,i,a);else{var f=i?i(s(r,u),o,u+"",r,h,a):void 0;f===void 0&&(f=o),E(r,u,f)}},l)}Se.exports=c},"+VLl":function(Se,ft,L){"use strict";L.d(ft,"a",function(){return o});var U=L("lSNA"),E=L.n(U),T=L("J4zp"),e=L.n(T),t=L("Hel2"),l=Math.PI/3,s=[0,l,2*l,3*l,4*l,5*l];function c(u){return u[0]}function r(u){return u[1]}var h=function(){var u=0,f=0,v=1,b=1,y=c,g=r,_,M,x;function m(P){var A={},O=[],R,W=P.length;for(R=0;R<W;++R)if(!(isNaN(Z=+y.call(null,F=P[R],R,P))||isNaN(V=+g.call(null,F,R,P)))){var F,Z,V,k=Math.round(V=V/x),Y=Math.round(Z=Z/M-(k&1)/2),K=V-k;if(Math.abs(K)*3>1){var it=Z-Y,ct=Y+(Z<Y?-1:1)/2,ht=k+(V<k?-1:1),ut=Z-ct,It=V-ht;it*it+K*K>ut*ut+It*It&&(Y=ct+(k&1?1:-1)/2,k=ht)}var Nt=Y+"-"+k,Lt=A[Nt];Lt?Lt.push(F):(O.push(Lt=A[Nt]=[F]),Lt.x=(Y+(k&1)/2)*M,Lt.y=k*x)}return O}function S(P){var A=0,O=0;return s.map(function(R){var W=Math.sin(R)*P,F=-Math.cos(R)*P,Z=W-A,V=F-O;return A=W,O=F,[Z,V]})}return m.hexagon=function(P){return"m"+S(P==null?_:+P).join("l")+"z"},m.centers=function(){for(var P=[],A=Math.round(f/x),O=Math.round(u/M),R=A*x;R<b+_;R+=x,++A)for(var W=O*M+(A&1)*M/2;W<v+M/2;W+=M)P.push([W,R]);return P},m.mesh=function(){var P=S(_).slice(0,4).join("l");return m.centers().map(function(A){return"M"+A+"m"+P}).join("")},m.x=function(P){return arguments.length?(y=P,m):y},m.y=function(P){return arguments.length?(g=P,m):g},m.radius=function(P){return arguments.length?(_=+P,M=_*2*Math.sin(l),x=_*1.5,m):_},m.size=function(P){return arguments.length?(u=f=0,v=+P[0],b=+P[1],m):[v-u,b-f]},m.extent=function(P){return arguments.length?(u=+P[0][0],f=+P[0][1],v=+P[1][0],b=+P[1][1],m):[[u,f],[v,b]]},m.radius(1)};function n(u,f){var v=Object.keys(u);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(u);f&&(b=b.filter(function(y){return Object.getOwnPropertyDescriptor(u,y).enumerable})),v.push.apply(v,b)}return v}function i(u){for(var f=1;f<arguments.length;f++){var v=arguments[f]!=null?arguments[f]:{};f%2?n(Object(v),!0).forEach(function(b){E()(u,b,v[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(v)):n(Object(v)).forEach(function(b){Object.defineProperty(u,b,Object.getOwnPropertyDescriptor(v,b))})}return u}var a=6378e3;function o(u,f){var v=u.dataArray,b=f.size,y=b===void 0?10:b,g=f.method,_=g===void 0?"sum":g,M=y/(2*Math.PI*a)*(256<<20)/2,x=v.map(function(A){var O=Object(t.d)(A.coordinates),R=e()(O,2),W=R[0],F=R[1];return i(i({},A),{},{coordinates:[W,F]})}),m=h().radius(M).x(function(A){return A.coordinates[0]}).y(function(A){return A.coordinates[1]}),S=m(x),P={dataArray:S.map(function(A,O){var R;if(f.field&&_){var W=t.c.getColumn(A,f.field);A[_]=t.c.statMap[_](W)}return R={},E()(R,f.method,A[_]),E()(R,"count",A.length),E()(R,"rawData",A),E()(R,"coordinates",[A.x,A.y]),E()(R,"_id",O),R}),radius:M,xOffset:M,yOffset:M,type:"hexagon"};return P}},"+em5":function(Se,ft,L){"use strict";L.d(ft,"a",function(){return V});var U=L("lSNA"),E=L.n(U),T=L("yG8O"),e=L.n(T),t=L("lwsE"),l=L.n(t),s=L("W8MJ"),c=L.n(s),r=L("U+yc"),h=L.n(r),n=L("1ABj"),i=L.n(n),a=L("gQMU"),o=L.n(a),u=L("J2iB"),f=L.n(u),v=L("u6S6"),b=L.n(v),y=L("4cb6"),g=L.n(y),_=L("h1nZ"),M=L("bB6j"),x=L("bPkA"),m,S,P,A,O,R;function W(k,Y){var K=Object.keys(k);if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(k);Y&&(it=it.filter(function(ct){return Object.getOwnPropertyDescriptor(k,ct).enumerable})),K.push.apply(K,it)}return K}function F(k){for(var Y=1;Y<arguments.length;Y++){var K=arguments[Y]!=null?arguments[Y]:{};Y%2?W(Object(K),!0).forEach(function(it){E()(k,it,K[it])}):Object.getOwnPropertyDescriptors?Object.defineProperties(k,Object.getOwnPropertyDescriptors(K)):W(Object(K)).forEach(function(it){Object.defineProperty(k,it,Object.getOwnPropertyDescriptor(K,it))})}return k}var Z=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,V=(m=Object(y.injectable)(),S=Object(y.inject)(M.a.IShaderModuleService),m(P=(A=(R=function(){function k(){l()(this,k),e()(this,"shaderModuleService",O,this),this.rendererService=void 0,this.config=void 0,this.quad=Z,this.enabled=!0,this.renderToScreen=!1,this.model=void 0,this.name=void 0,this.optionsToUpdate={}}return c()(k,[{key:"getName",value:function(){return this.name}},{key:"setName",value:function(K){this.name=K}},{key:"getType",value:function(){return x.a.PostProcessing}},{key:"init",value:function(K,it){this.config=it,this.rendererService=K.getContainer().get(M.a.IRendererService);var ct=this.rendererService,ht=ct.createAttribute,ut=ct.createBuffer,It=ct.createModel,Nt=this.setupShaders(),Lt=Nt.vs,_t=Nt.fs,mt=Nt.uniforms;this.model=It({vs:Lt,fs:_t,attributes:{a_Position:ht({buffer:ut({data:[-4,-4,4,-4,0,4],type:_.gl.FLOAT}),size:2})},uniforms:F(F({u_Texture:null},mt),this.config&&this.convertOptionsToUniforms(this.config)),depth:{enable:!1},count:3,blend:{enable:this.getName()==="copy"}})}},{key:"render",value:function(K){var it=this,ct=K.multiPassRenderer.getPostProcessor(),ht=this.rendererService,ut=ht.useFramebuffer,It=ht.getViewportSize,Nt=ht.clear,Lt=It(),_t=Lt.width,mt=Lt.height;ut(this.renderToScreen?null:ct.getWriteFBO(),function(){Nt({framebuffer:ct.getWriteFBO(),color:[0,0,0,0],depth:1,stencil:0}),it.model.draw({uniforms:F({u_Texture:ct.getReadFBO(),u_ViewportSize:[_t,mt]},it.convertOptionsToUniforms(it.optionsToUpdate))})})}},{key:"isEnabled",value:function(){return this.enabled}},{key:"setEnabled",value:function(K){this.enabled=K}},{key:"setRenderToScreen",value:function(K){this.renderToScreen=K}},{key:"updateOptions",value:function(K){this.optionsToUpdate=F(F({},this.optionsToUpdate),K)}},{key:"setupShaders",value:function(){throw new Error("Method not implemented.")}},{key:"convertOptionsToUniforms",value:function(K){var it={};return Object.keys(K).forEach(function(ct){f()(K[ct])||(it["u_".concat(o()(b()(ct)))]=K[ct])}),it}}]),k}(),R),O=h()(A.prototype,"shaderModuleService",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A))||P)},"+iFO":function(Se,ft,L){var U=L("dTAl"),E=L("LcsW"),T=L("6sVZ");function e(t){return typeof t.constructor=="function"&&!T(t)?U(E(t)):{}}Se.exports=e},"/33/":function(Se,ft){},"/Uc5":function(Se,ft){},"/ezw":function(Se,ft,L){"use strict";var U=L("rePB"),E=L("wx14"),T=L("U8pU"),e=L("q1tI"),t=L("TSYQ"),l=L.n(t),s=function(V){var k=V.prefixCls,Y=V.className,K=V.width,it=V.style;return e.createElement("h3",{className:l()(k,Y),style:Object(E.a)({width:K},it)})},c=s,r=L("KQm4"),h=function(V){var k=function(It){var Nt=V.width,Lt=V.rows,_t=Lt===void 0?2:Lt;if(Array.isArray(Nt))return Nt[It];if(_t-1===It)return Nt},Y=V.prefixCls,K=V.className,it=V.style,ct=V.rows,ht=Object(r.a)(Array(ct)).map(function(ut,It){return e.createElement("li",{key:It,style:{width:k(It)}})});return e.createElement("ul",{className:l()(Y,K),style:it},ht)},n=h,i=L("H84U"),a=function(V){var k,Y,K=V.prefixCls,it=V.className,ct=V.style,ht=V.size,ut=V.shape,It=l()((k={},Object(U.a)(k,"".concat(K,"-lg"),ht==="large"),Object(U.a)(k,"".concat(K,"-sm"),ht==="small"),k)),Nt=l()((Y={},Object(U.a)(Y,"".concat(K,"-circle"),ut==="circle"),Object(U.a)(Y,"".concat(K,"-square"),ut==="square"),Object(U.a)(Y,"".concat(K,"-round"),ut==="round"),Y)),Lt=typeof ht=="number"?{width:ht,height:ht,lineHeight:"".concat(ht,"px")}:{};return e.createElement("span",{className:l()(K,It,Nt,it),style:Object(E.a)(Object(E.a)({},Lt),ct)})},o=a,u=L("bT9E"),f=function(V){var k=function(K){var it=K.getPrefixCls,ct=V.prefixCls,ht=V.className,ut=V.active,It=it("skeleton",ct),Nt=Object(u.a)(V,["prefixCls"]),Lt=l()(It,"".concat(It,"-element"),Object(U.a)({},"".concat(It,"-active"),ut),ht);return e.createElement("div",{className:Lt},e.createElement(o,Object(E.a)({prefixCls:"".concat(It,"-avatar")},Nt)))};return e.createElement(i.a,null,k)};f.defaultProps={size:"default",shape:"circle"};var v=f,b=function(V){var k=function(K){var it=K.getPrefixCls,ct=V.prefixCls,ht=V.className,ut=V.active,It=it("skeleton",ct),Nt=Object(u.a)(V,["prefixCls"]),Lt=l()(It,"".concat(It,"-element"),Object(U.a)({},"".concat(It,"-active"),ut),ht);return e.createElement("div",{className:Lt},e.createElement(o,Object(E.a)({prefixCls:"".concat(It,"-button")},Nt)))};return e.createElement(i.a,null,k)};b.defaultProps={size:"default"};var y=b,g=function(V){var k=function(K){var it=K.getPrefixCls,ct=V.prefixCls,ht=V.className,ut=V.active,It=it("skeleton",ct),Nt=Object(u.a)(V,["prefixCls"]),Lt=l()(It,"".concat(It,"-element"),Object(U.a)({},"".concat(It,"-active"),ut),ht);return e.createElement("div",{className:Lt},e.createElement(o,Object(E.a)({prefixCls:"".concat(It,"-input")},Nt)))};return e.createElement(i.a,null,k)};g.defaultProps={size:"default"};var _=g,M="M365.714286 329.142857q0 45.714286-32.036571 77.677714t-77.677714 32.036571-77.677714-32.036571-32.036571-77.677714 32.036571-77.677714 77.677714-32.036571 77.677714 32.036571 32.036571 77.677714zM950.857143 548.571429l0 256-804.571429 0 0-109.714286 182.857143-182.857143 91.428571 91.428571 292.571429-292.571429zM1005.714286 146.285714l-914.285714 0q-7.460571 0-12.873143 5.412571t-5.412571 12.873143l0 694.857143q0 7.460571 5.412571 12.873143t12.873143 5.412571l914.285714 0q7.460571 0 12.873143-5.412571t5.412571-12.873143l0-694.857143q0-7.460571-5.412571-12.873143t-12.873143-5.412571zM1097.142857 164.571429l0 694.857143q0 37.741714-26.843429 64.585143t-64.585143 26.843429l-914.285714 0q-37.741714 0-64.585143-26.843429t-26.843429-64.585143l0-694.857143q0-37.741714 26.843429-64.585143t64.585143-26.843429l914.285714 0q37.741714 0 64.585143 26.843429t26.843429 64.585143z",x=function(V){var k=function(K){var it=K.getPrefixCls,ct=V.prefixCls,ht=V.className,ut=V.style,It=it("skeleton",ct),Nt=l()(It,"".concat(It,"-element"),ht);return e.createElement("div",{className:Nt},e.createElement("div",{className:l()("".concat(It,"-image"),ht),style:ut},e.createElement("svg",{viewBox:"0 0 1098 1024",xmlns:"http://www.w3.org/2000/svg",className:"".concat(It,"-image-svg")},e.createElement("path",{d:M,className:"".concat(It,"-image-path")}))))};return e.createElement(i.a,null,k)},m=x;function S(Z){return Z&&Object(T.a)(Z)==="object"?Z:{}}function P(Z,V){return Z&&!V?{size:"large",shape:"square"}:{size:"large",shape:"circle"}}function A(Z,V){return!Z&&V?{width:"38%"}:Z&&V?{width:"50%"}:{}}function O(Z,V){var k={};return(!Z||!V)&&(k.width="61%"),!Z&&V?k.rows=3:k.rows=2,k}var R=function(V){var k=function(K){var it=K.getPrefixCls,ct=K.direction,ht=V.prefixCls,ut=V.loading,It=V.className,Nt=V.children,Lt=V.avatar,_t=V.title,mt=V.paragraph,At=V.active,rt=V.round,Mt=it("skeleton",ht);if(ut||!("loading"in V)){var z,$=!!Lt,dt=!!_t,et=!!mt,ot;if($){var pt=Object(E.a)(Object(E.a)({prefixCls:"".concat(Mt,"-avatar")},P(dt,et)),S(Lt));ot=e.createElement("div",{className:"".concat(Mt,"-header")},e.createElement(o,pt))}var H;if(dt||et){var nt;if(dt){var at=Object(E.a)(Object(E.a)({prefixCls:"".concat(Mt,"-title")},A($,et)),S(_t));nt=e.createElement(c,at)}var q;if(et){var Et=Object(E.a)(Object(E.a)({prefixCls:"".concat(Mt,"-paragraph")},O($,dt)),S(mt));q=e.createElement(n,Et)}H=e.createElement("div",{className:"".concat(Mt,"-content")},nt,q)}var vt=l()(Mt,(z={},Object(U.a)(z,"".concat(Mt,"-with-avatar"),$),Object(U.a)(z,"".concat(Mt,"-active"),At),Object(U.a)(z,"".concat(Mt,"-rtl"),ct==="rtl"),Object(U.a)(z,"".concat(Mt,"-round"),rt),z),It);return e.createElement("div",{className:vt},ot,H)}return Nt};return e.createElement(i.a,null,k)};R.defaultProps={avatar:!1,title:!0,paragraph:!0},R.Button=y,R.Avatar=v,R.Input=_,R.Image=m;var W=R,F=ft.a=W},"/zsF":function(Se,ft,L){"use strict";var U=L("cIOH"),E=L.n(U),T=L("bE4E"),e=L.n(T)},"0JQy":function(Se,ft){var L="\\ud800-\\udfff",U="\\u0300-\\u036f",E="\\ufe20-\\ufe2f",T="\\u20d0-\\u20ff",e=U+E+T,t="\\ufe0e\\ufe0f",l="["+L+"]",s="["+e+"]",c="\\ud83c[\\udffb-\\udfff]",r="(?:"+s+"|"+c+")",h="[^"+L+"]",n="(?:\\ud83c[\\udde6-\\uddff]){2}",i="[\\ud800-\\udbff][\\udc00-\\udfff]",a="\\u200d",o=r+"?",u="["+t+"]?",f="(?:"+a+"(?:"+[h,n,i].join("|")+")"+u+o+")*",v=u+o+f,b="(?:"+[h+s+"?",s,n,i,l].join("|")+")",y=RegExp(c+"(?="+c+")|"+b+v,"g");function g(_){return _.match(y)||[]}Se.exports=g},"0ZTe":function(Se,ft,L){var U=L("wy8a"),E=L("quyA"),T=L("Em2t"),e=L("dt0z");function t(l){return function(s){s=e(s);var c=E(s)?T(s):void 0,r=c?c[0]:s.charAt(0),h=c?U(c,1).join(""):s.slice(1);return r[l]()+h}}Se.exports=t},"0eqD":function(Se,ft){},"0gSV":function(Se,ft,L){"use strict";Object.defineProperty(ft,"__esModule",{value:!0}),ft.tagged=void 0;var U=L("GXnB"),E=L("Ztfv");function T(e,t){return function(l,s,c){var r=new U.Metadata(e,t);typeof c=="number"?E.tagParameter(l,s,c,r):E.tagProperty(l,s,r)}}ft.tagged=T},"0wsv":function(Se,ft,L){"use strict";L.d(ft,"b",function(){return t}),L.d(ft,"f",function(){return s}),L.d(ft,"e",function(){return n}),L.d(ft,"g",function(){return y}),L.d(ft,"a",function(){return m}),L.d(ft,"c",function(){return A}),L.d(ft,"d",function(){return O});var U=63710088e-1,E={centimeters:U*100,centimetres:U*100,degrees:U/111325,feet:U*3.28084,inches:U*39.37,kilometers:U/1e3,kilometres:U/1e3,meters:U,metres:U,miles:U/1609.344,millimeters:U*1e3,millimetres:U*1e3,nauticalmiles:U/1852,radians:1,yards:U/1.0936},T={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/U,yards:1/1.0936},e={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function t(F,Z,V){V===void 0&&(V={});var k={type:"Feature"};return(V.id===0||V.id)&&(k.id=V.id),V.bbox&&(k.bbox=V.bbox),k.properties=Z||{},k.geometry=F,k}function l(F,Z,V){switch(V===void 0&&(V={}),F){case"Point":return s(Z).geometry;case"LineString":return n(Z).geometry;case"Polygon":return r(Z).geometry;case"MultiPoint":return u(Z).geometry;case"MultiLineString":return o(Z).geometry;case"MultiPolygon":return f(Z).geometry;default:throw new Error(F+" is invalid")}}function s(F,Z,V){if(V===void 0&&(V={}),!F)throw new Error("coordinates is required");if(!Array.isArray(F))throw new Error("coordinates must be an Array");if(F.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!A(F[0])||!A(F[1]))throw new Error("coordinates must contain numbers");var k={type:"Point",coordinates:F};return t(k,Z,V)}function c(F,Z,V){return V===void 0&&(V={}),a(F.map(function(k){return s(k,Z)}),V)}function r(F,Z,V){V===void 0&&(V={});for(var k=0,Y=F;k<Y.length;k++){var K=Y[k];if(K.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var it=0;it<K[K.length-1].length;it++)if(K[K.length-1][it]!==K[0][it])throw new Error("First and last Position are not equivalent.")}var ct={type:"Polygon",coordinates:F};return t(ct,Z,V)}function h(F,Z,V){return V===void 0&&(V={}),a(F.map(function(k){return r(k,Z)}),V)}function n(F,Z,V){if(V===void 0&&(V={}),F.length<2)throw new Error("coordinates must be an array of two or more positions");var k={type:"LineString",coordinates:F};return t(k,Z,V)}function i(F,Z,V){return V===void 0&&(V={}),a(F.map(function(k){return n(k,Z)}),V)}function a(F,Z){Z===void 0&&(Z={});var V={type:"FeatureCollection"};return Z.id&&(V.id=Z.id),Z.bbox&&(V.bbox=Z.bbox),V.features=F,V}function o(F,Z,V){V===void 0&&(V={});var k={type:"MultiLineString",coordinates:F};return t(k,Z,V)}function u(F,Z,V){V===void 0&&(V={});var k={type:"MultiPoint",coordinates:F};return t(k,Z,V)}function f(F,Z,V){V===void 0&&(V={});var k={type:"MultiPolygon",coordinates:F};return t(k,Z,V)}function v(F,Z,V){V===void 0&&(V={});var k={type:"GeometryCollection",geometries:F};return t(k,Z,V)}function b(F,Z){if(Z===void 0&&(Z=0),Z&&!(Z>=0))throw new Error("precision must be a positive number");var V=Math.pow(10,Z||0);return Math.round(F*V)/V}function y(F,Z){Z===void 0&&(Z="kilometers");var V=E[Z];if(!V)throw new Error(Z+" units is invalid");return F*V}function g(F,Z){Z===void 0&&(Z="kilometers");var V=E[Z];if(!V)throw new Error(Z+" units is invalid");return F/V}function _(F,Z){return x(g(F,Z))}function M(F){var Z=F%360;return Z<0&&(Z+=360),Z}function x(F){var Z=F%(2*Math.PI);return Z*180/Math.PI}function m(F){var Z=F%360;return Z*Math.PI/180}function S(F,Z,V){if(Z===void 0&&(Z="kilometers"),V===void 0&&(V="kilometers"),!(F>=0))throw new Error("length must be a positive number");return y(g(F,Z),V)}function P(F,Z,V){if(Z===void 0&&(Z="meters"),V===void 0&&(V="kilometers"),!(F>=0))throw new Error("area must be a positive number");var k=e[Z];if(!k)throw new Error("invalid original units");var Y=e[V];if(!Y)throw new Error("invalid final units");return F/k*Y}function A(F){return!isNaN(F)&&F!==null&&!Array.isArray(F)}function O(F){return!!F&&F.constructor===Object}function R(F){if(!F)throw new Error("bbox is required");if(!Array.isArray(F))throw new Error("bbox must be an Array");if(F.length!==4&&F.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");F.forEach(function(Z){if(!A(Z))throw new Error("bbox must only contain numbers")})}function W(F){if(!F)throw new Error("id is required");if(["string","number"].indexOf(typeof F)===-1)throw new Error("id must be a number or a string")}},"1+5i":function(Se,ft,L){var U=L("w/wX"),E=L("sEf8"),T=L("mdPL"),e=T&&T.isSet,t=e?E(e):U;Se.exports=t},"14J3":function(Se,ft,L){"use strict";var U=L("cIOH"),E=L.n(U),T=L("1GLa")},"1ABj":function(Se,ft){function L(U,E){throw new Error("Decorating class property failed. Please ensure that proposal-class-properties is enabled and runs after the decorators transform.")}Se.exports=L,Se.exports.default=Se.exports,Se.exports.__esModule=!0},"1gqn":function(Se,ft){Se.exports=function(U){return U&&typeof U=="object"&&typeof U.copy=="function"&&typeof U.fill=="function"&&typeof U.readUInt8=="function"}},"1jvM":function(Se,ft){},"2ajD":function(Se,ft){function L(U){return U!==U}Se.exports=L},"3DfO":function(Se,ft){function L(U){return U==null}Se.exports=L},"3L66":function(Se,ft,L){var U=L("MMmD"),E=L("ExA7");function T(e){return E(e)&&U(e)}Se.exports=T},"3cYt":function(Se,ft){function L(U){return function(E){return U==null?void 0:U[E]}}Se.exports=L},"406g":function(Se,ft,L){"use strict";Object.defineProperty(ft,"__esModule",{value:!0}),ft.BindingOnSyntax=void 0;var U=L("z4Hk"),E=function(){function T(e){this._binding=e}return T.prototype.onActivation=function(e){return this._binding.onActivation=e,new U.BindingWhenSyntax(this._binding)},T}();ft.BindingOnSyntax=E},"4U9+":function(Se,ft,L){"use strict";Object.defineProperty(ft,"__esModule",{value:!0}),ft.default=function(u){return(0,E.default)((0,c.default)(u)&&u.length>=1,"Must merge at least 1 JSON schema."),e.default.apply(void 0,[{}].concat(o(u),[function(f,v,b){if(!(0,l.default)(f)){if(b==="required")return(0,h.default)(f.concat(v));if((0,i.default)(f)){if(!(0,i.default)(v))throw new Error('Failed to merge schemas because "'+b+'" has different values.');return}E.default.deepEqual(f,v,'Failed to merge schemas because "'+b+'" has different values: '+JSON.stringify(f)+" and "+JSON.stringify(v)+".")}}]))};var U=L("9lTW"),E=a(U),T=L("qd8s"),e=a(T),t=L("3DfO"),l=a(t),s=L("WFAs"),c=a(s),r=L("w26f"),h=a(r),n=L("zZPE"),i=a(n);function a(u){return u&&u.__esModule?u:{default:u}}function o(u){if(Array.isArray(u)){for(var f=0,v=Array(u.length);f<u.length;f++)v[f]=u[f];return v}else return Array.from(u)}Se.exports=ft.default},"4ZJM":function(Se,ft,L){(function(U,E){Se.exports=E()})(this,function(){"use strict";var U,E,T;function e(t,l){if(!U)U=l;else if(!E)E=l;else{var s="var sharedChunk = {}; ("+U+")(sharedChunk); ("+E+")(sharedChunk);",c={};U(c),T=l(c),typeof window!="undefined"&&(T.workerUrl=window.URL.createObjectURL(new Blob([s],{type:"text/javascript"})))}}return e(["exports"],function(t){"use strict";function l(d,p){return d(p={exports:{}},p.exports),p.exports}var s=c;function c(d,p,C,N){this.cx=3*d,this.bx=3*(C-d)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*p,this.by=3*(N-p)-this.cy,this.ay=1-this.cy-this.by,this.p1x=d,this.p1y=N,this.p2x=C,this.p2y=N}c.prototype.sampleCurveX=function(d){return((this.ax*d+this.bx)*d+this.cx)*d},c.prototype.sampleCurveY=function(d){return((this.ay*d+this.by)*d+this.cy)*d},c.prototype.sampleCurveDerivativeX=function(d){return(3*this.ax*d+2*this.bx)*d+this.cx},c.prototype.solveCurveX=function(d,p){var C,N,X,lt,Pt;for(p===void 0&&(p=1e-6),X=d,Pt=0;Pt<8;Pt++){if(lt=this.sampleCurveX(X)-d,Math.abs(lt)<p)return X;var Bt=this.sampleCurveDerivativeX(X);if(Math.abs(Bt)<1e-6)break;X-=lt/Bt}if((X=d)<(C=0))return C;if(X>(N=1))return N;for(;C<N;){if(lt=this.sampleCurveX(X),Math.abs(lt-d)<p)return X;d>lt?C=X:N=X,X=.5*(N-C)+C}return X},c.prototype.solve=function(d,p){return this.sampleCurveY(this.solveCurveX(d,p))};var r=h;function h(d,p){this.x=d,this.y=p}h.prototype={clone:function(){return new h(this.x,this.y)},add:function(p){return this.clone()._add(p)},sub:function(p){return this.clone()._sub(p)},multByPoint:function(p){return this.clone()._multByPoint(p)},divByPoint:function(p){return this.clone()._divByPoint(p)},mult:function(p){return this.clone()._mult(p)},div:function(p){return this.clone()._div(p)},rotate:function(p){return this.clone()._rotate(p)},rotateAround:function(p,C){return this.clone()._rotateAround(p,C)},matMult:function(p){return this.clone()._matMult(p)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(p){return this.x===p.x&&this.y===p.y},dist:function(p){return Math.sqrt(this.distSqr(p))},distSqr:function(p){var C=p.x-this.x,N=p.y-this.y;return C*C+N*N},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(p){return Math.atan2(this.y-p.y,this.x-p.x)},angleWith:function(p){return this.angleWithSep(p.x,p.y)},angleWithSep:function(p,C){return Math.atan2(this.x*C-this.y*p,this.x*p+this.y*C)},_matMult:function(p){var C=p[2]*this.x+p[3]*this.y;return this.x=p[0]*this.x+p[1]*this.y,this.y=C,this},_add:function(p){return this.x+=p.x,this.y+=p.y,this},_sub:function(p){return this.x-=p.x,this.y-=p.y,this},_mult:function(p){return this.x*=p,this.y*=p,this},_div:function(p){return this.x/=p,this.y/=p,this},_multByPoint:function(p){return this.x*=p.x,this.y*=p.y,this},_divByPoint:function(p){return this.x/=p.x,this.y/=p.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var p=this.y;return this.y=this.x,this.x=-p,this},_rotate:function(p){var C=Math.cos(p),N=Math.sin(p),X=N*this.x+C*this.y;return this.x=C*this.x-N*this.y,this.y=X,this},_rotateAround:function(p,C){var N=Math.cos(p),X=Math.sin(p),lt=C.y+X*(this.x-C.x)+N*(this.y-C.y);return this.x=C.x+N*(this.x-C.x)-X*(this.y-C.y),this.y=lt,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},h.convert=function(d){return d instanceof h?d:Array.isArray(d)?new h(d[0],d[1]):d};var n=typeof self!="undefined"?self:{},i=Math.pow(2,53)-1;function a(d,p,C,N){var X=new s(d,p,C,N);return function(lt){return X.solve(lt)}}var o=a(.25,.1,.25,1);function u(d,p,C){return Math.min(C,Math.max(p,d))}function f(d,p,C){var N=C-p,X=((d-p)%N+N)%N+p;return X===p?C:X}function v(d){for(var p=[],C=arguments.length-1;C-- >0;)p[C]=arguments[C+1];for(var N=0,X=p;N<X.length;N+=1){var lt=X[N];for(var Pt in lt)d[Pt]=lt[Pt]}return d}var b=1;function y(){return b++}function g(){return function d(p){return p?(p^16*Math.random()>>p/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,d)}()}function _(d){return!!d&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(d)}function M(d,p){d.forEach(function(C){p[C]&&(p[C]=p[C].bind(p))})}function x(d,p){return d.indexOf(p,d.length-p.length)!==-1}function m(d,p,C){var N={};for(var X in d)N[X]=p.call(C||this,d[X],X,d);return N}function S(d,p,C){var N={};for(var X in d)p.call(C||this,d[X],X,d)&&(N[X]=d[X]);return N}function P(d){return Array.isArray(d)?d.map(P):typeof d=="object"&&d?m(d,P):d}var A={};function O(d){A[d]||(typeof console!="undefined"&&console.warn(d),A[d]=!0)}function R(d,p,C){return(C.y-d.y)*(p.x-d.x)>(p.y-d.y)*(C.x-d.x)}function W(d){for(var p=0,C=0,N=d.length,X=N-1,lt=void 0,Pt=void 0;C<N;X=C++)p+=((Pt=d[X]).x-(lt=d[C]).x)*(lt.y+Pt.y);return p}function F(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function Z(d){var p={};if(d.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(N,X,lt,Pt){var Bt=lt||Pt;return p[X]=!Bt||Bt.toLowerCase(),""}),p["max-age"]){var C=parseInt(p["max-age"],10);isNaN(C)?delete p["max-age"]:p["max-age"]=C}return p}var V=null;function k(d){if(V==null){var p=d.navigator?d.navigator.userAgent:null;V=!!d.safari||!(!p||!(/\b(iPad|iPhone|iPod)\b/.test(p)||p.match("Safari")&&!p.match("Chrome")))}return V}function Y(d){try{var p=n[d];return p.setItem("_mapbox_test_",1),p.removeItem("_mapbox_test_"),!0}catch(C){return!1}}var K,it,ct,ht,ut=n.performance&&n.performance.now?n.performance.now.bind(n.performance):Date.now.bind(Date),It=n.requestAnimationFrame||n.mozRequestAnimationFrame||n.webkitRequestAnimationFrame||n.msRequestAnimationFrame,Nt=n.cancelAnimationFrame||n.mozCancelAnimationFrame||n.webkitCancelAnimationFrame||n.msCancelAnimationFrame,Lt={now:ut,frame:function(p){var C=It(p);return{cancel:function(){return Nt(C)}}},getImageData:function(p,C){C===void 0&&(C=0);var N=n.document.createElement("canvas"),X=N.getContext("2d");if(!X)throw new Error("failed to create canvas 2d context");return N.width=p.width,N.height=p.height,X.drawImage(p,0,0,p.width,p.height),X.getImageData(-C,-C,p.width+2*C,p.height+2*C)},resolveURL:function(p){return K||(K=n.document.createElement("a")),K.href=p,K.href},hardwareConcurrency:n.navigator&&n.navigator.hardwareConcurrency||4,get devicePixelRatio(){return n.devicePixelRatio},get prefersReducedMotion(){return!!n.matchMedia&&(it==null&&(it=n.matchMedia("(prefers-reduced-motion: reduce)")),it.matches)}},_t={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},mt={supported:!1,testSupport:function(p){!At&&ht&&(rt?Mt(p):ct=p)}},At=!1,rt=!1;function Mt(d){var p=d.createTexture();d.bindTexture(d.TEXTURE_2D,p);try{if(d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,ht),d.isContextLost())return;mt.supported=!0}catch(C){}d.deleteTexture(p),At=!0}n.document&&((ht=n.document.createElement("img")).onload=function(){ct&&Mt(ct),ct=null,rt=!0},ht.onerror=function(){At=!0,ct=null},ht.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var z="01",$=function(p,C){this._transformRequestFn=p,this._customAccessToken=C,this._createSkuToken()};function dt(d){return d.indexOf("mapbox:")===0}$.prototype._createSkuToken=function(){var d=function(){for(var p="",C=0;C<10;C++)p+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",z,p].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=d.token,this._skuTokenExpiresAt=d.tokenExpiresAt},$.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},$.prototype.transformRequest=function(d,p){return this._transformRequestFn&&this._transformRequestFn(d,p)||{url:d}},$.prototype.normalizeStyleURL=function(d,p){if(!dt(d))return d;var C=H(d);return C.path="/styles/v1"+C.path,this._makeAPIURL(C,this._customAccessToken||p)},$.prototype.normalizeGlyphsURL=function(d,p){if(!dt(d))return d;var C=H(d);return C.path="/fonts/v1"+C.path,this._makeAPIURL(C,this._customAccessToken||p)},$.prototype.normalizeSourceURL=function(d,p){if(!dt(d))return d;var C=H(d);return C.path="/v4/"+C.authority+".json",C.params.push("secure"),this._makeAPIURL(C,this._customAccessToken||p)},$.prototype.normalizeSpriteURL=function(d,p,C,N){var X=H(d);return dt(d)?(X.path="/styles/v1"+X.path+"/sprite"+p+C,this._makeAPIURL(X,this._customAccessToken||N)):(X.path+=""+p+C,nt(X))},$.prototype.normalizeTileURL=function(d,p){if(this._isSkuTokenExpired()&&this._createSkuToken(),d&&!dt(d))return d;var C=H(d);C.path=C.path.replace(/(\.(png|jpg)\d*)(?=$)/,(Lt.devicePixelRatio>=2||p===512?"@2x":"")+(mt.supported?".webp":"$1")),C.path=C.path.replace(/^.+\/v4\//,"/"),C.path="/v4"+C.path;var N=this._customAccessToken||function(X){for(var lt=0,Pt=X;lt<Pt.length;lt+=1){var Bt=Pt[lt].match(/^access_token=(.*)$/);if(Bt)return Bt[1]}return null}(C.params)||_t.ACCESS_TOKEN;return _t.REQUIRE_ACCESS_TOKEN&&N&&this._skuToken&&C.params.push("sku="+this._skuToken),this._makeAPIURL(C,N)},$.prototype.canonicalizeTileURL=function(d,p){var C=H(d);if(!C.path.match(/(^\/v4\/)/)||!C.path.match(/\.[\w]+$/))return d;var N="mapbox://tiles/";N+=C.path.replace("/v4/","");var X=C.params;return p&&(X=X.filter(function(lt){return!lt.match(/^access_token=/)})),X.length&&(N+="?"+X.join("&")),N},$.prototype.canonicalizeTileset=function(d,p){for(var C=!!p&&dt(p),N=[],X=0,lt=d.tiles||[];X<lt.length;X+=1){var Pt=lt[X];ot(Pt)?N.push(this.canonicalizeTileURL(Pt,C)):N.push(Pt)}return N},$.prototype._makeAPIURL=function(d,p){var C="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",N=H(_t.API_URL);if(d.protocol=N.protocol,d.authority=N.authority,d.protocol==="http"){var X=d.params.indexOf("secure");X>=0&&d.params.splice(X,1)}if(N.path!=="/"&&(d.path=""+N.path+d.path),!_t.REQUIRE_ACCESS_TOKEN)return nt(d);if(!(p=p||_t.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+C);if(p[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+C);return d.params=d.params.filter(function(lt){return lt.indexOf("access_token")===-1}),d.params.push("access_token="+p),nt(d)};var et=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function ot(d){return et.test(d)}var pt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function H(d){var p=d.match(pt);if(!p)throw new Error("Unable to parse URL object");return{protocol:p[1],authority:p[2],path:p[3]||"/",params:p[4]?p[4].split("&"):[]}}function nt(d){var p=d.params.length?"?"+d.params.join("&"):"";return d.protocol+"://"+d.authority+d.path+p}function at(d){if(!d)return null;var p=d.split(".");if(!p||p.length!==3)return null;try{return JSON.parse(decodeURIComponent(n.atob(p[1]).split("").map(function(C){return"%"+("00"+C.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch(C){return null}}var q=function(p){this.type=p,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};q.prototype.getStorageKey=function(d){var p,C=at(_t.ACCESS_TOKEN);return p=C&&C.u?n.btoa(encodeURIComponent(C.u).replace(/%([0-9A-F]{2})/g,function(N,X){return String.fromCharCode(Number("0x"+X))})):_t.ACCESS_TOKEN||"",d?"mapbox.eventData."+d+":"+p:"mapbox.eventData:"+p},q.prototype.fetchEventData=function(){var d=Y("localStorage"),p=this.getStorageKey(),C=this.getStorageKey("uuid");if(d)try{var N=n.localStorage.getItem(p);N&&(this.eventData=JSON.parse(N));var X=n.localStorage.getItem(C);X&&(this.anonId=X)}catch(lt){O("Unable to read from LocalStorage")}},q.prototype.saveEventData=function(){var d=Y("localStorage"),p=this.getStorageKey(),C=this.getStorageKey("uuid");if(d)try{n.localStorage.setItem(C,this.anonId),Object.keys(this.eventData).length>=1&&n.localStorage.setItem(p,JSON.stringify(this.eventData))}catch(N){O("Unable to write to LocalStorage")}},q.prototype.processRequests=function(d){},q.prototype.postEvent=function(d,p,C,N){var X=this;if(_t.EVENTS_URL){var lt=H(_t.EVENTS_URL);lt.params.push("access_token="+(N||_t.ACCESS_TOKEN||""));var Pt={event:this.type,created:new Date(d).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.1",skuId:z,userId:this.anonId},Bt=p?v(Pt,p):Pt,Xt={url:nt(lt),headers:{"Content-Type":"text/plain"},body:JSON.stringify([Bt])};this.pendingRequest=fi(Xt,function(he){X.pendingRequest=null,C(he),X.saveEventData(),X.processRequests(N)})}},q.prototype.queueRequest=function(d,p){this.queue.push(d),this.processRequests(p)};var Et,vt,Ft=function(d){function p(){d.call(this,"map.load"),this.success={},this.skuToken=""}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.postMapLoadEvent=function(C,N,X,lt){this.skuToken=X,(_t.EVENTS_URL&&lt||_t.ACCESS_TOKEN&&Array.isArray(C)&&C.some(function(Pt){return dt(Pt)||ot(Pt)}))&&this.queueRequest({id:N,timestamp:Date.now()},lt)},p.prototype.processRequests=function(C){var N=this;if(!this.pendingRequest&&this.queue.length!==0){var X=this.queue.shift(),lt=X.id,Pt=X.timestamp;lt&&this.success[lt]||(this.anonId||this.fetchEventData(),_(this.anonId)||(this.anonId=g()),this.postEvent(Pt,{skuToken:this.skuToken},function(Bt){Bt||lt&&(N.success[lt]=!0)},C))}},p}(q),Qt=new(function(d){function p(C){d.call(this,"appUserTurnstile"),this._customAccessToken=C}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.postTurnstileEvent=function(C,N){_t.EVENTS_URL&&_t.ACCESS_TOKEN&&Array.isArray(C)&&C.some(function(X){return dt(X)||ot(X)})&&this.queueRequest(Date.now(),N)},p.prototype.processRequests=function(C){var N=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var X=at(_t.ACCESS_TOKEN),lt=X?X.u:_t.ACCESS_TOKEN,Pt=lt!==this.eventData.tokenU;_(this.anonId)||(this.anonId=g(),Pt=!0);var Bt=this.queue.shift();if(this.eventData.lastSuccess){var Xt=new Date(this.eventData.lastSuccess),he=new Date(Bt),Re=(Bt-this.eventData.lastSuccess)/864e5;Pt=Pt||Re>=1||Re<-1||Xt.getDate()!==he.getDate()}else Pt=!0;if(!Pt)return this.processRequests();this.postEvent(Bt,{"enabled.telemetry":!1},function(Ge){Ge||(N.eventData.lastSuccess=Bt,N.eventData.tokenU=lt)},C)}},p}(q)),ee=Qt.postTurnstileEvent.bind(Qt),Gt=new Ft,$t=Gt.postMapLoadEvent.bind(Gt),Pe=500,me=50;function le(){n.caches&&!Et&&(Et=n.caches.open("mapbox-tiles"))}function be(d){var p=d.indexOf("?");return p<0?d:d.slice(0,p)}var ze,Xe=1/0;function _n(){return ze==null&&(ze=n.OffscreenCanvas&&new n.OffscreenCanvas(1,1).getContext("2d")&&typeof n.createImageBitmap=="function"),ze}var Kn={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Kn);var Hn=function(d){function p(C,N,X){N===401&&ot(X)&&(C+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),d.call(this,C),this.status=N,this.url=X,this.name=this.constructor.name,this.message=C}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},p}(Error),nn=F()?function(){return self.worker&&self.worker.referrer}:function(){return(n.location.protocol==="blob:"?n.parent:n).location.href},en,An,Nn=function(p,C){if(!(/^file:/.test(N=p.url)||/^file:/.test(nn())&&!/^\w+:/.test(N))){if(n.fetch&&n.Request&&n.AbortController&&n.Request.prototype.hasOwnProperty("signal"))return function(X,lt){var Pt,Bt=new n.AbortController,Xt=new n.Request(X.url,{method:X.method||"GET",body:X.body,credentials:X.credentials,headers:X.headers,referrer:nn(),signal:Bt.signal}),he=!1,Re=!1,Ge=(Pt=Xt.url).indexOf("sku=")>0&&ot(Pt);X.type==="json"&&Xt.headers.set("Accept","application/json");var He=function(Cn,$n,Xn){if(!Re){if(Cn&&Cn.message!=="SecurityError"&&O(Cn),$n&&Xn)return cn($n);var _r=Date.now();n.fetch(Xt).then(function(Nr){if(Nr.ok){var Gr=Ge?Nr.clone():null;return cn(Nr,Gr,_r)}return lt(new Hn(Nr.statusText,Nr.status,X.url))}).catch(function(Nr){Nr.code!==20&&lt(new Error(Nr.message))})}},cn=function(Cn,$n,Xn){(X.type==="arrayBuffer"?Cn.arrayBuffer():X.type==="json"?Cn.json():Cn.text()).then(function(_r){Re||($n&&Xn&&function(Nr,Gr,pi){if(le(),Et){var oi={status:Gr.status,statusText:Gr.statusText,headers:new n.Headers};Gr.headers.forEach(function(Bi,Qi){return oi.headers.set(Qi,Bi)});var Ni=Z(Gr.headers.get("Cache-Control")||"");Ni["no-store"]||(Ni["max-age"]&&oi.headers.set("Expires",new Date(pi+1e3*Ni["max-age"]).toUTCString()),new Date(oi.headers.get("Expires")).getTime()-pi<42e4||function(Bi,Qi){if(vt===void 0)try{new Response(new ReadableStream),vt=!0}catch(pa){vt=!1}vt?Qi(Bi.body):Bi.blob().then(Qi)}(Gr,function(Bi){var Qi=new n.Response(Bi,oi);le(),Et&&Et.then(function(pa){return pa.put(be(Nr.url),Qi)}).catch(function(pa){return O(pa.message)})}))}}(Xt,$n,Xn),he=!0,lt(null,_r,Cn.headers.get("Cache-Control"),Cn.headers.get("Expires")))}).catch(function(_r){Re||lt(new Error(_r.message))})};return Ge?function(Rn,Cn){if(le(),!Et)return Cn(null);var $n=be(Rn.url);Et.then(function(Xn){Xn.match($n).then(function(_r){var Nr=function(Gr){if(!Gr)return!1;var pi=new Date(Gr.headers.get("Expires")||0),oi=Z(Gr.headers.get("Cache-Control")||"");return pi>Date.now()&&!oi["no-cache"]}(_r);Xn.delete($n),Nr&&Xn.put($n,_r.clone()),Cn(null,_r,Nr)}).catch(Cn)}).catch(Cn)}(Xt,He):He(null,null),{cancel:function(){Re=!0,he||Bt.abort()}}}(p,C);if(F()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",p,C,void 0,!0)}var N;return function(X,lt){var Pt=new n.XMLHttpRequest;for(var Bt in Pt.open(X.method||"GET",X.url,!0),X.type==="arrayBuffer"&&(Pt.responseType="arraybuffer"),X.headers)Pt.setRequestHeader(Bt,X.headers[Bt]);return X.type==="json"&&(Pt.responseType="text",Pt.setRequestHeader("Accept","application/json")),Pt.withCredentials=X.credentials==="include",Pt.onerror=function(){lt(new Error(Pt.statusText))},Pt.onload=function(){if((Pt.status>=200&&Pt.status<300||Pt.status===0)&&Pt.response!==null){var Xt=Pt.response;if(X.type==="json")try{Xt=JSON.parse(Pt.response)}catch(he){return lt(he)}lt(null,Xt,Pt.getResponseHeader("Cache-Control"),Pt.getResponseHeader("Expires"))}else lt(new Hn(Pt.statusText,Pt.status,X.url))},Pt.send(X.body),{cancel:function(){return Pt.abort()}}}(p,C)},hr=function(p,C){return Nn(v(p,{type:"arrayBuffer"}),C)},fi=function(p,C){return Nn(v(p,{method:"POST"}),C)},Oe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";en=[],An=0;var Ae=function d(p,C){if(mt.supported&&(p.headers||(p.headers={}),p.headers.accept="image/webp,*/*"),An>=_t.MAX_PARALLEL_IMAGE_REQUESTS){var N={requestParameters:p,callback:C,cancelled:!1,cancel:function(){this.cancelled=!0}};return en.push(N),N}An++;var X=!1,lt=function(){if(!X)for(X=!0,An--;en.length&&An<_t.MAX_PARALLEL_IMAGE_REQUESTS;){var Xt=en.shift();Xt.cancelled||(Xt.cancel=d(Xt.requestParameters,Xt.callback).cancel)}},Pt=hr(p,function(Bt,Xt,he,Re){lt(),Bt?C(Bt):Xt&&(_n()?function(Ge,He){var cn=new n.Blob([new Uint8Array(Ge)],{type:"image/png"});n.createImageBitmap(cn).then(function(Rn){He(null,Rn)}).catch(function(Rn){He(new Error("Could not load image because of "+Rn.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(Xt,C):function(Ge,He,cn,Rn){var Cn=new n.Image,$n=n.URL;Cn.onload=function(){He(null,Cn),$n.revokeObjectURL(Cn.src),Cn.onload=null,n.requestAnimationFrame(function(){Cn.src=Oe})},Cn.onerror=function(){return He(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Xn=new n.Blob([new Uint8Array(Ge)],{type:"image/png"});Cn.cacheControl=cn,Cn.expires=Rn,Cn.src=Ge.byteLength?$n.createObjectURL(Xn):Oe}(Xt,C,he,Re))});return{cancel:function(){Pt.cancel(),lt()}}};function Jt(d,p,C){C[d]&&C[d].indexOf(p)!==-1||(C[d]=C[d]||[],C[d].push(p))}function ve(d,p,C){if(C&&C[d]){var N=C[d].indexOf(p);N!==-1&&C[d].splice(N,1)}}var Vt=function(p,C){C===void 0&&(C={}),v(this,C),this.type=p},ie=function(d){function p(C,N){N===void 0&&(N={}),d.call(this,"error",v({error:C},N))}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p}(Vt),Ce=function(){};Ce.prototype.on=function(d,p){return this._listeners=this._listeners||{},Jt(d,p,this._listeners),this},Ce.prototype.off=function(d,p){return ve(d,p,this._listeners),ve(d,p,this._oneTimeListeners),this},Ce.prototype.once=function(d,p){return this._oneTimeListeners=this._oneTimeListeners||{},Jt(d,p,this._oneTimeListeners),this},Ce.prototype.fire=function(d,p){typeof d=="string"&&(d=new Vt(d,p||{}));var C=d.type;if(this.listens(C)){d.target=this;for(var N=0,X=this._listeners&&this._listeners[C]?this._listeners[C].slice():[];N<X.length;N+=1)X[N].call(this,d);for(var lt=0,Pt=this._oneTimeListeners&&this._oneTimeListeners[C]?this._oneTimeListeners[C].slice():[];lt<Pt.length;lt+=1){var Bt=Pt[lt];ve(C,Bt,this._oneTimeListeners),Bt.call(this,d)}var Xt=this._eventedParent;Xt&&(v(d,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),Xt.fire(d))}else d instanceof ie&&console.error(d.error);return this},Ce.prototype.listens=function(d){return this._listeners&&this._listeners[d]&&this._listeners[d].length>0||this._oneTimeListeners&&this._oneTimeListeners[d]&&this._oneTimeListeners[d].length>0||this._eventedParent&&this._eventedParent.listens(d)},Ce.prototype.setEventedParent=function(d,p){return this._eventedParent=d,this._eventedParentData=p,this};var ue={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},xe=function(p,C,N,X){this.message=(p?p+": ":"")+N,X&&(this.identifier=X),C!=null&&C.__line__&&(this.line=C.__line__)};function $e(d){var p=d.value;return p?[new xe(d.key,p,"constants have been deprecated as of v8")]:[]}function Fn(d){for(var p=[],C=arguments.length-1;C-- >0;)p[C]=arguments[C+1];for(var N=0,X=p;N<X.length;N+=1){var lt=X[N];for(var Pt in lt)d[Pt]=lt[Pt]}return d}function rr(d){return d instanceof Number||d instanceof String||d instanceof Boolean?d.valueOf():d}function En(d){if(Array.isArray(d))return d.map(En);if(d instanceof Object&&!(d instanceof Number||d instanceof String||d instanceof Boolean)){var p={};for(var C in d)p[C]=En(d[C]);return p}return rr(d)}var Pn=function(d){function p(C,N){d.call(this,N),this.message=N,this.key=C}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p}(Error),Er=function(p,C){C===void 0&&(C=[]),this.parent=p,this.bindings={};for(var N=0,X=C;N<X.length;N+=1){var lt=X[N];this.bindings[lt[0]]=lt[1]}};Er.prototype.concat=function(d){return new Er(this,d)},Er.prototype.get=function(d){if(this.bindings[d])return this.bindings[d];if(this.parent)return this.parent.get(d);throw new Error(d+" not found in scope.")},Er.prototype.has=function(d){return!!this.bindings[d]||!!this.parent&&this.parent.has(d)};var Pr={kind:"null"},ln={kind:"number"},Cr={kind:"string"},Ar={kind:"boolean"},je={kind:"color"},We={kind:"object"},Ye={kind:"value"},fn={kind:"collator"},mn={kind:"formatted"},jn={kind:"resolvedImage"};function bn(d,p){return{kind:"array",itemType:d,N:p}}function Ln(d){if(d.kind==="array"){var p=Ln(d.itemType);return typeof d.N=="number"?"array<"+p+", "+d.N+">":d.itemType.kind==="value"?"array":"array<"+p+">"}return d.kind}var nr=[Pr,ln,Cr,Ar,je,mn,We,bn(Ye),jn];function Yn(d,p){if(p.kind==="error")return null;if(d.kind==="array"){if(p.kind==="array"&&(p.N===0&&p.itemType.kind==="value"||!Yn(d.itemType,p.itemType))&&(typeof d.N!="number"||d.N===p.N))return null}else{if(d.kind===p.kind)return null;if(d.kind==="value"){for(var C=0,N=nr;C<N.length;C+=1)if(!Yn(N[C],p))return null}}return"Expected "+Ln(d)+" but found "+Ln(p)+" instead."}function Mn(d,p){return p.some(function(C){return C.kind===d.kind})}function Rr(d,p){return p.some(function(C){return C==="null"?d===null:C==="array"?Array.isArray(d):C==="object"?d&&!Array.isArray(d)&&typeof d=="object":C===typeof d})}var pr=l(function(d,p){var C={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function N(Bt){return(Bt=Math.round(Bt))<0?0:Bt>255?255:Bt}function X(Bt){return N(Bt[Bt.length-1]==="%"?parseFloat(Bt)/100*255:parseInt(Bt))}function lt(Bt){return(Xt=Bt[Bt.length-1]==="%"?parseFloat(Bt)/100:parseFloat(Bt))<0?0:Xt>1?1:Xt;var Xt}function Pt(Bt,Xt,he){return he<0?he+=1:he>1&&(he-=1),6*he<1?Bt+(Xt-Bt)*he*6:2*he<1?Xt:3*he<2?Bt+(Xt-Bt)*(2/3-he)*6:Bt}try{p.parseCSSColor=function(Bt){var Xt,he=Bt.replace(/ /g,"").toLowerCase();if(he in C)return C[he].slice();if(he[0]==="#")return he.length===4?(Xt=parseInt(he.substr(1),16))>=0&&Xt<=4095?[(3840&Xt)>>4|(3840&Xt)>>8,240&Xt|(240&Xt)>>4,15&Xt|(15&Xt)<<4,1]:null:he.length===7&&(Xt=parseInt(he.substr(1),16))>=0&&Xt<=16777215?[(16711680&Xt)>>16,(65280&Xt)>>8,255&Xt,1]:null;var Re=he.indexOf("("),Ge=he.indexOf(")");if(Re!==-1&&Ge+1===he.length){var He=he.substr(0,Re),cn=he.substr(Re+1,Ge-(Re+1)).split(","),Rn=1;switch(He){case"rgba":if(cn.length!==4)return null;Rn=lt(cn.pop());case"rgb":return cn.length!==3?null:[X(cn[0]),X(cn[1]),X(cn[2]),Rn];case"hsla":if(cn.length!==4)return null;Rn=lt(cn.pop());case"hsl":if(cn.length!==3)return null;var Cn=(parseFloat(cn[0])%360+360)%360/360,$n=lt(cn[1]),Xn=lt(cn[2]),_r=Xn<=.5?Xn*($n+1):Xn+$n-Xn*$n,Nr=2*Xn-_r;return[N(255*Pt(Nr,_r,Cn+1/3)),N(255*Pt(Nr,_r,Cn)),N(255*Pt(Nr,_r,Cn-1/3)),Rn];default:return null}}return null}}catch(Bt){}}).parseCSSColor,zr=function(p,C,N,X){X===void 0&&(X=1),this.r=p,this.g=C,this.b=N,this.a=X};zr.parse=function(d){if(d){if(d instanceof zr)return d;if(typeof d=="string"){var p=pr(d);if(p)return new zr(p[0]/255*p[3],p[1]/255*p[3],p[2]/255*p[3],p[3])}}},zr.prototype.toString=function(){var d=this.toArray(),p=d[1],C=d[2],N=d[3];return"rgba("+Math.round(d[0])+","+Math.round(p)+","+Math.round(C)+","+N+")"},zr.prototype.toArray=function(){var d=this.a;return d===0?[0,0,0,0]:[255*this.r/d,255*this.g/d,255*this.b/d,d]},zr.black=new zr(0,0,0,1),zr.white=new zr(1,1,1,1),zr.transparent=new zr(0,0,0,0),zr.red=new zr(1,0,0,1);var Pi=function(p,C,N){this.sensitivity=p?C?"variant":"case":C?"accent":"base",this.locale=N,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Pi.prototype.compare=function(d,p){return this.collator.compare(d,p)},Pi.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Oa=function(p,C,N,X,lt){this.text=p,this.image=C,this.scale=N,this.fontStack=X,this.textColor=lt},Ua=function(p){this.sections=p};Ua.fromString=function(d){return new Ua([new Oa(d,null,null,null,null)])},Ua.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(d){return d.text.length!==0||d.image&&d.image.name.length!==0})},Ua.factory=function(d){return d instanceof Ua?d:Ua.fromString(d)},Ua.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(d){return d.text}).join("")},Ua.prototype.serialize=function(){for(var d=["format"],p=0,C=this.sections;p<C.length;p+=1){var N=C[p];if(N.image)d.push(["image",N.image.name]);else{d.push(N.text);var X={};N.fontStack&&(X["text-font"]=["literal",N.fontStack.split(",")]),N.scale&&(X["font-scale"]=N.scale),N.textColor&&(X["text-color"]=["rgba"].concat(N.textColor.toArray())),d.push(X)}}return d};var ro=function(p){this.name=p.name,this.available=p.available};function Ko(d,p,C,N){return typeof d=="number"&&d>=0&&d<=255&&typeof p=="number"&&p>=0&&p<=255&&typeof C=="number"&&C>=0&&C<=255?N===void 0||typeof N=="number"&&N>=0&&N<=1?null:"Invalid rgba value ["+[d,p,C,N].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof N=="number"?[d,p,C,N]:[d,p,C]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function _a(d){if(d===null||typeof d=="string"||typeof d=="boolean"||typeof d=="number"||d instanceof zr||d instanceof Pi||d instanceof Ua||d instanceof ro)return!0;if(Array.isArray(d)){for(var p=0,C=d;p<C.length;p+=1)if(!_a(C[p]))return!1;return!0}if(typeof d=="object"){for(var N in d)if(!_a(d[N]))return!1;return!0}return!1}function co(d){if(d===null)return Pr;if(typeof d=="string")return Cr;if(typeof d=="boolean")return Ar;if(typeof d=="number")return ln;if(d instanceof zr)return je;if(d instanceof Pi)return fn;if(d instanceof Ua)return mn;if(d instanceof ro)return jn;if(Array.isArray(d)){for(var p,C=d.length,N=0,X=d;N<X.length;N+=1){var lt=co(X[N]);if(p){if(p===lt)continue;p=Ye;break}p=lt}return bn(p||Ye,C)}return We}function Xo(d){var p=typeof d;return d===null?"":p==="string"||p==="number"||p==="boolean"?String(d):d instanceof zr||d instanceof Ua||d instanceof ro?d.toString():JSON.stringify(d)}ro.prototype.toString=function(){return this.name},ro.fromString=function(d){return d?new ro({name:d,available:!1}):null},ro.prototype.serialize=function(){return["image",this.name]};var io=function(p,C){this.type=p,this.value=C};io.parse=function(d,p){if(d.length!==2)return p.error("'literal' expression requires exactly one argument, but found "+(d.length-1)+" instead.");if(!_a(d[1]))return p.error("invalid value");var C=d[1],N=co(C),X=p.expectedType;return N.kind!=="array"||N.N!==0||!X||X.kind!=="array"||typeof X.N=="number"&&X.N!==0||(N=X),new io(N,C)},io.prototype.evaluate=function(){return this.value},io.prototype.eachChild=function(){},io.prototype.outputDefined=function(){return!0},io.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof zr?["rgba"].concat(this.value.toArray()):this.value instanceof Ua?this.value.serialize():this.value};var To=function(p){this.name="ExpressionEvaluationError",this.message=p};To.prototype.toJSON=function(){return this.message};var ds={string:Cr,number:ln,boolean:Ar,object:We},La=function(p,C){this.type=p,this.args=C};La.parse=function(d,p){if(d.length<2)return p.error("Expected at least one argument.");var C,N=1,X=d[0];if(X==="array"){var lt,Pt;if(d.length>2){var Bt=d[1];if(typeof Bt!="string"||!(Bt in ds)||Bt==="object")return p.error('The item type argument of "array" must be one of string, number, boolean',1);lt=ds[Bt],N++}else lt=Ye;if(d.length>3){if(d[2]!==null&&(typeof d[2]!="number"||d[2]<0||d[2]!==Math.floor(d[2])))return p.error('The length argument to "array" must be a positive integer literal',2);Pt=d[2],N++}C=bn(lt,Pt)}else C=ds[X];for(var Xt=[];N<d.length;N++){var he=p.parse(d[N],N,Ye);if(!he)return null;Xt.push(he)}return new La(C,Xt)},La.prototype.evaluate=function(d){for(var p=0;p<this.args.length;p++){var C=this.args[p].evaluate(d);if(!Yn(this.type,co(C)))return C;if(p===this.args.length-1)throw new To("Expected value to be of type "+Ln(this.type)+", but found "+Ln(co(C))+" instead.")}return null},La.prototype.eachChild=function(d){this.args.forEach(d)},La.prototype.outputDefined=function(){return this.args.every(function(d){return d.outputDefined()})},La.prototype.serialize=function(){var d=this.type,p=[d.kind];if(d.kind==="array"){var C=d.itemType;if(C.kind==="string"||C.kind==="number"||C.kind==="boolean"){p.push(C.kind);var N=d.N;(typeof N=="number"||this.args.length>1)&&p.push(N)}}return p.concat(this.args.map(function(X){return X.serialize()}))};var Vo=function(p){this.type=mn,this.sections=p};Vo.parse=function(d,p){if(d.length<2)return p.error("Expected at least one argument.");var C=d[1];if(!Array.isArray(C)&&typeof C=="object")return p.error("First argument must be an image or text section.");for(var N=[],X=!1,lt=1;lt<=d.length-1;++lt){var Pt=d[lt];if(X&&typeof Pt=="object"&&!Array.isArray(Pt)){X=!1;var Bt=null;if(Pt["font-scale"]&&!(Bt=p.parse(Pt["font-scale"],1,ln)))return null;var Xt=null;if(Pt["text-font"]&&!(Xt=p.parse(Pt["text-font"],1,bn(Cr))))return null;var he=null;if(Pt["text-color"]&&!(he=p.parse(Pt["text-color"],1,je)))return null;var Re=N[N.length-1];Re.scale=Bt,Re.font=Xt,Re.textColor=he}else{var Ge=p.parse(d[lt],1,Ye);if(!Ge)return null;var He=Ge.type.kind;if(He!=="string"&&He!=="value"&&He!=="null"&&He!=="resolvedImage")return p.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");X=!0,N.push({content:Ge,scale:null,font:null,textColor:null})}}return new Vo(N)},Vo.prototype.evaluate=function(d){return new Ua(this.sections.map(function(p){var C=p.content.evaluate(d);return co(C)===jn?new Oa("",C,null,null,null):new Oa(Xo(C),null,p.scale?p.scale.evaluate(d):null,p.font?p.font.evaluate(d).join(","):null,p.textColor?p.textColor.evaluate(d):null)}))},Vo.prototype.eachChild=function(d){for(var p=0,C=this.sections;p<C.length;p+=1){var N=C[p];d(N.content),N.scale&&d(N.scale),N.font&&d(N.font),N.textColor&&d(N.textColor)}},Vo.prototype.outputDefined=function(){return!1},Vo.prototype.serialize=function(){for(var d=["format"],p=0,C=this.sections;p<C.length;p+=1){var N=C[p];d.push(N.content.serialize());var X={};N.scale&&(X["font-scale"]=N.scale.serialize()),N.font&&(X["text-font"]=N.font.serialize()),N.textColor&&(X["text-color"]=N.textColor.serialize()),d.push(X)}return d};var Bo=function(p){this.type=jn,this.input=p};Bo.parse=function(d,p){if(d.length!==2)return p.error("Expected two arguments.");var C=p.parse(d[1],1,Cr);return C?new Bo(C):p.error("No image name provided.")},Bo.prototype.evaluate=function(d){var p=this.input.evaluate(d),C=ro.fromString(p);return C&&d.availableImages&&(C.available=d.availableImages.indexOf(p)>-1),C},Bo.prototype.eachChild=function(d){d(this.input)},Bo.prototype.outputDefined=function(){return!1},Bo.prototype.serialize=function(){return["image",this.input.serialize()]};var lu={"to-boolean":Ar,"to-color":je,"to-number":ln,"to-string":Cr},Jo=function(p,C){this.type=p,this.args=C};Jo.parse=function(d,p){if(d.length<2)return p.error("Expected at least one argument.");var C=d[0];if((C==="to-boolean"||C==="to-string")&&d.length!==2)return p.error("Expected one argument.");for(var N=lu[C],X=[],lt=1;lt<d.length;lt++){var Pt=p.parse(d[lt],lt,Ye);if(!Pt)return null;X.push(Pt)}return new Jo(N,X)},Jo.prototype.evaluate=function(d){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(d));if(this.type.kind==="color"){for(var p,C,N=0,X=this.args;N<X.length;N+=1){if(C=null,(p=X[N].evaluate(d))instanceof zr)return p;if(typeof p=="string"){var lt=d.parseColor(p);if(lt)return lt}else if(Array.isArray(p)&&!(C=p.length<3||p.length>4?"Invalid rbga value "+JSON.stringify(p)+": expected an array containing either three or four numeric values.":Ko(p[0],p[1],p[2],p[3])))return new zr(p[0]/255,p[1]/255,p[2]/255,p[3])}throw new To(C||"Could not parse color from value '"+(typeof p=="string"?p:String(JSON.stringify(p)))+"'")}if(this.type.kind==="number"){for(var Pt=null,Bt=0,Xt=this.args;Bt<Xt.length;Bt+=1){if((Pt=Xt[Bt].evaluate(d))===null)return 0;var he=Number(Pt);if(!isNaN(he))return he}throw new To("Could not convert "+JSON.stringify(Pt)+" to number.")}return this.type.kind==="formatted"?Ua.fromString(Xo(this.args[0].evaluate(d))):this.type.kind==="resolvedImage"?ro.fromString(Xo(this.args[0].evaluate(d))):Xo(this.args[0].evaluate(d))},Jo.prototype.eachChild=function(d){this.args.forEach(d)},Jo.prototype.outputDefined=function(){return this.args.every(function(d){return d.outputDefined()})},Jo.prototype.serialize=function(){if(this.type.kind==="formatted")return new Vo([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Bo(this.args[0]).serialize();var d=["to-"+this.type.kind];return this.eachChild(function(p){d.push(p.serialize())}),d};var iu=["Unknown","Point","LineString","Polygon"],$s=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};$s.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},$s.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?iu[this.feature.type]:this.feature.type:null},$s.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},$s.prototype.canonicalID=function(){return this.canonical},$s.prototype.properties=function(){return this.feature&&this.feature.properties||{}},$s.prototype.parseColor=function(d){var p=this._parseColorCache[d];return p||(p=this._parseColorCache[d]=zr.parse(d)),p};var Ne=function(p,C,N,X){this.name=p,this.type=C,this._evaluate=N,this.args=X};Ne.prototype.evaluate=function(d){return this._evaluate(d,this.args)},Ne.prototype.eachChild=function(d){this.args.forEach(d)},Ne.prototype.outputDefined=function(){return!1},Ne.prototype.serialize=function(){return[this.name].concat(this.args.map(function(d){return d.serialize()}))},Ne.parse=function(d,p){var C,N=d[0],X=Ne.definitions[N];if(!X)return p.error('Unknown expression "'+N+'". If you wanted a literal array, use ["literal", [...]].',0);for(var lt=Array.isArray(X)?X[0]:X.type,Pt=Array.isArray(X)?[[X[1],X[2]]]:X.overloads,Bt=Pt.filter(function(fa){var na=fa[0];return!Array.isArray(na)||na.length===d.length-1}),Xt=null,he=0,Re=Bt;he<Re.length;he+=1){var Ge=Re[he],He=Ge[0],cn=Ge[1];Xt=new No(p.registry,p.path,null,p.scope);for(var Rn=[],Cn=!1,$n=1;$n<d.length;$n++){var Xn=d[$n],_r=Array.isArray(He)?He[$n-1]:He.type,Nr=Xt.parse(Xn,1+Rn.length,_r);if(!Nr){Cn=!0;break}Rn.push(Nr)}if(!Cn)if(Array.isArray(He)&&He.length!==Rn.length)Xt.error("Expected "+He.length+" arguments, but found "+Rn.length+" instead.");else{for(var Gr=0;Gr<Rn.length;Gr++){var pi=Array.isArray(He)?He[Gr]:He.type,oi=Rn[Gr];Xt.concat(Gr+1).checkSubtype(pi,oi.type)}if(Xt.errors.length===0)return new Ne(N,lt,cn,Rn)}}if(Bt.length===1)(C=p.errors).push.apply(C,Xt.errors);else{for(var Ni=(Bt.length?Bt:Pt).map(function(fa){var na;return na=fa[0],Array.isArray(na)?"("+na.map(Ln).join(", ")+")":"("+Ln(na.type)+"...)"}).join(" | "),Bi=[],Qi=1;Qi<d.length;Qi++){var pa=p.parse(d[Qi],1+Bi.length);if(!pa)return null;Bi.push(Ln(pa.type))}p.error("Expected arguments of type "+Ni+", but found ("+Bi.join(", ")+") instead.")}return null},Ne.register=function(d,p){for(var C in Ne.definitions=p,p)d[C]=Ne};var oe=function(p,C,N){this.type=fn,this.locale=N,this.caseSensitive=p,this.diacriticSensitive=C};function Wt(d,p){d[0]=Math.min(d[0],p[0]),d[1]=Math.min(d[1],p[1]),d[2]=Math.max(d[2],p[0]),d[3]=Math.max(d[3],p[1])}function Ee(d,p){return!(d[0]<=p[0]||d[2]>=p[2]||d[1]<=p[1]||d[3]>=p[3])}function an(d,p){var C=(180+d[0])/360,N=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+d[1]*Math.PI/360)))/360,X=Math.pow(2,p.z);return[Math.round(C*X*8192),Math.round(N*X*8192)]}function Un(d,p,C){return p[1]>d[1]!=C[1]>d[1]&&d[0]<(C[0]-p[0])*(d[1]-p[1])/(C[1]-p[1])+p[0]}function qn(d,p){for(var C,N,X,lt,Pt,Bt,Xt,he=!1,Re=0,Ge=p.length;Re<Ge;Re++)for(var He=p[Re],cn=0,Rn=He.length;cn<Rn-1;cn++){if((lt=(C=d)[0]-(N=He[cn])[0])*(Xt=C[1]-(X=He[cn+1])[1])-(Bt=C[0]-X[0])*(Pt=C[1]-N[1])==0&&lt*Bt<=0&&Pt*Xt<=0)return!1;Un(d,He[cn],He[cn+1])&&(he=!he)}return he}function kn(d,p){for(var C=0;C<p.length;C++)if(qn(d,p[C]))return!0;return!1}function Xr(d,p,C,N){var X=N[0]-C[0],lt=N[1]-C[1],Pt=(d[0]-C[0])*lt-X*(d[1]-C[1]),Bt=(p[0]-C[0])*lt-X*(p[1]-C[1]);return Pt>0&&Bt<0||Pt<0&&Bt>0}function Si(d,p,C){for(var N=0,X=C;N<X.length;N+=1)for(var lt=X[N],Pt=0;Pt<lt.length-1;++Pt)if((Ge=[(Re=lt[Pt+1])[0]-(he=lt[Pt])[0],Re[1]-he[1]])[0]*(He=[(Xt=p)[0]-(Bt=d)[0],Xt[1]-Bt[1]])[1]-Ge[1]*He[0]!=0&&Xr(Bt,Xt,he,Re)&&Xr(he,Re,Bt,Xt))return!0;var Bt,Xt,he,Re,Ge,He;return!1}function Ti(d,p){for(var C=0;C<d.length;++C)if(!qn(d[C],p))return!1;for(var N=0;N<d.length-1;++N)if(Si(d[N],d[N+1],p))return!1;return!0}function ki(d,p){for(var C=0;C<p.length;C++)if(Ti(d,p[C]))return!0;return!1}function sa(d,p,C){for(var N=[],X=0;X<d.length;X++){for(var lt=[],Pt=0;Pt<d[X].length;Pt++){var Bt=an(d[X][Pt],C);Wt(p,Bt),lt.push(Bt)}N.push(lt)}return N}function $a(d,p,C){for(var N=[],X=0;X<d.length;X++){var lt=sa(d[X],p,C);N.push(lt)}return N}function ba(d,p,C,N){if(d[0]<C[0]||d[0]>C[2]){var X=.5*N,lt=d[0]-C[0]>X?-N:C[0]-d[0]>X?N:0;lt===0&&(lt=d[0]-C[2]>X?-N:C[2]-d[0]>X?N:0),d[0]+=lt}Wt(p,d)}function bo(d,p,C,N){for(var X=8192*Math.pow(2,N.z),lt=[8192*N.x,8192*N.y],Pt=[],Bt=0,Xt=d;Bt<Xt.length;Bt+=1)for(var he=0,Re=Xt[Bt];he<Re.length;he+=1){var Ge=Re[he],He=[Ge.x+lt[0],Ge.y+lt[1]];ba(He,p,C,X),Pt.push(He)}return Pt}function Fa(d,p,C,N){for(var X,lt=8192*Math.pow(2,N.z),Pt=[8192*N.x,8192*N.y],Bt=[],Xt=0,he=d;Xt<he.length;Xt+=1){for(var Re=[],Ge=0,He=he[Xt];Ge<He.length;Ge+=1){var cn=He[Ge],Rn=[cn.x+Pt[0],cn.y+Pt[1]];Wt(p,Rn),Re.push(Rn)}Bt.push(Re)}if(p[2]-p[0]<=lt/2){(X=p)[0]=X[1]=1/0,X[2]=X[3]=-1/0;for(var Cn=0,$n=Bt;Cn<$n.length;Cn+=1)for(var Xn=0,_r=$n[Cn];Xn<_r.length;Xn+=1)ba(_r[Xn],p,C,lt)}return Bt}oe.parse=function(d,p){if(d.length!==2)return p.error("Expected one argument.");var C=d[1];if(typeof C!="object"||Array.isArray(C))return p.error("Collator options argument must be an object.");var N=p.parse(C["case-sensitive"]!==void 0&&C["case-sensitive"],1,Ar);if(!N)return null;var X=p.parse(C["diacritic-sensitive"]!==void 0&&C["diacritic-sensitive"],1,Ar);if(!X)return null;var lt=null;return C.locale&&!(lt=p.parse(C.locale,1,Cr))?null:new oe(N,X,lt)},oe.prototype.evaluate=function(d){return new Pi(this.caseSensitive.evaluate(d),this.diacriticSensitive.evaluate(d),this.locale?this.locale.evaluate(d):null)},oe.prototype.eachChild=function(d){d(this.caseSensitive),d(this.diacriticSensitive),this.locale&&d(this.locale)},oe.prototype.outputDefined=function(){return!1},oe.prototype.serialize=function(){var d={};return d["case-sensitive"]=this.caseSensitive.serialize(),d["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(d.locale=this.locale.serialize()),["collator",d]};var oo=function(p,C){this.type=Ar,this.geojson=p,this.geometries=C};function Eo(d){if(d instanceof Ne&&(d.name==="get"&&d.args.length===1||d.name==="feature-state"||d.name==="has"&&d.args.length===1||d.name==="properties"||d.name==="geometry-type"||d.name==="id"||/^filter-/.test(d.name))||d instanceof oo)return!1;var p=!0;return d.eachChild(function(C){p&&!Eo(C)&&(p=!1)}),p}function Qa(d){if(d instanceof Ne&&d.name==="feature-state")return!1;var p=!0;return d.eachChild(function(C){p&&!Qa(C)&&(p=!1)}),p}function Ao(d,p){if(d instanceof Ne&&p.indexOf(d.name)>=0)return!1;var C=!0;return d.eachChild(function(N){C&&!Ao(N,p)&&(C=!1)}),C}oo.parse=function(d,p){if(d.length!==2)return p.error("'within' expression requires exactly one argument, but found "+(d.length-1)+" instead.");if(_a(d[1])){var C=d[1];if(C.type==="FeatureCollection")for(var N=0;N<C.features.length;++N){var X=C.features[N].geometry.type;if(X==="Polygon"||X==="MultiPolygon")return new oo(C,C.features[N].geometry)}else if(C.type==="Feature"){var lt=C.geometry.type;if(lt==="Polygon"||lt==="MultiPolygon")return new oo(C,C.geometry)}else if(C.type==="Polygon"||C.type==="MultiPolygon")return new oo(C,C)}return p.error("'within' expression requires valid geojson object that contains polygon geometry type.")},oo.prototype.evaluate=function(d){if(d.geometry()!=null&&d.canonicalID()!=null){if(d.geometryType()==="Point")return function(p,C){var N=[1/0,1/0,-1/0,-1/0],X=[1/0,1/0,-1/0,-1/0],lt=p.canonicalID();if(C.type==="Polygon"){var Pt=sa(C.coordinates,X,lt),Bt=bo(p.geometry(),N,X,lt);if(!Ee(N,X))return!1;for(var Xt=0,he=Bt;Xt<he.length;Xt+=1)if(!qn(he[Xt],Pt))return!1}if(C.type==="MultiPolygon"){var Re=$a(C.coordinates,X,lt),Ge=bo(p.geometry(),N,X,lt);if(!Ee(N,X))return!1;for(var He=0,cn=Ge;He<cn.length;He+=1)if(!kn(cn[He],Re))return!1}return!0}(d,this.geometries);if(d.geometryType()==="LineString")return function(p,C){var N=[1/0,1/0,-1/0,-1/0],X=[1/0,1/0,-1/0,-1/0],lt=p.canonicalID();if(C.type==="Polygon"){var Pt=sa(C.coordinates,X,lt),Bt=Fa(p.geometry(),N,X,lt);if(!Ee(N,X))return!1;for(var Xt=0,he=Bt;Xt<he.length;Xt+=1)if(!Ti(he[Xt],Pt))return!1}if(C.type==="MultiPolygon"){var Re=$a(C.coordinates,X,lt),Ge=Fa(p.geometry(),N,X,lt);if(!Ee(N,X))return!1;for(var He=0,cn=Ge;He<cn.length;He+=1)if(!ki(cn[He],Re))return!1}return!0}(d,this.geometries)}return!1},oo.prototype.eachChild=function(){},oo.prototype.outputDefined=function(){return!0},oo.prototype.serialize=function(){return["within",this.geojson]};var as=function(p,C){this.type=C.type,this.name=p,this.boundExpression=C};as.parse=function(d,p){if(d.length!==2||typeof d[1]!="string")return p.error("'var' expression requires exactly one string literal argument.");var C=d[1];return p.scope.has(C)?new as(C,p.scope.get(C)):p.error('Unknown variable "'+C+'". Make sure "'+C+'" has been bound in an enclosing "let" expression before using it.',1)},as.prototype.evaluate=function(d){return this.boundExpression.evaluate(d)},as.prototype.eachChild=function(){},as.prototype.outputDefined=function(){return!1},as.prototype.serialize=function(){return["var",this.name]};var No=function(p,C,N,X,lt){C===void 0&&(C=[]),X===void 0&&(X=new Er),lt===void 0&&(lt=[]),this.registry=p,this.path=C,this.key=C.map(function(Pt){return"["+Pt+"]"}).join(""),this.scope=X,this.errors=lt,this.expectedType=N};function xs(d,p){for(var C,N=d.length-1,X=0,lt=N,Pt=0;X<=lt;)if((C=d[Pt=Math.floor((X+lt)/2)])<=p){if(Pt===N||p<d[Pt+1])return Pt;X=Pt+1}else{if(!(C>p))throw new To("Input is not a number.");lt=Pt-1}return 0}No.prototype.parse=function(d,p,C,N,X){return X===void 0&&(X={}),p?this.concat(p,C,N)._parse(d,X):this._parse(d,X)},No.prototype._parse=function(d,p){function C(he,Re,Ge){return Ge==="assert"?new La(Re,[he]):Ge==="coerce"?new Jo(Re,[he]):he}if(d!==null&&typeof d!="string"&&typeof d!="boolean"&&typeof d!="number"||(d=["literal",d]),Array.isArray(d)){if(d.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var N=d[0];if(typeof N!="string")return this.error("Expression name must be a string, but found "+typeof N+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var X=this.registry[N];if(X){var lt=X.parse(d,this);if(!lt)return null;if(this.expectedType){var Pt=this.expectedType,Bt=lt.type;if(Pt.kind!=="string"&&Pt.kind!=="number"&&Pt.kind!=="boolean"&&Pt.kind!=="object"&&Pt.kind!=="array"||Bt.kind!=="value")if(Pt.kind!=="color"&&Pt.kind!=="formatted"&&Pt.kind!=="resolvedImage"||Bt.kind!=="value"&&Bt.kind!=="string"){if(this.checkSubtype(Pt,Bt))return null}else lt=C(lt,Pt,p.typeAnnotation||"coerce");else lt=C(lt,Pt,p.typeAnnotation||"assert")}if(!(lt instanceof io)&&lt.type.kind!=="resolvedImage"&&function he(Re){if(Re instanceof as)return he(Re.boundExpression);if(Re instanceof Ne&&Re.name==="error"||Re instanceof oe||Re instanceof oo)return!1;var Ge=Re instanceof Jo||Re instanceof La,He=!0;return Re.eachChild(function(cn){He=Ge?He&&he(cn):He&&cn instanceof io}),!!He&&Eo(Re)&&Ao(Re,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(lt)){var Xt=new $s;try{lt=new io(lt.type,lt.evaluate(Xt))}catch(he){return this.error(he.message),null}}return lt}return this.error('Unknown expression "'+N+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(d===void 0?"'undefined' value invalid. Use null instead.":typeof d=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof d+" instead.")},No.prototype.concat=function(d,p,C){var N=typeof d=="number"?this.path.concat(d):this.path,X=C?this.scope.concat(C):this.scope;return new No(this.registry,N,p||null,X,this.errors)},No.prototype.error=function(d){for(var p=[],C=arguments.length-1;C-- >0;)p[C]=arguments[C+1];var N=""+this.key+p.map(function(X){return"["+X+"]"}).join("");this.errors.push(new Pn(N,d))},No.prototype.checkSubtype=function(d,p){var C=Yn(d,p);return C&&this.error(C),C};var Co=function(p,C,N){this.type=p,this.input=C,this.labels=[],this.outputs=[];for(var X=0,lt=N;X<lt.length;X+=1){var Pt=lt[X],Bt=Pt[1];this.labels.push(Pt[0]),this.outputs.push(Bt)}};function qa(d,p,C){return d*(1-C)+p*C}Co.parse=function(d,p){if(d.length-1<4)return p.error("Expected at least 4 arguments, but found only "+(d.length-1)+".");if((d.length-1)%2!=0)return p.error("Expected an even number of arguments.");var C=p.parse(d[1],1,ln);if(!C)return null;var N=[],X=null;p.expectedType&&p.expectedType.kind!=="value"&&(X=p.expectedType);for(var lt=1;lt<d.length;lt+=2){var Pt=lt===1?-1/0:d[lt],Bt=d[lt+1],Xt=lt,he=lt+1;if(typeof Pt!="number")return p.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Xt);if(N.length&&N[N.length-1][0]>=Pt)return p.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Xt);var Re=p.parse(Bt,he,X);if(!Re)return null;X=X||Re.type,N.push([Pt,Re])}return new Co(X,C,N)},Co.prototype.evaluate=function(d){var p=this.labels,C=this.outputs;if(p.length===1)return C[0].evaluate(d);var N=this.input.evaluate(d);if(N<=p[0])return C[0].evaluate(d);var X=p.length;return N>=p[X-1]?C[X-1].evaluate(d):C[xs(p,N)].evaluate(d)},Co.prototype.eachChild=function(d){d(this.input);for(var p=0,C=this.outputs;p<C.length;p+=1)d(C[p])},Co.prototype.outputDefined=function(){return this.outputs.every(function(d){return d.outputDefined()})},Co.prototype.serialize=function(){for(var d=["step",this.input.serialize()],p=0;p<this.labels.length;p++)p>0&&d.push(this.labels[p]),d.push(this.outputs[p].serialize());return d};var Ts=Object.freeze({__proto__:null,number:qa,color:function(p,C,N){return new zr(qa(p.r,C.r,N),qa(p.g,C.g,N),qa(p.b,C.b,N),qa(p.a,C.a,N))},array:function(p,C,N){return p.map(function(X,lt){return qa(X,C[lt],N)})}}),ls=6/29*3*(6/29),wa=Math.PI/180,yn=180/Math.PI;function dr(d){return d>.008856451679035631?Math.pow(d,1/3):d/ls+4/29}function kr(d){return d>6/29?d*d*d:ls*(d-4/29)}function Ui(d){return 255*(d<=.0031308?12.92*d:1.055*Math.pow(d,1/2.4)-.055)}function Ja(d){return(d/=255)<=.04045?d/12.92:Math.pow((d+.055)/1.055,2.4)}function So(d){var p=Ja(d.r),C=Ja(d.g),N=Ja(d.b),X=dr((.4124564*p+.3575761*C+.1804375*N)/.95047),lt=dr((.2126729*p+.7151522*C+.072175*N)/1);return{l:116*lt-16,a:500*(X-lt),b:200*(lt-dr((.0193339*p+.119192*C+.9503041*N)/1.08883)),alpha:d.a}}function po(d){var p=(d.l+16)/116,C=isNaN(d.a)?p:p+d.a/500,N=isNaN(d.b)?p:p-d.b/200;return p=1*kr(p),C=.95047*kr(C),N=1.08883*kr(N),new zr(Ui(3.2404542*C-1.5371385*p-.4985314*N),Ui(-.969266*C+1.8760108*p+.041556*N),Ui(.0556434*C-.2040259*p+1.0572252*N),d.alpha)}function ea(d,p,C){var N=p-d;return d+C*(N>180||N<-180?N-360*Math.round(N/360):N)}var to={forward:So,reverse:po,interpolate:function(p,C,N){return{l:qa(p.l,C.l,N),a:qa(p.a,C.a,N),b:qa(p.b,C.b,N),alpha:qa(p.alpha,C.alpha,N)}}},bs={forward:function(p){var C=So(p),N=C.l,X=C.a,lt=C.b,Pt=Math.atan2(lt,X)*yn;return{h:Pt<0?Pt+360:Pt,c:Math.sqrt(X*X+lt*lt),l:N,alpha:p.a}},reverse:function(p){var C=p.h*wa,N=p.c;return po({l:p.l,a:Math.cos(C)*N,b:Math.sin(C)*N,alpha:p.alpha})},interpolate:function(p,C,N){return{h:ea(p.h,C.h,N),c:qa(p.c,C.c,N),l:qa(p.l,C.l,N),alpha:qa(p.alpha,C.alpha,N)}}},Es=Object.freeze({__proto__:null,lab:to,hcl:bs}),ka=function(p,C,N,X,lt){this.type=p,this.operator=C,this.interpolation=N,this.input=X,this.labels=[],this.outputs=[];for(var Pt=0,Bt=lt;Pt<Bt.length;Pt+=1){var Xt=Bt[Pt],he=Xt[1];this.labels.push(Xt[0]),this.outputs.push(he)}};function bu(d,p,C,N){var X=N-C,lt=d-C;return X===0?0:p===1?lt/X:(Math.pow(p,lt)-1)/(Math.pow(p,X)-1)}ka.interpolationFactor=function(d,p,C,N){var X=0;if(d.name==="exponential")X=bu(p,d.base,C,N);else if(d.name==="linear")X=bu(p,1,C,N);else if(d.name==="cubic-bezier"){var lt=d.controlPoints;X=new s(lt[0],lt[1],lt[2],lt[3]).solve(bu(p,1,C,N))}return X},ka.parse=function(d,p){var C=d[0],N=d[1],X=d[2],lt=d.slice(3);if(!Array.isArray(N)||N.length===0)return p.error("Expected an interpolation type expression.",1);if(N[0]==="linear")N={name:"linear"};else if(N[0]==="exponential"){var Pt=N[1];if(typeof Pt!="number")return p.error("Exponential interpolation requires a numeric base.",1,1);N={name:"exponential",base:Pt}}else{if(N[0]!=="cubic-bezier")return p.error("Unknown interpolation type "+String(N[0]),1,0);var Bt=N.slice(1);if(Bt.length!==4||Bt.some(function($n){return typeof $n!="number"||$n<0||$n>1}))return p.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);N={name:"cubic-bezier",controlPoints:Bt}}if(d.length-1<4)return p.error("Expected at least 4 arguments, but found only "+(d.length-1)+".");if((d.length-1)%2!=0)return p.error("Expected an even number of arguments.");if(!(X=p.parse(X,2,ln)))return null;var Xt=[],he=null;C==="interpolate-hcl"||C==="interpolate-lab"?he=je:p.expectedType&&p.expectedType.kind!=="value"&&(he=p.expectedType);for(var Re=0;Re<lt.length;Re+=2){var Ge=lt[Re],He=lt[Re+1],cn=Re+3,Rn=Re+4;if(typeof Ge!="number")return p.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',cn);if(Xt.length&&Xt[Xt.length-1][0]>=Ge)return p.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',cn);var Cn=p.parse(He,Rn,he);if(!Cn)return null;he=he||Cn.type,Xt.push([Ge,Cn])}return he.kind==="number"||he.kind==="color"||he.kind==="array"&&he.itemType.kind==="number"&&typeof he.N=="number"?new ka(he,C,N,X,Xt):p.error("Type "+Ln(he)+" is not interpolatable.")},ka.prototype.evaluate=function(d){var p=this.labels,C=this.outputs;if(p.length===1)return C[0].evaluate(d);var N=this.input.evaluate(d);if(N<=p[0])return C[0].evaluate(d);var X=p.length;if(N>=p[X-1])return C[X-1].evaluate(d);var lt=xs(p,N),Pt=ka.interpolationFactor(this.interpolation,N,p[lt],p[lt+1]),Bt=C[lt].evaluate(d),Xt=C[lt+1].evaluate(d);return this.operator==="interpolate"?Ts[this.type.kind.toLowerCase()](Bt,Xt,Pt):this.operator==="interpolate-hcl"?bs.reverse(bs.interpolate(bs.forward(Bt),bs.forward(Xt),Pt)):to.reverse(to.interpolate(to.forward(Bt),to.forward(Xt),Pt))},ka.prototype.eachChild=function(d){d(this.input);for(var p=0,C=this.outputs;p<C.length;p+=1)d(C[p])},ka.prototype.outputDefined=function(){return this.outputs.every(function(d){return d.outputDefined()})},ka.prototype.serialize=function(){var d;d=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var p=[this.operator,d,this.input.serialize()],C=0;C<this.labels.length;C++)p.push(this.labels[C],this.outputs[C].serialize());return p};var Wo=function(p,C){this.type=p,this.args=C};Wo.parse=function(d,p){if(d.length<2)return p.error("Expectected at least one argument.");var C=null,N=p.expectedType;N&&N.kind!=="value"&&(C=N);for(var X=[],lt=0,Pt=d.slice(1);lt<Pt.length;lt+=1){var Bt=p.parse(Pt[lt],1+X.length,C,void 0,{typeAnnotation:"omit"});if(!Bt)return null;C=C||Bt.type,X.push(Bt)}var Xt=N&&X.some(function(he){return Yn(N,he.type)});return new Wo(Xt?Ye:C,X)},Wo.prototype.evaluate=function(d){for(var p,C=null,N=0,X=0,lt=this.args;X<lt.length&&(N++,(C=lt[X].evaluate(d))&&C instanceof ro&&!C.available&&(p||(p=C.name),C=null,N===this.args.length&&(C=p)),C===null);X+=1);return C},Wo.prototype.eachChild=function(d){this.args.forEach(d)},Wo.prototype.outputDefined=function(){return this.args.every(function(d){return d.outputDefined()})},Wo.prototype.serialize=function(){var d=["coalesce"];return this.eachChild(function(p){d.push(p.serialize())}),d};var As=function(p,C){this.type=C.type,this.bindings=[].concat(p),this.result=C};As.prototype.evaluate=function(d){return this.result.evaluate(d)},As.prototype.eachChild=function(d){for(var p=0,C=this.bindings;p<C.length;p+=1)d(C[p][1]);d(this.result)},As.parse=function(d,p){if(d.length<4)return p.error("Expected at least 3 arguments, but found "+(d.length-1)+" instead.");for(var C=[],N=1;N<d.length-1;N+=2){var X=d[N];if(typeof X!="string")return p.error("Expected string, but found "+typeof X+" instead.",N);if(/[^a-zA-Z0-9_]/.test(X))return p.error("Variable names must contain only alphanumeric characters or '_'.",N);var lt=p.parse(d[N+1],N+1);if(!lt)return null;C.push([X,lt])}var Pt=p.parse(d[d.length-1],d.length-1,p.expectedType,C);return Pt?new As(C,Pt):null},As.prototype.outputDefined=function(){return this.result.outputDefined()},As.prototype.serialize=function(){for(var d=["let"],p=0,C=this.bindings;p<C.length;p+=1){var N=C[p];d.push(N[0],N[1].serialize())}return d.push(this.result.serialize()),d};var Qs=function(p,C,N){this.type=p,this.index=C,this.input=N};Qs.parse=function(d,p){if(d.length!==3)return p.error("Expected 2 arguments, but found "+(d.length-1)+" instead.");var C=p.parse(d[1],1,ln),N=p.parse(d[2],2,bn(p.expectedType||Ye));return C&&N?new Qs(N.type.itemType,C,N):null},Qs.prototype.evaluate=function(d){var p=this.index.evaluate(d),C=this.input.evaluate(d);if(p<0)throw new To("Array index out of bounds: "+p+" < 0.");if(p>=C.length)throw new To("Array index out of bounds: "+p+" > "+(C.length-1)+".");if(p!==Math.floor(p))throw new To("Array index must be an integer, but found "+p+" instead.");return C[p]},Qs.prototype.eachChild=function(d){d(this.index),d(this.input)},Qs.prototype.outputDefined=function(){return!1},Qs.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var vs=function(p,C){this.type=Ar,this.needle=p,this.haystack=C};vs.parse=function(d,p){if(d.length!==3)return p.error("Expected 2 arguments, but found "+(d.length-1)+" instead.");var C=p.parse(d[1],1,Ye),N=p.parse(d[2],2,Ye);return C&&N?Mn(C.type,[Ar,Cr,ln,Pr,Ye])?new vs(C,N):p.error("Expected first argument to be of type boolean, string, number or null, but found "+Ln(C.type)+" instead"):null},vs.prototype.evaluate=function(d){var p=this.needle.evaluate(d),C=this.haystack.evaluate(d);if(!C)return!1;if(!Rr(p,["boolean","string","number","null"]))throw new To("Expected first argument to be of type boolean, string, number or null, but found "+Ln(co(p))+" instead.");if(!Rr(C,["string","array"]))throw new To("Expected second argument to be of type array or string, but found "+Ln(co(C))+" instead.");return C.indexOf(p)>=0},vs.prototype.eachChild=function(d){d(this.needle),d(this.haystack)},vs.prototype.outputDefined=function(){return!0},vs.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var ps=function(p,C,N){this.type=ln,this.needle=p,this.haystack=C,this.fromIndex=N};ps.parse=function(d,p){if(d.length<=2||d.length>=5)return p.error("Expected 3 or 4 arguments, but found "+(d.length-1)+" instead.");var C=p.parse(d[1],1,Ye),N=p.parse(d[2],2,Ye);if(!C||!N)return null;if(!Mn(C.type,[Ar,Cr,ln,Pr,Ye]))return p.error("Expected first argument to be of type boolean, string, number or null, but found "+Ln(C.type)+" instead");if(d.length===4){var X=p.parse(d[3],3,ln);return X?new ps(C,N,X):null}return new ps(C,N)},ps.prototype.evaluate=function(d){var p=this.needle.evaluate(d),C=this.haystack.evaluate(d);if(!Rr(p,["boolean","string","number","null"]))throw new To("Expected first argument to be of type boolean, string, number or null, but found "+Ln(co(p))+" instead.");if(!Rr(C,["string","array"]))throw new To("Expected second argument to be of type array or string, but found "+Ln(co(C))+" instead.");if(this.fromIndex){var N=this.fromIndex.evaluate(d);return C.indexOf(p,N)}return C.indexOf(p)},ps.prototype.eachChild=function(d){d(this.needle),d(this.haystack),this.fromIndex&&d(this.fromIndex)},ps.prototype.outputDefined=function(){return!1},ps.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var d=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),d]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var cs=function(p,C,N,X,lt,Pt){this.inputType=p,this.type=C,this.input=N,this.cases=X,this.outputs=lt,this.otherwise=Pt};cs.parse=function(d,p){if(d.length<5)return p.error("Expected at least 4 arguments, but found only "+(d.length-1)+".");if(d.length%2!=1)return p.error("Expected an even number of arguments.");var C,N;p.expectedType&&p.expectedType.kind!=="value"&&(N=p.expectedType);for(var X={},lt=[],Pt=2;Pt<d.length-1;Pt+=2){var Bt=d[Pt],Xt=d[Pt+1];Array.isArray(Bt)||(Bt=[Bt]);var he=p.concat(Pt);if(Bt.length===0)return he.error("Expected at least one branch label.");for(var Re=0,Ge=Bt;Re<Ge.length;Re+=1){var He=Ge[Re];if(typeof He!="number"&&typeof He!="string")return he.error("Branch labels must be numbers or strings.");if(typeof He=="number"&&Math.abs(He)>Number.MAX_SAFE_INTEGER)return he.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof He=="number"&&Math.floor(He)!==He)return he.error("Numeric branch labels must be integer values.");if(C){if(he.checkSubtype(C,co(He)))return null}else C=co(He);if(X[String(He)]!==void 0)return he.error("Branch labels must be unique.");X[String(He)]=lt.length}var cn=p.parse(Xt,Pt,N);if(!cn)return null;N=N||cn.type,lt.push(cn)}var Rn=p.parse(d[1],1,Ye);if(!Rn)return null;var Cn=p.parse(d[d.length-1],d.length-1,N);return Cn?Rn.type.kind!=="value"&&p.concat(1).checkSubtype(C,Rn.type)?null:new cs(C,N,Rn,X,lt,Cn):null},cs.prototype.evaluate=function(d){var p=this.input.evaluate(d);return(co(p)===this.inputType&&this.outputs[this.cases[p]]||this.otherwise).evaluate(d)},cs.prototype.eachChild=function(d){d(this.input),this.outputs.forEach(d),d(this.otherwise)},cs.prototype.outputDefined=function(){return this.outputs.every(function(d){return d.outputDefined()})&&this.otherwise.outputDefined()},cs.prototype.serialize=function(){for(var d=this,p=["match",this.input.serialize()],C=[],N={},X=0,lt=Object.keys(this.cases).sort();X<lt.length;X+=1){var Pt=lt[X];(Ge=N[this.cases[Pt]])===void 0?(N[this.cases[Pt]]=C.length,C.push([this.cases[Pt],[Pt]])):C[Ge][1].push(Pt)}for(var Bt=function(Rn){return d.inputType.kind==="number"?Number(Rn):Rn},Xt=0,he=C;Xt<he.length;Xt+=1){var Re=he[Xt],Ge=Re[0],He=Re[1];p.push(He.length===1?Bt(He[0]):He.map(Bt)),p.push(this.outputs[outputIndex$1].serialize())}return p.push(this.otherwise.serialize()),p};var gs=function(p,C,N){this.type=p,this.branches=C,this.otherwise=N};gs.parse=function(d,p){if(d.length<4)return p.error("Expected at least 3 arguments, but found only "+(d.length-1)+".");if(d.length%2!=0)return p.error("Expected an odd number of arguments.");var C;p.expectedType&&p.expectedType.kind!=="value"&&(C=p.expectedType);for(var N=[],X=1;X<d.length-1;X+=2){var lt=p.parse(d[X],X,Ar);if(!lt)return null;var Pt=p.parse(d[X+1],X+1,C);if(!Pt)return null;N.push([lt,Pt]),C=C||Pt.type}var Bt=p.parse(d[d.length-1],d.length-1,C);return Bt?new gs(C,N,Bt):null},gs.prototype.evaluate=function(d){for(var p=0,C=this.branches;p<C.length;p+=1){var N=C[p],X=N[1];if(N[0].evaluate(d))return X.evaluate(d)}return this.otherwise.evaluate(d)},gs.prototype.eachChild=function(d){for(var p=0,C=this.branches;p<C.length;p+=1){var N=C[p],X=N[1];d(N[0]),d(X)}d(this.otherwise)},gs.prototype.outputDefined=function(){return this.branches.every(function(d){return d[1].outputDefined()})&&this.otherwise.outputDefined()},gs.prototype.serialize=function(){var d=["case"];return this.eachChild(function(p){d.push(p.serialize())}),d};var Cs=function(p,C,N,X){this.type=p,this.input=C,this.beginIndex=N,this.endIndex=X};function Pu(d,p){return d==="=="||d==="!="?p.kind==="boolean"||p.kind==="string"||p.kind==="number"||p.kind==="null"||p.kind==="value":p.kind==="string"||p.kind==="number"||p.kind==="value"}function ju(d,p,C,N){return N.compare(p,C)===0}function fo(d,p,C){var N=d!=="=="&&d!=="!=";return function(){function X(lt,Pt,Bt){this.type=Ar,this.lhs=lt,this.rhs=Pt,this.collator=Bt,this.hasUntypedArgument=lt.type.kind==="value"||Pt.type.kind==="value"}return X.parse=function(lt,Pt){if(lt.length!==3&&lt.length!==4)return Pt.error("Expected two or three arguments.");var Bt=lt[0],Xt=Pt.parse(lt[1],1,Ye);if(!Xt)return null;if(!Pu(Bt,Xt.type))return Pt.concat(1).error('"'+Bt+`" comparisons are not supported for type '`+Ln(Xt.type)+"'.");var he=Pt.parse(lt[2],2,Ye);if(!he)return null;if(!Pu(Bt,he.type))return Pt.concat(2).error('"'+Bt+`" comparisons are not supported for type '`+Ln(he.type)+"'.");if(Xt.type.kind!==he.type.kind&&Xt.type.kind!=="value"&&he.type.kind!=="value")return Pt.error("Cannot compare types '"+Ln(Xt.type)+"' and '"+Ln(he.type)+"'.");N&&(Xt.type.kind==="value"&&he.type.kind!=="value"?Xt=new La(he.type,[Xt]):Xt.type.kind!=="value"&&he.type.kind==="value"&&(he=new La(Xt.type,[he])));var Re=null;if(lt.length===4){if(Xt.type.kind!=="string"&&he.type.kind!=="string"&&Xt.type.kind!=="value"&&he.type.kind!=="value")return Pt.error("Cannot use collator to compare non-string types.");if(!(Re=Pt.parse(lt[3],3,fn)))return null}return new X(Xt,he,Re)},X.prototype.evaluate=function(lt){var Pt=this.lhs.evaluate(lt),Bt=this.rhs.evaluate(lt);if(N&&this.hasUntypedArgument){var Xt=co(Pt),he=co(Bt);if(Xt.kind!==he.kind||Xt.kind!=="string"&&Xt.kind!=="number")throw new To('Expected arguments for "'+d+'" to be (string, string) or (number, number), but found ('+Xt.kind+", "+he.kind+") instead.")}if(this.collator&&!N&&this.hasUntypedArgument){var Re=co(Pt),Ge=co(Bt);if(Re.kind!=="string"||Ge.kind!=="string")return p(lt,Pt,Bt)}return this.collator?C(lt,Pt,Bt,this.collator.evaluate(lt)):p(lt,Pt,Bt)},X.prototype.eachChild=function(lt){lt(this.lhs),lt(this.rhs),this.collator&&lt(this.collator)},X.prototype.outputDefined=function(){return!0},X.prototype.serialize=function(){var lt=[d];return this.eachChild(function(Pt){lt.push(Pt.serialize())}),lt},X}()}Cs.parse=function(d,p){if(d.length<=2||d.length>=5)return p.error("Expected 3 or 4 arguments, but found "+(d.length-1)+" instead.");var C=p.parse(d[1],1,Ye),N=p.parse(d[2],2,ln);if(!C||!N)return null;if(!Mn(C.type,[bn(Ye),Cr,Ye]))return p.error("Expected first argument to be of type array or string, but found "+Ln(C.type)+" instead");if(d.length===4){var X=p.parse(d[3],3,ln);return X?new Cs(C.type,C,N,X):null}return new Cs(C.type,C,N)},Cs.prototype.evaluate=function(d){var p=this.input.evaluate(d),C=this.beginIndex.evaluate(d);if(!Rr(p,["string","array"]))throw new To("Expected first argument to be of type array or string, but found "+Ln(co(p))+" instead.");if(this.endIndex){var N=this.endIndex.evaluate(d);return p.slice(C,N)}return p.slice(C)},Cs.prototype.eachChild=function(d){d(this.input),d(this.beginIndex),this.endIndex&&d(this.endIndex)},Cs.prototype.outputDefined=function(){return!1},Cs.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var d=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),d]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Ns=fo("==",function(d,p,C){return p===C},ju),Bu=fo("!=",function(d,p,C){return p!==C},function(d,p,C,N){return!ju(0,p,C,N)}),ll=fo("<",function(d,p,C){return p<C},function(d,p,C,N){return N.compare(p,C)<0}),cl=fo(">",function(d,p,C){return p>C},function(d,p,C,N){return N.compare(p,C)>0}),Xu=fo("<=",function(d,p,C){return p<=C},function(d,p,C,N){return N.compare(p,C)<=0}),Io=fo(">=",function(d,p,C){return p>=C},function(d,p,C,N){return N.compare(p,C)>=0}),Ra=function(p,C,N,X,lt){this.type=Cr,this.number=p,this.locale=C,this.currency=N,this.minFractionDigits=X,this.maxFractionDigits=lt};Ra.parse=function(d,p){if(d.length!==3)return p.error("Expected two arguments.");var C=p.parse(d[1],1,ln);if(!C)return null;var N=d[2];if(typeof N!="object"||Array.isArray(N))return p.error("NumberFormat options argument must be an object.");var X=null;if(N.locale&&!(X=p.parse(N.locale,1,Cr)))return null;var lt=null;if(N.currency&&!(lt=p.parse(N.currency,1,Cr)))return null;var Pt=null;if(N["min-fraction-digits"]&&!(Pt=p.parse(N["min-fraction-digits"],1,ln)))return null;var Bt=null;return N["max-fraction-digits"]&&!(Bt=p.parse(N["max-fraction-digits"],1,ln))?null:new Ra(C,X,lt,Pt,Bt)},Ra.prototype.evaluate=function(d){return new Intl.NumberFormat(this.locale?this.locale.evaluate(d):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(d):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(d):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(d):void 0}).format(this.number.evaluate(d))},Ra.prototype.eachChild=function(d){d(this.number),this.locale&&d(this.locale),this.currency&&d(this.currency),this.minFractionDigits&&d(this.minFractionDigits),this.maxFractionDigits&&d(this.maxFractionDigits)},Ra.prototype.outputDefined=function(){return!1},Ra.prototype.serialize=function(){var d={};return this.locale&&(d.locale=this.locale.serialize()),this.currency&&(d.currency=this.currency.serialize()),this.minFractionDigits&&(d["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(d["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),d]};var Ea=function(p){this.type=ln,this.input=p};Ea.parse=function(d,p){if(d.length!==2)return p.error("Expected 1 argument, but found "+(d.length-1)+" instead.");var C=p.parse(d[1],1);return C?C.type.kind!=="array"&&C.type.kind!=="string"&&C.type.kind!=="value"?p.error("Expected argument of type string or array, but found "+Ln(C.type)+" instead."):new Ea(C):null},Ea.prototype.evaluate=function(d){var p=this.input.evaluate(d);if(typeof p=="string"||Array.isArray(p))return p.length;throw new To("Expected value to be of type string or array, but found "+Ln(co(p))+" instead.")},Ea.prototype.eachChild=function(d){d(this.input)},Ea.prototype.outputDefined=function(){return!1},Ea.prototype.serialize=function(){var d=["length"];return this.eachChild(function(p){d.push(p.serialize())}),d};var Ro={"==":Ns,"!=":Bu,">":cl,"<":ll,">=":Io,"<=":Xu,array:La,at:Qs,boolean:La,case:gs,coalesce:Wo,collator:oe,format:Vo,image:Bo,in:vs,"index-of":ps,interpolate:ka,"interpolate-hcl":ka,"interpolate-lab":ka,length:Ea,let:As,literal:io,match:cs,number:La,"number-format":Ra,object:La,slice:Cs,step:Co,string:La,"to-boolean":Jo,"to-color":Jo,"to-number":Jo,"to-string":Jo,var:as,within:oo};function pu(d,p){var C=p[0],N=p[1],X=p[2],lt=p[3];C=C.evaluate(d),N=N.evaluate(d),X=X.evaluate(d);var Pt=lt?lt.evaluate(d):1,Bt=Ko(C,N,X,Pt);if(Bt)throw new To(Bt);return new zr(C/255*Pt,N/255*Pt,X/255*Pt,Pt)}function Ml(d,p){return d in p}function Fs(d,p){var C=p[d];return C===void 0?null:C}function Ss(d){return{type:d}}function au(d){return{result:"success",value:d}}function qs(d){return{result:"error",value:d}}function Ds(d){return d["property-type"]==="data-driven"||d["property-type"]==="cross-faded-data-driven"}function Ju(d){return!!d.expression&&d.expression.parameters.indexOf("zoom")>-1}function ou(d){return!!d.expression&&d.expression.interpolated}function Wa(d){return d instanceof Number?"number":d instanceof String?"string":d instanceof Boolean?"boolean":Array.isArray(d)?"array":d===null?"null":typeof d}function Pl(d){return typeof d=="object"&&d!==null&&!Array.isArray(d)}function $l(d){return d}function Tl(d,p,C){return d!==void 0?d:p!==void 0?p:C!==void 0?C:void 0}function Ql(d,p,C,N,X){return Tl(typeof C===X?N[C]:void 0,d.default,p.default)}function Nu(d,p,C){if(Wa(C)!=="number")return Tl(d.default,p.default);var N=d.stops.length;if(N===1||C<=d.stops[0][0])return d.stops[0][1];if(C>=d.stops[N-1][0])return d.stops[N-1][1];var X=xs(d.stops.map(function(lt){return lt[0]}),C);return d.stops[X][1]}function Ha(d,p,C){var N=d.base!==void 0?d.base:1;if(Wa(C)!=="number")return Tl(d.default,p.default);var X=d.stops.length;if(X===1||C<=d.stops[0][0])return d.stops[0][1];if(C>=d.stops[X-1][0])return d.stops[X-1][1];var lt=xs(d.stops.map(function(Ge){return Ge[0]}),C),Pt=function(Ge,He,cn,Rn){var Cn=Rn-cn,$n=Ge-cn;return Cn===0?0:He===1?$n/Cn:(Math.pow(He,$n)-1)/(Math.pow(He,Cn)-1)}(C,N,d.stops[lt][0],d.stops[lt+1][0]),Bt=d.stops[lt][1],Xt=d.stops[lt+1][1],he=Ts[p.type]||$l;if(d.colorSpace&&d.colorSpace!=="rgb"){var Re=Es[d.colorSpace];he=function(He,cn){return Re.reverse(Re.interpolate(Re.forward(He),Re.forward(cn),Pt))}}return typeof Bt.evaluate=="function"?{evaluate:function(){for(var He=[],cn=arguments.length;cn--;)He[cn]=arguments[cn];var Rn=Bt.evaluate.apply(void 0,He),Cn=Xt.evaluate.apply(void 0,He);if(Rn!==void 0&&Cn!==void 0)return he(Rn,Cn,Pt)}}:he(Bt,Xt,Pt)}function su(d,p,C){return p.type==="color"?C=zr.parse(C):p.type==="formatted"?C=Ua.fromString(C.toString()):p.type==="resolvedImage"?C=ro.fromString(C.toString()):Wa(C)===p.type||p.type==="enum"&&p.values[C]||(C=void 0),Tl(C,d.default,p.default)}Ne.register(Ro,{error:[{kind:"error"},[Cr],function(d,p){throw new To(p[0].evaluate(d))}],typeof:[Cr,[Ye],function(d,p){return Ln(co(p[0].evaluate(d)))}],"to-rgba":[bn(ln,4),[je],function(d,p){return p[0].evaluate(d).toArray()}],rgb:[je,[ln,ln,ln],pu],rgba:[je,[ln,ln,ln,ln],pu],has:{type:Ar,overloads:[[[Cr],function(d,p){return Ml(p[0].evaluate(d),d.properties())}],[[Cr,We],function(d,p){var C=p[1];return Ml(p[0].evaluate(d),C.evaluate(d))}]]},get:{type:Ye,overloads:[[[Cr],function(d,p){return Fs(p[0].evaluate(d),d.properties())}],[[Cr,We],function(d,p){var C=p[1];return Fs(p[0].evaluate(d),C.evaluate(d))}]]},"feature-state":[Ye,[Cr],function(d,p){return Fs(p[0].evaluate(d),d.featureState||{})}],properties:[We,[],function(d){return d.properties()}],"geometry-type":[Cr,[],function(d){return d.geometryType()}],id:[Ye,[],function(d){return d.id()}],zoom:[ln,[],function(d){return d.globals.zoom}],"heatmap-density":[ln,[],function(d){return d.globals.heatmapDensity||0}],"line-progress":[ln,[],function(d){return d.globals.lineProgress||0}],accumulated:[Ye,[],function(d){return d.globals.accumulated===void 0?null:d.globals.accumulated}],"+":[ln,Ss(ln),function(d,p){for(var C=0,N=0,X=p;N<X.length;N+=1)C+=X[N].evaluate(d);return C}],"*":[ln,Ss(ln),function(d,p){for(var C=1,N=0,X=p;N<X.length;N+=1)C*=X[N].evaluate(d);return C}],"-":{type:ln,overloads:[[[ln,ln],function(d,p){var C=p[1];return p[0].evaluate(d)-C.evaluate(d)}],[[ln],function(d,p){return-p[0].evaluate(d)}]]},"/":[ln,[ln,ln],function(d,p){var C=p[1];return p[0].evaluate(d)/C.evaluate(d)}],"%":[ln,[ln,ln],function(d,p){var C=p[1];return p[0].evaluate(d)%C.evaluate(d)}],ln2:[ln,[],function(){return Math.LN2}],pi:[ln,[],function(){return Math.PI}],e:[ln,[],function(){return Math.E}],"^":[ln,[ln,ln],function(d,p){var C=p[1];return Math.pow(p[0].evaluate(d),C.evaluate(d))}],sqrt:[ln,[ln],function(d,p){return Math.sqrt(p[0].evaluate(d))}],log10:[ln,[ln],function(d,p){return Math.log(p[0].evaluate(d))/Math.LN10}],ln:[ln,[ln],function(d,p){return Math.log(p[0].evaluate(d))}],log2:[ln,[ln],function(d,p){return Math.log(p[0].evaluate(d))/Math.LN2}],sin:[ln,[ln],function(d,p){return Math.sin(p[0].evaluate(d))}],cos:[ln,[ln],function(d,p){return Math.cos(p[0].evaluate(d))}],tan:[ln,[ln],function(d,p){return Math.tan(p[0].evaluate(d))}],asin:[ln,[ln],function(d,p){return Math.asin(p[0].evaluate(d))}],acos:[ln,[ln],function(d,p){return Math.acos(p[0].evaluate(d))}],atan:[ln,[ln],function(d,p){return Math.atan(p[0].evaluate(d))}],min:[ln,Ss(ln),function(d,p){return Math.min.apply(Math,p.map(function(C){return C.evaluate(d)}))}],max:[ln,Ss(ln),function(d,p){return Math.max.apply(Math,p.map(function(C){return C.evaluate(d)}))}],abs:[ln,[ln],function(d,p){return Math.abs(p[0].evaluate(d))}],round:[ln,[ln],function(d,p){var C=p[0].evaluate(d);return C<0?-Math.round(-C):Math.round(C)}],floor:[ln,[ln],function(d,p){return Math.floor(p[0].evaluate(d))}],ceil:[ln,[ln],function(d,p){return Math.ceil(p[0].evaluate(d))}],"filter-==":[Ar,[Cr,Ye],function(d,p){var C=p[0],N=p[1];return d.properties()[C.value]===N.value}],"filter-id-==":[Ar,[Ye],function(d,p){var C=p[0];return d.id()===C.value}],"filter-type-==":[Ar,[Cr],function(d,p){var C=p[0];return d.geometryType()===C.value}],"filter-<":[Ar,[Cr,Ye],function(d,p){var C=p[0],N=p[1],X=d.properties()[C.value],lt=N.value;return typeof X==typeof lt&&X<lt}],"filter-id-<":[Ar,[Ye],function(d,p){var C=p[0],N=d.id(),X=C.value;return typeof N==typeof X&&N<X}],"filter->":[Ar,[Cr,Ye],function(d,p){var C=p[0],N=p[1],X=d.properties()[C.value],lt=N.value;return typeof X==typeof lt&&X>lt}],"filter-id->":[Ar,[Ye],function(d,p){var C=p[0],N=d.id(),X=C.value;return typeof N==typeof X&&N>X}],"filter-<=":[Ar,[Cr,Ye],function(d,p){var C=p[0],N=p[1],X=d.properties()[C.value],lt=N.value;return typeof X==typeof lt&&X<=lt}],"filter-id-<=":[Ar,[Ye],function(d,p){var C=p[0],N=d.id(),X=C.value;return typeof N==typeof X&&N<=X}],"filter->=":[Ar,[Cr,Ye],function(d,p){var C=p[0],N=p[1],X=d.properties()[C.value],lt=N.value;return typeof X==typeof lt&&X>=lt}],"filter-id->=":[Ar,[Ye],function(d,p){var C=p[0],N=d.id(),X=C.value;return typeof N==typeof X&&N>=X}],"filter-has":[Ar,[Ye],function(d,p){return p[0].value in d.properties()}],"filter-has-id":[Ar,[],function(d){return d.id()!==null&&d.id()!==void 0}],"filter-type-in":[Ar,[bn(Cr)],function(d,p){return p[0].value.indexOf(d.geometryType())>=0}],"filter-id-in":[Ar,[bn(Ye)],function(d,p){return p[0].value.indexOf(d.id())>=0}],"filter-in-small":[Ar,[Cr,bn(Ye)],function(d,p){var C=p[0];return p[1].value.indexOf(d.properties()[C.value])>=0}],"filter-in-large":[Ar,[Cr,bn(Ye)],function(d,p){var C=p[0],N=p[1];return function(X,lt,Pt,Bt){for(;Pt<=Bt;){var Xt=Pt+Bt>>1;if(lt[Xt]===X)return!0;lt[Xt]>X?Bt=Xt-1:Pt=Xt+1}return!1}(d.properties()[C.value],N.value,0,N.value.length-1)}],all:{type:Ar,overloads:[[[Ar,Ar],function(d,p){var C=p[1];return p[0].evaluate(d)&&C.evaluate(d)}],[Ss(Ar),function(d,p){for(var C=0,N=p;C<N.length;C+=1)if(!N[C].evaluate(d))return!1;return!0}]]},any:{type:Ar,overloads:[[[Ar,Ar],function(d,p){var C=p[1];return p[0].evaluate(d)||C.evaluate(d)}],[Ss(Ar),function(d,p){for(var C=0,N=p;C<N.length;C+=1)if(N[C].evaluate(d))return!0;return!1}]]},"!":[Ar,[Ar],function(d,p){return!p[0].evaluate(d)}],"is-supported-script":[Ar,[Cr],function(d,p){var C=d.globals&&d.globals.isSupportedScript;return!C||C(p[0].evaluate(d))}],upcase:[Cr,[Cr],function(d,p){return p[0].evaluate(d).toUpperCase()}],downcase:[Cr,[Cr],function(d,p){return p[0].evaluate(d).toLowerCase()}],concat:[Cr,Ss(Ye),function(d,p){return p.map(function(C){return Xo(C.evaluate(d))}).join("")}],"resolved-locale":[Cr,[fn],function(d,p){return p[0].evaluate(d).resolvedLocale()}]});var Al=function(p,C){this.expression=p,this._warningHistory={},this._evaluator=new $s,this._defaultValue=C?function(N){return N.type==="color"&&Pl(N.default)?new zr(0,0,0,0):N.type==="color"?zr.parse(N.default)||null:N.default===void 0?null:N.default}(C):null,this._enumValues=C&&C.type==="enum"?C.values:null};function ms(d){return Array.isArray(d)&&d.length>0&&typeof d[0]=="string"&&d[0]in Ro}function Tu(d,p){var C=new No(Ro,[],p?function(X){var lt={color:je,string:Cr,number:ln,enum:Cr,boolean:Ar,formatted:mn,resolvedImage:jn};return X.type==="array"?bn(lt[X.value]||Ye,X.length):lt[X.type]}(p):void 0),N=C.parse(d,void 0,void 0,void 0,p&&p.type==="string"?{typeAnnotation:"coerce"}:void 0);return N?au(new Al(N,p)):qs(C.errors)}Al.prototype.evaluateWithoutErrorHandling=function(d,p,C,N,X,lt){return this._evaluator.globals=d,this._evaluator.feature=p,this._evaluator.featureState=C,this._evaluator.canonical=N,this._evaluator.availableImages=X||null,this._evaluator.formattedSection=lt,this.expression.evaluate(this._evaluator)},Al.prototype.evaluate=function(d,p,C,N,X,lt){this._evaluator.globals=d,this._evaluator.feature=p||null,this._evaluator.featureState=C||null,this._evaluator.canonical=N,this._evaluator.availableImages=X||null,this._evaluator.formattedSection=lt||null;try{var Pt=this.expression.evaluate(this._evaluator);if(Pt==null||typeof Pt=="number"&&Pt!=Pt)return this._defaultValue;if(this._enumValues&&!(Pt in this._enumValues))throw new To("Expected value to be one of "+Object.keys(this._enumValues).map(function(Bt){return JSON.stringify(Bt)}).join(", ")+", but found "+JSON.stringify(Pt)+" instead.");return Pt}catch(Bt){return this._warningHistory[Bt.message]||(this._warningHistory[Bt.message]=!0,typeof console!="undefined"&&console.warn(Bt.message)),this._defaultValue}};var gu=function(p,C){this.kind=p,this._styleExpression=C,this.isStateDependent=p!=="constant"&&!Qa(C.expression)};gu.prototype.evaluateWithoutErrorHandling=function(d,p,C,N,X,lt){return this._styleExpression.evaluateWithoutErrorHandling(d,p,C,N,X,lt)},gu.prototype.evaluate=function(d,p,C,N,X,lt){return this._styleExpression.evaluate(d,p,C,N,X,lt)};var Fu=function(p,C,N,X){this.kind=p,this.zoomStops=N,this._styleExpression=C,this.isStateDependent=p!=="camera"&&!Qa(C.expression),this.interpolationType=X};function Hs(d,p){if((d=Tu(d,p)).result==="error")return d;var C=d.value.expression,N=Eo(C);if(!N&&!Ds(p))return qs([new Pn("","data expressions not supported")]);var X=Ao(C,["zoom"]);if(!X&&!Ju(p))return qs([new Pn("","zoom expressions not supported")]);var lt=function Pt(Bt){var Xt=null;if(Bt instanceof As)Xt=Pt(Bt.result);else if(Bt instanceof Wo)for(var he=0,Re=Bt.args;he<Re.length&&!(Xt=Pt(Re[he]));he+=1);else(Bt instanceof Co||Bt instanceof ka)&&Bt.input instanceof Ne&&Bt.input.name==="zoom"&&(Xt=Bt);return Xt instanceof Pn||Bt.eachChild(function(Ge){var He=Pt(Ge);He instanceof Pn?Xt=He:!Xt&&He?Xt=new Pn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):Xt&&He&&Xt!==He&&(Xt=new Pn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),Xt}(C);return lt||X?lt instanceof Pn?qs([lt]):lt instanceof ka&&!ou(p)?qs([new Pn("",'"interpolate" expressions cannot be used with this property')]):au(lt?new Fu(N?"camera":"composite",d.value,lt.labels,lt instanceof ka?lt.interpolation:void 0):new gu(N?"constant":"source",d.value)):qs([new Pn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}Fu.prototype.evaluateWithoutErrorHandling=function(d,p,C,N,X,lt){return this._styleExpression.evaluateWithoutErrorHandling(d,p,C,N,X,lt)},Fu.prototype.evaluate=function(d,p,C,N,X,lt){return this._styleExpression.evaluate(d,p,C,N,X,lt)},Fu.prototype.interpolationFactor=function(d,p,C){return this.interpolationType?ka.interpolationFactor(this.interpolationType,d,p,C):0};var $o=function(p,C){this._parameters=p,this._specification=C,Fn(this,function N(X,lt){var Pt,Bt,Xt,he=lt.type==="color",Re=X.stops&&typeof X.stops[0][0]=="object",Ge=Re||!(Re||X.property!==void 0),He=X.type||(ou(lt)?"exponential":"interval");if(he&&((X=Fn({},X)).stops&&(X.stops=X.stops.map(function(fa){return[fa[0],zr.parse(fa[1])]})),X.default=zr.parse(X.default?X.default:lt.default)),X.colorSpace&&X.colorSpace!=="rgb"&&!Es[X.colorSpace])throw new Error("Unknown color space: "+X.colorSpace);if(He==="exponential")Pt=Ha;else if(He==="interval")Pt=Nu;else if(He==="categorical"){Pt=Ql,Bt=Object.create(null);for(var cn=0,Rn=X.stops;cn<Rn.length;cn+=1){var Cn=Rn[cn];Bt[Cn[0]]=Cn[1]}Xt=typeof X.stops[0][0]}else{if(He!=="identity")throw new Error('Unknown function type "'+He+'"');Pt=su}if(Re){for(var $n={},Xn=[],_r=0;_r<X.stops.length;_r++){var Nr=X.stops[_r],Gr=Nr[0].zoom;$n[Gr]===void 0&&($n[Gr]={zoom:Gr,type:X.type,property:X.property,default:X.default,stops:[]},Xn.push(Gr)),$n[Gr].stops.push([Nr[0].value,Nr[1]])}for(var pi=[],oi=0,Ni=Xn;oi<Ni.length;oi+=1){var Bi=Ni[oi];pi.push([$n[Bi].zoom,N($n[Bi],lt)])}var Qi={name:"linear"};return{kind:"composite",interpolationType:Qi,interpolationFactor:ka.interpolationFactor.bind(void 0,Qi),zoomStops:pi.map(function(fa){return fa[0]}),evaluate:function(na,eo){var Ia=na.zoom;return Ha({stops:pi,base:X.base},lt,Ia).evaluate(Ia,eo)}}}if(Ge){var pa=He==="exponential"?{name:"exponential",base:X.base!==void 0?X.base:1}:null;return{kind:"camera",interpolationType:pa,interpolationFactor:ka.interpolationFactor.bind(void 0,pa),zoomStops:X.stops.map(function(fa){return fa[0]}),evaluate:function(na){return Pt(X,lt,na.zoom,Bt,Xt)}}}return{kind:"source",evaluate:function(na,eo){var Ia=eo&&eo.properties?eo.properties[X.property]:void 0;return Ia===void 0?Tl(X.default,lt.default):Pt(X,lt,Ia,Bt,Xt)}}}(this._parameters,this._specification))};function fs(d){var p=d.key,C=d.value,N=d.valueSpec||{},X=d.objectElementValidators||{},lt=d.style,Pt=d.styleSpec,Bt=[],Xt=Wa(C);if(Xt!=="object")return[new xe(p,C,"object expected, "+Xt+" found")];for(var he in C){var Re=he.split(".")[0],Ge=N[Re]||N["*"],He=void 0;if(X[Re])He=X[Re];else if(N[Re])He=Na;else if(X["*"])He=X["*"];else{if(!N["*"]){Bt.push(new xe(p,C[he],'unknown property "'+he+'"'));continue}He=Na}Bt=Bt.concat(He({key:(p&&p+".")+he,value:C[he],valueSpec:Ge,style:lt,styleSpec:Pt,object:C,objectKey:he},C))}for(var cn in N)X[cn]||N[cn].required&&N[cn].default===void 0&&C[cn]===void 0&&Bt.push(new xe(p,C,'missing required property "'+cn+'"'));return Bt}function fl(d){var p=d.value,C=d.valueSpec,N=d.style,X=d.styleSpec,lt=d.key,Pt=d.arrayElementValidator||Na;if(Wa(p)!=="array")return[new xe(lt,p,"array expected, "+Wa(p)+" found")];if(C.length&&p.length!==C.length)return[new xe(lt,p,"array length "+C.length+" expected, length "+p.length+" found")];if(C["min-length"]&&p.length<C["min-length"])return[new xe(lt,p,"array length at least "+C["min-length"]+" expected, length "+p.length+" found")];var Bt={type:C.value,values:C.values};X.$version<7&&(Bt.function=C.function),Wa(C.value)==="object"&&(Bt=C.value);for(var Xt=[],he=0;he<p.length;he++)Xt=Xt.concat(Pt({array:p,arrayIndex:he,value:p[he],valueSpec:Bt,style:N,styleSpec:X,key:lt+"["+he+"]"}));return Xt}function zl(d){var p=d.key,C=d.value,N=d.valueSpec,X=Wa(C);return X==="number"&&C!=C&&(X="NaN"),X!=="number"?[new xe(p,C,"number expected, "+X+" found")]:"minimum"in N&&C<N.minimum?[new xe(p,C,C+" is less than the minimum value "+N.minimum)]:"maximum"in N&&C>N.maximum?[new xe(p,C,C+" is greater than the maximum value "+N.maximum)]:[]}function ql(d){var p,C,N,X=d.valueSpec,lt=rr(d.value.type),Pt={},Bt=lt!=="categorical"&&d.value.property===void 0,Xt=!Bt,he=Wa(d.value.stops)==="array"&&Wa(d.value.stops[0])==="array"&&Wa(d.value.stops[0][0])==="object",Re=fs({key:d.key,value:d.value,valueSpec:d.styleSpec.function,style:d.style,styleSpec:d.styleSpec,objectElementValidators:{stops:function(Rn){if(lt==="identity")return[new xe(Rn.key,Rn.value,'identity function may not have a "stops" property')];var Cn=[],$n=Rn.value;return Cn=Cn.concat(fl({key:Rn.key,value:$n,valueSpec:Rn.valueSpec,style:Rn.style,styleSpec:Rn.styleSpec,arrayElementValidator:Ge})),Wa($n)==="array"&&$n.length===0&&Cn.push(new xe(Rn.key,$n,"array must have at least one stop")),Cn},default:function(Rn){return Na({key:Rn.key,value:Rn.value,valueSpec:X,style:Rn.style,styleSpec:Rn.styleSpec})}}});return lt==="identity"&&Bt&&Re.push(new xe(d.key,d.value,'missing required property "property"')),lt==="identity"||d.value.stops||Re.push(new xe(d.key,d.value,'missing required property "stops"')),lt==="exponential"&&d.valueSpec.expression&&!ou(d.valueSpec)&&Re.push(new xe(d.key,d.value,"exponential functions not supported")),d.styleSpec.$version>=8&&(Xt&&!Ds(d.valueSpec)?Re.push(new xe(d.key,d.value,"property functions not supported")):Bt&&!Ju(d.valueSpec)&&Re.push(new xe(d.key,d.value,"zoom functions not supported"))),lt!=="categorical"&&!he||d.value.property!==void 0||Re.push(new xe(d.key,d.value,'"property" property is required')),Re;function Ge(cn){var Rn=[],Cn=cn.value,$n=cn.key;if(Wa(Cn)!=="array")return[new xe($n,Cn,"array expected, "+Wa(Cn)+" found")];if(Cn.length!==2)return[new xe($n,Cn,"array length 2 expected, length "+Cn.length+" found")];if(he){if(Wa(Cn[0])!=="object")return[new xe($n,Cn,"object expected, "+Wa(Cn[0])+" found")];if(Cn[0].zoom===void 0)return[new xe($n,Cn,"object stop key must have zoom")];if(Cn[0].value===void 0)return[new xe($n,Cn,"object stop key must have value")];if(N&&N>rr(Cn[0].zoom))return[new xe($n,Cn[0].zoom,"stop zoom values must appear in ascending order")];rr(Cn[0].zoom)!==N&&(N=rr(Cn[0].zoom),C=void 0,Pt={}),Rn=Rn.concat(fs({key:$n+"[0]",value:Cn[0],valueSpec:{zoom:{}},style:cn.style,styleSpec:cn.styleSpec,objectElementValidators:{zoom:zl,value:He}}))}else Rn=Rn.concat(He({key:$n+"[0]",value:Cn[0],valueSpec:{},style:cn.style,styleSpec:cn.styleSpec},Cn));return ms(En(Cn[1]))?Rn.concat([new xe($n+"[1]",Cn[1],"expressions are not allowed in function stops.")]):Rn.concat(Na({key:$n+"[1]",value:Cn[1],valueSpec:X,style:cn.style,styleSpec:cn.styleSpec}))}function He(cn,Rn){var Cn=Wa(cn.value),$n=rr(cn.value),Xn=cn.value!==null?cn.value:Rn;if(p){if(Cn!==p)return[new xe(cn.key,Xn,Cn+" stop domain type must match previous stop domain type "+p)]}else p=Cn;if(Cn!=="number"&&Cn!=="string"&&Cn!=="boolean")return[new xe(cn.key,Xn,"stop domain value must be a number, string, or boolean")];if(Cn!=="number"&&lt!=="categorical"){var _r="number expected, "+Cn+" found";return Ds(X)&&lt===void 0&&(_r+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new xe(cn.key,Xn,_r)]}return lt!=="categorical"||Cn!=="number"||isFinite($n)&&Math.floor($n)===$n?lt!=="categorical"&&Cn==="number"&&C!==void 0&&$n<C?[new xe(cn.key,Xn,"stop domain values must appear in ascending order")]:(C=$n,lt==="categorical"&&$n in Pt?[new xe(cn.key,Xn,"stop domain values must be unique")]:(Pt[$n]=!0,[])):[new xe(cn.key,Xn,"integer expected, found "+$n)]}}function zu(d){var p=(d.expressionContext==="property"?Hs:Tu)(En(d.value),d.valueSpec);if(p.result==="error")return p.value.map(function(N){return new xe(""+d.key+N.key,d.value,N.message)});var C=p.value.expression||p.value._styleExpression.expression;if(d.expressionContext==="property"&&d.propertyKey==="text-font"&&!C.outputDefined())return[new xe(d.key,d.value,'Invalid data expression for "'+d.propertyKey+'". Output values must be contained as literals within the expression.')];if(d.expressionContext==="property"&&d.propertyType==="layout"&&!Qa(C))return[new xe(d.key,d.value,'"feature-state" data expressions are not supported with layout properties.')];if(d.expressionContext==="filter"&&!Qa(C))return[new xe(d.key,d.value,'"feature-state" data expressions are not supported with filters.')];if(d.expressionContext&&d.expressionContext.indexOf("cluster")===0){if(!Ao(C,["zoom","feature-state"]))return[new xe(d.key,d.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(d.expressionContext==="cluster-initial"&&!Eo(C))return[new xe(d.key,d.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function $u(d){var p=d.key,C=d.value,N=d.valueSpec,X=[];return Array.isArray(N.values)?N.values.indexOf(rr(C))===-1&&X.push(new xe(p,C,"expected one of ["+N.values.join(", ")+"], "+JSON.stringify(C)+" found")):Object.keys(N.values).indexOf(rr(C))===-1&&X.push(new xe(p,C,"expected one of ["+Object.keys(N.values).join(", ")+"], "+JSON.stringify(C)+" found")),X}function Au(d){if(d===!0||d===!1)return!0;if(!Array.isArray(d)||d.length===0)return!1;switch(d[0]){case"has":return d.length>=2&&d[1]!=="$id"&&d[1]!=="$type";case"in":return d.length>=3&&(typeof d[1]!="string"||Array.isArray(d[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return d.length!==3||Array.isArray(d[1])||Array.isArray(d[2]);case"any":case"all":for(var p=0,C=d.slice(1);p<C.length;p+=1){var N=C[p];if(!Au(N)&&typeof N!="boolean")return!1}return!0;default:return!0}}$o.deserialize=function(d){return new $o(d._parameters,d._specification)},$o.serialize=function(d){return{_parameters:d._parameters,_specification:d._specification}};var Cu={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function mu(d){if(d==null)return{filter:function(){return!0},needGeometry:!1};Au(d)||(d=zs(d));var p=Tu(d,Cu);if(p.result==="error")throw new Error(p.value.map(function(C){return C.key+": "+C.message}).join(", "));return{filter:function(N,X,lt){return p.value.evaluate(N,X,{},lt)},needGeometry:function C(N){if(!Array.isArray(N))return!1;if(N[0]==="within")return!0;for(var X=1;X<N.length;X++)if(C(N[X]))return!0;return!1}(d)}}function Uu(d,p){return d<p?-1:d>p?1:0}function zs(d){if(!d)return!0;var p,C=d[0];return d.length<=1?C!=="any":C==="=="?Ul(d[1],d[2],"=="):C==="!="?kl(Ul(d[1],d[2],"==")):C==="<"||C===">"||C==="<="||C===">="?Ul(d[1],d[2],C):C==="any"?(p=d.slice(1),["any"].concat(p.map(zs))):C==="all"?["all"].concat(d.slice(1).map(zs)):C==="none"?["all"].concat(d.slice(1).map(zs).map(kl)):C==="in"?gc(d[1],d.slice(2)):C==="!in"?kl(gc(d[1],d.slice(2))):C==="has"?Cl(d[1]):C==="!has"?kl(Cl(d[1])):C!=="within"||d}function Ul(d,p,C){switch(d){case"$type":return["filter-type-"+C,p];case"$id":return["filter-id-"+C,p];default:return["filter-"+C,d,p]}}function gc(d,p){if(p.length===0)return!1;switch(d){case"$type":return["filter-type-in",["literal",p]];case"$id":return["filter-id-in",["literal",p]];default:return p.length>200&&!p.some(function(C){return typeof C!=typeof p[0]})?["filter-in-large",d,["literal",p.sort(Uu)]]:["filter-in-small",d,["literal",p]]}}function Cl(d){switch(d){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",d]}}function kl(d){return["!",d]}function Gl(d){return Au(En(d.value))?zu(Fn({},d,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function p(C){var N=C.value,X=C.key;if(Wa(N)!=="array")return[new xe(X,N,"array expected, "+Wa(N)+" found")];var lt,Pt=C.styleSpec,Bt=[];if(N.length<1)return[new xe(X,N,"filter array must have at least 1 element")];switch(Bt=Bt.concat($u({key:X+"[0]",value:N[0],valueSpec:Pt.filter_operator,style:C.style,styleSpec:C.styleSpec})),rr(N[0])){case"<":case"<=":case">":case">=":N.length>=2&&rr(N[1])==="$type"&&Bt.push(new xe(X,N,'"$type" cannot be use with operator "'+N[0]+'"'));case"==":case"!=":N.length!==3&&Bt.push(new xe(X,N,'filter array for operator "'+N[0]+'" must have 3 elements'));case"in":case"!in":N.length>=2&&(lt=Wa(N[1]))!=="string"&&Bt.push(new xe(X+"[1]",N[1],"string expected, "+lt+" found"));for(var Xt=2;Xt<N.length;Xt++)lt=Wa(N[Xt]),rr(N[1])==="$type"?Bt=Bt.concat($u({key:X+"["+Xt+"]",value:N[Xt],valueSpec:Pt.geometry_type,style:C.style,styleSpec:C.styleSpec})):lt!=="string"&&lt!=="number"&&lt!=="boolean"&&Bt.push(new xe(X+"["+Xt+"]",N[Xt],"string, number, or boolean expected, "+lt+" found"));break;case"any":case"all":case"none":for(var he=1;he<N.length;he++)Bt=Bt.concat(p({key:X+"["+he+"]",value:N[he],style:C.style,styleSpec:C.styleSpec}));break;case"has":case"!has":lt=Wa(N[1]),N.length!==2?Bt.push(new xe(X,N,'filter array for "'+N[0]+'" operator must have 2 elements')):lt!=="string"&&Bt.push(new xe(X+"[1]",N[1],"string expected, "+lt+" found"));break;case"within":lt=Wa(N[1]),N.length!==2?Bt.push(new xe(X,N,'filter array for "'+N[0]+'" operator must have 2 elements')):lt!=="object"&&Bt.push(new xe(X+"[1]",N[1],"object expected, "+lt+" found"))}return Bt}(d)}function cc(d,p){var C=d.key,N=d.style,X=d.styleSpec,lt=d.value,Pt=d.objectKey,Bt=X[p+"_"+d.layerType];if(!Bt)return[];var Xt=Pt.match(/^(.*)-transition$/);if(p==="paint"&&Xt&&Bt[Xt[1]]&&Bt[Xt[1]].transition)return Na({key:C,value:lt,valueSpec:X.transition,style:N,styleSpec:X});var he,Re=d.valueSpec||Bt[Pt];if(!Re)return[new xe(C,lt,'unknown property "'+Pt+'"')];if(Wa(lt)==="string"&&Ds(Re)&&!Re.tokens&&(he=/^{([^}]+)}$/.exec(lt)))return[new xe(C,lt,'"'+Pt+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(he[1])+" }`.")];var Ge=[];return d.layerType==="symbol"&&(Pt==="text-field"&&N&&!N.glyphs&&Ge.push(new xe(C,lt,'use of "text-field" requires a style "glyphs" property')),Pt==="text-font"&&Pl(En(lt))&&rr(lt.type)==="identity"&&Ge.push(new xe(C,lt,'"text-font" does not support identity functions'))),Ge.concat(Na({key:d.key,value:lt,valueSpec:Re,style:N,styleSpec:X,expressionContext:"property",propertyType:p,propertyKey:Pt}))}function Qu(d){return cc(d,"paint")}function Ol(d){return cc(d,"layout")}function Vl(d){var p=[],C=d.value,N=d.key,X=d.style,lt=d.styleSpec;C.type||C.ref||p.push(new xe(N,C,'either "type" or "ref" is required'));var Pt,Bt=rr(C.type),Xt=rr(C.ref);if(C.id)for(var he=rr(C.id),Re=0;Re<d.arrayIndex;Re++){var Ge=X.layers[Re];rr(Ge.id)===he&&p.push(new xe(N,C.id,'duplicate layer id "'+C.id+'", previously used at line '+Ge.id.__line__))}if("ref"in C)["type","source","source-layer","filter","layout"].forEach(function(Rn){Rn in C&&p.push(new xe(N,C[Rn],'"'+Rn+'" is prohibited for ref layers'))}),X.layers.forEach(function(Rn){rr(Rn.id)===Xt&&(Pt=Rn)}),Pt?Pt.ref?p.push(new xe(N,C.ref,"ref cannot reference another ref layer")):Bt=rr(Pt.type):p.push(new xe(N,C.ref,'ref layer "'+Xt+'" not found'));else if(Bt!=="background")if(C.source){var He=X.sources&&X.sources[C.source],cn=He&&rr(He.type);He?cn==="vector"&&Bt==="raster"?p.push(new xe(N,C.source,'layer "'+C.id+'" requires a raster source')):cn==="raster"&&Bt!=="raster"?p.push(new xe(N,C.source,'layer "'+C.id+'" requires a vector source')):cn!=="vector"||C["source-layer"]?cn==="raster-dem"&&Bt!=="hillshade"?p.push(new xe(N,C.source,"raster-dem source can only be used with layer type 'hillshade'.")):Bt!=="line"||!C.paint||!C.paint["line-gradient"]||cn==="geojson"&&He.lineMetrics||p.push(new xe(N,C,'layer "'+C.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):p.push(new xe(N,C,'layer "'+C.id+'" must specify a "source-layer"')):p.push(new xe(N,C.source,'source "'+C.source+'" not found'))}else p.push(new xe(N,C,'missing required property "source"'));return p=p.concat(fs({key:N,value:C,valueSpec:lt.layer,style:d.style,styleSpec:d.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Na({key:N+".type",value:C.type,valueSpec:lt.layer.type,style:d.style,styleSpec:d.styleSpec,object:C,objectKey:"type"})},filter:Gl,layout:function(Cn){return fs({layer:C,key:Cn.key,value:Cn.value,style:Cn.style,styleSpec:Cn.styleSpec,objectElementValidators:{"*":function(Xn){return Ol(Fn({layerType:Bt},Xn))}}})},paint:function(Cn){return fs({layer:C,key:Cn.key,value:Cn.value,style:Cn.style,styleSpec:Cn.styleSpec,objectElementValidators:{"*":function(Xn){return Qu(Fn({layerType:Bt},Xn))}}})}}}))}function tu(d){var p=d.value,C=d.key,N=Wa(p);return N!=="string"?[new xe(C,p,"string expected, "+N+" found")]:[]}var go={promoteId:function(p){var C=p.key,N=p.value;if(Wa(N)==="string")return tu({key:C,value:N});var X=[];for(var lt in N)X.push.apply(X,tu({key:C+"."+lt,value:N[lt]}));return X}};function gl(d){var p=d.value,C=d.key,N=d.styleSpec,X=d.style;if(!p.type)return[new xe(C,p,'"type" is required')];var lt,Pt=rr(p.type);switch(Pt){case"vector":case"raster":case"raster-dem":return fs({key:C,value:p,valueSpec:N["source_"+Pt.replace("-","_")],style:d.style,styleSpec:N,objectElementValidators:go});case"geojson":if(lt=fs({key:C,value:p,valueSpec:N.source_geojson,style:X,styleSpec:N,objectElementValidators:go}),p.cluster)for(var Bt in p.clusterProperties){var Xt=p.clusterProperties[Bt],he=Xt[0],Re=typeof he=="string"?[he,["accumulated"],["get",Bt]]:he;lt.push.apply(lt,zu({key:C+"."+Bt+".map",value:Xt[1],expressionContext:"cluster-map"})),lt.push.apply(lt,zu({key:C+"."+Bt+".reduce",value:Re,expressionContext:"cluster-reduce"}))}return lt;case"video":return fs({key:C,value:p,valueSpec:N.source_video,style:X,styleSpec:N});case"image":return fs({key:C,value:p,valueSpec:N.source_image,style:X,styleSpec:N});case"canvas":return[new xe(C,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return $u({key:C+".type",value:p.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:X,styleSpec:N})}}function hl(d){var p=d.value,C=d.styleSpec,N=C.light,X=d.style,lt=[],Pt=Wa(p);if(p===void 0)return lt;if(Pt!=="object")return lt.concat([new xe("light",p,"object expected, "+Pt+" found")]);for(var Bt in p){var Xt=Bt.match(/^(.*)-transition$/);lt=lt.concat(Xt&&N[Xt[1]]&&N[Xt[1]].transition?Na({key:Bt,value:p[Bt],valueSpec:C.transition,style:X,styleSpec:C}):N[Bt]?Na({key:Bt,value:p[Bt],valueSpec:N[Bt],style:X,styleSpec:C}):[new xe(Bt,p[Bt],'unknown property "'+Bt+'"')])}return lt}var Ys={"*":function(){return[]},array:fl,boolean:function(p){var C=p.value,N=p.key,X=Wa(C);return X!=="boolean"?[new xe(N,C,"boolean expected, "+X+" found")]:[]},number:zl,color:function(p){var C=p.key,N=p.value,X=Wa(N);return X!=="string"?[new xe(C,N,"color expected, "+X+" found")]:pr(N)===null?[new xe(C,N,'color expected, "'+N+'" found')]:[]},constants:$e,enum:$u,filter:Gl,function:ql,layer:Vl,object:fs,source:gl,light:hl,string:tu,formatted:function(p){return tu(p).length===0?[]:zu(p)},resolvedImage:function(p){return tu(p).length===0?[]:zu(p)}};function Na(d){var p=d.value,C=d.valueSpec,N=d.styleSpec;return C.expression&&Pl(rr(p))?ql(d):C.expression&&ms(En(p))?zu(d):C.type&&Ys[C.type]?Ys[C.type](d):fs(Fn({},d,{valueSpec:C.type?N[C.type]:C}))}function _o(d){var p=d.value,C=d.key,N=tu(d);return N.length||(p.indexOf("{fontstack}")===-1&&N.push(new xe(C,p,'"glyphs" url must include a "{fontstack}" token')),p.indexOf("{range}")===-1&&N.push(new xe(C,p,'"glyphs" url must include a "{range}" token'))),N}function Us(d,p){p===void 0&&(p=ue);var C=[];return C=C.concat(Na({key:"",value:d,valueSpec:p.$root,styleSpec:p,style:d,objectElementValidators:{glyphs:_o,"*":function(){return[]}}})),d.constants&&(C=C.concat($e({key:"constants",value:d.constants,style:d,styleSpec:p}))),ml(C)}function ml(d){return[].concat(d).sort(function(p,C){return p.line-C.line})}function qu(d){return function(){for(var p=[],C=arguments.length;C--;)p[C]=arguments[C];return ml(d.apply(this,p))}}Us.source=qu(gl),Us.light=qu(hl),Us.layer=qu(Vl),Us.filter=qu(Gl),Us.paintProperty=qu(Qu),Us.layoutProperty=qu(Ol);var ku=Us,mc=ku.light,Os=ku.paintProperty,tl=ku.layoutProperty;function uu(d,p){var C=!1;if(p&&p.length)for(var N=0,X=p;N<X.length;N+=1)d.fire(new ie(new Error(X[N].message))),C=!0;return C}var Zs=Qo;function Qo(d,p,C){var N=this.cells=[];if(d instanceof ArrayBuffer){this.arrayBuffer=d;var X=new Int32Array(this.arrayBuffer);d=X[0],this.d=(p=X[1])+2*(C=X[2]);for(var lt=0;lt<this.d*this.d;lt++){var Pt=X[3+lt],Bt=X[3+lt+1];N.push(Pt===Bt?null:X.subarray(Pt,Bt))}var Xt=X[3+N.length+1];this.keys=X.subarray(X[3+N.length],Xt),this.bboxes=X.subarray(Xt),this.insert=this._insertReadonly}else{this.d=p+2*C;for(var he=0;he<this.d*this.d;he++)N.push([]);this.keys=[],this.bboxes=[]}this.n=p,this.extent=d,this.padding=C,this.scale=p/d,this.uid=0;var Re=C/p*d;this.min=-Re,this.max=d+Re}Qo.prototype.insert=function(d,p,C,N,X){this._forEachCell(p,C,N,X,this._insertCell,this.uid++),this.keys.push(d),this.bboxes.push(p),this.bboxes.push(C),this.bboxes.push(N),this.bboxes.push(X)},Qo.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Qo.prototype._insertCell=function(d,p,C,N,X,lt){this.cells[X].push(lt)},Qo.prototype.query=function(d,p,C,N,X){var lt=this.min,Pt=this.max;if(d<=lt&&p<=lt&&Pt<=C&&Pt<=N&&!X)return Array.prototype.slice.call(this.keys);var Bt=[];return this._forEachCell(d,p,C,N,this._queryCell,Bt,{},X),Bt},Qo.prototype._queryCell=function(d,p,C,N,X,lt,Pt,Bt){var Xt=this.cells[X];if(Xt!==null)for(var he=this.keys,Re=this.bboxes,Ge=0;Ge<Xt.length;Ge++){var He=Xt[Ge];if(Pt[He]===void 0){var cn=4*He;(Bt?Bt(Re[cn+0],Re[cn+1],Re[cn+2],Re[cn+3]):d<=Re[cn+2]&&p<=Re[cn+3]&&C>=Re[cn+0]&&N>=Re[cn+1])?(Pt[He]=!0,lt.push(he[He])):Pt[He]=!1}}},Qo.prototype._forEachCell=function(d,p,C,N,X,lt,Pt,Bt){for(var Xt=this._convertToCellCoord(d),he=this._convertToCellCoord(p),Re=this._convertToCellCoord(C),Ge=this._convertToCellCoord(N),He=Xt;He<=Re;He++)for(var cn=he;cn<=Ge;cn++){var Rn=this.d*cn+He;if((!Bt||Bt(this._convertFromCellCoord(He),this._convertFromCellCoord(cn),this._convertFromCellCoord(He+1),this._convertFromCellCoord(cn+1)))&&X.call(this,d,p,C,N,Rn,lt,Pt,Bt))return}},Qo.prototype._convertFromCellCoord=function(d){return(d-this.padding)/this.scale},Qo.prototype._convertToCellCoord=function(d){return Math.max(0,Math.min(this.d-1,Math.floor(d*this.scale)+this.padding))},Qo.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var d=this.cells,p=3+this.cells.length+1+1,C=0,N=0;N<this.cells.length;N++)C+=this.cells[N].length;var X=new Int32Array(p+C+this.keys.length+this.bboxes.length);X[0]=this.extent,X[1]=this.n,X[2]=this.padding;for(var lt=p,Pt=0;Pt<d.length;Pt++){var Bt=d[Pt];X[3+Pt]=lt,X.set(Bt,lt),lt+=Bt.length}return X[3+d.length]=lt,X.set(this.keys,lt),X[3+d.length+1]=lt+=this.keys.length,X.set(this.bboxes,lt),lt+=this.bboxes.length,X.buffer};var eu=n.ImageData,Ou=n.ImageBitmap,qo={};function Wi(d,p,C){C===void 0&&(C={}),Object.defineProperty(p,"_classRegistryKey",{value:d,writeable:!1}),qo[d]={klass:p,omit:C.omit||[],shallow:C.shallow||[]}}for(var ws in Wi("Object",Object),Zs.serialize=function(d,p){var C=d.toArrayBuffer();return p&&p.push(C),{buffer:C}},Zs.deserialize=function(d){return new Zs(d.buffer)},Wi("Grid",Zs),Wi("Color",zr),Wi("Error",Error),Wi("ResolvedImage",ro),Wi("StylePropertyFunction",$o),Wi("StyleExpression",Al,{omit:["_evaluator"]}),Wi("ZoomDependentExpression",Fu),Wi("ZoomConstantExpression",gu),Wi("CompoundExpression",Ne,{omit:["_evaluate"]}),Ro)Ro[ws]._classRegistryKey||Wi("Expression_"+ws,Ro[ws]);function Gu(d){return d&&typeof ArrayBuffer!="undefined"&&(d instanceof ArrayBuffer||d.constructor&&d.constructor.name==="ArrayBuffer")}function wu(d){return Ou&&d instanceof Ou}function Fo(d,p){if(d==null||typeof d=="boolean"||typeof d=="number"||typeof d=="string"||d instanceof Boolean||d instanceof Number||d instanceof String||d instanceof Date||d instanceof RegExp)return d;if(Gu(d)||wu(d))return p&&p.push(d),d;if(ArrayBuffer.isView(d)){var C=d;return p&&p.push(C.buffer),C}if(d instanceof eu)return p&&p.push(d.data.buffer),d;if(Array.isArray(d)){for(var N=[],X=0,lt=d;X<lt.length;X+=1)N.push(Fo(lt[X],p));return N}if(typeof d=="object"){var Pt=d.constructor,Bt=Pt._classRegistryKey;if(!Bt)throw new Error("can't serialize object of unregistered class");var Xt=Pt.serialize?Pt.serialize(d,p):{};if(!Pt.serialize){for(var he in d)if(d.hasOwnProperty(he)&&!(qo[Bt].omit.indexOf(he)>=0)){var Re=d[he];Xt[he]=qo[Bt].shallow.indexOf(he)>=0?Re:Fo(Re,p)}d instanceof Error&&(Xt.message=d.message)}if(Xt.$name)throw new Error("$name property is reserved for worker serialization logic.");return Bt!=="Object"&&(Xt.$name=Bt),Xt}throw new Error("can't serialize object of type "+typeof d)}function ko(d){if(d==null||typeof d=="boolean"||typeof d=="number"||typeof d=="string"||d instanceof Boolean||d instanceof Number||d instanceof String||d instanceof Date||d instanceof RegExp||Gu(d)||wu(d)||ArrayBuffer.isView(d)||d instanceof eu)return d;if(Array.isArray(d))return d.map(ko);if(typeof d=="object"){var p=d.$name||"Object",C=qo[p].klass;if(!C)throw new Error("can't deserialize unregistered class "+p);if(C.deserialize)return C.deserialize(d);for(var N=Object.create(C.prototype),X=0,lt=Object.keys(d);X<lt.length;X+=1){var Pt=lt[X];if(Pt!=="$name"){var Bt=d[Pt];N[Pt]=qo[p].shallow.indexOf(Pt)>=0?Bt:ko(Bt)}}return N}throw new Error("can't deserialize object of type "+typeof d)}var Eu=function(){this.first=!0};Eu.prototype.update=function(d,p){var C=Math.floor(d);return this.first?(this.first=!1,this.lastIntegerZoom=C,this.lastIntegerZoomTime=0,this.lastZoom=d,this.lastFloorZoom=C,!0):(this.lastFloorZoom>C?(this.lastIntegerZoom=C+1,this.lastIntegerZoomTime=p):this.lastFloorZoom<C&&(this.lastIntegerZoom=C,this.lastIntegerZoomTime=p),d!==this.lastZoom&&(this.lastZoom=d,this.lastFloorZoom=C,!0))};var Mi={"Latin-1 Supplement":function(p){return p>=128&&p<=255},Arabic:function(p){return p>=1536&&p<=1791},"Arabic Supplement":function(p){return p>=1872&&p<=1919},"Arabic Extended-A":function(p){return p>=2208&&p<=2303},"Hangul Jamo":function(p){return p>=4352&&p<=4607},"Unified Canadian Aboriginal Syllabics":function(p){return p>=5120&&p<=5759},Khmer:function(p){return p>=6016&&p<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(p){return p>=6320&&p<=6399},"General Punctuation":function(p){return p>=8192&&p<=8303},"Letterlike Symbols":function(p){return p>=8448&&p<=8527},"Number Forms":function(p){return p>=8528&&p<=8591},"Miscellaneous Technical":function(p){return p>=8960&&p<=9215},"Control Pictures":function(p){return p>=9216&&p<=9279},"Optical Character Recognition":function(p){return p>=9280&&p<=9311},"Enclosed Alphanumerics":function(p){return p>=9312&&p<=9471},"Geometric Shapes":function(p){return p>=9632&&p<=9727},"Miscellaneous Symbols":function(p){return p>=9728&&p<=9983},"Miscellaneous Symbols and Arrows":function(p){return p>=11008&&p<=11263},"CJK Radicals Supplement":function(p){return p>=11904&&p<=12031},"Kangxi Radicals":function(p){return p>=12032&&p<=12255},"Ideographic Description Characters":function(p){return p>=12272&&p<=12287},"CJK Symbols and Punctuation":function(p){return p>=12288&&p<=12351},Hiragana:function(p){return p>=12352&&p<=12447},Katakana:function(p){return p>=12448&&p<=12543},Bopomofo:function(p){return p>=12544&&p<=12591},"Hangul Compatibility Jamo":function(p){return p>=12592&&p<=12687},Kanbun:function(p){return p>=12688&&p<=12703},"Bopomofo Extended":function(p){return p>=12704&&p<=12735},"CJK Strokes":function(p){return p>=12736&&p<=12783},"Katakana Phonetic Extensions":function(p){return p>=12784&&p<=12799},"Enclosed CJK Letters and Months":function(p){return p>=12800&&p<=13055},"CJK Compatibility":function(p){return p>=13056&&p<=13311},"CJK Unified Ideographs Extension A":function(p){return p>=13312&&p<=19903},"Yijing Hexagram Symbols":function(p){return p>=19904&&p<=19967},"CJK Unified Ideographs":function(p){return p>=19968&&p<=40959},"Yi Syllables":function(p){return p>=40960&&p<=42127},"Yi Radicals":function(p){return p>=42128&&p<=42191},"Hangul Jamo Extended-A":function(p){return p>=43360&&p<=43391},"Hangul Syllables":function(p){return p>=44032&&p<=55215},"Hangul Jamo Extended-B":function(p){return p>=55216&&p<=55295},"Private Use Area":function(p){return p>=57344&&p<=63743},"CJK Compatibility Ideographs":function(p){return p>=63744&&p<=64255},"Arabic Presentation Forms-A":function(p){return p>=64336&&p<=65023},"Vertical Forms":function(p){return p>=65040&&p<=65055},"CJK Compatibility Forms":function(p){return p>=65072&&p<=65103},"Small Form Variants":function(p){return p>=65104&&p<=65135},"Arabic Presentation Forms-B":function(p){return p>=65136&&p<=65279},"Halfwidth and Fullwidth Forms":function(p){return p>=65280&&p<=65519}};function el(d){for(var p=0,C=d;p<C.length;p+=1)if(Iu(C[p].charCodeAt(0)))return!0;return!1}function Iu(d){return!(d!==746&&d!==747&&(d<4352||!(Mi["Bopomofo Extended"](d)||Mi.Bopomofo(d)||Mi["CJK Compatibility Forms"](d)&&!(d>=65097&&d<=65103)||Mi["CJK Compatibility Ideographs"](d)||Mi["CJK Compatibility"](d)||Mi["CJK Radicals Supplement"](d)||Mi["CJK Strokes"](d)||!(!Mi["CJK Symbols and Punctuation"](d)||d>=12296&&d<=12305||d>=12308&&d<=12319||d===12336)||Mi["CJK Unified Ideographs Extension A"](d)||Mi["CJK Unified Ideographs"](d)||Mi["Enclosed CJK Letters and Months"](d)||Mi["Hangul Compatibility Jamo"](d)||Mi["Hangul Jamo Extended-A"](d)||Mi["Hangul Jamo Extended-B"](d)||Mi["Hangul Jamo"](d)||Mi["Hangul Syllables"](d)||Mi.Hiragana(d)||Mi["Ideographic Description Characters"](d)||Mi.Kanbun(d)||Mi["Kangxi Radicals"](d)||Mi["Katakana Phonetic Extensions"](d)||Mi.Katakana(d)&&d!==12540||!(!Mi["Halfwidth and Fullwidth Forms"](d)||d===65288||d===65289||d===65293||d>=65306&&d<=65310||d===65339||d===65341||d===65343||d>=65371&&d<=65503||d===65507||d>=65512&&d<=65519)||!(!Mi["Small Form Variants"](d)||d>=65112&&d<=65118||d>=65123&&d<=65126)||Mi["Unified Canadian Aboriginal Syllabics"](d)||Mi["Unified Canadian Aboriginal Syllabics Extended"](d)||Mi["Vertical Forms"](d)||Mi["Yijing Hexagram Symbols"](d)||Mi["Yi Syllables"](d)||Mi["Yi Radicals"](d))))}function Lu(d){return!(Iu(d)||function(p){return!!(Mi["Latin-1 Supplement"](p)&&(p===167||p===169||p===174||p===177||p===188||p===189||p===190||p===215||p===247)||Mi["General Punctuation"](p)&&(p===8214||p===8224||p===8225||p===8240||p===8241||p===8251||p===8252||p===8258||p===8263||p===8264||p===8265||p===8273)||Mi["Letterlike Symbols"](p)||Mi["Number Forms"](p)||Mi["Miscellaneous Technical"](p)&&(p>=8960&&p<=8967||p>=8972&&p<=8991||p>=8996&&p<=9e3||p===9003||p>=9085&&p<=9114||p>=9150&&p<=9165||p===9167||p>=9169&&p<=9179||p>=9186&&p<=9215)||Mi["Control Pictures"](p)&&p!==9251||Mi["Optical Character Recognition"](p)||Mi["Enclosed Alphanumerics"](p)||Mi["Geometric Shapes"](p)||Mi["Miscellaneous Symbols"](p)&&!(p>=9754&&p<=9759)||Mi["Miscellaneous Symbols and Arrows"](p)&&(p>=11026&&p<=11055||p>=11088&&p<=11097||p>=11192&&p<=11243)||Mi["CJK Symbols and Punctuation"](p)||Mi.Katakana(p)||Mi["Private Use Area"](p)||Mi["CJK Compatibility Forms"](p)||Mi["Small Form Variants"](p)||Mi["Halfwidth and Fullwidth Forms"](p)||p===8734||p===8756||p===8757||p>=9984&&p<=10087||p>=10102&&p<=10131||p===65532||p===65533)}(d))}function nu(d){return d>=1424&&d<=2303||Mi["Arabic Presentation Forms-A"](d)||Mi["Arabic Presentation Forms-B"](d)}function we(d,p){return!(!p&&nu(d)||d>=2304&&d<=3583||d>=3840&&d<=4255||Mi.Khmer(d))}function Te(d){for(var p=0,C=d;p<C.length;p+=1)if(nu(C[p].charCodeAt(0)))return!0;return!1}var dn=null,tn="unavailable",wn=null,vr=function(p){p&&typeof p=="string"&&p.indexOf("NetworkError")>-1&&(tn="error"),dn&&dn(p)};function Lr(){Kr.fire(new Vt("pluginStateChange",{pluginStatus:tn,pluginURL:wn}))}var Kr=new Ce,ti=function(){return tn},Fr=function(){if(tn!=="deferred"||!wn)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");tn="loading",Lr(),wn&&hr({url:wn},function(p){p?vr(p):(tn="loaded",Lr())})},ui={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return tn==="loaded"||ui.applyArabicShaping!=null},isLoading:function(){return tn==="loading"},setState:function(p){tn=p.pluginStatus,wn=p.pluginURL},isParsed:function(){return ui.applyArabicShaping!=null&&ui.processBidirectionalText!=null&&ui.processStyledBidirectionalText!=null},getPluginURL:function(){return wn}},br=function(p,C){this.zoom=p,C?(this.now=C.now,this.fadeDuration=C.fadeDuration,this.zoomHistory=C.zoomHistory,this.transition=C.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Eu,this.transition={})};br.prototype.isSupportedScript=function(d){return function(p,C){for(var N=0,X=p;N<X.length;N+=1)if(!we(X[N].charCodeAt(0),C))return!1;return!0}(d,ui.isLoaded())},br.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},br.prototype.getCrossfadeParameters=function(){var d=this.zoom,p=d-Math.floor(d),C=this.crossFadingFactor();return d>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:p+(1-p)*C}:{fromScale:.5,toScale:1,t:1-(1-C)*p}};var Zt=function(p,C){this.property=p,this.value=C,this.expression=function(N,X){if(Pl(N))return new $o(N,X);if(ms(N)){var lt=Hs(N,X);if(lt.result==="error")throw new Error(lt.value.map(function(Bt){return Bt.key+": "+Bt.message}).join(", "));return lt.value}var Pt=N;return typeof N=="string"&&X.type==="color"&&(Pt=zr.parse(N)),{kind:"constant",evaluate:function(){return Pt}}}(C===void 0?p.specification.default:C,p.specification)};Zt.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},Zt.prototype.possiblyEvaluate=function(d,p,C){return this.property.possiblyEvaluate(this,d,p,C)};var te=function(p){this.property=p,this.value=new Zt(p,void 0)};te.prototype.transitioned=function(d,p){return new _e(this.property,this.value,p,v({},d.transition,this.transition),d.now)},te.prototype.untransitioned=function(){return new _e(this.property,this.value,null,{},0)};var Le=function(p){this._properties=p,this._values=Object.create(p.defaultTransitionablePropertyValues)};Le.prototype.getValue=function(d){return P(this._values[d].value.value)},Le.prototype.setValue=function(d,p){this._values.hasOwnProperty(d)||(this._values[d]=new te(this._values[d].property)),this._values[d].value=new Zt(this._values[d].property,p===null?void 0:P(p))},Le.prototype.getTransition=function(d){return P(this._values[d].transition)},Le.prototype.setTransition=function(d,p){this._values.hasOwnProperty(d)||(this._values[d]=new te(this._values[d].property)),this._values[d].transition=P(p)||void 0},Le.prototype.serialize=function(){for(var d={},p=0,C=Object.keys(this._values);p<C.length;p+=1){var N=C[p],X=this.getValue(N);X!==void 0&&(d[N]=X);var lt=this.getTransition(N);lt!==void 0&&(d[N+"-transition"]=lt)}return d},Le.prototype.transitioned=function(d,p){for(var C=new Rt(this._properties),N=0,X=Object.keys(this._values);N<X.length;N+=1){var lt=X[N];C._values[lt]=this._values[lt].transitioned(d,p._values[lt])}return C},Le.prototype.untransitioned=function(){for(var d=new Rt(this._properties),p=0,C=Object.keys(this._values);p<C.length;p+=1){var N=C[p];d._values[N]=this._values[N].untransitioned()}return d};var _e=function(p,C,N,X,lt){this.property=p,this.value=C,this.begin=lt+X.delay||0,this.end=this.begin+X.duration||0,p.specification.transition&&(X.delay||X.duration)&&(this.prior=N)};_e.prototype.possiblyEvaluate=function(d,p,C){var N=d.now||0,X=this.value.possiblyEvaluate(d,p,C),lt=this.prior;if(lt){if(N>this.end)return this.prior=null,X;if(this.value.isDataDriven())return this.prior=null,X;if(N<this.begin)return lt.possiblyEvaluate(d,p,C);var Pt=(N-this.begin)/(this.end-this.begin);return this.property.interpolate(lt.possiblyEvaluate(d,p,C),X,function(Bt){if(Bt<=0)return 0;if(Bt>=1)return 1;var Xt=Bt*Bt,he=Xt*Bt;return 4*(Bt<.5?he:3*(Bt-Xt)+he-.75)}(Pt))}return X};var Rt=function(p){this._properties=p,this._values=Object.create(p.defaultTransitioningPropertyValues)};Rt.prototype.possiblyEvaluate=function(d,p,C){for(var N=new re(this._properties),X=0,lt=Object.keys(this._values);X<lt.length;X+=1){var Pt=lt[X];N._values[Pt]=this._values[Pt].possiblyEvaluate(d,p,C)}return N},Rt.prototype.hasTransition=function(){for(var d=0,p=Object.keys(this._values);d<p.length;d+=1)if(this._values[p[d]].prior)return!0;return!1};var zt=function(p){this._properties=p,this._values=Object.create(p.defaultPropertyValues)};zt.prototype.getValue=function(d){return P(this._values[d].value)},zt.prototype.setValue=function(d,p){this._values[d]=new Zt(this._values[d].property,p===null?void 0:P(p))},zt.prototype.serialize=function(){for(var d={},p=0,C=Object.keys(this._values);p<C.length;p+=1){var N=C[p],X=this.getValue(N);X!==void 0&&(d[N]=X)}return d},zt.prototype.possiblyEvaluate=function(d,p,C){for(var N=new re(this._properties),X=0,lt=Object.keys(this._values);X<lt.length;X+=1){var Pt=lt[X];N._values[Pt]=this._values[Pt].possiblyEvaluate(d,p,C)}return N};var se=function(p,C,N){this.property=p,this.value=C,this.parameters=N};se.prototype.isConstant=function(){return this.value.kind==="constant"},se.prototype.constantOr=function(d){return this.value.kind==="constant"?this.value.value:d},se.prototype.evaluate=function(d,p,C,N){return this.property.evaluate(this.value,this.parameters,d,p,C,N)};var re=function(p){this._properties=p,this._values=Object.create(p.defaultPossiblyEvaluatedValues)};re.prototype.get=function(d){return this._values[d]};var ce=function(p){this.specification=p};ce.prototype.possiblyEvaluate=function(d,p){return d.expression.evaluate(p)},ce.prototype.interpolate=function(d,p,C){var N=Ts[this.specification.type];return N?N(d,p,C):d};var Fe=function(p,C){this.specification=p,this.overrides=C};Fe.prototype.possiblyEvaluate=function(d,p,C,N){return new se(this,d.expression.kind==="constant"||d.expression.kind==="camera"?{kind:"constant",value:d.expression.evaluate(p,null,{},C,N)}:d.expression,p)},Fe.prototype.interpolate=function(d,p,C){if(d.value.kind!=="constant"||p.value.kind!=="constant")return d;if(d.value.value===void 0||p.value.value===void 0)return new se(this,{kind:"constant",value:void 0},d.parameters);var N=Ts[this.specification.type];return N?new se(this,{kind:"constant",value:N(d.value.value,p.value.value,C)},d.parameters):d},Fe.prototype.evaluate=function(d,p,C,N,X,lt){return d.kind==="constant"?d.value:d.evaluate(p,C,N,X,lt)};var Ke=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.possiblyEvaluate=function(C,N,X,lt){if(C.value===void 0)return new se(this,{kind:"constant",value:void 0},N);if(C.expression.kind==="constant"){var Pt=C.expression.evaluate(N,null,{},X,lt),Bt=C.property.specification.type==="resolvedImage"&&typeof Pt!="string"?Pt.name:Pt,Xt=this._calculate(Bt,Bt,Bt,N);return new se(this,{kind:"constant",value:Xt},N)}if(C.expression.kind==="camera"){var he=this._calculate(C.expression.evaluate({zoom:N.zoom-1}),C.expression.evaluate({zoom:N.zoom}),C.expression.evaluate({zoom:N.zoom+1}),N);return new se(this,{kind:"constant",value:he},N)}return new se(this,C.expression,N)},p.prototype.evaluate=function(C,N,X,lt,Pt,Bt){if(C.kind==="source"){var Xt=C.evaluate(N,X,lt,Pt,Bt);return this._calculate(Xt,Xt,Xt,N)}return C.kind==="composite"?this._calculate(C.evaluate({zoom:Math.floor(N.zoom)-1},X,lt),C.evaluate({zoom:Math.floor(N.zoom)},X,lt),C.evaluate({zoom:Math.floor(N.zoom)+1},X,lt),N):C.value},p.prototype._calculate=function(C,N,X,lt){return lt.zoom>lt.zoomHistory.lastIntegerZoom?{from:C,to:N}:{from:X,to:N}},p.prototype.interpolate=function(C){return C},p}(Fe),rn=function(p){this.specification=p};rn.prototype.possiblyEvaluate=function(d,p,C,N){if(d.value!==void 0){if(d.expression.kind==="constant"){var X=d.expression.evaluate(p,null,{},C,N);return this._calculate(X,X,X,p)}return this._calculate(d.expression.evaluate(new br(Math.floor(p.zoom-1),p)),d.expression.evaluate(new br(Math.floor(p.zoom),p)),d.expression.evaluate(new br(Math.floor(p.zoom+1),p)),p)}},rn.prototype._calculate=function(d,p,C,N){return N.zoom>N.zoomHistory.lastIntegerZoom?{from:d,to:p}:{from:C,to:p}},rn.prototype.interpolate=function(d){return d};var Je=function(p){this.specification=p};Je.prototype.possiblyEvaluate=function(d,p,C,N){return!!d.expression.evaluate(p,null,{},C,N)},Je.prototype.interpolate=function(){return!1};var vn=function(p){for(var C in this.properties=p,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],p){var N=p[C];N.specification.overridable&&this.overridableProperties.push(C);var X=this.defaultPropertyValues[C]=new Zt(N,void 0),lt=this.defaultTransitionablePropertyValues[C]=new te(N);this.defaultTransitioningPropertyValues[C]=lt.untransitioned(),this.defaultPossiblyEvaluatedValues[C]=X.possiblyEvaluate({})}};Wi("DataDrivenProperty",Fe),Wi("DataConstantProperty",ce),Wi("CrossFadedDataDrivenProperty",Ke),Wi("CrossFadedProperty",rn),Wi("ColorRampProperty",Je);var hn=function(d){function p(C,N){if(d.call(this),this.id=C.id,this.type=C.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},C.type!=="custom"&&(this.metadata=(C=C).metadata,this.minzoom=C.minzoom,this.maxzoom=C.maxzoom,C.type!=="background"&&(this.source=C.source,this.sourceLayer=C["source-layer"],this.filter=C.filter),N.layout&&(this._unevaluatedLayout=new zt(N.layout)),N.paint)){for(var X in this._transitionablePaint=new Le(N.paint),C.paint)this.setPaintProperty(X,C.paint[X],{validate:!1});for(var lt in C.layout)this.setLayoutProperty(lt,C.layout[lt],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new re(N.paint)}}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},p.prototype.getLayoutProperty=function(C){return C==="visibility"?this.visibility:this._unevaluatedLayout.getValue(C)},p.prototype.setLayoutProperty=function(C,N,X){X===void 0&&(X={}),N!=null&&this._validate(tl,"layers."+this.id+".layout."+C,C,N,X)||(C!=="visibility"?this._unevaluatedLayout.setValue(C,N):this.visibility=N)},p.prototype.getPaintProperty=function(C){return x(C,"-transition")?this._transitionablePaint.getTransition(C.slice(0,-"-transition".length)):this._transitionablePaint.getValue(C)},p.prototype.setPaintProperty=function(C,N,X){if(X===void 0&&(X={}),N!=null&&this._validate(Os,"layers."+this.id+".paint."+C,C,N,X))return!1;if(x(C,"-transition"))return this._transitionablePaint.setTransition(C.slice(0,-"-transition".length),N||void 0),!1;var lt=this._transitionablePaint._values[C],Pt=lt.property.specification["property-type"]==="cross-faded-data-driven",Bt=lt.value.isDataDriven(),Xt=lt.value;this._transitionablePaint.setValue(C,N),this._handleSpecialPaintPropertyUpdate(C);var he=this._transitionablePaint._values[C].value;return he.isDataDriven()||Bt||Pt||this._handleOverridablePaintPropertyUpdate(C,Xt,he)},p.prototype._handleSpecialPaintPropertyUpdate=function(C){},p.prototype._handleOverridablePaintPropertyUpdate=function(C,N,X){return!1},p.prototype.isHidden=function(C){return!!(this.minzoom&&C<this.minzoom)||!!(this.maxzoom&&C>=this.maxzoom)||this.visibility==="none"},p.prototype.updateTransitions=function(C){this._transitioningPaint=this._transitionablePaint.transitioned(C,this._transitioningPaint)},p.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},p.prototype.recalculate=function(C,N){C.getCrossfadeParameters&&(this._crossfadeParameters=C.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(C,void 0,N)),this.paint=this._transitioningPaint.possiblyEvaluate(C,void 0,N)},p.prototype.serialize=function(){var C={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(C.layout=C.layout||{},C.layout.visibility=this.visibility),S(C,function(N,X){return!(N===void 0||X==="layout"&&!Object.keys(N).length||X==="paint"&&!Object.keys(N).length)})},p.prototype._validate=function(C,N,X,lt,Pt){return Pt===void 0&&(Pt={}),(!Pt||Pt.validate!==!1)&&uu(this,C.call(ku,{key:N,layerType:this.type,objectKey:X,value:lt,styleSpec:ue,style:{glyphs:!0,sprite:!0}}))},p.prototype.is3D=function(){return!1},p.prototype.isTileClipped=function(){return!1},p.prototype.hasOffscreenPass=function(){return!1},p.prototype.resize=function(){},p.prototype.isStateDependent=function(){for(var C in this.paint._values){var N=this.paint.get(C);if(N instanceof se&&Ds(N.property.specification)&&(N.value.kind==="source"||N.value.kind==="composite")&&N.value.isStateDependent)return!0}return!1},p}(Ce),Jn={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Vn=function(p,C){this._structArray=p,this._pos1=C*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Zn=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Wn(d,p){p===void 0&&(p=1);var C=0,N=0;return{members:d.map(function(X){var lt=Jn[X.type].BYTES_PER_ELEMENT,Pt=C=lr(C,Math.max(p,lt)),Bt=X.components||1;return N=Math.max(N,lt),C+=lt*Bt,{name:X.name,type:X.type,components:Bt,offset:Pt}}),size:lr(C,Math.max(N,p)),alignment:p}}function lr(d,p){return Math.ceil(d/p)*p}Zn.serialize=function(d,p){return d._trim(),p&&(d.isTransferred=!0,p.push(d.arrayBuffer)),{length:d.length,arrayBuffer:d.arrayBuffer}},Zn.deserialize=function(d){var p=Object.create(this.prototype);return p.arrayBuffer=d.arrayBuffer,p.length=d.length,p.capacity=d.arrayBuffer.byteLength/p.bytesPerElement,p._refreshViews(),p},Zn.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Zn.prototype.clear=function(){this.length=0},Zn.prototype.resize=function(d){this.reserve(d),this.length=d},Zn.prototype.reserve=function(d){if(d>this.capacity){this.capacity=Math.max(d,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var p=this.uint8;this._refreshViews(),p&&this.uint8.set(p)}},Zn.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var xr=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N){var X=this.length;return this.resize(X+1),this.emplace(X,C,N)},p.prototype.emplace=function(C,N,X){var lt=2*C;return this.int16[lt+0]=N,this.int16[lt+1]=X,C},p}(Zn);xr.prototype.bytesPerElement=4,Wi("StructArrayLayout2i4",xr);var Vr=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,X,lt){var Pt=this.length;return this.resize(Pt+1),this.emplace(Pt,C,N,X,lt)},p.prototype.emplace=function(C,N,X,lt,Pt){var Bt=4*C;return this.int16[Bt+0]=N,this.int16[Bt+1]=X,this.int16[Bt+2]=lt,this.int16[Bt+3]=Pt,C},p}(Zn);Vr.prototype.bytesPerElement=8,Wi("StructArrayLayout4i8",Vr);var yi=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,X,lt,Pt,Bt){var Xt=this.length;return this.resize(Xt+1),this.emplace(Xt,C,N,X,lt,Pt,Bt)},p.prototype.emplace=function(C,N,X,lt,Pt,Bt,Xt){var he=6*C;return this.int16[he+0]=N,this.int16[he+1]=X,this.int16[he+2]=lt,this.int16[he+3]=Pt,this.int16[he+4]=Bt,this.int16[he+5]=Xt,C},p}(Zn);yi.prototype.bytesPerElement=12,Wi("StructArrayLayout2i4i12",yi);var Br=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,X,lt,Pt,Bt){var Xt=this.length;return this.resize(Xt+1),this.emplace(Xt,C,N,X,lt,Pt,Bt)},p.prototype.emplace=function(C,N,X,lt,Pt,Bt,Xt){var he=4*C,Re=8*C;return this.int16[he+0]=N,this.int16[he+1]=X,this.uint8[Re+4]=lt,this.uint8[Re+5]=Pt,this.uint8[Re+6]=Bt,this.uint8[Re+7]=Xt,C},p}(Zn);Br.prototype.bytesPerElement=8,Wi("StructArrayLayout2i4ub8",Br);var si=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N){var X=this.length;return this.resize(X+1),this.emplace(X,C,N)},p.prototype.emplace=function(C,N,X){var lt=2*C;return this.float32[lt+0]=N,this.float32[lt+1]=X,C},p}(Zn);si.prototype.bytesPerElement=8,Wi("StructArrayLayout2f8",si);var gi=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,X,lt,Pt,Bt,Xt,he,Re,Ge){var He=this.length;return this.resize(He+1),this.emplace(He,C,N,X,lt,Pt,Bt,Xt,he,Re,Ge)},p.prototype.emplace=function(C,N,X,lt,Pt,Bt,Xt,he,Re,Ge,He){var cn=10*C;return this.uint16[cn+0]=N,this.uint16[cn+1]=X,this.uint16[cn+2]=lt,this.uint16[cn+3]=Pt,this.uint16[cn+4]=Bt,this.uint16[cn+5]=Xt,this.uint16[cn+6]=he,this.uint16[cn+7]=Re,this.uint16[cn+8]=Ge,this.uint16[cn+9]=He,C},p}(Zn);gi.prototype.bytesPerElement=20,Wi("StructArrayLayout10ui20",gi);var Zi=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,X,lt,Pt,Bt,Xt,he,Re,Ge,He,cn){var Rn=this.length;return this.resize(Rn+1),this.emplace(Rn,C,N,X,lt,Pt,Bt,Xt,he,Re,Ge,He,cn)},p.prototype.emplace=function(C,N,X,lt,Pt,Bt,Xt,he,Re,Ge,He,cn,Rn){var Cn=12*C;return this.int16[Cn+0]=N,this.int16[Cn+1]=X,this.int16[Cn+2]=lt,this.int16[Cn+3]=Pt,this.uint16[Cn+4]=Bt,this.uint16[Cn+5]=Xt,this.uint16[Cn+6]=he,this.uint16[Cn+7]=Re,this.int16[Cn+8]=Ge,this.int16[Cn+9]=He,this.int16[Cn+10]=cn,this.int16[Cn+11]=Rn,C},p}(Zn);Zi.prototype.bytesPerElement=24,Wi("StructArrayLayout4i4ui4i24",Zi);var Li=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,X){var lt=this.length;return this.resize(lt+1),this.emplace(lt,C,N,X)},p.prototype.emplace=function(C,N,X,lt){var Pt=3*C;return this.float32[Pt+0]=N,this.float32[Pt+1]=X,this.float32[Pt+2]=lt,C},p}(Zn);Li.prototype.bytesPerElement=12,Wi("StructArrayLayout3f12",Li);var Ma=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C){var N=this.length;return this.resize(N+1),this.emplace(N,C)},p.prototype.emplace=function(C,N){return this.uint32[1*C+0]=N,C},p}(Zn);Ma.prototype.bytesPerElement=4,Wi("StructArrayLayout1ul4",Ma);var ma=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,X,lt,Pt,Bt,Xt,he,Re){var Ge=this.length;return this.resize(Ge+1),this.emplace(Ge,C,N,X,lt,Pt,Bt,Xt,he,Re)},p.prototype.emplace=function(C,N,X,lt,Pt,Bt,Xt,he,Re,Ge){var He=10*C,cn=5*C;return this.int16[He+0]=N,this.int16[He+1]=X,this.int16[He+2]=lt,this.int16[He+3]=Pt,this.int16[He+4]=Bt,this.int16[He+5]=Xt,this.uint32[cn+3]=he,this.uint16[He+8]=Re,this.uint16[He+9]=Ge,C},p}(Zn);ma.prototype.bytesPerElement=20,Wi("StructArrayLayout6i1ul2ui20",ma);var la=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,X,lt,Pt,Bt){var Xt=this.length;return this.resize(Xt+1),this.emplace(Xt,C,N,X,lt,Pt,Bt)},p.prototype.emplace=function(C,N,X,lt,Pt,Bt,Xt){var he=6*C;return this.int16[he+0]=N,this.int16[he+1]=X,this.int16[he+2]=lt,this.int16[he+3]=Pt,this.int16[he+4]=Bt,this.int16[he+5]=Xt,C},p}(Zn);la.prototype.bytesPerElement=12,Wi("StructArrayLayout2i2i2i12",la);var ri=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,X,lt,Pt){var Bt=this.length;return this.resize(Bt+1),this.emplace(Bt,C,N,X,lt,Pt)},p.prototype.emplace=function(C,N,X,lt,Pt,Bt){var Xt=4*C,he=8*C;return this.float32[Xt+0]=N,this.float32[Xt+1]=X,this.float32[Xt+2]=lt,this.int16[he+6]=Pt,this.int16[he+7]=Bt,C},p}(Zn);ri.prototype.bytesPerElement=16,Wi("StructArrayLayout2f1f2i16",ri);var Ta=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,X,lt){var Pt=this.length;return this.resize(Pt+1),this.emplace(Pt,C,N,X,lt)},p.prototype.emplace=function(C,N,X,lt,Pt){var Bt=12*C,Xt=3*C;return this.uint8[Bt+0]=N,this.uint8[Bt+1]=X,this.float32[Xt+1]=lt,this.float32[Xt+2]=Pt,C},p}(Zn);Ta.prototype.bytesPerElement=12,Wi("StructArrayLayout2ub2f12",Ta);var Ga=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,X){var lt=this.length;return this.resize(lt+1),this.emplace(lt,C,N,X)},p.prototype.emplace=function(C,N,X,lt){var Pt=3*C;return this.uint16[Pt+0]=N,this.uint16[Pt+1]=X,this.uint16[Pt+2]=lt,C},p}(Zn);Ga.prototype.bytesPerElement=6,Wi("StructArrayLayout3ui6",Ga);var Ya=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,X,lt,Pt,Bt,Xt,he,Re,Ge,He,cn,Rn,Cn,$n,Xn,_r){var Nr=this.length;return this.resize(Nr+1),this.emplace(Nr,C,N,X,lt,Pt,Bt,Xt,he,Re,Ge,He,cn,Rn,Cn,$n,Xn,_r)},p.prototype.emplace=function(C,N,X,lt,Pt,Bt,Xt,he,Re,Ge,He,cn,Rn,Cn,$n,Xn,_r,Nr){var Gr=24*C,pi=12*C,oi=48*C;return this.int16[Gr+0]=N,this.int16[Gr+1]=X,this.uint16[Gr+2]=lt,this.uint16[Gr+3]=Pt,this.uint32[pi+2]=Bt,this.uint32[pi+3]=Xt,this.uint32[pi+4]=he,this.uint16[Gr+10]=Re,this.uint16[Gr+11]=Ge,this.uint16[Gr+12]=He,this.float32[pi+7]=cn,this.float32[pi+8]=Rn,this.uint8[oi+36]=Cn,this.uint8[oi+37]=$n,this.uint8[oi+38]=Xn,this.uint32[pi+10]=_r,this.int16[Gr+22]=Nr,C},p}(Zn);Ya.prototype.bytesPerElement=48,Wi("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ya);var Ii=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,X,lt,Pt,Bt,Xt,he,Re,Ge,He,cn,Rn,Cn,$n,Xn,_r,Nr,Gr,pi,oi,Ni,Bi,Qi,pa,fa,na,eo){var Ia=this.length;return this.resize(Ia+1),this.emplace(Ia,C,N,X,lt,Pt,Bt,Xt,he,Re,Ge,He,cn,Rn,Cn,$n,Xn,_r,Nr,Gr,pi,oi,Ni,Bi,Qi,pa,fa,na,eo)},p.prototype.emplace=function(C,N,X,lt,Pt,Bt,Xt,he,Re,Ge,He,cn,Rn,Cn,$n,Xn,_r,Nr,Gr,pi,oi,Ni,Bi,Qi,pa,fa,na,eo,Ia){var ga=34*C,Uo=17*C;return this.int16[ga+0]=N,this.int16[ga+1]=X,this.int16[ga+2]=lt,this.int16[ga+3]=Pt,this.int16[ga+4]=Bt,this.int16[ga+5]=Xt,this.int16[ga+6]=he,this.int16[ga+7]=Re,this.uint16[ga+8]=Ge,this.uint16[ga+9]=He,this.uint16[ga+10]=cn,this.uint16[ga+11]=Rn,this.uint16[ga+12]=Cn,this.uint16[ga+13]=$n,this.uint16[ga+14]=Xn,this.uint16[ga+15]=_r,this.uint16[ga+16]=Nr,this.uint16[ga+17]=Gr,this.uint16[ga+18]=pi,this.uint16[ga+19]=oi,this.uint16[ga+20]=Ni,this.uint16[ga+21]=Bi,this.uint16[ga+22]=Qi,this.uint32[Uo+12]=pa,this.float32[Uo+13]=fa,this.float32[Uo+14]=na,this.float32[Uo+15]=eo,this.float32[Uo+16]=Ia,C},p}(Zn);Ii.prototype.bytesPerElement=68,Wi("StructArrayLayout8i15ui1ul4f68",Ii);var Da=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C){var N=this.length;return this.resize(N+1),this.emplace(N,C)},p.prototype.emplace=function(C,N){return this.float32[1*C+0]=N,C},p}(Zn);Da.prototype.bytesPerElement=4,Wi("StructArrayLayout1f4",Da);var ho=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,X){var lt=this.length;return this.resize(lt+1),this.emplace(lt,C,N,X)},p.prototype.emplace=function(C,N,X,lt){var Pt=3*C;return this.int16[Pt+0]=N,this.int16[Pt+1]=X,this.int16[Pt+2]=lt,C},p}(Zn);ho.prototype.bytesPerElement=6,Wi("StructArrayLayout3i6",ho);var js=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,X){var lt=this.length;return this.resize(lt+1),this.emplace(lt,C,N,X)},p.prototype.emplace=function(C,N,X,lt){var Pt=4*C;return this.uint32[2*C+0]=N,this.uint16[Pt+2]=X,this.uint16[Pt+3]=lt,C},p}(Zn);js.prototype.bytesPerElement=8,Wi("StructArrayLayout1ul2ui8",js);var Is=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N){var X=this.length;return this.resize(X+1),this.emplace(X,C,N)},p.prototype.emplace=function(C,N,X){var lt=2*C;return this.uint16[lt+0]=N,this.uint16[lt+1]=X,C},p}(Zn);Is.prototype.bytesPerElement=4,Wi("StructArrayLayout2ui4",Is);var Vu=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C){var N=this.length;return this.resize(N+1),this.emplace(N,C)},p.prototype.emplace=function(C,N){return this.uint16[1*C+0]=N,C},p}(Zn);Vu.prototype.bytesPerElement=2,Wi("StructArrayLayout1ui2",Vu);var cu=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,X,lt){var Pt=this.length;return this.resize(Pt+1),this.emplace(Pt,C,N,X,lt)},p.prototype.emplace=function(C,N,X,lt,Pt){var Bt=4*C;return this.float32[Bt+0]=N,this.float32[Bt+1]=X,this.float32[Bt+2]=lt,this.float32[Bt+3]=Pt,C},p}(Zn);cu.prototype.bytesPerElement=16,Wi("StructArrayLayout4f16",cu);var j=function(d){function p(){d.apply(this,arguments)}d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p;var C={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return C.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},C.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},C.x1.get=function(){return this._structArray.int16[this._pos2+2]},C.y1.get=function(){return this._structArray.int16[this._pos2+3]},C.x2.get=function(){return this._structArray.int16[this._pos2+4]},C.y2.get=function(){return this._structArray.int16[this._pos2+5]},C.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},C.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},C.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},C.anchorPoint.get=function(){return new r(this.anchorPointX,this.anchorPointY)},Object.defineProperties(p.prototype,C),p}(Vn);j.prototype.size=20;var I=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.get=function(C){return new j(this,C)},p}(ma);Wi("CollisionBoxArray",I);var w=function(d){function p(){d.apply(this,arguments)}d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p;var C={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return C.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},C.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},C.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},C.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},C.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},C.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},C.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},C.segment.get=function(){return this._structArray.uint16[this._pos2+10]},C.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},C.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},C.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},C.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},C.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},C.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},C.placedOrientation.set=function(N){this._structArray.uint8[this._pos1+37]=N},C.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},C.hidden.set=function(N){this._structArray.uint8[this._pos1+38]=N},C.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},C.crossTileID.set=function(N){this._structArray.uint32[this._pos4+10]=N},C.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(p.prototype,C),p}(Vn);w.prototype.size=48;var B=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.get=function(C){return new w(this,C)},p}(Ya);Wi("PlacedSymbolArray",B);var D=function(d){function p(){d.apply(this,arguments)}d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p;var C={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return C.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},C.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},C.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},C.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},C.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},C.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},C.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},C.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},C.key.get=function(){return this._structArray.uint16[this._pos2+8]},C.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},C.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},C.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},C.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},C.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},C.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},C.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},C.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},C.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},C.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},C.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},C.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},C.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},C.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},C.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},C.crossTileID.set=function(N){this._structArray.uint32[this._pos4+12]=N},C.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},C.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},C.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},C.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(p.prototype,C),p}(Vn);D.prototype.size=68;var G=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.get=function(C){return new D(this,C)},p}(Ii);Wi("SymbolInstanceArray",G);var J=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.getoffsetX=function(C){return this.float32[1*C+0]},p}(Da);Wi("GlyphOffsetArray",J);var st=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.getx=function(C){return this.int16[3*C+0]},p.prototype.gety=function(C){return this.int16[3*C+1]},p.prototype.gettileUnitDistanceFromAnchor=function(C){return this.int16[3*C+2]},p}(ho);Wi("SymbolLineVertexArray",st);var Ct=function(d){function p(){d.apply(this,arguments)}d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p;var C={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return C.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},C.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},C.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(p.prototype,C),p}(Vn);Ct.prototype.size=8;var Ot=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.get=function(C){return new Ct(this,C)},p}(js);Wi("FeatureIndexArray",Ot);var Ut=Wn([{name:"a_pos",components:2,type:"Int16"}],4).members,Ht=function(p){p===void 0&&(p=[]),this.segments=p};function qt(d,p){return 256*(d=u(Math.floor(d),0,255))+u(Math.floor(p),0,255)}Ht.prototype.prepareSegment=function(d,p,C,N){var X=this.segments[this.segments.length-1];return d>Ht.MAX_VERTEX_ARRAY_LENGTH&&O("Max vertices per segment is "+Ht.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+d),(!X||X.vertexLength+d>Ht.MAX_VERTEX_ARRAY_LENGTH||X.sortKey!==N)&&(X={vertexOffset:p.length,primitiveOffset:C.length,vertexLength:0,primitiveLength:0},N!==void 0&&(X.sortKey=N),this.segments.push(X)),X},Ht.prototype.get=function(){return this.segments},Ht.prototype.destroy=function(){for(var d=0,p=this.segments;d<p.length;d+=1){var C=p[d];for(var N in C.vaos)C.vaos[N].destroy()}},Ht.simpleSegment=function(d,p,C,N){return new Ht([{vertexOffset:d,primitiveOffset:p,vertexLength:C,primitiveLength:N,vaos:{},sortKey:0}])},Ht.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Wi("SegmentVector",Ht);var fe=Wn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),ye=l(function(d){d.exports=function(p,C){var N,X,lt,Pt,Bt,Xt,he,Re;for(X=p.length-(N=3&p.length),lt=C,Bt=3432918353,Xt=461845907,Re=0;Re<X;)he=255&p.charCodeAt(Re)|(255&p.charCodeAt(++Re))<<8|(255&p.charCodeAt(++Re))<<16|(255&p.charCodeAt(++Re))<<24,++Re,lt=27492+(65535&(Pt=5*(65535&(lt=(lt^=he=(65535&(he=(he=(65535&he)*Bt+(((he>>>16)*Bt&65535)<<16)&4294967295)<<15|he>>>17))*Xt+(((he>>>16)*Xt&65535)<<16)&4294967295)<<13|lt>>>19))+((5*(lt>>>16)&65535)<<16)&4294967295))+((58964+(Pt>>>16)&65535)<<16);switch(he=0,N){case 3:he^=(255&p.charCodeAt(Re+2))<<16;case 2:he^=(255&p.charCodeAt(Re+1))<<8;case 1:lt^=he=(65535&(he=(he=(65535&(he^=255&p.charCodeAt(Re)))*Bt+(((he>>>16)*Bt&65535)<<16)&4294967295)<<15|he>>>17))*Xt+(((he>>>16)*Xt&65535)<<16)&4294967295}return lt^=p.length,lt=2246822507*(65535&(lt^=lt>>>16))+((2246822507*(lt>>>16)&65535)<<16)&4294967295,lt=3266489909*(65535&(lt^=lt>>>13))+((3266489909*(lt>>>16)&65535)<<16)&4294967295,(lt^=lt>>>16)>>>0}}),De=l(function(d){d.exports=function(p,C){for(var N,X=p.length,lt=C^X,Pt=0;X>=4;)N=1540483477*(65535&(N=255&p.charCodeAt(Pt)|(255&p.charCodeAt(++Pt))<<8|(255&p.charCodeAt(++Pt))<<16|(255&p.charCodeAt(++Pt))<<24))+((1540483477*(N>>>16)&65535)<<16),lt=1540483477*(65535&lt)+((1540483477*(lt>>>16)&65535)<<16)^(N=1540483477*(65535&(N^=N>>>24))+((1540483477*(N>>>16)&65535)<<16)),X-=4,++Pt;switch(X){case 3:lt^=(255&p.charCodeAt(Pt+2))<<16;case 2:lt^=(255&p.charCodeAt(Pt+1))<<8;case 1:lt=1540483477*(65535&(lt^=255&p.charCodeAt(Pt)))+((1540483477*(lt>>>16)&65535)<<16)}return lt=1540483477*(65535&(lt^=lt>>>13))+((1540483477*(lt>>>16)&65535)<<16),(lt^=lt>>>15)>>>0}}),Ie=ye,Ve=De;Ie.murmur3=ye,Ie.murmur2=Ve;var qe=function(){this.ids=[],this.positions=[],this.indexed=!1};qe.prototype.add=function(d,p,C,N){this.ids.push(tr(d)),this.positions.push(p,C,N)},qe.prototype.getPositions=function(d){for(var p=tr(d),C=0,N=this.ids.length-1;C<N;){var X=C+N>>1;this.ids[X]>=p?N=X:C=X+1}for(var lt=[];this.ids[C]===p;)lt.push({index:this.positions[3*C],start:this.positions[3*C+1],end:this.positions[3*C+2]}),C++;return lt},qe.serialize=function(d,p){var C=new Float64Array(d.ids),N=new Uint32Array(d.positions);return function X(lt,Pt,Bt,Xt){for(;Bt<Xt;){for(var he=lt[Bt+Xt>>1],Re=Bt-1,Ge=Xt+1;;){do Re++;while(lt[Re]<he);do Ge--;while(lt[Ge]>he);if(Re>=Ge)break;zn(lt,Re,Ge),zn(Pt,3*Re,3*Ge),zn(Pt,3*Re+1,3*Ge+1),zn(Pt,3*Re+2,3*Ge+2)}Ge-Bt<Xt-Ge?(X(lt,Pt,Bt,Ge),Bt=Ge+1):(X(lt,Pt,Ge+1,Xt),Xt=Ge)}}(C,N,0,C.length-1),p&&p.push(C.buffer,N.buffer),{ids:C,positions:N}},qe.deserialize=function(d){var p=new qe;return p.ids=d.ids,p.positions=d.positions,p.indexed=!0,p};var on=Math.pow(2,53)-1;function tr(d){var p=+d;return!isNaN(p)&&p<=on?p:Ie(String(d))}function zn(d,p,C){var N=d[p];d[p]=d[C],d[C]=N}Wi("FeaturePositionMap",qe);var cr=function(p,C){this.gl=p.gl,this.location=C},yr=function(d){function p(C,N){d.call(this,C,N),this.current=0}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.set=function(C){this.current!==C&&(this.current=C,this.gl.uniform1i(this.location,C))},p}(cr),Jr=function(d){function p(C,N){d.call(this,C,N),this.current=0}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.set=function(C){this.current!==C&&(this.current=C,this.gl.uniform1f(this.location,C))},p}(cr),Wr=function(d){function p(C,N){d.call(this,C,N),this.current=[0,0]}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.set=function(C){C[0]===this.current[0]&&C[1]===this.current[1]||(this.current=C,this.gl.uniform2f(this.location,C[0],C[1]))},p}(cr),bi=function(d){function p(C,N){d.call(this,C,N),this.current=[0,0,0]}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.set=function(C){C[0]===this.current[0]&&C[1]===this.current[1]&&C[2]===this.current[2]||(this.current=C,this.gl.uniform3f(this.location,C[0],C[1],C[2]))},p}(cr),ji=function(d){function p(C,N){d.call(this,C,N),this.current=[0,0,0,0]}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.set=function(C){C[0]===this.current[0]&&C[1]===this.current[1]&&C[2]===this.current[2]&&C[3]===this.current[3]||(this.current=C,this.gl.uniform4f(this.location,C[0],C[1],C[2],C[3]))},p}(cr),Hi=function(d){function p(C,N){d.call(this,C,N),this.current=zr.transparent}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.set=function(C){C.r===this.current.r&&C.g===this.current.g&&C.b===this.current.b&&C.a===this.current.a||(this.current=C,this.gl.uniform4f(this.location,C.r,C.g,C.b,C.a))},p}(cr),Ji=new Float32Array(16),Pa=function(d){function p(C,N){d.call(this,C,N),this.current=Ji}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.set=function(C){if(C[12]!==this.current[12]||C[0]!==this.current[0])return this.current=C,void this.gl.uniformMatrix4fv(this.location,!1,C);for(var N=1;N<16;N++)if(C[N]!==this.current[N]){this.current=C,this.gl.uniformMatrix4fv(this.location,!1,C);break}},p}(cr);function ja(d){return[qt(255*d.r,255*d.g),qt(255*d.b,255*d.a)]}var Fi=function(p,C,N){this.value=p,this.uniformNames=C.map(function(X){return"u_"+X}),this.type=N};Fi.prototype.setUniform=function(d,p,C){d.set(C.constantOr(this.value))},Fi.prototype.getBinding=function(d,p,C){return this.type==="color"?new Hi(d,p):new Jr(d,p)};var va=function(p,C){this.uniformNames=C.map(function(N){return"u_"+N}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};va.prototype.setConstantPatternPositions=function(d,p){this.pixelRatioFrom=p.pixelRatio,this.pixelRatioTo=d.pixelRatio,this.patternFrom=p.tlbr,this.patternTo=d.tlbr},va.prototype.setUniform=function(d,p,C,N){var X=N==="u_pattern_to"?this.patternTo:N==="u_pattern_from"?this.patternFrom:N==="u_pixel_ratio_to"?this.pixelRatioTo:N==="u_pixel_ratio_from"?this.pixelRatioFrom:null;X&&d.set(X)},va.prototype.getBinding=function(d,p,C){return C.substr(0,9)==="u_pattern"?new ji(d,p):new Jr(d,p)};var ya=function(p,C,N,X){this.expression=p,this.type=N,this.maxValue=0,this.paintVertexAttributes=C.map(function(lt){return{name:"a_"+lt,type:"Float32",components:N==="color"?2:1,offset:0}}),this.paintVertexArray=new X};ya.prototype.populatePaintArray=function(d,p,C,N,X){var lt=this.paintVertexArray.length,Pt=this.expression.evaluate(new br(0),p,{},N,[],X);this.paintVertexArray.resize(d),this._setPaintValue(lt,d,Pt)},ya.prototype.updatePaintArray=function(d,p,C,N){var X=this.expression.evaluate({zoom:0},C,N);this._setPaintValue(d,p,X)},ya.prototype._setPaintValue=function(d,p,C){if(this.type==="color")for(var N=ja(C),X=d;X<p;X++)this.paintVertexArray.emplace(X,N[0],N[1]);else{for(var lt=d;lt<p;lt++)this.paintVertexArray.emplace(lt,C);this.maxValue=Math.max(this.maxValue,Math.abs(C))}},ya.prototype.upload=function(d){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=d.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ya.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Yi=function(p,C,N,X,lt,Pt){this.expression=p,this.uniformNames=C.map(function(Bt){return"u_"+Bt+"_t"}),this.type=N,this.useIntegerZoom=X,this.zoom=lt,this.maxValue=0,this.paintVertexAttributes=C.map(function(Bt){return{name:"a_"+Bt,type:"Float32",components:N==="color"?4:2,offset:0}}),this.paintVertexArray=new Pt};Yi.prototype.populatePaintArray=function(d,p,C,N,X){var lt=this.expression.evaluate(new br(this.zoom),p,{},N,[],X),Pt=this.expression.evaluate(new br(this.zoom+1),p,{},N,[],X),Bt=this.paintVertexArray.length;this.paintVertexArray.resize(d),this._setPaintValue(Bt,d,lt,Pt)},Yi.prototype.updatePaintArray=function(d,p,C,N){var X=this.expression.evaluate({zoom:this.zoom},C,N),lt=this.expression.evaluate({zoom:this.zoom+1},C,N);this._setPaintValue(d,p,X,lt)},Yi.prototype._setPaintValue=function(d,p,C,N){if(this.type==="color")for(var X=ja(C),lt=ja(N),Pt=d;Pt<p;Pt++)this.paintVertexArray.emplace(Pt,X[0],X[1],lt[0],lt[1]);else{for(var Bt=d;Bt<p;Bt++)this.paintVertexArray.emplace(Bt,C,N);this.maxValue=Math.max(this.maxValue,Math.abs(C),Math.abs(N))}},Yi.prototype.upload=function(d){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=d.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Yi.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Yi.prototype.setUniform=function(d,p){var C=this.useIntegerZoom?Math.floor(p.zoom):p.zoom,N=u(this.expression.interpolationFactor(C,this.zoom,this.zoom+1),0,1);d.set(N)},Yi.prototype.getBinding=function(d,p,C){return new Jr(d,p)};var Aa=function(p,C,N,X,lt,Pt){this.expression=p,this.type=C,this.useIntegerZoom=N,this.zoom=X,this.layerId=Pt,this.zoomInPaintVertexArray=new lt,this.zoomOutPaintVertexArray=new lt};Aa.prototype.populatePaintArray=function(d,p,C){var N=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(d),this.zoomOutPaintVertexArray.resize(d),this._setPaintValues(N,d,p.patterns&&p.patterns[this.layerId],C)},Aa.prototype.updatePaintArray=function(d,p,C,N,X){this._setPaintValues(d,p,C.patterns&&C.patterns[this.layerId],X)},Aa.prototype._setPaintValues=function(d,p,C,N){if(N&&C){var X=N[C.min],lt=N[C.mid],Pt=N[C.max];if(X&&lt&&Pt)for(var Bt=d;Bt<p;Bt++)this.zoomInPaintVertexArray.emplace(Bt,lt.tl[0],lt.tl[1],lt.br[0],lt.br[1],X.tl[0],X.tl[1],X.br[0],X.br[1],lt.pixelRatio,X.pixelRatio),this.zoomOutPaintVertexArray.emplace(Bt,lt.tl[0],lt.tl[1],lt.br[0],lt.br[1],Pt.tl[0],Pt.tl[1],Pt.br[0],Pt.br[1],lt.pixelRatio,Pt.pixelRatio)}},Aa.prototype.upload=function(d){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=d.createVertexBuffer(this.zoomInPaintVertexArray,fe.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=d.createVertexBuffer(this.zoomOutPaintVertexArray,fe.members,this.expression.isStateDependent))},Aa.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var ua=function(p,C,N){this.binders={},this._buffers=[];var X=[];for(var lt in p.paint._values)if(N(lt)){var Pt=p.paint.get(lt);if(Pt instanceof se&&Ds(Pt.property.specification)){var Bt=Za(lt,p.type),Xt=Pt.value,he=Pt.property.specification.type,Re=Pt.property.useIntegerZoom,Ge=Pt.property.specification["property-type"],He=Ge==="cross-faded"||Ge==="cross-faded-data-driven";if(Xt.kind==="constant")this.binders[lt]=He?new va(Xt.value,Bt):new Fi(Xt.value,Bt,he),X.push("/u_"+lt);else if(Xt.kind==="source"||He){var cn=os(lt,he,"source");this.binders[lt]=He?new Aa(Xt,he,Re,C,cn,p.id):new ya(Xt,Bt,he,cn),X.push("/a_"+lt)}else{var Rn=os(lt,he,"composite");this.binders[lt]=new Yi(Xt,Bt,he,Re,C,Rn),X.push("/z_"+lt)}}}this.cacheKey=X.sort().join("")};ua.prototype.getMaxValue=function(d){var p=this.binders[d];return p instanceof ya||p instanceof Yi?p.maxValue:0},ua.prototype.populatePaintArrays=function(d,p,C,N,X){for(var lt in this.binders){var Pt=this.binders[lt];(Pt instanceof ya||Pt instanceof Yi||Pt instanceof Aa)&&Pt.populatePaintArray(d,p,C,N,X)}},ua.prototype.setConstantPatternPositions=function(d,p){for(var C in this.binders){var N=this.binders[C];N instanceof va&&N.setConstantPatternPositions(d,p)}},ua.prototype.updatePaintArrays=function(d,p,C,N,X){var lt=!1;for(var Pt in d)for(var Bt=0,Xt=p.getPositions(Pt);Bt<Xt.length;Bt+=1){var he=Xt[Bt],Re=C.feature(he.index);for(var Ge in this.binders){var He=this.binders[Ge];if((He instanceof ya||He instanceof Yi||He instanceof Aa)&&He.expression.isStateDependent===!0){var cn=N.paint.get(Ge);He.expression=cn.value,He.updatePaintArray(he.start,he.end,Re,d[Pt],X),lt=!0}}}return lt},ua.prototype.defines=function(){var d=[];for(var p in this.binders){var C=this.binders[p];(C instanceof Fi||C instanceof va)&&d.push.apply(d,C.uniformNames.map(function(N){return"#define HAS_UNIFORM_"+N}))}return d},ua.prototype.getBinderAttributes=function(){var d=[];for(var p in this.binders){var C=this.binders[p];if(C instanceof ya||C instanceof Yi)for(var N=0;N<C.paintVertexAttributes.length;N++)d.push(C.paintVertexAttributes[N].name);else if(C instanceof Aa)for(var X=0;X<fe.members.length;X++)d.push(fe.members[X].name)}return d},ua.prototype.getBinderUniforms=function(){var d=[];for(var p in this.binders){var C=this.binders[p];if(C instanceof Fi||C instanceof va||C instanceof Yi)for(var N=0,X=C.uniformNames;N<X.length;N+=1)d.push(X[N])}return d},ua.prototype.getPaintVertexBuffers=function(){return this._buffers},ua.prototype.getUniforms=function(d,p){var C=[];for(var N in this.binders){var X=this.binders[N];if(X instanceof Fi||X instanceof va||X instanceof Yi)for(var lt=0,Pt=X.uniformNames;lt<Pt.length;lt+=1){var Bt=Pt[lt];if(p[Bt]){var Xt=X.getBinding(d,p[Bt],Bt);C.push({name:Bt,property:N,binding:Xt})}}}return C},ua.prototype.setUniforms=function(d,p,C,N){for(var X=0,lt=p;X<lt.length;X+=1){var Pt=lt[X],Bt=Pt.name,Xt=Pt.property;this.binders[Xt].setUniform(Pt.binding,N,C.get(Xt),Bt)}},ua.prototype.updatePaintBuffers=function(d){for(var p in this._buffers=[],this.binders){var C=this.binders[p];if(d&&C instanceof Aa){var N=d.fromScale===2?C.zoomInPaintVertexBuffer:C.zoomOutPaintVertexBuffer;N&&this._buffers.push(N)}else(C instanceof ya||C instanceof Yi)&&C.paintVertexBuffer&&this._buffers.push(C.paintVertexBuffer)}},ua.prototype.upload=function(d){for(var p in this.binders){var C=this.binders[p];(C instanceof ya||C instanceof Yi||C instanceof Aa)&&C.upload(d)}this.updatePaintBuffers()},ua.prototype.destroy=function(){for(var d in this.binders){var p=this.binders[d];(p instanceof ya||p instanceof Yi||p instanceof Aa)&&p.destroy()}};var Ba=function(p,C,N){N===void 0&&(N=function(){return!0}),this.programConfigurations={};for(var X=0,lt=p;X<lt.length;X+=1){var Pt=lt[X];this.programConfigurations[Pt.id]=new ua(Pt,C,N)}this.needsUpload=!1,this._featureMap=new qe,this._bufferOffset=0};function Za(d,p){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[d]||[d.replace(p+"-","").replace(/-/g,"_")]}function os(d,p,C){var N={color:{source:si,composite:cu},number:{source:Da,composite:si}},X=function(lt){return{"line-pattern":{source:gi,composite:gi},"fill-pattern":{source:gi,composite:gi},"fill-extrusion-pattern":{source:gi,composite:gi}}[lt]}(d);return X&&X[C]||N[p][C]}Ba.prototype.populatePaintArrays=function(d,p,C,N,X,lt){for(var Pt in this.programConfigurations)this.programConfigurations[Pt].populatePaintArrays(d,p,N,X,lt);p.id!==void 0&&this._featureMap.add(p.id,C,this._bufferOffset,d),this._bufferOffset=d,this.needsUpload=!0},Ba.prototype.updatePaintArrays=function(d,p,C,N){for(var X=0,lt=C;X<lt.length;X+=1){var Pt=lt[X];this.needsUpload=this.programConfigurations[Pt.id].updatePaintArrays(d,this._featureMap,p,Pt,N)||this.needsUpload}},Ba.prototype.get=function(d){return this.programConfigurations[d]},Ba.prototype.upload=function(d){if(this.needsUpload){for(var p in this.programConfigurations)this.programConfigurations[p].upload(d);this.needsUpload=!1}},Ba.prototype.destroy=function(){for(var d in this.programConfigurations)this.programConfigurations[d].destroy()},Wi("ConstantBinder",Fi),Wi("CrossFadedConstantBinder",va),Wi("SourceExpressionBinder",ya),Wi("CrossFadedCompositeBinder",Aa),Wi("CompositeExpressionBinder",Yi),Wi("ProgramConfiguration",ua,{omit:["_buffers"]}),Wi("ProgramConfigurationSet",Ba);var Go=Math.pow(2,14)-1,Bs=-Go-1;function Yo(d){for(var p=8192/d.extent,C=d.loadGeometry(),N=0;N<C.length;N++)for(var X=C[N],lt=0;lt<X.length;lt++){var Pt=X[lt],Bt=Math.round(Pt.x*p),Xt=Math.round(Pt.y*p);Pt.x=u(Bt,Bs,Go),Pt.y=u(Xt,Bs,Go),(Bt<Pt.x||Bt>Pt.x+1||Xt<Pt.y||Xt>Pt.y+1)&&O("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return C}function ks(d,p){return{type:d.type,id:d.id,properties:d.properties,geometry:p?Yo(d):[]}}function yl(d,p,C,N,X){d.emplaceBack(2*p+(N+1)/2,2*C+(X+1)/2)}var nl=function(p){this.zoom=p.zoom,this.overscaling=p.overscaling,this.layers=p.layers,this.layerIds=this.layers.map(function(C){return C.id}),this.index=p.index,this.hasPattern=!1,this.layoutVertexArray=new xr,this.indexArray=new Ga,this.segments=new Ht,this.programConfigurations=new Ba(p.layers,p.zoom),this.stateDependentLayerIds=this.layers.filter(function(C){return C.isStateDependent()}).map(function(C){return C.id})};function wl(d,p){for(var C=0;C<d.length;C++)if(Tc(p,d[C]))return!0;for(var N=0;N<p.length;N++)if(Tc(d,p[N]))return!0;return!!xc(d,p)}function yc(d,p,C){return!!Tc(d,p)||!!Pc(p,d,C)}function Il(d,p){if(d.length===1)return kc(p,d[0]);for(var C=0;C<p.length;C++)for(var N=p[C],X=0;X<N.length;X++)if(Tc(d,N[X]))return!0;for(var lt=0;lt<d.length;lt++)if(kc(p,d[lt]))return!0;for(var Pt=0;Pt<p.length;Pt++)if(xc(d,p[Pt]))return!0;return!1}function tc(d,p,C){if(d.length>1){if(xc(d,p))return!0;for(var N=0;N<p.length;N++)if(Pc(p[N],d,C))return!0}for(var X=0;X<d.length;X++)if(Pc(d[X],p,C))return!0;return!1}function xc(d,p){if(d.length===0||p.length===0)return!1;for(var C=0;C<d.length-1;C++)for(var N=d[C],X=d[C+1],lt=0;lt<p.length-1;lt++)if(Bc(N,X,p[lt],p[lt+1]))return!0;return!1}function Bc(d,p,C,N){return R(d,C,N)!==R(p,C,N)&&R(d,p,C)!==R(d,p,N)}function Pc(d,p,C){var N=C*C;if(p.length===1)return d.distSqr(p[0])<N;for(var X=1;X<p.length;X++)if(Uc(d,p[X-1],p[X])<N)return!0;return!1}function Uc(d,p,C){var N=p.distSqr(C);if(N===0)return d.distSqr(p);var X=((d.x-p.x)*(C.x-p.x)+(d.y-p.y)*(C.y-p.y))/N;return d.distSqr(X<0?p:X>1?C:C.sub(p)._mult(X)._add(p))}function kc(d,p){for(var C,N,X,lt=!1,Pt=0;Pt<d.length;Pt++)for(var Bt=0,Xt=(C=d[Pt]).length-1;Bt<C.length;Xt=Bt++)(N=C[Bt]).y>p.y!=(X=C[Xt]).y>p.y&&p.x<(X.x-N.x)*(p.y-N.y)/(X.y-N.y)+N.x&&(lt=!lt);return lt}function Tc(d,p){for(var C=!1,N=0,X=d.length-1;N<d.length;X=N++){var lt=d[N],Pt=d[X];lt.y>p.y!=Pt.y>p.y&&p.x<(Pt.x-lt.x)*(p.y-lt.y)/(Pt.y-lt.y)+lt.x&&(C=!C)}return C}function Gc(d,p,C){var N=C[0],X=C[2];if(d.x<N.x&&p.x<N.x||d.x>X.x&&p.x>X.x||d.y<N.y&&p.y<N.y||d.y>X.y&&p.y>X.y)return!1;var lt=R(d,p,C[0]);return lt!==R(d,p,C[1])||lt!==R(d,p,C[2])||lt!==R(d,p,C[3])}function fc(d,p,C){var N=p.paint.get(d).value;return N.kind==="constant"?N.value:C.programConfigurations.get(p.id).getMaxValue(d)}function Su(d){return Math.sqrt(d[0]*d[0]+d[1]*d[1])}function Ac(d,p,C,N,X){if(!p[0]&&!p[1])return d;var lt=r.convert(p)._mult(X);C==="viewport"&&lt._rotate(-N);for(var Pt=[],Bt=0;Bt<d.length;Bt++)Pt.push(d[Bt].sub(lt));return Pt}nl.prototype.populate=function(d,p,C){var N=this.layers[0],X=[],lt=null;N.type==="circle"&&(lt=N.layout.get("circle-sort-key"));for(var Pt=0,Bt=d;Pt<Bt.length;Pt+=1){var Xt=Bt[Pt],he=Xt.feature,Re=Xt.id,Ge=Xt.index,He=Xt.sourceLayerIndex,cn=this.layers[0]._featureFilter.needGeometry,Rn=ks(he,cn);if(this.layers[0]._featureFilter.filter(new br(this.zoom),Rn,C)){var Cn=lt?lt.evaluate(Rn,{},C):void 0,$n={id:Re,properties:he.properties,type:he.type,sourceLayerIndex:He,index:Ge,geometry:cn?Rn.geometry:Yo(he),patterns:{},sortKey:Cn};X.push($n)}}lt&&X.sort(function(Bi,Qi){return Bi.sortKey-Qi.sortKey});for(var Xn=0,_r=X;Xn<_r.length;Xn+=1){var Nr=_r[Xn],Gr=Nr.geometry,pi=Nr.index,oi=Nr.sourceLayerIndex,Ni=d[pi].feature;this.addFeature(Nr,Gr,pi,C),p.featureIndex.insert(Ni,Gr,pi,oi,this.index)}},nl.prototype.update=function(d,p,C){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(d,p,this.stateDependentLayers,C)},nl.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},nl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},nl.prototype.upload=function(d){this.uploaded||(this.layoutVertexBuffer=d.createVertexBuffer(this.layoutVertexArray,Ut),this.indexBuffer=d.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(d),this.uploaded=!0},nl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},nl.prototype.addFeature=function(d,p,C,N){for(var X=0,lt=p;X<lt.length;X+=1)for(var Pt=0,Bt=lt[X];Pt<Bt.length;Pt+=1){var Xt=Bt[Pt],he=Xt.x,Re=Xt.y;if(!(he<0||he>=8192||Re<0||Re>=8192)){var Ge=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,d.sortKey),He=Ge.vertexLength;yl(this.layoutVertexArray,he,Re,-1,-1),yl(this.layoutVertexArray,he,Re,1,-1),yl(this.layoutVertexArray,he,Re,1,1),yl(this.layoutVertexArray,he,Re,-1,1),this.indexArray.emplaceBack(He,He+1,He+2),this.indexArray.emplaceBack(He,He+3,He+2),Ge.vertexLength+=4,Ge.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,d,C,{},N)},Wi("CircleBucket",nl,{omit:["layers"]});var Nc=new vn({"circle-sort-key":new Fe(ue.layout_circle["circle-sort-key"])}),Wl={paint:new vn({"circle-radius":new Fe(ue.paint_circle["circle-radius"]),"circle-color":new Fe(ue.paint_circle["circle-color"]),"circle-blur":new Fe(ue.paint_circle["circle-blur"]),"circle-opacity":new Fe(ue.paint_circle["circle-opacity"]),"circle-translate":new ce(ue.paint_circle["circle-translate"]),"circle-translate-anchor":new ce(ue.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ce(ue.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ce(ue.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Fe(ue.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Fe(ue.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Fe(ue.paint_circle["circle-stroke-opacity"])}),layout:Nc},dl=typeof Float32Array!="undefined"?Float32Array:Array;function vl(d){return d[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=1,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=1,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d}function Wu(d,p,C){var N=p[0],X=p[1],lt=p[2],Pt=p[3],Bt=p[4],Xt=p[5],he=p[6],Re=p[7],Ge=p[8],He=p[9],cn=p[10],Rn=p[11],Cn=p[12],$n=p[13],Xn=p[14],_r=p[15],Nr=C[0],Gr=C[1],pi=C[2],oi=C[3];return d[0]=Nr*N+Gr*Bt+pi*Ge+oi*Cn,d[1]=Nr*X+Gr*Xt+pi*He+oi*$n,d[2]=Nr*lt+Gr*he+pi*cn+oi*Xn,d[3]=Nr*Pt+Gr*Re+pi*Rn+oi*_r,d[4]=(Nr=C[4])*N+(Gr=C[5])*Bt+(pi=C[6])*Ge+(oi=C[7])*Cn,d[5]=Nr*X+Gr*Xt+pi*He+oi*$n,d[6]=Nr*lt+Gr*he+pi*cn+oi*Xn,d[7]=Nr*Pt+Gr*Re+pi*Rn+oi*_r,d[8]=(Nr=C[8])*N+(Gr=C[9])*Bt+(pi=C[10])*Ge+(oi=C[11])*Cn,d[9]=Nr*X+Gr*Xt+pi*He+oi*$n,d[10]=Nr*lt+Gr*he+pi*cn+oi*Xn,d[11]=Nr*Pt+Gr*Re+pi*Rn+oi*_r,d[12]=(Nr=C[12])*N+(Gr=C[13])*Bt+(pi=C[14])*Ge+(oi=C[15])*Cn,d[13]=Nr*X+Gr*Xt+pi*He+oi*$n,d[14]=Nr*lt+Gr*he+pi*cn+oi*Xn,d[15]=Nr*Pt+Gr*Re+pi*Rn+oi*_r,d}Math.hypot||(Math.hypot=function(){for(var d=arguments,p=0,C=arguments.length;C--;)p+=d[C]*d[C];return Math.sqrt(p)});var Hu,rl=Wu;function ec(d,p,C){var N=p[0],X=p[1],lt=p[2],Pt=p[3];return d[0]=C[0]*N+C[4]*X+C[8]*lt+C[12]*Pt,d[1]=C[1]*N+C[5]*X+C[9]*lt+C[13]*Pt,d[2]=C[2]*N+C[6]*X+C[10]*lt+C[14]*Pt,d[3]=C[3]*N+C[7]*X+C[11]*lt+C[15]*Pt,d}Hu=new dl(3),dl!=Float32Array&&(Hu[0]=0,Hu[1]=0,Hu[2]=0),function(){var d=new dl(4);dl!=Float32Array&&(d[0]=0,d[1]=0,d[2]=0,d[3]=0)}();var Ic=(function(){var d=new dl(2);dl!=Float32Array&&(d[0]=0,d[1]=0)}(),function(d){function p(C){d.call(this,C,Wl)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.createBucket=function(C){return new nl(C)},p.prototype.queryRadius=function(C){var N=C;return fc("circle-radius",this,N)+fc("circle-stroke-width",this,N)+Su(this.paint.get("circle-translate"))},p.prototype.queryIntersectsFeature=function(C,N,X,lt,Pt,Bt,Xt,he){for(var Re=Ac(C,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),Bt.angle,Xt),Ge=this.paint.get("circle-radius").evaluate(N,X)+this.paint.get("circle-stroke-width").evaluate(N,X),He=this.paint.get("circle-pitch-alignment")==="map",cn=He?Re:function(Ni,Bi){return Ni.map(function(Qi){return qc(Qi,Bi)})}(Re,he),Rn=He?Ge*Xt:Ge,Cn=0,$n=lt;Cn<$n.length;Cn+=1)for(var Xn=0,_r=$n[Cn];Xn<_r.length;Xn+=1){var Nr=_r[Xn],Gr=He?Nr:qc(Nr,he),pi=Rn,oi=ec([],[Nr.x,Nr.y,0,1],he);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?pi*=oi[3]/Bt.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(pi*=Bt.cameraToCenterDistance/oi[3]),yc(cn,Gr,pi))return!0}return!1},p}(hn));function qc(d,p){var C=ec([],[d.x,d.y,0,1],p);return new r(C[0]/C[3],C[1]/C[3])}var tf=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p}(nl);function Lc(d,p,C,N){var X=p.width,lt=p.height;if(N){if(N instanceof Uint8ClampedArray)N=new Uint8Array(N.buffer);else if(N.length!==X*lt*C)throw new RangeError("mismatched image size")}else N=new Uint8Array(X*lt*C);return d.width=X,d.height=lt,d.data=N,d}function Vc(d,p,C){var N=p.width,X=p.height;if(N!==d.width||X!==d.height){var lt=Lc({},{width:N,height:X},C);Fc(d,lt,{x:0,y:0},{x:0,y:0},{width:Math.min(d.width,N),height:Math.min(d.height,X)},C),d.width=N,d.height=X,d.data=lt.data}}function Fc(d,p,C,N,X,lt){if(X.width===0||X.height===0)return p;if(X.width>d.width||X.height>d.height||C.x>d.width-X.width||C.y>d.height-X.height)throw new RangeError("out of range source coordinates for image copy");if(X.width>p.width||X.height>p.height||N.x>p.width-X.width||N.y>p.height-X.height)throw new RangeError("out of range destination coordinates for image copy");for(var Pt=d.data,Bt=p.data,Xt=0;Xt<X.height;Xt++)for(var he=((C.y+Xt)*d.width+C.x)*lt,Re=((N.y+Xt)*p.width+N.x)*lt,Ge=0;Ge<X.width*lt;Ge++)Bt[Re+Ge]=Pt[he+Ge];return p}Wi("HeatmapBucket",tf,{omit:["layers"]});var Kl=function(p,C){Lc(this,p,1,C)};Kl.prototype.resize=function(d){Vc(this,d,1)},Kl.prototype.clone=function(){return new Kl({width:this.width,height:this.height},new Uint8Array(this.data))},Kl.copy=function(d,p,C,N,X){Fc(d,p,C,N,X,1)};var Yu=function(p,C){Lc(this,p,4,C)};Yu.prototype.resize=function(d){Vc(this,d,4)},Yu.prototype.replace=function(d,p){p?this.data.set(d):this.data=d instanceof Uint8ClampedArray?new Uint8Array(d.buffer):d},Yu.prototype.clone=function(){return new Yu({width:this.width,height:this.height},new Uint8Array(this.data))},Yu.copy=function(d,p,C,N,X){Fc(d,p,C,N,X,4)},Wi("AlphaImage",Kl),Wi("RGBAImage",Yu);var ef={paint:new vn({"heatmap-radius":new Fe(ue.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Fe(ue.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ce(ue.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Je(ue.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ce(ue.paint_heatmap["heatmap-opacity"])})};function Hl(d){var p={},C=d.resolution||256,N=d.clips?d.clips.length:1,X=d.image||new Yu({width:C,height:N}),lt=function(Cn,$n,Xn){p[d.evaluationKey]=Xn;var _r=d.expression.evaluate(p);X.data[Cn+$n+0]=Math.floor(255*_r.r/_r.a),X.data[Cn+$n+1]=Math.floor(255*_r.g/_r.a),X.data[Cn+$n+2]=Math.floor(255*_r.b/_r.a),X.data[Cn+$n+3]=Math.floor(255*_r.a)};if(d.clips)for(var Pt=0,Bt=0;Pt<N;++Pt,Bt+=4*C)for(var Xt=0,he=0;Xt<C;Xt++,he+=4){var Re=Xt/(C-1),Ge=d.clips[Pt];lt(Bt,he,Ge.start*(1-Re)+Ge.end*Re)}else for(var He=0,cn=0;He<C;He++,cn+=4)lt(0,cn,He/(C-1));return X}var bf=function(d){function p(C){d.call(this,C,ef),this._updateColorRamp()}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.createBucket=function(C){return new tf(C)},p.prototype._handleSpecialPaintPropertyUpdate=function(C){C==="heatmap-color"&&this._updateColorRamp()},p.prototype._updateColorRamp=function(){this.colorRamp=Hl({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},p.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},p.prototype.queryRadius=function(){return 0},p.prototype.queryIntersectsFeature=function(){return!1},p.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},p}(hn),wf={paint:new vn({"hillshade-illumination-direction":new ce(ue.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new ce(ue.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ce(ue.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ce(ue.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ce(ue.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ce(ue.paint_hillshade["hillshade-accent-color"])})},If=function(d){function p(C){d.call(this,C,wf)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},p}(hn),Gf=Wn([{name:"a_pos",components:2,type:"Int16"}],4).members,Rc=Ef,Pf=Ef;function Ef(d,p,C){C=C||2;var N,X,lt,Pt,Bt,Xt,he,Re=p&&p.length,Ge=Re?p[0]*C:d.length,He=Lf(d,0,Ge,C,!0),cn=[];if(!He||He.next===He.prev)return cn;if(Re&&(He=function(Cn,$n,Xn,_r){var Nr,Gr,pi,oi=[];for(Nr=0,Gr=$n.length;Nr<Gr;Nr++)(pi=Lf(Cn,$n[Nr]*_r,Nr<Gr-1?$n[Nr+1]*_r:Cn.length,_r,!1))===pi.next&&(pi.steiner=!0),oi.push(qf(pi));for(oi.sort(Hf),Nr=0;Nr<oi.length;Nr++)Yf(oi[Nr],Xn),Xn=Cc(Xn,Xn.next);return Xn}(d,p,He,C)),d.length>80*C){N=lt=d[0],X=Pt=d[1];for(var Rn=C;Rn<Ge;Rn+=C)(Bt=d[Rn])<N&&(N=Bt),(Xt=d[Rn+1])<X&&(X=Xt),Bt>lt&&(lt=Bt),Xt>Pt&&(Pt=Xt);he=(he=Math.max(lt-N,Pt-X))!==0?1/he:0}return Xc(He,cn,C,N,X,he),cn}function Lf(d,p,C,N,X){var lt,Pt;if(X===of(d,p,C,N)>0)for(lt=p;lt<C;lt+=N)Pt=zc(lt,d[lt],d[lt+1],Pt);else for(lt=C-N;lt>=p;lt-=N)Pt=zc(lt,d[lt],d[lt+1],Pt);return Pt&&Hc(Pt,Pt.next)&&(vf(Pt),Pt=Pt.next),Pt}function Cc(d,p){if(!d)return d;p||(p=d);var C,N=d;do if(C=!1,N.steiner||!Hc(N,N.next)&&yu(N.prev,N,N.next)!==0)N=N.next;else{if(vf(N),(N=p=N.prev)===N.next)break;C=!0}while(C||N!==p);return p}function Xc(d,p,C,N,X,lt,Pt){if(d){!Pt&&lt&&function(Re,Ge,He,cn){var Rn=Re;do Rn.z===null&&(Rn.z=Tf(Rn.x,Rn.y,Ge,He,cn)),Rn.prevZ=Rn.prev,Rn.nextZ=Rn.next,Rn=Rn.next;while(Rn!==Re);Rn.prevZ.nextZ=null,Rn.prevZ=null,function(Cn){var $n,Xn,_r,Nr,Gr,pi,oi,Ni,Bi=1;do{for(Xn=Cn,Cn=null,Gr=null,pi=0;Xn;){for(pi++,_r=Xn,oi=0,$n=0;$n<Bi&&(oi++,_r=_r.nextZ);$n++);for(Ni=Bi;oi>0||Ni>0&&_r;)oi!==0&&(Ni===0||!_r||Xn.z<=_r.z)?(Nr=Xn,Xn=Xn.nextZ,oi--):(Nr=_r,_r=_r.nextZ,Ni--),Gr?Gr.nextZ=Nr:Cn=Nr,Nr.prevZ=Gr,Gr=Nr;Xn=_r}Gr.nextZ=null,Bi*=2}while(pi>1)}(Rn)}(d,N,X,lt);for(var Bt,Xt,he=d;d.prev!==d.next;)if(Bt=d.prev,Xt=d.next,lt?nf(d,N,X,lt):Vf(d))p.push(Bt.i/C),p.push(d.i/C),p.push(Xt.i/C),vf(d),d=Xt.next,he=Xt.next;else if((d=Xt)===he){Pt?Pt===1?Xc(d=rf(Cc(d),p,C),p,C,N,X,lt,2):Pt===2&&Wf(d,p,C,N,X,lt):Xc(Cc(d),p,C,N,X,lt,1);break}}}function Vf(d){var p=d.prev,C=d,N=d.next;if(yu(p,C,N)>=0)return!1;for(var X=d.next.next;X!==d.prev;){if(Wc(p.x,p.y,C.x,C.y,N.x,N.y,X.x,X.y)&&yu(X.prev,X,X.next)>=0)return!1;X=X.next}return!0}function nf(d,p,C,N){var X=d.prev,lt=d,Pt=d.next;if(yu(X,lt,Pt)>=0)return!1;for(var Bt=X.x>lt.x?X.x>Pt.x?X.x:Pt.x:lt.x>Pt.x?lt.x:Pt.x,Xt=X.y>lt.y?X.y>Pt.y?X.y:Pt.y:lt.y>Pt.y?lt.y:Pt.y,he=Tf(X.x<lt.x?X.x<Pt.x?X.x:Pt.x:lt.x<Pt.x?lt.x:Pt.x,X.y<lt.y?X.y<Pt.y?X.y:Pt.y:lt.y<Pt.y?lt.y:Pt.y,p,C,N),Re=Tf(Bt,Xt,p,C,N),Ge=d.prevZ,He=d.nextZ;Ge&&Ge.z>=he&&He&&He.z<=Re;){if(Ge!==d.prev&&Ge!==d.next&&Wc(X.x,X.y,lt.x,lt.y,Pt.x,Pt.y,Ge.x,Ge.y)&&yu(Ge.prev,Ge,Ge.next)>=0||(Ge=Ge.prevZ,He!==d.prev&&He!==d.next&&Wc(X.x,X.y,lt.x,lt.y,Pt.x,Pt.y,He.x,He.y)&&yu(He.prev,He,He.next)>=0))return!1;He=He.nextZ}for(;Ge&&Ge.z>=he;){if(Ge!==d.prev&&Ge!==d.next&&Wc(X.x,X.y,lt.x,lt.y,Pt.x,Pt.y,Ge.x,Ge.y)&&yu(Ge.prev,Ge,Ge.next)>=0)return!1;Ge=Ge.prevZ}for(;He&&He.z<=Re;){if(He!==d.prev&&He!==d.next&&Wc(X.x,X.y,lt.x,lt.y,Pt.x,Pt.y,He.x,He.y)&&yu(He.prev,He,He.next)>=0)return!1;He=He.nextZ}return!0}function rf(d,p,C){var N=d;do{var X=N.prev,lt=N.next.next;!Hc(X,lt)&&df(X,N,N.next,lt)&&hc(X,lt)&&hc(lt,X)&&(p.push(X.i/C),p.push(N.i/C),p.push(lt.i/C),vf(N),vf(N.next),N=d=lt),N=N.next}while(N!==d);return Cc(N)}function Wf(d,p,C,N,X,lt){var Pt=d;do{for(var Bt=Pt.next.next;Bt!==Pt.prev;){if(Pt.i!==Bt.i&&hf(Pt,Bt)){var Xt=Sf(Pt,Bt);return Pt=Cc(Pt,Pt.next),Xt=Cc(Xt,Xt.next),Xc(Pt,p,C,N,X,lt),void Xc(Xt,p,C,N,X,lt)}Bt=Bt.next}Pt=Pt.next}while(Pt!==d)}function Hf(d,p){return d.x-p.x}function Yf(d,p){if(p=function(N,X){var lt,Pt=X,Bt=N.x,Xt=N.y,he=-1/0;do{if(Xt<=Pt.y&&Xt>=Pt.next.y&&Pt.next.y!==Pt.y){var Re=Pt.x+(Xt-Pt.y)*(Pt.next.x-Pt.x)/(Pt.next.y-Pt.y);if(Re<=Bt&&Re>he){if(he=Re,Re===Bt){if(Xt===Pt.y)return Pt;if(Xt===Pt.next.y)return Pt.next}lt=Pt.x<Pt.next.x?Pt:Pt.next}}Pt=Pt.next}while(Pt!==X);if(!lt)return null;if(Bt===he)return lt;var Ge,He=lt,cn=lt.x,Rn=lt.y,Cn=1/0;Pt=lt;do Bt>=Pt.x&&Pt.x>=cn&&Bt!==Pt.x&&Wc(Xt<Rn?Bt:he,Xt,cn,Rn,Xt<Rn?he:Bt,Xt,Pt.x,Pt.y)&&(Ge=Math.abs(Xt-Pt.y)/(Bt-Pt.x),hc(Pt,N)&&(Ge<Cn||Ge===Cn&&(Pt.x>lt.x||Pt.x===lt.x&&Zf(lt,Pt)))&&(lt=Pt,Cn=Ge)),Pt=Pt.next;while(Pt!==He);return lt}(d,p)){var C=Sf(p,d);Cc(p,p.next),Cc(C,C.next)}}function Zf(d,p){return yu(d.prev,d,p.prev)<0&&yu(p.next,d,d.next)<0}function Tf(d,p,C,N,X){return(d=1431655765&((d=858993459&((d=252645135&((d=16711935&((d=32767*(d-C)*X)|d<<8))|d<<4))|d<<2))|d<<1))|(p=1431655765&((p=858993459&((p=252645135&((p=16711935&((p=32767*(p-N)*X)|p<<8))|p<<4))|p<<2))|p<<1))<<1}function qf(d){var p=d,C=d;do(p.x<C.x||p.x===C.x&&p.y<C.y)&&(C=p),p=p.next;while(p!==d);return C}function Wc(d,p,C,N,X,lt,Pt,Bt){return(X-Pt)*(p-Bt)-(d-Pt)*(lt-Bt)>=0&&(d-Pt)*(N-Bt)-(C-Pt)*(p-Bt)>=0&&(C-Pt)*(lt-Bt)-(X-Pt)*(N-Bt)>=0}function hf(d,p){return d.next.i!==p.i&&d.prev.i!==p.i&&!function(C,N){var X=C;do{if(X.i!==C.i&&X.next.i!==C.i&&X.i!==N.i&&X.next.i!==N.i&&df(X,X.next,C,N))return!0;X=X.next}while(X!==C);return!1}(d,p)&&(hc(d,p)&&hc(p,d)&&function(C,N){var X=C,lt=!1,Pt=(C.x+N.x)/2,Bt=(C.y+N.y)/2;do X.y>Bt!=X.next.y>Bt&&X.next.y!==X.y&&Pt<(X.next.x-X.x)*(Bt-X.y)/(X.next.y-X.y)+X.x&&(lt=!lt),X=X.next;while(X!==C);return lt}(d,p)&&(yu(d.prev,d,p.prev)||yu(d,p.prev,p))||Hc(d,p)&&yu(d.prev,d,d.next)>0&&yu(p.prev,p,p.next)>0)}function yu(d,p,C){return(p.y-d.y)*(C.x-p.x)-(p.x-d.x)*(C.y-p.y)}function Hc(d,p){return d.x===p.x&&d.y===p.y}function df(d,p,C,N){var X=oc(yu(d,p,C)),lt=oc(yu(d,p,N)),Pt=oc(yu(C,N,d)),Bt=oc(yu(C,N,p));return X!==lt&&Pt!==Bt||!(X!==0||!af(d,C,p))||!(lt!==0||!af(d,N,p))||!(Pt!==0||!af(C,d,N))||!(Bt!==0||!af(C,p,N))}function af(d,p,C){return p.x<=Math.max(d.x,C.x)&&p.x>=Math.min(d.x,C.x)&&p.y<=Math.max(d.y,C.y)&&p.y>=Math.min(d.y,C.y)}function oc(d){return d>0?1:d<0?-1:0}function hc(d,p){return yu(d.prev,d,d.next)<0?yu(d,p,d.next)>=0&&yu(d,d.prev,p)>=0:yu(d,p,d.prev)<0||yu(d,d.next,p)<0}function Sf(d,p){var C=new _f(d.i,d.x,d.y),N=new _f(p.i,p.x,p.y),X=d.next,lt=p.prev;return d.next=p,p.prev=d,C.next=X,X.prev=C,N.next=C,C.prev=N,lt.next=N,N.prev=lt,N}function zc(d,p,C,N){var X=new _f(d,p,C);return N?(X.next=N.next,X.prev=N,N.next.prev=X,N.next=X):(X.prev=X,X.next=X),X}function vf(d){d.next.prev=d.prev,d.prev.next=d.next,d.prevZ&&(d.prevZ.nextZ=d.nextZ),d.nextZ&&(d.nextZ.prevZ=d.prevZ)}function _f(d,p,C){this.i=d,this.x=p,this.y=C,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function of(d,p,C,N){for(var X=0,lt=p,Pt=C-N;lt<C;lt+=N)X+=(d[Pt]-d[lt])*(d[lt+1]+d[Pt+1]),Pt=lt;return X}function jc(d,p,C,N,X){(function lt(Pt,Bt,Xt,he,Re){for(;he>Xt;){if(he-Xt>600){var Ge=he-Xt+1,He=Bt-Xt+1,cn=Math.log(Ge),Rn=.5*Math.exp(2*cn/3),Cn=.5*Math.sqrt(cn*Rn*(Ge-Rn)/Ge)*(He-Ge/2<0?-1:1);lt(Pt,Bt,Math.max(Xt,Math.floor(Bt-He*Rn/Ge+Cn)),Math.min(he,Math.floor(Bt+(Ge-He)*Rn/Ge+Cn)),Re)}var $n=Pt[Bt],Xn=Xt,_r=he;for(de(Pt,Xt,Bt),Re(Pt[he],$n)>0&&de(Pt,Xt,he);Xn<_r;){for(de(Pt,Xn,_r),Xn++,_r--;Re(Pt[Xn],$n)<0;)Xn++;for(;Re(Pt[_r],$n)>0;)_r--}Re(Pt[Xt],$n)===0?de(Pt,Xt,_r):de(Pt,++_r,he),_r<=Bt&&(Xt=_r+1),Bt<=_r&&(he=_r-1)}})(d,p,C||0,N||d.length-1,X||ge)}function de(d,p,C){var N=d[p];d[p]=d[C],d[C]=N}function ge(d,p){return d<p?-1:d>p?1:0}function kt(d,p){var C=d.length;if(C<=1)return[d];for(var N,X,lt=[],Pt=0;Pt<C;Pt++){var Bt=W(d[Pt]);Bt!==0&&(d[Pt].area=Math.abs(Bt),X===void 0&&(X=Bt<0),X===Bt<0?(N&&lt.push(N),N=[d[Pt]]):N.push(d[Pt]))}if(N&&lt.push(N),p>1)for(var Xt=0;Xt<lt.length;Xt++)lt[Xt].length<=p||(jc(lt[Xt],p,1,lt[Xt].length-1,Kt),lt[Xt]=lt[Xt].slice(0,p));return lt}function Kt(d,p){return p.area-d.area}function Ue(d,p,C){for(var N=C.patternDependencies,X=!1,lt=0,Pt=p;lt<Pt.length;lt+=1){var Bt=Pt[lt].paint.get(d+"-pattern");Bt.isConstant()||(X=!0);var Xt=Bt.constantOr(null);Xt&&(X=!0,N[Xt.to]=!0,N[Xt.from]=!0)}return X}function un(d,p,C,N,X){for(var lt=X.patternDependencies,Pt=0,Bt=p;Pt<Bt.length;Pt+=1){var Xt=Bt[Pt],he=Xt.paint.get(d+"-pattern").value;if(he.kind!=="constant"){var Re=he.evaluate({zoom:N-1},C,{},X.availableImages),Ge=he.evaluate({zoom:N},C,{},X.availableImages),He=he.evaluate({zoom:N+1},C,{},X.availableImages);Ge=Ge&&Ge.name?Ge.name:Ge,He=He&&He.name?He.name:He,lt[Re=Re&&Re.name?Re.name:Re]=!0,lt[Ge]=!0,lt[He]=!0,C.patterns[Xt.id]={min:Re,mid:Ge,max:He}}}return C}Ef.deviation=function(d,p,C,N){var X=p&&p.length,lt=Math.abs(of(d,0,X?p[0]*C:d.length,C));if(X)for(var Pt=0,Bt=p.length;Pt<Bt;Pt++)lt-=Math.abs(of(d,p[Pt]*C,Pt<Bt-1?p[Pt+1]*C:d.length,C));var Xt=0;for(Pt=0;Pt<N.length;Pt+=3){var he=N[Pt]*C,Re=N[Pt+1]*C,Ge=N[Pt+2]*C;Xt+=Math.abs((d[he]-d[Ge])*(d[Re+1]-d[he+1])-(d[he]-d[Re])*(d[Ge+1]-d[he+1]))}return lt===0&&Xt===0?0:Math.abs((Xt-lt)/lt)},Ef.flatten=function(d){for(var p=d[0][0].length,C={vertices:[],holes:[],dimensions:p},N=0,X=0;X<d.length;X++){for(var lt=0;lt<d[X].length;lt++)for(var Pt=0;Pt<p;Pt++)C.vertices.push(d[X][lt][Pt]);X>0&&C.holes.push(N+=d[X-1].length)}return C},Rc.default=Pf;var Gn=function(p){this.zoom=p.zoom,this.overscaling=p.overscaling,this.layers=p.layers,this.layerIds=this.layers.map(function(C){return C.id}),this.index=p.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new xr,this.indexArray=new Ga,this.indexArray2=new Is,this.programConfigurations=new Ba(p.layers,p.zoom),this.segments=new Ht,this.segments2=new Ht,this.stateDependentLayerIds=this.layers.filter(function(C){return C.isStateDependent()}).map(function(C){return C.id})};Gn.prototype.populate=function(d,p,C){this.hasPattern=Ue("fill",this.layers,p);for(var N=this.layers[0].layout.get("fill-sort-key"),X=[],lt=0,Pt=d;lt<Pt.length;lt+=1){var Bt=Pt[lt],Xt=Bt.feature,he=Bt.id,Re=Bt.index,Ge=Bt.sourceLayerIndex,He=this.layers[0]._featureFilter.needGeometry,cn=ks(Xt,He);if(this.layers[0]._featureFilter.filter(new br(this.zoom),cn,C)){var Rn=N?N.evaluate(cn,{},C,p.availableImages):void 0,Cn={id:he,properties:Xt.properties,type:Xt.type,sourceLayerIndex:Ge,index:Re,geometry:He?cn.geometry:Yo(Xt),patterns:{},sortKey:Rn};X.push(Cn)}}N&&X.sort(function(Ni,Bi){return Ni.sortKey-Bi.sortKey});for(var $n=0,Xn=X;$n<Xn.length;$n+=1){var _r=Xn[$n],Nr=_r.geometry,Gr=_r.index,pi=_r.sourceLayerIndex;if(this.hasPattern){var oi=un("fill",this.layers,_r,this.zoom,p);this.patternFeatures.push(oi)}else this.addFeature(_r,Nr,Gr,C,{});p.featureIndex.insert(d[Gr].feature,Nr,Gr,pi,this.index)}},Gn.prototype.update=function(d,p,C){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(d,p,this.stateDependentLayers,C)},Gn.prototype.addFeatures=function(d,p,C){for(var N=0,X=this.patternFeatures;N<X.length;N+=1){var lt=X[N];this.addFeature(lt,lt.geometry,lt.index,p,C)}},Gn.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Gn.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Gn.prototype.upload=function(d){this.uploaded||(this.layoutVertexBuffer=d.createVertexBuffer(this.layoutVertexArray,Gf),this.indexBuffer=d.createIndexBuffer(this.indexArray),this.indexBuffer2=d.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(d),this.uploaded=!0},Gn.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Gn.prototype.addFeature=function(d,p,C,N,X){for(var lt=0,Pt=kt(p,500);lt<Pt.length;lt+=1){for(var Bt=Pt[lt],Xt=0,he=0,Re=Bt;he<Re.length;he+=1)Xt+=Re[he].length;for(var Ge=this.segments.prepareSegment(Xt,this.layoutVertexArray,this.indexArray),He=Ge.vertexLength,cn=[],Rn=[],Cn=0,$n=Bt;Cn<$n.length;Cn+=1){var Xn=$n[Cn];if(Xn.length!==0){Xn!==Bt[0]&&Rn.push(cn.length/2);var _r=this.segments2.prepareSegment(Xn.length,this.layoutVertexArray,this.indexArray2),Nr=_r.vertexLength;this.layoutVertexArray.emplaceBack(Xn[0].x,Xn[0].y),this.indexArray2.emplaceBack(Nr+Xn.length-1,Nr),cn.push(Xn[0].x),cn.push(Xn[0].y);for(var Gr=1;Gr<Xn.length;Gr++)this.layoutVertexArray.emplaceBack(Xn[Gr].x,Xn[Gr].y),this.indexArray2.emplaceBack(Nr+Gr-1,Nr+Gr),cn.push(Xn[Gr].x),cn.push(Xn[Gr].y);_r.vertexLength+=Xn.length,_r.primitiveLength+=Xn.length}}for(var pi=Rc(cn,Rn),oi=0;oi<pi.length;oi+=3)this.indexArray.emplaceBack(He+pi[oi],He+pi[oi+1],He+pi[oi+2]);Ge.vertexLength+=Xt,Ge.primitiveLength+=pi.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,d,C,X,N)},Wi("FillBucket",Gn,{omit:["layers","patternFeatures"]});var mr=new vn({"fill-sort-key":new Fe(ue.layout_fill["fill-sort-key"])}),gr={paint:new vn({"fill-antialias":new ce(ue.paint_fill["fill-antialias"]),"fill-opacity":new Fe(ue.paint_fill["fill-opacity"]),"fill-color":new Fe(ue.paint_fill["fill-color"]),"fill-outline-color":new Fe(ue.paint_fill["fill-outline-color"]),"fill-translate":new ce(ue.paint_fill["fill-translate"]),"fill-translate-anchor":new ce(ue.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ke(ue.paint_fill["fill-pattern"])}),layout:mr},Qr=function(d){function p(C){d.call(this,C,gr)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.recalculate=function(C,N){d.prototype.recalculate.call(this,C,N);var X=this.paint._values["fill-outline-color"];X.value.kind==="constant"&&X.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},p.prototype.createBucket=function(C){return new Gn(C)},p.prototype.queryRadius=function(){return Su(this.paint.get("fill-translate"))},p.prototype.queryIntersectsFeature=function(C,N,X,lt,Pt,Bt,Xt){return Il(Ac(C,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),Bt.angle,Xt),lt)},p.prototype.isTileClipped=function(){return!0},p}(hn),wi=Wn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,$i=ha;function ha(d,p,C,N,X){this.properties={},this.extent=C,this.type=0,this._pbf=d,this._geometry=-1,this._keys=N,this._values=X,d.readFields(xa,this,p)}function xa(d,p,C){d==1?p.id=C.readVarint():d==2?function(N,X){for(var lt=N.readVarint()+N.pos;N.pos<lt;){var Pt=X._keys[N.readVarint()],Bt=X._values[N.readVarint()];X.properties[Pt]=Bt}}(C,p):d==3?p.type=C.readVarint():d==4&&(p._geometry=C.pos)}function ao(d){for(var p,C,N=0,X=0,lt=d.length,Pt=lt-1;X<lt;Pt=X++)N+=((C=d[Pt]).x-(p=d[X]).x)*(p.y+C.y);return N}ha.types=["Unknown","Point","LineString","Polygon"],ha.prototype.loadGeometry=function(){var d=this._pbf;d.pos=this._geometry;for(var p,C=d.readVarint()+d.pos,N=1,X=0,lt=0,Pt=0,Bt=[];d.pos<C;){if(X<=0){var Xt=d.readVarint();N=7&Xt,X=Xt>>3}if(X--,N===1||N===2)lt+=d.readSVarint(),Pt+=d.readSVarint(),N===1&&(p&&Bt.push(p),p=[]),p.push(new r(lt,Pt));else{if(N!==7)throw new Error("unknown command "+N);p&&p.push(p[0].clone())}}return p&&Bt.push(p),Bt},ha.prototype.bbox=function(){var d=this._pbf;d.pos=this._geometry;for(var p=d.readVarint()+d.pos,C=1,N=0,X=0,lt=0,Pt=1/0,Bt=-1/0,Xt=1/0,he=-1/0;d.pos<p;){if(N<=0){var Re=d.readVarint();C=7&Re,N=Re>>3}if(N--,C===1||C===2)(X+=d.readSVarint())<Pt&&(Pt=X),X>Bt&&(Bt=X),(lt+=d.readSVarint())<Xt&&(Xt=lt),lt>he&&(he=lt);else if(C!==7)throw new Error("unknown command "+C)}return[Pt,Xt,Bt,he]},ha.prototype.toGeoJSON=function(d,p,C){var N,X,lt=this.extent*Math.pow(2,C),Pt=this.extent*d,Bt=this.extent*p,Xt=this.loadGeometry(),he=ha.types[this.type];function Re(cn){for(var Rn=0;Rn<cn.length;Rn++){var Cn=cn[Rn];cn[Rn]=[360*(Cn.x+Pt)/lt-180,360/Math.PI*Math.atan(Math.exp((180-360*(Cn.y+Bt)/lt)*Math.PI/180))-90]}}switch(this.type){case 1:var Ge=[];for(N=0;N<Xt.length;N++)Ge[N]=Xt[N][0];Re(Xt=Ge);break;case 2:for(N=0;N<Xt.length;N++)Re(Xt[N]);break;case 3:for(Xt=function(cn){var Rn=cn.length;if(Rn<=1)return[cn];for(var Cn,$n,Xn=[],_r=0;_r<Rn;_r++){var Nr=ao(cn[_r]);Nr!==0&&($n===void 0&&($n=Nr<0),$n===Nr<0?(Cn&&Xn.push(Cn),Cn=[cn[_r]]):Cn.push(cn[_r]))}return Cn&&Xn.push(Cn),Xn}(Xt),N=0;N<Xt.length;N++)for(X=0;X<Xt[N].length;X++)Re(Xt[N][X])}Xt.length===1?Xt=Xt[0]:he="Multi"+he;var He={type:"Feature",geometry:{type:he,coordinates:Xt},properties:this.properties};return"id"in this&&(He.id=this.id),He};var vo=ts;function ts(d,p){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=d,this._keys=[],this._values=[],this._features=[],d.readFields(Ho,this,p),this.length=this._features.length}function Ho(d,p,C){d===15?p.version=C.readVarint():d===1?p.name=C.readString():d===5?p.extent=C.readVarint():d===2?p._features.push(C.pos):d===3?p._keys.push(C.readString()):d===4&&p._values.push(function(N){for(var X=null,lt=N.readVarint()+N.pos;N.pos<lt;){var Pt=N.readVarint()>>3;X=Pt===1?N.readString():Pt===2?N.readFloat():Pt===3?N.readDouble():Pt===4?N.readVarint64():Pt===5?N.readVarint():Pt===6?N.readSVarint():Pt===7?N.readBoolean():null}return X}(C))}function Gs(d,p,C){if(d===3){var N=new vo(C,C.readVarint()+C.pos);N.length&&(p[N.name]=N)}}ts.prototype.feature=function(d){if(d<0||d>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[d];var p=this._pbf.readVarint()+this._pbf.pos;return new $i(this._pbf,p,this.extent,this._keys,this._values)};var ru={VectorTile:function(p,C){this.layers=p.readFields(Gs,{},C)},VectorTileFeature:$i,VectorTileLayer:vo},xu=ru.VectorTileFeature.types,_s=Math.pow(2,13);function _u(d,p,C,N,X,lt,Pt,Bt){d.emplaceBack(p,C,2*Math.floor(N*_s)+Pt,X*_s*2,lt*_s*2,Math.round(Bt))}var mo=function(p){this.zoom=p.zoom,this.overscaling=p.overscaling,this.layers=p.layers,this.layerIds=this.layers.map(function(C){return C.id}),this.index=p.index,this.hasPattern=!1,this.layoutVertexArray=new yi,this.indexArray=new Ga,this.programConfigurations=new Ba(p.layers,p.zoom),this.segments=new Ht,this.stateDependentLayerIds=this.layers.filter(function(C){return C.isStateDependent()}).map(function(C){return C.id})};function fu(d,p){return d.x===p.x&&(d.x<0||d.x>8192)||d.y===p.y&&(d.y<0||d.y>8192)}mo.prototype.populate=function(d,p,C){this.features=[],this.hasPattern=Ue("fill-extrusion",this.layers,p);for(var N=0,X=d;N<X.length;N+=1){var lt=X[N],Pt=lt.feature,Bt=lt.id,Xt=lt.index,he=lt.sourceLayerIndex,Re=this.layers[0]._featureFilter.needGeometry,Ge=ks(Pt,Re);if(this.layers[0]._featureFilter.filter(new br(this.zoom),Ge,C)){var He={id:Bt,sourceLayerIndex:he,index:Xt,geometry:Re?Ge.geometry:Yo(Pt),properties:Pt.properties,type:Pt.type,patterns:{}};this.hasPattern?this.features.push(un("fill-extrusion",this.layers,He,this.zoom,p)):this.addFeature(He,He.geometry,Xt,C,{}),p.featureIndex.insert(Pt,He.geometry,Xt,he,this.index,!0)}}},mo.prototype.addFeatures=function(d,p,C){for(var N=0,X=this.features;N<X.length;N+=1){var lt=X[N];this.addFeature(lt,lt.geometry,lt.index,p,C)}},mo.prototype.update=function(d,p,C){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(d,p,this.stateDependentLayers,C)},mo.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},mo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},mo.prototype.upload=function(d){this.uploaded||(this.layoutVertexBuffer=d.createVertexBuffer(this.layoutVertexArray,wi),this.indexBuffer=d.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(d),this.uploaded=!0},mo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},mo.prototype.addFeature=function(d,p,C,N,X){for(var lt=0,Pt=kt(p,500);lt<Pt.length;lt+=1){for(var Bt=Pt[lt],Xt=0,he=0,Re=Bt;he<Re.length;he+=1)Xt+=Re[he].length;for(var Ge=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),He=0,cn=Bt;He<cn.length;He+=1){var Rn=cn[He];if(Rn.length!==0&&!((Uo=Rn).every(function(xo){return xo.x<0})||Uo.every(function(xo){return xo.x>8192})||Uo.every(function(xo){return xo.y<0})||Uo.every(function(xo){return xo.y>8192})))for(var Cn=0,$n=0;$n<Rn.length;$n++){var Xn=Rn[$n];if($n>=1){var _r=Rn[$n-1];if(!fu(Xn,_r)){Ge.vertexLength+4>Ht.MAX_VERTEX_ARRAY_LENGTH&&(Ge=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Nr=Xn.sub(_r)._perp()._unit(),Gr=_r.dist(Xn);Cn+Gr>32768&&(Cn=0),_u(this.layoutVertexArray,Xn.x,Xn.y,Nr.x,Nr.y,0,0,Cn),_u(this.layoutVertexArray,Xn.x,Xn.y,Nr.x,Nr.y,0,1,Cn),_u(this.layoutVertexArray,_r.x,_r.y,Nr.x,Nr.y,0,0,Cn+=Gr),_u(this.layoutVertexArray,_r.x,_r.y,Nr.x,Nr.y,0,1,Cn);var pi=Ge.vertexLength;this.indexArray.emplaceBack(pi,pi+2,pi+1),this.indexArray.emplaceBack(pi+1,pi+2,pi+3),Ge.vertexLength+=4,Ge.primitiveLength+=2}}}}if(Ge.vertexLength+Xt>Ht.MAX_VERTEX_ARRAY_LENGTH&&(Ge=this.segments.prepareSegment(Xt,this.layoutVertexArray,this.indexArray)),xu[d.type]==="Polygon"){for(var oi=[],Ni=[],Bi=Ge.vertexLength,Qi=0,pa=Bt;Qi<pa.length;Qi+=1){var fa=pa[Qi];if(fa.length!==0){fa!==Bt[0]&&Ni.push(oi.length/2);for(var na=0;na<fa.length;na++){var eo=fa[na];_u(this.layoutVertexArray,eo.x,eo.y,0,0,1,1,0),oi.push(eo.x),oi.push(eo.y)}}}for(var Ia=Rc(oi,Ni),ga=0;ga<Ia.length;ga+=3)this.indexArray.emplaceBack(Bi+Ia[ga],Bi+Ia[ga+2],Bi+Ia[ga+1]);Ge.primitiveLength+=Ia.length/3,Ge.vertexLength+=Xt}}var Uo;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,d,C,X,N)},Wi("FillExtrusionBucket",mo,{omit:["layers","features"]});var xl={paint:new vn({"fill-extrusion-opacity":new ce(ue["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Fe(ue["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ce(ue["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ce(ue["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ke(ue["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Fe(ue["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Fe(ue["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ce(ue["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},ss=function(d){function p(C){d.call(this,C,xl)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.createBucket=function(C){return new mo(C)},p.prototype.queryRadius=function(){return Su(this.paint.get("fill-extrusion-translate"))},p.prototype.is3D=function(){return!0},p.prototype.queryIntersectsFeature=function(C,N,X,lt,Pt,Bt,Xt,he){var Re=Ac(C,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),Bt.angle,Xt),Ge=this.paint.get("fill-extrusion-height").evaluate(N,X),He=this.paint.get("fill-extrusion-base").evaluate(N,X),cn=function(Cn,$n,Xn,_r){for(var Nr=[],Gr=0,pi=Cn;Gr<pi.length;Gr+=1){var oi=pi[Gr],Ni=[oi.x,oi.y,0,1];ec(Ni,Ni,$n),Nr.push(new r(Ni[0]/Ni[3],Ni[1]/Ni[3]))}return Nr}(Re,he),Rn=function(Cn,$n,Xn,_r){for(var Nr=[],Gr=[],pi=_r[8]*$n,oi=_r[9]*$n,Ni=_r[10]*$n,Bi=_r[11]*$n,Qi=_r[8]*Xn,pa=_r[9]*Xn,fa=_r[10]*Xn,na=_r[11]*Xn,eo=0,Ia=Cn;eo<Ia.length;eo+=1){for(var ga=[],Uo=[],xo=0,Xs=Ia[eo];xo<Xs.length;xo+=1){var Xa=Xs[xo],es=Xa.x,al=Xa.y,Ps=_r[0]*es+_r[4]*al+_r[12],ol=_r[1]*es+_r[5]*al+_r[13],sl=_r[2]*es+_r[6]*al+_r[14],Sl=_r[3]*es+_r[7]*al+_r[15],vc=sl+Ni,_l=Sl+Bi,Oc=Ps+Qi,sc=ol+pa,wc=sl+fa,uc=Sl+na,ic=new r((Ps+pi)/_l,(ol+oi)/_l);ic.z=vc/_l,ga.push(ic);var lc=new r(Oc/uc,sc/uc);lc.z=wc/uc,Uo.push(lc)}Nr.push(ga),Gr.push(Uo)}return[Nr,Gr]}(lt,He,Ge,he);return function(Cn,$n,Xn){var _r=1/0;Il(Xn,$n)&&(_r=Ka(Xn,$n[0]));for(var Nr=0;Nr<$n.length;Nr++)for(var Gr=$n[Nr],pi=Cn[Nr],oi=0;oi<Gr.length-1;oi++){var Ni=Gr[oi],Bi=[Ni,Gr[oi+1],pi[oi+1],pi[oi],Ni];wl(Xn,Bi)&&(_r=Math.min(_r,Ka(Xn,Bi)))}return _r!==1/0&&_r}(Rn[0],Rn[1],cn)},p}(hn);function Ls(d,p){return d.x*p.x+d.y*p.y}function Ka(d,p){if(d.length===1){for(var C,N=0,X=p[N++];!C||X.equals(C);)if(!(C=p[N++]))return 1/0;for(;N<p.length;N++){var lt=p[N],Pt=d[0],Bt=C.sub(X),Xt=lt.sub(X),he=Pt.sub(X),Re=Ls(Bt,Bt),Ge=Ls(Bt,Xt),He=Ls(Xt,Xt),cn=Ls(he,Bt),Rn=Ls(he,Xt),Cn=Re*He-Ge*Ge,$n=(He*cn-Ge*Rn)/Cn,Xn=(Re*Rn-Ge*cn)/Cn,_r=X.z*(1-$n-Xn)+C.z*$n+lt.z*Xn;if(isFinite(_r))return _r}return 1/0}for(var Nr=1/0,Gr=0,pi=p;Gr<pi.length;Gr+=1)Nr=Math.min(Nr,pi[Gr].z);return Nr}var Zu=Wn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Yc=Wn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,pf=ru.VectorTileFeature.types,dh=Math.cos(Math.PI/180*37.5),Rf=Math.pow(2,14)/.5,bc=function(p){var C=this;this.zoom=p.zoom,this.overscaling=p.overscaling,this.layers=p.layers,this.layerIds=this.layers.map(function(N){return N.id}),this.index=p.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(N){C.gradients[N.id]={}}),this.layoutVertexArray=new Br,this.layoutVertexArray2=new si,this.indexArray=new Ga,this.programConfigurations=new Ba(p.layers,p.zoom),this.segments=new Ht,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(N){return N.isStateDependent()}).map(function(N){return N.id})};bc.prototype.populate=function(d,p,C){this.hasPattern=Ue("line",this.layers,p);for(var N=this.layers[0].layout.get("line-sort-key"),X=[],lt=0,Pt=d;lt<Pt.length;lt+=1){var Bt=Pt[lt],Xt=Bt.feature,he=Bt.id,Re=Bt.index,Ge=Bt.sourceLayerIndex,He=this.layers[0]._featureFilter.needGeometry,cn=ks(Xt,He);if(this.layers[0]._featureFilter.filter(new br(this.zoom),cn,C)){var Rn=N?N.evaluate(cn,{},C):void 0,Cn={id:he,properties:Xt.properties,type:Xt.type,sourceLayerIndex:Ge,index:Re,geometry:He?cn.geometry:Yo(Xt),patterns:{},sortKey:Rn};X.push(Cn)}}N&&X.sort(function(Ni,Bi){return Ni.sortKey-Bi.sortKey});for(var $n=0,Xn=X;$n<Xn.length;$n+=1){var _r=Xn[$n],Nr=_r.geometry,Gr=_r.index,pi=_r.sourceLayerIndex;if(this.hasPattern){var oi=un("line",this.layers,_r,this.zoom,p);this.patternFeatures.push(oi)}else this.addFeature(_r,Nr,Gr,C,{});p.featureIndex.insert(d[Gr].feature,Nr,Gr,pi,this.index)}},bc.prototype.update=function(d,p,C){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(d,p,this.stateDependentLayers,C)},bc.prototype.addFeatures=function(d,p,C){for(var N=0,X=this.patternFeatures;N<X.length;N+=1){var lt=X[N];this.addFeature(lt,lt.geometry,lt.index,p,C)}},bc.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},bc.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},bc.prototype.upload=function(d){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=d.createVertexBuffer(this.layoutVertexArray2,Yc)),this.layoutVertexBuffer=d.createVertexBuffer(this.layoutVertexArray,Zu),this.indexBuffer=d.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(d),this.uploaded=!0},bc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},bc.prototype.lineFeatureClips=function(d){if(d.properties&&d.properties.hasOwnProperty("mapbox_clip_start")&&d.properties.hasOwnProperty("mapbox_clip_end"))return{start:+d.properties.mapbox_clip_start,end:+d.properties.mapbox_clip_end}},bc.prototype.addFeature=function(d,p,C,N,X){var lt=this.layers[0].layout,Pt=lt.get("line-join").evaluate(d,{}),Bt=lt.get("line-cap"),Xt=lt.get("line-miter-limit"),he=lt.get("line-round-limit");this.lineClips=this.lineFeatureClips(d);for(var Re=0,Ge=p;Re<Ge.length;Re+=1)this.addLine(Ge[Re],d,Pt,Bt,Xt,he);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,d,C,X,N)},bc.prototype.addLine=function(d,p,C,N,X,lt){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var Pt=0;Pt<d.length-1;Pt++)this.totalDistance+=d[Pt].dist(d[Pt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var Bt=pf[p.type]==="Polygon",Xt=d.length;Xt>=2&&d[Xt-1].equals(d[Xt-2]);)Xt--;for(var he=0;he<Xt-1&&d[he].equals(d[he+1]);)he++;if(!(Xt<(Bt?3:2))){C==="bevel"&&(X=1.05);var Re,Ge=this.overscaling<=16?122880/(512*this.overscaling):0,He=this.segments.prepareSegment(10*Xt,this.layoutVertexArray,this.indexArray),cn=void 0,Rn=void 0,Cn=void 0,$n=void 0;this.e1=this.e2=-1,Bt&&($n=d[he].sub(Re=d[Xt-2])._unit()._perp());for(var Xn=he;Xn<Xt;Xn++)if(!(Rn=Xn===Xt-1?Bt?d[he+1]:void 0:d[Xn+1])||!d[Xn].equals(Rn)){$n&&(Cn=$n),Re&&(cn=Re),Re=d[Xn],$n=Rn?Rn.sub(Re)._unit()._perp():Cn;var _r=(Cn=Cn||$n).add($n);_r.x===0&&_r.y===0||_r._unit();var Nr=Cn.x*$n.x+Cn.y*$n.y,Gr=_r.x*$n.x+_r.y*$n.y,pi=Gr!==0?1/Gr:1/0,oi=2*Math.sqrt(2-2*Gr),Ni=Gr<dh&&cn&&Rn,Bi=Cn.x*$n.y-Cn.y*$n.x>0;if(Ni&&Xn>he){var Qi=Re.dist(cn);if(Qi>2*Ge){var pa=Re.sub(Re.sub(cn)._mult(Ge/Qi)._round());this.updateDistance(cn,pa),this.addCurrentVertex(pa,Cn,0,0,He),cn=pa}}var fa=cn&&Rn,na=fa?C:Bt?"butt":N;if(fa&&na==="round"&&(pi<lt?na="miter":pi<=2&&(na="fakeround")),na==="miter"&&pi>X&&(na="bevel"),na==="bevel"&&(pi>2&&(na="flipbevel"),pi<X&&(na="miter")),cn&&this.updateDistance(cn,Re),na==="miter")_r._mult(pi),this.addCurrentVertex(Re,_r,0,0,He);else if(na==="flipbevel"){if(pi>100)_r=$n.mult(-1);else{var eo=pi*Cn.add($n).mag()/Cn.sub($n).mag();_r._perp()._mult(eo*(Bi?-1:1))}this.addCurrentVertex(Re,_r,0,0,He),this.addCurrentVertex(Re,_r.mult(-1),0,0,He)}else if(na==="bevel"||na==="fakeround"){var Ia=-Math.sqrt(pi*pi-1),ga=Bi?Ia:0,Uo=Bi?0:Ia;if(cn&&this.addCurrentVertex(Re,Cn,ga,Uo,He),na==="fakeround")for(var xo=Math.round(180*oi/Math.PI/20),Xs=1;Xs<xo;Xs++){var Xa=Xs/xo;if(Xa!==.5){var es=Xa-.5;Xa+=Xa*es*(Xa-1)*((1.0904+Nr*(Nr*(3.55645-1.43519*Nr)-3.2452))*es*es+(.848013+Nr*(.215638*Nr-1.06021)))}var al=$n.sub(Cn)._mult(Xa)._add(Cn)._unit()._mult(Bi?-1:1);this.addHalfVertex(Re,al.x,al.y,!1,Bi,0,He)}Rn&&this.addCurrentVertex(Re,$n,-ga,-Uo,He)}else if(na==="butt")this.addCurrentVertex(Re,_r,0,0,He);else if(na==="square"){var Ps=cn?1:-1;this.addCurrentVertex(Re,_r,Ps,Ps,He)}else na==="round"&&(cn&&(this.addCurrentVertex(Re,Cn,0,0,He),this.addCurrentVertex(Re,Cn,1,1,He,!0)),Rn&&(this.addCurrentVertex(Re,$n,-1,-1,He,!0),this.addCurrentVertex(Re,$n,0,0,He)));if(Ni&&Xn<Xt-1){var ol=Re.dist(Rn);if(ol>2*Ge){var sl=Re.add(Rn.sub(Re)._mult(Ge/ol)._round());this.updateDistance(Re,sl),this.addCurrentVertex(sl,$n,0,0,He),Re=sl}}}}},bc.prototype.addCurrentVertex=function(d,p,C,N,X,lt){lt===void 0&&(lt=!1);var Pt=p.y*N-p.x,Bt=-p.y-p.x*N;this.addHalfVertex(d,p.x+p.y*C,p.y-p.x*C,lt,!1,C,X),this.addHalfVertex(d,Pt,Bt,lt,!0,-N,X),this.distance>Rf/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(d,p,C,N,X,lt))},bc.prototype.addHalfVertex=function(d,p,C,N,X,lt,Pt){var Bt=.5*(this.lineClips?this.scaledDistance*(Rf-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((d.x<<1)+(N?1:0),(d.y<<1)+(X?1:0),Math.round(63*p)+128,Math.round(63*C)+128,1+(lt===0?0:lt<0?-1:1)|(63&Bt)<<2,Bt>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var Xt=Pt.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Xt),Pt.primitiveLength++),X?this.e2=Xt:this.e1=Xt},bc.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},bc.prototype.updateDistance=function(d,p){this.distance+=d.dist(p),this.updateScaledDistance()},Wi("LineBucket",bc,{omit:["layers","patternFeatures"]});var Kf=new vn({"line-cap":new ce(ue.layout_line["line-cap"]),"line-join":new Fe(ue.layout_line["line-join"]),"line-miter-limit":new ce(ue.layout_line["line-miter-limit"]),"line-round-limit":new ce(ue.layout_line["line-round-limit"]),"line-sort-key":new Fe(ue.layout_line["line-sort-key"])}),gf={paint:new vn({"line-opacity":new Fe(ue.paint_line["line-opacity"]),"line-color":new Fe(ue.paint_line["line-color"]),"line-translate":new ce(ue.paint_line["line-translate"]),"line-translate-anchor":new ce(ue.paint_line["line-translate-anchor"]),"line-width":new Fe(ue.paint_line["line-width"]),"line-gap-width":new Fe(ue.paint_line["line-gap-width"]),"line-offset":new Fe(ue.paint_line["line-offset"]),"line-blur":new Fe(ue.paint_line["line-blur"]),"line-dasharray":new rn(ue.paint_line["line-dasharray"]),"line-pattern":new Ke(ue.paint_line["line-pattern"]),"line-gradient":new Je(ue.paint_line["line-gradient"])}),layout:Kf},Xf=new(function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.possiblyEvaluate=function(C,N){return N=new br(Math.floor(N.zoom),{now:N.now,fadeDuration:N.fadeDuration,zoomHistory:N.zoomHistory,transition:N.transition}),d.prototype.possiblyEvaluate.call(this,C,N)},p.prototype.evaluate=function(C,N,X,lt){return N=v({},N,{zoom:Math.floor(N.zoom)}),d.prototype.evaluate.call(this,C,N,X,lt)},p}(Fe))(gf.paint.properties["line-width"].specification);Xf.useIntegerZoom=!0;var jt=function(d){function p(C){d.call(this,C,gf),this.gradientVersion=0}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._handleSpecialPaintPropertyUpdate=function(C){C==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Co,this.gradientVersion=(this.gradientVersion+1)%i)},p.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},p.prototype.recalculate=function(C,N){d.prototype.recalculate.call(this,C,N),this.paint._values["line-floorwidth"]=Xf.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,C)},p.prototype.createBucket=function(C){return new bc(C)},p.prototype.queryRadius=function(C){var N=C,X=yt(fc("line-width",this,N),fc("line-gap-width",this,N)),lt=fc("line-offset",this,N);return X/2+Math.abs(lt)+Su(this.paint.get("line-translate"))},p.prototype.queryIntersectsFeature=function(C,N,X,lt,Pt,Bt,Xt){var he=Ac(C,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),Bt.angle,Xt),Re=Xt/2*yt(this.paint.get("line-width").evaluate(N,X),this.paint.get("line-gap-width").evaluate(N,X)),Ge=this.paint.get("line-offset").evaluate(N,X);return Ge&&(lt=function(He,cn){for(var Rn=[],Cn=new r(0,0),$n=0;$n<He.length;$n++){for(var Xn=He[$n],_r=[],Nr=0;Nr<Xn.length;Nr++){var Gr=Xn[Nr],pi=Xn[Nr+1],oi=Nr===0?Cn:Gr.sub(Xn[Nr-1])._unit()._perp(),Ni=Nr===Xn.length-1?Cn:pi.sub(Gr)._unit()._perp(),Bi=oi._add(Ni)._unit();Bi._mult(1/(Bi.x*Ni.x+Bi.y*Ni.y)),_r.push(Bi._mult(cn)._add(Gr))}Rn.push(_r)}return Rn}(lt,Ge*Xt)),function(He,cn,Rn){for(var Cn=0;Cn<cn.length;Cn++){var $n=cn[Cn];if(He.length>=3){for(var Xn=0;Xn<$n.length;Xn++)if(Tc(He,$n[Xn]))return!0}if(tc(He,$n,Rn))return!0}return!1}(he,lt,Re)},p.prototype.isTileClipped=function(){return!0},p}(hn);function yt(d,p){return p>0?p+2*d:d}var Q=Wn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),xt=Wn([{name:"a_projected_pos",components:3,type:"Float32"}],4),wt=(Wn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Wn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),ae=(Wn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Wn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),ke=Wn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function gn(d,p,C){return d.sections.forEach(function(N){N.text=function(X,lt,Pt){var Bt=lt.layout.get("text-transform").evaluate(Pt,{});return Bt==="uppercase"?X=X.toLocaleUpperCase():Bt==="lowercase"&&(X=X.toLocaleLowerCase()),ui.applyArabicShaping&&(X=ui.applyArabicShaping(X)),X}(N.text,p,C)}),d}Wn([{name:"triangle",components:3,type:"Uint16"}]),Wn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Wn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Wn([{type:"Float32",name:"offsetX"}]),Wn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var pn={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"},On=function(p,C,N,X,lt){var Pt,Bt,Xt=8*lt-X-1,he=(1<<Xt)-1,Re=he>>1,Ge=-7,He=N?lt-1:0,cn=N?-1:1,Rn=p[C+He];for(He+=cn,Pt=Rn&(1<<-Ge)-1,Rn>>=-Ge,Ge+=Xt;Ge>0;Pt=256*Pt+p[C+He],He+=cn,Ge-=8);for(Bt=Pt&(1<<-Ge)-1,Pt>>=-Ge,Ge+=X;Ge>0;Bt=256*Bt+p[C+He],He+=cn,Ge-=8);if(Pt===0)Pt=1-Re;else{if(Pt===he)return Bt?NaN:1/0*(Rn?-1:1);Bt+=Math.pow(2,X),Pt-=Re}return(Rn?-1:1)*Bt*Math.pow(2,Pt-X)},ne=function(p,C,N,X,lt,Pt){var Bt,Xt,he,Re=8*Pt-lt-1,Ge=(1<<Re)-1,He=Ge>>1,cn=lt===23?Math.pow(2,-24)-Math.pow(2,-77):0,Rn=X?0:Pt-1,Cn=X?1:-1,$n=C<0||C===0&&1/C<0?1:0;for(C=Math.abs(C),isNaN(C)||C===1/0?(Xt=isNaN(C)?1:0,Bt=Ge):(Bt=Math.floor(Math.log(C)/Math.LN2),C*(he=Math.pow(2,-Bt))<1&&(Bt--,he*=2),(C+=Bt+He>=1?cn/he:cn*Math.pow(2,1-He))*he>=2&&(Bt++,he/=2),Bt+He>=Ge?(Xt=0,Bt=Ge):Bt+He>=1?(Xt=(C*he-1)*Math.pow(2,lt),Bt+=He):(Xt=C*Math.pow(2,He-1)*Math.pow(2,lt),Bt=0));lt>=8;p[N+Rn]=255&Xt,Rn+=Cn,Xt/=256,lt-=8);for(Bt=Bt<<lt|Xt,Re+=lt;Re>0;p[N+Rn]=255&Bt,Rn+=Cn,Bt/=256,Re-=8);p[N+Rn-Cn]|=128*$n},Me=Ze;function Ze(d){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(d)?d:new Uint8Array(d||0),this.pos=0,this.type=0,this.length=this.buf.length}Ze.Varint=0,Ze.Fixed64=1,Ze.Bytes=2,Ze.Fixed32=5;var In=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function ir(d){return d.type===Ze.Bytes?d.readVarint()+d.pos:d.pos+1}function or(d,p,C){return C?4294967296*p+(d>>>0):4294967296*(p>>>0)+(d>>>0)}function sr(d,p,C){var N=p<=16383?1:p<=2097151?2:p<=268435455?3:Math.floor(Math.log(p)/(7*Math.LN2));C.realloc(N);for(var X=C.pos-1;X>=d;X--)C.buf[X+N]=C.buf[X]}function wr(d,p){for(var C=0;C<d.length;C++)p.writeVarint(d[C])}function ni(d,p){for(var C=0;C<d.length;C++)p.writeSVarint(d[C])}function Yr(d,p){for(var C=0;C<d.length;C++)p.writeFloat(d[C])}function ei(d,p){for(var C=0;C<d.length;C++)p.writeDouble(d[C])}function hi(d,p){for(var C=0;C<d.length;C++)p.writeBoolean(d[C])}function Ai(d,p){for(var C=0;C<d.length;C++)p.writeFixed32(d[C])}function di(d,p){for(var C=0;C<d.length;C++)p.writeSFixed32(d[C])}function ai(d,p){for(var C=0;C<d.length;C++)p.writeFixed64(d[C])}function Ir(d,p){for(var C=0;C<d.length;C++)p.writeSFixed64(d[C])}function Mr(d,p){return(d[p]|d[p+1]<<8|d[p+2]<<16)+16777216*d[p+3]}function vi(d,p,C){d[C]=p,d[C+1]=p>>>8,d[C+2]=p>>>16,d[C+3]=p>>>24}function Vi(d,p){return(d[p]|d[p+1]<<8|d[p+2]<<16)+(d[p+3]<<24)}function $r(d,p,C){d===1&&C.readMessage(ra,p)}function ra(d,p,C){if(d===3){var N=C.readMessage(Ci,{}),X=N.width,lt=N.height,Pt=N.left,Bt=N.top,Xt=N.advance;p.push({id:N.id,bitmap:new Kl({width:X+6,height:lt+6},N.bitmap),metrics:{width:X,height:lt,left:Pt,top:Bt,advance:Xt}})}}function Ci(d,p,C){d===1?p.id=C.readVarint():d===2?p.bitmap=C.readBytes():d===3?p.width=C.readVarint():d===4?p.height=C.readVarint():d===5?p.left=C.readSVarint():d===6?p.top=C.readSVarint():d===7&&(p.advance=C.readVarint())}function Ei(d){for(var p=0,C=0,N=0,X=d;N<X.length;N+=1){var lt=X[N];p+=lt.w*lt.h,C=Math.max(C,lt.w)}d.sort(function(Cn,$n){return $n.h-Cn.h});for(var Pt=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(p/.95)),C),h:1/0}],Bt=0,Xt=0,he=0,Re=d;he<Re.length;he+=1)for(var Ge=Re[he],He=Pt.length-1;He>=0;He--){var cn=Pt[He];if(!(Ge.w>cn.w||Ge.h>cn.h)){if(Ge.x=cn.x,Ge.y=cn.y,Xt=Math.max(Xt,Ge.y+Ge.h),Bt=Math.max(Bt,Ge.x+Ge.w),Ge.w===cn.w&&Ge.h===cn.h){var Rn=Pt.pop();He<Pt.length&&(Pt[He]=Rn)}else Ge.h===cn.h?(cn.x+=Ge.w,cn.w-=Ge.w):Ge.w===cn.w?(cn.y+=Ge.h,cn.h-=Ge.h):(Pt.push({x:cn.x+Ge.w,y:cn.y,w:cn.w-Ge.w,h:Ge.h}),cn.y+=Ge.h,cn.h-=Ge.h);break}}return{w:Bt,h:Xt,fill:p/(Bt*Xt)||0}}Ze.prototype={destroy:function(){this.buf=null},readFields:function(p,C,N){for(N=N||this.length;this.pos<N;){var X=this.readVarint(),lt=X>>3,Pt=this.pos;this.type=7&X,p(lt,C,this),this.pos===Pt&&this.skip(X)}return C},readMessage:function(p,C){return this.readFields(p,C,this.readVarint()+this.pos)},readFixed32:function(){var p=Mr(this.buf,this.pos);return this.pos+=4,p},readSFixed32:function(){var p=Vi(this.buf,this.pos);return this.pos+=4,p},readFixed64:function(){var p=Mr(this.buf,this.pos)+4294967296*Mr(this.buf,this.pos+4);return this.pos+=8,p},readSFixed64:function(){var p=Mr(this.buf,this.pos)+4294967296*Vi(this.buf,this.pos+4);return this.pos+=8,p},readFloat:function(){var p=On(this.buf,this.pos,!0,23,4);return this.pos+=4,p},readDouble:function(){var p=On(this.buf,this.pos,!0,52,8);return this.pos+=8,p},readVarint:function(p){var C,N,X=this.buf;return C=127&(N=X[this.pos++]),N<128?C:(C|=(127&(N=X[this.pos++]))<<7,N<128?C:(C|=(127&(N=X[this.pos++]))<<14,N<128?C:(C|=(127&(N=X[this.pos++]))<<21,N<128?C:function(lt,Pt,Bt){var Xt,he,Re=Bt.buf;if(Xt=(112&(he=Re[Bt.pos++]))>>4,he<128||(Xt|=(127&(he=Re[Bt.pos++]))<<3,he<128)||(Xt|=(127&(he=Re[Bt.pos++]))<<10,he<128)||(Xt|=(127&(he=Re[Bt.pos++]))<<17,he<128)||(Xt|=(127&(he=Re[Bt.pos++]))<<24,he<128)||(Xt|=(1&(he=Re[Bt.pos++]))<<31,he<128))return or(lt,Xt,Pt);throw new Error("Expected varint not more than 10 bytes")}(C|=(15&(N=X[this.pos]))<<28,p,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var p=this.readVarint();return p%2==1?(p+1)/-2:p/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var p=this.readVarint()+this.pos,C=this.pos;return this.pos=p,p-C>=12&&In?function(N,X,lt){return In.decode(N.subarray(X,lt))}(this.buf,C,p):function(N,X,lt){for(var Pt="",Bt=X;Bt<lt;){var Xt,he,Re,Ge=N[Bt],He=null,cn=Ge>239?4:Ge>223?3:Ge>191?2:1;if(Bt+cn>lt)break;cn===1?Ge<128&&(He=Ge):cn===2?(192&(Xt=N[Bt+1]))==128&&(He=(31&Ge)<<6|63&Xt)<=127&&(He=null):cn===3?(he=N[Bt+2],(192&(Xt=N[Bt+1]))==128&&(192&he)==128&&((He=(15&Ge)<<12|(63&Xt)<<6|63&he)<=2047||He>=55296&&He<=57343)&&(He=null)):cn===4&&(he=N[Bt+2],Re=N[Bt+3],(192&(Xt=N[Bt+1]))==128&&(192&he)==128&&(192&Re)==128&&((He=(15&Ge)<<18|(63&Xt)<<12|(63&he)<<6|63&Re)<=65535||He>=1114112)&&(He=null)),He===null?(He=65533,cn=1):He>65535&&(He-=65536,Pt+=String.fromCharCode(He>>>10&1023|55296),He=56320|1023&He),Pt+=String.fromCharCode(He),Bt+=cn}return Pt}(this.buf,C,p)},readBytes:function(){var p=this.readVarint()+this.pos,C=this.buf.subarray(this.pos,p);return this.pos=p,C},readPackedVarint:function(p,C){if(this.type!==Ze.Bytes)return p.push(this.readVarint(C));var N=ir(this);for(p=p||[];this.pos<N;)p.push(this.readVarint(C));return p},readPackedSVarint:function(p){if(this.type!==Ze.Bytes)return p.push(this.readSVarint());var C=ir(this);for(p=p||[];this.pos<C;)p.push(this.readSVarint());return p},readPackedBoolean:function(p){if(this.type!==Ze.Bytes)return p.push(this.readBoolean());var C=ir(this);for(p=p||[];this.pos<C;)p.push(this.readBoolean());return p},readPackedFloat:function(p){if(this.type!==Ze.Bytes)return p.push(this.readFloat());var C=ir(this);for(p=p||[];this.pos<C;)p.push(this.readFloat());return p},readPackedDouble:function(p){if(this.type!==Ze.Bytes)return p.push(this.readDouble());var C=ir(this);for(p=p||[];this.pos<C;)p.push(this.readDouble());return p},readPackedFixed32:function(p){if(this.type!==Ze.Bytes)return p.push(this.readFixed32());var C=ir(this);for(p=p||[];this.pos<C;)p.push(this.readFixed32());return p},readPackedSFixed32:function(p){if(this.type!==Ze.Bytes)return p.push(this.readSFixed32());var C=ir(this);for(p=p||[];this.pos<C;)p.push(this.readSFixed32());return p},readPackedFixed64:function(p){if(this.type!==Ze.Bytes)return p.push(this.readFixed64());var C=ir(this);for(p=p||[];this.pos<C;)p.push(this.readFixed64());return p},readPackedSFixed64:function(p){if(this.type!==Ze.Bytes)return p.push(this.readSFixed64());var C=ir(this);for(p=p||[];this.pos<C;)p.push(this.readSFixed64());return p},skip:function(p){var C=7&p;if(C===Ze.Varint)for(;this.buf[this.pos++]>127;);else if(C===Ze.Bytes)this.pos=this.readVarint()+this.pos;else if(C===Ze.Fixed32)this.pos+=4;else{if(C!==Ze.Fixed64)throw new Error("Unimplemented type: "+C);this.pos+=8}},writeTag:function(p,C){this.writeVarint(p<<3|C)},realloc:function(p){for(var C=this.length||16;C<this.pos+p;)C*=2;if(C!==this.length){var N=new Uint8Array(C);N.set(this.buf),this.buf=N,this.length=C}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(p){this.realloc(4),vi(this.buf,p,this.pos),this.pos+=4},writeSFixed32:function(p){this.realloc(4),vi(this.buf,p,this.pos),this.pos+=4},writeFixed64:function(p){this.realloc(8),vi(this.buf,-1&p,this.pos),vi(this.buf,Math.floor(p*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(p){this.realloc(8),vi(this.buf,-1&p,this.pos),vi(this.buf,Math.floor(p*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(p){(p=+p||0)>268435455||p<0?function(C,N){var X,lt;if(C>=0?(X=C%4294967296|0,lt=C/4294967296|0):(lt=~(-C/4294967296),4294967295^(X=~(-C%4294967296))?X=X+1|0:(X=0,lt=lt+1|0)),C>=18446744073709552e3||C<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");N.realloc(10),function(Pt,Bt,Xt){Xt.buf[Xt.pos++]=127&Pt|128,Pt>>>=7,Xt.buf[Xt.pos++]=127&Pt|128,Pt>>>=7,Xt.buf[Xt.pos++]=127&Pt|128,Pt>>>=7,Xt.buf[Xt.pos++]=127&Pt|128,Xt.buf[Xt.pos]=127&(Pt>>>=7)}(X,0,N),function(Pt,Bt){var Xt=(7&Pt)<<4;Bt.buf[Bt.pos++]|=Xt|((Pt>>>=3)?128:0),Pt&&(Bt.buf[Bt.pos++]=127&Pt|((Pt>>>=7)?128:0),Pt&&(Bt.buf[Bt.pos++]=127&Pt|((Pt>>>=7)?128:0),Pt&&(Bt.buf[Bt.pos++]=127&Pt|((Pt>>>=7)?128:0),Pt&&(Bt.buf[Bt.pos++]=127&Pt|((Pt>>>=7)?128:0),Pt&&(Bt.buf[Bt.pos++]=127&Pt)))))}(lt,N)}(p,this):(this.realloc(4),this.buf[this.pos++]=127&p|(p>127?128:0),p<=127||(this.buf[this.pos++]=127&(p>>>=7)|(p>127?128:0),p<=127||(this.buf[this.pos++]=127&(p>>>=7)|(p>127?128:0),p<=127||(this.buf[this.pos++]=p>>>7&127))))},writeSVarint:function(p){this.writeVarint(p<0?2*-p-1:2*p)},writeBoolean:function(p){this.writeVarint(Boolean(p))},writeString:function(p){p=String(p),this.realloc(4*p.length),this.pos++;var C=this.pos;this.pos=function(X,lt,Pt){for(var Bt,Xt,he=0;he<lt.length;he++){if((Bt=lt.charCodeAt(he))>55295&&Bt<57344){if(!Xt){Bt>56319||he+1===lt.length?(X[Pt++]=239,X[Pt++]=191,X[Pt++]=189):Xt=Bt;continue}if(Bt<56320){X[Pt++]=239,X[Pt++]=191,X[Pt++]=189,Xt=Bt;continue}Bt=Xt-55296<<10|Bt-56320|65536,Xt=null}else Xt&&(X[Pt++]=239,X[Pt++]=191,X[Pt++]=189,Xt=null);Bt<128?X[Pt++]=Bt:(Bt<2048?X[Pt++]=Bt>>6|192:(Bt<65536?X[Pt++]=Bt>>12|224:(X[Pt++]=Bt>>18|240,X[Pt++]=Bt>>12&63|128),X[Pt++]=Bt>>6&63|128),X[Pt++]=63&Bt|128)}return Pt}(this.buf,p,this.pos);var N=this.pos-C;N>=128&&sr(C,N,this),this.pos=C-1,this.writeVarint(N),this.pos+=N},writeFloat:function(p){this.realloc(4),ne(this.buf,p,this.pos,!0,23,4),this.pos+=4},writeDouble:function(p){this.realloc(8),ne(this.buf,p,this.pos,!0,52,8),this.pos+=8},writeBytes:function(p){var C=p.length;this.writeVarint(C),this.realloc(C);for(var N=0;N<C;N++)this.buf[this.pos++]=p[N]},writeRawMessage:function(p,C){this.pos++;var N=this.pos;p(C,this);var X=this.pos-N;X>=128&&sr(N,X,this),this.pos=N-1,this.writeVarint(X),this.pos+=X},writeMessage:function(p,C,N){this.writeTag(p,Ze.Bytes),this.writeRawMessage(C,N)},writePackedVarint:function(p,C){C.length&&this.writeMessage(p,wr,C)},writePackedSVarint:function(p,C){C.length&&this.writeMessage(p,ni,C)},writePackedBoolean:function(p,C){C.length&&this.writeMessage(p,hi,C)},writePackedFloat:function(p,C){C.length&&this.writeMessage(p,Yr,C)},writePackedDouble:function(p,C){C.length&&this.writeMessage(p,ei,C)},writePackedFixed32:function(p,C){C.length&&this.writeMessage(p,Ai,C)},writePackedSFixed32:function(p,C){C.length&&this.writeMessage(p,di,C)},writePackedFixed64:function(p,C){C.length&&this.writeMessage(p,ai,C)},writePackedSFixed64:function(p,C){C.length&&this.writeMessage(p,Ir,C)},writeBytesField:function(p,C){this.writeTag(p,Ze.Bytes),this.writeBytes(C)},writeFixed32Field:function(p,C){this.writeTag(p,Ze.Fixed32),this.writeFixed32(C)},writeSFixed32Field:function(p,C){this.writeTag(p,Ze.Fixed32),this.writeSFixed32(C)},writeFixed64Field:function(p,C){this.writeTag(p,Ze.Fixed64),this.writeFixed64(C)},writeSFixed64Field:function(p,C){this.writeTag(p,Ze.Fixed64),this.writeSFixed64(C)},writeVarintField:function(p,C){this.writeTag(p,Ze.Varint),this.writeVarint(C)},writeSVarintField:function(p,C){this.writeTag(p,Ze.Varint),this.writeSVarint(C)},writeStringField:function(p,C){this.writeTag(p,Ze.Bytes),this.writeString(C)},writeFloatField:function(p,C){this.writeTag(p,Ze.Fixed32),this.writeFloat(C)},writeDoubleField:function(p,C){this.writeTag(p,Ze.Fixed64),this.writeDouble(C)},writeBooleanField:function(p,C){this.writeVarintField(p,Boolean(C))}};var xi=function(p,C){var N=C.pixelRatio,X=C.version,lt=C.stretchX,Pt=C.stretchY,Bt=C.content;this.paddedRect=p,this.pixelRatio=N,this.stretchX=lt,this.stretchY=Pt,this.content=Bt,this.version=X},Oi={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Oi.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Oi.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Oi.tlbr.get=function(){return this.tl.concat(this.br)},Oi.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(xi.prototype,Oi);var oa=function(p,C){var N={},X={};this.haveRenderCallbacks=[];var lt=[];this.addImages(p,N,lt),this.addImages(C,X,lt);var Pt=Ei(lt),Bt=new Yu({width:Pt.w||1,height:Pt.h||1});for(var Xt in p){var he=p[Xt],Re=N[Xt].paddedRect;Yu.copy(he.data,Bt,{x:0,y:0},{x:Re.x+1,y:Re.y+1},he.data)}for(var Ge in C){var He=C[Ge],cn=X[Ge].paddedRect,Rn=cn.x+1,Cn=cn.y+1,$n=He.data.width,Xn=He.data.height;Yu.copy(He.data,Bt,{x:0,y:0},{x:Rn,y:Cn},He.data),Yu.copy(He.data,Bt,{x:0,y:Xn-1},{x:Rn,y:Cn-1},{width:$n,height:1}),Yu.copy(He.data,Bt,{x:0,y:0},{x:Rn,y:Cn+Xn},{width:$n,height:1}),Yu.copy(He.data,Bt,{x:$n-1,y:0},{x:Rn-1,y:Cn},{width:1,height:Xn}),Yu.copy(He.data,Bt,{x:0,y:0},{x:Rn+$n,y:Cn},{width:1,height:Xn})}this.image=Bt,this.iconPositions=N,this.patternPositions=X};oa.prototype.addImages=function(d,p,C){for(var N in d){var X=d[N],lt={x:0,y:0,w:X.data.width+2,h:X.data.height+2};C.push(lt),p[N]=new xi(lt,X),X.hasRenderCallback&&this.haveRenderCallbacks.push(N)}},oa.prototype.patchUpdatedImages=function(d,p){for(var C in d.dispatchRenderCallbacks(this.haveRenderCallbacks),d.updatedImages)this.patchUpdatedImage(this.iconPositions[C],d.getImage(C),p),this.patchUpdatedImage(this.patternPositions[C],d.getImage(C),p)},oa.prototype.patchUpdatedImage=function(d,p,C){if(d&&p&&d.version!==p.version){d.version=p.version;var N=d.tl;C.update(p.data,void 0,{x:N[0],y:N[1]})}},Wi("ImagePosition",xi),Wi("ImageAtlas",oa);var Sa={horizontal:1,vertical:2,horizontalOnly:3},Di=function(){this.scale=1,this.fontStack="",this.imageName=null};Di.forText=function(d,p){var C=new Di;return C.scale=d||1,C.fontStack=p,C},Di.forImage=function(d){var p=new Di;return p.imageName=d,p};var _i=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function mi(d,p,C,N,X,lt,Pt,Bt,Xt,he,Re,Ge,He,cn,Rn,Cn){var $n,Xn=_i.fromFeature(d,X);Ge===Sa.vertical&&Xn.verticalizePunctuation();var _r=ui.processBidirectionalText,Nr=ui.processStyledBidirectionalText;if(_r&&Xn.sections.length===1){$n=[];for(var Gr=0,pi=_r(Xn.toString(),Ms(Xn,he,lt,p,N,cn,Rn));Gr<pi.length;Gr+=1){var oi=pi[Gr],Ni=new _i;Ni.text=oi,Ni.sections=Xn.sections;for(var Bi=0;Bi<oi.length;Bi++)Ni.sectionIndex.push(0);$n.push(Ni)}}else if(Nr){$n=[];for(var Qi=0,pa=Nr(Xn.text,Xn.sectionIndex,Ms(Xn,he,lt,p,N,cn,Rn));Qi<pa.length;Qi+=1){var fa=pa[Qi],na=new _i;na.text=fa[0],na.sectionIndex=fa[1],na.sections=Xn.sections,$n.push(na)}}else $n=function(ga,Uo){for(var xo=[],Xs=ga.text,Xa=0,es=0,al=Uo;es<al.length;es+=1){var Ps=al[es];xo.push(ga.substring(Xa,Ps)),Xa=Ps}return Xa<Xs.length&&xo.push(ga.substring(Xa,Xs.length)),xo}(Xn,Ms(Xn,he,lt,p,N,cn,Rn));var eo=[],Ia={positionedLines:eo,text:Xn.toString(),top:Re[1],bottom:Re[1],left:Re[0],right:Re[0],writingMode:Ge,iconsInText:!1,verticalizable:!1};return function(ga,Uo,xo,Xs,Xa,es,al,Ps,ol,sl,Sl,vc){for(var _l=0,Oc=-17,sc=0,wc=0,uc=Ps==="right"?1:Ps==="left"?0:.5,ic=0,lc=0,ys=Xa;lc<ys.length;lc+=1){var ns=ys[lc];ns.trim();var hu=ns.getMaxScale(),Mu=24*(hu-1),pc={positionedGlyphs:[],lineOffset:0};ga.positionedLines[ic]=pc;var Ru=pc.positionedGlyphs,ul=0;if(ns.length()){for(var _c=0;_c<ns.length();_c++){var hs=ns.getSection(_c),Nf=ns.getSectionIndex(_c),sf=ns.getCharCode(_c),yf=0,Kc=null,Mc=null,Af=null,Cf=24,Ff=!(ol===Sa.horizontal||!Sl&&!Iu(sf)||Sl&&(za[sf]||(ah=sf,Mi.Arabic(ah)||Mi["Arabic Supplement"](ah)||Mi["Arabic Extended-A"](ah)||Mi["Arabic Presentation Forms-A"](ah)||Mi["Arabic Presentation Forms-B"](ah))));if(hs.imageName){var mh=Xs[hs.imageName];if(!mh)continue;Af=hs.imageName,ga.iconsInText=ga.iconsInText||!0,Mc=mh.paddedRect;var Mf=mh.displaySize;hs.scale=24*hs.scale/vc,yf=Mu+(24-Mf[1]*hs.scale),Cf=(Kc={width:Mf[0],height:Mf[1],left:1,top:-3,advance:Ff?Mf[1]:Mf[0]}).advance;var yh=Ff?Mf[0]*hs.scale-24*hu:Mf[1]*hs.scale-24*hu;yh>0&&yh>ul&&(ul=yh)}else{var zf=xo[hs.fontStack],ih=zf&&zf[sf];if(ih&&ih.rect)Mc=ih.rect,Kc=ih.metrics;else{var Nh=Uo[hs.fontStack],Oh=Nh&&Nh[sf];if(!Oh)continue;Kc=Oh.metrics}yf=24*(hu-hs.scale)}Ff?(ga.verticalizable=!0,Ru.push({glyph:sf,imageName:Af,x:_l,y:Oc+yf,vertical:Ff,scale:hs.scale,fontStack:hs.fontStack,sectionIndex:Nf,metrics:Kc,rect:Mc}),_l+=Cf*hs.scale+sl):(Ru.push({glyph:sf,imageName:Af,x:_l,y:Oc+yf,vertical:Ff,scale:hs.scale,fontStack:hs.fontStack,sectionIndex:Nf,metrics:Kc,rect:Mc}),_l+=Kc.advance*hs.scale+sl)}Ru.length!==0&&(sc=Math.max(_l-sl,sc),Xl(Ru,0,Ru.length-1,uc,ul)),_l=0;var Fh=es*hu+ul;pc.lineOffset=Math.max(ul,Mu),Oc+=Fh,wc=Math.max(Fh,wc),++ic}else Oc+=es,++ic}var ah,xh=Oc- -17,zh=bl(al),oh=zh.horizontalAlign,Uf=zh.verticalAlign;(function(Jf,Uh,wh,sh,Ih,bh,uh,Lh,Rh){var Eh,Sh=(Uh-wh)*Ih;Eh=bh!==uh?-Lh*sh- -17:(-sh*Rh+.5)*uh;for(var lh=0,_h=Jf;lh<_h.length;lh+=1)for(var ch=0,Of=_h[lh].positionedGlyphs;ch<Of.length;ch+=1){var Mh=Of[ch];Mh.x+=Sh,Mh.y+=Eh}})(ga.positionedLines,uc,oh,Uf,sc,wc,es,xh,Xa.length),ga.top+=-Uf*xh,ga.bottom=ga.top+xh,ga.left+=-oh*sc,ga.right=ga.left+sc}(Ia,p,C,N,$n,Pt,Bt,Xt,Ge,he,He,Cn),!function(ga){for(var Uo=0,xo=ga;Uo<xo.length;Uo+=1)if(xo[Uo].positionedGlyphs.length!==0)return!1;return!0}(eo)&&Ia}_i.fromFeature=function(d,p){for(var C=new _i,N=0;N<d.sections.length;N++){var X=d.sections[N];X.image?C.addImageSection(X):C.addTextSection(X,p)}return C},_i.prototype.length=function(){return this.text.length},_i.prototype.getSection=function(d){return this.sections[this.sectionIndex[d]]},_i.prototype.getSectionIndex=function(d){return this.sectionIndex[d]},_i.prototype.getCharCode=function(d){return this.text.charCodeAt(d)},_i.prototype.verticalizePunctuation=function(){this.text=function(d){for(var p="",C=0;C<d.length;C++){var N=d.charCodeAt(C+1)||null,X=d.charCodeAt(C-1)||null;p+=N&&Lu(N)&&!pn[d[C+1]]||X&&Lu(X)&&!pn[d[C-1]]||!pn[d[C]]?d[C]:pn[d[C]]}return p}(this.text)},_i.prototype.trim=function(){for(var d=0,p=0;p<this.text.length&&za[this.text.charCodeAt(p)];p++)d++;for(var C=this.text.length,N=this.text.length-1;N>=0&&N>=d&&za[this.text.charCodeAt(N)];N--)C--;this.text=this.text.substring(d,C),this.sectionIndex=this.sectionIndex.slice(d,C)},_i.prototype.substring=function(d,p){var C=new _i;return C.text=this.text.substring(d,p),C.sectionIndex=this.sectionIndex.slice(d,p),C.sections=this.sections,C},_i.prototype.toString=function(){return this.text},_i.prototype.getMaxScale=function(){var d=this;return this.sectionIndex.reduce(function(p,C){return Math.max(p,d.sections[C].scale)},0)},_i.prototype.addTextSection=function(d,p){this.text+=d.text,this.sections.push(Di.forText(d.scale,d.fontStack||p));for(var C=this.sections.length-1,N=0;N<d.text.length;++N)this.sectionIndex.push(C)},_i.prototype.addImageSection=function(d){var p=d.image?d.image.name:"";if(p.length!==0){var C=this.getNextImageSectionCharCode();C?(this.text+=String.fromCharCode(C),this.sections.push(Di.forImage(p)),this.sectionIndex.push(this.sections.length-1)):O("Reached maximum number of images 6401")}else O("Can't add FormattedSection with an empty image.")},_i.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var za={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},ia={};function Ki(d,p,C,N,X,lt){if(p.imageName){var Pt=N[p.imageName];return Pt?Pt.displaySize[0]*p.scale*24/lt+X:0}var Bt=C[p.fontStack],Xt=Bt&&Bt[d];return Xt?Xt.metrics.advance*p.scale+X:0}function Oo(d,p,C,N){var X=Math.pow(d-p,2);return N?d<p?X/2:2*X:X+Math.abs(C)*C}function so(d,p,C){var N=0;return d===10&&(N-=1e4),C&&(N+=150),d!==40&&d!==65288||(N+=50),p!==41&&p!==65289||(N+=50),N}function Do(d,p,C,N,X,lt){for(var Pt=null,Bt=Oo(p,C,X,lt),Xt=0,he=N;Xt<he.length;Xt+=1){var Re=he[Xt],Ge=Oo(p-Re.x,C,X,lt)+Re.badness;Ge<=Bt&&(Pt=Re,Bt=Ge)}return{index:d,x:p,priorBreak:Pt,badness:Bt}}function Ms(d,p,C,N,X,lt,Pt){if(lt!=="point")return[];if(!d)return[];for(var Bt,Xt=[],he=function($n,Xn,_r,Nr,Gr,pi){for(var oi=0,Ni=0;Ni<$n.length();Ni++){var Bi=$n.getSection(Ni);oi+=Ki($n.getCharCode(Ni),Bi,Nr,Gr,Xn,pi)}return oi/Math.max(1,Math.ceil(oi/_r))}(d,p,C,N,X,Pt),Re=d.text.indexOf("\u200B")>=0,Ge=0,He=0;He<d.length();He++){var cn=d.getSection(He),Rn=d.getCharCode(He);if(za[Rn]||(Ge+=Ki(Rn,cn,N,X,p,Pt)),He<d.length()-1){var Cn=!((Bt=Rn)<11904||!(Mi["Bopomofo Extended"](Bt)||Mi.Bopomofo(Bt)||Mi["CJK Compatibility Forms"](Bt)||Mi["CJK Compatibility Ideographs"](Bt)||Mi["CJK Compatibility"](Bt)||Mi["CJK Radicals Supplement"](Bt)||Mi["CJK Strokes"](Bt)||Mi["CJK Symbols and Punctuation"](Bt)||Mi["CJK Unified Ideographs Extension A"](Bt)||Mi["CJK Unified Ideographs"](Bt)||Mi["Enclosed CJK Letters and Months"](Bt)||Mi["Halfwidth and Fullwidth Forms"](Bt)||Mi.Hiragana(Bt)||Mi["Ideographic Description Characters"](Bt)||Mi["Kangxi Radicals"](Bt)||Mi["Katakana Phonetic Extensions"](Bt)||Mi.Katakana(Bt)||Mi["Vertical Forms"](Bt)||Mi["Yi Radicals"](Bt)||Mi["Yi Syllables"](Bt)));(ia[Rn]||Cn||cn.imageName)&&Xt.push(Do(He+1,Ge,he,Xt,so(Rn,d.getCharCode(He+1),Cn&&Re),!1))}}return function $n(Xn){return Xn?$n(Xn.priorBreak).concat(Xn.index):[]}(Do(d.length(),Ge,he,Xt,0,!0))}function bl(d){var p=.5,C=.5;switch(d){case"right":case"top-right":case"bottom-right":p=1;break;case"left":case"top-left":case"bottom-left":p=0}switch(d){case"bottom":case"bottom-right":case"bottom-left":C=1;break;case"top":case"top-right":case"top-left":C=0}return{horizontalAlign:p,verticalAlign:C}}function Xl(d,p,C,N,X){if(N||X)for(var lt=d[C],Pt=(d[C].x+lt.metrics.advance*lt.scale)*N,Bt=p;Bt<=C;Bt++)d[Bt].x-=Pt,d[Bt].y+=X}function Zo(d,p,C,N,X,lt){var Pt,Bt=d.image;if(Bt.content){var Xt=Bt.content,he=Bt.pixelRatio||1;Pt=[Xt[0]/he,Xt[1]/he,Bt.displaySize[0]-Xt[2]/he,Bt.displaySize[1]-Xt[3]/he]}var Re,Ge,He,cn,Rn=p.left*lt,Cn=p.right*lt;C==="width"||C==="both"?(cn=X[0]+Rn-N[3],Ge=X[0]+Cn+N[1]):Ge=(cn=X[0]+(Rn+Cn-Bt.displaySize[0])/2)+Bt.displaySize[0];var $n=p.top*lt,Xn=p.bottom*lt;return C==="height"||C==="both"?(Re=X[1]+$n-N[0],He=X[1]+Xn+N[2]):He=(Re=X[1]+($n+Xn-Bt.displaySize[1])/2)+Bt.displaySize[1],{image:Bt,top:Re,right:Ge,bottom:He,left:cn,collisionPadding:Pt}}ia[10]=!0,ia[32]=!0,ia[38]=!0,ia[40]=!0,ia[41]=!0,ia[43]=!0,ia[45]=!0,ia[47]=!0,ia[173]=!0,ia[183]=!0,ia[8203]=!0,ia[8208]=!0,ia[8211]=!0,ia[8231]=!0;var Ku=function(d){function p(C,N,X,lt){d.call(this,C,N),this.angle=X,lt!==void 0&&(this.segment=lt)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.clone=function(){return new p(this.x,this.y,this.angle,this.segment)},p}(r);function Ks(d,p){var C=p.expression;if(C.kind==="constant")return{kind:"constant",layoutSize:C.evaluate(new br(d+1))};if(C.kind==="source")return{kind:"source"};for(var N=C.zoomStops,X=C.interpolationType,lt=0;lt<N.length&&N[lt]<=d;)lt++;for(var Pt=lt=Math.max(0,lt-1);Pt<N.length&&N[Pt]<d+1;)Pt++;Pt=Math.min(N.length-1,Pt);var Bt=N[lt],Xt=N[Pt];return C.kind==="composite"?{kind:"composite",minZoom:Bt,maxZoom:Xt,interpolationType:X}:{kind:"camera",minZoom:Bt,maxZoom:Xt,minSize:C.evaluate(new br(Bt)),maxSize:C.evaluate(new br(Xt)),interpolationType:X}}function Jl(d,p,C){var N=p.uSize,X=C.lowerSize;return d.kind==="source"?X/128:d.kind==="composite"?qa(X/128,C.upperSize/128,p.uSizeT):N}function Ll(d,p){var C=0,N=0;if(d.kind==="constant")N=d.layoutSize;else if(d.kind!=="source"){var X=d.interpolationType,lt=X?u(ka.interpolationFactor(X,p,d.minZoom,d.maxZoom),0,1):0;d.kind==="camera"?N=qa(d.minSize,d.maxSize,lt):C=lt}return{uSizeT:C,uSize:N}}Wi("Anchor",Ku);var Yl=Object.freeze({__proto__:null,getSizeData:Ks,evaluateSizeForFeature:Jl,evaluateSizeForZoom:Ll,SIZE_PACK_FACTOR:128});function Rl(d,p,C,N,X){if(p.segment===void 0)return!0;for(var lt=p,Pt=p.segment+1,Bt=0;Bt>-C/2;){if(--Pt<0)return!1;Bt-=d[Pt].dist(lt),lt=d[Pt]}Bt+=d[Pt].dist(d[Pt+1]),Pt++;for(var Xt=[],he=0;Bt<C/2;){var Re=d[Pt],Ge=d[Pt+1];if(!Ge)return!1;var He=d[Pt-1].angleTo(Re)-Re.angleTo(Ge);for(He=Math.abs((He+3*Math.PI)%(2*Math.PI)-Math.PI),Xt.push({distance:Bt,angleDelta:He}),he+=He;Bt-Xt[0].distance>N;)he-=Xt.shift().angleDelta;if(he>X)return!1;Pt++,Bt+=Re.dist(Ge)}return!0}function dc(d){for(var p=0,C=0;C<d.length-1;C++)p+=d[C].dist(d[C+1]);return p}function El(d,p,C){return d?.6*p*C:0}function Ca(d,p){return Math.max(d?d.right-d.left:0,p?p.right-p.left:0)}function Ec(d,p,C,N,X,lt){for(var Pt=El(C,X,lt),Bt=Ca(C,N)*lt,Xt=0,he=dc(d)/2,Re=0;Re<d.length-1;Re++){var Ge=d[Re],He=d[Re+1],cn=Ge.dist(He);if(Xt+cn>he){var Rn=(he-Xt)/cn,Cn=qa(Ge.x,He.x,Rn),$n=qa(Ge.y,He.y,Rn),Xn=new Ku(Cn,$n,He.angleTo(Ge),Re);return Xn._round(),!Pt||Rl(d,Xn,Bt,Pt,p)?Xn:void 0}Xt+=cn}}function Vs(d,p,C,N,X,lt,Pt,Bt,Xt){var he=El(N,lt,Pt),Re=Ca(N,X),Ge=Re*Pt,He=d[0].x===0||d[0].x===Xt||d[0].y===0||d[0].y===Xt;return p-Ge<p/4&&(p=Ge+p/4),function cn(Rn,Cn,$n,Xn,_r,Nr,Gr,pi,oi){for(var Ni=Nr/2,Bi=dc(Rn),Qi=0,pa=Cn-$n,fa=[],na=0;na<Rn.length-1;na++){for(var eo=Rn[na],Ia=Rn[na+1],ga=eo.dist(Ia),Uo=Ia.angleTo(eo);pa+$n<Qi+ga;){var xo=((pa+=$n)-Qi)/ga,Xs=qa(eo.x,Ia.x,xo),Xa=qa(eo.y,Ia.y,xo);if(Xs>=0&&Xs<oi&&Xa>=0&&Xa<oi&&pa-Ni>=0&&pa+Ni<=Bi){var es=new Ku(Xs,Xa,Uo,na);es._round(),Xn&&!Rl(Rn,es,Nr,Xn,_r)||fa.push(es)}}Qi+=ga}return pi||fa.length||Gr||(fa=cn(Rn,Qi/2,$n,Xn,_r,Nr,Gr,!0,oi)),fa}(d,He?p/2*Bt%p:(Re/2+2*lt)*Pt*Bt%p,p,he,C,Ge,He,!1,Xt)}function Xi(d,p,C,N,X){for(var lt=[],Pt=0;Pt<d.length;Pt++)for(var Bt=d[Pt],Xt=void 0,he=0;he<Bt.length-1;he++){var Re=Bt[he],Ge=Bt[he+1];Re.x<p&&Ge.x<p||(Re.x<p?Re=new r(p,Re.y+(p-Re.x)/(Ge.x-Re.x)*(Ge.y-Re.y))._round():Ge.x<p&&(Ge=new r(p,Re.y+(p-Re.x)/(Ge.x-Re.x)*(Ge.y-Re.y))._round()),Re.y<C&&Ge.y<C||(Re.y<C?Re=new r(Re.x+(C-Re.y)/(Ge.y-Re.y)*(Ge.x-Re.x),C)._round():Ge.y<C&&(Ge=new r(Re.x+(C-Re.y)/(Ge.y-Re.y)*(Ge.x-Re.x),C)._round()),Re.x>=N&&Ge.x>=N||(Re.x>=N?Re=new r(N,Re.y+(N-Re.x)/(Ge.x-Re.x)*(Ge.y-Re.y))._round():Ge.x>=N&&(Ge=new r(N,Re.y+(N-Re.x)/(Ge.x-Re.x)*(Ge.y-Re.y))._round()),Re.y>=X&&Ge.y>=X||(Re.y>=X?Re=new r(Re.x+(X-Re.y)/(Ge.y-Re.y)*(Ge.x-Re.x),X)._round():Ge.y>=X&&(Ge=new r(Re.x+(X-Re.y)/(Ge.y-Re.y)*(Ge.x-Re.x),X)._round()),Xt&&Re.equals(Xt[Xt.length-1])||lt.push(Xt=[Re]),Xt.push(Ge)))))}return lt}function Mo(d,p,C,N){var X=[],lt=d.image,Pt=lt.pixelRatio,Bt=lt.paddedRect.w-2,Xt=lt.paddedRect.h-2,he=d.right-d.left,Re=d.bottom-d.top,Ge=lt.stretchX||[[0,Bt]],He=lt.stretchY||[[0,Xt]],cn=function(Xa,es){return Xa+es[1]-es[0]},Rn=Ge.reduce(cn,0),Cn=He.reduce(cn,0),$n=Bt-Rn,Xn=Xt-Cn,_r=0,Nr=Rn,Gr=0,pi=Cn,oi=0,Ni=$n,Bi=0,Qi=Xn;if(lt.content&&N){var pa=lt.content;_r=zo(Ge,0,pa[0]),Gr=zo(He,0,pa[1]),Nr=zo(Ge,pa[0],pa[2]),pi=zo(He,pa[1],pa[3]),oi=pa[0]-_r,Bi=pa[1]-Gr,Ni=pa[2]-pa[0]-Nr,Qi=pa[3]-pa[1]-pi}var fa=function(Xa,es,al,Ps){var ol=Sc(Xa.stretch-_r,Nr,he,d.left),sl=mf(Xa.fixed-oi,Ni,Xa.stretch,Rn),Sl=Sc(es.stretch-Gr,pi,Re,d.top),vc=mf(es.fixed-Bi,Qi,es.stretch,Cn),_l=Sc(al.stretch-_r,Nr,he,d.left),Oc=mf(al.fixed-oi,Ni,al.stretch,Rn),sc=Sc(Ps.stretch-Gr,pi,Re,d.top),wc=mf(Ps.fixed-Bi,Qi,Ps.stretch,Cn),uc=new r(ol,Sl),ic=new r(_l,Sl),lc=new r(_l,sc),ys=new r(ol,sc),ns=new r(sl/Pt,vc/Pt),hu=new r(Oc/Pt,wc/Pt),Mu=p*Math.PI/180;if(Mu){var pc=Math.sin(Mu),Ru=Math.cos(Mu),ul=[Ru,-pc,pc,Ru];uc._matMult(ul),ic._matMult(ul),ys._matMult(ul),lc._matMult(ul)}var _c=Xa.stretch+Xa.fixed,hs=es.stretch+es.fixed;return{tl:uc,tr:ic,bl:ys,br:lc,tex:{x:lt.paddedRect.x+1+_c,y:lt.paddedRect.y+1+hs,w:al.stretch+al.fixed-_c,h:Ps.stretch+Ps.fixed-hs},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ns,pixelOffsetBR:hu,minFontScaleX:Ni/Pt/he,minFontScaleY:Qi/Pt/Re,isSDF:C}};if(N&&(lt.stretchX||lt.stretchY))for(var na=Dl(Ge,$n,Rn),eo=Dl(He,Xn,Cn),Ia=0;Ia<na.length-1;Ia++)for(var ga=na[Ia],Uo=na[Ia+1],xo=0;xo<eo.length-1;xo++)X.push(fa(ga,eo[xo],Uo,eo[xo+1]));else X.push(fa({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Bt+1},{fixed:0,stretch:Xt+1}));return X}function zo(d,p,C){for(var N=0,X=0,lt=d;X<lt.length;X+=1){var Pt=lt[X];N+=Math.max(p,Math.min(C,Pt[1]))-Math.max(p,Math.min(C,Pt[0]))}return N}function Dl(d,p,C){for(var N=[{fixed:-1,stretch:0}],X=0,lt=d;X<lt.length;X+=1){var Pt=lt[X],Bt=Pt[0],Xt=Pt[1],he=N[N.length-1];N.push({fixed:Bt-he.stretch,stretch:he.stretch}),N.push({fixed:Bt-he.stretch,stretch:he.stretch+(Xt-Bt)})}return N.push({fixed:p+1,stretch:C}),N}function Sc(d,p,C,N){return d/p*C+N}function mf(d,p,C,N){return d-p*C/N}var Dn=function(p,C,N,X,lt,Pt,Bt,Xt,he,Re){if(this.boxStartIndex=p.length,he){var Ge=Pt.top,He=Pt.bottom,cn=Pt.collisionPadding;cn&&(Ge-=cn[1],He+=cn[3]);var Rn=He-Ge;Rn>0&&(Rn=Math.max(10,Rn),this.circleDiameter=Rn)}else{var Cn=Pt.top*Bt-Xt,$n=Pt.bottom*Bt+Xt,Xn=Pt.left*Bt-Xt,_r=Pt.right*Bt+Xt,Nr=Pt.collisionPadding;if(Nr&&(Xn-=Nr[0]*Bt,Cn-=Nr[1]*Bt,_r+=Nr[2]*Bt,$n+=Nr[3]*Bt),Re){var Gr=new r(Xn,Cn),pi=new r(_r,Cn),oi=new r(Xn,$n),Ni=new r(_r,$n),Bi=Re*Math.PI/180;Gr._rotate(Bi),pi._rotate(Bi),oi._rotate(Bi),Ni._rotate(Bi),Xn=Math.min(Gr.x,pi.x,oi.x,Ni.x),_r=Math.max(Gr.x,pi.x,oi.x,Ni.x),Cn=Math.min(Gr.y,pi.y,oi.y,Ni.y),$n=Math.max(Gr.y,pi.y,oi.y,Ni.y)}p.emplaceBack(C.x,C.y,Xn,Cn,_r,$n,N,X,lt)}this.boxEndIndex=p.length},Zr=function(p,C){if(p===void 0&&(p=[]),C===void 0&&(C=Ur),this.data=p,this.length=this.data.length,this.compare=C,this.length>0)for(var N=(this.length>>1)-1;N>=0;N--)this._down(N)};function Ur(d,p){return d<p?-1:d>p?1:0}function ta(d,p,C){p===void 0&&(p=1),C===void 0&&(C=!1);for(var N=1/0,X=1/0,lt=-1/0,Pt=-1/0,Bt=d[0],Xt=0;Xt<Bt.length;Xt++){var he=Bt[Xt];(!Xt||he.x<N)&&(N=he.x),(!Xt||he.y<X)&&(X=he.y),(!Xt||he.x>lt)&&(lt=he.x),(!Xt||he.y>Pt)&&(Pt=he.y)}var Re=Math.min(lt-N,Pt-X),Ge=Re/2,He=new Zr([],wo);if(Re===0)return new r(N,X);for(var cn=N;cn<lt;cn+=Re)for(var Rn=X;Rn<Pt;Rn+=Re)He.push(new Sn(cn+Ge,Rn+Ge,Ge,d));for(var Cn=function(_r){for(var Nr=0,Gr=0,pi=0,oi=_r[0],Ni=0,Bi=oi.length,Qi=Bi-1;Ni<Bi;Qi=Ni++){var pa=oi[Ni],fa=oi[Qi],na=pa.x*fa.y-fa.x*pa.y;Gr+=(pa.x+fa.x)*na,pi+=(pa.y+fa.y)*na,Nr+=3*na}return new Sn(Gr/Nr,pi/Nr,0,_r)}(d),$n=He.length;He.length;){var Xn=He.pop();(Xn.d>Cn.d||!Cn.d)&&(Cn=Xn,C&&console.log("found best %d after %d probes",Math.round(1e4*Xn.d)/1e4,$n)),Xn.max-Cn.d<=p||(He.push(new Sn(Xn.p.x-(Ge=Xn.h/2),Xn.p.y-Ge,Ge,d)),He.push(new Sn(Xn.p.x+Ge,Xn.p.y-Ge,Ge,d)),He.push(new Sn(Xn.p.x-Ge,Xn.p.y+Ge,Ge,d)),He.push(new Sn(Xn.p.x+Ge,Xn.p.y+Ge,Ge,d)),$n+=4)}return C&&(console.log("num probes: "+$n),console.log("best distance: "+Cn.d)),Cn.p}function wo(d,p){return p.max-d.max}function Sn(d,p,C,N){this.p=new r(d,p),this.h=C,this.d=function(X,lt){for(var Pt=!1,Bt=1/0,Xt=0;Xt<lt.length;Xt++)for(var he=lt[Xt],Re=0,Ge=he.length,He=Ge-1;Re<Ge;He=Re++){var cn=he[Re],Rn=he[He];cn.y>X.y!=Rn.y>X.y&&X.x<(Rn.x-cn.x)*(X.y-cn.y)/(Rn.y-cn.y)+cn.x&&(Pt=!Pt),Bt=Math.min(Bt,Uc(X,cn,Rn))}return(Pt?1:-1)*Math.sqrt(Bt)}(this.p,N),this.max=this.d+this.h*Math.SQRT2}Zr.prototype.push=function(d){this.data.push(d),this.length++,this._up(this.length-1)},Zr.prototype.pop=function(){if(this.length!==0){var d=this.data[0],p=this.data.pop();return this.length--,this.length>0&&(this.data[0]=p,this._down(0)),d}},Zr.prototype.peek=function(){return this.data[0]},Zr.prototype._up=function(d){for(var p=this.data,C=this.compare,N=p[d];d>0;){var X=d-1>>1,lt=p[X];if(C(N,lt)>=0)break;p[d]=lt,d=X}p[d]=N},Zr.prototype._down=function(d){for(var p=this.data,C=this.compare,N=this.length>>1,X=p[d];d<N;){var lt=1+(d<<1),Pt=p[lt],Bt=lt+1;if(Bt<this.length&&C(p[Bt],Pt)<0&&(lt=Bt,Pt=p[Bt]),C(Pt,X)>=0)break;p[d]=Pt,d=lt}p[d]=X};var sn=Number.POSITIVE_INFINITY;function er(d,p){return p[1]!==sn?function(C,N,X){var lt=0,Pt=0;switch(N=Math.abs(N),X=Math.abs(X),C){case"top-right":case"top-left":case"top":Pt=X-7;break;case"bottom-right":case"bottom-left":case"bottom":Pt=7-X}switch(C){case"top-right":case"bottom-right":case"right":lt=-N;break;case"top-left":case"bottom-left":case"left":lt=N}return[lt,Pt]}(d,p[0],p[1]):function(C,N){var X=0,lt=0;N<0&&(N=0);var Pt=N/Math.sqrt(2);switch(C){case"top-right":case"top-left":lt=Pt-7;break;case"bottom-right":case"bottom-left":lt=7-Pt;break;case"bottom":lt=7-N;break;case"top":lt=N-7}switch(C){case"top-right":case"bottom-right":X=-Pt;break;case"top-left":case"bottom-left":X=Pt;break;case"left":X=N;break;case"right":X=-N}return[X,lt]}(d,p[0])}function Or(d){switch(d){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Dr(d,p,C,N,X,lt,Pt,Bt,Xt,he,Re,Ge,He,cn,Rn){var Cn=function(Gr,pi,oi,Ni,Bi,Qi,pa,fa){for(var na=Ni.layout.get("text-rotate").evaluate(Qi,{})*Math.PI/180,eo=[],Ia=0,ga=pi.positionedLines;Ia<ga.length;Ia+=1)for(var Uo=ga[Ia],xo=0,Xs=Uo.positionedGlyphs;xo<Xs.length;xo+=1){var Xa=Xs[xo];if(Xa.rect){var es=Xa.rect||{},al=4,Ps=!0,ol=1,sl=0,Sl=(Bi||fa)&&Xa.vertical,vc=Xa.metrics.advance*Xa.scale/2;if(fa&&pi.verticalizable&&(sl=Uo.lineOffset/2-(Xa.imageName?-(24-Xa.metrics.width*Xa.scale)/2:24*(Xa.scale-1))),Xa.imageName){var _l=pa[Xa.imageName];Ps=_l.sdf,al=1/(ol=_l.pixelRatio)}var Oc=Bi?[Xa.x+vc,Xa.y]:[0,0],sc=Bi?[0,0]:[Xa.x+vc+oi[0],Xa.y+oi[1]-sl],wc=[0,0];Sl&&(wc=sc,sc=[0,0]);var uc=(Xa.metrics.left-al)*Xa.scale-vc+sc[0],ic=(-Xa.metrics.top-al)*Xa.scale+sc[1],lc=uc+es.w*Xa.scale/ol,ys=ic+es.h*Xa.scale/ol,ns=new r(uc,ic),hu=new r(lc,ic),Mu=new r(uc,ys),pc=new r(lc,ys);if(Sl){var Ru=new r(-vc,vc- -17),ul=-Math.PI/2,_c=12-vc,hs=new r(22-_c,-(Xa.imageName?_c:0)),Nf=new(Function.prototype.bind.apply(r,[null].concat(wc)));ns._rotateAround(ul,Ru)._add(hs)._add(Nf),hu._rotateAround(ul,Ru)._add(hs)._add(Nf),Mu._rotateAround(ul,Ru)._add(hs)._add(Nf),pc._rotateAround(ul,Ru)._add(hs)._add(Nf)}if(na){var sf=Math.sin(na),yf=Math.cos(na),Kc=[yf,-sf,sf,yf];ns._matMult(Kc),hu._matMult(Kc),Mu._matMult(Kc),pc._matMult(Kc)}var Mc=new r(0,0),Af=new r(0,0);eo.push({tl:ns,tr:hu,bl:Mu,br:pc,tex:es,writingMode:pi.writingMode,glyphOffset:Oc,sectionIndex:Xa.sectionIndex,isSDF:Ps,pixelOffsetTL:Mc,pixelOffsetBR:Af,minFontScaleX:0,minFontScaleY:0})}}return eo}(0,C,Bt,X,lt,Pt,N,d.allowVerticalPlacement),$n=d.textSizeData,Xn=null;$n.kind==="source"?(Xn=[128*X.layout.get("text-size").evaluate(Pt,{})])[0]>32640&&O(d.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):$n.kind==="composite"&&((Xn=[128*cn.compositeTextSizes[0].evaluate(Pt,{},Rn),128*cn.compositeTextSizes[1].evaluate(Pt,{},Rn)])[0]>32640||Xn[1]>32640)&&O(d.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),d.addSymbols(d.text,Cn,Xn,Bt,lt,Pt,he,p,Xt.lineStartIndex,Xt.lineLength,He,Rn);for(var _r=0,Nr=Re;_r<Nr.length;_r+=1)Ge[Nr[_r]]=d.text.placedSymbolArray.length-1;return 4*Cn.length}function ur(d){for(var p in d)return d[p];return null}function ar(d,p,C,N){var X=d.compareText;if(p in X){for(var lt=X[p],Pt=lt.length-1;Pt>=0;Pt--)if(N.dist(lt[Pt])<C)return!0}else X[p]=[];return X[p].push(N),!1}var Sr=ru.VectorTileFeature.types,Tn=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Qn(d,p,C,N,X,lt,Pt,Bt,Xt,he,Re,Ge,He){var cn=Bt?Math.min(32640,Math.round(Bt[0])):0,Rn=Bt?Math.min(32640,Math.round(Bt[1])):0;d.emplaceBack(p,C,Math.round(32*N),Math.round(32*X),lt,Pt,(cn<<1)+(Xt?1:0),Rn,16*he,16*Re,256*Ge,256*He)}function xn(d,p,C){d.emplaceBack(p.x,p.y,C),d.emplaceBack(p.x,p.y,C),d.emplaceBack(p.x,p.y,C),d.emplaceBack(p.x,p.y,C)}function Tr(d){for(var p=0,C=d.sections;p<C.length;p+=1)if(Te(C[p].text))return!0;return!1}var jr=function(p){this.layoutVertexArray=new Zi,this.indexArray=new Ga,this.programConfigurations=p,this.segments=new Ht,this.dynamicLayoutVertexArray=new Li,this.opacityVertexArray=new Ma,this.placedSymbolArray=new B};jr.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},jr.prototype.upload=function(d,p,C,N){this.isEmpty()||(C&&(this.layoutVertexBuffer=d.createVertexBuffer(this.layoutVertexArray,Q.members),this.indexBuffer=d.createIndexBuffer(this.indexArray,p),this.dynamicLayoutVertexBuffer=d.createVertexBuffer(this.dynamicLayoutVertexArray,xt.members,!0),this.opacityVertexBuffer=d.createVertexBuffer(this.opacityVertexArray,Tn,!0),this.opacityVertexBuffer.itemSize=1),(C||N)&&this.programConfigurations.upload(d))},jr.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Wi("SymbolBuffers",jr);var li=function(p,C,N){this.layoutVertexArray=new p,this.layoutAttributes=C,this.indexArray=new N,this.segments=new Ht,this.collisionVertexArray=new Ta};li.prototype.upload=function(d){this.layoutVertexBuffer=d.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=d.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=d.createVertexBuffer(this.collisionVertexArray,wt.members,!0)},li.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Wi("CollisionBuffers",li);var Hr=function(p){this.collisionBoxArray=p.collisionBoxArray,this.zoom=p.zoom,this.overscaling=p.overscaling,this.layers=p.layers,this.layerIds=this.layers.map(function(Pt){return Pt.id}),this.index=p.index,this.pixelRatio=p.pixelRatio,this.sourceLayerIndex=p.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=vl([]),this.placementViewportMatrix=vl([]);var C=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Ks(this.zoom,C["text-size"]),this.iconSizeData=Ks(this.zoom,C["icon-size"]);var N=this.layers[0].layout,X=N.get("symbol-sort-key"),lt=N.get("symbol-z-order");this.canOverlap=N.get("text-allow-overlap")||N.get("icon-allow-overlap")||N.get("text-ignore-placement")||N.get("icon-ignore-placement"),this.sortFeaturesByKey=lt!=="viewport-y"&&X.constantOr(1)!==void 0,this.sortFeaturesByY=(lt==="viewport-y"||lt==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,N.get("symbol-placement")==="point"&&(this.writingModes=N.get("text-writing-mode").map(function(Pt){return Sa[Pt]})),this.stateDependentLayerIds=this.layers.filter(function(Pt){return Pt.isStateDependent()}).map(function(Pt){return Pt.id}),this.sourceID=p.sourceID};Hr.prototype.createArrays=function(){this.text=new jr(new Ba(this.layers,this.zoom,function(d){return/^text/.test(d)})),this.icon=new jr(new Ba(this.layers,this.zoom,function(d){return/^icon/.test(d)})),this.glyphOffsetArray=new J,this.lineVertexArray=new st,this.symbolInstances=new G},Hr.prototype.calculateGlyphDependencies=function(d,p,C,N,X){for(var lt=0;lt<d.length;lt++)if(p[d.charCodeAt(lt)]=!0,(C||N)&&X){var Pt=pn[d.charAt(lt)];Pt&&(p[Pt.charCodeAt(0)]=!0)}},Hr.prototype.populate=function(d,p,C){var N=this.layers[0],X=N.layout,lt=X.get("text-font"),Pt=X.get("text-field"),Bt=X.get("icon-image"),Xt=(Pt.value.kind!=="constant"||Pt.value.value instanceof Ua&&!Pt.value.value.isEmpty()||Pt.value.value.toString().length>0)&&(lt.value.kind!=="constant"||lt.value.value.length>0),he=Bt.value.kind!=="constant"||!!Bt.value.value||Object.keys(Bt.parameters).length>0,Re=X.get("symbol-sort-key");if(this.features=[],Xt||he){for(var Ge=p.iconDependencies,He=p.glyphDependencies,cn=p.availableImages,Rn=new br(this.zoom),Cn=0,$n=d;Cn<$n.length;Cn+=1){var Xn=$n[Cn],_r=Xn.feature,Nr=Xn.id,Gr=Xn.index,pi=Xn.sourceLayerIndex,oi=N._featureFilter.needGeometry,Ni=ks(_r,oi);if(N._featureFilter.filter(Rn,Ni,C)){oi||(Ni.geometry=Yo(_r));var Bi=void 0;if(Xt){var Qi=N.getValueAndResolveTokens("text-field",Ni,C,cn),pa=Ua.factory(Qi);Tr(pa)&&(this.hasRTLText=!0),(!this.hasRTLText||ti()==="unavailable"||this.hasRTLText&&ui.isParsed())&&(Bi=gn(pa,N,Ni))}var fa=void 0;if(he){var na=N.getValueAndResolveTokens("icon-image",Ni,C,cn);fa=na instanceof ro?na:ro.fromString(na)}if(Bi||fa){var eo=this.sortFeaturesByKey?Re.evaluate(Ni,{},C):void 0;if(this.features.push({id:Nr,text:Bi,icon:fa,index:Gr,sourceLayerIndex:pi,geometry:Ni.geometry,properties:_r.properties,type:Sr[_r.type],sortKey:eo}),fa&&(Ge[fa.name]=!0),Bi){var Ia=lt.evaluate(Ni,{},C).join(","),ga=X.get("text-rotation-alignment")==="map"&&X.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Sa.vertical)>=0;for(var Uo=0,xo=Bi.sections;Uo<xo.length;Uo+=1){var Xs=xo[Uo];if(Xs.image)Ge[Xs.image.name]=!0;else{var Xa=el(Bi.toString()),es=Xs.fontStack||Ia,al=He[es]=He[es]||{};this.calculateGlyphDependencies(Xs.text,al,ga,this.allowVerticalPlacement,Xa)}}}}}}X.get("symbol-placement")==="line"&&(this.features=function(Ps){var ol={},sl={},Sl=[],vc=0;function _l(Ru){Sl.push(Ps[Ru]),vc++}function Oc(Ru,ul,_c){var hs=sl[Ru];return delete sl[Ru],sl[ul]=hs,Sl[hs].geometry[0].pop(),Sl[hs].geometry[0]=Sl[hs].geometry[0].concat(_c[0]),hs}function sc(Ru,ul,_c){var hs=ol[ul];return delete ol[ul],ol[Ru]=hs,Sl[hs].geometry[0].shift(),Sl[hs].geometry[0]=_c[0].concat(Sl[hs].geometry[0]),hs}function wc(Ru,ul,_c){var hs=_c?ul[0][ul[0].length-1]:ul[0][0];return Ru+":"+hs.x+":"+hs.y}for(var uc=0;uc<Ps.length;uc++){var ic=Ps[uc],lc=ic.geometry,ys=ic.text?ic.text.toString():null;if(ys){var ns=wc(ys,lc),hu=wc(ys,lc,!0);if(ns in sl&&hu in ol&&sl[ns]!==ol[hu]){var Mu=sc(ns,hu,lc),pc=Oc(ns,hu,Sl[Mu].geometry);delete ol[ns],delete sl[hu],sl[wc(ys,Sl[pc].geometry,!0)]=pc,Sl[Mu].geometry=null}else ns in sl?Oc(ns,hu,lc):hu in ol?sc(ns,hu,lc):(_l(uc),ol[ns]=vc-1,sl[hu]=vc-1)}else _l(uc)}return Sl.filter(function(Ru){return Ru.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Ps,ol){return Ps.sortKey-ol.sortKey})}},Hr.prototype.update=function(d,p,C){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(d,p,this.layers,C),this.icon.programConfigurations.updatePaintArrays(d,p,this.layers,C))},Hr.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Hr.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Hr.prototype.upload=function(d){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(d),this.iconCollisionBox.upload(d)),this.text.upload(d,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(d,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Hr.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Hr.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Hr.prototype.addToLineVertexArray=function(d,p){var C=this.lineVertexArray.length;if(d.segment!==void 0){for(var N=d.dist(p[d.segment+1]),X=d.dist(p[d.segment]),lt={},Pt=d.segment+1;Pt<p.length;Pt++)lt[Pt]={x:p[Pt].x,y:p[Pt].y,tileUnitDistanceFromAnchor:N},Pt<p.length-1&&(N+=p[Pt+1].dist(p[Pt]));for(var Bt=d.segment||0;Bt>=0;Bt--)lt[Bt]={x:p[Bt].x,y:p[Bt].y,tileUnitDistanceFromAnchor:X},Bt>0&&(X+=p[Bt-1].dist(p[Bt]));for(var Xt=0;Xt<p.length;Xt++){var he=lt[Xt];this.lineVertexArray.emplaceBack(he.x,he.y,he.tileUnitDistanceFromAnchor)}}return{lineStartIndex:C,lineLength:this.lineVertexArray.length-C}},Hr.prototype.addSymbols=function(d,p,C,N,X,lt,Pt,Bt,Xt,he,Re,Ge){for(var He=d.indexArray,cn=d.layoutVertexArray,Rn=d.segments.prepareSegment(4*p.length,cn,He,this.canOverlap?lt.sortKey:void 0),Cn=this.glyphOffsetArray.length,$n=Rn.vertexLength,Xn=this.allowVerticalPlacement&&Pt===Sa.vertical?Math.PI/2:0,_r=lt.text&&lt.text.sections,Nr=0;Nr<p.length;Nr++){var Gr=p[Nr],pi=Gr.tl,oi=Gr.tr,Ni=Gr.bl,Bi=Gr.br,Qi=Gr.tex,pa=Gr.pixelOffsetTL,fa=Gr.pixelOffsetBR,na=Gr.minFontScaleX,eo=Gr.minFontScaleY,Ia=Gr.glyphOffset,ga=Gr.isSDF,Uo=Gr.sectionIndex,xo=Rn.vertexLength,Xs=Ia[1];Qn(cn,Bt.x,Bt.y,pi.x,Xs+pi.y,Qi.x,Qi.y,C,ga,pa.x,pa.y,na,eo),Qn(cn,Bt.x,Bt.y,oi.x,Xs+oi.y,Qi.x+Qi.w,Qi.y,C,ga,fa.x,pa.y,na,eo),Qn(cn,Bt.x,Bt.y,Ni.x,Xs+Ni.y,Qi.x,Qi.y+Qi.h,C,ga,pa.x,fa.y,na,eo),Qn(cn,Bt.x,Bt.y,Bi.x,Xs+Bi.y,Qi.x+Qi.w,Qi.y+Qi.h,C,ga,fa.x,fa.y,na,eo),xn(d.dynamicLayoutVertexArray,Bt,Xn),He.emplaceBack(xo,xo+1,xo+2),He.emplaceBack(xo+1,xo+2,xo+3),Rn.vertexLength+=4,Rn.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ia[0]),Nr!==p.length-1&&Uo===p[Nr+1].sectionIndex||d.programConfigurations.populatePaintArrays(cn.length,lt,lt.index,{},Ge,_r&&_r[Uo])}d.placedSymbolArray.emplaceBack(Bt.x,Bt.y,Cn,this.glyphOffsetArray.length-Cn,$n,Xt,he,Bt.segment,C?C[0]:0,C?C[1]:0,N[0],N[1],Pt,0,!1,0,Re)},Hr.prototype._addCollisionDebugVertex=function(d,p,C,N,X,lt){return p.emplaceBack(0,0),d.emplaceBack(C.x,C.y,N,X,Math.round(lt.x),Math.round(lt.y))},Hr.prototype.addCollisionDebugVertices=function(d,p,C,N,X,lt,Pt){var Bt=X.segments.prepareSegment(4,X.layoutVertexArray,X.indexArray),Xt=Bt.vertexLength,he=X.layoutVertexArray,Re=X.collisionVertexArray,Ge=Pt.anchorX,He=Pt.anchorY;this._addCollisionDebugVertex(he,Re,lt,Ge,He,new r(d,p)),this._addCollisionDebugVertex(he,Re,lt,Ge,He,new r(C,p)),this._addCollisionDebugVertex(he,Re,lt,Ge,He,new r(C,N)),this._addCollisionDebugVertex(he,Re,lt,Ge,He,new r(d,N)),Bt.vertexLength+=4;var cn=X.indexArray;cn.emplaceBack(Xt,Xt+1),cn.emplaceBack(Xt+1,Xt+2),cn.emplaceBack(Xt+2,Xt+3),cn.emplaceBack(Xt+3,Xt),Bt.primitiveLength+=4},Hr.prototype.addDebugCollisionBoxes=function(d,p,C,N){for(var X=d;X<p;X++){var lt=this.collisionBoxArray.get(X);this.addCollisionDebugVertices(lt.x1,lt.y1,lt.x2,lt.y2,N?this.textCollisionBox:this.iconCollisionBox,lt.anchorPoint,C)}},Hr.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new li(la,ae.members,Is),this.iconCollisionBox=new li(la,ae.members,Is);for(var d=0;d<this.symbolInstances.length;d++){var p=this.symbolInstances.get(d);this.addDebugCollisionBoxes(p.textBoxStartIndex,p.textBoxEndIndex,p,!0),this.addDebugCollisionBoxes(p.verticalTextBoxStartIndex,p.verticalTextBoxEndIndex,p,!0),this.addDebugCollisionBoxes(p.iconBoxStartIndex,p.iconBoxEndIndex,p,!1),this.addDebugCollisionBoxes(p.verticalIconBoxStartIndex,p.verticalIconBoxEndIndex,p,!1)}},Hr.prototype._deserializeCollisionBoxesForSymbol=function(d,p,C,N,X,lt,Pt,Bt,Xt){for(var he={},Re=p;Re<C;Re++){var Ge=d.get(Re);he.textBox={x1:Ge.x1,y1:Ge.y1,x2:Ge.x2,y2:Ge.y2,anchorPointX:Ge.anchorPointX,anchorPointY:Ge.anchorPointY},he.textFeatureIndex=Ge.featureIndex;break}for(var He=N;He<X;He++){var cn=d.get(He);he.verticalTextBox={x1:cn.x1,y1:cn.y1,x2:cn.x2,y2:cn.y2,anchorPointX:cn.anchorPointX,anchorPointY:cn.anchorPointY},he.verticalTextFeatureIndex=cn.featureIndex;break}for(var Rn=lt;Rn<Pt;Rn++){var Cn=d.get(Rn);he.iconBox={x1:Cn.x1,y1:Cn.y1,x2:Cn.x2,y2:Cn.y2,anchorPointX:Cn.anchorPointX,anchorPointY:Cn.anchorPointY},he.iconFeatureIndex=Cn.featureIndex;break}for(var $n=Bt;$n<Xt;$n++){var Xn=d.get($n);he.verticalIconBox={x1:Xn.x1,y1:Xn.y1,x2:Xn.x2,y2:Xn.y2,anchorPointX:Xn.anchorPointX,anchorPointY:Xn.anchorPointY},he.verticalIconFeatureIndex=Xn.featureIndex;break}return he},Hr.prototype.deserializeCollisionBoxes=function(d){this.collisionArrays=[];for(var p=0;p<this.symbolInstances.length;p++){var C=this.symbolInstances.get(p);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(d,C.textBoxStartIndex,C.textBoxEndIndex,C.verticalTextBoxStartIndex,C.verticalTextBoxEndIndex,C.iconBoxStartIndex,C.iconBoxEndIndex,C.verticalIconBoxStartIndex,C.verticalIconBoxEndIndex))}},Hr.prototype.hasTextData=function(){return this.text.segments.get().length>0},Hr.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Hr.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Hr.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Hr.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Hr.prototype.addIndicesForPlacedSymbol=function(d,p){for(var C=d.placedSymbolArray.get(p),N=C.vertexStartIndex+4*C.numGlyphs,X=C.vertexStartIndex;X<N;X+=4)d.indexArray.emplaceBack(X,X+1,X+2),d.indexArray.emplaceBack(X+1,X+2,X+3)},Hr.prototype.getSortedSymbolIndexes=function(d){if(this.sortedAngle===d&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var p=Math.sin(d),C=Math.cos(d),N=[],X=[],lt=[],Pt=0;Pt<this.symbolInstances.length;++Pt){lt.push(Pt);var Bt=this.symbolInstances.get(Pt);N.push(0|Math.round(p*Bt.anchorX+C*Bt.anchorY)),X.push(Bt.featureIndex)}return lt.sort(function(Xt,he){return N[Xt]-N[he]||X[he]-X[Xt]}),lt},Hr.prototype.addToSortKeyRanges=function(d,p){var C=this.sortKeyRanges[this.sortKeyRanges.length-1];C&&C.sortKey===p?C.symbolInstanceEnd=d+1:this.sortKeyRanges.push({sortKey:p,symbolInstanceStart:d,symbolInstanceEnd:d+1})},Hr.prototype.sortFeatures=function(d){var p=this;if(this.sortFeaturesByY&&this.sortedAngle!==d&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(d),this.sortedAngle=d,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var C=0,N=this.symbolInstanceIndexes;C<N.length;C+=1){var X=this.symbolInstances.get(N[C]);this.featureSortOrder.push(X.featureIndex),[X.rightJustifiedTextSymbolIndex,X.centerJustifiedTextSymbolIndex,X.leftJustifiedTextSymbolIndex].forEach(function(lt,Pt,Bt){lt>=0&&Bt.indexOf(lt)===Pt&&p.addIndicesForPlacedSymbol(p.text,lt)}),X.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,X.verticalPlacedTextSymbolIndex),X.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,X.placedIconSymbolIndex),X.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,X.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Wi("SymbolBucket",Hr,{omit:["layers","collisionBoxArray","features","compareText"]}),Hr.MAX_GLYPHS=65535,Hr.addDynamicAttributes=xn;var ii=new vn({"symbol-placement":new ce(ue.layout_symbol["symbol-placement"]),"symbol-spacing":new ce(ue.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ce(ue.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Fe(ue.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ce(ue.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ce(ue.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new ce(ue.layout_symbol["icon-ignore-placement"]),"icon-optional":new ce(ue.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ce(ue.layout_symbol["icon-rotation-alignment"]),"icon-size":new Fe(ue.layout_symbol["icon-size"]),"icon-text-fit":new ce(ue.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ce(ue.layout_symbol["icon-text-fit-padding"]),"icon-image":new Fe(ue.layout_symbol["icon-image"]),"icon-rotate":new Fe(ue.layout_symbol["icon-rotate"]),"icon-padding":new ce(ue.layout_symbol["icon-padding"]),"icon-keep-upright":new ce(ue.layout_symbol["icon-keep-upright"]),"icon-offset":new Fe(ue.layout_symbol["icon-offset"]),"icon-anchor":new Fe(ue.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ce(ue.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ce(ue.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ce(ue.layout_symbol["text-rotation-alignment"]),"text-field":new Fe(ue.layout_symbol["text-field"]),"text-font":new Fe(ue.layout_symbol["text-font"]),"text-size":new Fe(ue.layout_symbol["text-size"]),"text-max-width":new Fe(ue.layout_symbol["text-max-width"]),"text-line-height":new ce(ue.layout_symbol["text-line-height"]),"text-letter-spacing":new Fe(ue.layout_symbol["text-letter-spacing"]),"text-justify":new Fe(ue.layout_symbol["text-justify"]),"text-radial-offset":new Fe(ue.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ce(ue.layout_symbol["text-variable-anchor"]),"text-anchor":new Fe(ue.layout_symbol["text-anchor"]),"text-max-angle":new ce(ue.layout_symbol["text-max-angle"]),"text-writing-mode":new ce(ue.layout_symbol["text-writing-mode"]),"text-rotate":new Fe(ue.layout_symbol["text-rotate"]),"text-padding":new ce(ue.layout_symbol["text-padding"]),"text-keep-upright":new ce(ue.layout_symbol["text-keep-upright"]),"text-transform":new Fe(ue.layout_symbol["text-transform"]),"text-offset":new Fe(ue.layout_symbol["text-offset"]),"text-allow-overlap":new ce(ue.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new ce(ue.layout_symbol["text-ignore-placement"]),"text-optional":new ce(ue.layout_symbol["text-optional"])}),Ri={paint:new vn({"icon-opacity":new Fe(ue.paint_symbol["icon-opacity"]),"icon-color":new Fe(ue.paint_symbol["icon-color"]),"icon-halo-color":new Fe(ue.paint_symbol["icon-halo-color"]),"icon-halo-width":new Fe(ue.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Fe(ue.paint_symbol["icon-halo-blur"]),"icon-translate":new ce(ue.paint_symbol["icon-translate"]),"icon-translate-anchor":new ce(ue.paint_symbol["icon-translate-anchor"]),"text-opacity":new Fe(ue.paint_symbol["text-opacity"]),"text-color":new Fe(ue.paint_symbol["text-color"],{runtimeType:je,getOverride:function(p){return p.textColor},hasOverride:function(p){return!!p.textColor}}),"text-halo-color":new Fe(ue.paint_symbol["text-halo-color"]),"text-halo-width":new Fe(ue.paint_symbol["text-halo-width"]),"text-halo-blur":new Fe(ue.paint_symbol["text-halo-blur"]),"text-translate":new ce(ue.paint_symbol["text-translate"]),"text-translate-anchor":new ce(ue.paint_symbol["text-translate-anchor"])}),layout:ii},da=function(p){this.type=p.property.overrides?p.property.overrides.runtimeType:Pr,this.defaultValue=p};da.prototype.evaluate=function(d){if(d.formattedSection){var p=this.defaultValue.property.overrides;if(p&&p.hasOverride(d.formattedSection))return p.getOverride(d.formattedSection)}return d.feature&&d.featureState?this.defaultValue.evaluate(d.feature,d.featureState):this.defaultValue.property.specification.default},da.prototype.eachChild=function(d){this.defaultValue.isConstant()||d(this.defaultValue.value._styleExpression.expression)},da.prototype.outputDefined=function(){return!1},da.prototype.serialize=function(){return null},Wi("FormatSectionOverride",da,{omit:["defaultValue"]});var Lo=function(d){function p(C){d.call(this,C,Ri)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.recalculate=function(C,N){if(d.prototype.recalculate.call(this,C,N),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var X=this.layout.get("text-writing-mode");if(X){for(var lt=[],Pt=0,Bt=X;Pt<Bt.length;Pt+=1){var Xt=Bt[Pt];lt.indexOf(Xt)<0&&lt.push(Xt)}this.layout._values["text-writing-mode"]=lt}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},p.prototype.getValueAndResolveTokens=function(C,N,X,lt){var Pt=this.layout.get(C).evaluate(N,{},X,lt),Bt=this._unevaluatedLayout._values[C];return Bt.isDataDriven()||ms(Bt.value)||!Pt?Pt:function(Xt,he){return he.replace(/{([^{}]+)}/g,function(Re,Ge){return Ge in Xt?String(Xt[Ge]):""})}(N.properties,Pt)},p.prototype.createBucket=function(C){return new Hr(C)},p.prototype.queryRadius=function(){return 0},p.prototype.queryIntersectsFeature=function(){return!1},p.prototype._setPaintOverrides=function(){for(var C=0,N=Ri.paint.overridableProperties;C<N.length;C+=1){var X=N[C];if(p.hasPaintOverride(this.layout,X)){var lt,Pt=this.paint.get(X),Bt=new da(Pt),Xt=new Al(Bt,Pt.property.specification);lt=Pt.value.kind==="constant"||Pt.value.kind==="source"?new gu("source",Xt):new Fu("composite",Xt,Pt.value.zoomStops,Pt.value._interpolationType),this.paint._values[X]=new se(Pt.property,lt,Pt.parameters)}}},p.prototype._handleOverridablePaintPropertyUpdate=function(C,N,X){return!(!this.layout||N.isDataDriven()||X.isDataDriven())&&p.hasPaintOverride(this.layout,C)},p.hasPaintOverride=function(C,N){var X=C.get("text-field"),lt=Ri.paint.properties[N],Pt=!1,Bt=function(Ge){for(var He=0,cn=Ge;He<cn.length;He+=1)if(lt.overrides&&lt.overrides.hasOverride(cn[He]))return void(Pt=!0)};if(X.value.kind==="constant"&&X.value.value instanceof Ua)Bt(X.value.value.sections);else if(X.value.kind==="source"){var Xt=function Re(Ge){Pt||(Ge instanceof io&&co(Ge.value)===mn?Bt(Ge.value.sections):Ge instanceof Vo?Bt(Ge.sections):Ge.eachChild(Re))},he=X.value;he._styleExpression&&Xt(he._styleExpression.expression)}return Pt},p}(hn),ca={paint:new vn({"background-color":new ce(ue.paint_background["background-color"]),"background-pattern":new rn(ue.paint_background["background-pattern"]),"background-opacity":new ce(ue.paint_background["background-opacity"])})},Va=function(d){function p(C){d.call(this,C,ca)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p}(hn),yo={paint:new vn({"raster-opacity":new ce(ue.paint_raster["raster-opacity"]),"raster-hue-rotate":new ce(ue.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ce(ue.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ce(ue.paint_raster["raster-brightness-max"]),"raster-saturation":new ce(ue.paint_raster["raster-saturation"]),"raster-contrast":new ce(ue.paint_raster["raster-contrast"]),"raster-resampling":new ce(ue.paint_raster["raster-resampling"]),"raster-fade-duration":new ce(ue.paint_raster["raster-fade-duration"])})},Rs=function(d){function p(C){d.call(this,C,yo)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p}(hn),jl=function(d){function p(C){d.call(this,C,{}),this.implementation=C}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},p.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},p.prototype.recalculate=function(){},p.prototype.updateTransitions=function(){},p.prototype.hasTransition=function(){},p.prototype.serialize=function(){},p.prototype.onAdd=function(C){this.implementation.onAdd&&this.implementation.onAdd(C,C.painter.context.gl)},p.prototype.onRemove=function(C){this.implementation.onRemove&&this.implementation.onRemove(C,C.painter.context.gl)},p}(hn),Dc={circle:Ic,heatmap:bf,hillshade:If,fill:Qr,"fill-extrusion":ss,line:jt,symbol:Lo,background:Va,raster:Rs},vh=n.HTMLImageElement,Zc=n.HTMLCanvasElement,Ah=n.HTMLVideoElement,Jc=n.ImageData,th=n.ImageBitmap,eh=function(p,C,N,X){this.context=p,this.format=N,this.texture=p.gl.createTexture(),this.update(C,X)};eh.prototype.update=function(d,p,C){var N=d.width,X=d.height,lt=!(this.size&&this.size[0]===N&&this.size[1]===X||C),Pt=this.context,Bt=Pt.gl;if(this.useMipmap=Boolean(p&&p.useMipmap),Bt.bindTexture(Bt.TEXTURE_2D,this.texture),Pt.pixelStoreUnpackFlipY.set(!1),Pt.pixelStoreUnpack.set(1),Pt.pixelStoreUnpackPremultiplyAlpha.set(this.format===Bt.RGBA&&(!p||p.premultiply!==!1)),lt)this.size=[N,X],d instanceof vh||d instanceof Zc||d instanceof Ah||d instanceof Jc||th&&d instanceof th?Bt.texImage2D(Bt.TEXTURE_2D,0,this.format,this.format,Bt.UNSIGNED_BYTE,d):Bt.texImage2D(Bt.TEXTURE_2D,0,this.format,N,X,0,this.format,Bt.UNSIGNED_BYTE,d.data);else{var Xt=C||{x:0,y:0},he=Xt.x,Re=Xt.y;d instanceof vh||d instanceof Zc||d instanceof Ah||d instanceof Jc||th&&d instanceof th?Bt.texSubImage2D(Bt.TEXTURE_2D,0,he,Re,Bt.RGBA,Bt.UNSIGNED_BYTE,d):Bt.texSubImage2D(Bt.TEXTURE_2D,0,he,Re,N,X,Bt.RGBA,Bt.UNSIGNED_BYTE,d.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Bt.generateMipmap(Bt.TEXTURE_2D)},eh.prototype.bind=function(d,p,C){var N=this.context.gl;N.bindTexture(N.TEXTURE_2D,this.texture),C!==N.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(C=N.LINEAR),d!==this.filter&&(N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MAG_FILTER,d),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MIN_FILTER,C||d),this.filter=d),p!==this.wrap&&(N.texParameteri(N.TEXTURE_2D,N.TEXTURE_WRAP_S,p),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_WRAP_T,p),this.wrap=p)},eh.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},eh.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Hh=function(p){var C=this;this._callback=p,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){C._triggered=!1,C._callback()})};Hh.prototype.trigger=function(){var d=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){d._triggered=!1,d._callback()},0))},Hh.prototype.remove=function(){delete this._channel,this._callback=function(){}};var ph=function(p,C,N){this.target=p,this.parent=C,this.mapId=N,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},M(["receive","process"],this),this.invoker=new Hh(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=F()?p:n};function Yh(d,p,C){var N=2*Math.PI*6378137/256/Math.pow(2,C);return[d*N-2*Math.PI*6378137/2,p*N-2*Math.PI*6378137/2]}ph.prototype.send=function(d,p,C,N,X){var lt=this;X===void 0&&(X=!1);var Pt=Math.round(1e18*Math.random()).toString(36).substring(0,10);C&&(this.callbacks[Pt]=C);var Bt=k(this.globalScope)?void 0:[];return this.target.postMessage({id:Pt,type:d,hasCallback:!!C,targetMapId:N,mustQueue:X,sourceMapId:this.mapId,data:Fo(p,Bt)},Bt),{cancel:function(){C&&delete lt.callbacks[Pt],lt.target.postMessage({id:Pt,type:"<cancel>",targetMapId:N,sourceMapId:lt.mapId})}}},ph.prototype.receive=function(d){var p=d.data,C=p.id;if(C&&(!p.targetMapId||this.mapId===p.targetMapId))if(p.type==="<cancel>"){delete this.tasks[C];var N=this.cancelCallbacks[C];delete this.cancelCallbacks[C],N&&N()}else F()||p.mustQueue?(this.tasks[C]=p,this.taskQueue.push(C),this.invoker.trigger()):this.processTask(C,p)},ph.prototype.process=function(){if(this.taskQueue.length){var d=this.taskQueue.shift(),p=this.tasks[d];delete this.tasks[d],this.taskQueue.length&&this.invoker.trigger(),p&&this.processTask(d,p)}},ph.prototype.processTask=function(d,p){var C=this;if(p.type==="<response>"){var N=this.callbacks[d];delete this.callbacks[d],N&&(p.error?N(ko(p.error)):N(null,ko(p.data)))}else{var X=!1,lt=k(this.globalScope)?void 0:[],Pt=p.hasCallback?function(Re,Ge){X=!0,delete C.cancelCallbacks[d],C.target.postMessage({id:d,type:"<response>",sourceMapId:C.mapId,error:Re?Fo(Re):null,data:Fo(Ge,lt)},lt)}:function(Re){X=!0},Bt=null,Xt=ko(p.data);if(this.parent[p.type])Bt=this.parent[p.type](p.sourceMapId,Xt,Pt);else if(this.parent.getWorkerSource){var he=p.type.split(".");Bt=this.parent.getWorkerSource(p.sourceMapId,he[0],Xt.source)[he[1]](Xt,Pt)}else Pt(new Error("Could not find function "+p.type));!X&&Bt&&Bt.cancel&&(this.cancelCallbacks[d]=Bt.cancel)}},ph.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var nc=function(p,C){p&&(C?this.setSouthWest(p).setNorthEast(C):p.length===4?this.setSouthWest([p[0],p[1]]).setNorthEast([p[2],p[3]]):this.setSouthWest(p[0]).setNorthEast(p[1]))};nc.prototype.setNorthEast=function(d){return this._ne=d instanceof il?new il(d.lng,d.lat):il.convert(d),this},nc.prototype.setSouthWest=function(d){return this._sw=d instanceof il?new il(d.lng,d.lat):il.convert(d),this},nc.prototype.extend=function(d){var p,C,N=this._sw,X=this._ne;if(d instanceof il)p=d,C=d;else{if(!(d instanceof nc))return Array.isArray(d)?d.length===4||d.every(Array.isArray)?this.extend(nc.convert(d)):this.extend(il.convert(d)):this;if(C=d._ne,!(p=d._sw)||!C)return this}return N||X?(N.lng=Math.min(p.lng,N.lng),N.lat=Math.min(p.lat,N.lat),X.lng=Math.max(C.lng,X.lng),X.lat=Math.max(C.lat,X.lat)):(this._sw=new il(p.lng,p.lat),this._ne=new il(C.lng,C.lat)),this},nc.prototype.getCenter=function(){return new il((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},nc.prototype.getSouthWest=function(){return this._sw},nc.prototype.getNorthEast=function(){return this._ne},nc.prototype.getNorthWest=function(){return new il(this.getWest(),this.getNorth())},nc.prototype.getSouthEast=function(){return new il(this.getEast(),this.getSouth())},nc.prototype.getWest=function(){return this._sw.lng},nc.prototype.getSouth=function(){return this._sw.lat},nc.prototype.getEast=function(){return this._ne.lng},nc.prototype.getNorth=function(){return this._ne.lat},nc.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},nc.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},nc.prototype.isEmpty=function(){return!(this._sw&&this._ne)},nc.prototype.contains=function(d){var p=il.convert(d),C=p.lng,N=p.lat,X=this._sw.lng<=C&&C<=this._ne.lng;return this._sw.lng>this._ne.lng&&(X=this._sw.lng>=C&&C>=this._ne.lng),this._sw.lat<=N&&N<=this._ne.lat&&X},nc.convert=function(d){return!d||d instanceof nc?d:new nc(d)};var il=function(p,C){if(isNaN(p)||isNaN(C))throw new Error("Invalid LngLat object: ("+p+", "+C+")");if(this.lng=+p,this.lat=+C,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};il.prototype.wrap=function(){return new il(f(this.lng,-180,180),this.lat)},il.prototype.toArray=function(){return[this.lng,this.lat]},il.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},il.prototype.distanceTo=function(d){var p=Math.PI/180,C=this.lat*p,N=d.lat*p,X=Math.sin(C)*Math.sin(N)+Math.cos(C)*Math.cos(N)*Math.cos((d.lng-this.lng)*p);return 63710088e-1*Math.acos(Math.min(X,1))},il.prototype.toBounds=function(d){d===void 0&&(d=0);var p=360*d/40075017,C=p/Math.cos(Math.PI/180*this.lat);return new nc(new il(this.lng-C,this.lat-p),new il(this.lng+C,this.lat+p))},il.convert=function(d){if(d instanceof il)return d;if(Array.isArray(d)&&(d.length===2||d.length===3))return new il(Number(d[0]),Number(d[1]));if(!Array.isArray(d)&&typeof d=="object"&&d!==null)return new il(Number("lng"in d?d.lng:d.lon),Number(d.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var ad=2*Math.PI*63710088e-1;function Zh(d){return ad*Math.cos(d*Math.PI/180)}function od(d){return(180+d)/360}function sd(d){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+d*Math.PI/360)))/360}function ud(d,p){return d/Zh(p)}function Kh(d){return 360/Math.PI*Math.atan(Math.exp((180-360*d)*Math.PI/180))-90}var nh=function(p,C,N){N===void 0&&(N=0),this.x=+p,this.y=+C,this.z=+N};nh.fromLngLat=function(d,p){p===void 0&&(p=0);var C=il.convert(d);return new nh(od(C.lng),sd(C.lat),ud(p,C.lat))},nh.prototype.toLngLat=function(){return new il(360*this.x-180,Kh(this.y))},nh.prototype.toAltitude=function(){return this.z*Zh(Kh(this.y))},nh.prototype.meterInMercatorCoordinateUnits=function(){return 1/ad*(d=Kh(this.y),1/Math.cos(d*Math.PI/180));var d};var rh=function(p,C,N){this.z=p,this.x=C,this.y=N,this.key=Ch(0,p,p,C,N)};rh.prototype.equals=function(d){return this.z===d.z&&this.x===d.x&&this.y===d.y},rh.prototype.url=function(d,p){var C,N,X,lt,Pt,Bt=(N=this.y,X=this.z,lt=Yh(256*(C=this.x),256*(N=Math.pow(2,X)-N-1),X),Pt=Yh(256*(C+1),256*(N+1),X),lt[0]+","+lt[1]+","+Pt[0]+","+Pt[1]),Xt=function(he,Re,Ge){for(var He,cn="",Rn=he;Rn>0;Rn--)cn+=(Re&(He=1<<Rn-1)?1:0)+(Ge&He?2:0);return cn}(this.z,this.x,this.y);return d[(this.x+this.y)%d.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(p==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",Xt).replace("{bbox-epsg-3857}",Bt)},rh.prototype.getTilePoint=function(d){var p=Math.pow(2,this.z);return new r(8192*(d.x*p-this.x),8192*(d.y*p-this.y))},rh.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Xh=function(p,C){this.wrap=p,this.canonical=C,this.key=Ch(p,C.z,C.z,C.x,C.y)},rc=function(p,C,N,X,lt){this.overscaledZ=p,this.wrap=C,this.canonical=new rh(N,+X,+lt),this.key=Ch(C,p,N,X,lt)};function Ch(d,p,C,N,X){(d*=2)<0&&(d=-1*d-1);var lt=1<<C;return(lt*lt*d+lt*X+N).toString(36)+C.toString(36)+p.toString(36)}rc.prototype.equals=function(d){return this.overscaledZ===d.overscaledZ&&this.wrap===d.wrap&&this.canonical.equals(d.canonical)},rc.prototype.scaledTo=function(d){var p=this.canonical.z-d;return d>this.canonical.z?new rc(d,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new rc(d,this.wrap,d,this.canonical.x>>p,this.canonical.y>>p)},rc.prototype.calculateScaledKey=function(d,p){var C=this.canonical.z-d;return d>this.canonical.z?Ch(this.wrap*+p,d,this.canonical.z,this.canonical.x,this.canonical.y):Ch(this.wrap*+p,d,d,this.canonical.x>>C,this.canonical.y>>C)},rc.prototype.isChildOf=function(d){if(d.wrap!==this.wrap)return!1;var p=this.canonical.z-d.canonical.z;return d.overscaledZ===0||d.overscaledZ<this.overscaledZ&&d.canonical.x===this.canonical.x>>p&&d.canonical.y===this.canonical.y>>p},rc.prototype.children=function(d){if(this.overscaledZ>=d)return[new rc(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var p=this.canonical.z+1,C=2*this.canonical.x,N=2*this.canonical.y;return[new rc(p,this.wrap,p,C,N),new rc(p,this.wrap,p,C+1,N),new rc(p,this.wrap,p,C,N+1),new rc(p,this.wrap,p,C+1,N+1)]},rc.prototype.isLessThan=function(d){return this.wrap<d.wrap||!(this.wrap>d.wrap)&&(this.overscaledZ<d.overscaledZ||!(this.overscaledZ>d.overscaledZ)&&(this.canonical.x<d.canonical.x||!(this.canonical.x>d.canonical.x)&&this.canonical.y<d.canonical.y))},rc.prototype.wrapped=function(){return new rc(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},rc.prototype.unwrapTo=function(d){return new rc(this.overscaledZ,d,this.canonical.z,this.canonical.x,this.canonical.y)},rc.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},rc.prototype.toUnwrapped=function(){return new Xh(this.wrap,this.canonical)},rc.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},rc.prototype.getTilePoint=function(d){return this.canonical.getTilePoint(new nh(d.x-this.wrap,d.y))},Wi("CanonicalTileID",rh),Wi("OverscaledTileID",rc,{omit:["posMatrix"]});var Df=function(p,C,N){if(this.uid=p,C.height!==C.width)throw new RangeError("DEM tiles must be square");if(N&&N!=="mapbox"&&N!=="terrarium")return O('"'+N+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=C.height;var X=this.dim=C.height-2;this.data=new Uint32Array(C.data.buffer),this.encoding=N||"mapbox";for(var lt=0;lt<X;lt++)this.data[this._idx(-1,lt)]=this.data[this._idx(0,lt)],this.data[this._idx(X,lt)]=this.data[this._idx(X-1,lt)],this.data[this._idx(lt,-1)]=this.data[this._idx(lt,0)],this.data[this._idx(lt,X)]=this.data[this._idx(lt,X-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(X,-1)]=this.data[this._idx(X-1,0)],this.data[this._idx(-1,X)]=this.data[this._idx(0,X-1)],this.data[this._idx(X,X)]=this.data[this._idx(X-1,X-1)]};Df.prototype.get=function(d,p){var C=new Uint8Array(this.data.buffer),N=4*this._idx(d,p);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(C[N],C[N+1],C[N+2])},Df.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Df.prototype._idx=function(d,p){if(d<-1||d>=this.dim+1||p<-1||p>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(p+1)*this.stride+(d+1)},Df.prototype._unpackMapbox=function(d,p,C){return(256*d*256+256*p+C)/10-1e4},Df.prototype._unpackTerrarium=function(d,p,C){return 256*d+p+C/256-32768},Df.prototype.getPixels=function(){return new Yu({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Df.prototype.backfillBorder=function(d,p,C){if(this.dim!==d.dim)throw new Error("dem dimension mismatch");var N=p*this.dim,X=p*this.dim+this.dim,lt=C*this.dim,Pt=C*this.dim+this.dim;switch(p){case-1:N=X-1;break;case 1:X=N+1}switch(C){case-1:lt=Pt-1;break;case 1:Pt=lt+1}for(var Bt=-p*this.dim,Xt=-C*this.dim,he=lt;he<Pt;he++)for(var Re=N;Re<X;Re++)this.data[this._idx(Re,he)]=d.data[this._idx(Re+Bt,he+Xt)]},Wi("DEMData",Df);var jh=function(p){this._stringToNumber={},this._numberToString=[];for(var C=0;C<p.length;C++){var N=p[C];this._stringToNumber[N]=C,this._numberToString[C]=N}};jh.prototype.encode=function(d){return this._stringToNumber[d]},jh.prototype.decode=function(d){return this._numberToString[d]};var Bh=function(p,C,N,X,lt){this.type="Feature",this._vectorTileFeature=p,p._z=C,p._x=N,p._y=X,this.properties=p.properties,this.id=lt},Jh={geometry:{configurable:!0}};Jh.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Jh.geometry.set=function(d){this._geometry=d},Bh.prototype.toJSON=function(){var d={geometry:this.geometry};for(var p in this)p!=="_geometry"&&p!=="_vectorTileFeature"&&(d[p]=this[p]);return d},Object.defineProperties(Bh.prototype,Jh);var gh=function(){this.state={},this.stateChanges={},this.deletedStates={}};gh.prototype.updateState=function(d,p,C){var N=String(p);if(this.stateChanges[d]=this.stateChanges[d]||{},this.stateChanges[d][N]=this.stateChanges[d][N]||{},v(this.stateChanges[d][N],C),this.deletedStates[d]===null)for(var X in this.deletedStates[d]={},this.state[d])X!==N&&(this.deletedStates[d][X]=null);else if(this.deletedStates[d]&&this.deletedStates[d][N]===null)for(var lt in this.deletedStates[d][N]={},this.state[d][N])C[lt]||(this.deletedStates[d][N][lt]=null);else for(var Pt in C)this.deletedStates[d]&&this.deletedStates[d][N]&&this.deletedStates[d][N][Pt]===null&&delete this.deletedStates[d][N][Pt]},gh.prototype.removeFeatureState=function(d,p,C){if(this.deletedStates[d]!==null){var N=String(p);if(this.deletedStates[d]=this.deletedStates[d]||{},C&&p!==void 0)this.deletedStates[d][N]!==null&&(this.deletedStates[d][N]=this.deletedStates[d][N]||{},this.deletedStates[d][N][C]=null);else if(p!==void 0)if(this.stateChanges[d]&&this.stateChanges[d][N])for(C in this.deletedStates[d][N]={},this.stateChanges[d][N])this.deletedStates[d][N][C]=null;else this.deletedStates[d][N]=null;else this.deletedStates[d]=null}},gh.prototype.getState=function(d,p){var C=String(p),N=v({},(this.state[d]||{})[C],(this.stateChanges[d]||{})[C]);if(this.deletedStates[d]===null)return{};if(this.deletedStates[d]){var X=this.deletedStates[d][p];if(X===null)return{};for(var lt in X)delete N[lt]}return N},gh.prototype.initializeTileState=function(d,p){d.setFeatureState(this.state,p)},gh.prototype.coalesceChanges=function(d,p){var C={};for(var N in this.stateChanges){this.state[N]=this.state[N]||{};var X={};for(var lt in this.stateChanges[N])this.state[N][lt]||(this.state[N][lt]={}),v(this.state[N][lt],this.stateChanges[N][lt]),X[lt]=this.state[N][lt];C[N]=X}for(var Pt in this.deletedStates){this.state[Pt]=this.state[Pt]||{};var Bt={};if(this.deletedStates[Pt]===null)for(var Xt in this.state[Pt])Bt[Xt]={},this.state[Pt][Xt]={};else for(var he in this.deletedStates[Pt]){if(this.deletedStates[Pt][he]===null)this.state[Pt][he]={};else for(var Re=0,Ge=Object.keys(this.deletedStates[Pt][he]);Re<Ge.length;Re+=1)delete this.state[Pt][he][Ge[Re]];Bt[he]=this.state[Pt][he]}C[Pt]=C[Pt]||{},v(C[Pt],Bt)}if(this.stateChanges={},this.deletedStates={},Object.keys(C).length!==0)for(var He in d)d[He].setFeatureState(C,p)};var jf=function(p,C){this.tileID=p,this.x=p.canonical.x,this.y=p.canonical.y,this.z=p.canonical.z,this.grid=new Zs(8192,16,0),this.grid3D=new Zs(8192,16,0),this.featureIndexArray=new Ot,this.promoteId=C};function $h(d,p,C,N,X){return m(d,function(lt,Pt){var Bt=p instanceof re?p.get(Pt):null;return Bt&&Bt.evaluate?Bt.evaluate(C,N,X):Bt})}function Qh(d){for(var p=1/0,C=1/0,N=-1/0,X=-1/0,lt=0,Pt=d;lt<Pt.length;lt+=1){var Bt=Pt[lt];p=Math.min(p,Bt.x),C=Math.min(C,Bt.y),N=Math.max(N,Bt.x),X=Math.max(X,Bt.y)}return{minX:p,minY:C,maxX:N,maxY:X}}function ld(d,p){return p-d}jf.prototype.insert=function(d,p,C,N,X,lt){var Pt=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(C,N,X);for(var Bt=lt?this.grid3D:this.grid,Xt=0;Xt<p.length;Xt++){for(var he=p[Xt],Re=[1/0,1/0,-1/0,-1/0],Ge=0;Ge<he.length;Ge++){var He=he[Ge];Re[0]=Math.min(Re[0],He.x),Re[1]=Math.min(Re[1],He.y),Re[2]=Math.max(Re[2],He.x),Re[3]=Math.max(Re[3],He.y)}Re[0]<8192&&Re[1]<8192&&Re[2]>=0&&Re[3]>=0&&Bt.insert(Pt,Re[0],Re[1],Re[2],Re[3])}},jf.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new ru.VectorTile(new Me(this.rawTileData)).layers,this.sourceLayerCoder=new jh(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},jf.prototype.query=function(d,p,C,N){var X=this;this.loadVTLayers();for(var lt=d.params||{},Pt=8192/d.tileSize/d.scale,Bt=mu(lt.filter),Xt=d.queryGeometry,he=d.queryPadding*Pt,Re=Qh(Xt),Ge=this.grid.query(Re.minX-he,Re.minY-he,Re.maxX+he,Re.maxY+he),He=Qh(d.cameraQueryGeometry),cn=this.grid3D.query(He.minX-he,He.minY-he,He.maxX+he,He.maxY+he,function(Gr,pi,oi,Ni){return function(Bi,Qi,pa,fa,na){for(var eo=0,Ia=Bi;eo<Ia.length;eo+=1){var ga=Ia[eo];if(Qi<=ga.x&&pa<=ga.y&&fa>=ga.x&&na>=ga.y)return!0}var Uo=[new r(Qi,pa),new r(Qi,na),new r(fa,na),new r(fa,pa)];if(Bi.length>2){for(var xo=0,Xs=Uo;xo<Xs.length;xo+=1)if(Tc(Bi,Xs[xo]))return!0}for(var Xa=0;Xa<Bi.length-1;Xa++)if(Gc(Bi[Xa],Bi[Xa+1],Uo))return!0;return!1}(d.cameraQueryGeometry,Gr-he,pi-he,oi+he,Ni+he)}),Rn=0,Cn=cn;Rn<Cn.length;Rn+=1)Ge.push(Cn[Rn]);Ge.sort(ld);for(var $n,Xn={},_r=function(pi){var oi=Ge[pi];if(oi!==$n){$n=oi;var Ni=X.featureIndexArray.get(oi),Bi=null;X.loadMatchingFeature(Xn,Ni.bucketIndex,Ni.sourceLayerIndex,Ni.featureIndex,Bt,lt.layers,lt.availableImages,p,C,N,function(Qi,pa,fa){return Bi||(Bi=Yo(Qi)),pa.queryIntersectsFeature(Xt,Qi,fa,Bi,X.z,d.transform,Pt,d.pixelPosMatrix)})}},Nr=0;Nr<Ge.length;Nr++)_r(Nr);return Xn},jf.prototype.loadMatchingFeature=function(d,p,C,N,X,lt,Pt,Bt,Xt,he,Re){var Ge=this.bucketLayerIDs[p];if(!lt||function(Bi,Qi){for(var pa=0;pa<Bi.length;pa++)if(Qi.indexOf(Bi[pa])>=0)return!0;return!1}(lt,Ge)){var He=this.sourceLayerCoder.decode(C),cn=this.vtLayers[He].feature(N);if(X.needGeometry){var Rn=ks(cn,!0);if(!X.filter(new br(this.tileID.overscaledZ),Rn,this.tileID.canonical))return}else if(!X.filter(new br(this.tileID.overscaledZ),cn))return;for(var Cn=this.getId(cn,He),$n=0;$n<Ge.length;$n++){var Xn=Ge[$n];if(!(lt&&lt.indexOf(Xn)<0)){var _r=Bt[Xn];if(_r){var Nr={};Cn!==void 0&&he&&(Nr=he.getState(_r.sourceLayer||"_geojsonTileLayer",Cn));var Gr=v({},Xt[Xn]);Gr.paint=$h(Gr.paint,_r.paint,cn,Nr,Pt),Gr.layout=$h(Gr.layout,_r.layout,cn,Nr,Pt);var pi=!Re||Re(cn,_r,Nr);if(pi){var oi=new Bh(cn,this.z,this.x,this.y,Cn);oi.layer=Gr;var Ni=d[Xn];Ni===void 0&&(Ni=d[Xn]=[]),Ni.push({featureIndex:N,feature:oi,intersectionZ:pi})}}}}}},jf.prototype.lookupSymbolFeatures=function(d,p,C,N,X,lt,Pt,Bt){var Xt={};this.loadVTLayers();for(var he=mu(X),Re=0,Ge=d;Re<Ge.length;Re+=1)this.loadMatchingFeature(Xt,C,N,Ge[Re],he,lt,Pt,Bt,p);return Xt},jf.prototype.hasLayer=function(d){for(var p=0,C=this.bucketLayerIDs;p<C.length;p+=1)for(var N=0,X=C[p];N<X.length;N+=1)if(d===X[N])return!0;return!1},jf.prototype.getId=function(d,p){var C=d.id;return this.promoteId&&typeof(C=d.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[p]])=="boolean"&&(C=Number(C)),C},Wi("FeatureIndex",jf,{omit:["rawTileData","sourceLayerCoder"]});var Bl=function(p,C){this.tileID=p,this.uid=y(),this.uses=0,this.tileSize=C,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Bl.prototype.registerFadeDuration=function(d){var p=d+this.timeAdded;p<Lt.now()||this.fadeEndTime&&p<this.fadeEndTime||(this.fadeEndTime=p)},Bl.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},Bl.prototype.loadVectorData=function(d,p,C){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",d){for(var N in d.featureIndex&&(this.latestFeatureIndex=d.featureIndex,d.rawTileData?(this.latestRawTileData=d.rawTileData,this.latestFeatureIndex.rawTileData=d.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=d.collisionBoxArray,this.buckets=function(he,Re){var Ge={};if(!Re)return Ge;for(var He=function(){var $n=Rn[cn],Xn=$n.layerIds.map(function(Gr){return Re.getLayer(Gr)}).filter(Boolean);if(Xn.length!==0){$n.layers=Xn,$n.stateDependentLayerIds&&($n.stateDependentLayers=$n.stateDependentLayerIds.map(function(Gr){return Xn.filter(function(pi){return pi.id===Gr})[0]}));for(var _r=0,Nr=Xn;_r<Nr.length;_r+=1)Ge[Nr[_r].id]=$n}},cn=0,Rn=he;cn<Rn.length;cn+=1)He();return Ge}(d.buckets,p.style),this.hasSymbolBuckets=!1,this.buckets){var X=this.buckets[N];if(X instanceof Hr){if(this.hasSymbolBuckets=!0,!C)break;X.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var lt in this.buckets){var Pt=this.buckets[lt];if(Pt instanceof Hr&&Pt.hasRTLText){this.hasRTLText=!0,ui.isLoading()||ui.isLoaded()||ti()!=="deferred"||Fr();break}}for(var Bt in this.queryPadding=0,this.buckets){var Xt=this.buckets[Bt];this.queryPadding=Math.max(this.queryPadding,p.style.getLayer(Bt).queryRadius(Xt))}d.imageAtlas&&(this.imageAtlas=d.imageAtlas),d.glyphAtlasImage&&(this.glyphAtlasImage=d.glyphAtlasImage)}else this.collisionBoxArray=new I},Bl.prototype.unloadVectorData=function(){for(var d in this.buckets)this.buckets[d].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Bl.prototype.getBucket=function(d){return this.buckets[d.id]},Bl.prototype.upload=function(d){for(var p in this.buckets){var C=this.buckets[p];C.uploadPending()&&C.upload(d)}var N=d.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new eh(d,this.imageAtlas.image,N.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new eh(d,this.glyphAtlasImage,N.ALPHA),this.glyphAtlasImage=null)},Bl.prototype.prepare=function(d){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(d,this.imageAtlasTexture)},Bl.prototype.queryRenderedFeatures=function(d,p,C,N,X,lt,Pt,Bt,Xt,he){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:N,cameraQueryGeometry:X,scale:lt,tileSize:this.tileSize,pixelPosMatrix:he,transform:Bt,params:Pt,queryPadding:this.queryPadding*Xt},d,p,C):{}},Bl.prototype.querySourceFeatures=function(d,p){var C=this.latestFeatureIndex;if(C&&C.rawTileData){var N=C.loadVTLayers(),X=p?p.sourceLayer:"",lt=N._geojsonTileLayer||N[X];if(lt)for(var Pt=mu(p&&p.filter),Bt=this.tileID.canonical,Xt=Bt.z,he=Bt.x,Re=Bt.y,Ge={z:Xt,x:he,y:Re},He=0;He<lt.length;He++){var cn=lt.feature(He);if(Pt.needGeometry){var Rn=ks(cn,!0);if(!Pt.filter(new br(this.tileID.overscaledZ),Rn,this.tileID.canonical))continue}else if(!Pt.filter(new br(this.tileID.overscaledZ),cn))continue;var Cn=C.getId(cn,X),$n=new Bh(cn,Xt,he,Re,Cn);$n.tile=Ge,d.push($n)}}},Bl.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},Bl.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Bl.prototype.setExpiryData=function(d){var p=this.expirationTime;if(d.cacheControl){var C=Z(d.cacheControl);C["max-age"]&&(this.expirationTime=Date.now()+1e3*C["max-age"])}else d.expires&&(this.expirationTime=new Date(d.expires).getTime());if(this.expirationTime){var N=Date.now(),X=!1;if(this.expirationTime>N)X=!1;else if(p)if(this.expirationTime<p)X=!0;else{var lt=this.expirationTime-p;lt?this.expirationTime=N+Math.max(lt,3e4):X=!0}else X=!0;X?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Bl.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},Bl.prototype.setFeatureState=function(d,p){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(d).length!==0){var C=this.latestFeatureIndex.loadVTLayers();for(var N in this.buckets)if(p.style.hasLayer(N)){var X=this.buckets[N],lt=X.layers[0].sourceLayer||"_geojsonTileLayer",Pt=C[lt],Bt=d[lt];if(Pt&&Bt&&Object.keys(Bt).length!==0){X.update(Bt,Pt,this.imageAtlas&&this.imageAtlas.patternPositions||{});var Xt=p&&p.style&&p.style.getLayer(N);Xt&&(this.queryPadding=Math.max(this.queryPadding,Xt.queryRadius(X)))}}}},Bl.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},Bl.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Lt.now()},Bl.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Bl.prototype.setHoldDuration=function(d){this.symbolFadeHoldUntil=Lt.now()+d},Bl.prototype.setDependencies=function(d,p){for(var C={},N=0,X=p;N<X.length;N+=1)C[X[N]]=!0;this.dependencies[d]=C},Bl.prototype.hasDependency=function(d,p){for(var C=0,N=d;C<N.length;C+=1){var X=this.dependencies[N[C]];if(X){for(var lt=0,Pt=p;lt<Pt.length;lt+=1)if(X[Pt[lt]])return!0}}return!1};var Bf=n.performance,cd=function(p){this._marks={start:[p.url,"start"].join("#"),end:[p.url,"end"].join("#"),measure:p.url.toString()},Bf.mark(this._marks.start)};cd.prototype.finish=function(){Bf.mark(this._marks.end);var d=Bf.getEntriesByName(this._marks.measure);return d.length===0&&(Bf.measure(this._marks.measure,this._marks.start,this._marks.end),d=Bf.getEntriesByName(this._marks.measure),Bf.clearMarks(this._marks.start),Bf.clearMarks(this._marks.end),Bf.clearMeasures(this._marks.measure)),d},t.Actor=ph,t.AlphaImage=Kl,t.CanonicalTileID=rh,t.CollisionBoxArray=I,t.Color=zr,t.DEMData=Df,t.DataConstantProperty=ce,t.DictionaryCoder=jh,t.EXTENT=8192,t.ErrorEvent=ie,t.EvaluationParameters=br,t.Event=Vt,t.Evented=Ce,t.FeatureIndex=jf,t.FillBucket=Gn,t.FillExtrusionBucket=mo,t.ImageAtlas=oa,t.ImagePosition=xi,t.LineBucket=bc,t.LngLat=il,t.LngLatBounds=nc,t.MercatorCoordinate=nh,t.ONE_EM=24,t.OverscaledTileID=rc,t.Point=r,t.Point$1=r,t.Properties=vn,t.Protobuf=Me,t.RGBAImage=Yu,t.RequestManager=$,t.RequestPerformance=cd,t.ResourceType=Kn,t.SegmentVector=Ht,t.SourceFeatureState=gh,t.StructArrayLayout1ui2=Vu,t.StructArrayLayout2f1f2i16=ri,t.StructArrayLayout2i4=xr,t.StructArrayLayout3ui6=Ga,t.StructArrayLayout4i8=Vr,t.SymbolBucket=Hr,t.Texture=eh,t.Tile=Bl,t.Transitionable=Le,t.Uniform1f=Jr,t.Uniform1i=yr,t.Uniform2f=Wr,t.Uniform3f=bi,t.Uniform4f=ji,t.UniformColor=Hi,t.UniformMatrix4f=Pa,t.UnwrappedTileID=Xh,t.ValidationError=xe,t.WritingMode=Sa,t.ZoomHistory=Eu,t.add=function(d,p,C){return d[0]=p[0]+C[0],d[1]=p[1]+C[1],d[2]=p[2]+C[2],d},t.addDynamicAttributes=xn,t.asyncAll=function(d,p,C){if(!d.length)return C(null,[]);var N=d.length,X=new Array(d.length),lt=null;d.forEach(function(Pt,Bt){p(Pt,function(Xt,he){Xt&&(lt=Xt),X[Bt]=he,--N==0&&C(lt,X)})})},t.bezier=a,t.bindAll=M,t.browser=Lt,t.cacheEntryPossiblyAdded=function(d){++Xe>me&&(d.getActor().send("enforceCacheSizeLimit",Pe),Xe=0)},t.clamp=u,t.clearTileCache=function(d){var p=n.caches.delete("mapbox-tiles");d&&p.catch(d).then(function(){return d()})},t.clipLine=Xi,t.clone=function(d){var p=new dl(16);return p[0]=d[0],p[1]=d[1],p[2]=d[2],p[3]=d[3],p[4]=d[4],p[5]=d[5],p[6]=d[6],p[7]=d[7],p[8]=d[8],p[9]=d[9],p[10]=d[10],p[11]=d[11],p[12]=d[12],p[13]=d[13],p[14]=d[14],p[15]=d[15],p},t.clone$1=P,t.clone$2=function(d){var p=new dl(3);return p[0]=d[0],p[1]=d[1],p[2]=d[2],p},t.collisionCircleLayout=ke,t.config=_t,t.create=function(){var d=new dl(16);return dl!=Float32Array&&(d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[11]=0,d[12]=0,d[13]=0,d[14]=0),d[0]=1,d[5]=1,d[10]=1,d[15]=1,d},t.create$1=function(){var d=new dl(9);return dl!=Float32Array&&(d[1]=0,d[2]=0,d[3]=0,d[5]=0,d[6]=0,d[7]=0),d[0]=1,d[4]=1,d[8]=1,d},t.create$2=function(){var d=new dl(4);return dl!=Float32Array&&(d[1]=0,d[2]=0),d[0]=1,d[3]=1,d},t.createCommonjsModule=l,t.createExpression=Tu,t.createLayout=Wn,t.createStyleLayer=function(d){return d.type==="custom"?new jl(d):new Dc[d.type](d)},t.cross=function(d,p,C){var N=p[0],X=p[1],lt=p[2],Pt=C[0],Bt=C[1],Xt=C[2];return d[0]=X*Xt-lt*Bt,d[1]=lt*Pt-N*Xt,d[2]=N*Bt-X*Pt,d},t.deepEqual=function d(p,C){if(Array.isArray(p)){if(!Array.isArray(C)||p.length!==C.length)return!1;for(var N=0;N<p.length;N++)if(!d(p[N],C[N]))return!1;return!0}if(typeof p=="object"&&p!==null&&C!==null){if(typeof C!="object"||Object.keys(p).length!==Object.keys(C).length)return!1;for(var X in p)if(!d(p[X],C[X]))return!1;return!0}return p===C},t.dot=function(d,p){return d[0]*p[0]+d[1]*p[1]+d[2]*p[2]},t.dot$1=function(d,p){return d[0]*p[0]+d[1]*p[1]+d[2]*p[2]+d[3]*p[3]},t.ease=o,t.emitValidationErrors=uu,t.endsWith=x,t.enforceCacheSizeLimit=function(d){le(),Et&&Et.then(function(p){p.keys().then(function(C){for(var N=0;N<C.length-d;N++)p.delete(C[N])})})},t.evaluateSizeForFeature=Jl,t.evaluateSizeForZoom=Ll,t.evaluateVariableOffset=er,t.evented=Kr,t.extend=v,t.featureFilter=mu,t.filterObject=S,t.fromRotation=function(d,p){var C=Math.sin(p),N=Math.cos(p);return d[0]=N,d[1]=C,d[2]=0,d[3]=-C,d[4]=N,d[5]=0,d[6]=0,d[7]=0,d[8]=1,d},t.getAnchorAlignment=bl,t.getAnchorJustification=Or,t.getArrayBuffer=hr,t.getImage=Ae,t.getJSON=function(d,p){return Nn(v(d,{type:"json"}),p)},t.getRTLTextPluginStatus=ti,t.getReferrer=nn,t.getVideo=function(d,p){var C,N,X=n.document.createElement("video");X.muted=!0,X.onloadstart=function(){p(null,X)};for(var lt=0;lt<d.length;lt++){var Pt=n.document.createElement("source");C=d[lt],N=void 0,(N=n.document.createElement("a")).href=C,(N.protocol!==n.document.location.protocol||N.host!==n.document.location.host)&&(X.crossOrigin="Anonymous"),Pt.src=d[lt],X.appendChild(Pt)}return{cancel:function(){}}},t.identity=vl,t.invert=function(d,p){var C=p[0],N=p[1],X=p[2],lt=p[3],Pt=p[4],Bt=p[5],Xt=p[6],he=p[7],Re=p[8],Ge=p[9],He=p[10],cn=p[11],Rn=p[12],Cn=p[13],$n=p[14],Xn=p[15],_r=C*Bt-N*Pt,Nr=C*Xt-X*Pt,Gr=C*he-lt*Pt,pi=N*Xt-X*Bt,oi=N*he-lt*Bt,Ni=X*he-lt*Xt,Bi=Re*Cn-Ge*Rn,Qi=Re*$n-He*Rn,pa=Re*Xn-cn*Rn,fa=Ge*$n-He*Cn,na=Ge*Xn-cn*Cn,eo=He*Xn-cn*$n,Ia=_r*eo-Nr*na+Gr*fa+pi*pa-oi*Qi+Ni*Bi;return Ia?(d[0]=(Bt*eo-Xt*na+he*fa)*(Ia=1/Ia),d[1]=(X*na-N*eo-lt*fa)*Ia,d[2]=(Cn*Ni-$n*oi+Xn*pi)*Ia,d[3]=(He*oi-Ge*Ni-cn*pi)*Ia,d[4]=(Xt*pa-Pt*eo-he*Qi)*Ia,d[5]=(C*eo-X*pa+lt*Qi)*Ia,d[6]=($n*Gr-Rn*Ni-Xn*Nr)*Ia,d[7]=(Re*Ni-He*Gr+cn*Nr)*Ia,d[8]=(Pt*na-Bt*pa+he*Bi)*Ia,d[9]=(N*pa-C*na-lt*Bi)*Ia,d[10]=(Rn*oi-Cn*Gr+Xn*_r)*Ia,d[11]=(Ge*Gr-Re*oi-cn*_r)*Ia,d[12]=(Bt*Qi-Pt*fa-Xt*Bi)*Ia,d[13]=(C*fa-N*Qi+X*Bi)*Ia,d[14]=(Cn*Nr-Rn*pi-$n*_r)*Ia,d[15]=(Re*pi-Ge*Nr+He*_r)*Ia,d):null},t.isChar=Mi,t.isMapboxURL=dt,t.keysDifference=function(d,p){var C=[];for(var N in d)N in p||C.push(N);return C},t.makeRequest=Nn,t.mapObject=m,t.mercatorXfromLng=od,t.mercatorYfromLat=sd,t.mercatorZfromAltitude=ud,t.mul=rl,t.multiply=Wu,t.mvt=ru,t.nextPowerOfTwo=function(d){return d<=1?1:Math.pow(2,Math.ceil(Math.log(d)/Math.LN2))},t.normalize=function(d,p){var C=p[0],N=p[1],X=p[2],lt=C*C+N*N+X*X;return lt>0&&(lt=1/Math.sqrt(lt)),d[0]=p[0]*lt,d[1]=p[1]*lt,d[2]=p[2]*lt,d},t.number=qa,t.offscreenCanvasSupported=_n,t.ortho=function(d,p,C,N,X,lt,Pt){var Bt=1/(p-C),Xt=1/(N-X),he=1/(lt-Pt);return d[0]=-2*Bt,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=-2*Xt,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=2*he,d[11]=0,d[12]=(p+C)*Bt,d[13]=(X+N)*Xt,d[14]=(Pt+lt)*he,d[15]=1,d},t.parseGlyphPBF=function(d){return new Me(d).readFields($r,[])},t.pbf=Me,t.performSymbolLayout=function(d,p,C,N,X,lt,Pt){d.createArrays(),d.tilePixelRatio=8192/(512*d.overscaling),d.compareText={},d.iconsNeedLinear=!1;var Bt=d.layers[0].layout,Xt=d.layers[0]._unevaluatedLayout._values,he={};if(d.textSizeData.kind==="composite"){var Re=d.textSizeData,Ge=Re.maxZoom;he.compositeTextSizes=[Xt["text-size"].possiblyEvaluate(new br(Re.minZoom),Pt),Xt["text-size"].possiblyEvaluate(new br(Ge),Pt)]}if(d.iconSizeData.kind==="composite"){var He=d.iconSizeData,cn=He.maxZoom;he.compositeIconSizes=[Xt["icon-size"].possiblyEvaluate(new br(He.minZoom),Pt),Xt["icon-size"].possiblyEvaluate(new br(cn),Pt)]}he.layoutTextSize=Xt["text-size"].possiblyEvaluate(new br(d.zoom+1),Pt),he.layoutIconSize=Xt["icon-size"].possiblyEvaluate(new br(d.zoom+1),Pt),he.textMaxSize=Xt["text-size"].possiblyEvaluate(new br(18));for(var Rn=24*Bt.get("text-line-height"),Cn=Bt.get("text-rotation-alignment")==="map"&&Bt.get("symbol-placement")!=="point",$n=Bt.get("text-keep-upright"),Xn=Bt.get("text-size"),_r=function(){var oi=Gr[Nr],Ni=Bt.get("text-font").evaluate(oi,{},Pt).join(","),Bi=Xn.evaluate(oi,{},Pt),Qi=he.layoutTextSize.evaluate(oi,{},Pt),pa=he.layoutIconSize.evaluate(oi,{},Pt),fa={horizontal:{},vertical:void 0},na=oi.text,eo=[0,0];if(na){var Ia=na.toString(),ga=24*Bt.get("text-letter-spacing").evaluate(oi,{},Pt),Uo=function(ys){for(var ns=0,hu=ys;ns<hu.length;ns+=1)if(Mu=hu[ns].charCodeAt(0),Mi.Arabic(Mu)||Mi["Arabic Supplement"](Mu)||Mi["Arabic Extended-A"](Mu)||Mi["Arabic Presentation Forms-A"](Mu)||Mi["Arabic Presentation Forms-B"](Mu))return!1;var Mu;return!0}(Ia)?ga:0,xo=Bt.get("text-anchor").evaluate(oi,{},Pt),Xs=Bt.get("text-variable-anchor");if(!Xs){var Xa=Bt.get("text-radial-offset").evaluate(oi,{},Pt);eo=Xa?er(xo,[24*Xa,sn]):Bt.get("text-offset").evaluate(oi,{},Pt).map(function(ys){return 24*ys})}var es=Cn?"center":Bt.get("text-justify").evaluate(oi,{},Pt),al=Bt.get("symbol-placement"),Ps=al==="point"?24*Bt.get("text-max-width").evaluate(oi,{},Pt):0,ol=function(){d.allowVerticalPlacement&&el(Ia)&&(fa.vertical=mi(na,p,C,X,Ni,Ps,Rn,xo,"left",Uo,eo,Sa.vertical,!0,al,Qi,Bi))};if(!Cn&&Xs){for(var sl=es==="auto"?Xs.map(function(ys){return Or(ys)}):[es],Sl=!1,vc=0;vc<sl.length;vc++){var _l=sl[vc];if(!fa.horizontal[_l])if(Sl)fa.horizontal[_l]=fa.horizontal[0];else{var Oc=mi(na,p,C,X,Ni,Ps,Rn,"center",_l,Uo,eo,Sa.horizontal,!1,al,Qi,Bi);Oc&&(fa.horizontal[_l]=Oc,Sl=Oc.positionedLines.length===1)}}ol()}else{es==="auto"&&(es=Or(xo));var sc=mi(na,p,C,X,Ni,Ps,Rn,xo,es,Uo,eo,Sa.horizontal,!1,al,Qi,Bi);sc&&(fa.horizontal[es]=sc),ol(),el(Ia)&&Cn&&$n&&(fa.vertical=mi(na,p,C,X,Ni,Ps,Rn,xo,es,Uo,eo,Sa.vertical,!1,al,Qi,Bi))}}var wc=void 0,uc=!1;if(oi.icon&&oi.icon.name){var ic=N[oi.icon.name];ic&&(wc=function(ys,ns,hu){var Mu=bl(hu),pc=ns[0]-ys.displaySize[0]*Mu.horizontalAlign,Ru=ns[1]-ys.displaySize[1]*Mu.verticalAlign;return{image:ys,top:Ru,bottom:Ru+ys.displaySize[1],left:pc,right:pc+ys.displaySize[0]}}(X[oi.icon.name],Bt.get("icon-offset").evaluate(oi,{},Pt),Bt.get("icon-anchor").evaluate(oi,{},Pt)),uc=ic.sdf,d.sdfIcons===void 0?d.sdfIcons=ic.sdf:d.sdfIcons!==ic.sdf&&O("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ic.pixelRatio!==d.pixelRatio||Bt.get("icon-rotate").constantOr(1)!==0)&&(d.iconsNeedLinear=!0))}var lc=ur(fa.horizontal)||fa.vertical;d.iconsInText=!!lc&&lc.iconsInText,(lc||wc)&&function(ys,ns,hu,Mu,pc,Ru,ul,_c,hs,Nf,sf){var yf=Ru.textMaxSize.evaluate(ns,{});yf===void 0&&(yf=ul);var Kc,Mc=ys.layers[0].layout,Af=Mc.get("icon-offset").evaluate(ns,{},sf),Cf=ur(hu.horizontal),Ff=ul/24,mh=ys.tilePixelRatio*Ff,Mf=ys.tilePixelRatio*yf/24,yh=ys.tilePixelRatio*_c,zf=ys.tilePixelRatio*Mc.get("symbol-spacing"),ih=Mc.get("text-padding")*ys.tilePixelRatio,Nh=Mc.get("icon-padding")*ys.tilePixelRatio,Oh=Mc.get("text-max-angle")/180*Math.PI,Fh=Mc.get("text-rotation-alignment")==="map"&&Mc.get("symbol-placement")!=="point",ah=Mc.get("icon-rotation-alignment")==="map"&&Mc.get("symbol-placement")!=="point",xh=Mc.get("symbol-placement"),zh=zf/2,oh=Mc.get("icon-text-fit");Mu&&oh!=="none"&&(ys.allowVerticalPlacement&&hu.vertical&&(Kc=Zo(Mu,hu.vertical,oh,Mc.get("icon-text-fit-padding"),Af,Ff)),Cf&&(Mu=Zo(Mu,Cf,oh,Mc.get("icon-text-fit-padding"),Af,Ff)));var Uf=function(fd,Ph){Ph.x<0||Ph.x>=8192||Ph.y<0||Ph.y>=8192||function(Nl,uf,hd,kf,nd,tt,St,bt,gt,Tt,Dt,Yt,pe,Be,Qe,Bn,fr,qr,ci,Gi,zi,aa,no,uo,Ws){var rs,is,du,lo,vu,Du=Nl.addToLineVertexArray(uf,hd),ac=0,jo=0,Zl=0,pl=0,xf=-1,Th=-1,$c={},fh=Ie(""),$f=0,lf=0;if(bt._unevaluatedLayout.getValue("text-radial-offset")===void 0?($f=(rs=bt.layout.get("text-offset").evaluate(zi,{},uo).map(function(_d){return 24*_d}))[0],lf=rs[1]):($f=24*bt.layout.get("text-radial-offset").evaluate(zi,{},uo),lf=sn),Nl.allowVerticalPlacement&&kf.vertical){var dd=bt.layout.get("text-rotate").evaluate(zi,{},uo)+90;lo=new Dn(gt,uf,Tt,Dt,Yt,kf.vertical,pe,Be,Qe,dd),St&&(vu=new Dn(gt,uf,Tt,Dt,Yt,St,fr,qr,Qe,dd))}if(nd){var rd=bt.layout.get("icon-rotate").evaluate(zi,{}),vd=bt.layout.get("icon-text-fit")!=="none",pd=Mo(nd,rd,no,vd),id=St?Mo(St,rd,no,vd):void 0;du=new Dn(gt,uf,Tt,Dt,Yt,nd,fr,qr,!1,rd),ac=4*pd.length;var gd=Nl.iconSizeData,Dh=null;gd.kind==="source"?(Dh=[128*bt.layout.get("icon-size").evaluate(zi,{})])[0]>32640&&O(Nl.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):gd.kind==="composite"&&((Dh=[128*aa.compositeIconSizes[0].evaluate(zi,{},uo),128*aa.compositeIconSizes[1].evaluate(zi,{},uo)])[0]>32640||Dh[1]>32640)&&O(Nl.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),Nl.addSymbols(Nl.icon,pd,Dh,Gi,ci,zi,!1,uf,Du.lineStartIndex,Du.lineLength,-1,uo),xf=Nl.icon.placedSymbolArray.length-1,id&&(jo=4*id.length,Nl.addSymbols(Nl.icon,id,Dh,Gi,ci,zi,Sa.vertical,uf,Du.lineStartIndex,Du.lineLength,-1,uo),Th=Nl.icon.placedSymbolArray.length-1)}for(var md in kf.horizontal){var Wh=kf.horizontal[md];if(!is){fh=Ie(Wh.text);var Po=bt.layout.get("text-rotate").evaluate(zi,{},uo);is=new Dn(gt,uf,Tt,Dt,Yt,Wh,pe,Be,Qe,Po)}var Js=Wh.positionedLines.length===1;if(Zl+=Dr(Nl,uf,Wh,tt,bt,Qe,zi,Bn,Du,kf.vertical?Sa.horizontal:Sa.horizontalOnly,Js?Object.keys(kf.horizontal):[md],$c,xf,aa,uo),Js)break}kf.vertical&&(pl+=Dr(Nl,uf,kf.vertical,tt,bt,Qe,zi,Bn,Du,Sa.vertical,["vertical"],$c,Th,aa,uo));var us=is?is.boxStartIndex:Nl.collisionBoxArray.length,qi=is?is.boxEndIndex:Nl.collisionBoxArray.length,Qc=lo?lo.boxStartIndex:Nl.collisionBoxArray.length,Fl=lo?lo.boxEndIndex:Nl.collisionBoxArray.length,cf=du?du.boxStartIndex:Nl.collisionBoxArray.length,ff=du?du.boxEndIndex:Nl.collisionBoxArray.length,hh=vu?vu.boxStartIndex:Nl.collisionBoxArray.length,yd=vu?vu.boxEndIndex:Nl.collisionBoxArray.length,Qf=-1,xd=function(bd,Md){return bd&&bd.circleDiameter?Math.max(bd.circleDiameter,Md):Md};Qf=xd(is,Qf),Qf=xd(lo,Qf),Qf=xd(du,Qf);var Sd=(Qf=xd(vu,Qf))>-1?1:0;Sd&&(Qf*=Ws/24),Nl.glyphOffsetArray.length>=Hr.MAX_GLYPHS&&O("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),zi.sortKey!==void 0&&Nl.addToSortKeyRanges(Nl.symbolInstances.length,zi.sortKey),Nl.symbolInstances.emplaceBack(uf.x,uf.y,$c.right>=0?$c.right:-1,$c.center>=0?$c.center:-1,$c.left>=0?$c.left:-1,$c.vertical||-1,xf,Th,fh,us,qi,Qc,Fl,cf,ff,hh,yd,Tt,Zl,pl,ac,jo,Sd,0,pe,$f,lf,Qf)}(ys,Ph,fd,hu,Mu,pc,Kc,ys.layers[0],ys.collisionBoxArray,ns.index,ns.sourceLayerIndex,ys.index,mh,ih,Fh,hs,yh,Nh,ah,Af,ns,Ru,Nf,sf,ul)};if(xh==="line")for(var Jf=0,Uh=Xi(ns.geometry,0,0,8192,8192);Jf<Uh.length;Jf+=1)for(var wh=Uh[Jf],sh=0,Ih=Vs(wh,zf,Oh,hu.vertical||Cf,Mu,24,Mf,ys.overscaling,8192);sh<Ih.length;sh+=1){var bh=Ih[sh];Cf&&ar(ys,Cf.text,zh,bh)||Uf(wh,bh)}else if(xh==="line-center")for(var uh=0,Lh=ns.geometry;uh<Lh.length;uh+=1){var Rh=Lh[uh];if(Rh.length>1){var Eh=Ec(Rh,Oh,hu.vertical||Cf,Mu,24,Mf);Eh&&Uf(Rh,Eh)}}else if(ns.type==="Polygon")for(var Sh=0,lh=kt(ns.geometry,0);Sh<lh.length;Sh+=1){var _h=lh[Sh],ch=ta(_h,16);Uf(_h[0],new Ku(ch.x,ch.y,0))}else if(ns.type==="LineString")for(var Of=0,Mh=ns.geometry;Of<Mh.length;Of+=1){var kh=Mh[Of];Uf(kh,new Ku(kh[0].x,kh[0].y,0))}else if(ns.type==="Point")for(var Gh=0,qh=ns.geometry;Gh<qh.length;Gh+=1)for(var td=0,ed=qh[Gh];td<ed.length;td+=1){var Vh=ed[td];Uf([Vh],new Ku(Vh.x,Vh.y,0))}}(d,oi,fa,wc,N,he,Qi,pa,eo,uc,Pt)},Nr=0,Gr=d.features;Nr<Gr.length;Nr+=1)_r();lt&&d.generateCollisionDebugBuffers()},t.perspective=function(d,p,C,N,X){var lt,Pt=1/Math.tan(p/2);return d[0]=Pt/C,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=Pt,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[11]=-1,d[12]=0,d[13]=0,d[15]=0,X!=null&&X!==1/0?(d[10]=(X+N)*(lt=1/(N-X)),d[14]=2*X*N*lt):(d[10]=-1,d[14]=-2*N),d},t.pick=function(d,p){for(var C={},N=0;N<p.length;N++){var X=p[N];X in d&&(C[X]=d[X])}return C},t.plugin=ui,t.polygonIntersectsPolygon=wl,t.postMapLoadEvent=$t,t.postTurnstileEvent=ee,t.potpack=Ei,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.register=Wi,t.registerForPluginStateChange=function(d){return d({pluginStatus:tn,pluginURL:wn}),Kr.on("pluginStateChange",d),d},t.renderColorRamp=Hl,t.rotate=function(d,p,C){var N=p[0],X=p[1],lt=p[2],Pt=p[3],Bt=Math.sin(C),Xt=Math.cos(C);return d[0]=N*Xt+lt*Bt,d[1]=X*Xt+Pt*Bt,d[2]=N*-Bt+lt*Xt,d[3]=X*-Bt+Pt*Xt,d},t.rotateX=function(d,p,C){var N=Math.sin(C),X=Math.cos(C),lt=p[4],Pt=p[5],Bt=p[6],Xt=p[7],he=p[8],Re=p[9],Ge=p[10],He=p[11];return p!==d&&(d[0]=p[0],d[1]=p[1],d[2]=p[2],d[3]=p[3],d[12]=p[12],d[13]=p[13],d[14]=p[14],d[15]=p[15]),d[4]=lt*X+he*N,d[5]=Pt*X+Re*N,d[6]=Bt*X+Ge*N,d[7]=Xt*X+He*N,d[8]=he*X-lt*N,d[9]=Re*X-Pt*N,d[10]=Ge*X-Bt*N,d[11]=He*X-Xt*N,d},t.rotateZ=function(d,p,C){var N=Math.sin(C),X=Math.cos(C),lt=p[0],Pt=p[1],Bt=p[2],Xt=p[3],he=p[4],Re=p[5],Ge=p[6],He=p[7];return p!==d&&(d[8]=p[8],d[9]=p[9],d[10]=p[10],d[11]=p[11],d[12]=p[12],d[13]=p[13],d[14]=p[14],d[15]=p[15]),d[0]=lt*X+he*N,d[1]=Pt*X+Re*N,d[2]=Bt*X+Ge*N,d[3]=Xt*X+He*N,d[4]=he*X-lt*N,d[5]=Re*X-Pt*N,d[6]=Ge*X-Bt*N,d[7]=He*X-Xt*N,d},t.scale=function(d,p,C){var N=C[0],X=C[1],lt=C[2];return d[0]=p[0]*N,d[1]=p[1]*N,d[2]=p[2]*N,d[3]=p[3]*N,d[4]=p[4]*X,d[5]=p[5]*X,d[6]=p[6]*X,d[7]=p[7]*X,d[8]=p[8]*lt,d[9]=p[9]*lt,d[10]=p[10]*lt,d[11]=p[11]*lt,d[12]=p[12],d[13]=p[13],d[14]=p[14],d[15]=p[15],d},t.scale$1=function(d,p,C){return d[0]=p[0]*C,d[1]=p[1]*C,d[2]=p[2]*C,d[3]=p[3]*C,d},t.scale$2=function(d,p,C){return d[0]=p[0]*C,d[1]=p[1]*C,d[2]=p[2]*C,d},t.setCacheLimits=function(d,p){Pe=d,me=p},t.setRTLTextPlugin=function(d,p,C){if(C===void 0&&(C=!1),tn==="deferred"||tn==="loading"||tn==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");wn=Lt.resolveURL(d),tn="deferred",dn=p,Lr(),C||Fr()},t.sphericalToCartesian=function(d){var p=d[0],C=d[1],N=d[2];return C+=90,C*=Math.PI/180,N*=Math.PI/180,{x:p*Math.cos(C)*Math.sin(N),y:p*Math.sin(C)*Math.sin(N),z:p*Math.cos(N)}},t.sqrLen=function(d){var p=d[0],C=d[1];return p*p+C*C},t.styleSpec=ue,t.sub=function(d,p,C){return d[0]=p[0]-C[0],d[1]=p[1]-C[1],d[2]=p[2]-C[2],d},t.symbolSize=Yl,t.transformMat3=function(d,p,C){var N=p[0],X=p[1],lt=p[2];return d[0]=N*C[0]+X*C[3]+lt*C[6],d[1]=N*C[1]+X*C[4]+lt*C[7],d[2]=N*C[2]+X*C[5]+lt*C[8],d},t.transformMat4=ec,t.translate=function(d,p,C){var N,X,lt,Pt,Bt,Xt,he,Re,Ge,He,cn,Rn,Cn=C[0],$n=C[1],Xn=C[2];return p===d?(d[12]=p[0]*Cn+p[4]*$n+p[8]*Xn+p[12],d[13]=p[1]*Cn+p[5]*$n+p[9]*Xn+p[13],d[14]=p[2]*Cn+p[6]*$n+p[10]*Xn+p[14],d[15]=p[3]*Cn+p[7]*$n+p[11]*Xn+p[15]):(X=p[1],lt=p[2],Pt=p[3],Bt=p[4],Xt=p[5],he=p[6],Re=p[7],Ge=p[8],He=p[9],cn=p[10],Rn=p[11],d[0]=N=p[0],d[1]=X,d[2]=lt,d[3]=Pt,d[4]=Bt,d[5]=Xt,d[6]=he,d[7]=Re,d[8]=Ge,d[9]=He,d[10]=cn,d[11]=Rn,d[12]=N*Cn+Bt*$n+Ge*Xn+p[12],d[13]=X*Cn+Xt*$n+He*Xn+p[13],d[14]=lt*Cn+he*$n+cn*Xn+p[14],d[15]=Pt*Cn+Re*$n+Rn*Xn+p[15]),d},t.triggerPluginCompletionEvent=vr,t.uniqueId=y,t.validateCustomStyleLayer=function(d){var p=[],C=d.id;return C===void 0&&p.push({message:"layers."+C+': missing required property "id"'}),d.render===void 0&&p.push({message:"layers."+C+': missing required method "render"'}),d.renderingMode&&d.renderingMode!=="2d"&&d.renderingMode!=="3d"&&p.push({message:"layers."+C+': property "renderingMode" must be either "2d" or "3d"'}),p},t.validateLight=mc,t.validateStyle=ku,t.values=function(d){var p=[];for(var C in d)p.push(d[C]);return p},t.vectorTile=ru,t.version="1.13.1",t.warnOnce=O,t.webpSupported=mt,t.window=n,t.wrap=f}),e(["./shared"],function(t){"use strict";function l(Oe){var Ae=typeof Oe;if(Ae==="number"||Ae==="boolean"||Ae==="string"||Oe==null)return JSON.stringify(Oe);if(Array.isArray(Oe)){for(var Jt="[",ve=0,Vt=Oe;ve<Vt.length;ve+=1)Jt+=l(Vt[ve])+",";return Jt+"]"}for(var ie=Object.keys(Oe).sort(),Ce="{",ue=0;ue<ie.length;ue++)Ce+=JSON.stringify(ie[ue])+":"+l(Oe[ie[ue]])+",";return Ce+"}"}function s(Oe){for(var Ae="",Jt=0,ve=t.refProperties;Jt<ve.length;Jt+=1)Ae+="/"+l(Oe[ve[Jt]]);return Ae}var c=function(Ae){this.keyCache={},Ae&&this.replace(Ae)};c.prototype.replace=function(Oe){this._layerConfigs={},this._layers={},this.update(Oe,[])},c.prototype.update=function(Oe,Ae){for(var Jt=this,ve=0,Vt=Oe;ve<Vt.length;ve+=1){var ie=Vt[ve];this._layerConfigs[ie.id]=ie;var Ce=this._layers[ie.id]=t.createStyleLayer(ie);Ce._featureFilter=t.featureFilter(Ce.filter),this.keyCache[ie.id]&&delete this.keyCache[ie.id]}for(var ue=0,xe=Ae;ue<xe.length;ue+=1){var $e=xe[ue];delete this.keyCache[$e],delete this._layerConfigs[$e],delete this._layers[$e]}this.familiesBySource={};for(var Fn=0,rr=function(Ar,je){for(var We={},Ye=0;Ye<Ar.length;Ye++){var fn=je&&je[Ar[Ye].id]||s(Ar[Ye]);je&&(je[Ar[Ye].id]=fn);var mn=We[fn];mn||(mn=We[fn]=[]),mn.push(Ar[Ye])}var jn=[];for(var bn in We)jn.push(We[bn]);return jn}(t.values(this._layerConfigs),this.keyCache);Fn<rr.length;Fn+=1){var En=rr[Fn].map(function(Ar){return Jt._layers[Ar.id]}),Pn=En[0];if(Pn.visibility!=="none"){var Er=Pn.source||"",Pr=this.familiesBySource[Er];Pr||(Pr=this.familiesBySource[Er]={});var ln=Pn.sourceLayer||"_geojsonTileLayer",Cr=Pr[ln];Cr||(Cr=Pr[ln]=[]),Cr.push(En)}}};var r=function(Ae){var Jt={},ve=[];for(var Vt in Ae){var ie=Ae[Vt],Ce=Jt[Vt]={};for(var ue in ie){var xe=ie[+ue];if(xe&&xe.bitmap.width!==0&&xe.bitmap.height!==0){var $e={x:0,y:0,w:xe.bitmap.width+2,h:xe.bitmap.height+2};ve.push($e),Ce[ue]={rect:$e,metrics:xe.metrics}}}}var Fn=t.potpack(ve),rr=new t.AlphaImage({width:Fn.w||1,height:Fn.h||1});for(var En in Ae){var Pn=Ae[En];for(var Er in Pn){var Pr=Pn[+Er];if(Pr&&Pr.bitmap.width!==0&&Pr.bitmap.height!==0){var ln=Jt[En][Er].rect;t.AlphaImage.copy(Pr.bitmap,rr,{x:0,y:0},{x:ln.x+1,y:ln.y+1},Pr.bitmap)}}}this.image=rr,this.positions=Jt};t.register("GlyphAtlas",r);var h=function(Ae){this.tileID=new t.OverscaledTileID(Ae.tileID.overscaledZ,Ae.tileID.wrap,Ae.tileID.canonical.z,Ae.tileID.canonical.x,Ae.tileID.canonical.y),this.uid=Ae.uid,this.zoom=Ae.zoom,this.pixelRatio=Ae.pixelRatio,this.tileSize=Ae.tileSize,this.source=Ae.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Ae.showCollisionBoxes,this.collectResourceTiming=!!Ae.collectResourceTiming,this.returnDependencies=!!Ae.returnDependencies,this.promoteId=Ae.promoteId};function n(Oe,Ae,Jt){for(var ve=new t.EvaluationParameters(Ae),Vt=0,ie=Oe;Vt<ie.length;Vt+=1)ie[Vt].recalculate(ve,Jt)}function i(Oe,Ae){var Jt=t.getArrayBuffer(Oe.request,function(ve,Vt,ie,Ce){ve?Ae(ve):Vt&&Ae(null,{vectorTile:new t.vectorTile.VectorTile(new t.pbf(Vt)),rawData:Vt,cacheControl:ie,expires:Ce})});return function(){Jt.cancel(),Ae()}}h.prototype.parse=function(Oe,Ae,Jt,ve,Vt){var ie=this;this.status="parsing",this.data=Oe,this.collisionBoxArray=new t.CollisionBoxArray;var Ce=new t.DictionaryCoder(Object.keys(Oe.layers).sort()),ue=new t.FeatureIndex(this.tileID,this.promoteId);ue.bucketLayerIDs=[];var xe,$e,Fn,rr,En={},Pn={featureIndex:ue,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Jt},Er=Ae.familiesBySource[this.source];for(var Pr in Er){var ln=Oe.layers[Pr];if(ln){ln.version===1&&t.warnOnce('Vector tile source "'+this.source+'" layer "'+Pr+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Cr=Ce.encode(Pr),Ar=[],je=0;je<ln.length;je++){var We=ln.feature(je),Ye=ue.getId(We,Pr);Ar.push({feature:We,id:Ye,index:je,sourceLayerIndex:Cr})}for(var fn=0,mn=Er[Pr];fn<mn.length;fn+=1){var jn=mn[fn],bn=jn[0];bn.minzoom&&this.zoom<Math.floor(bn.minzoom)||bn.maxzoom&&this.zoom>=bn.maxzoom||bn.visibility!=="none"&&(n(jn,this.zoom,Jt),(En[bn.id]=bn.createBucket({index:ue.bucketLayerIDs.length,layers:jn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Cr,sourceID:this.source})).populate(Ar,Pn,this.tileID.canonical),ue.bucketLayerIDs.push(jn.map(function(Rr){return Rr.id})))}}}var Ln=t.mapObject(Pn.glyphDependencies,function(Rr){return Object.keys(Rr).map(Number)});Object.keys(Ln).length?ve.send("getGlyphs",{uid:this.uid,stacks:Ln},function(Rr,pr){xe||(xe=Rr,$e=pr,Mn.call(ie))}):$e={};var nr=Object.keys(Pn.iconDependencies);nr.length?ve.send("getImages",{icons:nr,source:this.source,tileID:this.tileID,type:"icons"},function(Rr,pr){xe||(xe=Rr,Fn=pr,Mn.call(ie))}):Fn={};var Yn=Object.keys(Pn.patternDependencies);function Mn(){if(xe)return Vt(xe);if($e&&Fn&&rr){var Rr=new r($e),pr=new t.ImageAtlas(Fn,rr);for(var zr in En){var Pi=En[zr];Pi instanceof t.SymbolBucket?(n(Pi.layers,this.zoom,Jt),t.performSymbolLayout(Pi,$e,Rr.positions,Fn,pr.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Pi.hasPattern&&(Pi instanceof t.LineBucket||Pi instanceof t.FillBucket||Pi instanceof t.FillExtrusionBucket)&&(n(Pi.layers,this.zoom,Jt),Pi.addFeatures(Pn,this.tileID.canonical,pr.patternPositions))}this.status="done",Vt(null,{buckets:t.values(En).filter(function(Oa){return!Oa.isEmpty()}),featureIndex:ue,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Rr.image,imageAtlas:pr,glyphMap:this.returnDependencies?$e:null,iconMap:this.returnDependencies?Fn:null,glyphPositions:this.returnDependencies?Rr.positions:null})}}Yn.length?ve.send("getImages",{icons:Yn,source:this.source,tileID:this.tileID,type:"patterns"},function(Rr,pr){xe||(xe=Rr,rr=pr,Mn.call(ie))}):rr={},Mn.call(this)};var a=function(Ae,Jt,ve,Vt){this.actor=Ae,this.layerIndex=Jt,this.availableImages=ve,this.loadVectorData=Vt||i,this.loading={},this.loaded={}};a.prototype.loadTile=function(Oe,Ae){var Jt=this,ve=Oe.uid;this.loading||(this.loading={});var Vt=!!(Oe&&Oe.request&&Oe.request.collectResourceTiming)&&new t.RequestPerformance(Oe.request),ie=this.loading[ve]=new h(Oe);ie.abort=this.loadVectorData(Oe,function(Ce,ue){if(delete Jt.loading[ve],Ce||!ue)return ie.status="done",Jt.loaded[ve]=ie,Ae(Ce);var xe=ue.rawData,$e={};ue.expires&&($e.expires=ue.expires),ue.cacheControl&&($e.cacheControl=ue.cacheControl);var Fn={};if(Vt){var rr=Vt.finish();rr&&(Fn.resourceTiming=JSON.parse(JSON.stringify(rr)))}ie.vectorTile=ue.vectorTile,ie.parse(ue.vectorTile,Jt.layerIndex,Jt.availableImages,Jt.actor,function(En,Pn){if(En||!Pn)return Ae(En);Ae(null,t.extend({rawTileData:xe.slice(0)},Pn,$e,Fn))}),Jt.loaded=Jt.loaded||{},Jt.loaded[ve]=ie})},a.prototype.reloadTile=function(Oe,Ae){var Jt=this,ve=this.loaded,Vt=Oe.uid,ie=this;if(ve&&ve[Vt]){var Ce=ve[Vt];Ce.showCollisionBoxes=Oe.showCollisionBoxes;var ue=function($e,Fn){var rr=Ce.reloadCallback;rr&&(delete Ce.reloadCallback,Ce.parse(Ce.vectorTile,ie.layerIndex,Jt.availableImages,ie.actor,rr)),Ae($e,Fn)};Ce.status==="parsing"?Ce.reloadCallback=ue:Ce.status==="done"&&(Ce.vectorTile?Ce.parse(Ce.vectorTile,this.layerIndex,this.availableImages,this.actor,ue):ue())}},a.prototype.abortTile=function(Oe,Ae){var Jt=this.loading,ve=Oe.uid;Jt&&Jt[ve]&&Jt[ve].abort&&(Jt[ve].abort(),delete Jt[ve]),Ae()},a.prototype.removeTile=function(Oe,Ae){var Jt=this.loaded,ve=Oe.uid;Jt&&Jt[ve]&&delete Jt[ve],Ae()};var o=t.window.ImageBitmap,u=function(){this.loaded={}};function f(Oe,Ae){if(Oe.length!==0){v(Oe[0],Ae);for(var Jt=1;Jt<Oe.length;Jt++)v(Oe[Jt],!Ae)}}function v(Oe,Ae){for(var Jt=0,ve=0,Vt=Oe.length,ie=Vt-1;ve<Vt;ie=ve++)Jt+=(Oe[ve][0]-Oe[ie][0])*(Oe[ie][1]+Oe[ve][1]);Jt>=0!=!!Ae&&Oe.reverse()}u.prototype.loadTile=function(Oe,Ae){var Jt=Oe.uid,ve=Oe.encoding,Vt=Oe.rawImageData,ie=o&&Vt instanceof o?this.getImageData(Vt):Vt,Ce=new t.DEMData(Jt,ie,ve);this.loaded=this.loaded||{},this.loaded[Jt]=Ce,Ae(null,Ce)},u.prototype.getImageData=function(Oe){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Oe.width,Oe.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Oe.width,this.offscreenCanvas.height=Oe.height,this.offscreenCanvasContext.drawImage(Oe,0,0,Oe.width,Oe.height);var Ae=this.offscreenCanvasContext.getImageData(-1,-1,Oe.width+2,Oe.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new t.RGBAImage({width:Ae.width,height:Ae.height},Ae.data)},u.prototype.removeTile=function(Oe){var Ae=this.loaded,Jt=Oe.uid;Ae&&Ae[Jt]&&delete Ae[Jt]};var b=t.vectorTile.VectorTileFeature.prototype.toGeoJSON,y=function(Ae){this._feature=Ae,this.extent=t.EXTENT,this.type=Ae.type,this.properties=Ae.tags,"id"in Ae&&!isNaN(Ae.id)&&(this.id=parseInt(Ae.id,10))};y.prototype.loadGeometry=function(){if(this._feature.type===1){for(var Oe=[],Ae=0,Jt=this._feature.geometry;Ae<Jt.length;Ae+=1){var ve=Jt[Ae];Oe.push([new t.Point$1(ve[0],ve[1])])}return Oe}for(var Vt=[],ie=0,Ce=this._feature.geometry;ie<Ce.length;ie+=1){for(var ue=[],xe=0,$e=Ce[ie];xe<$e.length;xe+=1){var Fn=$e[xe];ue.push(new t.Point$1(Fn[0],Fn[1]))}Vt.push(ue)}return Vt},y.prototype.toGeoJSON=function(Oe,Ae,Jt){return b.call(this,Oe,Ae,Jt)};var g=function(Ae){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=Ae.length,this._features=Ae};g.prototype.feature=function(Oe){return new y(this._features[Oe])};var _=t.vectorTile.VectorTileFeature,M=x;function x(Oe,Ae){this.options=Ae||{},this.features=Oe,this.length=Oe.length}function m(Oe,Ae){this.id=typeof Oe.id=="number"?Oe.id:void 0,this.type=Oe.type,this.rawGeometry=Oe.type===1?[Oe.geometry]:Oe.geometry,this.properties=Oe.tags,this.extent=Ae||4096}x.prototype.feature=function(Oe){return new m(this.features[Oe],this.options.extent)},m.prototype.loadGeometry=function(){var Oe=this.rawGeometry;this.geometry=[];for(var Ae=0;Ae<Oe.length;Ae++){for(var Jt=Oe[Ae],ve=[],Vt=0;Vt<Jt.length;Vt++)ve.push(new t.Point$1(Jt[Vt][0],Jt[Vt][1]));this.geometry.push(ve)}return this.geometry},m.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Oe=this.geometry,Ae=1/0,Jt=-1/0,ve=1/0,Vt=-1/0,ie=0;ie<Oe.length;ie++)for(var Ce=Oe[ie],ue=0;ue<Ce.length;ue++){var xe=Ce[ue];Ae=Math.min(Ae,xe.x),Jt=Math.max(Jt,xe.x),ve=Math.min(ve,xe.y),Vt=Math.max(Vt,xe.y)}return[Ae,ve,Jt,Vt]},m.prototype.toGeoJSON=_.prototype.toGeoJSON;var S=A,P=M;function A(Oe){var Ae=new t.pbf;return function(Jt,ve){for(var Vt in Jt.layers)ve.writeMessage(3,O,Jt.layers[Vt])}(Oe,Ae),Ae.finish()}function O(Oe,Ae){var Jt;Ae.writeVarintField(15,Oe.version||1),Ae.writeStringField(1,Oe.name||""),Ae.writeVarintField(5,Oe.extent||4096);var ve={keys:[],values:[],keycache:{},valuecache:{}};for(Jt=0;Jt<Oe.length;Jt++)ve.feature=Oe.feature(Jt),Ae.writeMessage(2,R,ve);var Vt=ve.keys;for(Jt=0;Jt<Vt.length;Jt++)Ae.writeStringField(3,Vt[Jt]);var ie=ve.values;for(Jt=0;Jt<ie.length;Jt++)Ae.writeMessage(4,k,ie[Jt])}function R(Oe,Ae){var Jt=Oe.feature;Jt.id!==void 0&&Ae.writeVarintField(1,Jt.id),Ae.writeMessage(2,W,Oe),Ae.writeVarintField(3,Jt.type),Ae.writeMessage(4,V,Jt)}function W(Oe,Ae){var Jt=Oe.feature,ve=Oe.keys,Vt=Oe.values,ie=Oe.keycache,Ce=Oe.valuecache;for(var ue in Jt.properties){var xe=ie[ue];xe===void 0&&(ve.push(ue),ie[ue]=xe=ve.length-1),Ae.writeVarint(xe);var $e=Jt.properties[ue],Fn=typeof $e;Fn!=="string"&&Fn!=="boolean"&&Fn!=="number"&&($e=JSON.stringify($e));var rr=Fn+":"+$e,En=Ce[rr];En===void 0&&(Vt.push($e),Ce[rr]=En=Vt.length-1),Ae.writeVarint(En)}}function F(Oe,Ae){return(Ae<<3)+(7&Oe)}function Z(Oe){return Oe<<1^Oe>>31}function V(Oe,Ae){for(var Jt=Oe.loadGeometry(),ve=Oe.type,Vt=0,ie=0,Ce=Jt.length,ue=0;ue<Ce;ue++){var xe=Jt[ue],$e=1;ve===1&&($e=xe.length),Ae.writeVarint(F(1,$e));for(var Fn=ve===3?xe.length-1:xe.length,rr=0;rr<Fn;rr++){rr===1&&ve!==1&&Ae.writeVarint(F(2,Fn-1));var En=xe[rr].x-Vt,Pn=xe[rr].y-ie;Ae.writeVarint(Z(En)),Ae.writeVarint(Z(Pn)),Vt+=En,ie+=Pn}ve===3&&Ae.writeVarint(F(7,1))}}function k(Oe,Ae){var Jt=typeof Oe;Jt==="string"?Ae.writeStringField(1,Oe):Jt==="boolean"?Ae.writeBooleanField(7,Oe):Jt==="number"&&(Oe%1!=0?Ae.writeDoubleField(3,Oe):Oe<0?Ae.writeSVarintField(6,Oe):Ae.writeVarintField(5,Oe))}function Y(Oe,Ae,Jt,ve){K(Oe,Jt,ve),K(Ae,2*Jt,2*ve),K(Ae,2*Jt+1,2*ve+1)}function K(Oe,Ae,Jt){var ve=Oe[Ae];Oe[Ae]=Oe[Jt],Oe[Jt]=ve}function it(Oe,Ae,Jt,ve){var Vt=Oe-Jt,ie=Ae-ve;return Vt*Vt+ie*ie}S.fromVectorTileJs=A,S.fromGeojsonVt=function(Oe,Ae){Ae=Ae||{};var Jt={};for(var ve in Oe)Jt[ve]=new M(Oe[ve].features,Ae),Jt[ve].name=ve,Jt[ve].version=Ae.version,Jt[ve].extent=Ae.extent;return A({layers:Jt})},S.GeoJSONWrapper=P;var ct=function(Ae){return Ae[0]},ht=function(Ae){return Ae[1]},ut=function(Ae,Jt,ve,Vt,ie){Jt===void 0&&(Jt=ct),ve===void 0&&(ve=ht),Vt===void 0&&(Vt=64),ie===void 0&&(ie=Float64Array),this.nodeSize=Vt,this.points=Ae;for(var Ce=Ae.length<65536?Uint16Array:Uint32Array,ue=this.ids=new Ce(Ae.length),xe=this.coords=new ie(2*Ae.length),$e=0;$e<Ae.length;$e++)ue[$e]=$e,xe[2*$e]=Jt(Ae[$e]),xe[2*$e+1]=ve(Ae[$e]);(function Fn(rr,En,Pn,Er,Pr,ln){if(!(Pr-Er<=Pn)){var Cr=Er+Pr>>1;(function Ar(je,We,Ye,fn,mn,jn){for(;mn>fn;){if(mn-fn>600){var bn=mn-fn+1,Ln=Ye-fn+1,nr=Math.log(bn),Yn=.5*Math.exp(2*nr/3),Mn=.5*Math.sqrt(nr*Yn*(bn-Yn)/bn)*(Ln-bn/2<0?-1:1);Ar(je,We,Ye,Math.max(fn,Math.floor(Ye-Ln*Yn/bn+Mn)),Math.min(mn,Math.floor(Ye+(bn-Ln)*Yn/bn+Mn)),jn)}var Rr=We[2*Ye+jn],pr=fn,zr=mn;for(Y(je,We,fn,Ye),We[2*mn+jn]>Rr&&Y(je,We,fn,mn);pr<zr;){for(Y(je,We,pr,zr),pr++,zr--;We[2*pr+jn]<Rr;)pr++;for(;We[2*zr+jn]>Rr;)zr--}We[2*fn+jn]===Rr?Y(je,We,fn,zr):Y(je,We,++zr,mn),zr<=Ye&&(fn=zr+1),Ye<=zr&&(mn=zr-1)}})(rr,En,Cr,Er,Pr,ln%2),Fn(rr,En,Pn,Er,Cr-1,ln+1),Fn(rr,En,Pn,Cr+1,Pr,ln+1)}})(ue,xe,Vt,0,ue.length-1,0)};ut.prototype.range=function(Oe,Ae,Jt,ve){return function(Vt,ie,Ce,ue,xe,$e,Fn){for(var rr,En,Pn=[0,Vt.length-1,0],Er=[];Pn.length;){var Pr=Pn.pop(),ln=Pn.pop(),Cr=Pn.pop();if(ln-Cr<=Fn)for(var Ar=Cr;Ar<=ln;Ar++)En=ie[2*Ar+1],(rr=ie[2*Ar])>=Ce&&rr<=xe&&En>=ue&&En<=$e&&Er.push(Vt[Ar]);else{var je=Math.floor((Cr+ln)/2);En=ie[2*je+1],(rr=ie[2*je])>=Ce&&rr<=xe&&En>=ue&&En<=$e&&Er.push(Vt[je]);var We=(Pr+1)%2;(Pr===0?Ce<=rr:ue<=En)&&(Pn.push(Cr),Pn.push(je-1),Pn.push(We)),(Pr===0?xe>=rr:$e>=En)&&(Pn.push(je+1),Pn.push(ln),Pn.push(We))}}return Er}(this.ids,this.coords,Oe,Ae,Jt,ve,this.nodeSize)},ut.prototype.within=function(Oe,Ae,Jt){return function(ve,Vt,ie,Ce,ue,xe){for(var $e=[0,ve.length-1,0],Fn=[],rr=ue*ue;$e.length;){var En=$e.pop(),Pn=$e.pop(),Er=$e.pop();if(Pn-Er<=xe)for(var Pr=Er;Pr<=Pn;Pr++)it(Vt[2*Pr],Vt[2*Pr+1],ie,Ce)<=rr&&Fn.push(ve[Pr]);else{var ln=Math.floor((Er+Pn)/2),Cr=Vt[2*ln],Ar=Vt[2*ln+1];it(Cr,Ar,ie,Ce)<=rr&&Fn.push(ve[ln]);var je=(En+1)%2;(En===0?ie-ue<=Cr:Ce-ue<=Ar)&&($e.push(Er),$e.push(ln-1),$e.push(je)),(En===0?ie+ue>=Cr:Ce+ue>=Ar)&&($e.push(ln+1),$e.push(Pn),$e.push(je))}}return Fn}(this.ids,this.coords,Oe,Ae,Jt,this.nodeSize)};var It={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Ae){return Ae}},Nt=function(Ae){this.options=z(Object.create(It),Ae),this.trees=new Array(this.options.maxZoom+1)};function Lt(Oe,Ae,Jt,ve,Vt){return{x:Oe,y:Ae,zoom:1/0,id:Jt,parentId:-1,numPoints:ve,properties:Vt}}function _t(Oe,Ae){var Jt=Oe.geometry.coordinates,ve=Jt[1];return{x:rt(Jt[0]),y:Mt(ve),zoom:1/0,index:Ae,parentId:-1}}function mt(Oe){return{type:"Feature",id:Oe.id,properties:At(Oe),geometry:{type:"Point",coordinates:[(ve=Oe.x,360*(ve-.5)),(Ae=Oe.y,Jt=(180-360*Ae)*Math.PI/180,360*Math.atan(Math.exp(Jt))/Math.PI-90)]}};var Ae,Jt,ve}function At(Oe){var Ae=Oe.numPoints,Jt=Ae>=1e4?Math.round(Ae/1e3)+"k":Ae>=1e3?Math.round(Ae/100)/10+"k":Ae;return z(z({},Oe.properties),{cluster:!0,cluster_id:Oe.id,point_count:Ae,point_count_abbreviated:Jt})}function rt(Oe){return Oe/360+.5}function Mt(Oe){var Ae=Math.sin(Oe*Math.PI/180),Jt=.5-.25*Math.log((1+Ae)/(1-Ae))/Math.PI;return Jt<0?0:Jt>1?1:Jt}function z(Oe,Ae){for(var Jt in Ae)Oe[Jt]=Ae[Jt];return Oe}function $(Oe){return Oe.x}function dt(Oe){return Oe.y}function et(Oe,Ae,Jt,ve,Vt,ie){var Ce=Vt-Jt,ue=ie-ve;if(Ce!==0||ue!==0){var xe=((Oe-Jt)*Ce+(Ae-ve)*ue)/(Ce*Ce+ue*ue);xe>1?(Jt=Vt,ve=ie):xe>0&&(Jt+=Ce*xe,ve+=ue*xe)}return(Ce=Oe-Jt)*Ce+(ue=Ae-ve)*ue}function ot(Oe,Ae,Jt,ve){var Vt={id:Oe===void 0?null:Oe,type:Ae,geometry:Jt,tags:ve,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ie){var Ce=ie.geometry,ue=ie.type;if(ue==="Point"||ue==="MultiPoint"||ue==="LineString")pt(ie,Ce);else if(ue==="Polygon"||ue==="MultiLineString")for(var xe=0;xe<Ce.length;xe++)pt(ie,Ce[xe]);else if(ue==="MultiPolygon")for(xe=0;xe<Ce.length;xe++)for(var $e=0;$e<Ce[xe].length;$e++)pt(ie,Ce[xe][$e])}(Vt),Vt}function pt(Oe,Ae){for(var Jt=0;Jt<Ae.length;Jt+=3)Oe.minX=Math.min(Oe.minX,Ae[Jt]),Oe.minY=Math.min(Oe.minY,Ae[Jt+1]),Oe.maxX=Math.max(Oe.maxX,Ae[Jt]),Oe.maxY=Math.max(Oe.maxY,Ae[Jt+1])}function H(Oe,Ae,Jt,ve){if(Ae.geometry){var Vt=Ae.geometry.coordinates,ie=Ae.geometry.type,Ce=Math.pow(Jt.tolerance/((1<<Jt.maxZoom)*Jt.extent),2),ue=[],xe=Ae.id;if(Jt.promoteId?xe=Ae.properties[Jt.promoteId]:Jt.generateId&&(xe=ve||0),ie==="Point")nt(Vt,ue);else if(ie==="MultiPoint")for(var $e=0;$e<Vt.length;$e++)nt(Vt[$e],ue);else if(ie==="LineString")at(Vt,ue,Ce,!1);else if(ie==="MultiLineString"){if(Jt.lineMetrics){for($e=0;$e<Vt.length;$e++)at(Vt[$e],ue=[],Ce,!1),Oe.push(ot(xe,"LineString",ue,Ae.properties));return}q(Vt,ue,Ce,!1)}else if(ie==="Polygon")q(Vt,ue,Ce,!0);else{if(ie!=="MultiPolygon"){if(ie==="GeometryCollection"){for($e=0;$e<Ae.geometry.geometries.length;$e++)H(Oe,{id:xe,geometry:Ae.geometry.geometries[$e],properties:Ae.properties},Jt,ve);return}throw new Error("Input data is not a valid GeoJSON object.")}for($e=0;$e<Vt.length;$e++){var Fn=[];q(Vt[$e],Fn,Ce,!0),ue.push(Fn)}}Oe.push(ot(xe,ie,ue,Ae.properties))}}function nt(Oe,Ae){Ae.push(Et(Oe[0])),Ae.push(vt(Oe[1])),Ae.push(0)}function at(Oe,Ae,Jt,ve){for(var Vt,ie,Ce=0,ue=0;ue<Oe.length;ue++){var xe=Et(Oe[ue][0]),$e=vt(Oe[ue][1]);Ae.push(xe),Ae.push($e),Ae.push(0),ue>0&&(Ce+=ve?(Vt*$e-xe*ie)/2:Math.sqrt(Math.pow(xe-Vt,2)+Math.pow($e-ie,2))),Vt=xe,ie=$e}var Fn=Ae.length-3;Ae[2]=1,function rr(En,Pn,Er,Pr){for(var ln,Cr=Pr,Ar=Er-Pn>>1,je=Er-Pn,We=En[Pn],Ye=En[Pn+1],fn=En[Er],mn=En[Er+1],jn=Pn+3;jn<Er;jn+=3){var bn=et(En[jn],En[jn+1],We,Ye,fn,mn);if(bn>Cr)ln=jn,Cr=bn;else if(bn===Cr){var Ln=Math.abs(jn-Ar);Ln<je&&(ln=jn,je=Ln)}}Cr>Pr&&(ln-Pn>3&&rr(En,Pn,ln,Pr),En[ln+2]=Cr,Er-ln>3&&rr(En,ln,Er,Pr))}(Ae,0,Fn,Jt),Ae[Fn+2]=1,Ae.size=Math.abs(Ce),Ae.start=0,Ae.end=Ae.size}function q(Oe,Ae,Jt,ve){for(var Vt=0;Vt<Oe.length;Vt++){var ie=[];at(Oe[Vt],ie,Jt,ve),Ae.push(ie)}}function Et(Oe){return Oe/360+.5}function vt(Oe){var Ae=Math.sin(Oe*Math.PI/180),Jt=.5-.25*Math.log((1+Ae)/(1-Ae))/Math.PI;return Jt<0?0:Jt>1?1:Jt}function Ft(Oe,Ae,Jt,ve,Vt,ie,Ce,ue){if(ve/=Ae,ie>=(Jt/=Ae)&&Ce<ve)return Oe;if(Ce<Jt||ie>=ve)return null;for(var xe=[],$e=0;$e<Oe.length;$e++){var Fn=Oe[$e],rr=Fn.geometry,En=Fn.type,Pn=Vt===0?Fn.minX:Fn.minY,Er=Vt===0?Fn.maxX:Fn.maxY;if(Pn>=Jt&&Er<ve)xe.push(Fn);else if(!(Er<Jt||Pn>=ve)){var Pr=[];if(En==="Point"||En==="MultiPoint")Qt(rr,Pr,Jt,ve,Vt);else if(En==="LineString")ee(rr,Pr,Jt,ve,Vt,!1,ue.lineMetrics);else if(En==="MultiLineString")$t(rr,Pr,Jt,ve,Vt,!1);else if(En==="Polygon")$t(rr,Pr,Jt,ve,Vt,!0);else if(En==="MultiPolygon")for(var ln=0;ln<rr.length;ln++){var Cr=[];$t(rr[ln],Cr,Jt,ve,Vt,!0),Cr.length&&Pr.push(Cr)}if(Pr.length){if(ue.lineMetrics&&En==="LineString"){for(ln=0;ln<Pr.length;ln++)xe.push(ot(Fn.id,En,Pr[ln],Fn.tags));continue}En!=="LineString"&&En!=="MultiLineString"||(Pr.length===1?(En="LineString",Pr=Pr[0]):En="MultiLineString"),En!=="Point"&&En!=="MultiPoint"||(En=Pr.length===3?"Point":"MultiPoint"),xe.push(ot(Fn.id,En,Pr,Fn.tags))}}}return xe.length?xe:null}function Qt(Oe,Ae,Jt,ve,Vt){for(var ie=0;ie<Oe.length;ie+=3){var Ce=Oe[ie+Vt];Ce>=Jt&&Ce<=ve&&(Ae.push(Oe[ie]),Ae.push(Oe[ie+1]),Ae.push(Oe[ie+2]))}}function ee(Oe,Ae,Jt,ve,Vt,ie,Ce){for(var ue,xe,$e=Gt(Oe),Fn=Vt===0?me:le,rr=Oe.start,En=0;En<Oe.length-3;En+=3){var Pn=Oe[En],Er=Oe[En+1],Pr=Oe[En+2],ln=Oe[En+3],Cr=Oe[En+4],Ar=Vt===0?Pn:Er,je=Vt===0?ln:Cr,We=!1;Ce&&(ue=Math.sqrt(Math.pow(Pn-ln,2)+Math.pow(Er-Cr,2))),Ar<Jt?je>Jt&&(xe=Fn($e,Pn,Er,ln,Cr,Jt),Ce&&($e.start=rr+ue*xe)):Ar>ve?je<ve&&(xe=Fn($e,Pn,Er,ln,Cr,ve),Ce&&($e.start=rr+ue*xe)):Pe($e,Pn,Er,Pr),je<Jt&&Ar>=Jt&&(xe=Fn($e,Pn,Er,ln,Cr,Jt),We=!0),je>ve&&Ar<=ve&&(xe=Fn($e,Pn,Er,ln,Cr,ve),We=!0),!ie&&We&&(Ce&&($e.end=rr+ue*xe),Ae.push($e),$e=Gt(Oe)),Ce&&(rr+=ue)}var Ye=Oe.length-3;Pn=Oe[Ye],Er=Oe[Ye+1],Pr=Oe[Ye+2],(Ar=Vt===0?Pn:Er)>=Jt&&Ar<=ve&&Pe($e,Pn,Er,Pr),Ye=$e.length-3,ie&&Ye>=3&&($e[Ye]!==$e[0]||$e[Ye+1]!==$e[1])&&Pe($e,$e[0],$e[1],$e[2]),$e.length&&Ae.push($e)}function Gt(Oe){var Ae=[];return Ae.size=Oe.size,Ae.start=Oe.start,Ae.end=Oe.end,Ae}function $t(Oe,Ae,Jt,ve,Vt,ie){for(var Ce=0;Ce<Oe.length;Ce++)ee(Oe[Ce],Ae,Jt,ve,Vt,ie,!1)}function Pe(Oe,Ae,Jt,ve){Oe.push(Ae),Oe.push(Jt),Oe.push(ve)}function me(Oe,Ae,Jt,ve,Vt,ie){var Ce=(ie-Ae)/(ve-Ae);return Oe.push(ie),Oe.push(Jt+(Vt-Jt)*Ce),Oe.push(1),Ce}function le(Oe,Ae,Jt,ve,Vt,ie){var Ce=(ie-Jt)/(Vt-Jt);return Oe.push(Ae+(ve-Ae)*Ce),Oe.push(ie),Oe.push(1),Ce}function be(Oe,Ae){for(var Jt=[],ve=0;ve<Oe.length;ve++){var Vt,ie=Oe[ve],Ce=ie.type;if(Ce==="Point"||Ce==="MultiPoint"||Ce==="LineString")Vt=ze(ie.geometry,Ae);else if(Ce==="MultiLineString"||Ce==="Polygon"){Vt=[];for(var ue=0;ue<ie.geometry.length;ue++)Vt.push(ze(ie.geometry[ue],Ae))}else if(Ce==="MultiPolygon")for(Vt=[],ue=0;ue<ie.geometry.length;ue++){for(var xe=[],$e=0;$e<ie.geometry[ue].length;$e++)xe.push(ze(ie.geometry[ue][$e],Ae));Vt.push(xe)}Jt.push(ot(ie.id,Ce,Vt,ie.tags))}return Jt}function ze(Oe,Ae){var Jt=[];Jt.size=Oe.size,Oe.start!==void 0&&(Jt.start=Oe.start,Jt.end=Oe.end);for(var ve=0;ve<Oe.length;ve+=3)Jt.push(Oe[ve]+Ae,Oe[ve+1],Oe[ve+2]);return Jt}function Xe(Oe,Ae){if(Oe.transformed)return Oe;var Jt,ve,Vt,ie=1<<Oe.z,Ce=Oe.x,ue=Oe.y;for(Jt=0;Jt<Oe.features.length;Jt++){var xe=Oe.features[Jt],$e=xe.geometry,Fn=xe.type;if(xe.geometry=[],Fn===1)for(ve=0;ve<$e.length;ve+=2)xe.geometry.push(_n($e[ve],$e[ve+1],Ae,ie,Ce,ue));else for(ve=0;ve<$e.length;ve++){var rr=[];for(Vt=0;Vt<$e[ve].length;Vt+=2)rr.push(_n($e[ve][Vt],$e[ve][Vt+1],Ae,ie,Ce,ue));xe.geometry.push(rr)}}return Oe.transformed=!0,Oe}function _n(Oe,Ae,Jt,ve,Vt,ie){return[Math.round(Jt*(Oe*ve-Vt)),Math.round(Jt*(Ae*ve-ie))]}function Kn(Oe,Ae,Jt,ve,Vt){for(var ie=Ae===Vt.maxZoom?0:Vt.tolerance/((1<<Ae)*Vt.extent),Ce={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Jt,y:ve,z:Ae,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},ue=0;ue<Oe.length;ue++){Ce.numFeatures++,Hn(Ce,Oe[ue],ie,Vt);var xe=Oe[ue].minX,$e=Oe[ue].minY,Fn=Oe[ue].maxX,rr=Oe[ue].maxY;xe<Ce.minX&&(Ce.minX=xe),$e<Ce.minY&&(Ce.minY=$e),Fn>Ce.maxX&&(Ce.maxX=Fn),rr>Ce.maxY&&(Ce.maxY=rr)}return Ce}function Hn(Oe,Ae,Jt,ve){var Vt=Ae.geometry,ie=Ae.type,Ce=[];if(ie==="Point"||ie==="MultiPoint")for(var ue=0;ue<Vt.length;ue+=3)Ce.push(Vt[ue]),Ce.push(Vt[ue+1]),Oe.numPoints++,Oe.numSimplified++;else if(ie==="LineString")nn(Ce,Vt,Oe,Jt,!1,!1);else if(ie==="MultiLineString"||ie==="Polygon")for(ue=0;ue<Vt.length;ue++)nn(Ce,Vt[ue],Oe,Jt,ie==="Polygon",ue===0);else if(ie==="MultiPolygon")for(var xe=0;xe<Vt.length;xe++){var $e=Vt[xe];for(ue=0;ue<$e.length;ue++)nn(Ce,$e[ue],Oe,Jt,!0,ue===0)}if(Ce.length){var Fn=Ae.tags||null;if(ie==="LineString"&&ve.lineMetrics){for(var rr in Fn={},Ae.tags)Fn[rr]=Ae.tags[rr];Fn.mapbox_clip_start=Vt.start/Vt.size,Fn.mapbox_clip_end=Vt.end/Vt.size}var En={geometry:Ce,type:ie==="Polygon"||ie==="MultiPolygon"?3:ie==="LineString"||ie==="MultiLineString"?2:1,tags:Fn};Ae.id!==null&&(En.id=Ae.id),Oe.features.push(En)}}function nn(Oe,Ae,Jt,ve,Vt,ie){var Ce=ve*ve;if(ve>0&&Ae.size<(Vt?Ce:ve))Jt.numPoints+=Ae.length/3;else{for(var ue=[],xe=0;xe<Ae.length;xe+=3)(ve===0||Ae[xe+2]>Ce)&&(Jt.numSimplified++,ue.push(Ae[xe]),ue.push(Ae[xe+1])),Jt.numPoints++;Vt&&function($e,Fn){for(var rr=0,En=0,Pn=$e.length,Er=Pn-2;En<Pn;Er=En,En+=2)rr+=($e[En]-$e[Er])*($e[En+1]+$e[Er+1]);if(rr>0===Fn)for(En=0,Pn=$e.length;En<Pn/2;En+=2){var Pr=$e[En],ln=$e[En+1];$e[En]=$e[Pn-2-En],$e[En+1]=$e[Pn-1-En],$e[Pn-2-En]=Pr,$e[Pn-1-En]=ln}}(ue,ie),Oe.push(ue)}}function en(Oe,Ae){var Jt=(Ae=this.options=function(Vt,ie){for(var Ce in ie)Vt[Ce]=ie[Ce];return Vt}(Object.create(this.options),Ae)).debug;if(Jt&&console.time("preprocess data"),Ae.maxZoom<0||Ae.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Ae.promoteId&&Ae.generateId)throw new Error("promoteId and generateId cannot be used together.");var ve=function(Vt,ie){var Ce=[];if(Vt.type==="FeatureCollection")for(var ue=0;ue<Vt.features.length;ue++)H(Ce,Vt.features[ue],ie,ue);else H(Ce,Vt.type==="Feature"?Vt:{geometry:Vt},ie);return Ce}(Oe,Ae);this.tiles={},this.tileCoords=[],Jt&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Ae.indexMaxZoom,Ae.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(ve=function(Vt,ie){var Ce=ie.buffer/ie.extent,ue=Vt,xe=Ft(Vt,1,-1-Ce,Ce,0,-1,2,ie),$e=Ft(Vt,1,1-Ce,2+Ce,0,-1,2,ie);return(xe||$e)&&(ue=Ft(Vt,1,-Ce,1+Ce,0,-1,2,ie)||[],xe&&(ue=be(xe,1).concat(ue)),$e&&(ue=ue.concat(be($e,-1)))),ue}(ve,Ae)).length&&this.splitTile(ve,0,0,0),Jt&&(ve.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function An(Oe,Ae,Jt){return 32*((1<<Oe)*Jt+Ae)+Oe}function Nn(Oe,Ae){var Jt=Oe.tileID.canonical;if(!this._geoJSONIndex)return Ae(null,null);var ve=this._geoJSONIndex.getTile(Jt.z,Jt.x,Jt.y);if(!ve)return Ae(null,null);var Vt=new g(ve.features),ie=S(Vt);ie.byteOffset===0&&ie.byteLength===ie.buffer.byteLength||(ie=new Uint8Array(ie)),Ae(null,{vectorTile:Vt,rawData:ie.buffer})}Nt.prototype.load=function(Oe){var Ae=this.options,Jt=Ae.log,ve=Ae.minZoom,Vt=Ae.maxZoom,ie=Ae.nodeSize;Jt&&console.time("total time");var Ce="prepare "+Oe.length+" points";Jt&&console.time(Ce),this.points=Oe;for(var ue=[],xe=0;xe<Oe.length;xe++)Oe[xe].geometry&&ue.push(_t(Oe[xe],xe));this.trees[Vt+1]=new ut(ue,$,dt,ie,Float32Array),Jt&&console.timeEnd(Ce);for(var $e=Vt;$e>=ve;$e--){var Fn=+Date.now();ue=this._cluster(ue,$e),this.trees[$e]=new ut(ue,$,dt,ie,Float32Array),Jt&&console.log("z%d: %d clusters in %dms",$e,ue.length,+Date.now()-Fn)}return Jt&&console.timeEnd("total time"),this},Nt.prototype.getClusters=function(Oe,Ae){var Jt=((Oe[0]+180)%360+360)%360-180,ve=Math.max(-90,Math.min(90,Oe[1])),Vt=Oe[2]===180?180:((Oe[2]+180)%360+360)%360-180,ie=Math.max(-90,Math.min(90,Oe[3]));if(Oe[2]-Oe[0]>=360)Jt=-180,Vt=180;else if(Jt>Vt){var Ce=this.getClusters([Jt,ve,180,ie],Ae),ue=this.getClusters([-180,ve,Vt,ie],Ae);return Ce.concat(ue)}for(var xe=this.trees[this._limitZoom(Ae)],$e=[],Fn=0,rr=xe.range(rt(Jt),Mt(ie),rt(Vt),Mt(ve));Fn<rr.length;Fn+=1){var En=xe.points[rr[Fn]];$e.push(En.numPoints?mt(En):this.points[En.index])}return $e},Nt.prototype.getChildren=function(Oe){var Ae=this._getOriginId(Oe),Jt=this._getOriginZoom(Oe),ve="No cluster with the specified id.",Vt=this.trees[Jt];if(!Vt)throw new Error(ve);var ie=Vt.points[Ae];if(!ie)throw new Error(ve);for(var Ce=this.options.radius/(this.options.extent*Math.pow(2,Jt-1)),ue=[],xe=0,$e=Vt.within(ie.x,ie.y,Ce);xe<$e.length;xe+=1){var Fn=Vt.points[$e[xe]];Fn.parentId===Oe&&ue.push(Fn.numPoints?mt(Fn):this.points[Fn.index])}if(ue.length===0)throw new Error(ve);return ue},Nt.prototype.getLeaves=function(Oe,Ae,Jt){var ve=[];return this._appendLeaves(ve,Oe,Ae=Ae||10,Jt=Jt||0,0),ve},Nt.prototype.getTile=function(Oe,Ae,Jt){var ve=this.trees[this._limitZoom(Oe)],Vt=Math.pow(2,Oe),ie=this.options,Ce=ie.radius/ie.extent,ue=(Jt-Ce)/Vt,xe=(Jt+1+Ce)/Vt,$e={features:[]};return this._addTileFeatures(ve.range((Ae-Ce)/Vt,ue,(Ae+1+Ce)/Vt,xe),ve.points,Ae,Jt,Vt,$e),Ae===0&&this._addTileFeatures(ve.range(1-Ce/Vt,ue,1,xe),ve.points,Vt,Jt,Vt,$e),Ae===Vt-1&&this._addTileFeatures(ve.range(0,ue,Ce/Vt,xe),ve.points,-1,Jt,Vt,$e),$e.features.length?$e:null},Nt.prototype.getClusterExpansionZoom=function(Oe){for(var Ae=this._getOriginZoom(Oe)-1;Ae<=this.options.maxZoom;){var Jt=this.getChildren(Oe);if(Ae++,Jt.length!==1)break;Oe=Jt[0].properties.cluster_id}return Ae},Nt.prototype._appendLeaves=function(Oe,Ae,Jt,ve,Vt){for(var ie=0,Ce=this.getChildren(Ae);ie<Ce.length;ie+=1){var ue=Ce[ie],xe=ue.properties;if(xe&&xe.cluster?Vt+xe.point_count<=ve?Vt+=xe.point_count:Vt=this._appendLeaves(Oe,xe.cluster_id,Jt,ve,Vt):Vt<ve?Vt++:Oe.push(ue),Oe.length===Jt)break}return Vt},Nt.prototype._addTileFeatures=function(Oe,Ae,Jt,ve,Vt,ie){for(var Ce=0,ue=Oe;Ce<ue.length;Ce+=1){var xe=Ae[ue[Ce]],$e=xe.numPoints,Fn={type:1,geometry:[[Math.round(this.options.extent*(xe.x*Vt-Jt)),Math.round(this.options.extent*(xe.y*Vt-ve))]],tags:$e?At(xe):this.points[xe.index].properties},rr=void 0;$e?rr=xe.id:this.options.generateId?rr=xe.index:this.points[xe.index].id&&(rr=this.points[xe.index].id),rr!==void 0&&(Fn.id=rr),ie.features.push(Fn)}},Nt.prototype._limitZoom=function(Oe){return Math.max(this.options.minZoom,Math.min(+Oe,this.options.maxZoom+1))},Nt.prototype._cluster=function(Oe,Ae){for(var Jt=[],ve=this.options,Vt=ve.reduce,ie=ve.minPoints,Ce=ve.radius/(ve.extent*Math.pow(2,Ae)),ue=0;ue<Oe.length;ue++){var xe=Oe[ue];if(!(xe.zoom<=Ae)){xe.zoom=Ae;for(var $e=this.trees[Ae+1],Fn=$e.within(xe.x,xe.y,Ce),rr=xe.numPoints||1,En=rr,Pn=0,Er=Fn;Pn<Er.length;Pn+=1){var Pr=$e.points[Er[Pn]];Pr.zoom>Ae&&(En+=Pr.numPoints||1)}if(En>=ie){for(var ln=xe.x*rr,Cr=xe.y*rr,Ar=Vt&&rr>1?this._map(xe,!0):null,je=(ue<<5)+(Ae+1)+this.points.length,We=0,Ye=Fn;We<Ye.length;We+=1){var fn=$e.points[Ye[We]];if(!(fn.zoom<=Ae)){fn.zoom=Ae;var mn=fn.numPoints||1;ln+=fn.x*mn,Cr+=fn.y*mn,fn.parentId=je,Vt&&(Ar||(Ar=this._map(xe,!0)),Vt(Ar,this._map(fn)))}}xe.parentId=je,Jt.push(Lt(ln/En,Cr/En,je,En,Ar))}else if(Jt.push(xe),En>1)for(var jn=0,bn=Fn;jn<bn.length;jn+=1){var Ln=$e.points[bn[jn]];Ln.zoom<=Ae||(Ln.zoom=Ae,Jt.push(Ln))}}}return Jt},Nt.prototype._getOriginId=function(Oe){return Oe-this.points.length>>5},Nt.prototype._getOriginZoom=function(Oe){return(Oe-this.points.length)%32},Nt.prototype._map=function(Oe,Ae){if(Oe.numPoints)return Ae?z({},Oe.properties):Oe.properties;var Jt=this.points[Oe.index].properties,ve=this.options.map(Jt);return Ae&&ve===Jt?z({},ve):ve},en.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},en.prototype.splitTile=function(Oe,Ae,Jt,ve,Vt,ie,Ce){for(var ue=[Oe,Ae,Jt,ve],xe=this.options,$e=xe.debug;ue.length;){ve=ue.pop(),Jt=ue.pop(),Ae=ue.pop(),Oe=ue.pop();var Fn=1<<Ae,rr=An(Ae,Jt,ve),En=this.tiles[rr];if(!En&&($e>1&&console.time("creation"),En=this.tiles[rr]=Kn(Oe,Ae,Jt,ve,xe),this.tileCoords.push({z:Ae,x:Jt,y:ve}),$e)){$e>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Ae,Jt,ve,En.numFeatures,En.numPoints,En.numSimplified),console.timeEnd("creation"));var Pn="z"+Ae;this.stats[Pn]=(this.stats[Pn]||0)+1,this.total++}if(En.source=Oe,Vt){if(Ae===xe.maxZoom||Ae===Vt)continue;var Er=1<<Vt-Ae;if(Jt!==Math.floor(ie/Er)||ve!==Math.floor(Ce/Er))continue}else if(Ae===xe.indexMaxZoom||En.numPoints<=xe.indexMaxPoints)continue;if(En.source=null,Oe.length!==0){$e>1&&console.time("clipping");var Pr,ln,Cr,Ar,je,We,Ye=.5*xe.buffer/xe.extent,fn=.5-Ye,mn=.5+Ye,jn=1+Ye;Pr=ln=Cr=Ar=null,je=Ft(Oe,Fn,Jt-Ye,Jt+mn,0,En.minX,En.maxX,xe),We=Ft(Oe,Fn,Jt+fn,Jt+jn,0,En.minX,En.maxX,xe),Oe=null,je&&(Pr=Ft(je,Fn,ve-Ye,ve+mn,1,En.minY,En.maxY,xe),ln=Ft(je,Fn,ve+fn,ve+jn,1,En.minY,En.maxY,xe),je=null),We&&(Cr=Ft(We,Fn,ve-Ye,ve+mn,1,En.minY,En.maxY,xe),Ar=Ft(We,Fn,ve+fn,ve+jn,1,En.minY,En.maxY,xe),We=null),$e>1&&console.timeEnd("clipping"),ue.push(Pr||[],Ae+1,2*Jt,2*ve),ue.push(ln||[],Ae+1,2*Jt,2*ve+1),ue.push(Cr||[],Ae+1,2*Jt+1,2*ve),ue.push(Ar||[],Ae+1,2*Jt+1,2*ve+1)}}},en.prototype.getTile=function(Oe,Ae,Jt){var ve=this.options,Vt=ve.extent,ie=ve.debug;if(Oe<0||Oe>24)return null;var Ce=1<<Oe,ue=An(Oe,Ae=(Ae%Ce+Ce)%Ce,Jt);if(this.tiles[ue])return Xe(this.tiles[ue],Vt);ie>1&&console.log("drilling down to z%d-%d-%d",Oe,Ae,Jt);for(var xe,$e=Oe,Fn=Ae,rr=Jt;!xe&&$e>0;)$e--,Fn=Math.floor(Fn/2),rr=Math.floor(rr/2),xe=this.tiles[An($e,Fn,rr)];return xe&&xe.source?(ie>1&&console.log("found parent tile z%d-%d-%d",$e,Fn,rr),ie>1&&console.time("drilling down"),this.splitTile(xe.source,$e,Fn,rr,Oe,Ae,Jt),ie>1&&console.timeEnd("drilling down"),this.tiles[ue]?Xe(this.tiles[ue],Vt):null):null};var hr=function(Oe){function Ae(Jt,ve,Vt,ie){Oe.call(this,Jt,ve,Vt,Nn),ie&&(this.loadGeoJSON=ie)}return Oe&&(Ae.__proto__=Oe),(Ae.prototype=Object.create(Oe&&Oe.prototype)).constructor=Ae,Ae.prototype.loadData=function(Jt,ve){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=ve,this._pendingLoadDataParams=Jt,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Ae.prototype._loadData=function(){var Jt=this;if(this._pendingCallback&&this._pendingLoadDataParams){var ve=this._pendingCallback,Vt=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var ie=!!(Vt&&Vt.request&&Vt.request.collectResourceTiming)&&new t.RequestPerformance(Vt.request);this.loadGeoJSON(Vt,function(Ce,ue){if(Ce||!ue)return ve(Ce);if(typeof ue!="object")return ve(new Error("Input data given to '"+Vt.source+"' is not a valid GeoJSON object."));(function En(Pn,Er){var Pr,ln=Pn&&Pn.type;if(ln==="FeatureCollection")for(Pr=0;Pr<Pn.features.length;Pr++)En(Pn.features[Pr],Er);else if(ln==="GeometryCollection")for(Pr=0;Pr<Pn.geometries.length;Pr++)En(Pn.geometries[Pr],Er);else if(ln==="Feature")En(Pn.geometry,Er);else if(ln==="Polygon")f(Pn.coordinates,Er);else if(ln==="MultiPolygon")for(Pr=0;Pr<Pn.coordinates.length;Pr++)f(Pn.coordinates[Pr],Er);return Pn})(ue,!0);try{if(Vt.filter){var xe=t.createExpression(Vt.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(xe.result==="error")throw new Error(xe.value.map(function(En){return En.key+": "+En.message}).join(", "));var $e=ue.features.filter(function(En){return xe.value.evaluate({zoom:0},En)});ue={type:"FeatureCollection",features:$e}}Jt._geoJSONIndex=Vt.cluster?new Nt(function(En){var Pn=En.superclusterOptions,Er=En.clusterProperties;if(!Er||!Pn)return Pn;for(var Pr={},ln={},Cr={accumulated:null,zoom:0},Ar={properties:null},je=Object.keys(Er),We=0,Ye=je;We<Ye.length;We+=1){var fn=Ye[We],mn=Er[fn],jn=mn[0],bn=t.createExpression(mn[1]),Ln=t.createExpression(typeof jn=="string"?[jn,["accumulated"],["get",fn]]:jn);Pr[fn]=bn.value,ln[fn]=Ln.value}return Pn.map=function(nr){Ar.properties=nr;for(var Yn={},Mn=0,Rr=je;Mn<Rr.length;Mn+=1){var pr=Rr[Mn];Yn[pr]=Pr[pr].evaluate(Cr,Ar)}return Yn},Pn.reduce=function(nr,Yn){Ar.properties=Yn;for(var Mn=0,Rr=je;Mn<Rr.length;Mn+=1){var pr=Rr[Mn];Cr.accumulated=nr[pr],nr[pr]=ln[pr].evaluate(Cr,Ar)}},Pn}(Vt)).load(ue.features):function(En,Pn){return new en(En,Pn)}(ue,Vt.geojsonVtOptions)}catch(En){return ve(En)}Jt.loaded={};var Fn={};if(ie){var rr=ie.finish();rr&&(Fn.resourceTiming={},Fn.resourceTiming[Vt.source]=JSON.parse(JSON.stringify(rr)))}ve(null,Fn)})}},Ae.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},Ae.prototype.reloadTile=function(Jt,ve){var Vt=this.loaded;return Vt&&Vt[Jt.uid]?Oe.prototype.reloadTile.call(this,Jt,ve):this.loadTile(Jt,ve)},Ae.prototype.loadGeoJSON=function(Jt,ve){if(Jt.request)t.getJSON(Jt.request,ve);else{if(typeof Jt.data!="string")return ve(new Error("Input data given to '"+Jt.source+"' is not a valid GeoJSON object."));try{return ve(null,JSON.parse(Jt.data))}catch(Vt){return ve(new Error("Input data given to '"+Jt.source+"' is not a valid GeoJSON object."))}}},Ae.prototype.removeSource=function(Jt,ve){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),ve()},Ae.prototype.getClusterExpansionZoom=function(Jt,ve){try{ve(null,this._geoJSONIndex.getClusterExpansionZoom(Jt.clusterId))}catch(Vt){ve(Vt)}},Ae.prototype.getClusterChildren=function(Jt,ve){try{ve(null,this._geoJSONIndex.getChildren(Jt.clusterId))}catch(Vt){ve(Vt)}},Ae.prototype.getClusterLeaves=function(Jt,ve){try{ve(null,this._geoJSONIndex.getLeaves(Jt.clusterId,Jt.limit,Jt.offset))}catch(Vt){ve(Vt)}},Ae}(a),fi=function(Ae){var Jt=this;this.self=Ae,this.actor=new t.Actor(Ae,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:a,geojson:hr},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(ve,Vt){if(Jt.workerSourceTypes[ve])throw new Error('Worker source with name "'+ve+'" already registered.');Jt.workerSourceTypes[ve]=Vt},this.self.registerRTLTextPlugin=function(ve){if(t.plugin.isParsed())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=ve.applyArabicShaping,t.plugin.processBidirectionalText=ve.processBidirectionalText,t.plugin.processStyledBidirectionalText=ve.processStyledBidirectionalText}};return fi.prototype.setReferrer=function(Oe,Ae){this.referrer=Ae},fi.prototype.setImages=function(Oe,Ae,Jt){for(var ve in this.availableImages[Oe]=Ae,this.workerSources[Oe]){var Vt=this.workerSources[Oe][ve];for(var ie in Vt)Vt[ie].availableImages=Ae}Jt()},fi.prototype.setLayers=function(Oe,Ae,Jt){this.getLayerIndex(Oe).replace(Ae),Jt()},fi.prototype.updateLayers=function(Oe,Ae,Jt){this.getLayerIndex(Oe).update(Ae.layers,Ae.removedIds),Jt()},fi.prototype.loadTile=function(Oe,Ae,Jt){this.getWorkerSource(Oe,Ae.type,Ae.source).loadTile(Ae,Jt)},fi.prototype.loadDEMTile=function(Oe,Ae,Jt){this.getDEMWorkerSource(Oe,Ae.source).loadTile(Ae,Jt)},fi.prototype.reloadTile=function(Oe,Ae,Jt){this.getWorkerSource(Oe,Ae.type,Ae.source).reloadTile(Ae,Jt)},fi.prototype.abortTile=function(Oe,Ae,Jt){this.getWorkerSource(Oe,Ae.type,Ae.source).abortTile(Ae,Jt)},fi.prototype.removeTile=function(Oe,Ae,Jt){this.getWorkerSource(Oe,Ae.type,Ae.source).removeTile(Ae,Jt)},fi.prototype.removeDEMTile=function(Oe,Ae){this.getDEMWorkerSource(Oe,Ae.source).removeTile(Ae)},fi.prototype.removeSource=function(Oe,Ae,Jt){if(this.workerSources[Oe]&&this.workerSources[Oe][Ae.type]&&this.workerSources[Oe][Ae.type][Ae.source]){var ve=this.workerSources[Oe][Ae.type][Ae.source];delete this.workerSources[Oe][Ae.type][Ae.source],ve.removeSource!==void 0?ve.removeSource(Ae,Jt):Jt()}},fi.prototype.loadWorkerSource=function(Oe,Ae,Jt){try{this.self.importScripts(Ae.url),Jt()}catch(ve){Jt(ve.toString())}},fi.prototype.syncRTLPluginState=function(Oe,Ae,Jt){try{t.plugin.setState(Ae);var ve=t.plugin.getPluginURL();if(t.plugin.isLoaded()&&!t.plugin.isParsed()&&ve!=null){this.self.importScripts(ve);var Vt=t.plugin.isParsed();Jt(Vt?void 0:new Error("RTL Text Plugin failed to import scripts from "+ve),Vt)}}catch(ie){Jt(ie.toString())}},fi.prototype.getAvailableImages=function(Oe){var Ae=this.availableImages[Oe];return Ae||(Ae=[]),Ae},fi.prototype.getLayerIndex=function(Oe){var Ae=this.layerIndexes[Oe];return Ae||(Ae=this.layerIndexes[Oe]=new c),Ae},fi.prototype.getWorkerSource=function(Oe,Ae,Jt){var ve=this;return this.workerSources[Oe]||(this.workerSources[Oe]={}),this.workerSources[Oe][Ae]||(this.workerSources[Oe][Ae]={}),this.workerSources[Oe][Ae][Jt]||(this.workerSources[Oe][Ae][Jt]=new this.workerSourceTypes[Ae]({send:function(ie,Ce,ue){ve.actor.send(ie,Ce,ue,Oe)}},this.getLayerIndex(Oe),this.getAvailableImages(Oe))),this.workerSources[Oe][Ae][Jt]},fi.prototype.getDEMWorkerSource=function(Oe,Ae){return this.demWorkerSources[Oe]||(this.demWorkerSources[Oe]={}),this.demWorkerSources[Oe][Ae]||(this.demWorkerSources[Oe][Ae]=new u),this.demWorkerSources[Oe][Ae]},fi.prototype.enforceCacheSizeLimit=function(Oe,Ae){t.enforceCacheSizeLimit(Ae)},typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new fi(self)),fi}),e(["./shared"],function(t){"use strict";var l=t.createCommonjsModule(function(j){function I(D){return!w(D)}function w(D){return typeof window=="undefined"||typeof document=="undefined"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var J,st,Ct=new Blob([""],{type:"text/javascript"}),Ot=URL.createObjectURL(Ct);try{st=new Worker(Ot),J=!0}catch(Ut){J=!1}return st&&st.terminate(),URL.revokeObjectURL(Ot),J}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var J=document.createElement("canvas");J.width=J.height=1;var st=J.getContext("2d");if(!st)return!1;var Ct=st.getImageData(0,0,1,1);return Ct&&Ct.width===J.width}()?(B[G=D&&D.failIfMajorPerformanceCaveat]===void 0&&(B[G]=function(J){var st=function(Ot){var Ut=document.createElement("canvas"),Ht=Object.create(I.webGLContextAttributes);return Ht.failIfMajorPerformanceCaveat=Ot,Ut.probablySupportsContext?Ut.probablySupportsContext("webgl",Ht)||Ut.probablySupportsContext("experimental-webgl",Ht):Ut.supportsContext?Ut.supportsContext("webgl",Ht)||Ut.supportsContext("experimental-webgl",Ht):Ut.getContext("webgl",Ht)||Ut.getContext("experimental-webgl",Ht)}(J);if(!st)return!1;var Ct=st.createShader(st.VERTEX_SHADER);return!(!Ct||st.isContextLost())&&(st.shaderSource(Ct,"void main() {}"),st.compileShader(Ct),st.getShaderParameter(Ct,st.COMPILE_STATUS)===!0)}(G)),B[G]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var G}j.exports?j.exports=I:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=I,window.mapboxgl.notSupportedReason=w);var B={};I.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),s={create:function(I,w,B){var D=t.window.document.createElement(I);return w!==void 0&&(D.className=w),B&&B.appendChild(D),D},createNS:function(I,w){return t.window.document.createElementNS(I,w)}},c=t.window.document&&t.window.document.documentElement.style;function r(j){if(!c)return j[0];for(var I=0;I<j.length;I++)if(j[I]in c)return j[I];return j[0]}var h,n=r(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);s.disableDrag=function(){c&&n&&(h=c[n],c[n]="none")},s.enableDrag=function(){c&&n&&(c[n]=h)};var i=r(["transform","WebkitTransform"]);s.setTransform=function(j,I){j.style[i]=I};var a=!1;try{var o=Object.defineProperty({},"passive",{get:function(){a=!0}});t.window.addEventListener("test",o,o),t.window.removeEventListener("test",o,o)}catch(j){a=!1}s.addEventListener=function(j,I,w,B){B===void 0&&(B={}),j.addEventListener(I,w,"passive"in B&&a?B:B.capture)},s.removeEventListener=function(j,I,w,B){B===void 0&&(B={}),j.removeEventListener(I,w,"passive"in B&&a?B:B.capture)};var u=function j(I){I.preventDefault(),I.stopPropagation(),t.window.removeEventListener("click",j,!0)};function f(j){var I=j.userImage;return!!(I&&I.render&&I.render())&&(j.data.replace(new Uint8Array(I.data.buffer)),!0)}s.suppressClick=function(){t.window.addEventListener("click",u,!0),t.window.setTimeout(function(){t.window.removeEventListener("click",u,!0)},0)},s.mousePos=function(j,I){var w=j.getBoundingClientRect();return new t.Point(I.clientX-w.left-j.clientLeft,I.clientY-w.top-j.clientTop)},s.touchPos=function(j,I){for(var w=j.getBoundingClientRect(),B=[],D=0;D<I.length;D++)B.push(new t.Point(I[D].clientX-w.left-j.clientLeft,I[D].clientY-w.top-j.clientTop));return B},s.mouseButton=function(j){return t.window.InstallTrigger!==void 0&&j.button===2&&j.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:j.button},s.remove=function(j){j.parentNode&&j.parentNode.removeChild(j)};var v=function(j){function I(){j.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.isLoaded=function(){return this.loaded},I.prototype.setLoaded=function(w){if(this.loaded!==w&&(this.loaded=w,w)){for(var B=0,D=this.requestors;B<D.length;B+=1){var G=D[B];this._notify(G.ids,G.callback)}this.requestors=[]}},I.prototype.getImage=function(w){return this.images[w]},I.prototype.addImage=function(w,B){this._validate(w,B)&&(this.images[w]=B)},I.prototype._validate=function(w,B){var D=!0;return this._validateStretch(B.stretchX,B.data&&B.data.width)||(this.fire(new t.ErrorEvent(new Error('Image "'+w+'" has invalid "stretchX" value'))),D=!1),this._validateStretch(B.stretchY,B.data&&B.data.height)||(this.fire(new t.ErrorEvent(new Error('Image "'+w+'" has invalid "stretchY" value'))),D=!1),this._validateContent(B.content,B)||(this.fire(new t.ErrorEvent(new Error('Image "'+w+'" has invalid "content" value'))),D=!1),D},I.prototype._validateStretch=function(w,B){if(!w)return!0;for(var D=0,G=0,J=w;G<J.length;G+=1){var st=J[G];if(st[0]<D||st[1]<st[0]||B<st[1])return!1;D=st[1]}return!0},I.prototype._validateContent=function(w,B){return!(w&&(w.length!==4||w[0]<0||B.data.width<w[0]||w[1]<0||B.data.height<w[1]||w[2]<0||B.data.width<w[2]||w[3]<0||B.data.height<w[3]||w[2]<w[0]||w[3]<w[1]))},I.prototype.updateImage=function(w,B){B.version=this.images[w].version+1,this.images[w]=B,this.updatedImages[w]=!0},I.prototype.removeImage=function(w){var B=this.images[w];delete this.images[w],delete this.patterns[w],B.userImage&&B.userImage.onRemove&&B.userImage.onRemove()},I.prototype.listImages=function(){return Object.keys(this.images)},I.prototype.getImages=function(w,B){var D=!0;if(!this.isLoaded())for(var G=0,J=w;G<J.length;G+=1)this.images[J[G]]||(D=!1);this.isLoaded()||D?this._notify(w,B):this.requestors.push({ids:w,callback:B})},I.prototype._notify=function(w,B){for(var D={},G=0,J=w;G<J.length;G+=1){var st=J[G];this.images[st]||this.fire(new t.Event("styleimagemissing",{id:st}));var Ct=this.images[st];Ct?D[st]={data:Ct.data.clone(),pixelRatio:Ct.pixelRatio,sdf:Ct.sdf,version:Ct.version,stretchX:Ct.stretchX,stretchY:Ct.stretchY,content:Ct.content,hasRenderCallback:Boolean(Ct.userImage&&Ct.userImage.render)}:t.warnOnce('Image "'+st+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}B(null,D)},I.prototype.getPixelSize=function(){var w=this.atlasImage;return{width:w.width,height:w.height}},I.prototype.getPattern=function(w){var B=this.patterns[w],D=this.getImage(w);if(!D)return null;if(B&&B.position.version===D.version)return B.position;if(B)B.position.version=D.version;else{var G={w:D.data.width+2,h:D.data.height+2,x:0,y:0},J=new t.ImagePosition(G,D);this.patterns[w]={bin:G,position:J}}return this._updatePatternAtlas(),this.patterns[w].position},I.prototype.bind=function(w){var B=w.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(w,this.atlasImage,B.RGBA),this.atlasTexture.bind(B.LINEAR,B.CLAMP_TO_EDGE)},I.prototype._updatePatternAtlas=function(){var w=[];for(var B in this.patterns)w.push(this.patterns[B].bin);var D=t.potpack(w),G=D.w,J=D.h,st=this.atlasImage;for(var Ct in st.resize({width:G||1,height:J||1}),this.patterns){var Ot=this.patterns[Ct].bin,Ut=Ot.x+1,Ht=Ot.y+1,qt=this.images[Ct].data,fe=qt.width,ye=qt.height;t.RGBAImage.copy(qt,st,{x:0,y:0},{x:Ut,y:Ht},{width:fe,height:ye}),t.RGBAImage.copy(qt,st,{x:0,y:ye-1},{x:Ut,y:Ht-1},{width:fe,height:1}),t.RGBAImage.copy(qt,st,{x:0,y:0},{x:Ut,y:Ht+ye},{width:fe,height:1}),t.RGBAImage.copy(qt,st,{x:fe-1,y:0},{x:Ut-1,y:Ht},{width:1,height:ye}),t.RGBAImage.copy(qt,st,{x:0,y:0},{x:Ut+fe,y:Ht},{width:1,height:ye})}this.dirty=!0},I.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},I.prototype.dispatchRenderCallbacks=function(w){for(var B=0,D=w;B<D.length;B+=1){var G=D[B];if(!this.callbackDispatchedThisFrame[G]){this.callbackDispatchedThisFrame[G]=!0;var J=this.images[G];f(J)&&this.updateImage(G,J)}}},I}(t.Evented),b=_,y=_,g=1e20;function _(j,I,w,B,D,G){this.fontSize=j||24,this.buffer=I===void 0?3:I,this.cutoff=B||.25,this.fontFamily=D||"sans-serif",this.fontWeight=G||"normal",this.radius=w||8;var J=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=J,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(J*J),this.gridInner=new Float64Array(J*J),this.f=new Float64Array(J),this.d=new Float64Array(J),this.z=new Float64Array(J+1),this.v=new Int16Array(J),this.middle=Math.round(J/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function M(j,I,w,B,D,G,J){for(var st=0;st<I;st++){for(var Ct=0;Ct<w;Ct++)B[Ct]=j[Ct*I+st];for(x(B,D,G,J,w),Ct=0;Ct<w;Ct++)j[Ct*I+st]=D[Ct]}for(Ct=0;Ct<w;Ct++){for(st=0;st<I;st++)B[st]=j[Ct*I+st];for(x(B,D,G,J,I),st=0;st<I;st++)j[Ct*I+st]=Math.sqrt(D[st])}}function x(j,I,w,B,D){w[0]=0,B[0]=-g,B[1]=+g;for(var G=1,J=0;G<D;G++){for(var st=(j[G]+G*G-(j[w[J]]+w[J]*w[J]))/(2*G-2*w[J]);st<=B[J];)J--,st=(j[G]+G*G-(j[w[J]]+w[J]*w[J]))/(2*G-2*w[J]);w[++J]=G,B[J]=st,B[J+1]=+g}for(G=0,J=0;G<D;G++){for(;B[J+1]<G;)J++;I[G]=(G-w[J])*(G-w[J])+j[w[J]]}}_.prototype.draw=function(j){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(j,this.buffer,this.middle);for(var I=this.ctx.getImageData(0,0,this.size,this.size),w=new Uint8ClampedArray(this.size*this.size),B=0;B<this.size*this.size;B++){var D=I.data[4*B+3]/255;this.gridOuter[B]=D===1?0:D===0?g:Math.pow(Math.max(0,.5-D),2),this.gridInner[B]=D===1?g:D===0?0:Math.pow(Math.max(0,D-.5),2)}for(M(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),M(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),B=0;B<this.size*this.size;B++)w[B]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[B]-this.gridInner[B])/this.radius+this.cutoff))));return w},b.default=y;var m=function(I,w){this.requestManager=I,this.localIdeographFontFamily=w,this.entries={}};m.prototype.setURL=function(j){this.url=j},m.prototype.getGlyphs=function(j,I){var w=this,B=[];for(var D in j)for(var G=0,J=j[D];G<J.length;G+=1)B.push({stack:D,id:J[G]});t.asyncAll(B,function(st,Ct){var Ot=st.stack,Ut=st.id,Ht=w.entries[Ot];Ht||(Ht=w.entries[Ot]={glyphs:{},requests:{},ranges:{}});var qt=Ht.glyphs[Ut];if(qt===void 0){if(qt=w._tinySDF(Ht,Ot,Ut))return Ht.glyphs[Ut]=qt,void Ct(null,{stack:Ot,id:Ut,glyph:qt});var fe=Math.floor(Ut/256);if(256*fe>65535)Ct(new Error("glyphs > 65535 not supported"));else if(Ht.ranges[fe])Ct(null,{stack:Ot,id:Ut,glyph:qt});else{var ye=Ht.requests[fe];ye||(ye=Ht.requests[fe]=[],m.loadGlyphRange(Ot,fe,w.url,w.requestManager,function(De,Ie){if(Ie){for(var Ve in Ie)w._doesCharSupportLocalGlyph(+Ve)||(Ht.glyphs[+Ve]=Ie[+Ve]);Ht.ranges[fe]=!0}for(var qe=0,on=ye;qe<on.length;qe+=1)(0,on[qe])(De,Ie);delete Ht.requests[fe]})),ye.push(function(De,Ie){De?Ct(De):Ie&&Ct(null,{stack:Ot,id:Ut,glyph:Ie[Ut]||null})})}}else Ct(null,{stack:Ot,id:Ut,glyph:qt})},function(st,Ct){if(st)I(st);else if(Ct){for(var Ot={},Ut=0,Ht=Ct;Ut<Ht.length;Ut+=1){var qt=Ht[Ut],fe=qt.stack,ye=qt.id,De=qt.glyph;(Ot[fe]||(Ot[fe]={}))[ye]=De&&{id:De.id,bitmap:De.bitmap.clone(),metrics:De.metrics}}I(null,Ot)}})},m.prototype._doesCharSupportLocalGlyph=function(j){return!!this.localIdeographFontFamily&&(t.isChar["CJK Unified Ideographs"](j)||t.isChar["Hangul Syllables"](j)||t.isChar.Hiragana(j)||t.isChar.Katakana(j))},m.prototype._tinySDF=function(j,I,w){var B=this.localIdeographFontFamily;if(B&&this._doesCharSupportLocalGlyph(w)){var D=j.tinySDF;if(!D){var G="400";/bold/i.test(I)?G="900":/medium/i.test(I)?G="500":/light/i.test(I)&&(G="200"),D=j.tinySDF=new m.TinySDF(24,3,8,.25,B,G)}return{id:w,bitmap:new t.AlphaImage({width:30,height:30},D.draw(String.fromCharCode(w))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},m.loadGlyphRange=function(j,I,w,B,D){var G=256*I,J=G+255,st=B.transformRequest(B.normalizeGlyphsURL(w).replace("{fontstack}",j).replace("{range}",G+"-"+J),t.ResourceType.Glyphs);t.getArrayBuffer(st,function(Ct,Ot){if(Ct)D(Ct);else if(Ot){for(var Ut={},Ht=0,qt=t.parseGlyphPBF(Ot);Ht<qt.length;Ht+=1){var fe=qt[Ht];Ut[fe.id]=fe}D(null,Ut)}})},m.TinySDF=b;var S=function(){this.specification=t.styleSpec.light.position};S.prototype.possiblyEvaluate=function(j,I){return t.sphericalToCartesian(j.expression.evaluate(I))},S.prototype.interpolate=function(j,I,w){return{x:t.number(j.x,I.x,w),y:t.number(j.y,I.y,w),z:t.number(j.z,I.z,w)}};var P=new t.Properties({anchor:new t.DataConstantProperty(t.styleSpec.light.anchor),position:new S,color:new t.DataConstantProperty(t.styleSpec.light.color),intensity:new t.DataConstantProperty(t.styleSpec.light.intensity)}),A=function(j){function I(w){j.call(this),this._transitionable=new t.Transitionable(P),this.setLight(w),this._transitioning=this._transitionable.untransitioned()}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getLight=function(){return this._transitionable.serialize()},I.prototype.setLight=function(w,B){if(B===void 0&&(B={}),!this._validate(t.validateLight,w,B))for(var D in w){var G=w[D];t.endsWith(D,"-transition")?this._transitionable.setTransition(D.slice(0,-"-transition".length),G):this._transitionable.setValue(D,G)}},I.prototype.updateTransitions=function(w){this._transitioning=this._transitionable.transitioned(w,this._transitioning)},I.prototype.hasTransition=function(){return this._transitioning.hasTransition()},I.prototype.recalculate=function(w){this.properties=this._transitioning.possiblyEvaluate(w)},I.prototype._validate=function(w,B,D){return(!D||D.validate!==!1)&&t.emitValidationErrors(this,w.call(t.validateStyle,t.extend({value:B,style:{glyphs:!0,sprite:!0},styleSpec:t.styleSpec})))},I}(t.Evented),O=function(I,w){this.width=I,this.height=w,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};O.prototype.getDash=function(j,I){var w=j.join(",")+String(I);return this.dashEntry[w]||(this.dashEntry[w]=this.addDash(j,I)),this.dashEntry[w]},O.prototype.getDashRanges=function(j,I,w){var B=[],D=j.length%2==1?-j[j.length-1]*w:0,G=j[0]*w,J=!0;B.push({left:D,right:G,isDash:J,zeroLength:j[0]===0});for(var st=j[0],Ct=1;Ct<j.length;Ct++){var Ot=j[Ct];B.push({left:D=st*w,right:G=(st+=Ot)*w,isDash:J=!J,zeroLength:Ot===0})}return B},O.prototype.addRoundDash=function(j,I,w){for(var B=I/2,D=-w;D<=w;D++)for(var G=this.width*(this.nextRow+w+D),J=0,st=j[J],Ct=0;Ct<this.width;Ct++){Ct/st.right>1&&(st=j[++J]);var Ot=Math.abs(Ct-st.left),Ut=Math.abs(Ct-st.right),Ht=Math.min(Ot,Ut),qt=void 0,fe=D/w*(B+1);if(st.isDash){var ye=B-Math.abs(fe);qt=Math.sqrt(Ht*Ht+ye*ye)}else qt=B-Math.sqrt(Ht*Ht+fe*fe);this.data[G+Ct]=Math.max(0,Math.min(255,qt+128))}},O.prototype.addRegularDash=function(j){for(var I=j.length-1;I>=0;--I){var w=j[I],B=j[I+1];w.zeroLength?j.splice(I,1):B&&B.isDash===w.isDash&&(B.left=w.left,j.splice(I,1))}var D=j[0],G=j[j.length-1];D.isDash===G.isDash&&(D.left=G.left-this.width,G.right=D.right+this.width);for(var J=this.width*this.nextRow,st=0,Ct=j[st],Ot=0;Ot<this.width;Ot++){Ot/Ct.right>1&&(Ct=j[++st]);var Ut=Math.abs(Ot-Ct.left),Ht=Math.abs(Ot-Ct.right),qt=Math.min(Ut,Ht);this.data[J+Ot]=Math.max(0,Math.min(255,(Ct.isDash?qt:-qt)+128))}},O.prototype.addDash=function(j,I){var w=I?7:0,B=2*w+1;if(this.nextRow+B>this.height)return t.warnOnce("LineAtlas out of space"),null;for(var D=0,G=0;G<j.length;G++)D+=j[G];if(D!==0){var J=this.width/D,st=this.getDashRanges(j,this.width,J);I?this.addRoundDash(st,J,w):this.addRegularDash(st)}var Ct={y:(this.nextRow+w+.5)/this.height,height:2*w/this.height,width:D};return this.nextRow+=B,this.dirty=!0,Ct},O.prototype.bind=function(j){var I=j.gl;this.texture?(I.bindTexture(I.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,I.texSubImage2D(I.TEXTURE_2D,0,0,0,this.width,this.height,I.ALPHA,I.UNSIGNED_BYTE,this.data))):(this.texture=I.createTexture(),I.bindTexture(I.TEXTURE_2D,this.texture),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_S,I.REPEAT),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_T,I.REPEAT),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MIN_FILTER,I.LINEAR),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MAG_FILTER,I.LINEAR),I.texImage2D(I.TEXTURE_2D,0,I.ALPHA,this.width,this.height,0,I.ALPHA,I.UNSIGNED_BYTE,this.data))};var R=function j(I,w){this.workerPool=I,this.actors=[],this.currentActor=0,this.id=t.uniqueId();for(var B=this.workerPool.acquire(this.id),D=0;D<B.length;D++){var G=new j.Actor(B[D],w,this.id);G.name="Worker "+D,this.actors.push(G)}};function W(j,I,w){var B=function(G,J){if(G)return w(G);if(J){var st=t.pick(t.extend(J,j),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);J.vector_layers&&(st.vectorLayers=J.vector_layers,st.vectorLayerIds=st.vectorLayers.map(function(Ct){return Ct.id})),st.tiles=I.canonicalizeTileset(st,j.url),w(null,st)}};return j.url?t.getJSON(I.transformRequest(I.normalizeSourceURL(j.url),t.ResourceType.Source),B):t.browser.frame(function(){return B(null,j)})}R.prototype.broadcast=function(j,I,w){t.asyncAll(this.actors,function(B,D){B.send(j,I,D)},w=w||function(){})},R.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},R.prototype.remove=function(){this.actors.forEach(function(j){j.remove()}),this.actors=[],this.workerPool.release(this.id)},R.Actor=t.Actor;var F=function(I,w,B){this.bounds=t.LngLatBounds.convert(this.validateBounds(I)),this.minzoom=w||0,this.maxzoom=B||24};F.prototype.validateBounds=function(j){return Array.isArray(j)&&j.length===4?[Math.max(-180,j[0]),Math.max(-90,j[1]),Math.min(180,j[2]),Math.min(90,j[3])]:[-180,-90,180,90]},F.prototype.contains=function(j){var I=Math.pow(2,j.z),w=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*I),B=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*I),D=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*I),G=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*I);return j.x>=w&&j.x<D&&j.y>=B&&j.y<G};var Z=function(j){function I(w,B,D,G){if(j.call(this),this.id=w,this.dispatcher=D,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.extend(this,t.pick(B,["url","scheme","tileSize","promoteId"])),this._options=t.extend({type:"vector"},B),this._collectResourceTiming=B.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(G)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.load=function(){var w=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=W(this._options,this.map._requestManager,function(B,D){w._tileJSONRequest=null,w._loaded=!0,B?w.fire(new t.ErrorEvent(B)):D&&(t.extend(w,D),D.bounds&&(w.tileBounds=new F(D.bounds,w.minzoom,w.maxzoom)),t.postTurnstileEvent(D.tiles,w.map._requestManager._customAccessToken),t.postMapLoadEvent(D.tiles,w.map._getMapId(),w.map._requestManager._skuToken,w.map._requestManager._customAccessToken),w.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),w.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},I.prototype.loaded=function(){return this._loaded},I.prototype.hasTile=function(w){return!this.tileBounds||this.tileBounds.contains(w.canonical)},I.prototype.onAdd=function(w){this.map=w,this.load()},I.prototype.setSourceProperty=function(w){this._tileJSONRequest&&this._tileJSONRequest.cancel(),w(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},I.prototype.setTiles=function(w){var B=this;return this.setSourceProperty(function(){B._options.tiles=w}),this},I.prototype.setUrl=function(w){var B=this;return this.setSourceProperty(function(){B.url=w,B._options.url=w}),this},I.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},I.prototype.serialize=function(){return t.extend({},this._options)},I.prototype.loadTile=function(w,B){var D=this.map._requestManager.normalizeTileURL(w.tileID.canonical.url(this.tiles,this.scheme)),G={request:this.map._requestManager.transformRequest(D,t.ResourceType.Tile),uid:w.uid,tileID:w.tileID,zoom:w.tileID.overscaledZ,tileSize:this.tileSize*w.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function J(st,Ct){return delete w.request,w.aborted?B(null):st&&st.status!==404?B(st):(Ct&&Ct.resourceTiming&&(w.resourceTiming=Ct.resourceTiming),this.map._refreshExpiredTiles&&Ct&&w.setExpiryData(Ct),w.loadVectorData(Ct,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),B(null),void(w.reloadCallback&&(this.loadTile(w,w.reloadCallback),w.reloadCallback=null)))}G.request.collectResourceTiming=this._collectResourceTiming,w.actor&&w.state!=="expired"?w.state==="loading"?w.reloadCallback=B:w.request=w.actor.send("reloadTile",G,J.bind(this)):(w.actor=this.dispatcher.getActor(),w.request=w.actor.send("loadTile",G,J.bind(this)))},I.prototype.abortTile=function(w){w.request&&(w.request.cancel(),delete w.request),w.actor&&w.actor.send("abortTile",{uid:w.uid,type:this.type,source:this.id},void 0)},I.prototype.unloadTile=function(w){w.unloadVectorData(),w.actor&&w.actor.send("removeTile",{uid:w.uid,type:this.type,source:this.id},void 0)},I.prototype.hasTransition=function(){return!1},I}(t.Evented),V=function(j){function I(w,B,D,G){j.call(this),this.id=w,this.dispatcher=D,this.setEventedParent(G),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({type:"raster"},B),t.extend(this,t.pick(B,["url","scheme","tileSize"]))}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.load=function(){var w=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=W(this._options,this.map._requestManager,function(B,D){w._tileJSONRequest=null,w._loaded=!0,B?w.fire(new t.ErrorEvent(B)):D&&(t.extend(w,D),D.bounds&&(w.tileBounds=new F(D.bounds,w.minzoom,w.maxzoom)),t.postTurnstileEvent(D.tiles),t.postMapLoadEvent(D.tiles,w.map._getMapId(),w.map._requestManager._skuToken),w.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),w.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},I.prototype.loaded=function(){return this._loaded},I.prototype.onAdd=function(w){this.map=w,this.load()},I.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},I.prototype.serialize=function(){return t.extend({},this._options)},I.prototype.hasTile=function(w){return!this.tileBounds||this.tileBounds.contains(w.canonical)},I.prototype.loadTile=function(w,B){var D=this,G=this.map._requestManager.normalizeTileURL(w.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);w.request=t.getImage(this.map._requestManager.transformRequest(G,t.ResourceType.Tile),function(J,st){if(delete w.request,w.aborted)w.state="unloaded",B(null);else if(J)w.state="errored",B(J);else if(st){D.map._refreshExpiredTiles&&w.setExpiryData(st),delete st.cacheControl,delete st.expires;var Ct=D.map.painter.context,Ot=Ct.gl;w.texture=D.map.painter.getTileTexture(st.width),w.texture?w.texture.update(st,{useMipmap:!0}):(w.texture=new t.Texture(Ct,st,Ot.RGBA,{useMipmap:!0}),w.texture.bind(Ot.LINEAR,Ot.CLAMP_TO_EDGE,Ot.LINEAR_MIPMAP_NEAREST),Ct.extTextureFilterAnisotropic&&Ot.texParameterf(Ot.TEXTURE_2D,Ct.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Ct.extTextureFilterAnisotropicMax)),w.state="loaded",t.cacheEntryPossiblyAdded(D.dispatcher),B(null)}})},I.prototype.abortTile=function(w,B){w.request&&(w.request.cancel(),delete w.request),B()},I.prototype.unloadTile=function(w,B){w.texture&&this.map.painter.saveTileTexture(w.texture),B()},I.prototype.hasTransition=function(){return!1},I}(t.Evented),k=function(j){function I(w,B,D,G){j.call(this,w,B,D,G),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({type:"raster-dem"},B),this.encoding=B.encoding||"mapbox"}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},I.prototype.loadTile=function(w,B){var D=this.map._requestManager.normalizeTileURL(w.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function G(J,st){J&&(w.state="errored",B(J)),st&&(w.dem=st,w.needsHillshadePrepare=!0,w.state="loaded",B(null))}w.request=t.getImage(this.map._requestManager.transformRequest(D,t.ResourceType.Tile),function(J,st){if(delete w.request,w.aborted)w.state="unloaded",B(null);else if(J)w.state="errored",B(J);else if(st){this.map._refreshExpiredTiles&&w.setExpiryData(st),delete st.cacheControl,delete st.expires;var Ct=t.window.ImageBitmap&&st instanceof t.window.ImageBitmap&&t.offscreenCanvasSupported()?st:t.browser.getImageData(st,1),Ot={uid:w.uid,coord:w.tileID,source:this.id,rawImageData:Ct,encoding:this.encoding};w.actor&&w.state!=="expired"||(w.actor=this.dispatcher.getActor(),w.actor.send("loadDEMTile",Ot,G.bind(this)))}}.bind(this)),w.neighboringTiles=this._getNeighboringTiles(w.tileID)},I.prototype._getNeighboringTiles=function(w){var B=w.canonical,D=Math.pow(2,B.z),G=(B.x-1+D)%D,J=B.x===0?w.wrap-1:w.wrap,st=(B.x+1+D)%D,Ct=B.x+1===D?w.wrap+1:w.wrap,Ot={};return Ot[new t.OverscaledTileID(w.overscaledZ,J,B.z,G,B.y).key]={backfilled:!1},Ot[new t.OverscaledTileID(w.overscaledZ,Ct,B.z,st,B.y).key]={backfilled:!1},B.y>0&&(Ot[new t.OverscaledTileID(w.overscaledZ,J,B.z,G,B.y-1).key]={backfilled:!1},Ot[new t.OverscaledTileID(w.overscaledZ,w.wrap,B.z,B.x,B.y-1).key]={backfilled:!1},Ot[new t.OverscaledTileID(w.overscaledZ,Ct,B.z,st,B.y-1).key]={backfilled:!1}),B.y+1<D&&(Ot[new t.OverscaledTileID(w.overscaledZ,J,B.z,G,B.y+1).key]={backfilled:!1},Ot[new t.OverscaledTileID(w.overscaledZ,w.wrap,B.z,B.x,B.y+1).key]={backfilled:!1},Ot[new t.OverscaledTileID(w.overscaledZ,Ct,B.z,st,B.y+1).key]={backfilled:!1}),Ot},I.prototype.unloadTile=function(w){w.demTexture&&this.map.painter.saveTileTexture(w.demTexture),w.fbo&&(w.fbo.destroy(),delete w.fbo),w.dem&&delete w.dem,delete w.neighboringTiles,w.state="unloaded",w.actor&&w.actor.send("removeDEMTile",{uid:w.uid,source:this.id})},I}(V),Y=function(j){function I(w,B,D,G){j.call(this),this.id=w,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=D.getActor(),this.setEventedParent(G),this._data=B.data,this._options=t.extend({},B),this._collectResourceTiming=B.collectResourceTiming,this._resourceTiming=[],B.maxzoom!==void 0&&(this.maxzoom=B.maxzoom),B.type&&(this.type=B.type),B.attribution&&(this.attribution=B.attribution),this.promoteId=B.promoteId;var J=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:B.cluster||!1,geojsonVtOptions:{buffer:(B.buffer!==void 0?B.buffer:128)*J,tolerance:(B.tolerance!==void 0?B.tolerance:.375)*J,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:B.lineMetrics||!1,generateId:B.generateId||!1},superclusterOptions:{maxZoom:B.clusterMaxZoom!==void 0?Math.min(B.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,B.clusterMinPoints||2),extent:t.EXTENT,radius:(B.clusterRadius||50)*J,log:!1,generateId:B.generateId||!1},clusterProperties:B.clusterProperties,filter:B.filter},B.workerOptions)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.load=function(){var w=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(B){if(B)w.fire(new t.ErrorEvent(B));else{var D={dataType:"source",sourceDataType:"metadata"};w._collectResourceTiming&&w._resourceTiming&&w._resourceTiming.length>0&&(D.resourceTiming=w._resourceTiming,w._resourceTiming=[]),w.fire(new t.Event("data",D))}})},I.prototype.onAdd=function(w){this.map=w,this.load()},I.prototype.setData=function(w){var B=this;return this._data=w,this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(D){if(D)B.fire(new t.ErrorEvent(D));else{var G={dataType:"source",sourceDataType:"content"};B._collectResourceTiming&&B._resourceTiming&&B._resourceTiming.length>0&&(G.resourceTiming=B._resourceTiming,B._resourceTiming=[]),B.fire(new t.Event("data",G))}}),this},I.prototype.getClusterExpansionZoom=function(w,B){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:w,source:this.id},B),this},I.prototype.getClusterChildren=function(w,B){return this.actor.send("geojson.getClusterChildren",{clusterId:w,source:this.id},B),this},I.prototype.getClusterLeaves=function(w,B,D,G){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:w,limit:B,offset:D},G),this},I.prototype._updateWorkerData=function(w){var B=this;this._loaded=!1;var D=t.extend({},this.workerOptions),G=this._data;typeof G=="string"?(D.request=this.map._requestManager.transformRequest(t.browser.resolveURL(G),t.ResourceType.Source),D.request.collectResourceTiming=this._collectResourceTiming):D.data=JSON.stringify(G),this.actor.send(this.type+".loadData",D,function(J,st){B._removed||st&&st.abandoned||(B._loaded=!0,st&&st.resourceTiming&&st.resourceTiming[B.id]&&(B._resourceTiming=st.resourceTiming[B.id].slice(0)),B.actor.send(B.type+".coalesce",{source:D.source},null),w(J))})},I.prototype.loaded=function(){return this._loaded},I.prototype.loadTile=function(w,B){var D=this,G=w.actor?"reloadTile":"loadTile";w.actor=this.actor,w.request=this.actor.send(G,{type:this.type,uid:w.uid,tileID:w.tileID,zoom:w.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(J,st){return delete w.request,w.unloadVectorData(),w.aborted?B(null):J?B(J):(w.loadVectorData(st,D.map.painter,G==="reloadTile"),B(null))})},I.prototype.abortTile=function(w){w.request&&(w.request.cancel(),delete w.request),w.aborted=!0},I.prototype.unloadTile=function(w){w.unloadVectorData(),this.actor.send("removeTile",{uid:w.uid,type:this.type,source:this.id})},I.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},I.prototype.serialize=function(){return t.extend({},this._options,{type:this.type,data:this._data})},I.prototype.hasTransition=function(){return!1},I}(t.Evented),K=t.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),it=function(j){function I(w,B,D,G){j.call(this),this.id=w,this.dispatcher=D,this.coordinates=B.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(G),this.options=B}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.load=function(w,B){var D=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),function(G,J){D._loaded=!0,G?D.fire(new t.ErrorEvent(G)):J&&(D.image=J,w&&(D.coordinates=w),B&&B(),D._finishLoading())})},I.prototype.loaded=function(){return this._loaded},I.prototype.updateImage=function(w){var B=this;return this.image&&w.url?(this.options.url=w.url,this.load(w.coordinates,function(){B.texture=null}),this):this},I.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))},I.prototype.onAdd=function(w){this.map=w,this.load()},I.prototype.setCoordinates=function(w){var B=this;this.coordinates=w;var D=w.map(t.MercatorCoordinate.fromLngLat);this.tileID=function(J){for(var st=1/0,Ct=1/0,Ot=-1/0,Ut=-1/0,Ht=0,qt=J;Ht<qt.length;Ht+=1){var fe=qt[Ht];st=Math.min(st,fe.x),Ct=Math.min(Ct,fe.y),Ot=Math.max(Ot,fe.x),Ut=Math.max(Ut,fe.y)}var ye=Math.max(Ot-st,Ut-Ct),De=Math.max(0,Math.floor(-Math.log(ye)/Math.LN2)),Ie=Math.pow(2,De);return new t.CanonicalTileID(De,Math.floor((st+Ot)/2*Ie),Math.floor((Ct+Ut)/2*Ie))}(D),this.minzoom=this.maxzoom=this.tileID.z;var G=D.map(function(J){return B.tileID.getTilePoint(J)._round()});return this._boundsArray=new t.StructArrayLayout4i8,this._boundsArray.emplaceBack(G[0].x,G[0].y,0,0),this._boundsArray.emplaceBack(G[1].x,G[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(G[3].x,G[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(G[2].x,G[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this},I.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var w=this.map.painter.context,B=w.gl;for(var D in this.boundsBuffer||(this.boundsBuffer=w.createVertexBuffer(this._boundsArray,K.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new t.Texture(w,this.image,B.RGBA),this.texture.bind(B.LINEAR,B.CLAMP_TO_EDGE)),this.tiles){var G=this.tiles[D];G.state!=="loaded"&&(G.state="loaded",G.texture=this.texture)}}},I.prototype.loadTile=function(w,B){this.tileID&&this.tileID.equals(w.tileID.canonical)?(this.tiles[String(w.tileID.wrap)]=w,w.buckets={},B(null)):(w.state="errored",B(null))},I.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},I.prototype.hasTransition=function(){return!1},I}(t.Evented),ct=function(j){function I(w,B,D,G){j.call(this,w,B,D,G),this.roundZoom=!0,this.type="video",this.options=B}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.load=function(){var w=this;this._loaded=!1;var B=this.options;this.urls=[];for(var D=0,G=B.urls;D<G.length;D+=1)this.urls.push(this.map._requestManager.transformRequest(G[D],t.ResourceType.Source).url);t.getVideo(this.urls,function(J,st){w._loaded=!0,J?w.fire(new t.ErrorEvent(J)):st&&(w.video=st,w.video.loop=!0,w.video.addEventListener("playing",function(){w.map.triggerRepaint()}),w.map&&w.video.play(),w._finishLoading())})},I.prototype.pause=function(){this.video&&this.video.pause()},I.prototype.play=function(){this.video&&this.video.play()},I.prototype.seek=function(w){if(this.video){var B=this.video.seekable;w<B.start(0)||w>B.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+B.start(0)+" and "+B.end(0)+"-second mark."))):this.video.currentTime=w}},I.prototype.getVideo=function(){return this.video},I.prototype.onAdd=function(w){this.map||(this.map=w,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},I.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var w=this.map.painter.context,B=w.gl;for(var D in this.boundsBuffer||(this.boundsBuffer=w.createVertexBuffer(this._boundsArray,K.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(B.LINEAR,B.CLAMP_TO_EDGE),B.texSubImage2D(B.TEXTURE_2D,0,0,0,B.RGBA,B.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(w,this.video,B.RGBA),this.texture.bind(B.LINEAR,B.CLAMP_TO_EDGE)),this.tiles){var G=this.tiles[D];G.state!=="loaded"&&(G.state="loaded",G.texture=this.texture)}}},I.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},I.prototype.hasTransition=function(){return this.video&&!this.video.paused},I}(it),ht=function(j){function I(w,B,D,G){j.call(this,w,B,D,G),B.coordinates?Array.isArray(B.coordinates)&&B.coordinates.length===4&&!B.coordinates.some(function(J){return!Array.isArray(J)||J.length!==2||J.some(function(st){return typeof st!="number"})})||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+w,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+w,null,'missing required property "coordinates"'))),B.animate&&typeof B.animate!="boolean"&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+w,null,'optional "animate" property must be a boolean value'))),B.canvas?typeof B.canvas=="string"||B.canvas instanceof t.window.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+w,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+w,null,'missing required property "canvas"'))),this.options=B,this.animate=B.animate===void 0||B.animate}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},I.prototype.getCanvas=function(){return this.canvas},I.prototype.onAdd=function(w){this.map=w,this.load(),this.canvas&&this.animate&&this.play()},I.prototype.onRemove=function(){this.pause()},I.prototype.prepare=function(){var w=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,w=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,w=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var B=this.map.painter.context,D=B.gl;for(var G in this.boundsBuffer||(this.boundsBuffer=B.createVertexBuffer(this._boundsArray,K.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(w||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(B,this.canvas,D.RGBA,{premultiply:!0}),this.tiles){var J=this.tiles[G];J.state!=="loaded"&&(J.state="loaded",J.texture=this.texture)}}},I.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},I.prototype.hasTransition=function(){return this._playing},I.prototype._hasInvalidDimensions=function(){for(var w=0,B=[this.canvas.width,this.canvas.height];w<B.length;w+=1){var D=B[w];if(isNaN(D)||D<=0)return!0}return!1},I}(it),ut={vector:Z,raster:V,"raster-dem":k,geojson:Y,video:ct,image:it,canvas:ht};function It(j,I){var w=t.identity([]);return t.translate(w,w,[1,1,0]),t.scale(w,w,[.5*j.width,.5*j.height,1]),t.multiply(w,w,j.calculatePosMatrix(I.toUnwrapped()))}function Nt(j,I,w,B,D,G){var J=function(De,Ie,Ve){if(De)for(var qe=0,on=De;qe<on.length;qe+=1){var tr=Ie[on[qe]];if(tr&&tr.source===Ve&&tr.type==="fill-extrusion")return!0}else for(var zn in Ie){var cr=Ie[zn];if(cr.source===Ve&&cr.type==="fill-extrusion")return!0}return!1}(D&&D.layers,I,j.id),st=G.maxPitchScaleFactor(),Ct=j.tilesIn(B,st,J);Ct.sort(Lt);for(var Ot=[],Ut=0,Ht=Ct;Ut<Ht.length;Ut+=1){var qt=Ht[Ut];Ot.push({wrappedTileID:qt.tileID.wrapped().key,queryResults:qt.tile.queryRenderedFeatures(I,w,j._state,qt.queryGeometry,qt.cameraQueryGeometry,qt.scale,D,G,st,It(j.transform,qt.tileID))})}var fe=function(De){for(var Ie={},Ve={},qe=0,on=De;qe<on.length;qe+=1){var tr=on[qe],zn=tr.queryResults,cr=tr.wrappedTileID,yr=Ve[cr]=Ve[cr]||{};for(var Jr in zn)for(var Wr=zn[Jr],bi=yr[Jr]=yr[Jr]||{},ji=Ie[Jr]=Ie[Jr]||[],Hi=0,Ji=Wr;Hi<Ji.length;Hi+=1){var Pa=Ji[Hi];bi[Pa.featureIndex]||(bi[Pa.featureIndex]=!0,ji.push(Pa))}}return Ie}(Ot);for(var ye in fe)fe[ye].forEach(function(De){var Ie=De.feature,Ve=j.getFeatureState(Ie.layer["source-layer"],Ie.id);Ie.source=Ie.layer.source,Ie.layer["source-layer"]&&(Ie.sourceLayer=Ie.layer["source-layer"]),Ie.state=Ve});return fe}function Lt(j,I){var w=j.tileID,B=I.tileID;return w.overscaledZ-B.overscaledZ||w.canonical.y-B.canonical.y||w.wrap-B.wrap||w.canonical.x-B.canonical.x}var _t=function(I,w){this.max=I,this.onRemove=w,this.reset()};_t.prototype.reset=function(){for(var j in this.data)for(var I=0,w=this.data[j];I<w.length;I+=1){var B=w[I];B.timeout&&clearTimeout(B.timeout),this.onRemove(B.value)}return this.data={},this.order=[],this},_t.prototype.add=function(j,I,w){var B=this,D=j.wrapped().key;this.data[D]===void 0&&(this.data[D]=[]);var G={value:I,timeout:void 0};if(w!==void 0&&(G.timeout=setTimeout(function(){B.remove(j,G)},w)),this.data[D].push(G),this.order.push(D),this.order.length>this.max){var J=this._getAndRemoveByKey(this.order[0]);J&&this.onRemove(J)}return this},_t.prototype.has=function(j){return j.wrapped().key in this.data},_t.prototype.getAndRemove=function(j){return this.has(j)?this._getAndRemoveByKey(j.wrapped().key):null},_t.prototype._getAndRemoveByKey=function(j){var I=this.data[j].shift();return I.timeout&&clearTimeout(I.timeout),this.data[j].length===0&&delete this.data[j],this.order.splice(this.order.indexOf(j),1),I.value},_t.prototype.getByKey=function(j){var I=this.data[j];return I?I[0].value:null},_t.prototype.get=function(j){return this.has(j)?this.data[j.wrapped().key][0].value:null},_t.prototype.remove=function(j,I){if(!this.has(j))return this;var w=j.wrapped().key,B=I===void 0?0:this.data[w].indexOf(I),D=this.data[w][B];return this.data[w].splice(B,1),D.timeout&&clearTimeout(D.timeout),this.data[w].length===0&&delete this.data[w],this.onRemove(D.value),this.order.splice(this.order.indexOf(w),1),this},_t.prototype.setMaxSize=function(j){for(this.max=j;this.order.length>this.max;){var I=this._getAndRemoveByKey(this.order[0]);I&&this.onRemove(I)}return this},_t.prototype.filter=function(j){var I=[];for(var w in this.data)for(var B=0,D=this.data[w];B<D.length;B+=1){var G=D[B];j(G.value)||I.push(G)}for(var J=0,st=I;J<st.length;J+=1){var Ct=st[J];this.remove(Ct.value.tileID,Ct)}};var mt=function(I,w,B){this.context=I;var D=I.gl;this.buffer=D.createBuffer(),this.dynamicDraw=Boolean(B),this.context.unbindVAO(),I.bindElementBuffer.set(this.buffer),D.bufferData(D.ELEMENT_ARRAY_BUFFER,w.arrayBuffer,this.dynamicDraw?D.DYNAMIC_DRAW:D.STATIC_DRAW),this.dynamicDraw||delete w.arrayBuffer};mt.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},mt.prototype.updateData=function(j){var I=this.context.gl;this.context.unbindVAO(),this.bind(),I.bufferSubData(I.ELEMENT_ARRAY_BUFFER,0,j.arrayBuffer)},mt.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var At={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},rt=function(I,w,B,D){this.length=w.length,this.attributes=B,this.itemSize=w.bytesPerElement,this.dynamicDraw=D,this.context=I;var G=I.gl;this.buffer=G.createBuffer(),I.bindVertexBuffer.set(this.buffer),G.bufferData(G.ARRAY_BUFFER,w.arrayBuffer,this.dynamicDraw?G.DYNAMIC_DRAW:G.STATIC_DRAW),this.dynamicDraw||delete w.arrayBuffer};rt.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},rt.prototype.updateData=function(j){var I=this.context.gl;this.bind(),I.bufferSubData(I.ARRAY_BUFFER,0,j.arrayBuffer)},rt.prototype.enableAttributes=function(j,I){for(var w=0;w<this.attributes.length;w++){var B=I.attributes[this.attributes[w].name];B!==void 0&&j.enableVertexAttribArray(B)}},rt.prototype.setVertexAttribPointers=function(j,I,w){for(var B=0;B<this.attributes.length;B++){var D=this.attributes[B],G=I.attributes[D.name];G!==void 0&&j.vertexAttribPointer(G,D.components,j[At[D.type]],!1,this.itemSize,D.offset+this.itemSize*(w||0))}},rt.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Mt=function(I){this.gl=I.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};Mt.prototype.get=function(){return this.current},Mt.prototype.set=function(j){},Mt.prototype.getDefault=function(){return this.default},Mt.prototype.setDefault=function(){this.set(this.default)};var z=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return t.Color.transparent},I.prototype.set=function(w){var B=this.current;(w.r!==B.r||w.g!==B.g||w.b!==B.b||w.a!==B.a||this.dirty)&&(this.gl.clearColor(w.r,w.g,w.b,w.a),this.current=w,this.dirty=!1)},I}(Mt),$=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return 1},I.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.clearDepth(w),this.current=w,this.dirty=!1)},I}(Mt),dt=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return 0},I.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.clearStencil(w),this.current=w,this.dirty=!1)},I}(Mt),et=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return[!0,!0,!0,!0]},I.prototype.set=function(w){var B=this.current;(w[0]!==B[0]||w[1]!==B[1]||w[2]!==B[2]||w[3]!==B[3]||this.dirty)&&(this.gl.colorMask(w[0],w[1],w[2],w[3]),this.current=w,this.dirty=!1)},I}(Mt),ot=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return!0},I.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.depthMask(w),this.current=w,this.dirty=!1)},I}(Mt),pt=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return 255},I.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.stencilMask(w),this.current=w,this.dirty=!1)},I}(Mt),H=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},I.prototype.set=function(w){var B=this.current;(w.func!==B.func||w.ref!==B.ref||w.mask!==B.mask||this.dirty)&&(this.gl.stencilFunc(w.func,w.ref,w.mask),this.current=w,this.dirty=!1)},I}(Mt),nt=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){var w=this.gl;return[w.KEEP,w.KEEP,w.KEEP]},I.prototype.set=function(w){var B=this.current;(w[0]!==B[0]||w[1]!==B[1]||w[2]!==B[2]||this.dirty)&&(this.gl.stencilOp(w[0],w[1],w[2]),this.current=w,this.dirty=!1)},I}(Mt),at=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return!1},I.prototype.set=function(w){if(w!==this.current||this.dirty){var B=this.gl;w?B.enable(B.STENCIL_TEST):B.disable(B.STENCIL_TEST),this.current=w,this.dirty=!1}},I}(Mt),q=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return[0,1]},I.prototype.set=function(w){var B=this.current;(w[0]!==B[0]||w[1]!==B[1]||this.dirty)&&(this.gl.depthRange(w[0],w[1]),this.current=w,this.dirty=!1)},I}(Mt),Et=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return!1},I.prototype.set=function(w){if(w!==this.current||this.dirty){var B=this.gl;w?B.enable(B.DEPTH_TEST):B.disable(B.DEPTH_TEST),this.current=w,this.dirty=!1}},I}(Mt),vt=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return this.gl.LESS},I.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.depthFunc(w),this.current=w,this.dirty=!1)},I}(Mt),Ft=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return!1},I.prototype.set=function(w){if(w!==this.current||this.dirty){var B=this.gl;w?B.enable(B.BLEND):B.disable(B.BLEND),this.current=w,this.dirty=!1}},I}(Mt),Qt=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){var w=this.gl;return[w.ONE,w.ZERO]},I.prototype.set=function(w){var B=this.current;(w[0]!==B[0]||w[1]!==B[1]||this.dirty)&&(this.gl.blendFunc(w[0],w[1]),this.current=w,this.dirty=!1)},I}(Mt),ee=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return t.Color.transparent},I.prototype.set=function(w){var B=this.current;(w.r!==B.r||w.g!==B.g||w.b!==B.b||w.a!==B.a||this.dirty)&&(this.gl.blendColor(w.r,w.g,w.b,w.a),this.current=w,this.dirty=!1)},I}(Mt),Gt=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return this.gl.FUNC_ADD},I.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.blendEquation(w),this.current=w,this.dirty=!1)},I}(Mt),$t=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return!1},I.prototype.set=function(w){if(w!==this.current||this.dirty){var B=this.gl;w?B.enable(B.CULL_FACE):B.disable(B.CULL_FACE),this.current=w,this.dirty=!1}},I}(Mt),Pe=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return this.gl.BACK},I.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.cullFace(w),this.current=w,this.dirty=!1)},I}(Mt),me=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return this.gl.CCW},I.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.frontFace(w),this.current=w,this.dirty=!1)},I}(Mt),le=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return null},I.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.useProgram(w),this.current=w,this.dirty=!1)},I}(Mt),be=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return this.gl.TEXTURE0},I.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.activeTexture(w),this.current=w,this.dirty=!1)},I}(Mt),ze=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){var w=this.gl;return[0,0,w.drawingBufferWidth,w.drawingBufferHeight]},I.prototype.set=function(w){var B=this.current;(w[0]!==B[0]||w[1]!==B[1]||w[2]!==B[2]||w[3]!==B[3]||this.dirty)&&(this.gl.viewport(w[0],w[1],w[2],w[3]),this.current=w,this.dirty=!1)},I}(Mt),Xe=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return null},I.prototype.set=function(w){if(w!==this.current||this.dirty){var B=this.gl;B.bindFramebuffer(B.FRAMEBUFFER,w),this.current=w,this.dirty=!1}},I}(Mt),_n=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return null},I.prototype.set=function(w){if(w!==this.current||this.dirty){var B=this.gl;B.bindRenderbuffer(B.RENDERBUFFER,w),this.current=w,this.dirty=!1}},I}(Mt),Kn=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return null},I.prototype.set=function(w){if(w!==this.current||this.dirty){var B=this.gl;B.bindTexture(B.TEXTURE_2D,w),this.current=w,this.dirty=!1}},I}(Mt),Hn=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return null},I.prototype.set=function(w){if(w!==this.current||this.dirty){var B=this.gl;B.bindBuffer(B.ARRAY_BUFFER,w),this.current=w,this.dirty=!1}},I}(Mt),nn=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return null},I.prototype.set=function(w){var B=this.gl;B.bindBuffer(B.ELEMENT_ARRAY_BUFFER,w),this.current=w,this.dirty=!1},I}(Mt),en=function(j){function I(w){j.call(this,w),this.vao=w.extVertexArrayObject}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return null},I.prototype.set=function(w){this.vao&&(w!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(w),this.current=w,this.dirty=!1)},I}(Mt),An=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return 4},I.prototype.set=function(w){if(w!==this.current||this.dirty){var B=this.gl;B.pixelStorei(B.UNPACK_ALIGNMENT,w),this.current=w,this.dirty=!1}},I}(Mt),Nn=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return!1},I.prototype.set=function(w){if(w!==this.current||this.dirty){var B=this.gl;B.pixelStorei(B.UNPACK_PREMULTIPLY_ALPHA_WEBGL,w),this.current=w,this.dirty=!1}},I}(Mt),hr=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return!1},I.prototype.set=function(w){if(w!==this.current||this.dirty){var B=this.gl;B.pixelStorei(B.UNPACK_FLIP_Y_WEBGL,w),this.current=w,this.dirty=!1}},I}(Mt),fi=function(j){function I(w,B){j.call(this,w),this.context=w,this.parent=B}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return null},I}(Mt),Oe=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.setDirty=function(){this.dirty=!0},I.prototype.set=function(w){if(w!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var B=this.gl;B.framebufferTexture2D(B.FRAMEBUFFER,B.COLOR_ATTACHMENT0,B.TEXTURE_2D,w,0),this.current=w,this.dirty=!1}},I}(fi),Ae=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.set=function(w){if(w!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var B=this.gl;B.framebufferRenderbuffer(B.FRAMEBUFFER,B.DEPTH_ATTACHMENT,B.RENDERBUFFER,w),this.current=w,this.dirty=!1}},I}(fi),Jt=function(I,w,B,D){this.context=I,this.width=w,this.height=B;var G=this.framebuffer=I.gl.createFramebuffer();this.colorAttachment=new Oe(I,G),D&&(this.depthAttachment=new Ae(I,G))};Jt.prototype.destroy=function(){var j=this.context.gl,I=this.colorAttachment.get();if(I&&j.deleteTexture(I),this.depthAttachment){var w=this.depthAttachment.get();w&&j.deleteRenderbuffer(w)}j.deleteFramebuffer(this.framebuffer)};var ve=function(I,w,B){this.func=I,this.mask=w,this.range=B};ve.ReadOnly=!1,ve.ReadWrite=!0,ve.disabled=new ve(519,ve.ReadOnly,[0,1]);var Vt=function(I,w,B,D,G,J){this.test=I,this.ref=w,this.mask=B,this.fail=D,this.depthFail=G,this.pass=J};Vt.disabled=new Vt({func:519,mask:0},0,0,7680,7680,7680);var ie=function(I,w,B){this.blendFunction=I,this.blendColor=w,this.mask=B};ie.disabled=new ie(ie.Replace=[1,0],t.Color.transparent,[!1,!1,!1,!1]),ie.unblended=new ie(ie.Replace,t.Color.transparent,[!0,!0,!0,!0]),ie.alphaBlended=new ie([1,771],t.Color.transparent,[!0,!0,!0,!0]);var Ce=function(I,w,B){this.enable=I,this.mode=w,this.frontFace=B};Ce.disabled=new Ce(!1,1029,2305),Ce.backCCW=new Ce(!0,1029,2305);var ue=function(I){this.gl=I,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new z(this),this.clearDepth=new $(this),this.clearStencil=new dt(this),this.colorMask=new et(this),this.depthMask=new ot(this),this.stencilMask=new pt(this),this.stencilFunc=new H(this),this.stencilOp=new nt(this),this.stencilTest=new at(this),this.depthRange=new q(this),this.depthTest=new Et(this),this.depthFunc=new vt(this),this.blend=new Ft(this),this.blendFunc=new Qt(this),this.blendColor=new ee(this),this.blendEquation=new Gt(this),this.cullFace=new $t(this),this.cullFaceSide=new Pe(this),this.frontFace=new me(this),this.program=new le(this),this.activeTexture=new be(this),this.viewport=new ze(this),this.bindFramebuffer=new Xe(this),this.bindRenderbuffer=new _n(this),this.bindTexture=new Kn(this),this.bindVertexBuffer=new Hn(this),this.bindElementBuffer=new nn(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new en(this),this.pixelStoreUnpack=new An(this),this.pixelStoreUnpackPremultiplyAlpha=new Nn(this),this.pixelStoreUnpackFlipY=new hr(this),this.extTextureFilterAnisotropic=I.getExtension("EXT_texture_filter_anisotropic")||I.getExtension("MOZ_EXT_texture_filter_anisotropic")||I.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=I.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=I.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(I.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=I.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=I.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=I.getParameter(I.MAX_TEXTURE_SIZE)};ue.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},ue.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},ue.prototype.createIndexBuffer=function(j,I){return new mt(this,j,I)},ue.prototype.createVertexBuffer=function(j,I,w){return new rt(this,j,I,w)},ue.prototype.createRenderbuffer=function(j,I,w){var B=this.gl,D=B.createRenderbuffer();return this.bindRenderbuffer.set(D),B.renderbufferStorage(B.RENDERBUFFER,j,I,w),this.bindRenderbuffer.set(null),D},ue.prototype.createFramebuffer=function(j,I,w){return new Jt(this,j,I,w)},ue.prototype.clear=function(j){var I=j.color,w=j.depth,B=this.gl,D=0;I&&(D|=B.COLOR_BUFFER_BIT,this.clearColor.set(I),this.colorMask.set([!0,!0,!0,!0])),w!==void 0&&(D|=B.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(w),this.depthMask.set(!0)),B.clear(D)},ue.prototype.setCullFace=function(j){j.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(j.mode),this.frontFace.set(j.frontFace))},ue.prototype.setDepthMode=function(j){j.func!==this.gl.ALWAYS||j.mask?(this.depthTest.set(!0),this.depthFunc.set(j.func),this.depthMask.set(j.mask),this.depthRange.set(j.range)):this.depthTest.set(!1)},ue.prototype.setStencilMode=function(j){j.test.func!==this.gl.ALWAYS||j.mask?(this.stencilTest.set(!0),this.stencilMask.set(j.mask),this.stencilOp.set([j.fail,j.depthFail,j.pass]),this.stencilFunc.set({func:j.test.func,ref:j.ref,mask:j.test.mask})):this.stencilTest.set(!1)},ue.prototype.setColorMode=function(j){t.deepEqual(j.blendFunction,ie.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(j.blendFunction),this.blendColor.set(j.blendColor)),this.colorMask.set(j.mask)},ue.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var xe=function(j){function I(w,B,D){var G=this;j.call(this),this.id=w,this.dispatcher=D,this.on("data",function(J){J.dataType==="source"&&J.sourceDataType==="metadata"&&(G._sourceLoaded=!0),G._sourceLoaded&&!G._paused&&J.dataType==="source"&&J.sourceDataType==="content"&&(G.reload(),G.transform&&G.update(G.transform))}),this.on("error",function(){G._sourceErrored=!0}),this._source=function(J,st,Ct,Ot){var Ut=new ut[st.type](J,st,Ct,Ot);if(Ut.id!==J)throw new Error("Expected Source id to be "+J+" instead of "+Ut.id);return t.bindAll(["load","abort","unload","serialize","prepare"],Ut),Ut}(w,B,D,this),this._tiles={},this._cache=new _t(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new t.SourceFeatureState}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.onAdd=function(w){this.map=w,this._maxTileCacheSize=w?w._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(w)},I.prototype.onRemove=function(w){this._source&&this._source.onRemove&&this._source.onRemove(w)},I.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var w in this._tiles){var B=this._tiles[w];if(B.state!=="loaded"&&B.state!=="errored")return!1}return!0},I.prototype.getSource=function(){return this._source},I.prototype.pause=function(){this._paused=!0},I.prototype.resume=function(){if(this._paused){var w=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,w&&this.reload(),this.transform&&this.update(this.transform)}},I.prototype._loadTile=function(w,B){return this._source.loadTile(w,B)},I.prototype._unloadTile=function(w){if(this._source.unloadTile)return this._source.unloadTile(w,function(){})},I.prototype._abortTile=function(w){if(this._source.abortTile)return this._source.abortTile(w,function(){})},I.prototype.serialize=function(){return this._source.serialize()},I.prototype.prepare=function(w){for(var B in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var D=this._tiles[B];D.upload(w),D.prepare(this.map.style.imageManager)}},I.prototype.getIds=function(){return t.values(this._tiles).map(function(w){return w.tileID}).sort($e).map(function(w){return w.key})},I.prototype.getRenderableIds=function(w){var B=this,D=[];for(var G in this._tiles)this._isIdRenderable(G,w)&&D.push(this._tiles[G]);return w?D.sort(function(J,st){var Ct=J.tileID,Ot=st.tileID,Ut=new t.Point(Ct.canonical.x,Ct.canonical.y)._rotate(B.transform.angle),Ht=new t.Point(Ot.canonical.x,Ot.canonical.y)._rotate(B.transform.angle);return Ct.overscaledZ-Ot.overscaledZ||Ht.y-Ut.y||Ht.x-Ut.x}).map(function(J){return J.tileID.key}):D.map(function(J){return J.tileID}).sort($e).map(function(J){return J.key})},I.prototype.hasRenderableParent=function(w){var B=this.findLoadedParent(w,0);return!!B&&this._isIdRenderable(B.tileID.key)},I.prototype._isIdRenderable=function(w,B){return this._tiles[w]&&this._tiles[w].hasData()&&!this._coveredTiles[w]&&(B||!this._tiles[w].holdingForFade())},I.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var w in this._cache.reset(),this._tiles)this._tiles[w].state!=="errored"&&this._reloadTile(w,"reloading")},I.prototype._reloadTile=function(w,B){var D=this._tiles[w];D&&(D.state!=="loading"&&(D.state=B),this._loadTile(D,this._tileLoaded.bind(this,D,w,B)))},I.prototype._tileLoaded=function(w,B,D,G){if(G)return w.state="errored",void(G.status!==404?this._source.fire(new t.ErrorEvent(G,{tile:w})):this.update(this.transform));w.timeAdded=t.browser.now(),D==="expired"&&(w.refreshedUponExpiration=!0),this._setTileReloadTimer(B,w),this.getSource().type==="raster-dem"&&w.dem&&this._backfillDEM(w),this._state.initializeTileState(w,this.map?this.map.painter:null),this._source.fire(new t.Event("data",{dataType:"source",tile:w,coord:w.tileID}))},I.prototype._backfillDEM=function(w){for(var B=this.getRenderableIds(),D=0;D<B.length;D++){var G=B[D];if(w.neighboringTiles&&w.neighboringTiles[G]){var J=this.getTileByID(G);st(w,J),st(J,w)}}function st(Ct,Ot){Ct.needsHillshadePrepare=!0;var Ut=Ot.tileID.canonical.x-Ct.tileID.canonical.x,Ht=Ot.tileID.canonical.y-Ct.tileID.canonical.y,qt=Math.pow(2,Ct.tileID.canonical.z),fe=Ot.tileID.key;Ut===0&&Ht===0||Math.abs(Ht)>1||(Math.abs(Ut)>1&&(Math.abs(Ut+qt)===1?Ut+=qt:Math.abs(Ut-qt)===1&&(Ut-=qt)),Ot.dem&&Ct.dem&&(Ct.dem.backfillBorder(Ot.dem,Ut,Ht),Ct.neighboringTiles&&Ct.neighboringTiles[fe]&&(Ct.neighboringTiles[fe].backfilled=!0)))}},I.prototype.getTile=function(w){return this.getTileByID(w.key)},I.prototype.getTileByID=function(w){return this._tiles[w]},I.prototype._retainLoadedChildren=function(w,B,D,G){for(var J in this._tiles){var st=this._tiles[J];if(!(G[J]||!st.hasData()||st.tileID.overscaledZ<=B||st.tileID.overscaledZ>D)){for(var Ct=st.tileID;st&&st.tileID.overscaledZ>B+1;){var Ot=st.tileID.scaledTo(st.tileID.overscaledZ-1);(st=this._tiles[Ot.key])&&st.hasData()&&(Ct=Ot)}for(var Ut=Ct;Ut.overscaledZ>B;)if(w[(Ut=Ut.scaledTo(Ut.overscaledZ-1)).key]){G[Ct.key]=Ct;break}}}},I.prototype.findLoadedParent=function(w,B){if(w.key in this._loadedParentTiles){var D=this._loadedParentTiles[w.key];return D&&D.tileID.overscaledZ>=B?D:null}for(var G=w.overscaledZ-1;G>=B;G--){var J=w.scaledTo(G),st=this._getLoadedTile(J);if(st)return st}},I.prototype._getLoadedTile=function(w){var B=this._tiles[w.key];return B&&B.hasData()?B:this._cache.getByKey(w.wrapped().key)},I.prototype.updateCacheSize=function(w){var B=Math.ceil(w.width/this._source.tileSize)+1,D=Math.ceil(w.height/this._source.tileSize)+1,G=Math.floor(B*D*5),J=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,G):G;this._cache.setMaxSize(J)},I.prototype.handleWrapJump=function(w){var B=Math.round((w-(this._prevLng===void 0?w:this._prevLng))/360);if(this._prevLng=w,B){var D={};for(var G in this._tiles){var J=this._tiles[G];J.tileID=J.tileID.unwrapTo(J.tileID.wrap+B),D[J.tileID.key]=J}for(var st in this._tiles=D,this._timers)clearTimeout(this._timers[st]),delete this._timers[st];for(var Ct in this._tiles)this._setTileReloadTimer(Ct,this._tiles[Ct])}},I.prototype.update=function(w){var B=this;if(this.transform=w,this._sourceLoaded&&!this._paused){var D;this.updateCacheSize(w),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?D=w.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(yr){return new t.OverscaledTileID(yr.canonical.z,yr.wrap,yr.canonical.z,yr.canonical.x,yr.canonical.y)}):(D=w.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(D=D.filter(function(yr){return B._source.hasTile(yr)}))):D=[];var G=w.coveringZoomLevel(this._source),J=Math.max(G-I.maxOverzooming,this._source.minzoom),st=Math.max(G+I.maxUnderzooming,this._source.minzoom),Ct=this._updateRetainedTiles(D,G);if(Fn(this._source.type)){for(var Ot={},Ut={},Ht=0,qt=Object.keys(Ct);Ht<qt.length;Ht+=1){var fe=qt[Ht],ye=Ct[fe],De=this._tiles[fe];if(De&&!(De.fadeEndTime&&De.fadeEndTime<=t.browser.now())){var Ie=this.findLoadedParent(ye,J);Ie&&(this._addTile(Ie.tileID),Ot[Ie.tileID.key]=Ie.tileID),Ut[fe]=ye}}for(var Ve in this._retainLoadedChildren(Ut,G,st,Ct),Ot)Ct[Ve]||(this._coveredTiles[Ve]=!0,Ct[Ve]=Ot[Ve])}for(var qe in Ct)this._tiles[qe].clearFadeHold();for(var on=0,tr=t.keysDifference(this._tiles,Ct);on<tr.length;on+=1){var zn=tr[on],cr=this._tiles[zn];cr.hasSymbolBuckets&&!cr.holdingForFade()?cr.setHoldDuration(this.map._fadeDuration):cr.hasSymbolBuckets&&!cr.symbolFadeFinished()||this._removeTile(zn)}this._updateLoadedParentTileCache()}},I.prototype.releaseSymbolFadeTiles=function(){for(var w in this._tiles)this._tiles[w].holdingForFade()&&this._removeTile(w)},I.prototype._updateRetainedTiles=function(w,B){for(var D={},G={},J=Math.max(B-I.maxOverzooming,this._source.minzoom),st=Math.max(B+I.maxUnderzooming,this._source.minzoom),Ct={},Ot=0,Ut=w;Ot<Ut.length;Ot+=1){var Ht=Ut[Ot],qt=this._addTile(Ht);D[Ht.key]=Ht,qt.hasData()||B<this._source.maxzoom&&(Ct[Ht.key]=Ht)}this._retainLoadedChildren(Ct,B,st,D);for(var fe=0,ye=w;fe<ye.length;fe+=1){var De=ye[fe],Ie=this._tiles[De.key];if(!Ie.hasData()){if(B+1>this._source.maxzoom){var Ve=De.children(this._source.maxzoom)[0],qe=this.getTile(Ve);if(qe&&qe.hasData()){D[Ve.key]=Ve;continue}}else{var on=De.children(this._source.maxzoom);if(D[on[0].key]&&D[on[1].key]&&D[on[2].key]&&D[on[3].key])continue}for(var tr=Ie.wasRequested(),zn=De.overscaledZ-1;zn>=J;--zn){var cr=De.scaledTo(zn);if(G[cr.key]||(G[cr.key]=!0,!(Ie=this.getTile(cr))&&tr&&(Ie=this._addTile(cr)),Ie&&(D[cr.key]=cr,tr=Ie.wasRequested(),Ie.hasData())))break}}}return D},I.prototype._updateLoadedParentTileCache=function(){for(var w in this._loadedParentTiles={},this._tiles){for(var B=[],D=void 0,G=this._tiles[w].tileID;G.overscaledZ>0;){if(G.key in this._loadedParentTiles){D=this._loadedParentTiles[G.key];break}B.push(G.key);var J=G.scaledTo(G.overscaledZ-1);if(D=this._getLoadedTile(J))break;G=J}for(var st=0,Ct=B;st<Ct.length;st+=1)this._loadedParentTiles[Ct[st]]=D}},I.prototype._addTile=function(w){var B=this._tiles[w.key];if(B)return B;(B=this._cache.getAndRemove(w))&&(this._setTileReloadTimer(w.key,B),B.tileID=w,this._state.initializeTileState(B,this.map?this.map.painter:null),this._cacheTimers[w.key]&&(clearTimeout(this._cacheTimers[w.key]),delete this._cacheTimers[w.key],this._setTileReloadTimer(w.key,B)));var D=Boolean(B);return D||(B=new t.Tile(w,this._source.tileSize*w.overscaleFactor()),this._loadTile(B,this._tileLoaded.bind(this,B,w.key,B.state))),B?(B.uses++,this._tiles[w.key]=B,D||this._source.fire(new t.Event("dataloading",{tile:B,coord:B.tileID,dataType:"source"})),B):null},I.prototype._setTileReloadTimer=function(w,B){var D=this;w in this._timers&&(clearTimeout(this._timers[w]),delete this._timers[w]);var G=B.getExpiryTimeout();G&&(this._timers[w]=setTimeout(function(){D._reloadTile(w,"expired"),delete D._timers[w]},G))},I.prototype._removeTile=function(w){var B=this._tiles[w];B&&(B.uses--,delete this._tiles[w],this._timers[w]&&(clearTimeout(this._timers[w]),delete this._timers[w]),B.uses>0||(B.hasData()&&B.state!=="reloading"?this._cache.add(B.tileID,B,B.getExpiryTimeout()):(B.aborted=!0,this._abortTile(B),this._unloadTile(B))))},I.prototype.clearTiles=function(){for(var w in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(w);this._cache.reset()},I.prototype.tilesIn=function(w,B,D){var G=this,J=[],st=this.transform;if(!st)return J;for(var Ct=D?st.getCameraQueryGeometry(w):w,Ot=w.map(function(zn){return st.pointCoordinate(zn)}),Ut=Ct.map(function(zn){return st.pointCoordinate(zn)}),Ht=this.getIds(),qt=1/0,fe=1/0,ye=-1/0,De=-1/0,Ie=0,Ve=Ut;Ie<Ve.length;Ie+=1){var qe=Ve[Ie];qt=Math.min(qt,qe.x),fe=Math.min(fe,qe.y),ye=Math.max(ye,qe.x),De=Math.max(De,qe.y)}for(var on=function(cr){var yr=G._tiles[Ht[cr]];if(!yr.holdingForFade()){var Jr=yr.tileID,Wr=Math.pow(2,st.zoom-yr.tileID.overscaledZ),bi=B*yr.queryPadding*t.EXTENT/yr.tileSize/Wr,ji=[Jr.getTilePoint(new t.MercatorCoordinate(qt,fe)),Jr.getTilePoint(new t.MercatorCoordinate(ye,De))];if(ji[0].x-bi<t.EXTENT&&ji[0].y-bi<t.EXTENT&&ji[1].x+bi>=0&&ji[1].y+bi>=0){var Hi=Ot.map(function(Pa){return Jr.getTilePoint(Pa)}),Ji=Ut.map(function(Pa){return Jr.getTilePoint(Pa)});J.push({tile:yr,tileID:Jr,queryGeometry:Hi,cameraQueryGeometry:Ji,scale:Wr})}}},tr=0;tr<Ht.length;tr++)on(tr);return J},I.prototype.getVisibleCoordinates=function(w){for(var B=this,D=this.getRenderableIds(w).map(function(Ct){return B._tiles[Ct].tileID}),G=0,J=D;G<J.length;G+=1){var st=J[G];st.posMatrix=this.transform.calculatePosMatrix(st.toUnwrapped())}return D},I.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Fn(this._source.type))for(var w in this._tiles){var B=this._tiles[w];if(B.fadeEndTime!==void 0&&B.fadeEndTime>=t.browser.now())return!0}return!1},I.prototype.setFeatureState=function(w,B,D){this._state.updateState(w=w||"_geojsonTileLayer",B,D)},I.prototype.removeFeatureState=function(w,B,D){this._state.removeFeatureState(w=w||"_geojsonTileLayer",B,D)},I.prototype.getFeatureState=function(w,B){return this._state.getState(w=w||"_geojsonTileLayer",B)},I.prototype.setDependencies=function(w,B,D){var G=this._tiles[w];G&&G.setDependencies(B,D)},I.prototype.reloadTilesForDependencies=function(w,B){for(var D in this._tiles)this._tiles[D].hasDependency(w,B)&&this._reloadTile(D,"reloading");this._cache.filter(function(G){return!G.hasDependency(w,B)})},I}(t.Evented);function $e(j,I){var w=Math.abs(2*j.wrap)-+(j.wrap<0),B=Math.abs(2*I.wrap)-+(I.wrap<0);return j.overscaledZ-I.overscaledZ||B-w||I.canonical.y-j.canonical.y||I.canonical.x-j.canonical.x}function Fn(j){return j==="raster"||j==="image"||j==="video"}function rr(){return new t.window.Worker(cu.workerUrl)}xe.maxOverzooming=10,xe.maxUnderzooming=3;var En="mapboxgl_preloaded_worker_pool",Pn=function(){this.active={}};Pn.prototype.acquire=function(j){if(!this.workers)for(this.workers=[];this.workers.length<Pn.workerCount;)this.workers.push(new rr);return this.active[j]=!0,this.workers.slice()},Pn.prototype.release=function(j){delete this.active[j],this.numActive()===0&&(this.workers.forEach(function(I){I.terminate()}),this.workers=null)},Pn.prototype.isPreloaded=function(){return!!this.active[En]},Pn.prototype.numActive=function(){return Object.keys(this.active).length};var Er,Pr=Math.floor(t.browser.hardwareConcurrency/2);function ln(){return Er||(Er=new Pn),Er}function Cr(j,I){var w={};for(var B in j)B!=="ref"&&(w[B]=j[B]);return t.refProperties.forEach(function(D){D in I&&(w[D]=I[D])}),w}function Ar(j){j=j.slice();for(var I=Object.create(null),w=0;w<j.length;w++)I[j[w].id]=j[w];for(var B=0;B<j.length;B++)"ref"in j[B]&&(j[B]=Cr(j[B],I[j[B].ref]));return j}Pn.workerCount=Math.max(Math.min(Pr,6),1);var je={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function We(j,I,w){w.push({command:je.addSource,args:[j,I[j]]})}function Ye(j,I,w){I.push({command:je.removeSource,args:[j]}),w[j]=!0}function fn(j,I,w,B){Ye(j,w,B),We(j,I,w)}function mn(j,I,w){var B;for(B in j[w])if(j[w].hasOwnProperty(B)&&B!=="data"&&!t.deepEqual(j[w][B],I[w][B]))return!1;for(B in I[w])if(I[w].hasOwnProperty(B)&&B!=="data"&&!t.deepEqual(j[w][B],I[w][B]))return!1;return!0}function jn(j,I,w,B,D,G){var J;for(J in I=I||{},j=j||{})j.hasOwnProperty(J)&&(t.deepEqual(j[J],I[J])||w.push({command:G,args:[B,J,I[J],D]}));for(J in I)I.hasOwnProperty(J)&&!j.hasOwnProperty(J)&&(t.deepEqual(j[J],I[J])||w.push({command:G,args:[B,J,I[J],D]}))}function bn(j){return j.id}function Ln(j,I){return j[I.id]=I,j}var nr=function(I,w){this.reset(I,w)};nr.prototype.reset=function(j,I){this.points=j||[],this._distances=[0];for(var w=1;w<this.points.length;w++)this._distances[w]=this._distances[w-1]+this.points[w].dist(this.points[w-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(I||0,.5*this.length),this.paddedLength=this.length-2*this.padding},nr.prototype.lerp=function(j){if(this.points.length===1)return this.points[0];j=t.clamp(j,0,1);for(var I=1,w=this._distances[I],B=j*this.paddedLength+this.padding;w<B&&I<this._distances.length;)w=this._distances[++I];var D=I-1,G=this._distances[D],J=w-G,st=J>0?(B-G)/J:0;return this.points[D].mult(1-st).add(this.points[I].mult(st))};var Yn=function(I,w,B){var D=this.boxCells=[],G=this.circleCells=[];this.xCellCount=Math.ceil(I/B),this.yCellCount=Math.ceil(w/B);for(var J=0;J<this.xCellCount*this.yCellCount;J++)D.push([]),G.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=I,this.height=w,this.xScale=this.xCellCount/I,this.yScale=this.yCellCount/w,this.boxUid=0,this.circleUid=0};function Mn(j,I,w,B,D){var G=t.create();return I?(t.scale(G,G,[1/D,1/D,1]),w||t.rotateZ(G,G,B.angle)):t.multiply(G,B.labelPlaneMatrix,j),G}function Rr(j,I,w,B,D){if(I){var G=t.clone(j);return t.scale(G,G,[D,D,1]),w||t.rotateZ(G,G,-B.angle),G}return B.glCoordMatrix}function pr(j,I){var w=[j.x,j.y,0,1];To(w,w,I);var B=w[3];return{point:new t.Point(w[0]/B,w[1]/B),signedDistanceFromCamera:B}}function zr(j,I){return .5+j/I*.5}function Pi(j,I){var w=j[0]/j[3],B=j[1]/j[3];return w>=-I[0]&&w<=I[0]&&B>=-I[1]&&B<=I[1]}function Oa(j,I,w,B,D,G,J,st){var Ct=B?j.textSizeData:j.iconSizeData,Ot=t.evaluateSizeForZoom(Ct,w.transform.zoom),Ut=[256/w.width*2+1,256/w.height*2+1],Ht=B?j.text.dynamicLayoutVertexArray:j.icon.dynamicLayoutVertexArray;Ht.clear();for(var qt=j.lineVertexArray,fe=B?j.text.placedSymbolArray:j.icon.placedSymbolArray,ye=w.transform.width/w.transform.height,De=!1,Ie=0;Ie<fe.length;Ie++){var Ve=fe.get(Ie);if(Ve.hidden||Ve.writingMode===t.WritingMode.vertical&&!De)io(Ve.numGlyphs,Ht);else{De=!1;var qe=[Ve.anchorX,Ve.anchorY,0,1];if(t.transformMat4(qe,qe,I),Pi(qe,Ut)){var on=zr(w.transform.cameraToCenterDistance,qe[3]),tr=t.evaluateSizeForFeature(Ct,Ot,Ve),zn=J?tr/on:tr*on,cr=new t.Point(Ve.anchorX,Ve.anchorY),yr=pr(cr,D).point,Jr={},Wr=Ko(Ve,zn,!1,st,I,D,G,j.glyphOffsetArray,qt,Ht,yr,cr,Jr,ye);De=Wr.useVertical,(Wr.notEnoughRoom||De||Wr.needsFlipping&&Ko(Ve,zn,!0,st,I,D,G,j.glyphOffsetArray,qt,Ht,yr,cr,Jr,ye).notEnoughRoom)&&io(Ve.numGlyphs,Ht)}else io(Ve.numGlyphs,Ht)}}B?j.text.dynamicLayoutVertexBuffer.updateData(Ht):j.icon.dynamicLayoutVertexBuffer.updateData(Ht)}function Ua(j,I,w,B,D,G,J,st,Ct,Ot,Ut){var Ht=st.glyphStartIndex+st.numGlyphs,qt=st.lineStartIndex,fe=st.lineStartIndex+st.lineLength,ye=I.getoffsetX(st.glyphStartIndex),De=I.getoffsetX(Ht-1),Ie=co(j*ye,w,B,D,G,J,st.segment,qt,fe,Ct,Ot,Ut);if(!Ie)return null;var Ve=co(j*De,w,B,D,G,J,st.segment,qt,fe,Ct,Ot,Ut);return Ve?{first:Ie,last:Ve}:null}function ro(j,I,w,B){return j===t.WritingMode.horizontal&&Math.abs(w.y-I.y)>Math.abs(w.x-I.x)*B?{useVertical:!0}:(j===t.WritingMode.vertical?I.y<w.y:I.x>w.x)?{needsFlipping:!0}:null}function Ko(j,I,w,B,D,G,J,st,Ct,Ot,Ut,Ht,qt,fe){var ye,De=I/24,Ie=j.lineOffsetX*De,Ve=j.lineOffsetY*De;if(j.numGlyphs>1){var qe=j.glyphStartIndex+j.numGlyphs,on=j.lineStartIndex,tr=j.lineStartIndex+j.lineLength,zn=Ua(De,st,Ie,Ve,w,Ut,Ht,j,Ct,G,qt);if(!zn)return{notEnoughRoom:!0};var cr=pr(zn.first.point,J).point,yr=pr(zn.last.point,J).point;if(B&&!w){var Jr=ro(j.writingMode,cr,yr,fe);if(Jr)return Jr}ye=[zn.first];for(var Wr=j.glyphStartIndex+1;Wr<qe-1;Wr++)ye.push(co(De*st.getoffsetX(Wr),Ie,Ve,w,Ut,Ht,j.segment,on,tr,Ct,G,qt));ye.push(zn.last)}else{if(B&&!w){var bi=pr(Ht,D).point,ji=j.lineStartIndex+j.segment+1,Hi=new t.Point(Ct.getx(ji),Ct.gety(ji)),Ji=pr(Hi,D),Pa=Ji.signedDistanceFromCamera>0?Ji.point:_a(Ht,Hi,bi,1,D),ja=ro(j.writingMode,bi,Pa,fe);if(ja)return ja}var Fi=co(De*st.getoffsetX(j.glyphStartIndex),Ie,Ve,w,Ut,Ht,j.segment,j.lineStartIndex,j.lineStartIndex+j.lineLength,Ct,G,qt);if(!Fi)return{notEnoughRoom:!0};ye=[Fi]}for(var va=0,ya=ye;va<ya.length;va+=1){var Yi=ya[va];t.addDynamicAttributes(Ot,Yi.point,Yi.angle)}return{}}function _a(j,I,w,B,D){var G=pr(j.add(j.sub(I)._unit()),D).point,J=w.sub(G);return w.add(J._mult(B/J.mag()))}function co(j,I,w,B,D,G,J,st,Ct,Ot,Ut,Ht){var qt=B?j-I:j+I,fe=qt>0?1:-1,ye=0;B&&(fe*=-1,ye=Math.PI),fe<0&&(ye+=Math.PI);for(var De=fe>0?st+J:st+J+1,Ie=D,Ve=D,qe=0,on=0,tr=Math.abs(qt),zn=[];qe+on<=tr;){if((De+=fe)<st||De>=Ct)return null;if(Ve=Ie,zn.push(Ie),(Ie=Ht[De])===void 0){var cr=new t.Point(Ot.getx(De),Ot.gety(De)),yr=pr(cr,Ut);if(yr.signedDistanceFromCamera>0)Ie=Ht[De]=yr.point;else{var Jr=De-fe;Ie=_a(qe===0?G:new t.Point(Ot.getx(Jr),Ot.gety(Jr)),cr,Ve,tr-qe+1,Ut)}}qe+=on,on=Ve.dist(Ie)}var Wr=(tr-qe)/on,bi=Ie.sub(Ve),ji=bi.mult(Wr)._add(Ve);ji._add(bi._unit()._perp()._mult(w*fe));var Hi=ye+Math.atan2(Ie.y-Ve.y,Ie.x-Ve.x);return zn.push(ji),{point:ji,angle:Hi,path:zn}}Yn.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Yn.prototype.insert=function(j,I,w,B,D){this._forEachCell(I,w,B,D,this._insertBoxCell,this.boxUid++),this.boxKeys.push(j),this.bboxes.push(I),this.bboxes.push(w),this.bboxes.push(B),this.bboxes.push(D)},Yn.prototype.insertCircle=function(j,I,w,B){this._forEachCell(I-B,w-B,I+B,w+B,this._insertCircleCell,this.circleUid++),this.circleKeys.push(j),this.circles.push(I),this.circles.push(w),this.circles.push(B)},Yn.prototype._insertBoxCell=function(j,I,w,B,D,G){this.boxCells[D].push(G)},Yn.prototype._insertCircleCell=function(j,I,w,B,D,G){this.circleCells[D].push(G)},Yn.prototype._query=function(j,I,w,B,D,G){if(w<0||j>this.width||B<0||I>this.height)return!D&&[];var J=[];if(j<=0&&I<=0&&this.width<=w&&this.height<=B){if(D)return!0;for(var st=0;st<this.boxKeys.length;st++)J.push({key:this.boxKeys[st],x1:this.bboxes[4*st],y1:this.bboxes[4*st+1],x2:this.bboxes[4*st+2],y2:this.bboxes[4*st+3]});for(var Ct=0;Ct<this.circleKeys.length;Ct++){var Ot=this.circles[3*Ct],Ut=this.circles[3*Ct+1],Ht=this.circles[3*Ct+2];J.push({key:this.circleKeys[Ct],x1:Ot-Ht,y1:Ut-Ht,x2:Ot+Ht,y2:Ut+Ht})}return G?J.filter(G):J}return this._forEachCell(j,I,w,B,this._queryCell,J,{hitTest:D,seenUids:{box:{},circle:{}}},G),D?J.length>0:J},Yn.prototype._queryCircle=function(j,I,w,B,D){var G=j-w,J=j+w,st=I-w,Ct=I+w;if(J<0||G>this.width||Ct<0||st>this.height)return!B&&[];var Ot=[];return this._forEachCell(G,st,J,Ct,this._queryCellCircle,Ot,{hitTest:B,circle:{x:j,y:I,radius:w},seenUids:{box:{},circle:{}}},D),B?Ot.length>0:Ot},Yn.prototype.query=function(j,I,w,B,D){return this._query(j,I,w,B,!1,D)},Yn.prototype.hitTest=function(j,I,w,B,D){return this._query(j,I,w,B,!0,D)},Yn.prototype.hitTestCircle=function(j,I,w,B){return this._queryCircle(j,I,w,!0,B)},Yn.prototype._queryCell=function(j,I,w,B,D,G,J,st){var Ct=J.seenUids,Ot=this.boxCells[D];if(Ot!==null)for(var Ut=this.bboxes,Ht=0,qt=Ot;Ht<qt.length;Ht+=1){var fe=qt[Ht];if(!Ct.box[fe]){Ct.box[fe]=!0;var ye=4*fe;if(j<=Ut[ye+2]&&I<=Ut[ye+3]&&w>=Ut[ye+0]&&B>=Ut[ye+1]&&(!st||st(this.boxKeys[fe]))){if(J.hitTest)return G.push(!0),!0;G.push({key:this.boxKeys[fe],x1:Ut[ye],y1:Ut[ye+1],x2:Ut[ye+2],y2:Ut[ye+3]})}}}var De=this.circleCells[D];if(De!==null)for(var Ie=this.circles,Ve=0,qe=De;Ve<qe.length;Ve+=1){var on=qe[Ve];if(!Ct.circle[on]){Ct.circle[on]=!0;var tr=3*on;if(this._circleAndRectCollide(Ie[tr],Ie[tr+1],Ie[tr+2],j,I,w,B)&&(!st||st(this.circleKeys[on]))){if(J.hitTest)return G.push(!0),!0;var zn=Ie[tr],cr=Ie[tr+1],yr=Ie[tr+2];G.push({key:this.circleKeys[on],x1:zn-yr,y1:cr-yr,x2:zn+yr,y2:cr+yr})}}}},Yn.prototype._queryCellCircle=function(j,I,w,B,D,G,J,st){var Ct=J.circle,Ot=J.seenUids,Ut=this.boxCells[D];if(Ut!==null)for(var Ht=this.bboxes,qt=0,fe=Ut;qt<fe.length;qt+=1){var ye=fe[qt];if(!Ot.box[ye]){Ot.box[ye]=!0;var De=4*ye;if(this._circleAndRectCollide(Ct.x,Ct.y,Ct.radius,Ht[De+0],Ht[De+1],Ht[De+2],Ht[De+3])&&(!st||st(this.boxKeys[ye])))return G.push(!0),!0}}var Ie=this.circleCells[D];if(Ie!==null)for(var Ve=this.circles,qe=0,on=Ie;qe<on.length;qe+=1){var tr=on[qe];if(!Ot.circle[tr]){Ot.circle[tr]=!0;var zn=3*tr;if(this._circlesCollide(Ve[zn],Ve[zn+1],Ve[zn+2],Ct.x,Ct.y,Ct.radius)&&(!st||st(this.circleKeys[tr])))return G.push(!0),!0}}},Yn.prototype._forEachCell=function(j,I,w,B,D,G,J,st){for(var Ct=this._convertToXCellCoord(j),Ot=this._convertToYCellCoord(I),Ut=this._convertToXCellCoord(w),Ht=this._convertToYCellCoord(B),qt=Ct;qt<=Ut;qt++)for(var fe=Ot;fe<=Ht;fe++)if(D.call(this,j,I,w,B,this.xCellCount*fe+qt,G,J,st))return},Yn.prototype._convertToXCellCoord=function(j){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(j*this.xScale)))},Yn.prototype._convertToYCellCoord=function(j){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(j*this.yScale)))},Yn.prototype._circlesCollide=function(j,I,w,B,D,G){var J=B-j,st=D-I,Ct=w+G;return Ct*Ct>J*J+st*st},Yn.prototype._circleAndRectCollide=function(j,I,w,B,D,G,J){var st=(G-B)/2,Ct=Math.abs(j-(B+st));if(Ct>st+w)return!1;var Ot=(J-D)/2,Ut=Math.abs(I-(D+Ot));if(Ut>Ot+w)return!1;if(Ct<=st||Ut<=Ot)return!0;var Ht=Ct-st,qt=Ut-Ot;return Ht*Ht+qt*qt<=w*w};var Xo=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function io(j,I){for(var w=0;w<j;w++){var B=I.length;I.resize(B+4),I.float32.set(Xo,3*B)}}function To(j,I,w){var B=I[0],D=I[1];return j[0]=w[0]*B+w[4]*D+w[12],j[1]=w[1]*B+w[5]*D+w[13],j[3]=w[3]*B+w[7]*D+w[15],j}var ds=function(I,w,B){w===void 0&&(w=new Yn(I.width+200,I.height+200,25)),B===void 0&&(B=new Yn(I.width+200,I.height+200,25)),this.transform=I,this.grid=w,this.ignoredGrid=B,this.pitchfactor=Math.cos(I._pitch)*I.cameraToCenterDistance,this.screenRightBoundary=I.width+100,this.screenBottomBoundary=I.height+100,this.gridRightBoundary=I.width+200,this.gridBottomBoundary=I.height+200};function La(j,I,w){return I*(t.EXTENT/(j.tileSize*Math.pow(2,w-j.tileID.overscaledZ)))}ds.prototype.placeCollisionBox=function(j,I,w,B,D){var G=this.projectAndGetPerspectiveRatio(B,j.anchorPointX,j.anchorPointY),J=w*G.perspectiveRatio,st=j.x1*J+G.point.x,Ct=j.y1*J+G.point.y,Ot=j.x2*J+G.point.x,Ut=j.y2*J+G.point.y;return!this.isInsideGrid(st,Ct,Ot,Ut)||!I&&this.grid.hitTest(st,Ct,Ot,Ut,D)?{box:[],offscreen:!1}:{box:[st,Ct,Ot,Ut],offscreen:this.isOffscreen(st,Ct,Ot,Ut)}},ds.prototype.placeCollisionCircles=function(j,I,w,B,D,G,J,st,Ct,Ot,Ut,Ht,qt){var fe=[],ye=new t.Point(I.anchorX,I.anchorY),De=pr(ye,G),Ie=zr(this.transform.cameraToCenterDistance,De.signedDistanceFromCamera),Ve=(Ot?D/Ie:D*Ie)/t.ONE_EM,qe=pr(ye,J).point,on=Ua(Ve,B,I.lineOffsetX*Ve,I.lineOffsetY*Ve,!1,qe,ye,I,w,J,{}),tr=!1,zn=!1,cr=!0;if(on){for(var yr=.5*Ht*Ie+qt,Jr=new t.Point(-100,-100),Wr=new t.Point(this.screenRightBoundary,this.screenBottomBoundary),bi=new nr,ji=on.first,Hi=on.last,Ji=[],Pa=ji.path.length-1;Pa>=1;Pa--)Ji.push(ji.path[Pa]);for(var ja=1;ja<Hi.path.length;ja++)Ji.push(Hi.path[ja]);var Fi=2.5*yr;if(st){var va=Ji.map(function(tc){return pr(tc,st)});Ji=va.some(function(tc){return tc.signedDistanceFromCamera<=0})?[]:va.map(function(tc){return tc.point})}var ya=[];if(Ji.length>0){for(var Yi=Ji[0].clone(),Aa=Ji[0].clone(),ua=1;ua<Ji.length;ua++)Yi.x=Math.min(Yi.x,Ji[ua].x),Yi.y=Math.min(Yi.y,Ji[ua].y),Aa.x=Math.max(Aa.x,Ji[ua].x),Aa.y=Math.max(Aa.y,Ji[ua].y);ya=Yi.x>=Jr.x&&Aa.x<=Wr.x&&Yi.y>=Jr.y&&Aa.y<=Wr.y?[Ji]:Aa.x<Jr.x||Yi.x>Wr.x||Aa.y<Jr.y||Yi.y>Wr.y?[]:t.clipLine([Ji],Jr.x,Jr.y,Wr.x,Wr.y)}for(var Ba=0,Za=ya;Ba<Za.length;Ba+=1){var os;bi.reset(Za[Ba],.25*yr),os=bi.length<=.5*yr?1:Math.ceil(bi.paddedLength/Fi)+1;for(var Go=0;Go<os;Go++){var Bs=Go/Math.max(os-1,1),Yo=bi.lerp(Bs),ks=Yo.x+100,yl=Yo.y+100;fe.push(ks,yl,yr,0);var nl=ks-yr,wl=yl-yr,yc=ks+yr,Il=yl+yr;if(cr=cr&&this.isOffscreen(nl,wl,yc,Il),zn=zn||this.isInsideGrid(nl,wl,yc,Il),!j&&this.grid.hitTestCircle(ks,yl,yr,Ut)&&(tr=!0,!Ct))return{circles:[],offscreen:!1,collisionDetected:tr}}}}return{circles:!Ct&&tr||!zn?[]:fe,offscreen:cr,collisionDetected:tr}},ds.prototype.queryRenderedSymbols=function(j){if(j.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var I=[],w=1/0,B=1/0,D=-1/0,G=-1/0,J=0,st=j;J<st.length;J+=1){var Ct=st[J],Ot=new t.Point(Ct.x+100,Ct.y+100);w=Math.min(w,Ot.x),B=Math.min(B,Ot.y),D=Math.max(D,Ot.x),G=Math.max(G,Ot.y),I.push(Ot)}for(var Ut={},Ht={},qt=0,fe=this.grid.query(w,B,D,G).concat(this.ignoredGrid.query(w,B,D,G));qt<fe.length;qt+=1){var ye=fe[qt],De=ye.key;if(Ut[De.bucketInstanceId]===void 0&&(Ut[De.bucketInstanceId]={}),!Ut[De.bucketInstanceId][De.featureIndex]){var Ie=[new t.Point(ye.x1,ye.y1),new t.Point(ye.x2,ye.y1),new t.Point(ye.x2,ye.y2),new t.Point(ye.x1,ye.y2)];t.polygonIntersectsPolygon(I,Ie)&&(Ut[De.bucketInstanceId][De.featureIndex]=!0,Ht[De.bucketInstanceId]===void 0&&(Ht[De.bucketInstanceId]=[]),Ht[De.bucketInstanceId].push(De.featureIndex))}}return Ht},ds.prototype.insertCollisionBox=function(j,I,w,B,D){(I?this.ignoredGrid:this.grid).insert({bucketInstanceId:w,featureIndex:B,collisionGroupID:D},j[0],j[1],j[2],j[3])},ds.prototype.insertCollisionCircles=function(j,I,w,B,D){for(var G=I?this.ignoredGrid:this.grid,J={bucketInstanceId:w,featureIndex:B,collisionGroupID:D},st=0;st<j.length;st+=4)G.insertCircle(J,j[st],j[st+1],j[st+2])},ds.prototype.projectAndGetPerspectiveRatio=function(j,I,w){var B=[I,w,0,1];return To(B,B,j),{point:new t.Point((B[0]/B[3]+1)/2*this.transform.width+100,(-B[1]/B[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/B[3]*.5}},ds.prototype.isOffscreen=function(j,I,w,B){return w<100||j>=this.screenRightBoundary||B<100||I>this.screenBottomBoundary},ds.prototype.isInsideGrid=function(j,I,w,B){return w>=0&&j<this.gridRightBoundary&&B>=0&&I<this.gridBottomBoundary},ds.prototype.getViewportMatrix=function(){var j=t.identity([]);return t.translate(j,j,[-100,-100,0]),j};var Vo=function(I,w,B,D){this.opacity=I?Math.max(0,Math.min(1,I.opacity+(I.placed?w:-w))):D&&B?1:0,this.placed=B};Vo.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var Bo=function(I,w,B,D,G){this.text=new Vo(I?I.text:null,w,B,G),this.icon=new Vo(I?I.icon:null,w,D,G)};Bo.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var lu=function(I,w,B){this.text=I,this.icon=w,this.skipFade=B},Jo=function(){this.invProjMatrix=t.create(),this.viewportMatrix=t.create(),this.circles=[]},iu=function(I,w,B,D,G){this.bucketInstanceId=I,this.featureIndex=w,this.sourceLayerIndex=B,this.bucketIndex=D,this.tileID=G},$s=function(I){this.crossSourceCollisions=I,this.maxGroupID=0,this.collisionGroups={}};function Ne(j,I,w,B,D){var G=t.getAnchorAlignment(j),J=-(G.horizontalAlign-.5)*I,st=-(G.verticalAlign-.5)*w,Ct=t.evaluateVariableOffset(j,B);return new t.Point(J+Ct[0]*D,st+Ct[1]*D)}function oe(j,I,w,B,D,G){var J=j.x1,st=j.x2,Ct=j.y1,Ot=j.y2,Ut=j.anchorPointX,Ht=j.anchorPointY,qt=new t.Point(I,w);return B&&qt._rotate(D?G:-G),{x1:J+qt.x,y1:Ct+qt.y,x2:st+qt.x,y2:Ot+qt.y,anchorPointX:Ut,anchorPointY:Ht}}$s.prototype.get=function(j){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[j]){var I=++this.maxGroupID;this.collisionGroups[j]={ID:I,predicate:function(B){return B.collisionGroupID===I}}}return this.collisionGroups[j]};var Wt=function(I,w,B,D){this.transform=I.clone(),this.collisionIndex=new ds(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=w,this.retainedQueryData={},this.collisionGroups=new $s(B),this.collisionCircleArrays={},this.prevPlacement=D,D&&(D.prevPlacement=void 0),this.placedOrientations={}};function Ee(j,I,w,B,D){j.emplaceBack(I?1:0,w?1:0,B||0,D||0),j.emplaceBack(I?1:0,w?1:0,B||0,D||0),j.emplaceBack(I?1:0,w?1:0,B||0,D||0),j.emplaceBack(I?1:0,w?1:0,B||0,D||0)}Wt.prototype.getBucketParts=function(j,I,w,B){var D=w.getBucket(I),G=w.latestFeatureIndex;if(D&&G&&I.id===D.layerIds[0]){var J=w.collisionBoxArray,st=D.layers[0].layout,Ct=Math.pow(2,this.transform.zoom-w.tileID.overscaledZ),Ot=w.tileSize/t.EXTENT,Ut=this.transform.calculatePosMatrix(w.tileID.toUnwrapped()),Ht=st.get("text-pitch-alignment")==="map",qt=st.get("text-rotation-alignment")==="map",fe=La(w,1,this.transform.zoom),ye=Mn(Ut,Ht,qt,this.transform,fe),De=null;if(Ht){var Ie=Rr(Ut,Ht,qt,this.transform,fe);De=t.multiply([],this.transform.labelPlaneMatrix,Ie)}this.retainedQueryData[D.bucketInstanceId]=new iu(D.bucketInstanceId,G,D.sourceLayerIndex,D.index,w.tileID);var Ve={bucket:D,layout:st,posMatrix:Ut,textLabelPlaneMatrix:ye,labelToScreenMatrix:De,scale:Ct,textPixelRatio:Ot,holdingForFade:w.holdingForFade(),collisionBoxArray:J,partiallyEvaluatedTextSize:t.evaluateSizeForZoom(D.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(D.sourceID)};if(B)for(var qe=0,on=D.sortKeyRanges;qe<on.length;qe+=1){var tr=on[qe];j.push({sortKey:tr.sortKey,symbolInstanceStart:tr.symbolInstanceStart,symbolInstanceEnd:tr.symbolInstanceEnd,parameters:Ve})}else j.push({symbolInstanceStart:0,symbolInstanceEnd:D.symbolInstances.length,parameters:Ve})}},Wt.prototype.attemptAnchorPlacement=function(j,I,w,B,D,G,J,st,Ct,Ot,Ut,Ht,qt,fe,ye){var De,Ie=[Ht.textOffset0,Ht.textOffset1],Ve=Ne(j,w,B,Ie,D),qe=this.collisionIndex.placeCollisionBox(oe(I,Ve.x,Ve.y,G,J,this.transform.angle),Ut,st,Ct,Ot.predicate);if(!ye||this.collisionIndex.placeCollisionBox(oe(ye,Ve.x,Ve.y,G,J,this.transform.angle),Ut,st,Ct,Ot.predicate).box.length!==0)return qe.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[Ht.crossTileID]&&this.prevPlacement.placements[Ht.crossTileID]&&this.prevPlacement.placements[Ht.crossTileID].text&&(De=this.prevPlacement.variableOffsets[Ht.crossTileID].anchor),this.variableOffsets[Ht.crossTileID]={textOffset:Ie,width:w,height:B,anchor:j,textBoxScale:D,prevAnchor:De},this.markUsedJustification(qt,j,Ht,fe),qt.allowVerticalPlacement&&(this.markUsedOrientation(qt,fe,Ht),this.placedOrientations[Ht.crossTileID]=fe),{shift:Ve,placedGlyphBoxes:qe}):void 0},Wt.prototype.placeLayerBucketPart=function(j,I,w){var B=this,D=j.parameters,G=D.bucket,J=D.layout,st=D.posMatrix,Ct=D.textLabelPlaneMatrix,Ot=D.labelToScreenMatrix,Ut=D.textPixelRatio,Ht=D.holdingForFade,qt=D.collisionBoxArray,fe=D.partiallyEvaluatedTextSize,ye=D.collisionGroup,De=J.get("text-optional"),Ie=J.get("icon-optional"),Ve=J.get("text-allow-overlap"),qe=J.get("icon-allow-overlap"),on=J.get("text-rotation-alignment")==="map",tr=J.get("text-pitch-alignment")==="map",zn=J.get("icon-text-fit")!=="none",cr=J.get("symbol-z-order")==="viewport-y",yr=Ve&&(qe||!G.hasIconData()||Ie),Jr=qe&&(Ve||!G.hasTextData()||De);!G.collisionArrays&&qt&&G.deserializeCollisionBoxes(qt);var Wr=function(Fi,va){if(!I[Fi.crossTileID])if(Ht)B.placements[Fi.crossTileID]=new lu(!1,!1,!1);else{var ya,Yi=!1,Aa=!1,ua=!0,Ba=null,Za={box:null,offscreen:null},os={box:null,offscreen:null},Go=null,Bs=null,Yo=0,ks=0,yl=0;va.textFeatureIndex?Yo=va.textFeatureIndex:Fi.useRuntimeCollisionCircles&&(Yo=Fi.featureIndex),va.verticalTextFeatureIndex&&(ks=va.verticalTextFeatureIndex);var nl=va.textBox;if(nl){var wl=function(Wu){var Hu=t.WritingMode.horizontal;if(G.allowVerticalPlacement&&!Wu&&B.prevPlacement){var rl=B.prevPlacement.placedOrientations[Fi.crossTileID];rl&&(B.placedOrientations[Fi.crossTileID]=rl,B.markUsedOrientation(G,Hu=rl,Fi))}return Hu},yc=function(Wu,Hu){if(G.allowVerticalPlacement&&Fi.numVerticalGlyphVertices>0&&va.verticalTextBox)for(var rl=0,ec=G.writingModes;rl<ec.length&&(ec[rl]===t.WritingMode.vertical?(Za=Hu(),os=Za):Za=Wu(),!(Za&&Za.box&&Za.box.length));rl+=1);else Za=Wu()};if(J.get("text-variable-anchor")){var Il=J.get("text-variable-anchor");if(B.prevPlacement&&B.prevPlacement.variableOffsets[Fi.crossTileID]){var tc=B.prevPlacement.variableOffsets[Fi.crossTileID];Il.indexOf(tc.anchor)>0&&(Il=Il.filter(function(vl){return vl!==tc.anchor})).unshift(tc.anchor)}var xc=function(Wu,Hu,rl){for(var ec=Wu.x2-Wu.x1,Ic=Wu.y2-Wu.y1,qc=Fi.textBoxScale,tf=zn&&!qe?Hu:null,Lc={box:[],offscreen:!1},Vc=Ve?2*Il.length:Il.length,Fc=0;Fc<Vc;++Fc){var Kl=B.attemptAnchorPlacement(Il[Fc%Il.length],Wu,ec,Ic,qc,on,tr,Ut,st,ye,Fc>=Il.length,Fi,G,rl,tf);if(Kl&&(Lc=Kl.placedGlyphBoxes)&&Lc.box&&Lc.box.length){Yi=!0,Ba=Kl.shift;break}}return Lc};yc(function(){return xc(nl,va.iconBox,t.WritingMode.horizontal)},function(){var vl=va.verticalTextBox;return G.allowVerticalPlacement&&!(Za&&Za.box&&Za.box.length)&&Fi.numVerticalGlyphVertices>0&&vl?xc(vl,va.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null}}),Za&&(Yi=Za.box,ua=Za.offscreen);var Bc=wl(Za&&Za.box);if(!Yi&&B.prevPlacement){var Pc=B.prevPlacement.variableOffsets[Fi.crossTileID];Pc&&(B.variableOffsets[Fi.crossTileID]=Pc,B.markUsedJustification(G,Pc.anchor,Fi,Bc))}}else{var Uc=function(Wu,Hu){var rl=B.collisionIndex.placeCollisionBox(Wu,Ve,Ut,st,ye.predicate);return rl&&rl.box&&rl.box.length&&(B.markUsedOrientation(G,Hu,Fi),B.placedOrientations[Fi.crossTileID]=Hu),rl};yc(function(){return Uc(nl,t.WritingMode.horizontal)},function(){var vl=va.verticalTextBox;return G.allowVerticalPlacement&&Fi.numVerticalGlyphVertices>0&&vl?Uc(vl,t.WritingMode.vertical):{box:null,offscreen:null}}),wl(Za&&Za.box&&Za.box.length)}}if(Yi=(ya=Za)&&ya.box&&ya.box.length>0,ua=ya&&ya.offscreen,Fi.useRuntimeCollisionCircles){var kc=G.text.placedSymbolArray.get(Fi.centerJustifiedTextSymbolIndex),Tc=t.evaluateSizeForFeature(G.textSizeData,fe,kc),Gc=J.get("text-padding");Go=B.collisionIndex.placeCollisionCircles(Ve,kc,G.lineVertexArray,G.glyphOffsetArray,Tc,st,Ct,Ot,w,tr,ye.predicate,Fi.collisionCircleDiameter,Gc),Yi=Ve||Go.circles.length>0&&!Go.collisionDetected,ua=ua&&Go.offscreen}if(va.iconFeatureIndex&&(yl=va.iconFeatureIndex),va.iconBox){var fc=function(Wu){var Hu=zn&&Ba?oe(Wu,Ba.x,Ba.y,on,tr,B.transform.angle):Wu;return B.collisionIndex.placeCollisionBox(Hu,qe,Ut,st,ye.predicate)};Aa=os&&os.box&&os.box.length&&va.verticalIconBox?(Bs=fc(va.verticalIconBox)).box.length>0:(Bs=fc(va.iconBox)).box.length>0,ua=ua&&Bs.offscreen}var Su=De||Fi.numHorizontalGlyphVertices===0&&Fi.numVerticalGlyphVertices===0,Ac=Ie||Fi.numIconVertices===0;if(Su||Ac?Ac?Su||(Aa=Aa&&Yi):Yi=Aa&&Yi:Aa=Yi=Aa&&Yi,Yi&&ya&&ya.box&&B.collisionIndex.insertCollisionBox(ya.box,J.get("text-ignore-placement"),G.bucketInstanceId,os&&os.box&&ks?ks:Yo,ye.ID),Aa&&Bs&&B.collisionIndex.insertCollisionBox(Bs.box,J.get("icon-ignore-placement"),G.bucketInstanceId,yl,ye.ID),Go&&(Yi&&B.collisionIndex.insertCollisionCircles(Go.circles,J.get("text-ignore-placement"),G.bucketInstanceId,Yo,ye.ID),w)){var Nc=G.bucketInstanceId,Wl=B.collisionCircleArrays[Nc];Wl===void 0&&(Wl=B.collisionCircleArrays[Nc]=new Jo);for(var dl=0;dl<Go.circles.length;dl+=4)Wl.circles.push(Go.circles[dl+0]),Wl.circles.push(Go.circles[dl+1]),Wl.circles.push(Go.circles[dl+2]),Wl.circles.push(Go.collisionDetected?1:0)}B.placements[Fi.crossTileID]=new lu(Yi||yr,Aa||Jr,ua||G.justReloaded),I[Fi.crossTileID]=!0}};if(cr)for(var bi=G.getSortedSymbolIndexes(this.transform.angle),ji=bi.length-1;ji>=0;--ji){var Hi=bi[ji];Wr(G.symbolInstances.get(Hi),G.collisionArrays[Hi])}else for(var Ji=j.symbolInstanceStart;Ji<j.symbolInstanceEnd;Ji++)Wr(G.symbolInstances.get(Ji),G.collisionArrays[Ji]);if(w&&G.bucketInstanceId in this.collisionCircleArrays){var Pa=this.collisionCircleArrays[G.bucketInstanceId];t.invert(Pa.invProjMatrix,st),Pa.viewportMatrix=this.collisionIndex.getViewportMatrix()}G.justReloaded=!1},Wt.prototype.markUsedJustification=function(j,I,w,B){var D;D=B===t.WritingMode.vertical?w.verticalPlacedTextSymbolIndex:{left:w.leftJustifiedTextSymbolIndex,center:w.centerJustifiedTextSymbolIndex,right:w.rightJustifiedTextSymbolIndex}[t.getAnchorJustification(I)];for(var G=0,J=[w.leftJustifiedTextSymbolIndex,w.centerJustifiedTextSymbolIndex,w.rightJustifiedTextSymbolIndex,w.verticalPlacedTextSymbolIndex];G<J.length;G+=1){var st=J[G];st>=0&&(j.text.placedSymbolArray.get(st).crossTileID=D>=0&&st!==D?0:w.crossTileID)}},Wt.prototype.markUsedOrientation=function(j,I,w){for(var B=I===t.WritingMode.horizontal||I===t.WritingMode.horizontalOnly?I:0,D=I===t.WritingMode.vertical?I:0,G=0,J=[w.leftJustifiedTextSymbolIndex,w.centerJustifiedTextSymbolIndex,w.rightJustifiedTextSymbolIndex];G<J.length;G+=1)j.text.placedSymbolArray.get(J[G]).placedOrientation=B;w.verticalPlacedTextSymbolIndex&&(j.text.placedSymbolArray.get(w.verticalPlacedTextSymbolIndex).placedOrientation=D)},Wt.prototype.commit=function(j){this.commitTime=j,this.zoomAtLastRecencyCheck=this.transform.zoom;var I=this.prevPlacement,w=!1;this.prevZoomAdjustment=I?I.zoomAdjustment(this.transform.zoom):0;var B=I?I.symbolFadeChange(j):1,D=I?I.opacities:{},G=I?I.variableOffsets:{},J=I?I.placedOrientations:{};for(var st in this.placements){var Ct=this.placements[st],Ot=D[st];Ot?(this.opacities[st]=new Bo(Ot,B,Ct.text,Ct.icon),w=w||Ct.text!==Ot.text.placed||Ct.icon!==Ot.icon.placed):(this.opacities[st]=new Bo(null,B,Ct.text,Ct.icon,Ct.skipFade),w=w||Ct.text||Ct.icon)}for(var Ut in D){var Ht=D[Ut];if(!this.opacities[Ut]){var qt=new Bo(Ht,B,!1,!1);qt.isHidden()||(this.opacities[Ut]=qt,w=w||Ht.text.placed||Ht.icon.placed)}}for(var fe in G)this.variableOffsets[fe]||!this.opacities[fe]||this.opacities[fe].isHidden()||(this.variableOffsets[fe]=G[fe]);for(var ye in J)this.placedOrientations[ye]||!this.opacities[ye]||this.opacities[ye].isHidden()||(this.placedOrientations[ye]=J[ye]);w?this.lastPlacementChangeTime=j:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=I?I.lastPlacementChangeTime:j)},Wt.prototype.updateLayerOpacities=function(j,I){for(var w={},B=0,D=I;B<D.length;B+=1){var G=D[B],J=G.getBucket(j);J&&G.latestFeatureIndex&&j.id===J.layerIds[0]&&this.updateBucketOpacities(J,w,G.collisionBoxArray)}},Wt.prototype.updateBucketOpacities=function(j,I,w){var B=this;j.hasTextData()&&j.text.opacityVertexArray.clear(),j.hasIconData()&&j.icon.opacityVertexArray.clear(),j.hasIconCollisionBoxData()&&j.iconCollisionBox.collisionVertexArray.clear(),j.hasTextCollisionBoxData()&&j.textCollisionBox.collisionVertexArray.clear();var D=j.layers[0].layout,G=new Bo(null,0,!1,!1,!0),J=D.get("text-allow-overlap"),st=D.get("icon-allow-overlap"),Ct=D.get("text-variable-anchor"),Ot=D.get("text-rotation-alignment")==="map",Ut=D.get("text-pitch-alignment")==="map",Ht=D.get("icon-text-fit")!=="none",qt=new Bo(null,0,J&&(st||!j.hasIconData()||D.get("icon-optional")),st&&(J||!j.hasTextData()||D.get("text-optional")),!0);!j.collisionArrays&&w&&(j.hasIconCollisionBoxData()||j.hasTextCollisionBoxData())&&j.deserializeCollisionBoxes(w);for(var fe=function(qe,on,tr){for(var zn=0;zn<on/4;zn++)qe.opacityVertexArray.emplaceBack(tr)},ye=function(qe){var on=j.symbolInstances.get(qe),tr=on.numHorizontalGlyphVertices,zn=on.numVerticalGlyphVertices,cr=on.crossTileID,yr=B.opacities[cr];I[cr]?yr=G:yr||(B.opacities[cr]=yr=qt),I[cr]=!0;var Jr=on.numIconVertices>0,Wr=B.placedOrientations[on.crossTileID],bi=Wr===t.WritingMode.vertical,ji=Wr===t.WritingMode.horizontal||Wr===t.WritingMode.horizontalOnly;if(tr>0||zn>0){var Hi=ki(yr.text);fe(j.text,tr,bi?sa:Hi),fe(j.text,zn,ji?sa:Hi);var Ji=yr.text.isHidden();[on.rightJustifiedTextSymbolIndex,on.centerJustifiedTextSymbolIndex,on.leftJustifiedTextSymbolIndex].forEach(function(Za){Za>=0&&(j.text.placedSymbolArray.get(Za).hidden=Ji||bi?1:0)}),on.verticalPlacedTextSymbolIndex>=0&&(j.text.placedSymbolArray.get(on.verticalPlacedTextSymbolIndex).hidden=Ji||ji?1:0);var Pa=B.variableOffsets[on.crossTileID];Pa&&B.markUsedJustification(j,Pa.anchor,on,Wr);var ja=B.placedOrientations[on.crossTileID];ja&&(B.markUsedJustification(j,"left",on,ja),B.markUsedOrientation(j,ja,on))}if(Jr){var Fi=ki(yr.icon),va=!(Ht&&on.verticalPlacedIconSymbolIndex&&bi);on.placedIconSymbolIndex>=0&&(fe(j.icon,on.numIconVertices,va?Fi:sa),j.icon.placedSymbolArray.get(on.placedIconSymbolIndex).hidden=yr.icon.isHidden()),on.verticalPlacedIconSymbolIndex>=0&&(fe(j.icon,on.numVerticalIconVertices,va?sa:Fi),j.icon.placedSymbolArray.get(on.verticalPlacedIconSymbolIndex).hidden=yr.icon.isHidden())}if(j.hasIconCollisionBoxData()||j.hasTextCollisionBoxData()){var ya=j.collisionArrays[qe];if(ya){var Yi=new t.Point(0,0);if(ya.textBox||ya.verticalTextBox){var Aa=!0;if(Ct){var ua=B.variableOffsets[cr];ua?(Yi=Ne(ua.anchor,ua.width,ua.height,ua.textOffset,ua.textBoxScale),Ot&&Yi._rotate(Ut?B.transform.angle:-B.transform.angle)):Aa=!1}ya.textBox&&Ee(j.textCollisionBox.collisionVertexArray,yr.text.placed,!Aa||bi,Yi.x,Yi.y),ya.verticalTextBox&&Ee(j.textCollisionBox.collisionVertexArray,yr.text.placed,!Aa||ji,Yi.x,Yi.y)}var Ba=Boolean(!ji&&ya.verticalIconBox);ya.iconBox&&Ee(j.iconCollisionBox.collisionVertexArray,yr.icon.placed,Ba,Ht?Yi.x:0,Ht?Yi.y:0),ya.verticalIconBox&&Ee(j.iconCollisionBox.collisionVertexArray,yr.icon.placed,!Ba,Ht?Yi.x:0,Ht?Yi.y:0)}}},De=0;De<j.symbolInstances.length;De++)ye(De);if(j.sortFeatures(this.transform.angle),this.retainedQueryData[j.bucketInstanceId]&&(this.retainedQueryData[j.bucketInstanceId].featureSortOrder=j.featureSortOrder),j.hasTextData()&&j.text.opacityVertexBuffer&&j.text.opacityVertexBuffer.updateData(j.text.opacityVertexArray),j.hasIconData()&&j.icon.opacityVertexBuffer&&j.icon.opacityVertexBuffer.updateData(j.icon.opacityVertexArray),j.hasIconCollisionBoxData()&&j.iconCollisionBox.collisionVertexBuffer&&j.iconCollisionBox.collisionVertexBuffer.updateData(j.iconCollisionBox.collisionVertexArray),j.hasTextCollisionBoxData()&&j.textCollisionBox.collisionVertexBuffer&&j.textCollisionBox.collisionVertexBuffer.updateData(j.textCollisionBox.collisionVertexArray),j.bucketInstanceId in this.collisionCircleArrays){var Ie=this.collisionCircleArrays[j.bucketInstanceId];j.placementInvProjMatrix=Ie.invProjMatrix,j.placementViewportMatrix=Ie.viewportMatrix,j.collisionCircleArray=Ie.circles,delete this.collisionCircleArrays[j.bucketInstanceId]}},Wt.prototype.symbolFadeChange=function(j){return this.fadeDuration===0?1:(j-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Wt.prototype.zoomAdjustment=function(j){return Math.max(0,(this.transform.zoom-j)/1.5)},Wt.prototype.hasTransitions=function(j){return this.stale||j-this.lastPlacementChangeTime<this.fadeDuration},Wt.prototype.stillRecent=function(j,I){var w=this.zoomAtLastRecencyCheck===I?1-this.zoomAdjustment(I):1;return this.zoomAtLastRecencyCheck=I,this.commitTime+this.fadeDuration*w>j},Wt.prototype.setStale=function(){this.stale=!0};var an=Math.pow(2,25),Un=Math.pow(2,24),qn=Math.pow(2,17),kn=Math.pow(2,16),Xr=Math.pow(2,9),Si=Math.pow(2,8),Ti=Math.pow(2,1);function ki(j){if(j.opacity===0&&!j.placed)return 0;if(j.opacity===1&&j.placed)return 4294967295;var I=j.placed?1:0,w=Math.floor(127*j.opacity);return w*an+I*Un+w*qn+I*kn+w*Xr+I*Si+w*Ti+I}var sa=0,$a=function(I){this._sortAcrossTiles=I.layout.get("symbol-z-order")!=="viewport-y"&&I.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};$a.prototype.continuePlacement=function(j,I,w,B,D){for(var G=this._bucketParts;this._currentTileIndex<j.length;)if(I.getBucketParts(G,B,j[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,D())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,G.sort(function(J,st){return J.sortKey-st.sortKey}));this._currentPartIndex<G.length;)if(I.placeLayerBucketPart(G[this._currentPartIndex],this._seenCrossTileIDs,w),this._currentPartIndex++,D())return!0;return!1};var ba=function(I,w,B,D,G,J,st){this.placement=new Wt(I,G,J,st),this._currentPlacementIndex=w.length-1,this._forceFullPlacement=B,this._showCollisionBoxes=D,this._done=!1};ba.prototype.isDone=function(){return this._done},ba.prototype.continuePlacement=function(j,I,w){for(var B=this,D=t.browser.now(),G=function(){var Ot=t.browser.now()-D;return!B._forceFullPlacement&&Ot>2};this._currentPlacementIndex>=0;){var J=I[j[this._currentPlacementIndex]],st=this.placement.collisionIndex.transform.zoom;if(J.type==="symbol"&&(!J.minzoom||J.minzoom<=st)&&(!J.maxzoom||J.maxzoom>st)){if(this._inProgressLayer||(this._inProgressLayer=new $a(J)),this._inProgressLayer.continuePlacement(w[J.source],this.placement,this._showCollisionBoxes,J,G))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},ba.prototype.commit=function(j){return this.placement.commit(j),this.placement};var bo=512/t.EXTENT/2,Fa=function(I,w,B){this.tileID=I,this.indexedSymbolInstances={},this.bucketInstanceId=B;for(var D=0;D<w.length;D++){var G=w.get(D),J=G.key;this.indexedSymbolInstances[J]||(this.indexedSymbolInstances[J]=[]),this.indexedSymbolInstances[J].push({crossTileID:G.crossTileID,coord:this.getScaledCoordinates(G,I)})}};Fa.prototype.getScaledCoordinates=function(j,I){var w=bo/Math.pow(2,I.canonical.z-this.tileID.canonical.z);return{x:Math.floor((I.canonical.x*t.EXTENT+j.anchorX)*w),y:Math.floor((I.canonical.y*t.EXTENT+j.anchorY)*w)}},Fa.prototype.findMatches=function(j,I,w){for(var B=this.tileID.canonical.z<I.canonical.z?1:Math.pow(2,this.tileID.canonical.z-I.canonical.z),D=0;D<j.length;D++){var G=j.get(D);if(!G.crossTileID){var J=this.indexedSymbolInstances[G.key];if(J)for(var st=this.getScaledCoordinates(G,I),Ct=0,Ot=J;Ct<Ot.length;Ct+=1){var Ut=Ot[Ct];if(Math.abs(Ut.coord.x-st.x)<=B&&Math.abs(Ut.coord.y-st.y)<=B&&!w[Ut.crossTileID]){w[Ut.crossTileID]=!0,G.crossTileID=Ut.crossTileID;break}}}}};var oo=function(){this.maxCrossTileID=0};oo.prototype.generate=function(){return++this.maxCrossTileID};var Eo=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Eo.prototype.handleWrapJump=function(j){var I=Math.round((j-this.lng)/360);if(I!==0)for(var w in this.indexes){var B=this.indexes[w],D={};for(var G in B){var J=B[G];J.tileID=J.tileID.unwrapTo(J.tileID.wrap+I),D[J.tileID.key]=J}this.indexes[w]=D}this.lng=j},Eo.prototype.addBucket=function(j,I,w){if(this.indexes[j.overscaledZ]&&this.indexes[j.overscaledZ][j.key]){if(this.indexes[j.overscaledZ][j.key].bucketInstanceId===I.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(j.overscaledZ,this.indexes[j.overscaledZ][j.key])}for(var B=0;B<I.symbolInstances.length;B++)I.symbolInstances.get(B).crossTileID=0;this.usedCrossTileIDs[j.overscaledZ]||(this.usedCrossTileIDs[j.overscaledZ]={});var D=this.usedCrossTileIDs[j.overscaledZ];for(var G in this.indexes){var J=this.indexes[G];if(Number(G)>j.overscaledZ)for(var st in J){var Ct=J[st];Ct.tileID.isChildOf(j)&&Ct.findMatches(I.symbolInstances,j,D)}else{var Ot=J[j.scaledTo(Number(G)).key];Ot&&Ot.findMatches(I.symbolInstances,j,D)}}for(var Ut=0;Ut<I.symbolInstances.length;Ut++){var Ht=I.symbolInstances.get(Ut);Ht.crossTileID||(Ht.crossTileID=w.generate(),D[Ht.crossTileID]=!0)}return this.indexes[j.overscaledZ]===void 0&&(this.indexes[j.overscaledZ]={}),this.indexes[j.overscaledZ][j.key]=new Fa(j,I.symbolInstances,I.bucketInstanceId),!0},Eo.prototype.removeBucketCrossTileIDs=function(j,I){for(var w in I.indexedSymbolInstances)for(var B=0,D=I.indexedSymbolInstances[w];B<D.length;B+=1)delete this.usedCrossTileIDs[j][D[B].crossTileID]},Eo.prototype.removeStaleBuckets=function(j){var I=!1;for(var w in this.indexes){var B=this.indexes[w];for(var D in B)j[B[D].bucketInstanceId]||(this.removeBucketCrossTileIDs(w,B[D]),delete B[D],I=!0)}return I};var Qa=function(){this.layerIndexes={},this.crossTileIDs=new oo,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Qa.prototype.addLayer=function(j,I,w){var B=this.layerIndexes[j.id];B===void 0&&(B=this.layerIndexes[j.id]=new Eo);var D=!1,G={};B.handleWrapJump(w);for(var J=0,st=I;J<st.length;J+=1){var Ct=st[J],Ot=Ct.getBucket(j);Ot&&j.id===Ot.layerIds[0]&&(Ot.bucketInstanceId||(Ot.bucketInstanceId=++this.maxBucketInstanceId),B.addBucket(Ct.tileID,Ot,this.crossTileIDs)&&(D=!0),G[Ot.bucketInstanceId]=!0)}return B.removeStaleBuckets(G)&&(D=!0),D},Qa.prototype.pruneUnusedLayers=function(j){var I={};for(var w in j.forEach(function(B){I[B]=!0}),this.layerIndexes)I[w]||delete this.layerIndexes[w]};var Ao=function(I,w){return t.emitValidationErrors(I,w&&w.filter(function(B){return B.identifier!=="source.canvas"}))},as=t.pick(je,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),No=t.pick(je,["setCenter","setZoom","setBearing","setPitch"]),xs=function(){var j={},I=t.styleSpec.$version;for(var w in t.styleSpec.$root){var B,D=t.styleSpec.$root[w];D.required&&(B=w==="version"?I:D.type==="array"?[]:{})!=null&&(j[w]=B)}return j}(),Co=function(j){function I(w,B){var D=this;B===void 0&&(B={}),j.call(this),this.map=w,this.dispatcher=new R(ln(),this),this.imageManager=new v,this.imageManager.setEventedParent(this),this.glyphManager=new m(w._requestManager,B.localIdeographFontFamily),this.lineAtlas=new O(256,512),this.crossTileSymbolIndex=new Qa,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());var G=this;this._rtlTextPluginCallback=I.registerForPluginStateChange(function(J){G.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:J.pluginStatus,pluginURL:J.pluginURL},function(st,Ct){if(t.triggerPluginCompletionEvent(st),Ct&&Ct.every(function(Ut){return Ut}))for(var Ot in G.sourceCaches)G.sourceCaches[Ot].reload()})}),this.on("data",function(J){if(J.dataType==="source"&&J.sourceDataType==="metadata"){var st=D.sourceCaches[J.sourceId];if(st){var Ct=st.getSource();if(Ct&&Ct.vectorLayerIds)for(var Ot in D._layers){var Ut=D._layers[Ot];Ut.source===Ct.id&&D._validateLayer(Ut)}}}})}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.loadURL=function(w,B){var D=this;B===void 0&&(B={}),this.fire(new t.Event("dataloading",{dataType:"style"}));var G=typeof B.validate=="boolean"?B.validate:!t.isMapboxURL(w);w=this.map._requestManager.normalizeStyleURL(w,B.accessToken);var J=this.map._requestManager.transformRequest(w,t.ResourceType.Style);this._request=t.getJSON(J,function(st,Ct){D._request=null,st?D.fire(new t.ErrorEvent(st)):Ct&&D._load(Ct,G)})},I.prototype.loadJSON=function(w,B){var D=this;B===void 0&&(B={}),this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.browser.frame(function(){D._request=null,D._load(w,B.validate!==!1)})},I.prototype.loadEmpty=function(){this.fire(new t.Event("dataloading",{dataType:"style"})),this._load(xs,!1)},I.prototype._load=function(w,B){if(!B||!Ao(this,t.validateStyle(w))){for(var D in this._loaded=!0,this.stylesheet=w,w.sources)this.addSource(D,w.sources[D],{validate:!1});w.sprite?this._loadSprite(w.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(w.glyphs);var G=Ar(this.stylesheet.layers);this._order=G.map(function(Ot){return Ot.id}),this._layers={},this._serializedLayers={};for(var J=0,st=G;J<st.length;J+=1){var Ct=st[J];(Ct=t.createStyleLayer(Ct)).setEventedParent(this,{layer:{id:Ct.id}}),this._layers[Ct.id]=Ct,this._serializedLayers[Ct.id]=Ct.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new A(this.stylesheet.light),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}},I.prototype._loadSprite=function(w){var B=this;this._spriteRequest=function(D,G,J){var st,Ct,Ot,Ut=t.browser.devicePixelRatio>1?"@2x":"",Ht=t.getJSON(G.transformRequest(G.normalizeSpriteURL(D,Ut,".json"),t.ResourceType.SpriteJSON),function(ye,De){Ht=null,Ot||(Ot=ye,st=De,fe())}),qt=t.getImage(G.transformRequest(G.normalizeSpriteURL(D,Ut,".png"),t.ResourceType.SpriteImage),function(ye,De){qt=null,Ot||(Ot=ye,Ct=De,fe())});function fe(){if(Ot)J(Ot);else if(st&&Ct){var ye=t.browser.getImageData(Ct),De={};for(var Ie in st){var Ve=st[Ie],qe=Ve.width,on=Ve.height,tr=Ve.x,zn=Ve.y,cr=Ve.sdf,yr=Ve.pixelRatio,Jr=Ve.stretchX,Wr=Ve.stretchY,bi=Ve.content,ji=new t.RGBAImage({width:qe,height:on});t.RGBAImage.copy(ye,ji,{x:tr,y:zn},{x:0,y:0},{width:qe,height:on}),De[Ie]={data:ji,pixelRatio:yr,sdf:cr,stretchX:Jr,stretchY:Wr,content:bi}}J(null,De)}}return{cancel:function(){Ht&&(Ht.cancel(),Ht=null),qt&&(qt.cancel(),qt=null)}}}(w,this.map._requestManager,function(D,G){if(B._spriteRequest=null,D)B.fire(new t.ErrorEvent(D));else if(G)for(var J in G)B.imageManager.addImage(J,G[J]);B.imageManager.setLoaded(!0),B._availableImages=B.imageManager.listImages(),B.dispatcher.broadcast("setImages",B._availableImages),B.fire(new t.Event("data",{dataType:"style"}))})},I.prototype._validateLayer=function(w){var B=this.sourceCaches[w.source];if(B){var D=w.sourceLayer;if(D){var G=B.getSource();(G.type==="geojson"||G.vectorLayerIds&&G.vectorLayerIds.indexOf(D)===-1)&&this.fire(new t.ErrorEvent(new Error('Source layer "'+D+'" does not exist on source "'+G.id+'" as specified by style layer "'+w.id+'"')))}}},I.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var w in this.sourceCaches)if(!this.sourceCaches[w].loaded())return!1;return!!this.imageManager.isLoaded()},I.prototype._serializeLayers=function(w){for(var B=[],D=0,G=w;D<G.length;D+=1){var J=this._layers[G[D]];J.type!=="custom"&&B.push(J.serialize())}return B},I.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var w in this.sourceCaches)if(this.sourceCaches[w].hasTransition())return!0;for(var B in this._layers)if(this._layers[B].hasTransition())return!0;return!1},I.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},I.prototype.update=function(w){if(this._loaded){var B=this._changed;if(this._changed){var D=Object.keys(this._updatedLayers),G=Object.keys(this._removedLayers);for(var J in(D.length||G.length)&&this._updateWorkerLayers(D,G),this._updatedSources){var st=this._updatedSources[J];st==="reload"?this._reloadSource(J):st==="clear"&&this._clearSource(J)}for(var Ct in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[Ct].updateTransitions(w);this.light.updateTransitions(w),this._resetUpdates()}var Ot={};for(var Ut in this.sourceCaches){var Ht=this.sourceCaches[Ut];Ot[Ut]=Ht.used,Ht.used=!1}for(var qt=0,fe=this._order;qt<fe.length;qt+=1){var ye=this._layers[fe[qt]];ye.recalculate(w,this._availableImages),!ye.isHidden(w.zoom)&&ye.source&&(this.sourceCaches[ye.source].used=!0)}for(var De in Ot){var Ie=this.sourceCaches[De];Ot[De]!==Ie.used&&Ie.fire(new t.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:De}))}this.light.recalculate(w),this.z=w.zoom,B&&this.fire(new t.Event("data",{dataType:"style"}))}},I.prototype._updateTilesForChangedImages=function(){var w=Object.keys(this._changedImages);if(w.length){for(var B in this.sourceCaches)this.sourceCaches[B].reloadTilesForDependencies(["icons","patterns"],w);this._changedImages={}}},I.prototype._updateWorkerLayers=function(w,B){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(w),removedIds:B})},I.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},I.prototype.setState=function(w){var B=this;if(this._checkLoaded(),Ao(this,t.validateStyle(w)))return!1;(w=t.clone$1(w)).layers=Ar(w.layers);var D=function(J,st){if(!J)return[{command:je.setStyle,args:[st]}];var Ct=[];try{if(!t.deepEqual(J.version,st.version))return[{command:je.setStyle,args:[st]}];t.deepEqual(J.center,st.center)||Ct.push({command:je.setCenter,args:[st.center]}),t.deepEqual(J.zoom,st.zoom)||Ct.push({command:je.setZoom,args:[st.zoom]}),t.deepEqual(J.bearing,st.bearing)||Ct.push({command:je.setBearing,args:[st.bearing]}),t.deepEqual(J.pitch,st.pitch)||Ct.push({command:je.setPitch,args:[st.pitch]}),t.deepEqual(J.sprite,st.sprite)||Ct.push({command:je.setSprite,args:[st.sprite]}),t.deepEqual(J.glyphs,st.glyphs)||Ct.push({command:je.setGlyphs,args:[st.glyphs]}),t.deepEqual(J.transition,st.transition)||Ct.push({command:je.setTransition,args:[st.transition]}),t.deepEqual(J.light,st.light)||Ct.push({command:je.setLight,args:[st.light]});var Ot={},Ut=[];(function(qt,fe,ye,De){var Ie;for(Ie in fe=fe||{},qt=qt||{})qt.hasOwnProperty(Ie)&&(fe.hasOwnProperty(Ie)||Ye(Ie,ye,De));for(Ie in fe)fe.hasOwnProperty(Ie)&&(qt.hasOwnProperty(Ie)?t.deepEqual(qt[Ie],fe[Ie])||(qt[Ie].type==="geojson"&&fe[Ie].type==="geojson"&&mn(qt,fe,Ie)?ye.push({command:je.setGeoJSONSourceData,args:[Ie,fe[Ie].data]}):fn(Ie,fe,ye,De)):We(Ie,fe,ye))})(J.sources,st.sources,Ut,Ot);var Ht=[];J.layers&&J.layers.forEach(function(qt){Ot[qt.source]?Ct.push({command:je.removeLayer,args:[qt.id]}):Ht.push(qt)}),Ct=Ct.concat(Ut),function(qt,fe,ye){fe=fe||[];var De,Ie,Ve,qe,on,tr,zn,cr=(qt=qt||[]).map(bn),yr=fe.map(bn),Jr=qt.reduce(Ln,{}),Wr=fe.reduce(Ln,{}),bi=cr.slice(),ji=Object.create(null);for(De=0,Ie=0;De<cr.length;De++)Wr.hasOwnProperty(Ve=cr[De])?Ie++:(ye.push({command:je.removeLayer,args:[Ve]}),bi.splice(bi.indexOf(Ve,Ie),1));for(De=0,Ie=0;De<yr.length;De++)bi[bi.length-1-De]!==(Ve=yr[yr.length-1-De])&&(Jr.hasOwnProperty(Ve)?(ye.push({command:je.removeLayer,args:[Ve]}),bi.splice(bi.lastIndexOf(Ve,bi.length-Ie),1)):Ie++,ye.push({command:je.addLayer,args:[Wr[Ve],tr=bi[bi.length-De]]}),bi.splice(bi.length-De,0,Ve),ji[Ve]=!0);for(De=0;De<yr.length;De++)if(qe=Jr[Ve=yr[De]],on=Wr[Ve],!ji[Ve]&&!t.deepEqual(qe,on))if(t.deepEqual(qe.source,on.source)&&t.deepEqual(qe["source-layer"],on["source-layer"])&&t.deepEqual(qe.type,on.type)){for(zn in jn(qe.layout,on.layout,ye,Ve,null,je.setLayoutProperty),jn(qe.paint,on.paint,ye,Ve,null,je.setPaintProperty),t.deepEqual(qe.filter,on.filter)||ye.push({command:je.setFilter,args:[Ve,on.filter]}),t.deepEqual(qe.minzoom,on.minzoom)&&t.deepEqual(qe.maxzoom,on.maxzoom)||ye.push({command:je.setLayerZoomRange,args:[Ve,on.minzoom,on.maxzoom]}),qe)qe.hasOwnProperty(zn)&&zn!=="layout"&&zn!=="paint"&&zn!=="filter"&&zn!=="metadata"&&zn!=="minzoom"&&zn!=="maxzoom"&&(zn.indexOf("paint.")===0?jn(qe[zn],on[zn],ye,Ve,zn.slice(6),je.setPaintProperty):t.deepEqual(qe[zn],on[zn])||ye.push({command:je.setLayerProperty,args:[Ve,zn,on[zn]]}));for(zn in on)on.hasOwnProperty(zn)&&!qe.hasOwnProperty(zn)&&zn!=="layout"&&zn!=="paint"&&zn!=="filter"&&zn!=="metadata"&&zn!=="minzoom"&&zn!=="maxzoom"&&(zn.indexOf("paint.")===0?jn(qe[zn],on[zn],ye,Ve,zn.slice(6),je.setPaintProperty):t.deepEqual(qe[zn],on[zn])||ye.push({command:je.setLayerProperty,args:[Ve,zn,on[zn]]}))}else ye.push({command:je.removeLayer,args:[Ve]}),tr=bi[bi.lastIndexOf(Ve)+1],ye.push({command:je.addLayer,args:[on,tr]})}(Ht,st.layers,Ct)}catch(qt){console.warn("Unable to compute style diff:",qt),Ct=[{command:je.setStyle,args:[st]}]}return Ct}(this.serialize(),w).filter(function(J){return!(J.command in No)});if(D.length===0)return!1;var G=D.filter(function(J){return!(J.command in as)});if(G.length>0)throw new Error("Unimplemented: "+G.map(function(J){return J.command}).join(", ")+".");return D.forEach(function(J){J.command!=="setTransition"&&B[J.command].apply(B,J.args)}),this.stylesheet=w,!0},I.prototype.addImage=function(w,B){if(this.getImage(w))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(w,B),this._afterImageUpdated(w)},I.prototype.updateImage=function(w,B){this.imageManager.updateImage(w,B)},I.prototype.getImage=function(w){return this.imageManager.getImage(w)},I.prototype.removeImage=function(w){if(!this.getImage(w))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(w),this._afterImageUpdated(w)},I.prototype._afterImageUpdated=function(w){this._availableImages=this.imageManager.listImages(),this._changedImages[w]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new t.Event("data",{dataType:"style"}))},I.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},I.prototype.addSource=function(w,B,D){var G=this;if(D===void 0&&(D={}),this._checkLoaded(),this.sourceCaches[w]!==void 0)throw new Error("There is already a source with this ID");if(!B.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(B).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(B.type)>=0&&this._validate(t.validateStyle.source,"sources."+w,B,null,D))){this.map&&this.map._collectResourceTiming&&(B.collectResourceTiming=!0);var J=this.sourceCaches[w]=new xe(w,B,this.dispatcher);J.style=this,J.setEventedParent(this,function(){return{isSourceLoaded:G.loaded(),source:J.serialize(),sourceId:w}}),J.onAdd(this.map),this._changed=!0}},I.prototype.removeSource=function(w){if(this._checkLoaded(),this.sourceCaches[w]===void 0)throw new Error("There is no source with this ID");for(var B in this._layers)if(this._layers[B].source===w)return this.fire(new t.ErrorEvent(new Error('Source "'+w+'" cannot be removed while layer "'+B+'" is using it.')));var D=this.sourceCaches[w];delete this.sourceCaches[w],delete this._updatedSources[w],D.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:w})),D.setEventedParent(null),D.clearTiles(),D.onRemove&&D.onRemove(this.map),this._changed=!0},I.prototype.setGeoJSONSourceData=function(w,B){this._checkLoaded(),this.sourceCaches[w].getSource().setData(B),this._changed=!0},I.prototype.getSource=function(w){return this.sourceCaches[w]&&this.sourceCaches[w].getSource()},I.prototype.addLayer=function(w,B,D){D===void 0&&(D={}),this._checkLoaded();var G=w.id;if(this.getLayer(G))this.fire(new t.ErrorEvent(new Error('Layer with id "'+G+'" already exists on this map')));else{var J;if(w.type==="custom"){if(Ao(this,t.validateCustomStyleLayer(w)))return;J=t.createStyleLayer(w)}else{if(typeof w.source=="object"&&(this.addSource(G,w.source),w=t.clone$1(w),w=t.extend(w,{source:G})),this._validate(t.validateStyle.layer,"layers."+G,w,{arrayIndex:-1},D))return;J=t.createStyleLayer(w),this._validateLayer(J),J.setEventedParent(this,{layer:{id:G}}),this._serializedLayers[J.id]=J.serialize()}var st=B?this._order.indexOf(B):this._order.length;if(B&&st===-1)this.fire(new t.ErrorEvent(new Error('Layer with id "'+B+'" does not exist on this map.')));else{if(this._order.splice(st,0,G),this._layerOrderChanged=!0,this._layers[G]=J,this._removedLayers[G]&&J.source&&J.type!=="custom"){var Ct=this._removedLayers[G];delete this._removedLayers[G],Ct.type!==J.type?this._updatedSources[J.source]="clear":(this._updatedSources[J.source]="reload",this.sourceCaches[J.source].pause())}this._updateLayer(J),J.onAdd&&J.onAdd(this.map)}}},I.prototype.moveLayer=function(w,B){if(this._checkLoaded(),this._changed=!0,this._layers[w]){if(w!==B){var D=this._order.indexOf(w);this._order.splice(D,1);var G=B?this._order.indexOf(B):this._order.length;B&&G===-1?this.fire(new t.ErrorEvent(new Error('Layer with id "'+B+'" does not exist on this map.'))):(this._order.splice(G,0,w),this._layerOrderChanged=!0)}}else this.fire(new t.ErrorEvent(new Error("The layer '"+w+"' does not exist in the map's style and cannot be moved.")))},I.prototype.removeLayer=function(w){this._checkLoaded();var B=this._layers[w];if(B){B.setEventedParent(null);var D=this._order.indexOf(w);this._order.splice(D,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[w]=B,delete this._layers[w],delete this._serializedLayers[w],delete this._updatedLayers[w],delete this._updatedPaintProps[w],B.onRemove&&B.onRemove(this.map)}else this.fire(new t.ErrorEvent(new Error("The layer '"+w+"' does not exist in the map's style and cannot be removed.")))},I.prototype.getLayer=function(w){return this._layers[w]},I.prototype.hasLayer=function(w){return w in this._layers},I.prototype.setLayerZoomRange=function(w,B,D){this._checkLoaded();var G=this.getLayer(w);G?G.minzoom===B&&G.maxzoom===D||(B!=null&&(G.minzoom=B),D!=null&&(G.maxzoom=D),this._updateLayer(G)):this.fire(new t.ErrorEvent(new Error("The layer '"+w+"' does not exist in the map's style and cannot have zoom extent.")))},I.prototype.setFilter=function(w,B,D){D===void 0&&(D={}),this._checkLoaded();var G=this.getLayer(w);if(G){if(!t.deepEqual(G.filter,B))return B==null?(G.filter=void 0,void this._updateLayer(G)):void(this._validate(t.validateStyle.filter,"layers."+G.id+".filter",B,null,D)||(G.filter=t.clone$1(B),this._updateLayer(G)))}else this.fire(new t.ErrorEvent(new Error("The layer '"+w+"' does not exist in the map's style and cannot be filtered.")))},I.prototype.getFilter=function(w){return t.clone$1(this.getLayer(w).filter)},I.prototype.setLayoutProperty=function(w,B,D,G){G===void 0&&(G={}),this._checkLoaded();var J=this.getLayer(w);J?t.deepEqual(J.getLayoutProperty(B),D)||(J.setLayoutProperty(B,D,G),this._updateLayer(J)):this.fire(new t.ErrorEvent(new Error("The layer '"+w+"' does not exist in the map's style and cannot be styled.")))},I.prototype.getLayoutProperty=function(w,B){var D=this.getLayer(w);if(D)return D.getLayoutProperty(B);this.fire(new t.ErrorEvent(new Error("The layer '"+w+"' does not exist in the map's style.")))},I.prototype.setPaintProperty=function(w,B,D,G){G===void 0&&(G={}),this._checkLoaded();var J=this.getLayer(w);J?t.deepEqual(J.getPaintProperty(B),D)||(J.setPaintProperty(B,D,G)&&this._updateLayer(J),this._changed=!0,this._updatedPaintProps[w]=!0):this.fire(new t.ErrorEvent(new Error("The layer '"+w+"' does not exist in the map's style and cannot be styled.")))},I.prototype.getPaintProperty=function(w,B){return this.getLayer(w).getPaintProperty(B)},I.prototype.setFeatureState=function(w,B){this._checkLoaded();var D=w.source,G=w.sourceLayer,J=this.sourceCaches[D];if(J!==void 0){var st=J.getSource().type;st==="geojson"&&G?this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):st!=="vector"||G?(w.id===void 0&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),J.setFeatureState(G,w.id,B)):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+D+"' does not exist in the map's style.")))},I.prototype.removeFeatureState=function(w,B){this._checkLoaded();var D=w.source,G=this.sourceCaches[D];if(G!==void 0){var J=G.getSource().type,st=J==="vector"?w.sourceLayer:void 0;J!=="vector"||st?B&&typeof w.id!="string"&&typeof w.id!="number"?this.fire(new t.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):G.removeFeatureState(st,w.id,B):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+D+"' does not exist in the map's style.")))},I.prototype.getFeatureState=function(w){this._checkLoaded();var B=w.source,D=w.sourceLayer,G=this.sourceCaches[B];if(G!==void 0){if(G.getSource().type!=="vector"||D)return w.id===void 0&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),G.getFeatureState(D,w.id);this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+B+"' does not exist in the map's style.")))},I.prototype.getTransition=function(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},I.prototype.serialize=function(){return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,function(w){return w.serialize()}),layers:this._serializeLayers(this._order)},function(w){return w!==void 0})},I.prototype._updateLayer=function(w){this._updatedLayers[w.id]=!0,w.source&&!this._updatedSources[w.source]&&this.sourceCaches[w.source].getSource().type!=="raster"&&(this._updatedSources[w.source]="reload",this.sourceCaches[w.source].pause()),this._changed=!0},I.prototype._flattenAndSortRenderedFeatures=function(w){for(var B=this,D=function(Wr){return B._layers[Wr].type==="fill-extrusion"},G={},J=[],st=this._order.length-1;st>=0;st--){var Ct=this._order[st];if(D(Ct)){G[Ct]=st;for(var Ot=0,Ut=w;Ot<Ut.length;Ot+=1){var Ht=Ut[Ot][Ct];if(Ht)for(var qt=0,fe=Ht;qt<fe.length;qt+=1)J.push(fe[qt])}}}J.sort(function(Jr,Wr){return Wr.intersectionZ-Jr.intersectionZ});for(var ye=[],De=this._order.length-1;De>=0;De--){var Ie=this._order[De];if(D(Ie))for(var Ve=J.length-1;Ve>=0;Ve--){var qe=J[Ve].feature;if(G[qe.layer.id]<De)break;ye.push(qe),J.pop()}else for(var on=0,tr=w;on<tr.length;on+=1){var zn=tr[on][Ie];if(zn)for(var cr=0,yr=zn;cr<yr.length;cr+=1)ye.push(yr[cr].feature)}}return ye},I.prototype.queryRenderedFeatures=function(w,B,D){B&&B.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",B.filter,null,B);var G={};if(B&&B.layers){if(!Array.isArray(B.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var J=0,st=B.layers;J<st.length;J+=1){var Ct=st[J],Ot=this._layers[Ct];if(!Ot)return this.fire(new t.ErrorEvent(new Error("The layer '"+Ct+"' does not exist in the map's style and cannot be queried for features."))),[];G[Ot.source]=!0}}var Ut=[];for(var Ht in B.availableImages=this._availableImages,this.sourceCaches)B.layers&&!G[Ht]||Ut.push(Nt(this.sourceCaches[Ht],this._layers,this._serializedLayers,w,B,D));return this.placement&&Ut.push(function(qt,fe,ye,De,Ie,Ve,qe){for(var on={},tr=Ve.queryRenderedSymbols(De),zn=[],cr=0,yr=Object.keys(tr).map(Number);cr<yr.length;cr+=1)zn.push(qe[yr[cr]]);zn.sort(Lt);for(var Jr=function(){var Pa=bi[Wr],ja=Pa.featureIndex.lookupSymbolFeatures(tr[Pa.bucketInstanceId],fe,Pa.bucketIndex,Pa.sourceLayerIndex,Ie.filter,Ie.layers,Ie.availableImages,qt);for(var Fi in ja){var va=on[Fi]=on[Fi]||[],ya=ja[Fi];ya.sort(function(ua,Ba){var Za=Pa.featureSortOrder;if(Za){var os=Za.indexOf(ua.featureIndex);return Za.indexOf(Ba.featureIndex)-os}return Ba.featureIndex-ua.featureIndex});for(var Yi=0,Aa=ya;Yi<Aa.length;Yi+=1)va.push(Aa[Yi])}},Wr=0,bi=zn;Wr<bi.length;Wr+=1)Jr();var ji=function(Pa){on[Pa].forEach(function(ja){var Fi=ja.feature,va=ye[qt[Pa].source].getFeatureState(Fi.layer["source-layer"],Fi.id);Fi.source=Fi.layer.source,Fi.layer["source-layer"]&&(Fi.sourceLayer=Fi.layer["source-layer"]),Fi.state=va})};for(var Hi in on)ji(Hi);return on}(this._layers,this._serializedLayers,this.sourceCaches,w,B,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(Ut)},I.prototype.querySourceFeatures=function(w,B){B&&B.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",B.filter,null,B);var D=this.sourceCaches[w];return D?function(G,J){for(var st=G.getRenderableIds().map(function(fe){return G.getTileByID(fe)}),Ct=[],Ot={},Ut=0;Ut<st.length;Ut++){var Ht=st[Ut],qt=Ht.tileID.canonical.key;Ot[qt]||(Ot[qt]=!0,Ht.querySourceFeatures(Ct,J))}return Ct}(D,B):[]},I.prototype.addSourceType=function(w,B,D){return I.getSourceType(w)?D(new Error('A source type called "'+w+'" already exists.')):(I.setSourceType(w,B),B.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:w,url:B.workerSourceURL},D):D(null,null))},I.prototype.getLight=function(){return this.light.getLight()},I.prototype.setLight=function(w,B){B===void 0&&(B={}),this._checkLoaded();var D=this.light.getLight(),G=!1;for(var J in w)if(!t.deepEqual(w[J],D[J])){G=!0;break}if(G){var st={now:t.browser.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(w,B),this.light.updateTransitions(st)}},I.prototype._validate=function(w,B,D,G,J){return J===void 0&&(J={}),(!J||J.validate!==!1)&&Ao(this,w.call(t.validateStyle,t.extend({key:B,style:this.serialize(),value:D,styleSpec:t.styleSpec},G)))},I.prototype._remove=function(){for(var w in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[w].setEventedParent(null);for(var B in this.sourceCaches)this.sourceCaches[B].clearTiles(),this.sourceCaches[B].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},I.prototype._clearSource=function(w){this.sourceCaches[w].clearTiles()},I.prototype._reloadSource=function(w){this.sourceCaches[w].resume(),this.sourceCaches[w].reload()},I.prototype._updateSources=function(w){for(var B in this.sourceCaches)this.sourceCaches[B].update(w)},I.prototype._generateCollisionBoxes=function(){for(var w in this.sourceCaches)this._reloadSource(w)},I.prototype._updatePlacement=function(w,B,D,G,J){J===void 0&&(J=!1);for(var st=!1,Ct=!1,Ot={},Ut=0,Ht=this._order;Ut<Ht.length;Ut+=1){var qt=this._layers[Ht[Ut]];if(qt.type==="symbol"){if(!Ot[qt.source]){var fe=this.sourceCaches[qt.source];Ot[qt.source]=fe.getRenderableIds(!0).map(function(qe){return fe.getTileByID(qe)}).sort(function(qe,on){return on.tileID.overscaledZ-qe.tileID.overscaledZ||(qe.tileID.isLessThan(on.tileID)?-1:1)})}var ye=this.crossTileSymbolIndex.addLayer(qt,Ot[qt.source],w.center.lng);st=st||ye}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((J=J||this._layerOrderChanged||D===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.browser.now(),w.zoom))&&(this.pauseablePlacement=new ba(w,this._order,J,B,D,G,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Ot),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.browser.now()),Ct=!0),st&&this.pauseablePlacement.placement.setStale()),Ct||st)for(var De=0,Ie=this._order;De<Ie.length;De+=1){var Ve=this._layers[Ie[De]];Ve.type==="symbol"&&this.placement.updateLayerOpacities(Ve,Ot[Ve.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.browser.now())},I.prototype._releaseSymbolFadeTiles=function(){for(var w in this.sourceCaches)this.sourceCaches[w].releaseSymbolFadeTiles()},I.prototype.getImages=function(w,B,D){this.imageManager.getImages(B.icons,D),this._updateTilesForChangedImages();var G=this.sourceCaches[B.source];G&&G.setDependencies(B.tileID.key,B.type,B.icons)},I.prototype.getGlyphs=function(w,B,D){this.glyphManager.getGlyphs(B.stacks,D)},I.prototype.getResource=function(w,B,D){return t.makeRequest(B,D)},I}(t.Evented);Co.getSourceType=function(j){return ut[j]},Co.setSourceType=function(j,I){ut[j]=I},Co.registerForPluginStateChange=t.registerForPluginStateChange;var qa=t.createLayout([{name:"a_pos",type:"Int16",components:2}]),Ts=fo(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),ls=fo(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),wa=fo(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),yn=fo(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),dr=fo("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),kr=fo(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),Ui=fo(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Ja=fo("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),So=fo("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),po=fo("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),ea=fo(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),to=fo(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),bs=fo(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Es=fo(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),ka=fo(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),bu=fo(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),Wo=fo(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),As=fo(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Qs=fo(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),vs=fo(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),ps=fo(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),cs=fo(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),gs=fo(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Cs=fo(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),Pu=fo(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),ju=fo(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function fo(j,I){var w=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,B=I.match(/attribute ([\w]+) ([\w]+)/g),D=j.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),G=I.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),J=G?G.concat(D):D,st={};return{fragmentSource:j=j.replace(w,function(Ct,Ot,Ut,Ht,qt){return st[qt]=!0,Ot==="define"?`
#ifndef HAS_UNIFORM_u_`+qt+`
varying `+Ut+" "+Ht+" "+qt+`;
#else
uniform `+Ut+" "+Ht+" u_"+qt+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+qt+`
    `+Ut+" "+Ht+" "+qt+" = u_"+qt+`;
#endif
`}),vertexSource:I=I.replace(w,function(Ct,Ot,Ut,Ht,qt){var fe=Ht==="float"?"vec2":"vec4",ye=qt.match(/color/)?"color":fe;return st[qt]?Ot==="define"?`
#ifndef HAS_UNIFORM_u_`+qt+`
uniform lowp float u_`+qt+`_t;
attribute `+Ut+" "+fe+" a_"+qt+`;
varying `+Ut+" "+Ht+" "+qt+`;
#else
uniform `+Ut+" "+Ht+" u_"+qt+`;
#endif
`:ye==="vec4"?`
#ifndef HAS_UNIFORM_u_`+qt+`
    `+qt+" = a_"+qt+`;
#else
    `+Ut+" "+Ht+" "+qt+" = u_"+qt+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+qt+`
    `+qt+" = unpack_mix_"+ye+"(a_"+qt+", u_"+qt+`_t);
#else
    `+Ut+" "+Ht+" "+qt+" = u_"+qt+`;
#endif
`:Ot==="define"?`
#ifndef HAS_UNIFORM_u_`+qt+`
uniform lowp float u_`+qt+`_t;
attribute `+Ut+" "+fe+" a_"+qt+`;
#else
uniform `+Ut+" "+Ht+" u_"+qt+`;
#endif
`:ye==="vec4"?`
#ifndef HAS_UNIFORM_u_`+qt+`
    `+Ut+" "+Ht+" "+qt+" = a_"+qt+`;
#else
    `+Ut+" "+Ht+" "+qt+" = u_"+qt+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+qt+`
    `+Ut+" "+Ht+" "+qt+" = unpack_mix_"+ye+"(a_"+qt+", u_"+qt+`_t);
#else
    `+Ut+" "+Ht+" "+qt+" = u_"+qt+`;
#endif
`}),staticAttributes:B,staticUniforms:J}}var Ns=Object.freeze({__proto__:null,prelude:Ts,background:ls,backgroundPattern:wa,circle:yn,clippingMask:dr,heatmap:kr,heatmapTexture:Ui,collisionBox:Ja,collisionCircle:So,debug:po,fill:ea,fillOutline:to,fillOutlinePattern:bs,fillPattern:Es,fillExtrusion:ka,fillExtrusionPattern:bu,hillshadePrepare:Wo,hillshade:As,line:Qs,lineGradient:vs,linePattern:ps,lineSDF:cs,raster:gs,symbolIcon:Cs,symbolSDF:Pu,symbolTextAndIcon:ju}),Bu=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function ll(j){for(var I=[],w=0;w<j.length;w++)if(j[w]!==null){var B=j[w].split(" ");I.push(B.pop())}return I}Bu.prototype.bind=function(j,I,w,B,D,G,J,st){this.context=j;for(var Ct=this.boundPaintVertexBuffers.length!==B.length,Ot=0;!Ct&&Ot<B.length;Ot++)this.boundPaintVertexBuffers[Ot]!==B[Ot]&&(Ct=!0);j.extVertexArrayObject&&this.vao&&this.boundProgram===I&&this.boundLayoutVertexBuffer===w&&!Ct&&this.boundIndexBuffer===D&&this.boundVertexOffset===G&&this.boundDynamicVertexBuffer===J&&this.boundDynamicVertexBuffer2===st?(j.bindVertexArrayOES.set(this.vao),J&&J.bind(),D&&D.dynamicDraw&&D.bind(),st&&st.bind()):this.freshBind(I,w,B,D,G,J,st)},Bu.prototype.freshBind=function(j,I,w,B,D,G,J){var st,Ct=j.numAttributes,Ot=this.context,Ut=Ot.gl;if(Ot.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Ot.extVertexArrayObject.createVertexArrayOES(),Ot.bindVertexArrayOES.set(this.vao),st=0,this.boundProgram=j,this.boundLayoutVertexBuffer=I,this.boundPaintVertexBuffers=w,this.boundIndexBuffer=B,this.boundVertexOffset=D,this.boundDynamicVertexBuffer=G,this.boundDynamicVertexBuffer2=J;else{st=Ot.currentNumAttributes||0;for(var Ht=Ct;Ht<st;Ht++)Ut.disableVertexAttribArray(Ht)}I.enableAttributes(Ut,j);for(var qt=0,fe=w;qt<fe.length;qt+=1)fe[qt].enableAttributes(Ut,j);G&&G.enableAttributes(Ut,j),J&&J.enableAttributes(Ut,j),I.bind(),I.setVertexAttribPointers(Ut,j,D);for(var ye=0,De=w;ye<De.length;ye+=1){var Ie=De[ye];Ie.bind(),Ie.setVertexAttribPointers(Ut,j,D)}G&&(G.bind(),G.setVertexAttribPointers(Ut,j,D)),B&&B.bind(),J&&(J.bind(),J.setVertexAttribPointers(Ut,j,D)),Ot.currentNumAttributes=Ct},Bu.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var cl=function(I,w,B,D,G,J){var st=I.gl;this.program=st.createProgram();for(var Ct=ll(B.staticAttributes),Ot=D?D.getBinderAttributes():[],Ut=Ct.concat(Ot),Ht=B.staticUniforms?ll(B.staticUniforms):[],qt=D?D.getBinderUniforms():[],fe=[],ye=0,De=Ht.concat(qt);ye<De.length;ye+=1){var Ie=De[ye];fe.indexOf(Ie)<0&&fe.push(Ie)}var Ve=D?D.defines():[];J&&Ve.push("#define OVERDRAW_INSPECTOR;");var qe=Ve.concat(Ts.fragmentSource,B.fragmentSource).join(`
`),on=Ve.concat(Ts.vertexSource,B.vertexSource).join(`
`),tr=st.createShader(st.FRAGMENT_SHADER);if(st.isContextLost())this.failedToCreate=!0;else{st.shaderSource(tr,qe),st.compileShader(tr),st.attachShader(this.program,tr);var zn=st.createShader(st.VERTEX_SHADER);if(st.isContextLost())this.failedToCreate=!0;else{st.shaderSource(zn,on),st.compileShader(zn),st.attachShader(this.program,zn),this.attributes={};var cr={};this.numAttributes=Ut.length;for(var yr=0;yr<this.numAttributes;yr++)Ut[yr]&&(st.bindAttribLocation(this.program,yr,Ut[yr]),this.attributes[Ut[yr]]=yr);st.linkProgram(this.program),st.deleteShader(zn),st.deleteShader(tr);for(var Jr=0;Jr<fe.length;Jr++){var Wr=fe[Jr];if(Wr&&!cr[Wr]){var bi=st.getUniformLocation(this.program,Wr);bi&&(cr[Wr]=bi)}}this.fixedUniforms=G(I,cr),this.binderUniforms=D?D.getUniforms(I,cr):[]}}};function Xu(j,I,w){var B=1/La(w,1,I.transform.tileZoom),D=Math.pow(2,w.tileID.overscaledZ),G=w.tileSize*Math.pow(2,I.transform.tileZoom)/D,J=G*(w.tileID.canonical.x+w.tileID.wrap*D),st=G*w.tileID.canonical.y;return{u_image:0,u_texsize:w.imageAtlasTexture.size,u_scale:[B,j.fromScale,j.toScale],u_fade:j.t,u_pixel_coord_upper:[J>>16,st>>16],u_pixel_coord_lower:[65535&J,65535&st]}}cl.prototype.draw=function(j,I,w,B,D,G,J,st,Ct,Ot,Ut,Ht,qt,fe,ye,De){var Ie,Ve=j.gl;if(!this.failedToCreate){for(var qe in j.program.set(this.program),j.setDepthMode(w),j.setStencilMode(B),j.setColorMode(D),j.setCullFace(G),this.fixedUniforms)this.fixedUniforms[qe].set(J[qe]);fe&&fe.setUniforms(j,this.binderUniforms,Ht,{zoom:qt});for(var on=(Ie={},Ie[Ve.LINES]=2,Ie[Ve.TRIANGLES]=3,Ie[Ve.LINE_STRIP]=1,Ie)[I],tr=0,zn=Ut.get();tr<zn.length;tr+=1){var cr=zn[tr],yr=cr.vaos||(cr.vaos={});(yr[st]||(yr[st]=new Bu)).bind(j,this,Ct,fe?fe.getPaintVertexBuffers():[],Ot,cr.vertexOffset,ye,De),Ve.drawElements(I,cr.primitiveLength*on,Ve.UNSIGNED_SHORT,cr.primitiveOffset*on*2)}}};var Io=function(I,w,B,D){var G=w.style.light,J=G.properties.get("position"),st=[J.x,J.y,J.z],Ct=t.create$1();G.properties.get("anchor")==="viewport"&&t.fromRotation(Ct,-w.transform.angle),t.transformMat3(st,st,Ct);var Ot=G.properties.get("color");return{u_matrix:I,u_lightpos:st,u_lightintensity:G.properties.get("intensity"),u_lightcolor:[Ot.r,Ot.g,Ot.b],u_vertical_gradient:+B,u_opacity:D}},Ra=function(I,w,B,D,G,J,st){return t.extend(Io(I,w,B,D),Xu(J,w,st),{u_height_factor:-Math.pow(2,G.overscaledZ)/st.tileSize/8})},Ea=function(I){return{u_matrix:I}},Ro=function(I,w,B,D){return t.extend(Ea(I),Xu(B,w,D))},pu=function(I,w){return{u_matrix:I,u_world:w}},Ml=function(I,w,B,D,G){return t.extend(Ro(I,w,B,D),{u_world:G})},Fs=function(I,w,B,D){var G,J,st=I.transform;if(D.paint.get("circle-pitch-alignment")==="map"){var Ct=La(B,1,st.zoom);G=!0,J=[Ct,Ct]}else G=!1,J=st.pixelsToGLUnits;return{u_camera_to_center_distance:st.cameraToCenterDistance,u_scale_with_map:+(D.paint.get("circle-pitch-scale")==="map"),u_matrix:I.translatePosMatrix(w.posMatrix,B,D.paint.get("circle-translate"),D.paint.get("circle-translate-anchor")),u_pitch_with_map:+G,u_device_pixel_ratio:t.browser.devicePixelRatio,u_extrude_scale:J}},Ss=function(I,w,B){var D=La(B,1,w.zoom),G=Math.pow(2,w.zoom-B.tileID.overscaledZ),J=B.tileID.overscaleFactor();return{u_matrix:I,u_camera_to_center_distance:w.cameraToCenterDistance,u_pixels_to_tile_units:D,u_extrude_scale:[w.pixelsToGLUnits[0]/(D*G),w.pixelsToGLUnits[1]/(D*G)],u_overscale_factor:J}},au=function(I,w,B){return{u_matrix:I,u_inv_matrix:w,u_camera_to_center_distance:B.cameraToCenterDistance,u_viewport_size:[B.width,B.height]}},qs=function(I,w,B){return B===void 0&&(B=1),{u_matrix:I,u_color:w,u_overlay:0,u_overlay_scale:B}},Ds=function(I){return{u_matrix:I}},Ju=function(I,w,B,D){return{u_matrix:I,u_extrude_scale:La(w,1,B),u_intensity:D}},ou=function(I,w,B){var D=I.transform;return{u_matrix:Ql(I,w,B),u_ratio:1/La(w,1,D.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_units_to_pixels:[1/D.pixelsToGLUnits[0],1/D.pixelsToGLUnits[1]]}},Wa=function(I,w,B,D){return t.extend(ou(I,w,B),{u_image:0,u_image_height:D})},Pl=function(I,w,B,D){var G=I.transform,J=Tl(w,G);return{u_matrix:Ql(I,w,B),u_texsize:w.imageAtlasTexture.size,u_ratio:1/La(w,1,G.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_image:0,u_scale:[J,D.fromScale,D.toScale],u_fade:D.t,u_units_to_pixels:[1/G.pixelsToGLUnits[0],1/G.pixelsToGLUnits[1]]}},$l=function(I,w,B,D,G){var J=I.lineAtlas,st=Tl(w,I.transform),Ct=B.layout.get("line-cap")==="round",Ot=J.getDash(D.from,Ct),Ut=J.getDash(D.to,Ct),Ht=Ot.width*G.fromScale,qt=Ut.width*G.toScale;return t.extend(ou(I,w,B),{u_patternscale_a:[st/Ht,-Ot.height/2],u_patternscale_b:[st/qt,-Ut.height/2],u_sdfgamma:J.width/(256*Math.min(Ht,qt)*t.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Ot.y,u_tex_y_b:Ut.y,u_mix:G.t})};function Tl(j,I){return 1/La(j,1,I.tileZoom)}function Ql(j,I,w){return j.translatePosMatrix(I.tileID.posMatrix,I,w.paint.get("line-translate"),w.paint.get("line-translate-anchor"))}var Nu=function(I,w,B,D,G){return{u_matrix:I,u_tl_parent:w,u_scale_parent:B,u_buffer_scale:1,u_fade_t:D.mix,u_opacity:D.opacity*G.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:G.paint.get("raster-brightness-min"),u_brightness_high:G.paint.get("raster-brightness-max"),u_saturation_factor:(st=G.paint.get("raster-saturation"),st>0?1-1/(1.001-st):-st),u_contrast_factor:(J=G.paint.get("raster-contrast"),J>0?1/(1-J):1+J),u_spin_weights:Ha(G.paint.get("raster-hue-rotate"))};var J,st};function Ha(j){j*=Math.PI/180;var I=Math.sin(j),w=Math.cos(j);return[(2*w+1)/3,(-Math.sqrt(3)*I-w+1)/3,(Math.sqrt(3)*I-w+1)/3]}var su,Al=function(I,w,B,D,G,J,st,Ct,Ot,Ut){var Ht=G.transform;return{u_is_size_zoom_constant:+(I==="constant"||I==="source"),u_is_size_feature_constant:+(I==="constant"||I==="camera"),u_size_t:w?w.uSizeT:0,u_size:w?w.uSize:0,u_camera_to_center_distance:Ht.cameraToCenterDistance,u_pitch:Ht.pitch/360*2*Math.PI,u_rotate_symbol:+B,u_aspect_ratio:Ht.width/Ht.height,u_fade_change:G.options.fadeDuration?G.symbolFadeChange:1,u_matrix:J,u_label_plane_matrix:st,u_coord_matrix:Ct,u_is_text:+Ot,u_pitch_with_map:+D,u_texsize:Ut,u_texture:0}},ms=function(I,w,B,D,G,J,st,Ct,Ot,Ut,Ht){var qt=G.transform;return t.extend(Al(I,w,B,D,G,J,st,Ct,Ot,Ut),{u_gamma_scale:D?Math.cos(qt._pitch)*qt.cameraToCenterDistance:1,u_device_pixel_ratio:t.browser.devicePixelRatio,u_is_halo:+Ht})},Tu=function(I,w,B,D,G,J,st,Ct,Ot,Ut){return t.extend(ms(I,w,B,D,G,J,st,Ct,!0,Ot,!0),{u_texsize_icon:Ut,u_texture_icon:1})},gu=function(I,w,B){return{u_matrix:I,u_opacity:w,u_color:B}},Fu=function(I,w,B,D,G,J){return t.extend(function(st,Ct,Ot,Ut){var Ht=Ot.imageManager.getPattern(st.from.toString()),qt=Ot.imageManager.getPattern(st.to.toString()),fe=Ot.imageManager.getPixelSize(),ye=fe.width,De=fe.height,Ie=Math.pow(2,Ut.tileID.overscaledZ),Ve=Ut.tileSize*Math.pow(2,Ot.transform.tileZoom)/Ie,qe=Ve*(Ut.tileID.canonical.x+Ut.tileID.wrap*Ie),on=Ve*Ut.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Ht.tl,u_pattern_br_a:Ht.br,u_pattern_tl_b:qt.tl,u_pattern_br_b:qt.br,u_texsize:[ye,De],u_mix:Ct.t,u_pattern_size_a:Ht.displaySize,u_pattern_size_b:qt.displaySize,u_scale_a:Ct.fromScale,u_scale_b:Ct.toScale,u_tile_units_to_pixels:1/La(Ut,1,Ot.transform.tileZoom),u_pixel_coord_upper:[qe>>16,on>>16],u_pixel_coord_lower:[65535&qe,65535&on]}}(D,J,B,G),{u_matrix:I,u_opacity:w})},Hs={fillExtrusion:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_lightpos:new t.Uniform3f(I,w.u_lightpos),u_lightintensity:new t.Uniform1f(I,w.u_lightintensity),u_lightcolor:new t.Uniform3f(I,w.u_lightcolor),u_vertical_gradient:new t.Uniform1f(I,w.u_vertical_gradient),u_opacity:new t.Uniform1f(I,w.u_opacity)}},fillExtrusionPattern:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_lightpos:new t.Uniform3f(I,w.u_lightpos),u_lightintensity:new t.Uniform1f(I,w.u_lightintensity),u_lightcolor:new t.Uniform3f(I,w.u_lightcolor),u_vertical_gradient:new t.Uniform1f(I,w.u_vertical_gradient),u_height_factor:new t.Uniform1f(I,w.u_height_factor),u_image:new t.Uniform1i(I,w.u_image),u_texsize:new t.Uniform2f(I,w.u_texsize),u_pixel_coord_upper:new t.Uniform2f(I,w.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(I,w.u_pixel_coord_lower),u_scale:new t.Uniform3f(I,w.u_scale),u_fade:new t.Uniform1f(I,w.u_fade),u_opacity:new t.Uniform1f(I,w.u_opacity)}},fill:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix)}},fillPattern:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_image:new t.Uniform1i(I,w.u_image),u_texsize:new t.Uniform2f(I,w.u_texsize),u_pixel_coord_upper:new t.Uniform2f(I,w.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(I,w.u_pixel_coord_lower),u_scale:new t.Uniform3f(I,w.u_scale),u_fade:new t.Uniform1f(I,w.u_fade)}},fillOutline:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_world:new t.Uniform2f(I,w.u_world)}},fillOutlinePattern:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_world:new t.Uniform2f(I,w.u_world),u_image:new t.Uniform1i(I,w.u_image),u_texsize:new t.Uniform2f(I,w.u_texsize),u_pixel_coord_upper:new t.Uniform2f(I,w.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(I,w.u_pixel_coord_lower),u_scale:new t.Uniform3f(I,w.u_scale),u_fade:new t.Uniform1f(I,w.u_fade)}},circle:function(I,w){return{u_camera_to_center_distance:new t.Uniform1f(I,w.u_camera_to_center_distance),u_scale_with_map:new t.Uniform1i(I,w.u_scale_with_map),u_pitch_with_map:new t.Uniform1i(I,w.u_pitch_with_map),u_extrude_scale:new t.Uniform2f(I,w.u_extrude_scale),u_device_pixel_ratio:new t.Uniform1f(I,w.u_device_pixel_ratio),u_matrix:new t.UniformMatrix4f(I,w.u_matrix)}},collisionBox:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_camera_to_center_distance:new t.Uniform1f(I,w.u_camera_to_center_distance),u_pixels_to_tile_units:new t.Uniform1f(I,w.u_pixels_to_tile_units),u_extrude_scale:new t.Uniform2f(I,w.u_extrude_scale),u_overscale_factor:new t.Uniform1f(I,w.u_overscale_factor)}},collisionCircle:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_inv_matrix:new t.UniformMatrix4f(I,w.u_inv_matrix),u_camera_to_center_distance:new t.Uniform1f(I,w.u_camera_to_center_distance),u_viewport_size:new t.Uniform2f(I,w.u_viewport_size)}},debug:function(I,w){return{u_color:new t.UniformColor(I,w.u_color),u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_overlay:new t.Uniform1i(I,w.u_overlay),u_overlay_scale:new t.Uniform1f(I,w.u_overlay_scale)}},clippingMask:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix)}},heatmap:function(I,w){return{u_extrude_scale:new t.Uniform1f(I,w.u_extrude_scale),u_intensity:new t.Uniform1f(I,w.u_intensity),u_matrix:new t.UniformMatrix4f(I,w.u_matrix)}},heatmapTexture:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_world:new t.Uniform2f(I,w.u_world),u_image:new t.Uniform1i(I,w.u_image),u_color_ramp:new t.Uniform1i(I,w.u_color_ramp),u_opacity:new t.Uniform1f(I,w.u_opacity)}},hillshade:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_image:new t.Uniform1i(I,w.u_image),u_latrange:new t.Uniform2f(I,w.u_latrange),u_light:new t.Uniform2f(I,w.u_light),u_shadow:new t.UniformColor(I,w.u_shadow),u_highlight:new t.UniformColor(I,w.u_highlight),u_accent:new t.UniformColor(I,w.u_accent)}},hillshadePrepare:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_image:new t.Uniform1i(I,w.u_image),u_dimension:new t.Uniform2f(I,w.u_dimension),u_zoom:new t.Uniform1f(I,w.u_zoom),u_unpack:new t.Uniform4f(I,w.u_unpack)}},line:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_ratio:new t.Uniform1f(I,w.u_ratio),u_device_pixel_ratio:new t.Uniform1f(I,w.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(I,w.u_units_to_pixels)}},lineGradient:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_ratio:new t.Uniform1f(I,w.u_ratio),u_device_pixel_ratio:new t.Uniform1f(I,w.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(I,w.u_units_to_pixels),u_image:new t.Uniform1i(I,w.u_image),u_image_height:new t.Uniform1f(I,w.u_image_height)}},linePattern:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_texsize:new t.Uniform2f(I,w.u_texsize),u_ratio:new t.Uniform1f(I,w.u_ratio),u_device_pixel_ratio:new t.Uniform1f(I,w.u_device_pixel_ratio),u_image:new t.Uniform1i(I,w.u_image),u_units_to_pixels:new t.Uniform2f(I,w.u_units_to_pixels),u_scale:new t.Uniform3f(I,w.u_scale),u_fade:new t.Uniform1f(I,w.u_fade)}},lineSDF:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_ratio:new t.Uniform1f(I,w.u_ratio),u_device_pixel_ratio:new t.Uniform1f(I,w.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(I,w.u_units_to_pixels),u_patternscale_a:new t.Uniform2f(I,w.u_patternscale_a),u_patternscale_b:new t.Uniform2f(I,w.u_patternscale_b),u_sdfgamma:new t.Uniform1f(I,w.u_sdfgamma),u_image:new t.Uniform1i(I,w.u_image),u_tex_y_a:new t.Uniform1f(I,w.u_tex_y_a),u_tex_y_b:new t.Uniform1f(I,w.u_tex_y_b),u_mix:new t.Uniform1f(I,w.u_mix)}},raster:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_tl_parent:new t.Uniform2f(I,w.u_tl_parent),u_scale_parent:new t.Uniform1f(I,w.u_scale_parent),u_buffer_scale:new t.Uniform1f(I,w.u_buffer_scale),u_fade_t:new t.Uniform1f(I,w.u_fade_t),u_opacity:new t.Uniform1f(I,w.u_opacity),u_image0:new t.Uniform1i(I,w.u_image0),u_image1:new t.Uniform1i(I,w.u_image1),u_brightness_low:new t.Uniform1f(I,w.u_brightness_low),u_brightness_high:new t.Uniform1f(I,w.u_brightness_high),u_saturation_factor:new t.Uniform1f(I,w.u_saturation_factor),u_contrast_factor:new t.Uniform1f(I,w.u_contrast_factor),u_spin_weights:new t.Uniform3f(I,w.u_spin_weights)}},symbolIcon:function(I,w){return{u_is_size_zoom_constant:new t.Uniform1i(I,w.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(I,w.u_is_size_feature_constant),u_size_t:new t.Uniform1f(I,w.u_size_t),u_size:new t.Uniform1f(I,w.u_size),u_camera_to_center_distance:new t.Uniform1f(I,w.u_camera_to_center_distance),u_pitch:new t.Uniform1f(I,w.u_pitch),u_rotate_symbol:new t.Uniform1i(I,w.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(I,w.u_aspect_ratio),u_fade_change:new t.Uniform1f(I,w.u_fade_change),u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(I,w.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(I,w.u_coord_matrix),u_is_text:new t.Uniform1i(I,w.u_is_text),u_pitch_with_map:new t.Uniform1i(I,w.u_pitch_with_map),u_texsize:new t.Uniform2f(I,w.u_texsize),u_texture:new t.Uniform1i(I,w.u_texture)}},symbolSDF:function(I,w){return{u_is_size_zoom_constant:new t.Uniform1i(I,w.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(I,w.u_is_size_feature_constant),u_size_t:new t.Uniform1f(I,w.u_size_t),u_size:new t.Uniform1f(I,w.u_size),u_camera_to_center_distance:new t.Uniform1f(I,w.u_camera_to_center_distance),u_pitch:new t.Uniform1f(I,w.u_pitch),u_rotate_symbol:new t.Uniform1i(I,w.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(I,w.u_aspect_ratio),u_fade_change:new t.Uniform1f(I,w.u_fade_change),u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(I,w.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(I,w.u_coord_matrix),u_is_text:new t.Uniform1i(I,w.u_is_text),u_pitch_with_map:new t.Uniform1i(I,w.u_pitch_with_map),u_texsize:new t.Uniform2f(I,w.u_texsize),u_texture:new t.Uniform1i(I,w.u_texture),u_gamma_scale:new t.Uniform1f(I,w.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(I,w.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(I,w.u_is_halo)}},symbolTextAndIcon:function(I,w){return{u_is_size_zoom_constant:new t.Uniform1i(I,w.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(I,w.u_is_size_feature_constant),u_size_t:new t.Uniform1f(I,w.u_size_t),u_size:new t.Uniform1f(I,w.u_size),u_camera_to_center_distance:new t.Uniform1f(I,w.u_camera_to_center_distance),u_pitch:new t.Uniform1f(I,w.u_pitch),u_rotate_symbol:new t.Uniform1i(I,w.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(I,w.u_aspect_ratio),u_fade_change:new t.Uniform1f(I,w.u_fade_change),u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(I,w.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(I,w.u_coord_matrix),u_is_text:new t.Uniform1i(I,w.u_is_text),u_pitch_with_map:new t.Uniform1i(I,w.u_pitch_with_map),u_texsize:new t.Uniform2f(I,w.u_texsize),u_texsize_icon:new t.Uniform2f(I,w.u_texsize_icon),u_texture:new t.Uniform1i(I,w.u_texture),u_texture_icon:new t.Uniform1i(I,w.u_texture_icon),u_gamma_scale:new t.Uniform1f(I,w.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(I,w.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(I,w.u_is_halo)}},background:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_opacity:new t.Uniform1f(I,w.u_opacity),u_color:new t.UniformColor(I,w.u_color)}},backgroundPattern:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_opacity:new t.Uniform1f(I,w.u_opacity),u_image:new t.Uniform1i(I,w.u_image),u_pattern_tl_a:new t.Uniform2f(I,w.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(I,w.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(I,w.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(I,w.u_pattern_br_b),u_texsize:new t.Uniform2f(I,w.u_texsize),u_mix:new t.Uniform1f(I,w.u_mix),u_pattern_size_a:new t.Uniform2f(I,w.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(I,w.u_pattern_size_b),u_scale_a:new t.Uniform1f(I,w.u_scale_a),u_scale_b:new t.Uniform1f(I,w.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(I,w.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(I,w.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(I,w.u_tile_units_to_pixels)}}};function $o(j,I,w,B,D,G,J){for(var st=j.context,Ct=st.gl,Ot=j.useProgram("collisionBox"),Ut=[],Ht=0,qt=0,fe=0;fe<B.length;fe++){var ye=B[fe],De=I.getTile(ye),Ie=De.getBucket(w);if(Ie){var Ve=ye.posMatrix;D[0]===0&&D[1]===0||(Ve=j.translatePosMatrix(ye.posMatrix,De,D,G));var qe=J?Ie.textCollisionBox:Ie.iconCollisionBox,on=Ie.collisionCircleArray;if(on.length>0){var tr=t.create(),zn=Ve;t.mul(tr,Ie.placementInvProjMatrix,j.transform.glCoordMatrix),t.mul(tr,tr,Ie.placementViewportMatrix),Ut.push({circleArray:on,circleOffset:qt,transform:zn,invTransform:tr}),qt=Ht+=on.length/4}qe&&Ot.draw(st,Ct.LINES,ve.disabled,Vt.disabled,j.colorModeForRenderPass(),Ce.disabled,Ss(Ve,j.transform,De),w.id,qe.layoutVertexBuffer,qe.indexBuffer,qe.segments,null,j.transform.zoom,null,null,qe.collisionVertexBuffer)}}if(J&&Ut.length){var cr=j.useProgram("collisionCircle"),yr=new t.StructArrayLayout2f1f2i16;yr.resize(4*Ht),yr._trim();for(var Jr=0,Wr=0,bi=Ut;Wr<bi.length;Wr+=1)for(var ji=bi[Wr],Hi=0;Hi<ji.circleArray.length/4;Hi++){var Ji=4*Hi,Pa=ji.circleArray[Ji+0],ja=ji.circleArray[Ji+1],Fi=ji.circleArray[Ji+2],va=ji.circleArray[Ji+3];yr.emplace(Jr++,Pa,ja,Fi,va,0),yr.emplace(Jr++,Pa,ja,Fi,va,1),yr.emplace(Jr++,Pa,ja,Fi,va,2),yr.emplace(Jr++,Pa,ja,Fi,va,3)}(!su||su.length<2*Ht)&&(su=function(os){var Go=2*os,Bs=new t.StructArrayLayout3ui6;Bs.resize(Go),Bs._trim();for(var Yo=0;Yo<Go;Yo++){var ks=6*Yo;Bs.uint16[ks+0]=4*Yo+0,Bs.uint16[ks+1]=4*Yo+1,Bs.uint16[ks+2]=4*Yo+2,Bs.uint16[ks+3]=4*Yo+2,Bs.uint16[ks+4]=4*Yo+3,Bs.uint16[ks+5]=4*Yo+0}return Bs}(Ht));for(var ya=st.createIndexBuffer(su,!0),Yi=st.createVertexBuffer(yr,t.collisionCircleLayout.members,!0),Aa=0,ua=Ut;Aa<ua.length;Aa+=1){var Ba=ua[Aa],Za=au(Ba.transform,Ba.invTransform,j.transform);cr.draw(st,Ct.TRIANGLES,ve.disabled,Vt.disabled,j.colorModeForRenderPass(),Ce.disabled,Za,w.id,Yi,ya,t.SegmentVector.simpleSegment(0,2*Ba.circleOffset,Ba.circleArray.length,Ba.circleArray.length/2),null,j.transform.zoom,null,null,null)}Yi.destroy(),ya.destroy()}}var fs=t.identity(new Float32Array(16));function fl(j,I,w,B,D,G){var J=t.getAnchorAlignment(j),st=-(J.horizontalAlign-.5)*I,Ct=-(J.verticalAlign-.5)*w,Ot=t.evaluateVariableOffset(j,B);return new t.Point((st/D+Ot[0])*G,(Ct/D+Ot[1])*G)}function zl(j,I,w,B,D,G,J,st,Ct,Ot,Ut){var Ht=j.text.placedSymbolArray,qt=j.text.dynamicLayoutVertexArray,fe=j.icon.dynamicLayoutVertexArray,ye={};qt.clear();for(var De=0;De<Ht.length;De++){var Ie=Ht.get(De),Ve=Ie.hidden||!Ie.crossTileID||j.allowVerticalPlacement&&!Ie.placedOrientation?null:B[Ie.crossTileID];if(Ve){var qe=new t.Point(Ie.anchorX,Ie.anchorY),on=pr(qe,w?st:J),tr=zr(G.cameraToCenterDistance,on.signedDistanceFromCamera),zn=D.evaluateSizeForFeature(j.textSizeData,Ot,Ie)*tr/t.ONE_EM;w&&(zn*=j.tilePixelRatio/Ct);for(var cr=fl(Ve.anchor,Ve.width,Ve.height,Ve.textOffset,Ve.textBoxScale,zn),yr=w?pr(qe.add(cr),J).point:on.point.add(I?cr.rotate(-G.angle):cr),Jr=j.allowVerticalPlacement&&Ie.placedOrientation===t.WritingMode.vertical?Math.PI/2:0,Wr=0;Wr<Ie.numGlyphs;Wr++)t.addDynamicAttributes(qt,yr,Jr);Ut&&Ie.associatedIconIndex>=0&&(ye[Ie.associatedIconIndex]={shiftedAnchor:yr,angle:Jr})}else io(Ie.numGlyphs,qt)}if(Ut){fe.clear();for(var bi=j.icon.placedSymbolArray,ji=0;ji<bi.length;ji++){var Hi=bi.get(ji);if(Hi.hidden)io(Hi.numGlyphs,fe);else{var Ji=ye[ji];if(Ji)for(var Pa=0;Pa<Hi.numGlyphs;Pa++)t.addDynamicAttributes(fe,Ji.shiftedAnchor,Ji.angle);else io(Hi.numGlyphs,fe)}}j.icon.dynamicLayoutVertexBuffer.updateData(fe)}j.text.dynamicLayoutVertexBuffer.updateData(qt)}function ql(j,I,w){return w.iconsInText&&I?"symbolTextAndIcon":j?"symbolSDF":"symbolIcon"}function zu(j,I,w,B,D,G,J,st,Ct,Ot,Ut,Ht){for(var qt=j.context,fe=qt.gl,ye=j.transform,De=st==="map",Ie=Ct==="map",Ve=De&&w.layout.get("symbol-placement")!=="point",qe=De&&!Ie&&!Ve,on=w.layout.get("symbol-sort-key").constantOr(1)!==void 0,tr=!1,zn=j.depthModeForSublayer(0,ve.ReadOnly),cr=w.layout.get("text-variable-anchor"),yr=[],Jr=0,Wr=B;Jr<Wr.length;Jr+=1){var bi=Wr[Jr],ji=I.getTile(bi),Hi=ji.getBucket(w);if(Hi){var Ji=D?Hi.text:Hi.icon;if(Ji&&Ji.segments.get().length){var Pa=Ji.programConfigurations.get(w.id),ja=D||Hi.sdfIcons,Fi=D?Hi.textSizeData:Hi.iconSizeData,va=Ie||ye.pitch!==0,ya=j.useProgram(ql(ja,D,Hi),Pa),Yi=t.evaluateSizeForZoom(Fi,ye.zoom),Aa=void 0,ua=[0,0],Ba=void 0,Za=void 0,os=null,Go=void 0;if(D)Ba=ji.glyphAtlasTexture,Za=fe.LINEAR,Aa=ji.glyphAtlasTexture.size,Hi.iconsInText&&(ua=ji.imageAtlasTexture.size,os=ji.imageAtlasTexture,Go=va||j.options.rotating||j.options.zooming||Fi.kind==="composite"||Fi.kind==="camera"?fe.LINEAR:fe.NEAREST);else{var Bs=w.layout.get("icon-size").constantOr(0)!==1||Hi.iconsNeedLinear;Ba=ji.imageAtlasTexture,Za=ja||j.options.rotating||j.options.zooming||Bs||va?fe.LINEAR:fe.NEAREST,Aa=ji.imageAtlasTexture.size}var Yo=La(ji,1,j.transform.zoom),ks=Mn(bi.posMatrix,Ie,De,j.transform,Yo),yl=Rr(bi.posMatrix,Ie,De,j.transform,Yo),nl=cr&&Hi.hasTextData(),wl=w.layout.get("icon-text-fit")!=="none"&&nl&&Hi.hasIconData();Ve&&Oa(Hi,bi.posMatrix,j,D,ks,yl,Ie,Ot);var yc=j.translatePosMatrix(bi.posMatrix,ji,G,J),Il=Ve||D&&cr||wl?fs:ks,tc=j.translatePosMatrix(yl,ji,G,J,!0),xc=ja&&w.paint.get(D?"text-halo-width":"icon-halo-width").constantOr(1)!==0,Bc={program:ya,buffers:Ji,uniformValues:ja?Hi.iconsInText?Tu(Fi.kind,Yi,qe,Ie,j,yc,Il,tc,Aa,ua):ms(Fi.kind,Yi,qe,Ie,j,yc,Il,tc,D,Aa,!0):Al(Fi.kind,Yi,qe,Ie,j,yc,Il,tc,D,Aa),atlasTexture:Ba,atlasTextureIcon:os,atlasInterpolation:Za,atlasInterpolationIcon:Go,isSDF:ja,hasHalo:xc};if(on&&Hi.canOverlap){tr=!0;for(var Pc=0,Uc=Ji.segments.get();Pc<Uc.length;Pc+=1){var kc=Uc[Pc];yr.push({segments:new t.SegmentVector([kc]),sortKey:kc.sortKey,state:Bc})}}else yr.push({segments:Ji.segments,sortKey:0,state:Bc})}}}tr&&yr.sort(function(Nc,Wl){return Nc.sortKey-Wl.sortKey});for(var Tc=0,Gc=yr;Tc<Gc.length;Tc+=1){var fc=Gc[Tc],Su=fc.state;if(qt.activeTexture.set(fe.TEXTURE0),Su.atlasTexture.bind(Su.atlasInterpolation,fe.CLAMP_TO_EDGE),Su.atlasTextureIcon&&(qt.activeTexture.set(fe.TEXTURE1),Su.atlasTextureIcon&&Su.atlasTextureIcon.bind(Su.atlasInterpolationIcon,fe.CLAMP_TO_EDGE)),Su.isSDF){var Ac=Su.uniformValues;Su.hasHalo&&(Ac.u_is_halo=1,$u(Su.buffers,fc.segments,w,j,Su.program,zn,Ut,Ht,Ac)),Ac.u_is_halo=0}$u(Su.buffers,fc.segments,w,j,Su.program,zn,Ut,Ht,Su.uniformValues)}}function $u(j,I,w,B,D,G,J,st,Ct){var Ot=B.context;D.draw(Ot,Ot.gl.TRIANGLES,G,J,st,Ce.disabled,Ct,w.id,j.layoutVertexBuffer,j.indexBuffer,I,w.paint,B.transform.zoom,j.programConfigurations.get(w.id),j.dynamicLayoutVertexBuffer,j.opacityVertexBuffer)}function Au(j,I,w,B,D,G,J){var st,Ct,Ot,Ut,Ht,qt=j.context.gl,fe=w.paint.get("fill-pattern"),ye=fe&&fe.constantOr(1),De=w.getCrossfadeParameters();J?(Ct=ye&&!w.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",st=qt.LINES):(Ct=ye?"fillPattern":"fill",st=qt.TRIANGLES);for(var Ie=0,Ve=B;Ie<Ve.length;Ie+=1){var qe=Ve[Ie],on=I.getTile(qe);if(!ye||on.patternsLoaded()){var tr=on.getBucket(w);if(tr){var zn=tr.programConfigurations.get(w.id),cr=j.useProgram(Ct,zn);ye&&(j.context.activeTexture.set(qt.TEXTURE0),on.imageAtlasTexture.bind(qt.LINEAR,qt.CLAMP_TO_EDGE),zn.updatePaintBuffers(De));var yr=fe.constantOr(null);if(yr&&on.imageAtlas){var Jr=on.imageAtlas,Wr=Jr.patternPositions[yr.to.toString()],bi=Jr.patternPositions[yr.from.toString()];Wr&&bi&&zn.setConstantPatternPositions(Wr,bi)}var ji=j.translatePosMatrix(qe.posMatrix,on,w.paint.get("fill-translate"),w.paint.get("fill-translate-anchor"));if(J){Ut=tr.indexBuffer2,Ht=tr.segments2;var Hi=[qt.drawingBufferWidth,qt.drawingBufferHeight];Ot=Ct==="fillOutlinePattern"&&ye?Ml(ji,j,De,on,Hi):pu(ji,Hi)}else Ut=tr.indexBuffer,Ht=tr.segments,Ot=ye?Ro(ji,j,De,on):Ea(ji);cr.draw(j.context,st,D,j.stencilModeForClipping(qe),G,Ce.disabled,Ot,w.id,tr.layoutVertexBuffer,Ut,Ht,w.paint,j.transform.zoom,zn)}}}}function Cu(j,I,w,B,D,G,J){for(var st=j.context,Ct=st.gl,Ot=w.paint.get("fill-extrusion-pattern"),Ut=Ot.constantOr(1),Ht=w.getCrossfadeParameters(),qt=w.paint.get("fill-extrusion-opacity"),fe=0,ye=B;fe<ye.length;fe+=1){var De=ye[fe],Ie=I.getTile(De),Ve=Ie.getBucket(w);if(Ve){var qe=Ve.programConfigurations.get(w.id),on=j.useProgram(Ut?"fillExtrusionPattern":"fillExtrusion",qe);Ut&&(j.context.activeTexture.set(Ct.TEXTURE0),Ie.imageAtlasTexture.bind(Ct.LINEAR,Ct.CLAMP_TO_EDGE),qe.updatePaintBuffers(Ht));var tr=Ot.constantOr(null);if(tr&&Ie.imageAtlas){var zn=Ie.imageAtlas,cr=zn.patternPositions[tr.to.toString()],yr=zn.patternPositions[tr.from.toString()];cr&&yr&&qe.setConstantPatternPositions(cr,yr)}var Jr=j.translatePosMatrix(De.posMatrix,Ie,w.paint.get("fill-extrusion-translate"),w.paint.get("fill-extrusion-translate-anchor")),Wr=w.paint.get("fill-extrusion-vertical-gradient"),bi=Ut?Ra(Jr,j,Wr,qt,De,Ht,Ie):Io(Jr,j,Wr,qt);on.draw(st,st.gl.TRIANGLES,D,G,J,Ce.backCCW,bi,w.id,Ve.layoutVertexBuffer,Ve.indexBuffer,Ve.segments,w.paint,j.transform.zoom,qe)}}}function mu(j,I,w,B,D,G){var J=j.context,st=J.gl,Ct=I.fbo;if(Ct){var Ot=j.useProgram("hillshade");J.activeTexture.set(st.TEXTURE0),st.bindTexture(st.TEXTURE_2D,Ct.colorAttachment.get());var Ut=function(Ht,qt,fe){var ye=fe.paint.get("hillshade-shadow-color"),De=fe.paint.get("hillshade-highlight-color"),Ie=fe.paint.get("hillshade-accent-color"),Ve=fe.paint.get("hillshade-illumination-direction")*(Math.PI/180);fe.paint.get("hillshade-illumination-anchor")==="viewport"&&(Ve-=Ht.transform.angle);var qe,on,tr,zn=!Ht.options.moving;return{u_matrix:Ht.transform.calculatePosMatrix(qt.tileID.toUnwrapped(),zn),u_image:0,u_latrange:(qe=qt.tileID,on=Math.pow(2,qe.canonical.z),tr=qe.canonical.y,[new t.MercatorCoordinate(0,tr/on).toLngLat().lat,new t.MercatorCoordinate(0,(tr+1)/on).toLngLat().lat]),u_light:[fe.paint.get("hillshade-exaggeration"),Ve],u_shadow:ye,u_highlight:De,u_accent:Ie}}(j,I,w);Ot.draw(J,st.TRIANGLES,B,D,G,Ce.disabled,Ut,w.id,j.rasterBoundsBuffer,j.quadTriangleIndexBuffer,j.rasterBoundsSegments)}}function Uu(j,I,w,B,D,G){var J=j.context,st=J.gl,Ct=I.dem;if(Ct&&Ct.data){var Ot=Ct.dim,Ut=Ct.stride,Ht=Ct.getPixels();if(J.activeTexture.set(st.TEXTURE1),J.pixelStoreUnpackPremultiplyAlpha.set(!1),I.demTexture=I.demTexture||j.getTileTexture(Ut),I.demTexture){var qt=I.demTexture;qt.update(Ht,{premultiply:!1}),qt.bind(st.NEAREST,st.CLAMP_TO_EDGE)}else I.demTexture=new t.Texture(J,Ht,st.RGBA,{premultiply:!1}),I.demTexture.bind(st.NEAREST,st.CLAMP_TO_EDGE);J.activeTexture.set(st.TEXTURE0);var fe=I.fbo;if(!fe){var ye=new t.Texture(J,{width:Ot,height:Ot,data:null},st.RGBA);ye.bind(st.LINEAR,st.CLAMP_TO_EDGE),(fe=I.fbo=J.createFramebuffer(Ot,Ot,!0)).colorAttachment.set(ye.texture)}J.bindFramebuffer.set(fe.framebuffer),J.viewport.set([0,0,Ot,Ot]),j.useProgram("hillshadePrepare").draw(J,st.TRIANGLES,B,D,G,Ce.disabled,function(De,Ie){var Ve=Ie.stride,qe=t.create();return t.ortho(qe,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(qe,qe,[0,-t.EXTENT,0]),{u_matrix:qe,u_image:1,u_dimension:[Ve,Ve],u_zoom:De.overscaledZ,u_unpack:Ie.getUnpackVector()}}(I.tileID,Ct),w.id,j.rasterBoundsBuffer,j.quadTriangleIndexBuffer,j.rasterBoundsSegments),I.needsHillshadePrepare=!1}}function zs(j,I,w,B,D){var G=B.paint.get("raster-fade-duration");if(G>0){var J=t.browser.now(),st=(J-j.timeAdded)/G,Ct=I?(J-I.timeAdded)/G:-1,Ot=w.getSource(),Ut=D.coveringZoomLevel({tileSize:Ot.tileSize,roundZoom:Ot.roundZoom}),Ht=!I||Math.abs(I.tileID.overscaledZ-Ut)>Math.abs(j.tileID.overscaledZ-Ut),qt=Ht&&j.refreshedUponExpiration?1:t.clamp(Ht?st:1-Ct,0,1);return j.refreshedUponExpiration&&st>=1&&(j.refreshedUponExpiration=!1),I?{opacity:1,mix:1-qt}:{opacity:qt,mix:0}}return{opacity:1,mix:0}}var Ul=new t.Color(1,0,0,1),gc=new t.Color(0,1,0,1),Cl=new t.Color(0,0,1,1),kl=new t.Color(1,0,1,1),Gl=new t.Color(0,1,1,1);function cc(j,I,w,B){Ol(j,0,I+w/2,j.transform.width,w,B)}function Qu(j,I,w,B){Ol(j,I-w/2,0,w,j.transform.height,B)}function Ol(j,I,w,B,D,G){var J=j.context,st=J.gl;st.enable(st.SCISSOR_TEST),st.scissor(I*t.browser.devicePixelRatio,w*t.browser.devicePixelRatio,B*t.browser.devicePixelRatio,D*t.browser.devicePixelRatio),J.clear({color:G}),st.disable(st.SCISSOR_TEST)}function Vl(j,I,w){var B=j.context,D=B.gl,G=w.posMatrix,J=j.useProgram("debug"),st=ve.disabled,Ct=Vt.disabled,Ot=j.colorModeForRenderPass();B.activeTexture.set(D.TEXTURE0),j.emptyTexture.bind(D.LINEAR,D.CLAMP_TO_EDGE),J.draw(B,D.LINE_STRIP,st,Ct,Ot,Ce.disabled,qs(G,t.Color.red),"$debug",j.debugBuffer,j.tileBorderIndexBuffer,j.debugSegments);var Ut=I.getTileByID(w.key).latestRawTileData,Ht=Math.floor((Ut&&Ut.byteLength||0)/1024),qt=I.getTile(w).tileSize,fe=512/Math.min(qt,512)*(w.overscaledZ/j.transform.zoom)*.5,ye=w.canonical.toString();w.overscaledZ!==w.canonical.z&&(ye+=" => "+w.overscaledZ),function(De,Ie){De.initDebugOverlayCanvas();var Ve=De.debugOverlayCanvas,qe=De.context.gl,on=De.debugOverlayCanvas.getContext("2d");on.clearRect(0,0,Ve.width,Ve.height),on.shadowColor="white",on.shadowBlur=2,on.lineWidth=1.5,on.strokeStyle="white",on.textBaseline="top",on.font="bold 36px Open Sans, sans-serif",on.fillText(Ie,5,5),on.strokeText(Ie,5,5),De.debugOverlayTexture.update(Ve),De.debugOverlayTexture.bind(qe.LINEAR,qe.CLAMP_TO_EDGE)}(j,ye+" "+Ht+"kb"),J.draw(B,D.TRIANGLES,st,Ct,ie.alphaBlended,Ce.disabled,qs(G,t.Color.transparent,fe),"$debug",j.debugBuffer,j.quadTriangleIndexBuffer,j.debugSegments)}var tu={symbol:function(I,w,B,D,G){if(I.renderPass==="translucent"){var J=Vt.disabled,st=I.colorModeForRenderPass();B.layout.get("text-variable-anchor")&&function(Ct,Ot,Ut,Ht,qt,fe,ye){for(var De=Ot.transform,Ie=qt==="map",Ve=fe==="map",qe=0,on=Ct;qe<on.length;qe+=1){var tr=on[qe],zn=Ht.getTile(tr),cr=zn.getBucket(Ut);if(cr&&cr.text&&cr.text.segments.get().length){var yr=t.evaluateSizeForZoom(cr.textSizeData,De.zoom),Jr=La(zn,1,Ot.transform.zoom),Wr=Mn(tr.posMatrix,Ve,Ie,Ot.transform,Jr),bi=Ut.layout.get("icon-text-fit")!=="none"&&cr.hasIconData();if(yr){var ji=Math.pow(2,De.zoom-zn.tileID.overscaledZ);zl(cr,Ie,Ve,ye,t.symbolSize,De,Wr,tr.posMatrix,ji,yr,bi)}}}}(D,I,B,w,B.layout.get("text-rotation-alignment"),B.layout.get("text-pitch-alignment"),G),B.paint.get("icon-opacity").constantOr(1)!==0&&zu(I,w,B,D,!1,B.paint.get("icon-translate"),B.paint.get("icon-translate-anchor"),B.layout.get("icon-rotation-alignment"),B.layout.get("icon-pitch-alignment"),B.layout.get("icon-keep-upright"),J,st),B.paint.get("text-opacity").constantOr(1)!==0&&zu(I,w,B,D,!0,B.paint.get("text-translate"),B.paint.get("text-translate-anchor"),B.layout.get("text-rotation-alignment"),B.layout.get("text-pitch-alignment"),B.layout.get("text-keep-upright"),J,st),w.map.showCollisionBoxes&&($o(I,w,B,D,B.paint.get("text-translate"),B.paint.get("text-translate-anchor"),!0),$o(I,w,B,D,B.paint.get("icon-translate"),B.paint.get("icon-translate-anchor"),!1))}},circle:function(I,w,B,D){if(I.renderPass==="translucent"){var G=B.paint.get("circle-opacity"),J=B.paint.get("circle-stroke-width"),st=B.paint.get("circle-stroke-opacity"),Ct=B.layout.get("circle-sort-key").constantOr(1)!==void 0;if(G.constantOr(1)!==0||J.constantOr(1)!==0&&st.constantOr(1)!==0){for(var Ot=I.context,Ut=Ot.gl,Ht=I.depthModeForSublayer(0,ve.ReadOnly),qt=Vt.disabled,fe=I.colorModeForRenderPass(),ye=[],De=0;De<D.length;De++){var Ie=D[De],Ve=w.getTile(Ie),qe=Ve.getBucket(B);if(qe){var on=qe.programConfigurations.get(B.id),tr={programConfiguration:on,program:I.useProgram("circle",on),layoutVertexBuffer:qe.layoutVertexBuffer,indexBuffer:qe.indexBuffer,uniformValues:Fs(I,Ie,Ve,B)};if(Ct)for(var zn=0,cr=qe.segments.get();zn<cr.length;zn+=1){var yr=cr[zn];ye.push({segments:new t.SegmentVector([yr]),sortKey:yr.sortKey,state:tr})}else ye.push({segments:qe.segments,sortKey:0,state:tr})}}Ct&&ye.sort(function(Hi,Ji){return Hi.sortKey-Ji.sortKey});for(var Jr=0,Wr=ye;Jr<Wr.length;Jr+=1){var bi=Wr[Jr],ji=bi.state;ji.program.draw(Ot,Ut.TRIANGLES,Ht,qt,fe,Ce.disabled,ji.uniformValues,B.id,ji.layoutVertexBuffer,ji.indexBuffer,bi.segments,B.paint,I.transform.zoom,ji.programConfiguration)}}}},heatmap:function(I,w,B,D){if(B.paint.get("heatmap-opacity")!==0)if(I.renderPass==="offscreen"){var G=I.context,J=G.gl,st=Vt.disabled,Ct=new ie([J.ONE,J.ONE],t.Color.transparent,[!0,!0,!0,!0]);(function(ye,De,Ie){var Ve=ye.gl;ye.activeTexture.set(Ve.TEXTURE1),ye.viewport.set([0,0,De.width/4,De.height/4]);var qe=Ie.heatmapFbo;if(qe)Ve.bindTexture(Ve.TEXTURE_2D,qe.colorAttachment.get()),ye.bindFramebuffer.set(qe.framebuffer);else{var on=Ve.createTexture();Ve.bindTexture(Ve.TEXTURE_2D,on),Ve.texParameteri(Ve.TEXTURE_2D,Ve.TEXTURE_WRAP_S,Ve.CLAMP_TO_EDGE),Ve.texParameteri(Ve.TEXTURE_2D,Ve.TEXTURE_WRAP_T,Ve.CLAMP_TO_EDGE),Ve.texParameteri(Ve.TEXTURE_2D,Ve.TEXTURE_MIN_FILTER,Ve.LINEAR),Ve.texParameteri(Ve.TEXTURE_2D,Ve.TEXTURE_MAG_FILTER,Ve.LINEAR),qe=Ie.heatmapFbo=ye.createFramebuffer(De.width/4,De.height/4,!1),function(tr,zn,cr,yr){var Jr=tr.gl;Jr.texImage2D(Jr.TEXTURE_2D,0,Jr.RGBA,zn.width/4,zn.height/4,0,Jr.RGBA,tr.extRenderToTextureHalfFloat?tr.extTextureHalfFloat.HALF_FLOAT_OES:Jr.UNSIGNED_BYTE,null),yr.colorAttachment.set(cr)}(ye,De,on,qe)}})(G,I,B),G.clear({color:t.Color.transparent});for(var Ot=0;Ot<D.length;Ot++){var Ut=D[Ot];if(!w.hasRenderableParent(Ut)){var Ht=w.getTile(Ut),qt=Ht.getBucket(B);if(qt){var fe=qt.programConfigurations.get(B.id);I.useProgram("heatmap",fe).draw(G,J.TRIANGLES,ve.disabled,st,Ct,Ce.disabled,Ju(Ut.posMatrix,Ht,I.transform.zoom,B.paint.get("heatmap-intensity")),B.id,qt.layoutVertexBuffer,qt.indexBuffer,qt.segments,B.paint,I.transform.zoom,fe)}}}G.viewport.set([0,0,I.width,I.height])}else I.renderPass==="translucent"&&(I.context.setColorMode(I.colorModeForRenderPass()),function(ye,De){var Ie=ye.context,Ve=Ie.gl,qe=De.heatmapFbo;if(qe){Ie.activeTexture.set(Ve.TEXTURE0),Ve.bindTexture(Ve.TEXTURE_2D,qe.colorAttachment.get()),Ie.activeTexture.set(Ve.TEXTURE1);var on=De.colorRampTexture;on||(on=De.colorRampTexture=new t.Texture(Ie,De.colorRamp,Ve.RGBA)),on.bind(Ve.LINEAR,Ve.CLAMP_TO_EDGE),ye.useProgram("heatmapTexture").draw(Ie,Ve.TRIANGLES,ve.disabled,Vt.disabled,ye.colorModeForRenderPass(),Ce.disabled,function(tr,zn,cr,yr){var Jr=t.create();t.ortho(Jr,0,tr.width,tr.height,0,0,1);var Wr=tr.context.gl;return{u_matrix:Jr,u_world:[Wr.drawingBufferWidth,Wr.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:zn.paint.get("heatmap-opacity")}}(ye,De),De.id,ye.viewportBuffer,ye.quadTriangleIndexBuffer,ye.viewportSegments,De.paint,ye.transform.zoom)}}(I,B))},line:function(I,w,B,D){if(I.renderPass==="translucent"){var G=B.paint.get("line-opacity"),J=B.paint.get("line-width");if(G.constantOr(1)!==0&&J.constantOr(1)!==0)for(var st=I.depthModeForSublayer(0,ve.ReadOnly),Ct=I.colorModeForRenderPass(),Ot=B.paint.get("line-dasharray"),Ut=B.paint.get("line-pattern"),Ht=Ut.constantOr(1),qt=B.paint.get("line-gradient"),fe=B.getCrossfadeParameters(),ye=Ht?"linePattern":Ot?"lineSDF":qt?"lineGradient":"line",De=I.context,Ie=De.gl,Ve=!0,qe=0,on=D;qe<on.length;qe+=1){var tr=on[qe],zn=w.getTile(tr);if(!Ht||zn.patternsLoaded()){var cr=zn.getBucket(B);if(cr){var yr=cr.programConfigurations.get(B.id),Jr=I.context.program.get(),Wr=I.useProgram(ye,yr),bi=Ve||Wr.program!==Jr,ji=Ut.constantOr(null);if(ji&&zn.imageAtlas){var Hi=zn.imageAtlas,Ji=Hi.patternPositions[ji.to.toString()],Pa=Hi.patternPositions[ji.from.toString()];Ji&&Pa&&yr.setConstantPatternPositions(Ji,Pa)}var ja=Ht?Pl(I,zn,B,fe):Ot?$l(I,zn,B,Ot,fe):qt?Wa(I,zn,B,cr.lineClipsArray.length):ou(I,zn,B);if(Ht)De.activeTexture.set(Ie.TEXTURE0),zn.imageAtlasTexture.bind(Ie.LINEAR,Ie.CLAMP_TO_EDGE),yr.updatePaintBuffers(fe);else if(Ot&&(bi||I.lineAtlas.dirty))De.activeTexture.set(Ie.TEXTURE0),I.lineAtlas.bind(De);else if(qt){var Fi=cr.gradients[B.id],va=Fi.texture;if(B.gradientVersion!==Fi.version){var ya=256;if(B.stepInterpolant){var Yi=w.getSource().maxzoom,Aa=tr.canonical.z===Yi?Math.ceil(1<<I.transform.maxZoom-tr.canonical.z):1;ya=t.clamp(t.nextPowerOfTwo(cr.maxLineLength/t.EXTENT*1024*Aa),256,De.maxTextureSize)}Fi.gradient=t.renderColorRamp({expression:B.gradientExpression(),evaluationKey:"lineProgress",resolution:ya,image:Fi.gradient||void 0,clips:cr.lineClipsArray}),Fi.texture?Fi.texture.update(Fi.gradient):Fi.texture=new t.Texture(De,Fi.gradient,Ie.RGBA),Fi.version=B.gradientVersion,va=Fi.texture}De.activeTexture.set(Ie.TEXTURE0),va.bind(B.stepInterpolant?Ie.NEAREST:Ie.LINEAR,Ie.CLAMP_TO_EDGE)}Wr.draw(De,Ie.TRIANGLES,st,I.stencilModeForClipping(tr),Ct,Ce.disabled,ja,B.id,cr.layoutVertexBuffer,cr.indexBuffer,cr.segments,B.paint,I.transform.zoom,yr,cr.layoutVertexBuffer2),Ve=!1}}}}},fill:function(I,w,B,D){var G=B.paint.get("fill-color"),J=B.paint.get("fill-opacity");if(J.constantOr(1)!==0){var st=I.colorModeForRenderPass(),Ct=B.paint.get("fill-pattern"),Ot=I.opaquePassEnabledForLayer()&&!Ct.constantOr(1)&&G.constantOr(t.Color.transparent).a===1&&J.constantOr(0)===1?"opaque":"translucent";if(I.renderPass===Ot){var Ut=I.depthModeForSublayer(1,I.renderPass==="opaque"?ve.ReadWrite:ve.ReadOnly);Au(I,w,B,D,Ut,st,!1)}if(I.renderPass==="translucent"&&B.paint.get("fill-antialias")){var Ht=I.depthModeForSublayer(B.getPaintProperty("fill-outline-color")?2:0,ve.ReadOnly);Au(I,w,B,D,Ht,st,!0)}}},"fill-extrusion":function(I,w,B,D){var G=B.paint.get("fill-extrusion-opacity");if(G!==0&&I.renderPass==="translucent"){var J=new ve(I.context.gl.LEQUAL,ve.ReadWrite,I.depthRangeFor3D);if(G!==1||B.paint.get("fill-extrusion-pattern").constantOr(1))Cu(I,w,B,D,J,Vt.disabled,ie.disabled),Cu(I,w,B,D,J,I.stencilModeFor3D(),I.colorModeForRenderPass());else{var st=I.colorModeForRenderPass();Cu(I,w,B,D,J,Vt.disabled,st)}}},hillshade:function(I,w,B,D){if(I.renderPass==="offscreen"||I.renderPass==="translucent"){for(var G=I.context,J=I.depthModeForSublayer(0,ve.ReadOnly),st=I.colorModeForRenderPass(),Ct=I.renderPass==="translucent"?I.stencilConfigForOverlap(D):[{},D],Ot=Ct[0],Ut=0,Ht=Ct[1];Ut<Ht.length;Ut+=1){var qt=Ht[Ut],fe=w.getTile(qt);fe.needsHillshadePrepare&&I.renderPass==="offscreen"?Uu(I,fe,B,J,Vt.disabled,st):I.renderPass==="translucent"&&mu(I,fe,B,J,Ot[qt.overscaledZ],st)}G.viewport.set([0,0,I.width,I.height])}},raster:function(I,w,B,D){if(I.renderPass==="translucent"&&B.paint.get("raster-opacity")!==0&&D.length)for(var G=I.context,J=G.gl,st=w.getSource(),Ct=I.useProgram("raster"),Ot=I.colorModeForRenderPass(),Ut=st instanceof it?[{},D]:I.stencilConfigForOverlap(D),Ht=Ut[0],qt=Ut[1],fe=qt[qt.length-1].overscaledZ,ye=!I.options.moving,De=0,Ie=qt;De<Ie.length;De+=1){var Ve=Ie[De],qe=I.depthModeForSublayer(Ve.overscaledZ-fe,B.paint.get("raster-opacity")===1?ve.ReadWrite:ve.ReadOnly,J.LESS),on=w.getTile(Ve),tr=I.transform.calculatePosMatrix(Ve.toUnwrapped(),ye);on.registerFadeDuration(B.paint.get("raster-fade-duration"));var zn=w.findLoadedParent(Ve,0),cr=zs(on,zn,w,B,I.transform),yr=void 0,Jr=void 0,Wr=B.paint.get("raster-resampling")==="nearest"?J.NEAREST:J.LINEAR;G.activeTexture.set(J.TEXTURE0),on.texture.bind(Wr,J.CLAMP_TO_EDGE,J.LINEAR_MIPMAP_NEAREST),G.activeTexture.set(J.TEXTURE1),zn?(zn.texture.bind(Wr,J.CLAMP_TO_EDGE,J.LINEAR_MIPMAP_NEAREST),yr=Math.pow(2,zn.tileID.overscaledZ-on.tileID.overscaledZ),Jr=[on.tileID.canonical.x*yr%1,on.tileID.canonical.y*yr%1]):on.texture.bind(Wr,J.CLAMP_TO_EDGE,J.LINEAR_MIPMAP_NEAREST);var bi=Nu(tr,Jr||[0,0],yr||1,cr,B);st instanceof it?Ct.draw(G,J.TRIANGLES,qe,Vt.disabled,Ot,Ce.disabled,bi,B.id,st.boundsBuffer,I.quadTriangleIndexBuffer,st.boundsSegments):Ct.draw(G,J.TRIANGLES,qe,Ht[Ve.overscaledZ],Ot,Ce.disabled,bi,B.id,I.rasterBoundsBuffer,I.quadTriangleIndexBuffer,I.rasterBoundsSegments)}},background:function(I,w,B){var D=B.paint.get("background-color"),G=B.paint.get("background-opacity");if(G!==0){var J=I.context,st=J.gl,Ct=I.transform,Ot=Ct.tileSize,Ut=B.paint.get("background-pattern");if(!I.isPatternMissing(Ut)){var Ht=!Ut&&D.a===1&&G===1&&I.opaquePassEnabledForLayer()?"opaque":"translucent";if(I.renderPass===Ht){var qt=Vt.disabled,fe=I.depthModeForSublayer(0,Ht==="opaque"?ve.ReadWrite:ve.ReadOnly),ye=I.colorModeForRenderPass(),De=I.useProgram(Ut?"backgroundPattern":"background"),Ie=Ct.coveringTiles({tileSize:Ot});Ut&&(J.activeTexture.set(st.TEXTURE0),I.imageManager.bind(I.context));for(var Ve=B.getCrossfadeParameters(),qe=0,on=Ie;qe<on.length;qe+=1){var tr=on[qe],zn=I.transform.calculatePosMatrix(tr.toUnwrapped()),cr=Ut?Fu(zn,G,I,Ut,{tileID:tr,tileSize:Ot},Ve):gu(zn,G,D);De.draw(J,st.TRIANGLES,fe,qt,ye,Ce.disabled,cr,B.id,I.tileExtentBuffer,I.quadTriangleIndexBuffer,I.tileExtentSegments)}}}}},debug:function(I,w,B){for(var D=0;D<B.length;D++)Vl(I,w,B[D])},custom:function(I,w,B){var D=I.context,G=B.implementation;if(I.renderPass==="offscreen"){var J=G.prerender;J&&(I.setCustomLayerDefaults(),D.setColorMode(I.colorModeForRenderPass()),J.call(G,D.gl,I.transform.customLayerMatrix()),D.setDirty(),I.setBaseState())}else if(I.renderPass==="translucent"){I.setCustomLayerDefaults(),D.setColorMode(I.colorModeForRenderPass()),D.setStencilMode(Vt.disabled);var st=G.renderingMode==="3d"?new ve(I.context.gl.LEQUAL,ve.ReadWrite,I.depthRangeFor3D):I.depthModeForSublayer(0,ve.ReadOnly);D.setDepthMode(st),G.render(D.gl,I.transform.customLayerMatrix()),D.setDirty(),I.setBaseState(),D.bindFramebuffer.set(null)}}},go=function(I,w){this.context=new ue(I),this.transform=w,this._tileTextures={},this.setup(),this.numSublayers=xe.maxUnderzooming+xe.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Qa,this.gpuTimers={}};go.prototype.resize=function(j,I){if(this.width=j*t.browser.devicePixelRatio,this.height=I*t.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var w=0,B=this.style._order;w<B.length;w+=1)this.style._layers[B[w]].resize()},go.prototype.setup=function(){var j=this.context,I=new t.StructArrayLayout2i4;I.emplaceBack(0,0),I.emplaceBack(t.EXTENT,0),I.emplaceBack(0,t.EXTENT),I.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=j.createVertexBuffer(I,qa.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);var w=new t.StructArrayLayout2i4;w.emplaceBack(0,0),w.emplaceBack(t.EXTENT,0),w.emplaceBack(0,t.EXTENT),w.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=j.createVertexBuffer(w,qa.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);var B=new t.StructArrayLayout4i8;B.emplaceBack(0,0,0,0),B.emplaceBack(t.EXTENT,0,t.EXTENT,0),B.emplaceBack(0,t.EXTENT,0,t.EXTENT),B.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=j.createVertexBuffer(B,K.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);var D=new t.StructArrayLayout2i4;D.emplaceBack(0,0),D.emplaceBack(1,0),D.emplaceBack(0,1),D.emplaceBack(1,1),this.viewportBuffer=j.createVertexBuffer(D,qa.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);var G=new t.StructArrayLayout1ui2;G.emplaceBack(0),G.emplaceBack(1),G.emplaceBack(3),G.emplaceBack(2),G.emplaceBack(0),this.tileBorderIndexBuffer=j.createIndexBuffer(G);var J=new t.StructArrayLayout3ui6;J.emplaceBack(0,1,2),J.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=j.createIndexBuffer(J),this.emptyTexture=new t.Texture(j,{width:1,height:1,data:new Uint8Array([0,0,0,0])},j.gl.RGBA);var st=this.context.gl;this.stencilClearMode=new Vt({func:st.ALWAYS,mask:0},0,255,st.ZERO,st.ZERO,st.ZERO)},go.prototype.clearStencil=function(){var j=this.context,I=j.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var w=t.create();t.ortho(w,0,this.width,this.height,0,0,1),t.scale(w,w,[I.drawingBufferWidth,I.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(j,I.TRIANGLES,ve.disabled,this.stencilClearMode,ie.disabled,Ce.disabled,Ds(w),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},go.prototype._renderTileClippingMasks=function(j,I){if(this.currentStencilSource!==j.source&&j.isTileClipped()&&I&&I.length){this.currentStencilSource=j.source;var w=this.context,B=w.gl;this.nextStencilID+I.length>256&&this.clearStencil(),w.setColorMode(ie.disabled),w.setDepthMode(ve.disabled);var D=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var G=0,J=I;G<J.length;G+=1){var st=J[G],Ct=this._tileClippingMaskIDs[st.key]=this.nextStencilID++;D.draw(w,B.TRIANGLES,ve.disabled,new Vt({func:B.ALWAYS,mask:0},Ct,255,B.KEEP,B.KEEP,B.REPLACE),ie.disabled,Ce.disabled,Ds(st.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},go.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var j=this.nextStencilID++,I=this.context.gl;return new Vt({func:I.NOTEQUAL,mask:255},j,255,I.KEEP,I.KEEP,I.REPLACE)},go.prototype.stencilModeForClipping=function(j){var I=this.context.gl;return new Vt({func:I.EQUAL,mask:255},this._tileClippingMaskIDs[j.key],0,I.KEEP,I.KEEP,I.REPLACE)},go.prototype.stencilConfigForOverlap=function(j){var I,w=this.context.gl,B=j.sort(function(Ct,Ot){return Ot.overscaledZ-Ct.overscaledZ}),D=B[B.length-1].overscaledZ,G=B[0].overscaledZ-D+1;if(G>1){this.currentStencilSource=void 0,this.nextStencilID+G>256&&this.clearStencil();for(var J={},st=0;st<G;st++)J[st+D]=new Vt({func:w.GEQUAL,mask:255},st+this.nextStencilID,255,w.KEEP,w.KEEP,w.REPLACE);return this.nextStencilID+=G,[J,B]}return[(I={},I[D]=Vt.disabled,I),B]},go.prototype.colorModeForRenderPass=function(){var j=this.context.gl;return this._showOverdrawInspector?new ie([j.CONSTANT_COLOR,j.ONE],new t.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?ie.unblended:ie.alphaBlended},go.prototype.depthModeForSublayer=function(j,I,w){if(!this.opaquePassEnabledForLayer())return ve.disabled;var B=1-((1+this.currentLayer)*this.numSublayers+j)*this.depthEpsilon;return new ve(w||this.context.gl.LEQUAL,I,[B,B])},go.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},go.prototype.render=function(j,I){var w=this;this.style=j,this.options=I,this.lineAtlas=j.lineAtlas,this.imageManager=j.imageManager,this.glyphManager=j.glyphManager,this.symbolFadeChange=j.placement.symbolFadeChange(t.browser.now()),this.imageManager.beginFrame();var B=this.style._order,D=this.style.sourceCaches;for(var G in D){var J=D[G];J.used&&J.prepare(this.context)}var st,Ct,Ot={},Ut={},Ht={};for(var qt in D){var fe=D[qt];Ot[qt]=fe.getVisibleCoordinates(),Ut[qt]=Ot[qt].slice().reverse(),Ht[qt]=fe.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var ye=0;ye<B.length;ye++)if(this.style._layers[B[ye]].is3D()){this.opaquePassCutoff=ye;break}this.renderPass="offscreen";for(var De=0,Ie=B;De<Ie.length;De+=1){var Ve=this.style._layers[Ie[De]];if(Ve.hasOffscreenPass()&&!Ve.isHidden(this.transform.zoom)){var qe=Ut[Ve.source];(Ve.type==="custom"||qe.length)&&this.renderLayer(this,D[Ve.source],Ve,qe)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:I.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=I.showOverdrawInspector,this.depthRangeFor3D=[0,1-(j._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=B.length-1;this.currentLayer>=0;this.currentLayer--){var on=this.style._layers[B[this.currentLayer]],tr=D[on.source],zn=Ot[on.source];this._renderTileClippingMasks(on,zn),this.renderLayer(this,tr,on,zn)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<B.length;this.currentLayer++){var cr=this.style._layers[B[this.currentLayer]],yr=D[cr.source],Jr=(cr.type==="symbol"?Ht:Ut)[cr.source];this._renderTileClippingMasks(cr,Ot[cr.source]),this.renderLayer(this,yr,cr,Jr)}this.options.showTileBoundaries&&(t.values(this.style._layers).forEach(function(Wr){Wr.source&&!Wr.isHidden(w.transform.zoom)&&(Wr.source!==(Ct&&Ct.id)&&(Ct=w.style.sourceCaches[Wr.source]),(!st||st.getSource().maxzoom<Ct.getSource().maxzoom)&&(st=Ct))}),st&&tu.debug(this,st,st.getVisibleCoordinates())),this.options.showPadding&&function(Wr){var bi=Wr.transform.padding;cc(Wr,Wr.transform.height-(bi.top||0),3,Ul),cc(Wr,bi.bottom||0,3,gc),Qu(Wr,bi.left||0,3,Cl),Qu(Wr,Wr.transform.width-(bi.right||0),3,kl);var ji=Wr.transform.centerPoint;(function(Hi,Ji,Pa,ja){Ol(Hi,Ji-1,Pa-10,2,20,ja),Ol(Hi,Ji-10,Pa-1,20,2,ja)})(Wr,ji.x,Wr.transform.height-ji.y,Gl)}(this),this.context.setDefault()},go.prototype.renderLayer=function(j,I,w,B){w.isHidden(this.transform.zoom)||(w.type==="background"||w.type==="custom"||B.length)&&(this.id=w.id,this.gpuTimingStart(w),tu[w.type](j,I,w,B,this.style.placement.variableOffsets),this.gpuTimingEnd())},go.prototype.gpuTimingStart=function(j){if(this.options.gpuTiming){var I=this.context.extTimerQuery,w=this.gpuTimers[j.id];w||(w=this.gpuTimers[j.id]={calls:0,cpuTime:0,query:I.createQueryEXT()}),w.calls++,I.beginQueryEXT(I.TIME_ELAPSED_EXT,w.query)}},go.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var j=this.context.extTimerQuery;j.endQueryEXT(j.TIME_ELAPSED_EXT)}},go.prototype.collectGpuTimers=function(){var j=this.gpuTimers;return this.gpuTimers={},j},go.prototype.queryGpuTimers=function(j){var I={};for(var w in j){var B=j[w],D=this.context.extTimerQuery,G=D.getQueryObjectEXT(B.query,D.QUERY_RESULT_EXT)/1e6;D.deleteQueryEXT(B.query),I[w]=G}return I},go.prototype.translatePosMatrix=function(j,I,w,B,D){if(!w[0]&&!w[1])return j;var G=D?B==="map"?this.transform.angle:0:B==="viewport"?-this.transform.angle:0;if(G){var J=Math.sin(G),st=Math.cos(G);w=[w[0]*st-w[1]*J,w[0]*J+w[1]*st]}var Ct=[D?w[0]:La(I,w[0],this.transform.zoom),D?w[1]:La(I,w[1],this.transform.zoom),0],Ot=new Float32Array(16);return t.translate(Ot,j,Ct),Ot},go.prototype.saveTileTexture=function(j){var I=this._tileTextures[j.size[0]];I?I.push(j):this._tileTextures[j.size[0]]=[j]},go.prototype.getTileTexture=function(j){var I=this._tileTextures[j];return I&&I.length>0?I.pop():null},go.prototype.isPatternMissing=function(j){if(!j)return!1;if(!j.from||!j.to)return!0;var I=this.imageManager.getPattern(j.from.toString()),w=this.imageManager.getPattern(j.to.toString());return!I||!w},go.prototype.useProgram=function(j,I){this.cache=this.cache||{};var w=""+j+(I?I.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[w]||(this.cache[w]=new cl(this.context,j,Ns[j],I,Hs[j],this._showOverdrawInspector)),this.cache[w]},go.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},go.prototype.setBaseState=function(){var j=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(j.FUNC_ADD)},go.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=t.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new t.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},go.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var gl=function(I,w){this.points=I,this.planes=w};gl.fromInvProjectionMatrix=function(j,I,w){var B=Math.pow(2,w),D=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(J){return t.transformMat4([],J,j)}).map(function(J){return t.scale$1([],J,1/J[3]/I*B)}),G=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(J){var st=t.sub([],D[J[0]],D[J[1]]),Ct=t.sub([],D[J[2]],D[J[1]]),Ot=t.normalize([],t.cross([],st,Ct)),Ut=-t.dot(Ot,D[J[1]]);return Ot.concat(Ut)});return new gl(D,G)};var hl=function(I,w){this.min=I,this.max=w,this.center=t.scale$2([],t.add([],this.min,this.max),.5)};hl.prototype.quadrant=function(j){for(var I=[j%2==0,j<2],w=t.clone$2(this.min),B=t.clone$2(this.max),D=0;D<I.length;D++)w[D]=I[D]?this.min[D]:this.center[D],B[D]=I[D]?this.center[D]:this.max[D];return B[2]=this.max[2],new hl(w,B)},hl.prototype.distanceX=function(j){return Math.max(Math.min(this.max[0],j[0]),this.min[0])-j[0]},hl.prototype.distanceY=function(j){return Math.max(Math.min(this.max[1],j[1]),this.min[1])-j[1]},hl.prototype.intersects=function(j){for(var I=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],w=!0,B=0;B<j.planes.length;B++){for(var D=j.planes[B],G=0,J=0;J<I.length;J++)G+=t.dot$1(D,I[J])>=0;if(G===0)return 0;G!==I.length&&(w=!1)}if(w)return 2;for(var st=0;st<3;st++){for(var Ct=Number.MAX_VALUE,Ot=-Number.MAX_VALUE,Ut=0;Ut<j.points.length;Ut++){var Ht=j.points[Ut][st]-this.min[st];Ct=Math.min(Ct,Ht),Ot=Math.max(Ot,Ht)}if(Ot<0||Ct>this.max[st]-this.min[st])return 0}return 1};var Ys=function(I,w,B,D){if(I===void 0&&(I=0),w===void 0&&(w=0),B===void 0&&(B=0),D===void 0&&(D=0),isNaN(I)||I<0||isNaN(w)||w<0||isNaN(B)||B<0||isNaN(D)||D<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=I,this.bottom=w,this.left=B,this.right=D};Ys.prototype.interpolate=function(j,I,w){return I.top!=null&&j.top!=null&&(this.top=t.number(j.top,I.top,w)),I.bottom!=null&&j.bottom!=null&&(this.bottom=t.number(j.bottom,I.bottom,w)),I.left!=null&&j.left!=null&&(this.left=t.number(j.left,I.left,w)),I.right!=null&&j.right!=null&&(this.right=t.number(j.right,I.right,w)),this},Ys.prototype.getCenter=function(j,I){var w=t.clamp((this.left+j-this.right)/2,0,j),B=t.clamp((this.top+I-this.bottom)/2,0,I);return new t.Point(w,B)},Ys.prototype.equals=function(j){return this.top===j.top&&this.bottom===j.bottom&&this.left===j.left&&this.right===j.right},Ys.prototype.clone=function(){return new Ys(this.top,this.bottom,this.left,this.right)},Ys.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Na=function(I,w,B,D,G){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=G===void 0||G,this._minZoom=I||0,this._maxZoom=w||22,this._minPitch=B==null?0:B,this._maxPitch=D==null?60:D,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Ys,this._posMatrixCache={},this._alignedPosMatrixCache={}},_o={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Na.prototype.clone=function(){var j=new Na(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return j.tileSize=this.tileSize,j.latRange=this.latRange,j.width=this.width,j.height=this.height,j._center=this._center,j.zoom=this.zoom,j.angle=this.angle,j._fov=this._fov,j._pitch=this._pitch,j._unmodified=this._unmodified,j._edgeInsets=this._edgeInsets.clone(),j._calcMatrices(),j},_o.minZoom.get=function(){return this._minZoom},_o.minZoom.set=function(j){this._minZoom!==j&&(this._minZoom=j,this.zoom=Math.max(this.zoom,j))},_o.maxZoom.get=function(){return this._maxZoom},_o.maxZoom.set=function(j){this._maxZoom!==j&&(this._maxZoom=j,this.zoom=Math.min(this.zoom,j))},_o.minPitch.get=function(){return this._minPitch},_o.minPitch.set=function(j){this._minPitch!==j&&(this._minPitch=j,this.pitch=Math.max(this.pitch,j))},_o.maxPitch.get=function(){return this._maxPitch},_o.maxPitch.set=function(j){this._maxPitch!==j&&(this._maxPitch=j,this.pitch=Math.min(this.pitch,j))},_o.renderWorldCopies.get=function(){return this._renderWorldCopies},_o.renderWorldCopies.set=function(j){j===void 0?j=!0:j===null&&(j=!1),this._renderWorldCopies=j},_o.worldSize.get=function(){return this.tileSize*this.scale},_o.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},_o.size.get=function(){return new t.Point(this.width,this.height)},_o.bearing.get=function(){return-this.angle/Math.PI*180},_o.bearing.set=function(j){var I=-t.wrap(j,-180,180)*Math.PI/180;this.angle!==I&&(this._unmodified=!1,this.angle=I,this._calcMatrices(),this.rotationMatrix=t.create$2(),t.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},_o.pitch.get=function(){return this._pitch/Math.PI*180},_o.pitch.set=function(j){var I=t.clamp(j,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==I&&(this._unmodified=!1,this._pitch=I,this._calcMatrices())},_o.fov.get=function(){return this._fov/Math.PI*180},_o.fov.set=function(j){j=Math.max(.01,Math.min(60,j)),this._fov!==j&&(this._unmodified=!1,this._fov=j/180*Math.PI,this._calcMatrices())},_o.zoom.get=function(){return this._zoom},_o.zoom.set=function(j){var I=Math.min(Math.max(j,this.minZoom),this.maxZoom);this._zoom!==I&&(this._unmodified=!1,this._zoom=I,this.scale=this.zoomScale(I),this.tileZoom=Math.floor(I),this.zoomFraction=I-this.tileZoom,this._constrain(),this._calcMatrices())},_o.center.get=function(){return this._center},_o.center.set=function(j){j.lat===this._center.lat&&j.lng===this._center.lng||(this._unmodified=!1,this._center=j,this._constrain(),this._calcMatrices())},_o.padding.get=function(){return this._edgeInsets.toJSON()},_o.padding.set=function(j){this._edgeInsets.equals(j)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,j,1),this._calcMatrices())},_o.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Na.prototype.isPaddingEqual=function(j){return this._edgeInsets.equals(j)},Na.prototype.interpolatePadding=function(j,I,w){this._unmodified=!1,this._edgeInsets.interpolate(j,I,w),this._constrain(),this._calcMatrices()},Na.prototype.coveringZoomLevel=function(j){var I=(j.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/j.tileSize));return Math.max(0,I)},Na.prototype.getVisibleUnwrappedCoordinates=function(j){var I=[new t.UnwrappedTileID(0,j)];if(this._renderWorldCopies)for(var w=this.pointCoordinate(new t.Point(0,0)),B=this.pointCoordinate(new t.Point(this.width,0)),D=this.pointCoordinate(new t.Point(this.width,this.height)),G=this.pointCoordinate(new t.Point(0,this.height)),J=Math.floor(Math.min(w.x,B.x,D.x,G.x)),st=Math.floor(Math.max(w.x,B.x,D.x,G.x)),Ct=J-1;Ct<=st+1;Ct++)Ct!==0&&I.push(new t.UnwrappedTileID(Ct,j));return I},Na.prototype.coveringTiles=function(j){var I=this.coveringZoomLevel(j),w=I;if(j.minzoom!==void 0&&I<j.minzoom)return[];j.maxzoom!==void 0&&I>j.maxzoom&&(I=j.maxzoom);var B=t.MercatorCoordinate.fromLngLat(this.center),D=Math.pow(2,I),G=[D*B.x,D*B.y,0],J=gl.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,I),st=j.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(st=I);var Ct=function(bi){return{aabb:new hl([bi*D,0,0],[(bi+1)*D,D,0]),zoom:0,x:0,y:0,wrap:bi,fullyVisible:!1}},Ot=[],Ut=[],Ht=I,qt=j.reparseOverscaled?w:I;if(this._renderWorldCopies)for(var fe=1;fe<=3;fe++)Ot.push(Ct(-fe)),Ot.push(Ct(fe));for(Ot.push(Ct(0));Ot.length>0;){var ye=Ot.pop(),De=ye.x,Ie=ye.y,Ve=ye.fullyVisible;if(!Ve){var qe=ye.aabb.intersects(J);if(qe===0)continue;Ve=qe===2}var on=ye.aabb.distanceX(G),tr=ye.aabb.distanceY(G),zn=Math.max(Math.abs(on),Math.abs(tr));if(ye.zoom===Ht||zn>3+(1<<Ht-ye.zoom)-2&&ye.zoom>=st)Ut.push({tileID:new t.OverscaledTileID(ye.zoom===Ht?qt:ye.zoom,ye.wrap,ye.zoom,De,Ie),distanceSq:t.sqrLen([G[0]-.5-De,G[1]-.5-Ie])});else for(var cr=0;cr<4;cr++){var yr=(De<<1)+cr%2,Jr=(Ie<<1)+(cr>>1);Ot.push({aabb:ye.aabb.quadrant(cr),zoom:ye.zoom+1,x:yr,y:Jr,wrap:ye.wrap,fullyVisible:Ve})}}return Ut.sort(function(Wr,bi){return Wr.distanceSq-bi.distanceSq}).map(function(Wr){return Wr.tileID})},Na.prototype.resize=function(j,I){this.width=j,this.height=I,this.pixelsToGLUnits=[2/j,-2/I],this._constrain(),this._calcMatrices()},_o.unmodified.get=function(){return this._unmodified},Na.prototype.zoomScale=function(j){return Math.pow(2,j)},Na.prototype.scaleZoom=function(j){return Math.log(j)/Math.LN2},Na.prototype.project=function(j){var I=t.clamp(j.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.Point(t.mercatorXfromLng(j.lng)*this.worldSize,t.mercatorYfromLat(I)*this.worldSize)},Na.prototype.unproject=function(j){return new t.MercatorCoordinate(j.x/this.worldSize,j.y/this.worldSize).toLngLat()},_o.point.get=function(){return this.project(this.center)},Na.prototype.setLocationAtPoint=function(j,I){var w=this.pointCoordinate(I),B=this.pointCoordinate(this.centerPoint),D=this.locationCoordinate(j),G=new t.MercatorCoordinate(D.x-(w.x-B.x),D.y-(w.y-B.y));this.center=this.coordinateLocation(G),this._renderWorldCopies&&(this.center=this.center.wrap())},Na.prototype.locationPoint=function(j){return this.coordinatePoint(this.locationCoordinate(j))},Na.prototype.pointLocation=function(j){return this.coordinateLocation(this.pointCoordinate(j))},Na.prototype.locationCoordinate=function(j){return t.MercatorCoordinate.fromLngLat(j)},Na.prototype.coordinateLocation=function(j){return j.toLngLat()},Na.prototype.pointCoordinate=function(j){var I=[j.x,j.y,0,1],w=[j.x,j.y,1,1];t.transformMat4(I,I,this.pixelMatrixInverse),t.transformMat4(w,w,this.pixelMatrixInverse);var B=I[3],D=w[3],G=I[1]/B,J=w[1]/D,st=I[2]/B,Ct=w[2]/D,Ot=st===Ct?0:(0-st)/(Ct-st);return new t.MercatorCoordinate(t.number(I[0]/B,w[0]/D,Ot)/this.worldSize,t.number(G,J,Ot)/this.worldSize)},Na.prototype.coordinatePoint=function(j){var I=[j.x*this.worldSize,j.y*this.worldSize,0,1];return t.transformMat4(I,I,this.pixelMatrix),new t.Point(I[0]/I[3],I[1]/I[3])},Na.prototype.getBounds=function(){return new t.LngLatBounds().extend(this.pointLocation(new t.Point(0,0))).extend(this.pointLocation(new t.Point(this.width,0))).extend(this.pointLocation(new t.Point(this.width,this.height))).extend(this.pointLocation(new t.Point(0,this.height)))},Na.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new t.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Na.prototype.setMaxBounds=function(j){j?(this.lngRange=[j.getWest(),j.getEast()],this.latRange=[j.getSouth(),j.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Na.prototype.calculatePosMatrix=function(j,I){I===void 0&&(I=!1);var w=j.key,B=I?this._alignedPosMatrixCache:this._posMatrixCache;if(B[w])return B[w];var D=j.canonical,G=this.worldSize/this.zoomScale(D.z),J=D.x+Math.pow(2,D.z)*j.wrap,st=t.identity(new Float64Array(16));return t.translate(st,st,[J*G,D.y*G,0]),t.scale(st,st,[G/t.EXTENT,G/t.EXTENT,1]),t.multiply(st,I?this.alignedProjMatrix:this.projMatrix,st),B[w]=new Float32Array(st),B[w]},Na.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Na.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var j,I,w,B,D=-90,G=90,J=-180,st=180,Ct=this.size,Ot=this._unmodified;if(this.latRange){var Ut=this.latRange;D=t.mercatorYfromLat(Ut[1])*this.worldSize,j=(G=t.mercatorYfromLat(Ut[0])*this.worldSize)-D<Ct.y?Ct.y/(G-D):0}if(this.lngRange){var Ht=this.lngRange;J=t.mercatorXfromLng(Ht[0])*this.worldSize,I=(st=t.mercatorXfromLng(Ht[1])*this.worldSize)-J<Ct.x?Ct.x/(st-J):0}var qt=this.point,fe=Math.max(I||0,j||0);if(fe)return this.center=this.unproject(new t.Point(I?(st+J)/2:qt.x,j?(G+D)/2:qt.y)),this.zoom+=this.scaleZoom(fe),this._unmodified=Ot,void(this._constraining=!1);if(this.latRange){var ye=qt.y,De=Ct.y/2;ye-De<D&&(B=D+De),ye+De>G&&(B=G-De)}if(this.lngRange){var Ie=qt.x,Ve=Ct.x/2;Ie-Ve<J&&(w=J+Ve),Ie+Ve>st&&(w=st-Ve)}w===void 0&&B===void 0||(this.center=this.unproject(new t.Point(w!==void 0?w:qt.x,B!==void 0?B:qt.y))),this._unmodified=Ot,this._constraining=!1}},Na.prototype._calcMatrices=function(){if(this.height){var j=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var I=Math.PI/2+this._pitch,w=this._fov*(.5+j.y/this.height),B=Math.sin(w)*this.cameraToCenterDistance/Math.sin(t.clamp(Math.PI-I-w,.01,Math.PI-.01)),D=this.point,G=D.x,J=D.y,st=1.01*(Math.cos(Math.PI/2-this._pitch)*B+this.cameraToCenterDistance),Ct=this.height/50,Ot=new Float64Array(16);t.perspective(Ot,this._fov,this.width/this.height,Ct,st),Ot[8]=2*-j.x/this.width,Ot[9]=2*j.y/this.height,t.scale(Ot,Ot,[1,-1,1]),t.translate(Ot,Ot,[0,0,-this.cameraToCenterDistance]),t.rotateX(Ot,Ot,this._pitch),t.rotateZ(Ot,Ot,this.angle),t.translate(Ot,Ot,[-G,-J,0]),this.mercatorMatrix=t.scale([],Ot,[this.worldSize,this.worldSize,this.worldSize]),t.scale(Ot,Ot,[1,1,t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=Ot,this.invProjMatrix=t.invert([],this.projMatrix);var Ut=this.width%2/2,Ht=this.height%2/2,qt=Math.cos(this.angle),fe=Math.sin(this.angle),ye=G-Math.round(G)+qt*Ut+fe*Ht,De=J-Math.round(J)+qt*Ht+fe*Ut,Ie=new Float64Array(Ot);if(t.translate(Ie,Ie,[ye>.5?ye-1:ye,De>.5?De-1:De,0]),this.alignedProjMatrix=Ie,Ot=t.create(),t.scale(Ot,Ot,[this.width/2,-this.height/2,1]),t.translate(Ot,Ot,[1,-1,0]),this.labelPlaneMatrix=Ot,Ot=t.create(),t.scale(Ot,Ot,[1,-1,1]),t.translate(Ot,Ot,[-1,-1,0]),t.scale(Ot,Ot,[2/this.width,2/this.height,1]),this.glCoordMatrix=Ot,this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(Ot=t.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=Ot,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Na.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var j=this.pointCoordinate(new t.Point(0,0)),I=[j.x*this.worldSize,j.y*this.worldSize,0,1];return t.transformMat4(I,I,this.pixelMatrix)[3]/this.cameraToCenterDistance},Na.prototype.getCameraPoint=function(){var j=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.Point(0,j))},Na.prototype.getCameraQueryGeometry=function(j){var I=this.getCameraPoint();if(j.length===1)return[j[0],I];for(var w=I.x,B=I.y,D=I.x,G=I.y,J=0,st=j;J<st.length;J+=1){var Ct=st[J];w=Math.min(w,Ct.x),B=Math.min(B,Ct.y),D=Math.max(D,Ct.x),G=Math.max(G,Ct.y)}return[new t.Point(w,B),new t.Point(D,B),new t.Point(D,G),new t.Point(w,G),new t.Point(w,B)]},Object.defineProperties(Na.prototype,_o);var Us=function(I){var w,B,D,G;this._hashName=I&&encodeURIComponent(I),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(w=this._updateHashUnthrottled.bind(this),B=!1,D=null,G=function(){D=null,B&&(w(),D=setTimeout(G,300),B=!1)},function(){return B=!0,D||G(),D})};Us.prototype.addTo=function(j){return this._map=j,t.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Us.prototype.remove=function(){return t.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Us.prototype.getHashString=function(j){var I=this._map.getCenter(),w=Math.round(100*this._map.getZoom())/100,B=Math.ceil((w*Math.LN2+Math.log(512/360/.5))/Math.LN10),D=Math.pow(10,B),G=Math.round(I.lng*D)/D,J=Math.round(I.lat*D)/D,st=this._map.getBearing(),Ct=this._map.getPitch(),Ot="";if(Ot+=j?"/"+G+"/"+J+"/"+w:w+"/"+J+"/"+G,(st||Ct)&&(Ot+="/"+Math.round(10*st)/10),Ct&&(Ot+="/"+Math.round(Ct)),this._hashName){var Ut=this._hashName,Ht=!1,qt=t.window.location.hash.slice(1).split("&").map(function(fe){var ye=fe.split("=")[0];return ye===Ut?(Ht=!0,ye+"="+Ot):fe}).filter(function(fe){return fe});return Ht||qt.push(Ut+"="+Ot),"#"+qt.join("&")}return"#"+Ot},Us.prototype._getCurrentHash=function(){var j,I=this,w=t.window.location.hash.replace("#","");return this._hashName?(w.split("&").map(function(B){return B.split("=")}).forEach(function(B){B[0]===I._hashName&&(j=B)}),(j&&j[1]||"").split("/")):w.split("/")},Us.prototype._onHashChange=function(){var j=this._getCurrentHash();if(j.length>=3&&!j.some(function(w){return isNaN(w)})){var I=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(j[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+j[2],+j[1]],zoom:+j[0],bearing:I,pitch:+(j[4]||0)}),!0}return!1},Us.prototype._updateHashUnthrottled=function(){var j=t.window.location.href.replace(/(#.+)?$/,this.getHashString());try{t.window.history.replaceState(t.window.history.state,null,j)}catch(I){}};var ml={linearity:.3,easing:t.bezier(0,0,.3,1)},qu=t.extend({deceleration:2500,maxSpeed:1400},ml),ku=t.extend({deceleration:20,maxSpeed:1400},ml),mc=t.extend({deceleration:1e3,maxSpeed:360},ml),Os=t.extend({deceleration:1e3,maxSpeed:90},ml),tl=function(I){this._map=I,this.clear()};function uu(j,I){(!j.duration||j.duration<I.duration)&&(j.duration=I.duration,j.easing=I.easing)}function Zs(j,I,w){var B=w.maxSpeed,D=w.linearity,G=w.deceleration,J=t.clamp(j*D/(I/1e3),-B,B),st=Math.abs(J)/(G*D);return{easing:w.easing,duration:1e3*st,amount:J*(st/2)}}tl.prototype.clear=function(){this._inertiaBuffer=[]},tl.prototype.record=function(j){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:t.browser.now(),settings:j})},tl.prototype._drainInertiaBuffer=function(){for(var j=this._inertiaBuffer,I=t.browser.now();j.length>0&&I-j[0].time>160;)j.shift()},tl.prototype._onMoveEnd=function(j){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var I={zoom:0,bearing:0,pitch:0,pan:new t.Point(0,0),pinchAround:void 0,around:void 0},w=0,B=this._inertiaBuffer;w<B.length;w+=1){var D=B[w].settings;I.zoom+=D.zoomDelta||0,I.bearing+=D.bearingDelta||0,I.pitch+=D.pitchDelta||0,D.panDelta&&I.pan._add(D.panDelta),D.around&&(I.around=D.around),D.pinchAround&&(I.pinchAround=D.pinchAround)}var G=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,J={};if(I.pan.mag()){var st=Zs(I.pan.mag(),G,t.extend({},qu,j||{}));J.offset=I.pan.mult(st.amount/I.pan.mag()),J.center=this._map.transform.center,uu(J,st)}if(I.zoom){var Ct=Zs(I.zoom,G,ku);J.zoom=this._map.transform.zoom+Ct.amount,uu(J,Ct)}if(I.bearing){var Ot=Zs(I.bearing,G,mc);J.bearing=this._map.transform.bearing+t.clamp(Ot.amount,-179,179),uu(J,Ot)}if(I.pitch){var Ut=Zs(I.pitch,G,Os);J.pitch=this._map.transform.pitch+Ut.amount,uu(J,Ut)}if(J.zoom||J.bearing){var Ht=I.pinchAround===void 0?I.around:I.pinchAround;J.around=Ht?this._map.unproject(Ht):this._map.getCenter()}return this.clear(),t.extend(J,{noMoveStart:!0})}};var Qo=function(j){function I(B,D,G,J){J===void 0&&(J={});var st=s.mousePos(D.getCanvasContainer(),G),Ct=D.unproject(st);j.call(this,B,t.extend({point:st,lngLat:Ct,originalEvent:G},J)),this._defaultPrevented=!1,this.target=D}j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I;var w={defaultPrevented:{configurable:!0}};return I.prototype.preventDefault=function(){this._defaultPrevented=!0},w.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(I.prototype,w),I}(t.Event),eu=function(j){function I(B,D,G){var J=B==="touchend"?G.changedTouches:G.touches,st=s.touchPos(D.getCanvasContainer(),J),Ct=st.map(function(Ht){return D.unproject(Ht)}),Ot=st.reduce(function(Ht,qt,fe,ye){return Ht.add(qt.div(ye.length))},new t.Point(0,0)),Ut=D.unproject(Ot);j.call(this,B,{points:st,point:Ot,lngLats:Ct,lngLat:Ut,originalEvent:G}),this._defaultPrevented=!1}j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I;var w={defaultPrevented:{configurable:!0}};return I.prototype.preventDefault=function(){this._defaultPrevented=!0},w.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(I.prototype,w),I}(t.Event),Ou=function(j){function I(B,D,G){j.call(this,B,{originalEvent:G}),this._defaultPrevented=!1}j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I;var w={defaultPrevented:{configurable:!0}};return I.prototype.preventDefault=function(){this._defaultPrevented=!0},w.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(I.prototype,w),I}(t.Event),qo=function(I,w){this._map=I,this._clickTolerance=w.clickTolerance};qo.prototype.reset=function(){delete this._mousedownPos},qo.prototype.wheel=function(j){return this._firePreventable(new Ou(j.type,this._map,j))},qo.prototype.mousedown=function(j,I){return this._mousedownPos=I,this._firePreventable(new Qo(j.type,this._map,j))},qo.prototype.mouseup=function(j){this._map.fire(new Qo(j.type,this._map,j))},qo.prototype.click=function(j,I){this._mousedownPos&&this._mousedownPos.dist(I)>=this._clickTolerance||this._map.fire(new Qo(j.type,this._map,j))},qo.prototype.dblclick=function(j){return this._firePreventable(new Qo(j.type,this._map,j))},qo.prototype.mouseover=function(j){this._map.fire(new Qo(j.type,this._map,j))},qo.prototype.mouseout=function(j){this._map.fire(new Qo(j.type,this._map,j))},qo.prototype.touchstart=function(j){return this._firePreventable(new eu(j.type,this._map,j))},qo.prototype.touchmove=function(j){this._map.fire(new eu(j.type,this._map,j))},qo.prototype.touchend=function(j){this._map.fire(new eu(j.type,this._map,j))},qo.prototype.touchcancel=function(j){this._map.fire(new eu(j.type,this._map,j))},qo.prototype._firePreventable=function(j){if(this._map.fire(j),j.defaultPrevented)return{}},qo.prototype.isEnabled=function(){return!0},qo.prototype.isActive=function(){return!1},qo.prototype.enable=function(){},qo.prototype.disable=function(){};var Wi=function(I){this._map=I};Wi.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Wi.prototype.mousemove=function(j){this._map.fire(new Qo(j.type,this._map,j))},Wi.prototype.mousedown=function(){this._delayContextMenu=!0},Wi.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Qo("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Wi.prototype.contextmenu=function(j){this._delayContextMenu?this._contextMenuEvent=j:this._map.fire(new Qo(j.type,this._map,j)),this._map.listens("contextmenu")&&j.preventDefault()},Wi.prototype.isEnabled=function(){return!0},Wi.prototype.isActive=function(){return!1},Wi.prototype.enable=function(){},Wi.prototype.disable=function(){};var ws=function(I,w){this._map=I,this._el=I.getCanvasContainer(),this._container=I.getContainer(),this._clickTolerance=w.clickTolerance||1};function Gu(j,I){for(var w={},B=0;B<j.length;B++)w[j[B].identifier]=I[B];return w}ws.prototype.isEnabled=function(){return!!this._enabled},ws.prototype.isActive=function(){return!!this._active},ws.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},ws.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ws.prototype.mousedown=function(j,I){this.isEnabled()&&j.shiftKey&&j.button===0&&(s.disableDrag(),this._startPos=this._lastPos=I,this._active=!0)},ws.prototype.mousemoveWindow=function(j,I){if(this._active){var w=I;if(!(this._lastPos.equals(w)||!this._box&&w.dist(this._startPos)<this._clickTolerance)){var B=this._startPos;this._lastPos=w,this._box||(this._box=s.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",j));var D=Math.min(B.x,w.x),G=Math.max(B.x,w.x),J=Math.min(B.y,w.y),st=Math.max(B.y,w.y);s.setTransform(this._box,"translate("+D+"px,"+J+"px)"),this._box.style.width=G-D+"px",this._box.style.height=st-J+"px"}}},ws.prototype.mouseupWindow=function(j,I){var w=this;if(this._active&&j.button===0){var B=this._startPos,D=I;if(this.reset(),s.suppressClick(),B.x!==D.x||B.y!==D.y)return this._map.fire(new t.Event("boxzoomend",{originalEvent:j})),{cameraAnimation:function(J){return J.fitScreenCoordinates(B,D,w._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",j)}},ws.prototype.keydown=function(j){this._active&&j.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",j))},ws.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(s.remove(this._box),this._box=null),s.enableDrag(),delete this._startPos,delete this._lastPos},ws.prototype._fireEvent=function(j,I){return this._map.fire(new t.Event(j,{originalEvent:I}))};var wu=function(I){this.reset(),this.numTouches=I.numTouches};wu.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},wu.prototype.touchstart=function(j,I,w){(this.centroid||w.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=j.timeStamp),w.length===this.numTouches&&(this.centroid=function(B){for(var D=new t.Point(0,0),G=0,J=B;G<J.length;G+=1)D._add(J[G]);return D.div(B.length)}(I),this.touches=Gu(w,I)))},wu.prototype.touchmove=function(j,I,w){if(!this.aborted&&this.centroid){var B=Gu(w,I);for(var D in this.touches){var G=B[D];(!G||G.dist(this.touches[D])>30)&&(this.aborted=!0)}}},wu.prototype.touchend=function(j,I,w){if((!this.centroid||j.timeStamp-this.startTime>500)&&(this.aborted=!0),w.length===0){var B=!this.aborted&&this.centroid;if(this.reset(),B)return B}};var Fo=function(I){this.singleTap=new wu(I),this.numTaps=I.numTaps,this.reset()};Fo.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Fo.prototype.touchstart=function(j,I,w){this.singleTap.touchstart(j,I,w)},Fo.prototype.touchmove=function(j,I,w){this.singleTap.touchmove(j,I,w)},Fo.prototype.touchend=function(j,I,w){var B=this.singleTap.touchend(j,I,w);if(B){var D=j.timeStamp-this.lastTime<500,G=!this.lastTap||this.lastTap.dist(B)<30;if(D&&G||this.reset(),this.count++,this.lastTime=j.timeStamp,this.lastTap=B,this.count===this.numTaps)return this.reset(),B}};var ko=function(){this._zoomIn=new Fo({numTouches:1,numTaps:2}),this._zoomOut=new Fo({numTouches:2,numTaps:1}),this.reset()};ko.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},ko.prototype.touchstart=function(j,I,w){this._zoomIn.touchstart(j,I,w),this._zoomOut.touchstart(j,I,w)},ko.prototype.touchmove=function(j,I,w){this._zoomIn.touchmove(j,I,w),this._zoomOut.touchmove(j,I,w)},ko.prototype.touchend=function(j,I,w){var B=this,D=this._zoomIn.touchend(j,I,w),G=this._zoomOut.touchend(j,I,w);return D?(this._active=!0,j.preventDefault(),setTimeout(function(){return B.reset()},0),{cameraAnimation:function(st){return st.easeTo({duration:300,zoom:st.getZoom()+1,around:st.unproject(D)},{originalEvent:j})}}):G?(this._active=!0,j.preventDefault(),setTimeout(function(){return B.reset()},0),{cameraAnimation:function(st){return st.easeTo({duration:300,zoom:st.getZoom()-1,around:st.unproject(G)},{originalEvent:j})}}):void 0},ko.prototype.touchcancel=function(){this.reset()},ko.prototype.enable=function(){this._enabled=!0},ko.prototype.disable=function(){this._enabled=!1,this.reset()},ko.prototype.isEnabled=function(){return this._enabled},ko.prototype.isActive=function(){return this._active};var Eu={0:1,2:2},Mi=function(I){this.reset(),this._clickTolerance=I.clickTolerance||1};Mi.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Mi.prototype._correctButton=function(j,I){return!1},Mi.prototype._move=function(j,I){return{}},Mi.prototype.mousedown=function(j,I){if(!this._lastPoint){var w=s.mouseButton(j);this._correctButton(j,w)&&(this._lastPoint=I,this._eventButton=w)}},Mi.prototype.mousemoveWindow=function(j,I){var w=this._lastPoint;if(w){if(j.preventDefault(),function(B,D){var G=Eu[D];return B.buttons===void 0||(B.buttons&G)!==G}(j,this._eventButton))this.reset();else if(this._moved||!(I.dist(w)<this._clickTolerance))return this._moved=!0,this._lastPoint=I,this._move(w,I)}},Mi.prototype.mouseupWindow=function(j){this._lastPoint&&s.mouseButton(j)===this._eventButton&&(this._moved&&s.suppressClick(),this.reset())},Mi.prototype.enable=function(){this._enabled=!0},Mi.prototype.disable=function(){this._enabled=!1,this.reset()},Mi.prototype.isEnabled=function(){return this._enabled},Mi.prototype.isActive=function(){return this._active};var el=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.mousedown=function(w,B){j.prototype.mousedown.call(this,w,B),this._lastPoint&&(this._active=!0)},I.prototype._correctButton=function(w,B){return B===0&&!w.ctrlKey},I.prototype._move=function(w,B){return{around:B,panDelta:B.sub(w)}},I}(Mi),Iu=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype._correctButton=function(w,B){return B===0&&w.ctrlKey||B===2},I.prototype._move=function(w,B){var D=.8*(B.x-w.x);if(D)return this._active=!0,{bearingDelta:D}},I.prototype.contextmenu=function(w){w.preventDefault()},I}(Mi),Lu=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype._correctButton=function(w,B){return B===0&&w.ctrlKey||B===2},I.prototype._move=function(w,B){var D=-.5*(B.y-w.y);if(D)return this._active=!0,{pitchDelta:D}},I.prototype.contextmenu=function(w){w.preventDefault()},I}(Mi),nu=function(I){this._minTouches=1,this._clickTolerance=I.clickTolerance||1,this.reset()};nu.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new t.Point(0,0)},nu.prototype.touchstart=function(j,I,w){return this._calculateTransform(j,I,w)},nu.prototype.touchmove=function(j,I,w){if(this._active&&!(w.length<this._minTouches))return j.preventDefault(),this._calculateTransform(j,I,w)},nu.prototype.touchend=function(j,I,w){this._calculateTransform(j,I,w),this._active&&w.length<this._minTouches&&this.reset()},nu.prototype.touchcancel=function(){this.reset()},nu.prototype._calculateTransform=function(j,I,w){w.length>0&&(this._active=!0);var B=Gu(w,I),D=new t.Point(0,0),G=new t.Point(0,0),J=0;for(var st in B){var Ct=B[st],Ot=this._touches[st];Ot&&(D._add(Ct),G._add(Ct.sub(Ot)),J++,B[st]=Ct)}if(this._touches=B,!(J<this._minTouches)&&G.mag()){var Ut=G.div(J);if(this._sum._add(Ut),!(this._sum.mag()<this._clickTolerance))return{around:D.div(J),panDelta:Ut}}},nu.prototype.enable=function(){this._enabled=!0},nu.prototype.disable=function(){this._enabled=!1,this.reset()},nu.prototype.isEnabled=function(){return this._enabled},nu.prototype.isActive=function(){return this._active};var we=function(){this.reset()};function Te(j,I,w){for(var B=0;B<j.length;B++)if(j[B].identifier===w)return I[B]}function dn(j,I){return Math.log(j/I)/Math.LN2}we.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},we.prototype._start=function(j){},we.prototype._move=function(j,I,w){return{}},we.prototype.touchstart=function(j,I,w){this._firstTwoTouches||w.length<2||(this._firstTwoTouches=[w[0].identifier,w[1].identifier],this._start([I[0],I[1]]))},we.prototype.touchmove=function(j,I,w){if(this._firstTwoTouches){j.preventDefault();var B=this._firstTwoTouches,D=B[1],G=Te(w,I,B[0]),J=Te(w,I,D);if(G&&J){var st=this._aroundCenter?null:G.add(J).div(2);return this._move([G,J],st,j)}}},we.prototype.touchend=function(j,I,w){if(this._firstTwoTouches){var B=this._firstTwoTouches,D=B[1],G=Te(w,I,B[0]),J=Te(w,I,D);G&&J||(this._active&&s.suppressClick(),this.reset())}},we.prototype.touchcancel=function(){this.reset()},we.prototype.enable=function(j){this._enabled=!0,this._aroundCenter=!!j&&j.around==="center"},we.prototype.disable=function(){this._enabled=!1,this.reset()},we.prototype.isEnabled=function(){return this._enabled},we.prototype.isActive=function(){return this._active};var tn=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.reset=function(){j.prototype.reset.call(this),delete this._distance,delete this._startDistance},I.prototype._start=function(w){this._startDistance=this._distance=w[0].dist(w[1])},I.prototype._move=function(w,B){var D=this._distance;if(this._distance=w[0].dist(w[1]),this._active||!(Math.abs(dn(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:dn(this._distance,D),pinchAround:B}},I}(we);function wn(j,I){return 180*j.angleWith(I)/Math.PI}var vr=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.reset=function(){j.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},I.prototype._start=function(w){this._startVector=this._vector=w[0].sub(w[1]),this._minDiameter=w[0].dist(w[1])},I.prototype._move=function(w,B){var D=this._vector;if(this._vector=w[0].sub(w[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:wn(this._vector,D),pinchAround:B}},I.prototype._isBelowThreshold=function(w){this._minDiameter=Math.min(this._minDiameter,w.mag());var B=25/(Math.PI*this._minDiameter)*360,D=wn(w,this._startVector);return Math.abs(D)<B},I}(we);function Lr(j){return Math.abs(j.y)>Math.abs(j.x)}var Kr=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.reset=function(){j.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},I.prototype._start=function(w){this._lastPoints=w,Lr(w[0].sub(w[1]))&&(this._valid=!1)},I.prototype._move=function(w,B,D){var G=w[0].sub(this._lastPoints[0]),J=w[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(G,J,D.timeStamp),this._valid)return this._lastPoints=w,this._active=!0,{pitchDelta:(G.y+J.y)/2*-.5}},I.prototype.gestureBeginsVertically=function(w,B,D){if(this._valid!==void 0)return this._valid;var G=w.mag()>=2,J=B.mag()>=2;if(G||J){if(!G||!J)return this._firstMove===void 0&&(this._firstMove=D),D-this._firstMove<100&&void 0;var st=w.y>0==B.y>0;return Lr(w)&&Lr(B)&&st}},I}(we),ti={panStep:100,bearingStep:15,pitchStep:10},Fr=function(){var I=ti;this._panStep=I.panStep,this._bearingStep=I.bearingStep,this._pitchStep=I.pitchStep,this._rotationDisabled=!1};function ui(j){return j*(2-j)}Fr.prototype.reset=function(){this._active=!1},Fr.prototype.keydown=function(j){var I=this;if(!(j.altKey||j.ctrlKey||j.metaKey)){var w=0,B=0,D=0,G=0,J=0;switch(j.keyCode){case 61:case 107:case 171:case 187:w=1;break;case 189:case 109:case 173:w=-1;break;case 37:j.shiftKey?B=-1:(j.preventDefault(),G=-1);break;case 39:j.shiftKey?B=1:(j.preventDefault(),G=1);break;case 38:j.shiftKey?D=1:(j.preventDefault(),J=-1);break;case 40:j.shiftKey?D=-1:(j.preventDefault(),J=1);break;default:return}return this._rotationDisabled&&(B=0,D=0),{cameraAnimation:function(Ct){var Ot=Ct.getZoom();Ct.easeTo({duration:300,easeId:"keyboardHandler",easing:ui,zoom:w?Math.round(Ot)+w*(j.shiftKey?2:1):Ot,bearing:Ct.getBearing()+B*I._bearingStep,pitch:Ct.getPitch()+D*I._pitchStep,offset:[-G*I._panStep,-J*I._panStep],center:Ct.getCenter()},{originalEvent:j})}}}},Fr.prototype.enable=function(){this._enabled=!0},Fr.prototype.disable=function(){this._enabled=!1,this.reset()},Fr.prototype.isEnabled=function(){return this._enabled},Fr.prototype.isActive=function(){return this._active},Fr.prototype.disableRotation=function(){this._rotationDisabled=!0},Fr.prototype.enableRotation=function(){this._rotationDisabled=!1};var br=function(I,w){this._map=I,this._el=I.getCanvasContainer(),this._handler=w,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,t.bindAll(["_onTimeout"],this)};br.prototype.setZoomRate=function(j){this._defaultZoomRate=j},br.prototype.setWheelZoomRate=function(j){this._wheelZoomRate=j},br.prototype.isEnabled=function(){return!!this._enabled},br.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},br.prototype.isZooming=function(){return!!this._zooming},br.prototype.enable=function(j){this.isEnabled()||(this._enabled=!0,this._aroundCenter=j&&j.around==="center")},br.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},br.prototype.wheel=function(j){if(this.isEnabled()){var I=j.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*j.deltaY:j.deltaY,w=t.browser.now(),B=w-(this._lastWheelEventTime||0);this._lastWheelEventTime=w,I!==0&&I%4.000244140625==0?this._type="wheel":I!==0&&Math.abs(I)<4?this._type="trackpad":B>400?(this._type=null,this._lastValue=I,this._timeout=setTimeout(this._onTimeout,40,j)):this._type||(this._type=Math.abs(B*I)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,I+=this._lastValue)),j.shiftKey&&I&&(I/=4),this._type&&(this._lastWheelEvent=j,this._delta-=I,this._active||this._start(j)),j.preventDefault()}},br.prototype._onTimeout=function(j){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(j)},br.prototype._start=function(j){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var I=s.mousePos(this._el,j);this._around=t.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(I)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},br.prototype.renderFrame=function(){var j=this;if(this._frameId&&(this._frameId=null,this.isActive())){var I=this._map.transform;if(this._delta!==0){var w=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,B=2/(1+Math.exp(-Math.abs(this._delta*w)));this._delta<0&&B!==0&&(B=1/B);var D=typeof this._targetZoom=="number"?I.zoomScale(this._targetZoom):I.scale;this._targetZoom=Math.min(I.maxZoom,Math.max(I.minZoom,I.scaleZoom(D*B))),this._type==="wheel"&&(this._startZoom=I.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var G,J=typeof this._targetZoom=="number"?this._targetZoom:I.zoom,st=this._startZoom,Ct=this._easing,Ot=!1;if(this._type==="wheel"&&st&&Ct){var Ut=Math.min((t.browser.now()-this._lastWheelEventTime)/200,1),Ht=Ct(Ut);G=t.number(st,J,Ht),Ut<1?this._frameId||(this._frameId=!0):Ot=!0}else G=J,Ot=!0;return this._active=!0,Ot&&(this._active=!1,this._finishTimeout=setTimeout(function(){j._zooming=!1,j._handler._triggerRenderFrame(),delete j._targetZoom,delete j._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Ot,zoomDelta:G-I.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},br.prototype._smoothOutEasing=function(j){var I=t.ease;if(this._prevEase){var w=this._prevEase,B=(t.browser.now()-w.start)/w.duration,D=w.easing(B+.01)-w.easing(B),G=.27/Math.sqrt(D*D+1e-4)*.01,J=Math.sqrt(.0729-G*G);I=t.bezier(G,J,.25,1)}return this._prevEase={start:t.browser.now(),duration:j,easing:I},I},br.prototype.reset=function(){this._active=!1};var Zt=function(I,w){this._clickZoom=I,this._tapZoom=w};Zt.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Zt.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Zt.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Zt.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var te=function(){this.reset()};te.prototype.reset=function(){this._active=!1},te.prototype.dblclick=function(j,I){return j.preventDefault(),{cameraAnimation:function(B){B.easeTo({duration:300,zoom:B.getZoom()+(j.shiftKey?-1:1),around:B.unproject(I)},{originalEvent:j})}}},te.prototype.enable=function(){this._enabled=!0},te.prototype.disable=function(){this._enabled=!1,this.reset()},te.prototype.isEnabled=function(){return this._enabled},te.prototype.isActive=function(){return this._active};var Le=function(){this._tap=new Fo({numTouches:1,numTaps:1}),this.reset()};Le.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Le.prototype.touchstart=function(j,I,w){this._swipePoint||(this._tapTime&&j.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?w.length>0&&(this._swipePoint=I[0],this._swipeTouch=w[0].identifier):this._tap.touchstart(j,I,w))},Le.prototype.touchmove=function(j,I,w){if(this._tapTime){if(this._swipePoint){if(w[0].identifier!==this._swipeTouch)return;var B=I[0],D=B.y-this._swipePoint.y;return this._swipePoint=B,j.preventDefault(),this._active=!0,{zoomDelta:D/128}}}else this._tap.touchmove(j,I,w)},Le.prototype.touchend=function(j,I,w){this._tapTime?this._swipePoint&&w.length===0&&this.reset():this._tap.touchend(j,I,w)&&(this._tapTime=j.timeStamp)},Le.prototype.touchcancel=function(){this.reset()},Le.prototype.enable=function(){this._enabled=!0},Le.prototype.disable=function(){this._enabled=!1,this.reset()},Le.prototype.isEnabled=function(){return this._enabled},Le.prototype.isActive=function(){return this._active};var _e=function(I,w,B){this._el=I,this._mousePan=w,this._touchPan=B};_e.prototype.enable=function(j){this._inertiaOptions=j||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},_e.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},_e.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},_e.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Rt=function(I,w,B){this._pitchWithRotate=I.pitchWithRotate,this._mouseRotate=w,this._mousePitch=B};Rt.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Rt.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Rt.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Rt.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var zt=function(I,w,B,D){this._el=I,this._touchZoom=w,this._touchRotate=B,this._tapDragZoom=D,this._rotationDisabled=!1,this._enabled=!0};zt.prototype.enable=function(j){this._touchZoom.enable(j),this._rotationDisabled||this._touchRotate.enable(j),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},zt.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},zt.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},zt.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},zt.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},zt.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var se=function(I){return I.zoom||I.drag||I.pitch||I.rotate},re=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I}(t.Event);function ce(j){return j.panDelta&&j.panDelta.mag()||j.zoomDelta||j.bearingDelta||j.pitchDelta}var Fe=function(I,w){this._map=I,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new tl(I),this._bearingSnap=w.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(w),t.bindAll(["handleEvent","handleWindowEvent"],this);var B=this._el;this._listeners=[[B,"touchstart",{passive:!0}],[B,"touchmove",{passive:!1}],[B,"touchend",void 0],[B,"touchcancel",void 0],[B,"mousedown",void 0],[B,"mousemove",void 0],[B,"mouseup",void 0],[t.window.document,"mousemove",{capture:!0}],[t.window.document,"mouseup",void 0],[B,"mouseover",void 0],[B,"mouseout",void 0],[B,"dblclick",void 0],[B,"click",void 0],[B,"keydown",{capture:!1}],[B,"keyup",void 0],[B,"wheel",{passive:!1}],[B,"contextmenu",void 0],[t.window,"blur",void 0]];for(var D=0,G=this._listeners;D<G.length;D+=1){var J=G[D],st=J[0];s.addEventListener(st,J[1],st===t.window.document?this.handleWindowEvent:this.handleEvent,J[2])}};Fe.prototype.destroy=function(){for(var j=0,I=this._listeners;j<I.length;j+=1){var w=I[j],B=w[0];s.removeEventListener(B,w[1],B===t.window.document?this.handleWindowEvent:this.handleEvent,w[2])}},Fe.prototype._addDefaultHandlers=function(j){var I=this._map,w=I.getCanvasContainer();this._add("mapEvent",new qo(I,j));var B=I.boxZoom=new ws(I,j);this._add("boxZoom",B);var D=new ko,G=new te;I.doubleClickZoom=new Zt(G,D),this._add("tapZoom",D),this._add("clickZoom",G);var J=new Le;this._add("tapDragZoom",J);var st=I.touchPitch=new Kr;this._add("touchPitch",st);var Ct=new Iu(j),Ot=new Lu(j);I.dragRotate=new Rt(j,Ct,Ot),this._add("mouseRotate",Ct,["mousePitch"]),this._add("mousePitch",Ot,["mouseRotate"]);var Ut=new el(j),Ht=new nu(j);I.dragPan=new _e(w,Ut,Ht),this._add("mousePan",Ut),this._add("touchPan",Ht,["touchZoom","touchRotate"]);var qt=new vr,fe=new tn;I.touchZoomRotate=new zt(w,fe,qt,J),this._add("touchRotate",qt,["touchPan","touchZoom"]),this._add("touchZoom",fe,["touchPan","touchRotate"]);var ye=I.scrollZoom=new br(I,this);this._add("scrollZoom",ye,["mousePan"]);var De=I.keyboard=new Fr;this._add("keyboard",De),this._add("blockableMapEvent",new Wi(I));for(var Ie=0,Ve=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];Ie<Ve.length;Ie+=1){var qe=Ve[Ie];j.interactive&&j[qe]&&I[qe].enable(j[qe])}},Fe.prototype._add=function(j,I,w){this._handlers.push({handlerName:j,handler:I,allowed:w}),this._handlersById[j]=I},Fe.prototype.stop=function(j){if(!this._updatingCamera){for(var I=0,w=this._handlers;I<w.length;I+=1)w[I].handler.reset();this._inertia.clear(),this._fireEvents({},{},j),this._changes=[]}},Fe.prototype.isActive=function(){for(var j=0,I=this._handlers;j<I.length;j+=1)if(I[j].handler.isActive())return!0;return!1},Fe.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},Fe.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},Fe.prototype.isMoving=function(){return Boolean(se(this._eventsInProgress))||this.isZooming()},Fe.prototype._blockedByActive=function(j,I,w){for(var B in j)if(B!==w&&(!I||I.indexOf(B)<0))return!0;return!1},Fe.prototype.handleWindowEvent=function(j){this.handleEvent(j,j.type+"Window")},Fe.prototype._getMapTouches=function(j){for(var I=[],w=0,B=j;w<B.length;w+=1){var D=B[w];this._el.contains(D.target)&&I.push(D)}return I},Fe.prototype.handleEvent=function(j,I){if(j.type!=="blur"){this._updatingCamera=!0;for(var w=j.type==="renderFrame"?void 0:j,B={needsRenderFrame:!1},D={},G={},J=j.touches?this._getMapTouches(j.touches):void 0,st=J?s.touchPos(this._el,J):s.mousePos(this._el,j),Ct=0,Ot=this._handlers;Ct<Ot.length;Ct+=1){var Ut=Ot[Ct],Ht=Ut.handlerName,qt=Ut.handler,fe=Ut.allowed;if(qt.isEnabled()){var ye=void 0;this._blockedByActive(G,fe,Ht)?qt.reset():qt[I||j.type]&&(ye=qt[I||j.type](j,st,J),this.mergeHandlerResult(B,D,ye,Ht,w),ye&&ye.needsRenderFrame&&this._triggerRenderFrame()),(ye||qt.isActive())&&(G[Ht]=qt)}}var De={};for(var Ie in this._previousActiveHandlers)G[Ie]||(De[Ie]=w);this._previousActiveHandlers=G,(Object.keys(De).length||ce(B))&&(this._changes.push([B,D,De]),this._triggerRenderFrame()),(Object.keys(G).length||ce(B))&&this._map._stop(!0),this._updatingCamera=!1;var Ve=B.cameraAnimation;Ve&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Ve(this._map))}else this.stop(!0)},Fe.prototype.mergeHandlerResult=function(j,I,w,B,D){if(w){t.extend(j,w);var G={handlerName:B,originalEvent:w.originalEvent||D};w.zoomDelta!==void 0&&(I.zoom=G),w.panDelta!==void 0&&(I.drag=G),w.pitchDelta!==void 0&&(I.pitch=G),w.bearingDelta!==void 0&&(I.rotate=G)}},Fe.prototype._applyChanges=function(){for(var j={},I={},w={},B=0,D=this._changes;B<D.length;B+=1){var G=D[B],J=G[0],st=G[1],Ct=G[2];J.panDelta&&(j.panDelta=(j.panDelta||new t.Point(0,0))._add(J.panDelta)),J.zoomDelta&&(j.zoomDelta=(j.zoomDelta||0)+J.zoomDelta),J.bearingDelta&&(j.bearingDelta=(j.bearingDelta||0)+J.bearingDelta),J.pitchDelta&&(j.pitchDelta=(j.pitchDelta||0)+J.pitchDelta),J.around!==void 0&&(j.around=J.around),J.pinchAround!==void 0&&(j.pinchAround=J.pinchAround),J.noInertia&&(j.noInertia=J.noInertia),t.extend(I,st),t.extend(w,Ct)}this._updateMapTransform(j,I,w),this._changes=[]},Fe.prototype._updateMapTransform=function(j,I,w){var B=this._map,D=B.transform;if(!ce(j))return this._fireEvents(I,w,!0);var G=j.panDelta,J=j.zoomDelta,st=j.bearingDelta,Ct=j.pitchDelta,Ot=j.around,Ut=j.pinchAround;Ut!==void 0&&(Ot=Ut),B._stop(!0),Ot=Ot||B.transform.centerPoint;var Ht=D.pointLocation(G?Ot.sub(G):Ot);st&&(D.bearing+=st),Ct&&(D.pitch+=Ct),J&&(D.zoom+=J),D.setLocationAtPoint(Ht,Ot),this._map._update(),j.noInertia||this._inertia.record(j),this._fireEvents(I,w,!0)},Fe.prototype._fireEvents=function(j,I,w){var B=this,D=se(this._eventsInProgress),G=se(j),J={};for(var st in j)this._eventsInProgress[st]||(J[st+"start"]=j[st].originalEvent),this._eventsInProgress[st]=j[st];for(var Ct in!D&&G&&this._fireEvent("movestart",G.originalEvent),J)this._fireEvent(Ct,J[Ct]);for(var Ot in G&&this._fireEvent("move",G.originalEvent),j)this._fireEvent(Ot,j[Ot].originalEvent);var Ut,Ht={};for(var qt in this._eventsInProgress){var fe=this._eventsInProgress[qt],ye=fe.handlerName,De=fe.originalEvent;this._handlersById[ye].isActive()||(delete this._eventsInProgress[qt],Ht[qt+"end"]=Ut=I[ye]||De)}for(var Ie in Ht)this._fireEvent(Ie,Ht[Ie]);var Ve=se(this._eventsInProgress);if(w&&(D||G)&&!Ve){this._updatingCamera=!0;var qe=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),on=function(zn){return zn!==0&&-B._bearingSnap<zn&&zn<B._bearingSnap};qe?(on(qe.bearing||this._map.getBearing())&&(qe.bearing=0),this._map.easeTo(qe,{originalEvent:Ut})):(this._map.fire(new t.Event("moveend",{originalEvent:Ut})),on(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},Fe.prototype._fireEvent=function(j,I){this._map.fire(new t.Event(j,I?{originalEvent:I}:{}))},Fe.prototype._requestFrame=function(){var j=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(I){delete j._frameId,j.handleEvent(new re("renderFrame",{timeStamp:I})),j._applyChanges()})},Fe.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var Ke=function(j){function I(w,B){j.call(this),this._moving=!1,this._zooming=!1,this.transform=w,this._bearingSnap=B.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getCenter=function(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)},I.prototype.setCenter=function(w,B){return this.jumpTo({center:w},B)},I.prototype.panBy=function(w,B,D){return w=t.Point.convert(w).mult(-1),this.panTo(this.transform.center,t.extend({offset:w},B),D)},I.prototype.panTo=function(w,B,D){return this.easeTo(t.extend({center:w},B),D)},I.prototype.getZoom=function(){return this.transform.zoom},I.prototype.setZoom=function(w,B){return this.jumpTo({zoom:w},B),this},I.prototype.zoomTo=function(w,B,D){return this.easeTo(t.extend({zoom:w},B),D)},I.prototype.zoomIn=function(w,B){return this.zoomTo(this.getZoom()+1,w,B),this},I.prototype.zoomOut=function(w,B){return this.zoomTo(this.getZoom()-1,w,B),this},I.prototype.getBearing=function(){return this.transform.bearing},I.prototype.setBearing=function(w,B){return this.jumpTo({bearing:w},B),this},I.prototype.getPadding=function(){return this.transform.padding},I.prototype.setPadding=function(w,B){return this.jumpTo({padding:w},B),this},I.prototype.rotateTo=function(w,B,D){return this.easeTo(t.extend({bearing:w},B),D)},I.prototype.resetNorth=function(w,B){return this.rotateTo(0,t.extend({duration:1e3},w),B),this},I.prototype.resetNorthPitch=function(w,B){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},w),B),this},I.prototype.snapToNorth=function(w,B){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(w,B):this},I.prototype.getPitch=function(){return this.transform.pitch},I.prototype.setPitch=function(w,B){return this.jumpTo({pitch:w},B),this},I.prototype.cameraForBounds=function(w,B){w=t.LngLatBounds.convert(w);var D=B&&B.bearing||0;return this._cameraForBoxAndBearing(w.getNorthWest(),w.getSouthEast(),D,B)},I.prototype._cameraForBoxAndBearing=function(w,B,D,G){var J={top:0,bottom:0,right:0,left:0};if(typeof(G=t.extend({padding:J,offset:[0,0],maxZoom:this.transform.maxZoom},G)).padding=="number"){var st=G.padding;G.padding={top:st,bottom:st,right:st,left:st}}G.padding=t.extend(J,G.padding);var Ct=this.transform,Ot=Ct.padding,Ut=Ct.project(t.LngLat.convert(w)),Ht=Ct.project(t.LngLat.convert(B)),qt=Ut.rotate(-D*Math.PI/180),fe=Ht.rotate(-D*Math.PI/180),ye=new t.Point(Math.max(qt.x,fe.x),Math.max(qt.y,fe.y)),De=new t.Point(Math.min(qt.x,fe.x),Math.min(qt.y,fe.y)),Ie=ye.sub(De),Ve=(Ct.width-(Ot.left+Ot.right+G.padding.left+G.padding.right))/Ie.x,qe=(Ct.height-(Ot.top+Ot.bottom+G.padding.top+G.padding.bottom))/Ie.y;if(!(qe<0||Ve<0)){var on=Math.min(Ct.scaleZoom(Ct.scale*Math.min(Ve,qe)),G.maxZoom),tr=typeof G.offset.x=="number"?new t.Point(G.offset.x,G.offset.y):t.Point.convert(G.offset),zn=new t.Point((G.padding.left-G.padding.right)/2,(G.padding.top-G.padding.bottom)/2).rotate(D*Math.PI/180),cr=tr.add(zn).mult(Ct.scale/Ct.zoomScale(on));return{center:Ct.unproject(Ut.add(Ht).div(2).sub(cr)),zoom:on,bearing:D}}t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},I.prototype.fitBounds=function(w,B,D){return this._fitInternal(this.cameraForBounds(w,B),B,D)},I.prototype.fitScreenCoordinates=function(w,B,D,G,J){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.Point.convert(w)),this.transform.pointLocation(t.Point.convert(B)),D,G),G,J)},I.prototype._fitInternal=function(w,B,D){return w?(delete(B=t.extend(w,B)).padding,B.linear?this.easeTo(B,D):this.flyTo(B,D)):this},I.prototype.jumpTo=function(w,B){this.stop();var D=this.transform,G=!1,J=!1,st=!1;return"zoom"in w&&D.zoom!==+w.zoom&&(G=!0,D.zoom=+w.zoom),w.center!==void 0&&(D.center=t.LngLat.convert(w.center)),"bearing"in w&&D.bearing!==+w.bearing&&(J=!0,D.bearing=+w.bearing),"pitch"in w&&D.pitch!==+w.pitch&&(st=!0,D.pitch=+w.pitch),w.padding==null||D.isPaddingEqual(w.padding)||(D.padding=w.padding),this.fire(new t.Event("movestart",B)).fire(new t.Event("move",B)),G&&this.fire(new t.Event("zoomstart",B)).fire(new t.Event("zoom",B)).fire(new t.Event("zoomend",B)),J&&this.fire(new t.Event("rotatestart",B)).fire(new t.Event("rotate",B)).fire(new t.Event("rotateend",B)),st&&this.fire(new t.Event("pitchstart",B)).fire(new t.Event("pitch",B)).fire(new t.Event("pitchend",B)),this.fire(new t.Event("moveend",B))},I.prototype.easeTo=function(w,B){var D=this;this._stop(!1,w.easeId),((w=t.extend({offset:[0,0],duration:500,easing:t.ease},w)).animate===!1||!w.essential&&t.browser.prefersReducedMotion)&&(w.duration=0);var G=this.transform,J=this.getZoom(),st=this.getBearing(),Ct=this.getPitch(),Ot=this.getPadding(),Ut="zoom"in w?+w.zoom:J,Ht="bearing"in w?this._normalizeBearing(w.bearing,st):st,qt="pitch"in w?+w.pitch:Ct,fe="padding"in w?w.padding:G.padding,ye=t.Point.convert(w.offset),De=G.centerPoint.add(ye),Ie=G.pointLocation(De),Ve=t.LngLat.convert(w.center||Ie);this._normalizeCenter(Ve);var qe,on,tr=G.project(Ie),zn=G.project(Ve).sub(tr),cr=G.zoomScale(Ut-J);w.around&&(qe=t.LngLat.convert(w.around),on=G.locationPoint(qe));var yr={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Ut!==J,this._rotating=this._rotating||st!==Ht,this._pitching=this._pitching||qt!==Ct,this._padding=!G.isPaddingEqual(fe),this._easeId=w.easeId,this._prepareEase(B,w.noMoveStart,yr),this._ease(function(Jr){if(D._zooming&&(G.zoom=t.number(J,Ut,Jr)),D._rotating&&(G.bearing=t.number(st,Ht,Jr)),D._pitching&&(G.pitch=t.number(Ct,qt,Jr)),D._padding&&(G.interpolatePadding(Ot,fe,Jr),De=G.centerPoint.add(ye)),qe)G.setLocationAtPoint(qe,on);else{var Wr=G.zoomScale(G.zoom-J),bi=Ut>J?Math.min(2,cr):Math.max(.5,cr),ji=Math.pow(bi,1-Jr),Hi=G.unproject(tr.add(zn.mult(Jr*ji)).mult(Wr));G.setLocationAtPoint(G.renderWorldCopies?Hi.wrap():Hi,De)}D._fireMoveEvents(B)},function(Jr){D._afterEase(B,Jr)},w),this},I.prototype._prepareEase=function(w,B,D){D===void 0&&(D={}),this._moving=!0,B||D.moving||this.fire(new t.Event("movestart",w)),this._zooming&&!D.zooming&&this.fire(new t.Event("zoomstart",w)),this._rotating&&!D.rotating&&this.fire(new t.Event("rotatestart",w)),this._pitching&&!D.pitching&&this.fire(new t.Event("pitchstart",w))},I.prototype._fireMoveEvents=function(w){this.fire(new t.Event("move",w)),this._zooming&&this.fire(new t.Event("zoom",w)),this._rotating&&this.fire(new t.Event("rotate",w)),this._pitching&&this.fire(new t.Event("pitch",w))},I.prototype._afterEase=function(w,B){if(!this._easeId||!B||this._easeId!==B){delete this._easeId;var D=this._zooming,G=this._rotating,J=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,D&&this.fire(new t.Event("zoomend",w)),G&&this.fire(new t.Event("rotateend",w)),J&&this.fire(new t.Event("pitchend",w)),this.fire(new t.Event("moveend",w))}},I.prototype.flyTo=function(w,B){var D=this;if(!w.essential&&t.browser.prefersReducedMotion){var G=t.pick(w,["center","zoom","bearing","pitch","around"]);return this.jumpTo(G,B)}this.stop(),w=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},w);var J=this.transform,st=this.getZoom(),Ct=this.getBearing(),Ot=this.getPitch(),Ut=this.getPadding(),Ht="zoom"in w?t.clamp(+w.zoom,J.minZoom,J.maxZoom):st,qt="bearing"in w?this._normalizeBearing(w.bearing,Ct):Ct,fe="pitch"in w?+w.pitch:Ot,ye="padding"in w?w.padding:J.padding,De=J.zoomScale(Ht-st),Ie=t.Point.convert(w.offset),Ve=J.centerPoint.add(Ie),qe=J.pointLocation(Ve),on=t.LngLat.convert(w.center||qe);this._normalizeCenter(on);var tr=J.project(qe),zn=J.project(on).sub(tr),cr=w.curve,yr=Math.max(J.width,J.height),Jr=yr/De,Wr=zn.mag();if("minZoom"in w){var bi=t.clamp(Math.min(w.minZoom,st,Ht),J.minZoom,J.maxZoom),ji=yr/J.zoomScale(bi-st);cr=Math.sqrt(ji/Wr*2)}var Hi=cr*cr;function Ji(ua){var Ba=(Jr*Jr-yr*yr+(ua?-1:1)*Hi*Hi*Wr*Wr)/(2*(ua?Jr:yr)*Hi*Wr);return Math.log(Math.sqrt(Ba*Ba+1)-Ba)}function Pa(ua){return(Math.exp(ua)-Math.exp(-ua))/2}function ja(ua){return(Math.exp(ua)+Math.exp(-ua))/2}var Fi=Ji(0),va=function(Ba){return ja(Fi)/ja(Fi+cr*Ba)},ya=function(Ba){return yr*((ja(Fi)*(Pa(Za=Fi+cr*Ba)/ja(Za))-Pa(Fi))/Hi)/Wr;var Za},Yi=(Ji(1)-Fi)/cr;if(Math.abs(Wr)<1e-6||!isFinite(Yi)){if(Math.abs(yr-Jr)<1e-6)return this.easeTo(w,B);var Aa=Jr<yr?-1:1;Yi=Math.abs(Math.log(Jr/yr))/cr,ya=function(){return 0},va=function(Ba){return Math.exp(Aa*cr*Ba)}}return w.duration="duration"in w?+w.duration:1e3*Yi/("screenSpeed"in w?+w.screenSpeed/cr:+w.speed),w.maxDuration&&w.duration>w.maxDuration&&(w.duration=0),this._zooming=!0,this._rotating=Ct!==qt,this._pitching=fe!==Ot,this._padding=!J.isPaddingEqual(ye),this._prepareEase(B,!1),this._ease(function(ua){var Ba=ua*Yi,Za=1/va(Ba);J.zoom=ua===1?Ht:st+J.scaleZoom(Za),D._rotating&&(J.bearing=t.number(Ct,qt,ua)),D._pitching&&(J.pitch=t.number(Ot,fe,ua)),D._padding&&(J.interpolatePadding(Ut,ye,ua),Ve=J.centerPoint.add(Ie));var os=ua===1?on:J.unproject(tr.add(zn.mult(ya(Ba))).mult(Za));J.setLocationAtPoint(J.renderWorldCopies?os.wrap():os,Ve),D._fireMoveEvents(B)},function(){return D._afterEase(B)},w),this},I.prototype.isEasing=function(){return!!this._easeFrameId},I.prototype.stop=function(){return this._stop()},I.prototype._stop=function(w,B){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var D=this._onEaseEnd;delete this._onEaseEnd,D.call(this,B)}if(!w){var G=this.handlers;G&&G.stop(!1)}return this},I.prototype._ease=function(w,B,D){D.animate===!1||D.duration===0?(w(1),B()):(this._easeStart=t.browser.now(),this._easeOptions=D,this._onEaseFrame=w,this._onEaseEnd=B,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},I.prototype._renderFrameCallback=function(){var w=Math.min((t.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(w)),w<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},I.prototype._normalizeBearing=function(w,B){w=t.wrap(w,-180,180);var D=Math.abs(w-B);return Math.abs(w-360-B)<D&&(w-=360),Math.abs(w+360-B)<D&&(w+=360),w},I.prototype._normalizeCenter=function(w){var B=this.transform;if(B.renderWorldCopies&&!B.lngRange){var D=w.lng-B.center.lng;w.lng+=D>180?-360:D<-180?360:0}},I}(t.Evented),rn=function(I){I===void 0&&(I={}),this.options=I,t.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};rn.prototype.getDefaultPosition=function(){return"bottom-right"},rn.prototype.onAdd=function(j){var I=this.options&&this.options.compact;return this._map=j,this._container=s.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=s.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=s.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),I&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),I===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},rn.prototype.onRemove=function(){s.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},rn.prototype._setElementTitle=function(j,I){var w=this._map._getUIString("AttributionControl."+I);j.title=w,j.setAttribute("aria-label",w)},rn.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},rn.prototype._updateEditLink=function(){var j=this._editLink;j||(j=this._editLink=this._container.querySelector(".mapbox-improve-map"));var I=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||t.config.ACCESS_TOKEN}];if(j){var w=I.reduce(function(B,D,G){return D.value&&(B+=D.key+"="+D.value+(G<I.length-1?"&":"")),B},"?");j.href=t.config.FEEDBACK_URL+"/"+w+(this._map._hash?this._map._hash.getHashString(!0):""),j.rel="noopener nofollow",this._setElementTitle(j,"MapFeedback")}},rn.prototype._updateData=function(j){!j||j.sourceDataType!=="metadata"&&j.sourceDataType!=="visibility"&&j.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},rn.prototype._updateAttributions=function(){if(this._map.style){var j=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?j=j.concat(this.options.customAttribution.map(function(st){return typeof st!="string"?"":st})):typeof this.options.customAttribution=="string"&&j.push(this.options.customAttribution)),this._map.style.stylesheet){var I=this._map.style.stylesheet;this.styleOwner=I.owner,this.styleId=I.id}var w=this._map.style.sourceCaches;for(var B in w){var D=w[B];if(D.used){var G=D.getSource();G.attribution&&j.indexOf(G.attribution)<0&&j.push(G.attribution)}}j.sort(function(st,Ct){return st.length-Ct.length});var J=(j=j.filter(function(st,Ct){for(var Ot=Ct+1;Ot<j.length;Ot++)if(j[Ot].indexOf(st)>=0)return!1;return!0})).join(" | ");J!==this._attribHTML&&(this._attribHTML=J,j.length?(this._innerContainer.innerHTML=J,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},rn.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var Je=function(){t.bindAll(["_updateLogo"],this),t.bindAll(["_updateCompact"],this)};Je.prototype.onAdd=function(j){this._map=j,this._container=s.create("div","mapboxgl-ctrl");var I=s.create("a","mapboxgl-ctrl-logo");return I.target="_blank",I.rel="noopener nofollow",I.href="https://www.mapbox.com/",I.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),I.setAttribute("rel","noopener nofollow"),this._container.appendChild(I),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Je.prototype.onRemove=function(){s.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Je.prototype.getDefaultPosition=function(){return"bottom-left"},Je.prototype._updateLogo=function(j){j&&j.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},Je.prototype._logoRequired=function(){if(this._map.style){var j=this._map.style.sourceCaches;for(var I in j)if(j[I].getSource().mapbox_logo)return!0;return!1}},Je.prototype._updateCompact=function(){var j=this._container.children;if(j.length){var I=j[0];this._map.getCanvasContainer().offsetWidth<250?I.classList.add("mapboxgl-compact"):I.classList.remove("mapboxgl-compact")}};var vn=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};vn.prototype.add=function(j){var I=++this._id;return this._queue.push({callback:j,id:I,cancelled:!1}),I},vn.prototype.remove=function(j){for(var I=this._currentlyRunning,w=0,B=I?this._queue.concat(I):this._queue;w<B.length;w+=1){var D=B[w];if(D.id===j)return void(D.cancelled=!0)}},vn.prototype.run=function(j){j===void 0&&(j=0);var I=this._currentlyRunning=this._queue;this._queue=[];for(var w=0,B=I;w<B.length;w+=1){var D=B[w];if(!D.cancelled&&(D.callback(j),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},vn.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var hn={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Jn=t.window.HTMLImageElement,Vn=t.window.HTMLElement,Zn=t.window.ImageBitmap,Wn={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},lr=function(j){function I(B){var D=this;if((B=t.extend({},Wn,B)).minZoom!=null&&B.maxZoom!=null&&B.minZoom>B.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(B.minPitch!=null&&B.maxPitch!=null&&B.minPitch>B.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(B.minPitch!=null&&B.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(B.maxPitch!=null&&B.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var G=new Na(B.minZoom,B.maxZoom,B.minPitch,B.maxPitch,B.renderWorldCopies);if(j.call(this,G,B),this._interactive=B.interactive,this._maxTileCacheSize=B.maxTileCacheSize,this._failIfMajorPerformanceCaveat=B.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=B.preserveDrawingBuffer,this._antialias=B.antialias,this._trackResize=B.trackResize,this._bearingSnap=B.bearingSnap,this._refreshExpiredTiles=B.refreshExpiredTiles,this._fadeDuration=B.fadeDuration,this._crossSourceCollisions=B.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=B.collectResourceTiming,this._renderTaskQueue=new vn,this._controls=[],this._mapId=t.uniqueId(),this._locale=t.extend({},hn,B.locale),this._clickTolerance=B.clickTolerance,this._requestManager=new t.RequestManager(B.transformRequest,B.accessToken),typeof B.container=="string"){if(this._container=t.window.document.getElementById(B.container),!this._container)throw new Error("Container '"+B.container+"' not found.")}else{if(!(B.container instanceof Vn))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=B.container}if(B.maxBounds&&this.setMaxBounds(B.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return D._update(!1)}),this.on("moveend",function(){return D._update(!1)}),this.on("zoom",function(){return D._update(!0)}),t.window!==void 0&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1),t.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Fe(this,B),this._hash=B.hash&&new Us(typeof B.hash=="string"&&B.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:B.center,zoom:B.zoom,bearing:B.bearing,pitch:B.pitch}),B.bounds&&(this.resize(),this.fitBounds(B.bounds,t.extend({},B.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=B.localIdeographFontFamily,B.style&&this.setStyle(B.style,{localIdeographFontFamily:B.localIdeographFontFamily}),B.attributionControl&&this.addControl(new rn({customAttribution:B.customAttribution})),this.addControl(new Je,B.logoPosition),this.on("style.load",function(){D.transform.unmodified&&D.jumpTo(D.style.stylesheet)}),this.on("data",function(J){D._update(J.dataType==="style"),D.fire(new t.Event(J.dataType+"data",J))}),this.on("dataloading",function(J){D.fire(new t.Event(J.dataType+"dataloading",J))})}j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I;var w={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return I.prototype._getMapId=function(){return this._mapId},I.prototype.addControl=function(B,D){if(D===void 0&&(D=B.getDefaultPosition?B.getDefaultPosition():"top-right"),!B||!B.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var G=B.onAdd(this);this._controls.push(B);var J=this._controlPositions[D];return D.indexOf("bottom")!==-1?J.insertBefore(G,J.firstChild):J.appendChild(G),this},I.prototype.removeControl=function(B){if(!B||!B.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var D=this._controls.indexOf(B);return D>-1&&this._controls.splice(D,1),B.onRemove(this),this},I.prototype.hasControl=function(B){return this._controls.indexOf(B)>-1},I.prototype.resize=function(B){var D=this._containerDimensions(),G=D[0],J=D[1];this._resizeCanvas(G,J),this.transform.resize(G,J),this.painter.resize(G,J);var st=!this._moving;return st&&(this.stop(),this.fire(new t.Event("movestart",B)).fire(new t.Event("move",B))),this.fire(new t.Event("resize",B)),st&&this.fire(new t.Event("moveend",B)),this},I.prototype.getBounds=function(){return this.transform.getBounds()},I.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},I.prototype.setMaxBounds=function(B){return this.transform.setMaxBounds(t.LngLatBounds.convert(B)),this._update()},I.prototype.setMinZoom=function(B){if((B=B==null?-2:B)>=-2&&B<=this.transform.maxZoom)return this.transform.minZoom=B,this._update(),this.getZoom()<B&&this.setZoom(B),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},I.prototype.getMinZoom=function(){return this.transform.minZoom},I.prototype.setMaxZoom=function(B){if((B=B==null?22:B)>=this.transform.minZoom)return this.transform.maxZoom=B,this._update(),this.getZoom()>B&&this.setZoom(B),this;throw new Error("maxZoom must be greater than the current minZoom")},I.prototype.getMaxZoom=function(){return this.transform.maxZoom},I.prototype.setMinPitch=function(B){if((B=B==null?0:B)<0)throw new Error("minPitch must be greater than or equal to 0");if(B>=0&&B<=this.transform.maxPitch)return this.transform.minPitch=B,this._update(),this.getPitch()<B&&this.setPitch(B),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},I.prototype.getMinPitch=function(){return this.transform.minPitch},I.prototype.setMaxPitch=function(B){if((B=B==null?60:B)>60)throw new Error("maxPitch must be less than or equal to 60");if(B>=this.transform.minPitch)return this.transform.maxPitch=B,this._update(),this.getPitch()>B&&this.setPitch(B),this;throw new Error("maxPitch must be greater than the current minPitch")},I.prototype.getMaxPitch=function(){return this.transform.maxPitch},I.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},I.prototype.setRenderWorldCopies=function(B){return this.transform.renderWorldCopies=B,this._update()},I.prototype.project=function(B){return this.transform.locationPoint(t.LngLat.convert(B))},I.prototype.unproject=function(B){return this.transform.pointLocation(t.Point.convert(B))},I.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},I.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},I.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},I.prototype._createDelegatedListener=function(B,D,G){var J,st=this;if(B==="mouseenter"||B==="mouseover"){var Ct=!1;return{layer:D,listener:G,delegates:{mousemove:function(Ht){var qt=st.getLayer(D)?st.queryRenderedFeatures(Ht.point,{layers:[D]}):[];qt.length?Ct||(Ct=!0,G.call(st,new Qo(B,st,Ht.originalEvent,{features:qt}))):Ct=!1},mouseout:function(){Ct=!1}}}}if(B==="mouseleave"||B==="mouseout"){var Ot=!1;return{layer:D,listener:G,delegates:{mousemove:function(Ht){(st.getLayer(D)?st.queryRenderedFeatures(Ht.point,{layers:[D]}):[]).length?Ot=!0:Ot&&(Ot=!1,G.call(st,new Qo(B,st,Ht.originalEvent)))},mouseout:function(Ht){Ot&&(Ot=!1,G.call(st,new Qo(B,st,Ht.originalEvent)))}}}}return{layer:D,listener:G,delegates:(J={},J[B]=function(Ut){var Ht=st.getLayer(D)?st.queryRenderedFeatures(Ut.point,{layers:[D]}):[];Ht.length&&(Ut.features=Ht,G.call(st,Ut),delete Ut.features)},J)}},I.prototype.on=function(B,D,G){if(G===void 0)return j.prototype.on.call(this,B,D);var J=this._createDelegatedListener(B,D,G);for(var st in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[B]=this._delegatedListeners[B]||[],this._delegatedListeners[B].push(J),J.delegates)this.on(st,J.delegates[st]);return this},I.prototype.once=function(B,D,G){if(G===void 0)return j.prototype.once.call(this,B,D);var J=this._createDelegatedListener(B,D,G);for(var st in J.delegates)this.once(st,J.delegates[st]);return this},I.prototype.off=function(B,D,G){var J=this;return G===void 0?j.prototype.off.call(this,B,D):(this._delegatedListeners&&this._delegatedListeners[B]&&function(st){for(var Ct=st[B],Ot=0;Ot<Ct.length;Ot++){var Ut=Ct[Ot];if(Ut.layer===D&&Ut.listener===G){for(var Ht in Ut.delegates)J.off(Ht,Ut.delegates[Ht]);return Ct.splice(Ot,1),J}}}(this._delegatedListeners),this)},I.prototype.queryRenderedFeatures=function(B,D){if(!this.style)return[];var G;if(D!==void 0||B===void 0||B instanceof t.Point||Array.isArray(B)||(D=B,B=void 0),D=D||{},(B=B||[[0,0],[this.transform.width,this.transform.height]])instanceof t.Point||typeof B[0]=="number")G=[t.Point.convert(B)];else{var J=t.Point.convert(B[0]),st=t.Point.convert(B[1]);G=[J,new t.Point(st.x,J.y),st,new t.Point(J.x,st.y),J]}return this.style.queryRenderedFeatures(G,D,this.transform)},I.prototype.querySourceFeatures=function(B,D){return this.style.querySourceFeatures(B,D)},I.prototype.setStyle=function(B,D){return(D=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},D)).diff!==!1&&D.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&B?(this._diffStyle(B,D),this):(this._localIdeographFontFamily=D.localIdeographFontFamily,this._updateStyle(B,D))},I.prototype._getUIString=function(B){var D=this._locale[B];if(D==null)throw new Error("Missing UI string '"+B+"'");return D},I.prototype._updateStyle=function(B,D){return this.style&&(this.style.setEventedParent(null),this.style._remove()),B?(this.style=new Co(this,D||{}),this.style.setEventedParent(this,{style:this.style}),typeof B=="string"?this.style.loadURL(B):this.style.loadJSON(B),this):(delete this.style,this)},I.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Co(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},I.prototype._diffStyle=function(B,D){var G=this;if(typeof B=="string"){var J=this._requestManager.normalizeStyleURL(B),st=this._requestManager.transformRequest(J,t.ResourceType.Style);t.getJSON(st,function(Ct,Ot){Ct?G.fire(new t.ErrorEvent(Ct)):Ot&&G._updateDiff(Ot,D)})}else typeof B=="object"&&this._updateDiff(B,D)},I.prototype._updateDiff=function(B,D){try{this.style.setState(B)&&this._update(!0)}catch(G){t.warnOnce("Unable to perform style diff: "+(G.message||G.error||G)+".  Rebuilding the style from scratch."),this._updateStyle(B,D)}},I.prototype.getStyle=function(){if(this.style)return this.style.serialize()},I.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")},I.prototype.addSource=function(B,D){return this._lazyInitEmptyStyle(),this.style.addSource(B,D),this._update(!0)},I.prototype.isSourceLoaded=function(B){var D=this.style&&this.style.sourceCaches[B];if(D!==void 0)return D.loaded();this.fire(new t.ErrorEvent(new Error("There is no source with ID '"+B+"'")))},I.prototype.areTilesLoaded=function(){var B=this.style&&this.style.sourceCaches;for(var D in B){var G=B[D]._tiles;for(var J in G){var st=G[J];if(st.state!=="loaded"&&st.state!=="errored")return!1}}return!0},I.prototype.addSourceType=function(B,D,G){return this._lazyInitEmptyStyle(),this.style.addSourceType(B,D,G)},I.prototype.removeSource=function(B){return this.style.removeSource(B),this._update(!0)},I.prototype.getSource=function(B){return this.style.getSource(B)},I.prototype.addImage=function(B,D,G){G===void 0&&(G={});var J=G.pixelRatio;J===void 0&&(J=1);var st=G.sdf;st===void 0&&(st=!1);var Ct=G.stretchX,Ot=G.stretchY,Ut=G.content;if(this._lazyInitEmptyStyle(),D instanceof Jn||Zn&&D instanceof Zn){var Ht=t.browser.getImageData(D);this.style.addImage(B,{data:new t.RGBAImage({width:Ht.width,height:Ht.height},Ht.data),pixelRatio:J,stretchX:Ct,stretchY:Ot,content:Ut,sdf:st,version:0})}else{if(D.width===void 0||D.height===void 0)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var qt=D;this.style.addImage(B,{data:new t.RGBAImage({width:D.width,height:D.height},new Uint8Array(D.data)),pixelRatio:J,stretchX:Ct,stretchY:Ot,content:Ut,sdf:st,version:0,userImage:qt}),qt.onAdd&&qt.onAdd(this,B)}},I.prototype.updateImage=function(B,D){var G=this.style.getImage(B);if(!G)return this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var J=D instanceof Jn||Zn&&D instanceof Zn?t.browser.getImageData(D):D,st=J.width,Ct=J.height,Ot=J.data;return st===void 0||Ct===void 0?this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):st!==G.data.width||Ct!==G.data.height?this.fire(new t.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(G.data.replace(Ot,!(D instanceof Jn||Zn&&D instanceof Zn)),void this.style.updateImage(B,G))},I.prototype.hasImage=function(B){return B?!!this.style.getImage(B):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)},I.prototype.removeImage=function(B){this.style.removeImage(B)},I.prototype.loadImage=function(B,D){t.getImage(this._requestManager.transformRequest(B,t.ResourceType.Image),D)},I.prototype.listImages=function(){return this.style.listImages()},I.prototype.addLayer=function(B,D){return this._lazyInitEmptyStyle(),this.style.addLayer(B,D),this._update(!0)},I.prototype.moveLayer=function(B,D){return this.style.moveLayer(B,D),this._update(!0)},I.prototype.removeLayer=function(B){return this.style.removeLayer(B),this._update(!0)},I.prototype.getLayer=function(B){return this.style.getLayer(B)},I.prototype.setLayerZoomRange=function(B,D,G){return this.style.setLayerZoomRange(B,D,G),this._update(!0)},I.prototype.setFilter=function(B,D,G){return G===void 0&&(G={}),this.style.setFilter(B,D,G),this._update(!0)},I.prototype.getFilter=function(B){return this.style.getFilter(B)},I.prototype.setPaintProperty=function(B,D,G,J){return J===void 0&&(J={}),this.style.setPaintProperty(B,D,G,J),this._update(!0)},I.prototype.getPaintProperty=function(B,D){return this.style.getPaintProperty(B,D)},I.prototype.setLayoutProperty=function(B,D,G,J){return J===void 0&&(J={}),this.style.setLayoutProperty(B,D,G,J),this._update(!0)},I.prototype.getLayoutProperty=function(B,D){return this.style.getLayoutProperty(B,D)},I.prototype.setLight=function(B,D){return D===void 0&&(D={}),this._lazyInitEmptyStyle(),this.style.setLight(B,D),this._update(!0)},I.prototype.getLight=function(){return this.style.getLight()},I.prototype.setFeatureState=function(B,D){return this.style.setFeatureState(B,D),this._update()},I.prototype.removeFeatureState=function(B,D){return this.style.removeFeatureState(B,D),this._update()},I.prototype.getFeatureState=function(B){return this.style.getFeatureState(B)},I.prototype.getContainer=function(){return this._container},I.prototype.getCanvasContainer=function(){return this._canvasContainer},I.prototype.getCanvas=function(){return this._canvas},I.prototype._containerDimensions=function(){var B=0,D=0;return this._container&&(B=this._container.clientWidth||400,D=this._container.clientHeight||300),[B,D]},I.prototype._detectMissingCSS=function(){t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},I.prototype._setupContainer=function(){var B=this._container;B.classList.add("mapboxgl-map"),(this._missingCSSCanary=s.create("div","mapboxgl-canary",B)).style.visibility="hidden",this._detectMissingCSS();var D=this._canvasContainer=s.create("div","mapboxgl-canvas-container",B);this._interactive&&D.classList.add("mapboxgl-interactive"),this._canvas=s.create("canvas","mapboxgl-canvas",D),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var G=this._containerDimensions();this._resizeCanvas(G[0],G[1]);var J=this._controlContainer=s.create("div","mapboxgl-control-container",B),st=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(Ct){st[Ct]=s.create("div","mapboxgl-ctrl-"+Ct,J)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},I.prototype._resizeCanvas=function(B,D){var G=t.browser.devicePixelRatio||1;this._canvas.width=G*B,this._canvas.height=G*D,this._canvas.style.width=B+"px",this._canvas.style.height=D+"px"},I.prototype._setupPainter=function(){var B=t.extend({},l.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),D=this._canvas.getContext("webgl",B)||this._canvas.getContext("experimental-webgl",B);D?(this.painter=new go(D,this.transform),t.webpSupported.testSupport(D)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))},I.prototype._contextLost=function(B){B.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:B}))},I.prototype._contextRestored=function(B){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:B}))},I.prototype._onMapScroll=function(B){if(B.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},I.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},I.prototype._update=function(B){return this.style?(this._styleDirty=this._styleDirty||B,this._sourcesDirty=!0,this.triggerRepaint(),this):this},I.prototype._requestRenderFrame=function(B){return this._update(),this._renderTaskQueue.add(B)},I.prototype._cancelRenderFrame=function(B){this._renderTaskQueue.remove(B)},I.prototype._render=function(B){var D,G=this,J=0,st=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(D=st.createQueryEXT(),st.beginQueryEXT(st.TIME_ELAPSED_EXT,D),J=t.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(B),!this._removed){var Ct=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Ot=this.transform.zoom,Ut=t.browser.now();this.style.zoomHistory.update(Ot,Ut);var Ht=new t.EvaluationParameters(Ot,{now:Ut,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),qt=Ht.crossFadingFactor();qt===1&&qt===this._crossFadingFactor||(Ct=!0,this._crossFadingFactor=qt),this.style.update(Ht)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||Ct)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var fe=t.browser.now()-J;st.endQueryEXT(st.TIME_ELAPSED_EXT,D),setTimeout(function(){var Ie=st.getQueryObjectEXT(D,st.QUERY_RESULT_EXT)/1e6;st.deleteQueryEXT(D),G.fire(new t.Event("gpu-timing-frame",{cpuTime:fe,gpuTime:Ie}))},50)}if(this.listens("gpu-timing-layer")){var ye=this.painter.collectGpuTimers();setTimeout(function(){var Ie=G.painter.queryGpuTimers(ye);G.fire(new t.Event("gpu-timing-layer",{layerTimes:Ie}))},50)}var De=this._sourcesDirty||this._styleDirty||this._placementDirty;return De||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new t.Event("idle")),!this._loaded||this._fullyLoaded||De||(this._fullyLoaded=!0),this}},I.prototype.remove=function(){this._hash&&this._hash.remove();for(var B=0,D=this._controls;B<D.length;B+=1)D[B].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),t.window!==void 0&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("orientationchange",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1));var G=this.painter.context.gl.getExtension("WEBGL_lose_context");G&&G.loseContext(),xr(this._canvasContainer),xr(this._controlContainer),xr(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new t.Event("remove"))},I.prototype.triggerRepaint=function(){var B=this;this.style&&!this._frame&&(this._frame=t.browser.frame(function(D){B._frame=null,B._render(D)}))},I.prototype._onWindowOnline=function(){this._update()},I.prototype._onWindowResize=function(B){this._trackResize&&this.resize({originalEvent:B})._update()},w.showTileBoundaries.get=function(){return!!this._showTileBoundaries},w.showTileBoundaries.set=function(B){this._showTileBoundaries!==B&&(this._showTileBoundaries=B,this._update())},w.showPadding.get=function(){return!!this._showPadding},w.showPadding.set=function(B){this._showPadding!==B&&(this._showPadding=B,this._update())},w.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},w.showCollisionBoxes.set=function(B){this._showCollisionBoxes!==B&&(this._showCollisionBoxes=B,B?this.style._generateCollisionBoxes():this._update())},w.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},w.showOverdrawInspector.set=function(B){this._showOverdrawInspector!==B&&(this._showOverdrawInspector=B,this._update())},w.repaint.get=function(){return!!this._repaint},w.repaint.set=function(B){this._repaint!==B&&(this._repaint=B,this.triggerRepaint())},w.vertices.get=function(){return!!this._vertices},w.vertices.set=function(B){this._vertices=B,this._update()},I.prototype._setCacheLimits=function(B,D){t.setCacheLimits(B,D)},w.version.get=function(){return t.version},Object.defineProperties(I.prototype,w),I}(Ke);function xr(j){j.parentNode&&j.parentNode.removeChild(j)}var Vr={showCompass:!0,showZoom:!0,visualizePitch:!1},yi=function(I){var w=this;this.options=t.extend({},Vr,I),this._container=s.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(B){return B.preventDefault()}),this.options.showZoom&&(t.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(B){return w._map.zoomIn({},{originalEvent:B})}),s.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(B){return w._map.zoomOut({},{originalEvent:B})}),s.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(B){w.options.visualizePitch?w._map.resetNorthPitch({},{originalEvent:B}):w._map.resetNorth({},{originalEvent:B})}),this._compassIcon=s.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};yi.prototype._updateZoomButtons=function(){var j=this._map.getZoom(),I=j===this._map.getMaxZoom(),w=j===this._map.getMinZoom();this._zoomInButton.disabled=I,this._zoomOutButton.disabled=w,this._zoomInButton.setAttribute("aria-disabled",I.toString()),this._zoomOutButton.setAttribute("aria-disabled",w.toString())},yi.prototype._rotateCompassArrow=function(){var j=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=j},yi.prototype.onAdd=function(j){return this._map=j,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Br(this._map,this._compass,this.options.visualizePitch)),this._container},yi.prototype.onRemove=function(){s.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},yi.prototype._createButton=function(j,I){var w=s.create("button",j,this._container);return w.type="button",w.addEventListener("click",I),w},yi.prototype._setButtonTitle=function(j,I){var w=this._map._getUIString("NavigationControl."+I);j.title=w,j.setAttribute("aria-label",w)};var Br=function(I,w,B){B===void 0&&(B=!1),this._clickTolerance=10,this.element=w,this.mouseRotate=new Iu({clickTolerance:I.dragRotate._mouseRotate._clickTolerance}),this.map=I,B&&(this.mousePitch=new Lu({clickTolerance:I.dragRotate._mousePitch._clickTolerance})),t.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),s.addEventListener(w,"mousedown",this.mousedown),s.addEventListener(w,"touchstart",this.touchstart,{passive:!1}),s.addEventListener(w,"touchmove",this.touchmove),s.addEventListener(w,"touchend",this.touchend),s.addEventListener(w,"touchcancel",this.reset)};function si(j,I,w){if(j=new t.LngLat(j.lng,j.lat),I){var B=new t.LngLat(j.lng-360,j.lat),D=new t.LngLat(j.lng+360,j.lat),G=w.locationPoint(j).distSqr(I);w.locationPoint(B).distSqr(I)<G?j=B:w.locationPoint(D).distSqr(I)<G&&(j=D)}for(;Math.abs(j.lng-w.center.lng)>180;){var J=w.locationPoint(j);if(J.x>=0&&J.y>=0&&J.x<=w.width&&J.y<=w.height)break;j.lng>w.center.lng?j.lng-=360:j.lng+=360}return j}Br.prototype.down=function(j,I){this.mouseRotate.mousedown(j,I),this.mousePitch&&this.mousePitch.mousedown(j,I),s.disableDrag()},Br.prototype.move=function(j,I){var w=this.map,B=this.mouseRotate.mousemoveWindow(j,I);if(B&&B.bearingDelta&&w.setBearing(w.getBearing()+B.bearingDelta),this.mousePitch){var D=this.mousePitch.mousemoveWindow(j,I);D&&D.pitchDelta&&w.setPitch(w.getPitch()+D.pitchDelta)}},Br.prototype.off=function(){var j=this.element;s.removeEventListener(j,"mousedown",this.mousedown),s.removeEventListener(j,"touchstart",this.touchstart,{passive:!1}),s.removeEventListener(j,"touchmove",this.touchmove),s.removeEventListener(j,"touchend",this.touchend),s.removeEventListener(j,"touchcancel",this.reset),this.offTemp()},Br.prototype.offTemp=function(){s.enableDrag(),s.removeEventListener(t.window,"mousemove",this.mousemove),s.removeEventListener(t.window,"mouseup",this.mouseup)},Br.prototype.mousedown=function(j){this.down(t.extend({},j,{ctrlKey:!0,preventDefault:function(){return j.preventDefault()}}),s.mousePos(this.element,j)),s.addEventListener(t.window,"mousemove",this.mousemove),s.addEventListener(t.window,"mouseup",this.mouseup)},Br.prototype.mousemove=function(j){this.move(j,s.mousePos(this.element,j))},Br.prototype.mouseup=function(j){this.mouseRotate.mouseupWindow(j),this.mousePitch&&this.mousePitch.mouseupWindow(j),this.offTemp()},Br.prototype.touchstart=function(j){j.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=s.touchPos(this.element,j.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return j.preventDefault()}},this._startPos))},Br.prototype.touchmove=function(j){j.targetTouches.length!==1?this.reset():(this._lastPos=s.touchPos(this.element,j.targetTouches)[0],this.move({preventDefault:function(){return j.preventDefault()}},this._lastPos))},Br.prototype.touchend=function(j){j.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Br.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var gi={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Zi(j,I,w){var B=j.classList;for(var D in gi)B.remove("mapboxgl-"+w+"-anchor-"+D);B.add("mapboxgl-"+w+"-anchor-"+I)}var Li,Ma=function(j){function I(w,B){if(j.call(this),(w instanceof t.window.HTMLElement||B)&&(w=t.extend({element:w},B)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=w&&w.anchor||"center",this._color=w&&w.color||"#3FB1CE",this._scale=w&&w.scale||1,this._draggable=w&&w.draggable||!1,this._clickTolerance=w&&w.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=w&&w.rotation||0,this._rotationAlignment=w&&w.rotationAlignment||"auto",this._pitchAlignment=w&&w.pitchAlignment&&w.pitchAlignment!=="auto"?w.pitchAlignment:this._rotationAlignment,w&&w.element)this._element=w.element,this._offset=t.Point.convert(w&&w.offset||[0,0]);else{this._defaultMarker=!0,this._element=s.create("div"),this._element.setAttribute("aria-label","Map marker");var D=s.createNS("http://www.w3.org/2000/svg","svg");D.setAttributeNS(null,"display","block"),D.setAttributeNS(null,"height","41px"),D.setAttributeNS(null,"width","27px"),D.setAttributeNS(null,"viewBox","0 0 27 41");var G=s.createNS("http://www.w3.org/2000/svg","g");G.setAttributeNS(null,"stroke","none"),G.setAttributeNS(null,"stroke-width","1"),G.setAttributeNS(null,"fill","none"),G.setAttributeNS(null,"fill-rule","evenodd");var J=s.createNS("http://www.w3.org/2000/svg","g");J.setAttributeNS(null,"fill-rule","nonzero");var st=s.createNS("http://www.w3.org/2000/svg","g");st.setAttributeNS(null,"transform","translate(3.0, 29.0)"),st.setAttributeNS(null,"fill","#000000");for(var Ct=0,Ot=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];Ct<Ot.length;Ct+=1){var Ut=Ot[Ct],Ht=s.createNS("http://www.w3.org/2000/svg","ellipse");Ht.setAttributeNS(null,"opacity","0.04"),Ht.setAttributeNS(null,"cx","10.5"),Ht.setAttributeNS(null,"cy","5.80029008"),Ht.setAttributeNS(null,"rx",Ut.rx),Ht.setAttributeNS(null,"ry",Ut.ry),st.appendChild(Ht)}var qt=s.createNS("http://www.w3.org/2000/svg","g");qt.setAttributeNS(null,"fill",this._color);var fe=s.createNS("http://www.w3.org/2000/svg","path");fe.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),qt.appendChild(fe);var ye=s.createNS("http://www.w3.org/2000/svg","g");ye.setAttributeNS(null,"opacity","0.25"),ye.setAttributeNS(null,"fill","#000000");var De=s.createNS("http://www.w3.org/2000/svg","path");De.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),ye.appendChild(De);var Ie=s.createNS("http://www.w3.org/2000/svg","g");Ie.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Ie.setAttributeNS(null,"fill","#FFFFFF");var Ve=s.createNS("http://www.w3.org/2000/svg","g");Ve.setAttributeNS(null,"transform","translate(8.0, 8.0)");var qe=s.createNS("http://www.w3.org/2000/svg","circle");qe.setAttributeNS(null,"fill","#000000"),qe.setAttributeNS(null,"opacity","0.25"),qe.setAttributeNS(null,"cx","5.5"),qe.setAttributeNS(null,"cy","5.5"),qe.setAttributeNS(null,"r","5.4999962");var on=s.createNS("http://www.w3.org/2000/svg","circle");on.setAttributeNS(null,"fill","#FFFFFF"),on.setAttributeNS(null,"cx","5.5"),on.setAttributeNS(null,"cy","5.5"),on.setAttributeNS(null,"r","5.4999962"),Ve.appendChild(qe),Ve.appendChild(on),J.appendChild(st),J.appendChild(qt),J.appendChild(ye),J.appendChild(Ie),J.appendChild(Ve),D.appendChild(J),D.setAttributeNS(null,"height",41*this._scale+"px"),D.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(D),this._offset=t.Point.convert(w&&w.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(tr){tr.preventDefault()}),this._element.addEventListener("mousedown",function(tr){tr.preventDefault()}),Zi(this._element,this._anchor,"marker"),this._popup=null}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.addTo=function(w){return this.remove(),this._map=w,w.getCanvasContainer().appendChild(this._element),w.on("move",this._update),w.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},I.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),s.remove(this._element),this._popup&&this._popup.remove(),this},I.prototype.getLngLat=function(){return this._lngLat},I.prototype.setLngLat=function(w){return this._lngLat=t.LngLat.convert(w),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},I.prototype.getElement=function(){return this._element},I.prototype.setPopup=function(w){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),w){if(!("offset"in w.options)){var B=Math.sqrt(Math.pow(13.5,2)/2);w.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[B,-1*(24.6+B)],"bottom-right":[-B,-1*(24.6+B)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=w,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},I.prototype._onKeyPress=function(w){var B=w.code,D=w.charCode||w.keyCode;B!=="Space"&&B!=="Enter"&&D!==32&&D!==13||this.togglePopup()},I.prototype._onMapClick=function(w){var B=w.originalEvent.target,D=this._element;this._popup&&(B===D||D.contains(B))&&this.togglePopup()},I.prototype.getPopup=function(){return this._popup},I.prototype.togglePopup=function(){var w=this._popup;return w?(w.isOpen()?w.remove():w.addTo(this._map),this):this},I.prototype._update=function(w){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=si(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var B="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?B="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(B="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var D="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?D="rotateX(0deg)":this._pitchAlignment==="map"&&(D="rotateX("+this._map.getPitch()+"deg)"),w&&w.type!=="moveend"||(this._pos=this._pos.round()),s.setTransform(this._element,gi[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+D+" "+B)}},I.prototype.getOffset=function(){return this._offset},I.prototype.setOffset=function(w){return this._offset=t.Point.convert(w),this._update(),this},I.prototype._onMove=function(w){if(!this._isDragging){var B=this._clickTolerance||this._map._clickTolerance;this._isDragging=w.point.dist(this._pointerdownPos)>=B}this._isDragging&&(this._pos=w.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag")))},I.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new t.Event("dragend")),this._state="inactive"},I.prototype._addDragHandler=function(w){this._element.contains(w.originalEvent.target)&&(w.preventDefault(),this._positionDelta=w.point.sub(this._pos).add(this._offset),this._pointerdownPos=w.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},I.prototype.setDraggable=function(w){return this._draggable=!!w,this._map&&(w?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},I.prototype.isDraggable=function(){return this._draggable},I.prototype.setRotation=function(w){return this._rotation=w||0,this._update(),this},I.prototype.getRotation=function(){return this._rotation},I.prototype.setRotationAlignment=function(w){return this._rotationAlignment=w||"auto",this._update(),this},I.prototype.getRotationAlignment=function(){return this._rotationAlignment},I.prototype.setPitchAlignment=function(w){return this._pitchAlignment=w&&w!=="auto"?w:this._rotationAlignment,this._update(),this},I.prototype.getPitchAlignment=function(){return this._pitchAlignment},I}(t.Evented),ma={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},la=0,ri=!1,Ta=function(j){function I(w){j.call(this),this.options=t.extend({},ma,w),t.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.onAdd=function(w){var B;return this._map=w,this._container=s.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),B=this._setupUI,Li!==void 0?B(Li):t.window.navigator.permissions!==void 0?t.window.navigator.permissions.query({name:"geolocation"}).then(function(D){B(Li=D.state!=="denied")}):B(Li=!!t.window.navigator.geolocation),this._container},I.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),s.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,la=0,ri=!1},I.prototype._isOutOfMapMaxBounds=function(w){var B=this._map.getMaxBounds(),D=w.coords;return B&&(D.longitude<B.getWest()||D.longitude>B.getEast()||D.latitude<B.getSouth()||D.latitude>B.getNorth())},I.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},I.prototype._onSuccess=function(w){if(this._map){if(this._isOutOfMapMaxBounds(w))return this._setErrorState(),this.fire(new t.Event("outofmaxbounds",w)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=w,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(w),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(w),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",w)),this._finish()}},I.prototype._updateCamera=function(w){var B=new t.LngLat(w.coords.longitude,w.coords.latitude),D=w.coords.accuracy,G=this._map.getBearing(),J=t.extend({bearing:G},this.options.fitBoundsOptions);this._map.fitBounds(B.toBounds(D),J,{geolocateSource:!0})},I.prototype._updateMarker=function(w){if(w){var B=new t.LngLat(w.coords.longitude,w.coords.latitude);this._accuracyCircleMarker.setLngLat(B).addTo(this._map),this._userLocationDotMarker.setLngLat(B).addTo(this._map),this._accuracy=w.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},I.prototype._updateCircleRadius=function(){var w=this._map._container.clientHeight/2,B=this._map.unproject([0,w]),D=this._map.unproject([1,w]),G=B.distanceTo(D),J=Math.ceil(2*this._accuracy/G);this._circleElement.style.width=J+"px",this._circleElement.style.height=J+"px"},I.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},I.prototype._onError=function(w){if(this._map){if(this.options.trackUserLocation)if(w.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var B=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=B,this._geolocateButton.setAttribute("aria-label",B),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(w.code===3&&ri)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",w)),this._finish()}},I.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},I.prototype._setupUI=function(w){var B=this;if(this._container.addEventListener("contextmenu",function(J){return J.preventDefault()}),this._geolocateButton=s.create("button","mapboxgl-ctrl-geolocate",this._container),s.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",w===!1){t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var D=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=D,this._geolocateButton.setAttribute("aria-label",D)}else{var G=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=G,this._geolocateButton.setAttribute("aria-label",G)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=s.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Ma(this._dotElement),this._circleElement=s.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ma({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(J){J.geolocateSource||B._watchState!=="ACTIVE_LOCK"||J.originalEvent&&J.originalEvent.type==="resize"||(B._watchState="BACKGROUND",B._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),B._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),B.fire(new t.Event("trackuserlocationend")))})},I.prototype.trigger=function(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":la--,ri=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var w;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++la>1?(w={maximumAge:6e5,timeout:0},ri=!0):(w=this.options.positionOptions,ri=!1),this._geolocationWatchID=t.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,w)}}else t.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},I.prototype._clearWatch=function(){t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},I}(t.Evented),Ga={maxWidth:100,unit:"metric"},Ya=function(I){this.options=t.extend({},Ga,I),t.bindAll(["_onMove","setUnit"],this)};function Ii(j,I,w){var B=w&&w.maxWidth||100,D=j._container.clientHeight/2,G=j.unproject([0,D]),J=j.unproject([B,D]),st=G.distanceTo(J);if(w&&w.unit==="imperial"){var Ct=3.2808*st;Ct>5280?Da(I,B,Ct/5280,j._getUIString("ScaleControl.Miles")):Da(I,B,Ct,j._getUIString("ScaleControl.Feet"))}else w&&w.unit==="nautical"?Da(I,B,st/1852,j._getUIString("ScaleControl.NauticalMiles")):st>=1e3?Da(I,B,st/1e3,j._getUIString("ScaleControl.Kilometers")):Da(I,B,st,j._getUIString("ScaleControl.Meters"))}function Da(j,I,w,B){var D,G,J,st=(D=w,(G=Math.pow(10,(""+Math.floor(D)).length-1))*(J=(J=D/G)>=10?10:J>=5?5:J>=3?3:J>=2?2:J>=1?1:function(Ct){var Ot=Math.pow(10,Math.ceil(-Math.log(Ct)/Math.LN10));return Math.round(Ct*Ot)/Ot}(J)));j.style.width=I*(st/w)+"px",j.innerHTML=st+"&nbsp;"+B}Ya.prototype.getDefaultPosition=function(){return"bottom-left"},Ya.prototype._onMove=function(){Ii(this._map,this._container,this.options)},Ya.prototype.onAdd=function(j){return this._map=j,this._container=s.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",j.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Ya.prototype.onRemove=function(){s.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Ya.prototype.setUnit=function(j){this.options.unit=j,Ii(this._map,this._container,this.options)};var ho=function(I){this._fullscreen=!1,I&&I.container&&(I.container instanceof t.window.HTMLElement?this._container=I.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in t.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in t.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in t.window.document&&(this._fullscreenchange="MSFullscreenChange")};ho.prototype.onAdd=function(j){return this._map=j,this._container||(this._container=this._map.getContainer()),this._controlContainer=s.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},ho.prototype.onRemove=function(){s.remove(this._controlContainer),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},ho.prototype._checkFullscreenSupport=function(){return!!(t.window.document.fullscreenEnabled||t.window.document.mozFullScreenEnabled||t.window.document.msFullscreenEnabled||t.window.document.webkitFullscreenEnabled)},ho.prototype._setupUI=function(){var j=this._fullscreenButton=s.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);s.create("span","mapboxgl-ctrl-icon",j).setAttribute("aria-hidden",!0),j.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},ho.prototype._updateTitle=function(){var j=this._getTitle();this._fullscreenButton.setAttribute("aria-label",j),this._fullscreenButton.title=j},ho.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},ho.prototype._isFullscreen=function(){return this._fullscreen},ho.prototype._changeIcon=function(){(t.window.document.fullscreenElement||t.window.document.mozFullScreenElement||t.window.document.webkitFullscreenElement||t.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},ho.prototype._onClickFullscreen=function(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.mozCancelFullScreen?t.window.document.mozCancelFullScreen():t.window.document.msExitFullscreen?t.window.document.msExitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var js={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Is=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),Vu=function(j){function I(w){j.call(this),this.options=t.extend(Object.create(js),w),t.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.addTo=function(w){return this._map&&this.remove(),this._map=w,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new t.Event("open")),this},I.prototype.isOpen=function(){return!!this._map},I.prototype.remove=function(){return this._content&&s.remove(this._content),this._container&&(s.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new t.Event("close")),this},I.prototype.getLngLat=function(){return this._lngLat},I.prototype.setLngLat=function(w){return this._lngLat=t.LngLat.convert(w),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},I.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},I.prototype.getElement=function(){return this._container},I.prototype.setText=function(w){return this.setDOMContent(t.window.document.createTextNode(w))},I.prototype.setHTML=function(w){var B,D=t.window.document.createDocumentFragment(),G=t.window.document.createElement("body");for(G.innerHTML=w;B=G.firstChild;)D.appendChild(B);return this.setDOMContent(D)},I.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},I.prototype.setMaxWidth=function(w){return this.options.maxWidth=w,this._update(),this},I.prototype.setDOMContent=function(w){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=s.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(w),this._createCloseButton(),this._update(),this._focusFirstElement(),this},I.prototype.addClassName=function(w){this._container&&this._container.classList.add(w)},I.prototype.removeClassName=function(w){this._container&&this._container.classList.remove(w)},I.prototype.setOffset=function(w){return this.options.offset=w,this._update(),this},I.prototype.toggleClassName=function(w){if(this._container)return this._container.classList.toggle(w)},I.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=s.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},I.prototype._onMouseUp=function(w){this._update(w.point)},I.prototype._onMouseMove=function(w){this._update(w.point)},I.prototype._onDrag=function(w){this._update(w.point)},I.prototype._update=function(w){var B=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=s.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=s.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Ht){return B._container.classList.add(Ht)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=si(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||w)){var D=this._pos=this._trackPointer&&w?w:this._map.project(this._lngLat),G=this.options.anchor,J=function Ht(qt){if(qt){if(typeof qt=="number"){var fe=Math.round(Math.sqrt(.5*Math.pow(qt,2)));return{center:new t.Point(0,0),top:new t.Point(0,qt),"top-left":new t.Point(fe,fe),"top-right":new t.Point(-fe,fe),bottom:new t.Point(0,-qt),"bottom-left":new t.Point(fe,-fe),"bottom-right":new t.Point(-fe,-fe),left:new t.Point(qt,0),right:new t.Point(-qt,0)}}if(qt instanceof t.Point||Array.isArray(qt)){var ye=t.Point.convert(qt);return{center:ye,top:ye,"top-left":ye,"top-right":ye,bottom:ye,"bottom-left":ye,"bottom-right":ye,left:ye,right:ye}}return{center:t.Point.convert(qt.center||[0,0]),top:t.Point.convert(qt.top||[0,0]),"top-left":t.Point.convert(qt["top-left"]||[0,0]),"top-right":t.Point.convert(qt["top-right"]||[0,0]),bottom:t.Point.convert(qt.bottom||[0,0]),"bottom-left":t.Point.convert(qt["bottom-left"]||[0,0]),"bottom-right":t.Point.convert(qt["bottom-right"]||[0,0]),left:t.Point.convert(qt.left||[0,0]),right:t.Point.convert(qt.right||[0,0])}}return Ht(new t.Point(0,0))}(this.options.offset);if(!G){var st,Ct=this._container.offsetWidth,Ot=this._container.offsetHeight;st=D.y+J.bottom.y<Ot?["top"]:D.y>this._map.transform.height-Ot?["bottom"]:[],D.x<Ct/2?st.push("left"):D.x>this._map.transform.width-Ct/2&&st.push("right"),G=st.length===0?"bottom":st.join("-")}var Ut=D.add(J[G]).round();s.setTransform(this._container,gi[G]+" translate("+Ut.x+"px,"+Ut.y+"px)"),Zi(this._container,G,"popup")}},I.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var w=this._container.querySelector(Is);w&&w.focus()}},I.prototype._onClose=function(){this.remove()},I}(t.Evented),cu={version:t.version,supported:l,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:lr,NavigationControl:yi,GeolocateControl:Ta,AttributionControl:rn,ScaleControl:Ya,FullscreenControl:ho,Popup:Vu,Marker:Ma,Style:Co,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.Point,MercatorCoordinate:t.MercatorCoordinate,Evented:t.Evented,config:t.config,prewarm:function(){ln().acquire(En)},clearPrewarmedResources:function(){var I=Er;I&&(I.isPreloaded()&&I.numActive()===1?(I.release(En),Er=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(j){t.config.ACCESS_TOKEN=j},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(j){t.config.API_URL=j},get workerCount(){return Pn.workerCount},set workerCount(j){Pn.workerCount=j},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(j){t.config.MAX_PARALLEL_IMAGE_REQUESTS=j},clearStorage:function(I){t.clearTileCache(I)},workerUrl:""};return cu}),T})},"4cb6":function(Se,ft,L){"use strict";Object.defineProperty(ft,"__esModule",{value:!0}),ft.METADATA_KEY=void 0;var U=L("xfSm");ft.METADATA_KEY=U;var E=L("9Fde");Object.defineProperty(ft,"Container",{enumerable:!0,get:function(){return E.Container}});var T=L("FV85");Object.defineProperty(ft,"BindingScopeEnum",{enumerable:!0,get:function(){return T.BindingScopeEnum}}),Object.defineProperty(ft,"BindingTypeEnum",{enumerable:!0,get:function(){return T.BindingTypeEnum}}),Object.defineProperty(ft,"TargetTypeEnum",{enumerable:!0,get:function(){return T.TargetTypeEnum}});var e=L("dxzI");Object.defineProperty(ft,"AsyncContainerModule",{enumerable:!0,get:function(){return e.AsyncContainerModule}}),Object.defineProperty(ft,"ContainerModule",{enumerable:!0,get:function(){return e.ContainerModule}});var t=L("cZ5Q");Object.defineProperty(ft,"injectable",{enumerable:!0,get:function(){return t.injectable}});var l=L("0gSV");Object.defineProperty(ft,"tagged",{enumerable:!0,get:function(){return l.tagged}});var s=L("ZzCi");Object.defineProperty(ft,"named",{enumerable:!0,get:function(){return s.named}});var c=L("Yk9n");Object.defineProperty(ft,"inject",{enumerable:!0,get:function(){return c.inject}}),Object.defineProperty(ft,"LazyServiceIdentifer",{enumerable:!0,get:function(){return c.LazyServiceIdentifer}});var r=L("jYx5");Object.defineProperty(ft,"optional",{enumerable:!0,get:function(){return r.optional}});var h=L("n2J3");Object.defineProperty(ft,"unmanaged",{enumerable:!0,get:function(){return h.unmanaged}});var n=L("jIg/");Object.defineProperty(ft,"multiInject",{enumerable:!0,get:function(){return n.multiInject}});var i=L("oaX6");Object.defineProperty(ft,"targetName",{enumerable:!0,get:function(){return i.targetName}});var a=L("Sk89");Object.defineProperty(ft,"postConstruct",{enumerable:!0,get:function(){return a.postConstruct}});var o=L("wnjb");Object.defineProperty(ft,"MetadataReader",{enumerable:!0,get:function(){return o.MetadataReader}});var u=L("d9O0");Object.defineProperty(ft,"id",{enumerable:!0,get:function(){return u.id}});var f=L("Ztfv");Object.defineProperty(ft,"decorate",{enumerable:!0,get:function(){return f.decorate}});var v=L("RR/i");Object.defineProperty(ft,"traverseAncerstors",{enumerable:!0,get:function(){return v.traverseAncerstors}}),Object.defineProperty(ft,"taggedConstraint",{enumerable:!0,get:function(){return v.taggedConstraint}}),Object.defineProperty(ft,"namedConstraint",{enumerable:!0,get:function(){return v.namedConstraint}}),Object.defineProperty(ft,"typeConstraint",{enumerable:!0,get:function(){return v.typeConstraint}});var b=L("ujMp");Object.defineProperty(ft,"getServiceIdentifierAsString",{enumerable:!0,get:function(){return b.getServiceIdentifierAsString}});var y=L("78VC");Object.defineProperty(ft,"multiBindToService",{enumerable:!0,get:function(){return y.multiBindToService}})},"4kj+":function(Se,ft){},"4qC0":function(Se,ft,L){var U=L("NykK"),E=L("Z0cm"),T=L("ExA7"),e="[object String]";function t(l){return typeof l=="string"||!E(l)&&T(l)&&U(l)==e}Se.exports=t},"5Tg0":function(Se,ft,L){(function(U){var E=L("Kz5y"),T=ft&&!ft.nodeType&&ft,e=T&&typeof U=="object"&&U&&!U.nodeType&&U,t=e&&e.exports===T,l=t?E.Buffer:void 0,s=l?l.allocUnsafe:void 0;function c(r,h){if(h)return r.slice();var n=r.length,i=s?s(n):new r.constructor(n);return r.copy(i),i}U.exports=c}).call(this,L("hOG+")(Se))},"5gLl":function(Se,ft,L){"use strict";L.d(ft,"a",function(){return V});var U=L("lSNA"),E=L.n(U),T=L("LvWW"),e=L.n(T),t=L("0wsv");function l(k){if(!k)throw new Error("coord is required");if(!Array.isArray(k)){if(k.type==="Feature"&&k.geometry!==null&&k.geometry.type==="Point")return k.geometry.coordinates;if(k.type==="Point")return k.coordinates}if(Array.isArray(k)&&k.length>=2&&!Array.isArray(k[0])&&!Array.isArray(k[1]))return k;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function s(k){if(Array.isArray(k))return k;if(k.type==="Feature"){if(k.geometry!==null)return k.geometry.coordinates}else if(k.coordinates)return k.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function c(k){if(k.length>1&&Object(t.c)(k[0])&&Object(t.c)(k[1]))return!0;if(Array.isArray(k[0])&&k[0].length)return c(k[0]);throw new Error("coordinates must only contain numbers")}function r(k,Y,K){if(!Y||!K)throw new Error("type and name required");if(!k||k.type!==Y)throw new Error("Invalid input to "+K+": must be a "+Y+", given "+k.type)}function h(k,Y,K){if(!k)throw new Error("No feature passed");if(!K)throw new Error(".featureOf() requires a name");if(!k||k.type!=="Feature"||!k.geometry)throw new Error("Invalid input to "+K+", Feature with geometry required");if(!k.geometry||k.geometry.type!==Y)throw new Error("Invalid input to "+K+": must be a "+Y+", given "+k.geometry.type)}function n(k,Y,K){if(!k)throw new Error("No featureCollection passed");if(!K)throw new Error(".collectionOf() requires a name");if(!k||k.type!=="FeatureCollection")throw new Error("Invalid input to "+K+", FeatureCollection required");for(var it=0,ct=k.features;it<ct.length;it++){var ht=ct[it];if(!ht||ht.type!=="Feature"||!ht.geometry)throw new Error("Invalid input to "+K+", Feature with geometry required");if(!ht.geometry||ht.geometry.type!==Y)throw new Error("Invalid input to "+K+": must be a "+Y+", given "+ht.geometry.type)}}function i(k){return k.type==="Feature"?k.geometry:k}function a(k,Y){return k.type==="FeatureCollection"?"FeatureCollection":k.type==="GeometryCollection"?"GeometryCollection":k.type==="Feature"&&k.geometry!==null?k.geometry.type:k.type}function o(k,Y,K){if(k!==null)for(var it,ct,ht,ut,It,Nt,Lt,_t=0,mt=0,At,rt=k.type,Mt=rt==="FeatureCollection",z=rt==="Feature",$=Mt?k.features.length:1,dt=0;dt<$;dt++){Lt=Mt?k.features[dt].geometry:z?k.geometry:k,At=Lt?Lt.type==="GeometryCollection":!1,It=At?Lt.geometries.length:1;for(var et=0;et<It;et++){var ot=0,pt=0;if(ut=At?Lt.geometries[et]:Lt,ut!==null){Nt=ut.coordinates;var H=ut.type;switch(_t=K&&(H==="Polygon"||H==="MultiPolygon")?1:0,H){case null:break;case"Point":if(Y(Nt,mt,dt,ot,pt)===!1)return!1;mt++,ot++;break;case"LineString":case"MultiPoint":for(it=0;it<Nt.length;it++){if(Y(Nt[it],mt,dt,ot,pt)===!1)return!1;mt++,H==="MultiPoint"&&ot++}H==="LineString"&&ot++;break;case"Polygon":case"MultiLineString":for(it=0;it<Nt.length;it++){for(ct=0;ct<Nt[it].length-_t;ct++){if(Y(Nt[it][ct],mt,dt,ot,pt)===!1)return!1;mt++}H==="MultiLineString"&&ot++,H==="Polygon"&&pt++}H==="Polygon"&&ot++;break;case"MultiPolygon":for(it=0;it<Nt.length;it++){for(pt=0,ct=0;ct<Nt[it].length;ct++){for(ht=0;ht<Nt[it][ct].length-_t;ht++){if(Y(Nt[it][ct][ht],mt,dt,ot,pt)===!1)return!1;mt++}pt++}ot++}break;case"GeometryCollection":for(it=0;it<ut.geometries.length;it++)if(o(ut.geometries[it],Y,K)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function u(k,Y,K,it){var ct=K;return o(k,function(ht,ut,It,Nt,Lt){ut===0&&K===void 0?ct=ht:ct=Y(ct,ht,ut,It,Nt,Lt)},it),ct}function f(k,Y){var K;switch(k.type){case"FeatureCollection":for(K=0;K<k.features.length&&Y(k.features[K].properties,K)!==!1;K++);break;case"Feature":Y(k.properties,0);break}}function v(k,Y,K){var it=K;return f(k,function(ct,ht){ht===0&&K===void 0?it=ct:it=Y(it,ct,ht)}),it}function b(k,Y){if(k.type==="Feature")Y(k,0);else if(k.type==="FeatureCollection")for(var K=0;K<k.features.length&&Y(k.features[K],K)!==!1;K++);}function y(k,Y,K){var it=K;return b(k,function(ct,ht){ht===0&&K===void 0?it=ct:it=Y(it,ct,ht)}),it}function g(k){var Y=[];return o(k,function(K){Y.push(K)}),Y}function _(k,Y){var K,it,ct,ht,ut,It,Nt,Lt,_t,mt,At=0,rt=k.type==="FeatureCollection",Mt=k.type==="Feature",z=rt?k.features.length:1;for(K=0;K<z;K++){for(It=rt?k.features[K].geometry:Mt?k.geometry:k,Lt=rt?k.features[K].properties:Mt?k.properties:{},_t=rt?k.features[K].bbox:Mt?k.bbox:void 0,mt=rt?k.features[K].id:Mt?k.id:void 0,Nt=It?It.type==="GeometryCollection":!1,ut=Nt?It.geometries.length:1,ct=0;ct<ut;ct++){if(ht=Nt?It.geometries[ct]:It,ht===null){if(Y(null,At,Lt,_t,mt)===!1)return!1;continue}switch(ht.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(Y(ht,At,Lt,_t,mt)===!1)return!1;break}case"GeometryCollection":{for(it=0;it<ht.geometries.length;it++)if(Y(ht.geometries[it],At,Lt,_t,mt)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}At++}}function M(k,Y,K){var it=K;return _(k,function(ct,ht,ut,It,Nt){ht===0&&K===void 0?it=ct:it=Y(it,ct,ht,ut,It,Nt)}),it}function x(k,Y){_(k,function(K,it,ct,ht,ut){var It=K===null?null:K.type;switch(It){case null:case"Point":case"LineString":case"Polygon":return Y(Object(t.b)(K,ct,{bbox:ht,id:ut}),it,0)===!1?!1:void 0}var Nt;switch(It){case"MultiPoint":Nt="Point";break;case"MultiLineString":Nt="LineString";break;case"MultiPolygon":Nt="Polygon";break}for(var Lt=0;Lt<K.coordinates.length;Lt++){var _t=K.coordinates[Lt],mt={type:Nt,coordinates:_t};if(Y(Object(t.b)(mt,ct),it,Lt)===!1)return!1}})}function m(k,Y,K){var it=K;return x(k,function(ct,ht,ut){ht===0&&ut===0&&K===void 0?it=ct:it=Y(it,ct,ht,ut)}),it}function S(k,Y){x(k,function(K,it,ct){var ht=0;if(!!K.geometry){var ut=K.geometry.type;if(!(ut==="Point"||ut==="MultiPoint")){var It,Nt=0,Lt=0,_t=0;if(o(K,function(mt,At,rt,Mt,z){if(It===void 0||it>Nt||Mt>Lt||z>_t){It=mt,Nt=it,Lt=Mt,_t=z,ht=0;return}var $=Object(t.e)([It,mt],K.properties);if(Y($,it,ct,z,ht)===!1)return!1;ht++,It=mt})===!1)return!1}}})}function P(k,Y,K){var it=K,ct=!1;return S(k,function(ht,ut,It,Nt,Lt){ct===!1&&K===void 0?it=ht:it=Y(it,ht,ut,It,Nt,Lt),ct=!0}),it}function A(k,Y){if(!k)throw new Error("geojson is required");x(k,function(K,it,ct){if(K.geometry!==null){var ht=K.geometry.type,ut=K.geometry.coordinates;switch(ht){case"LineString":if(Y(K,it,ct,0,0)===!1)return!1;break;case"Polygon":for(var It=0;It<ut.length;It++)if(Y(Object(t.e)(ut[It],K.properties),it,ct,It)===!1)return!1;break}}})}function O(k,Y,K){var it=K;return A(k,function(ct,ht,ut,It){ht===0&&K===void 0?it=ct:it=Y(it,ct,ht,ut,It)}),it}function R(k,Y){if(Y=Y||{},!Object(t.d)(Y))throw new Error("options is invalid");var K=Y.featureIndex||0,it=Y.multiFeatureIndex||0,ct=Y.geometryIndex||0,ht=Y.segmentIndex||0,ut=Y.properties,It;switch(k.type){case"FeatureCollection":K<0&&(K=k.features.length+K),ut=ut||k.features[K].properties,It=k.features[K].geometry;break;case"Feature":ut=ut||k.properties,It=k.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":It=k;break;default:throw new Error("geojson is invalid")}if(It===null)return null;var Nt=It.coordinates;switch(It.type){case"Point":case"MultiPoint":return null;case"LineString":return ht<0&&(ht=Nt.length+ht-1),Object(t.e)([Nt[ht],Nt[ht+1]],ut,Y);case"Polygon":return ct<0&&(ct=Nt.length+ct),ht<0&&(ht=Nt[ct].length+ht-1),Object(t.e)([Nt[ct][ht],Nt[ct][ht+1]],ut,Y);case"MultiLineString":return it<0&&(it=Nt.length+it),ht<0&&(ht=Nt[it].length+ht-1),Object(t.e)([Nt[it][ht],Nt[it][ht+1]],ut,Y);case"MultiPolygon":return it<0&&(it=Nt.length+it),ct<0&&(ct=Nt[it].length+ct),ht<0&&(ht=Nt[it][ct].length-ht-1),Object(t.e)([Nt[it][ct][ht],Nt[it][ct][ht+1]],ut,Y)}throw new Error("geojson is invalid")}function W(k,Y){if(Y=Y||{},!Object(t.d)(Y))throw new Error("options is invalid");var K=Y.featureIndex||0,it=Y.multiFeatureIndex||0,ct=Y.geometryIndex||0,ht=Y.coordIndex||0,ut=Y.properties,It;switch(k.type){case"FeatureCollection":K<0&&(K=k.features.length+K),ut=ut||k.features[K].properties,It=k.features[K].geometry;break;case"Feature":ut=ut||k.properties,It=k.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":It=k;break;default:throw new Error("geojson is invalid")}if(It===null)return null;var Nt=It.coordinates;switch(It.type){case"Point":return Object(t.f)(Nt,ut,Y);case"MultiPoint":return it<0&&(it=Nt.length+it),Object(t.f)(Nt[it],ut,Y);case"LineString":return ht<0&&(ht=Nt.length+ht),Object(t.f)(Nt[ht],ut,Y);case"Polygon":return ct<0&&(ct=Nt.length+ct),ht<0&&(ht=Nt[ct].length+ht),Object(t.f)(Nt[ct][ht],ut,Y);case"MultiLineString":return it<0&&(it=Nt.length+it),ht<0&&(ht=Nt[it].length+ht),Object(t.f)(Nt[it][ht],ut,Y);case"MultiPolygon":return it<0&&(it=Nt.length+it),ct<0&&(ct=Nt[it].length+ct),ht<0&&(ht=Nt[it][ct].length-ht),Object(t.f)(Nt[it][ct][ht],ut,Y)}throw new Error("geojson is invalid")}function F(k,Y){var K=Object.keys(k);if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(k);Y&&(it=it.filter(function(ct){return Object.getOwnPropertyDescriptor(k,ct).enumerable})),K.push.apply(K,it)}return K}function Z(k){for(var Y=1;Y<arguments.length;Y++){var K=arguments[Y]!=null?arguments[Y]:{};Y%2?F(Object(K),!0).forEach(function(it){E()(k,it,K[it])}):Object.getOwnPropertyDescriptors?Object.defineProperties(k,Object.getOwnPropertyDescriptors(K)):F(Object(K)).forEach(function(it){Object.defineProperty(k,it,Object.getOwnPropertyDescriptor(K,it))})}return k}function V(k,Y){var K=[],it={};if(k.features=k.features.filter(function(ht){var ut=ht.geometry;return ht!=null&&ut&&ut.type&&ut.coordinates&&ut.coordinates.length>0}),e()(k,!0),k.features.length===0)return{dataArray:[],featureKeys:it};var ct=0;return x(k,function(ht,ut){var It=s(ht),Nt=ut,Lt=Z(Z({},ht.properties),{},{coordinates:It,_id:Nt});K.push(Lt)}),{dataArray:K,featureKeys:it}}},"5ku3":function(Se,ft,L){"use strict";(function(U){L.d(ft,"a",function(){return e});var E=L("U8pU"),T=L("I0ug");function e(){var l=(typeof U=="undefined"?"undefined":Object(E.a)(U))==="object"&&String(U)==="[object process]"&&!U.browser;return!l||Object(T.a)()}function t(){return e()&&typeof document!="undefined"}}).call(this,L("Q2Ig"))},"5zYK":function(Se,ft,L){"use strict";L.d(ft,"a",function(){return r});var U=L("lSNA"),E=L.n(U),T=L("RIqP"),e=L.n(T),t=L("LvWW"),l=L.n(t);function s(h,n){var i=Object.keys(h);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(h);n&&(a=a.filter(function(o){return Object.getOwnPropertyDescriptor(h,o).enumerable})),i.push.apply(i,a)}return i}function c(h){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?s(Object(i),!0).forEach(function(a){E()(h,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach(function(a){Object.defineProperty(h,a,Object.getOwnPropertyDescriptor(i,a))})}return h}function r(h,n){var i=n.x,a=n.y,o=n.x1,u=n.y1,f=n.coordinates,v=[];return h.forEach(function(b,y){var g=[];if(i&&a&&(g=[parseFloat(b[i]),parseFloat(b[a])]),i&&a&&o&&u){var _=[parseFloat(b[i]),parseFloat(b[a])],M=[parseFloat(b[o]),parseFloat(b[u])];g=[_,M]}if(f){var x="Polygon";Array.isArray(f[0])||(x="Point"),Array.isArray(f[0])&&!Array.isArray(f[0][0])&&(x="LineString");var m={type:x,coordinates:e()(b[f])};l()(m,!0),g=m.coordinates}var S=c(c({},b),{},{_id:y,coordinates:g});v.push(S)}),{dataArray:v}}},"68d/":function(Se,ft,L){"use strict";L.d(ft,"b",function(){return Ui}),L.d(ft,"c",function(){return of}),L.d(ft,"a",function(){return jc});var U=L("q1tI"),E=L.n(U),T=Object(U.createContext)({});function e(){return Object(U.useContext)(T)}var t=L("8ml+"),l=L("lwsE"),s=L.n(l),c=L("W8MJ"),r=L.n(c),h=L("7W2i"),n=L.n(h),i=L("a1gu"),a=L.n(i),o=L("Nsbk"),u=L.n(o),f=L("lSNA"),v=L.n(f),b=L("yG8O"),y=L.n(b),g=L("U+yc"),_=L.n(g),M=L("1ABj"),x=L("h1nZ"),m,S,P,A,O,R;function W(jt,yt){var Q=Object.keys(jt);if(Object.getOwnPropertySymbols){var xt=Object.getOwnPropertySymbols(jt);yt&&(xt=xt.filter(function(wt){return Object.getOwnPropertyDescriptor(jt,wt).enumerable})),Q.push.apply(Q,xt)}return Q}function F(jt){for(var yt=1;yt<arguments.length;yt++){var Q=arguments[yt]!=null?arguments[yt]:{};yt%2?W(Object(Q),!0).forEach(function(xt){v()(jt,xt,Q[xt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(jt,Object.getOwnPropertyDescriptors(Q)):W(Object(Q)).forEach(function(xt){Object.defineProperty(jt,xt,Object.getOwnPropertyDescriptor(Q,xt))})}return jt}var Z=(m=Object(x.lazyInject)(x.TYPES.ILogService),S=Object(x.lazyInject)(x.TYPES.IGlobalConfigService),P=(R=function(){function jt(yt){s()(this,jt),y()(this,"logger",A,this),y()(this,"configService",O,this),this.config=void 0,this.config=yt}return r()(jt,[{key:"setContainer",value:function(Q,xt){Q.bind(x.TYPES.MapConfig).toConstantValue(F(F({},this.config),{},{id:xt})),Q.bind(x.TYPES.IMapService).to(this.getServiceConstructor()).inSingletonScope()}},{key:"getServiceConstructor",value:function(){throw new Error("Method not implemented.")}}]),jt}(),R),A=_()(P.prototype,"logger",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=_()(P.prototype,"configService",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P),V=L("QILm"),k=L.n(V),Y=L("yXPU"),K=L.n(Y),it=L("o0o1"),ct=L.n(it),ht=L("hi0z"),ut=L.n(ht),It=L("Hel2"),Nt=L("IOcx"),Lt=L("4cb6"),_t={dark:"amap://styles/2a09079c3daac9420ee53b67307a8006?isPublic=true",light:"amap://styles/1fd9f8ef9751298f11f5c56968312c70?isPublic=true",normal:"amap://styles/normal",blank:"amap://styles/07c17002b38775b32a7a76c66cf90e99?isPublic=true"},mt=L("J4zp"),At=L.n(mt),rt=Math.PI/180,Mt=function(){function jt(){s()(this,jt),this.projectionMatrix=Nt.b.create(),this.viewMatrix=Nt.b.create(),this.viewProjectionMatrix=Nt.b.create(),this.ViewProjectionMatrixUncentered=Nt.b.create(),this.viewUncenteredMatrix=Nt.b.create(),this.zoom=void 0,this.center=void 0}return r()(jt,[{key:"syncWithMapCamera",value:function(Q){var xt=Q.zoom,wt=xt===void 0?1:xt,ae=Q.pitch,ke=ae===void 0?0:ae,gn=Q.bearing,pn=gn===void 0?0:gn,On=Q.center,ne=On===void 0?[0,0]:On,Me=Q.offsetOrigin,Ze=Me===void 0?[0,0]:Me,In=Q.cameraHeight,ir=In===void 0?1:In,or=Q.aspect,sr=or===void 0?1:or,wr=Q.near,ni=wr===void 0?.1:wr,Yr=Q.far,ei=Yr===void 0?1e3:Yr,hi=Q.fov,Ai=hi===void 0?0:hi;this.zoom=wt,this.center=ne;var di=ke*rt,ai=(360-pn)*rt;Nt.b.perspective(this.projectionMatrix,Ai,sr,ni,ei);var Ir=Nt.d.fromValues(ir*Math.sin(di)*Math.sin(ai),-ir*Math.sin(di)*Math.cos(ai),ir*Math.cos(di)),Mr=Nt.d.fromValues(-Math.cos(di)*Math.sin(ai),Math.cos(di)*Math.cos(ai),Math.sin(di));Nt.b.lookAt(this.viewMatrix,Ir,Nt.d.fromValues(0,0,0),Mr),this.viewUncenteredMatrix=Nt.b.clone(this.viewMatrix),Nt.b.translate(this.viewMatrix,this.viewMatrix,Nt.d.fromValues(-Ze[0],Ze[1],0)),Nt.b.multiply(this.viewProjectionMatrix,this.projectionMatrix,this.viewMatrix),Nt.b.multiply(this.ViewProjectionMatrixUncentered,this.projectionMatrix,this.viewMatrix)}},{key:"getZoom",value:function(){return this.zoom}},{key:"getZoomScale",value:function(){return 524288}},{key:"getCenter",value:function(){var Q=At()(this.center,2),xt=Q[0],wt=Q[1];return[xt,wt]}},{key:"getProjectionMatrix",value:function(){return this.projectionMatrix}},{key:"getViewMatrix",value:function(){return this.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewUncenteredMatrix}},{key:"getViewProjectionMatrix",value:function(){return this.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.ViewProjectionMatrixUncentered}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(Q,xt){var wt=85.0511287798,ae=Math.max(Math.min(wt,Q[1]),-wt),ke=256<<20,gn=Math.PI/180,pn=Q[0]*gn,On=ae*gn;On=Math.log(Math.tan(Math.PI/4+On/2));var ne=.5/Math.PI,Me=.5,Ze=-.5/Math.PI;return gn=.5,pn=ke*(ne*pn+Me)-215440491,On=-(ke*(Ze*On+gn)-106744817),[pn,On]}}]),jt}(),z,$,dt,et,ot,pt,H,nt,at,q,Et,vt,Ft,Qt;function ee(jt,yt){var Q=Object.keys(jt);if(Object.getOwnPropertySymbols){var xt=Object.getOwnPropertySymbols(jt);yt&&(xt=xt.filter(function(wt){return Object.getOwnPropertyDescriptor(jt,wt).enumerable})),Q.push.apply(Q,xt)}return Q}function Gt(jt){for(var yt=1;yt<arguments.length;yt++){var Q=arguments[yt]!=null?arguments[yt]:{};yt%2?ee(Object(Q),!0).forEach(function(xt){v()(jt,xt,Q[xt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(jt,Object.getOwnPropertyDescriptors(Q)):ee(Object(Q)).forEach(function(xt){Object.defineProperty(jt,xt,Object.getOwnPropertyDescriptor(Q,xt))})}return jt}L("BGjm")(`/* @antv/l7-maps */
.amap-logo{
 display: none !important;
}
`);var $t=0;window.forceWebGL=!0;var Pe="15cd8a57710d40c9b7c0e3cc120f1200",me="1.4.15",le="amap-script",be=!1,ze=[],Xe=12,_n=(z=Object(Lt.injectable)(),$=Object(Lt.inject)(x.TYPES.IGlobalConfigService),dt=Object(Lt.inject)(x.TYPES.ILogService),et=Object(Lt.inject)(x.TYPES.MapConfig),ot=Object(Lt.inject)(x.TYPES.ICoordinateSystemService),pt=Object(Lt.inject)(x.TYPES.IEventEmitter),z(H=(nt=(Qt=function(){function jt(){var yt=this;s()(this,jt),this.map=void 0,y()(this,"configService",at,this),y()(this,"logger",q,this),y()(this,"config",Et,this),y()(this,"coordinateSystemService",vt,this),y()(this,"eventEmitter",Ft,this),this.markerContainer=void 0,this.$mapContainer=void 0,this.viewport=void 0,this.cameraChangedCallback=void 0,this.handleCameraChanged=function(Q){var xt=Q.camera,wt=xt.fov,ae=xt.near,ke=xt.far,gn=xt.height,pn=xt.pitch,On=xt.rotation,ne=xt.aspect,Me=xt.position,Ze=yt.getCenter(),In=Ze.lng,ir=Ze.lat;if(yt.cameraChangedCallback){yt.viewport.syncWithMapCamera({aspect:ne,bearing:360-On,far:ke,fov:wt,cameraHeight:gn,near:ae,pitch:pn,zoom:yt.map.getZoom()-1,center:[In,ir],offsetOrigin:[Me.x,Me.y]});var or=yt.config.offsetZoom,sr=or===void 0?Xe:or;yt.viewport.getZoom()>sr?yt.coordinateSystemService.setCoordinateSystem(x.CoordinateSystem.P20_OFFSET):yt.coordinateSystemService.setCoordinateSystem(x.CoordinateSystem.P20),yt.cameraChangedCallback(yt.viewport)}}}return r()(jt,[{key:"addMarkerContainer",value:function(){var Q=this.map.getContainer();if(Q!==null){var xt=Q.getElementsByClassName("amap-maps")[0];this.markerContainer=It.a.create("div","l7-marker-container",xt)}}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"on",value:function(Q,xt){x.MapServiceEvent.indexOf(Q)!==-1?this.eventEmitter.on(Q,xt):this.map.on(Q,xt)}},{key:"off",value:function(Q,xt){x.MapServiceEvent.indexOf(Q)!==-1?this.eventEmitter.off(Q,xt):this.map.off(Q,xt)}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"getMapCanvasContainer",value:function(){var Q;return(Q=this.map.getContainer())===null||Q===void 0?void 0:Q.getElementsByClassName("amap-maps")[0]}},{key:"getSize",value:function(){var Q=this.map.getSize();return[Q.getWidth(),Q.getHeight()]}},{key:"getType",value:function(){return"amap"}},{key:"getZoom",value:function(){return this.map.getZoom()-1}},{key:"setZoom",value:function(Q){return this.map.setZoom(Q)}},{key:"getCenter",value:function(){var Q=this.map.getCenter();return{lng:Q.getLng(),lat:Q.getLat()}}},{key:"setCenter",value:function(Q){this.map.setCenter(Q)}},{key:"getPitch",value:function(){return this.map.getPitch()}},{key:"getRotation",value:function(){return 360-this.map.getRotation()}},{key:"getBounds",value:function(){var Q=this.map.getBounds().toBounds(),xt=Q.getNorthEast(),wt=Q.getSouthWest(),ae=this.getCenter(),ke=ae.lng>xt.getLng()||ae.lng<wt.getLng()?180-xt.getLng():xt.getLng(),gn=ae.lng<wt.getLng()?wt.getLng()-180:wt.getLng();return[[gn,wt.getLat()],[ke,xt.getLat()]]}},{key:"getMinZoom",value:function(){var Q=this.map.get("zooms");return Q[0]-1}},{key:"getMaxZoom",value:function(){var Q=this.map.get("zooms");return Q[1]-1}},{key:"setRotation",value:function(Q){return this.map.setRotation(Q)}},{key:"setPitch",value:function(Q){return this.map.setPitch(Q)}},{key:"zoomIn",value:function(){this.map.zoomIn()}},{key:"zoomOut",value:function(){this.map.zoomOut()}},{key:"panTo",value:function(Q){this.map.panTo(Q)}},{key:"panBy",value:function(Q){this.map.panTo(Q)}},{key:"fitBounds",value:function(Q){this.map.setBounds(new AMap.Bounds([Q[0][0],Q[0][1],Q[1][0],Q[1][1]]))}},{key:"setZoomAndCenter",value:function(Q,xt){this.map.setZoomAndCenter(Q,xt)}},{key:"setMapStyle",value:function(Q){this.map.setMapStyle(this.getMapStyle(Q))}},{key:"setMapStatus",value:function(Q){this.map.setStatus(Q)}},{key:"pixelToLngLat",value:function(Q){var xt=this.map.pixelToLngLat(new AMap.Pixel(Q[0],Q[1]));return{lng:xt.getLng(),lat:xt.getLat()}}},{key:"lngLatToPixel",value:function(Q){var xt=this.map.lnglatToPixel(new AMap.LngLat(Q[0],Q[1]));return{x:xt.getX(),y:xt.getY()}}},{key:"containerToLngLat",value:function(Q){var xt=new AMap.Pixel(Q[0],Q[1]),wt=this.map.containerToLngLat(xt);return{lng:wt==null?void 0:wt.getLng(),lat:wt==null?void 0:wt.getLat()}}},{key:"lngLatToContainer",value:function(Q){var xt=new AMap.LngLat(Q[0],Q[1]),wt=this.map.lngLatToContainer(xt);return{x:wt.getX(),y:wt.getY()}}},{key:"lngLatToMercator",value:function(Q,xt){return{x:0,y:0,z:0}}},{key:"getModelMatrix",value:function(Q,xt,wt){var ae=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],ke=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{x:0,y:0,z:0},gn=this.viewport.projectFlat(Q),pn=Nt.b.create();return Nt.b.translate(pn,pn,Nt.d.fromValues(gn[0],gn[1],xt)),Nt.b.scale(pn,pn,Nt.d.fromValues(ae[0],ae[1],ae[2])),Nt.b.rotateX(pn,pn,wt[0]),Nt.b.rotateY(pn,pn,wt[1]),Nt.b.rotateZ(pn,pn,wt[2]),pn}},{key:"init",value:function(){var yt=K()(ct.a.mark(function xt(){var wt=this,ae,ke,gn,pn,On,ne,Me,Ze,In,ir,or,sr,wr,ni;return ct.a.wrap(function(ei){for(;;)switch(ei.prev=ei.next){case 0:return ae=this.config,ke=ae.id,gn=ae.style,pn=gn===void 0?"light":gn,On=ae.minZoom,ne=On===void 0?0:On,Me=ae.maxZoom,Ze=Me===void 0?18:Me,In=ae.token,ir=In===void 0?Pe:In,or=ae.mapInstance,sr=ae.plugin,wr=sr===void 0?[]:sr,ni=k()(ae,["id","style","minZoom","maxZoom","token","mapInstance","plugin"]),ei.next=3,new Promise(function(hi){var Ai=function(){if(or)wt.map=or,wt.$mapContainer=wt.map.getContainer(),setTimeout(function(){wt.map.on("camerachange",wt.handleCameraChanged),hi()},30);else{wt.$mapContainer=wt.creatAmapContainer(ke);var ai=new AMap.Map(wt.$mapContainer,Gt({mapStyle:wt.getMapStyle(pn),zooms:[ne,Ze],viewMode:"3D"},ni));ai.on("camerachange",wt.handleCameraChanged),wt.map=ai,setTimeout(function(){hi()},10)}};!be&&!or?(ir===Pe&&wt.logger.warn(wt.configService.getSceneWarninfo("MapToken")),be=!0,wr.push("Map3D"),ut.a.load({key:ir,version:me,plugins:wr}).then(function(di){Ai(),ze.length&&(ze.forEach(function(ai){return ai()}),ze=[])}).catch(function(di){throw new Error(di)})):be&&window.AMap||or?Ai():ze.push(Ai)});case 3:this.viewport=new Mt;case 4:case"end":return ei.stop()}},xt,this)}));function Q(){return yt.apply(this,arguments)}return Q}()},{key:"exportMap",value:function(Q){var xt,wt=(xt=this.getContainer())===null||xt===void 0?void 0:xt.getElementsByClassName("amap-layer")[0],ae=Q==="jpg"?wt==null?void 0:wt.toDataURL("image/jpeg"):wt==null?void 0:wt.toDataURL("image/png");return ae}},{key:"emit",value:function(Q){for(var xt,wt=arguments.length,ae=new Array(wt>1?wt-1:0),ke=1;ke<wt;ke++)ae[ke-1]=arguments[ke];(xt=this.eventEmitter).emit.apply(xt,[Q].concat(ae))}},{key:"once",value:function(Q){for(var xt,wt=arguments.length,ae=new Array(wt>1?wt-1:0),ke=1;ke<wt;ke++)ae[ke-1]=arguments[ke];(xt=this.eventEmitter).once.apply(xt,[Q].concat(ae))}},{key:"destroy",value:function(){this.map.destroy(),delete window.initAMap;var Q=document.getElementById(le);Q&&document.head.removeChild(Q)}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"onCameraChanged",value:function(Q){this.cameraChangedCallback=Q}},{key:"getMapStyle",value:function(Q){return _t[Q]?_t[Q]:Q}},{key:"creatAmapContainer",value:function(Q){var xt=Q;typeof Q=="string"&&(xt=document.getElementById(Q));var wt=document.createElement("div");return wt.style.cssText+=`
      position: absolute;
      top: 0;
      height: 100%;
      width: 100%;
    `,wt.id="l7_amap_div"+$t++,xt.appendChild(wt),wt}}]),jt}(),Qt),at=_()(nt.prototype,"configService",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=_()(nt.prototype,"logger",[dt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Et=_()(nt.prototype,"config",[et],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vt=_()(nt.prototype,"coordinateSystemService",[ot],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ft=_()(nt.prototype,"eventEmitter",[pt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nt))||H);function Kn(jt){var yt=Hn();return function(){var xt=u()(jt),wt;if(yt){var ae=u()(this).constructor;wt=Reflect.construct(xt,arguments,ae)}else wt=xt.apply(this,arguments);return a()(this,wt)}}function Hn(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}var nn=function(jt){n()(Q,jt);var yt=Kn(Q);function Q(){return s()(this,Q),yt.apply(this,arguments)}return r()(Q,[{key:"getServiceConstructor",value:function(){return _n}}]),Q}(Z);function en(jt,yt){var Q=Object.keys(jt);if(Object.getOwnPropertySymbols){var xt=Object.getOwnPropertySymbols(jt);yt&&(xt=xt.filter(function(wt){return Object.getOwnPropertyDescriptor(jt,wt).enumerable})),Q.push.apply(Q,xt)}return Q}function An(jt){for(var yt=1;yt<arguments.length;yt++){var Q=arguments[yt]!=null?arguments[yt]:{};yt%2?en(Object(Q),!0).forEach(function(xt){Nn(jt,xt,Q[xt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(jt,Object.getOwnPropertyDescriptors(Q)):en(Object(Q)).forEach(function(xt){Object.defineProperty(jt,xt,Object.getOwnPropertyDescriptor(Q,xt))})}return jt}function Nn(jt,yt,Q){return yt in jt?Object.defineProperty(jt,yt,{value:Q,enumerable:!0,configurable:!0,writable:!0}):jt[yt]=Q,jt}function hr(jt,yt){return ve(jt)||Jt(jt,yt)||Oe(jt,yt)||fi()}function fi(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Oe(jt,yt){if(!!jt){if(typeof jt=="string")return Ae(jt,yt);var Q=Object.prototype.toString.call(jt).slice(8,-1);if(Q==="Object"&&jt.constructor&&(Q=jt.constructor.name),Q==="Map"||Q==="Set")return Array.from(jt);if(Q==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Q))return Ae(jt,yt)}}function Ae(jt,yt){(yt==null||yt>jt.length)&&(yt=jt.length);for(var Q=0,xt=new Array(yt);Q<yt;Q++)xt[Q]=jt[Q];return xt}function Jt(jt,yt){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(jt)))){var Q=[],xt=!0,wt=!1,ae=void 0;try{for(var ke=jt[Symbol.iterator](),gn;!(xt=(gn=ke.next()).done)&&(Q.push(gn.value),!(yt&&Q.length===yt));xt=!0);}catch(pn){wt=!0,ae=pn}finally{try{!xt&&ke.return!=null&&ke.return()}finally{if(wt)throw ae}}return Q}}function ve(jt){if(Array.isArray(jt))return jt}var Vt=E.a.memo(function(jt){var yt=jt.style,Q=jt.className,xt=jt.map,wt=jt.option,ae=jt.onSceneLoaded,ke=jt.children,gn=Object(U.useRef)(null),pn=Object(U.useState)(),On=hr(pn,2),ne=On[0],Me=On[1];return Object(U.useEffect)(function(){var Ze=new t.Scene(An(An({id:gn.current},wt),{},{map:new nn(xt)}));return Ze.on("loaded",function(){Me(Ze),ae&&ae(Ze)}),function(){Ze.destroy()}},[]),Object(U.useEffect)(function(){ne&&xt.style&&ne.setMapStyle(xt.style)},[JSON.stringify(xt.style)]),Object(U.useEffect)(function(){ne&&xt.zoom&&ne.setZoom(xt.zoom)},[xt.zoom]),Object(U.useEffect)(function(){ne&&xt.center&&ne.setCenter(xt.center)},[JSON.stringify(xt.center)]),Object(U.useEffect)(function(){ne&&xt.pitch&&ne.setPitch(xt.pitch)},[xt.pitch]),Object(U.useEffect)(function(){ne&&xt.rotation&&ne.setRotation(xt.rotation)},[xt.rotation]),E.a.createElement(T.Provider,{value:ne},E.a.createElement("div",{ref:gn,className:Q,style:yt},ne&&ke))}),ie=Vt,Ce=L("4ZJM"),ue=L.n(Ce),xe=L("1OyB"),$e=L("vuIU"),Fn=L("md7G"),rr=L("foSv"),En=L("Ji7U"),Pn=L("JX7q"),Er=L("ODXe"),Pr=L("bl9R");function ln(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Cr(jt,yt){var Q=Pr.transformMat4([],yt,jt);return Pr.scale(Q,Q,1/Q[3]),Q}function Ar(jt,yt){var Q=jt%yt;return Q<0?yt+Q:Q}function je(jt,yt,Q){return Q*yt+(1-Q)*jt}var We=L("ZaHm"),Ye=L("ZxFD"),fn=L("n+fv");function mn(jt,yt){if(!jt)throw new Error(yt||"viewport-mercator-project: assertion failed.")}var jn=Math.PI,bn=jn/4,Ln=jn/180,nr=180/jn,Yn=512,Mn=4003e4,Rr=1.5;function pr(jt){return Math.pow(2,jt)}function zr(jt){return Math.log2(jt)}function Pi(jt,yt){var Q=Object(Er.a)(jt,2),xt=Q[0],wt=Q[1];mn(Number.isFinite(xt)&&Number.isFinite(yt)),mn(Number.isFinite(wt)&&wt>=-90&&wt<=90,"invalid latitude"),yt*=Yn;var ae=xt*Ln,ke=wt*Ln,gn=yt*(ae+jn)/(2*jn),pn=yt*(jn-Math.log(Math.tan(bn+ke*.5)))/(2*jn);return[gn,pn]}function Oa(jt,yt){var Q=Object(Er.a)(jt,2),xt=Q[0],wt=Q[1];yt*=Yn;var ae=xt/yt*(2*jn)-jn,ke=2*(Math.atan(Math.exp(jn-wt/yt*(2*jn)))-bn);return[ae*nr,ke*nr]}function Ua(jt){var yt=jt.latitude;mn(Number.isFinite(yt));var Q=Math.cos(yt*Ln);return zr(Mn*Q)-9}function ro(jt){var yt=jt.latitude,Q=jt.longitude,xt=jt.zoom,wt=jt.scale,ae=jt.highPrecision,ke=ae===void 0?!1:ae;wt=wt!==void 0?wt:pr(xt),mn(Number.isFinite(yt)&&Number.isFinite(Q)&&Number.isFinite(wt));var gn={},pn=Yn*wt,On=Math.cos(yt*Ln),ne=pn/360,Me=ne/On,Ze=pn/Mn/On;if(gn.pixelsPerMeter=[Ze,-Ze,Ze],gn.metersPerPixel=[1/Ze,-1/Ze,1/Ze],gn.pixelsPerDegree=[ne,-Me,Ze],gn.degreesPerPixel=[1/ne,-1/Me,1/Ze],ke){var In=Ln*Math.tan(yt*Ln)/On,ir=ne*In/2,or=pn/Mn*In,sr=or/Me*Ze;gn.pixelsPerDegree2=[0,-ir,or],gn.pixelsPerMeter2=[sr,0,sr]}return gn}function Ko(jt,yt){var Q=Object(Er.a)(jt,3),xt=Q[0],wt=Q[1],ae=Q[2],ke=Object(Er.a)(yt,3),gn=ke[0],pn=ke[1],On=ke[2],ne=1,Me=ro({longitude:xt,latitude:wt,scale:ne,highPrecision:!0}),Ze=Me.pixelsPerMeter,In=Me.pixelsPerMeter2,ir=Pi(jt,ne);ir[0]+=gn*(Ze[0]+In[0]*pn),ir[1]+=pn*(Ze[1]+In[1]*pn);var or=Oa(ir,ne),sr=(ae||0)+(On||0);return Number.isFinite(ae)||Number.isFinite(On)?[or[0],or[1],sr]:or}function _a(jt){var yt=jt.height,Q=jt.pitch,xt=jt.bearing,wt=jt.altitude,ae=jt.center,ke=ae===void 0?null:ae,gn=jt.flipY,pn=gn===void 0?!1:gn,On=ln();return We.translate(On,On,[0,0,-wt]),We.scale(On,On,[1,1,1/yt]),We.rotateX(On,On,-Q*Ln),We.rotateZ(On,On,xt*Ln),pn&&We.scale(On,On,[1,-1,1]),ke&&We.translate(On,On,fn.negate([],ke)),On}function co(jt){var yt=jt.width,Q=jt.height,xt=jt.altitude,wt=xt===void 0?Rr:xt,ae=jt.pitch,ke=ae===void 0?0:ae,gn=jt.nearZMultiplier,pn=gn===void 0?1:gn,On=jt.farZMultiplier,ne=On===void 0?1:On,Me=ke*Ln,Ze=Math.atan(.5/wt),In=Math.sin(Ze)*wt/Math.sin(Math.PI/2-Me-Ze),ir=Math.cos(Math.PI/2-Me)*In+wt;return{fov:2*Math.atan(Q/2/wt),aspect:yt/Q,focalDistance:wt,near:pn,far:ir*ne}}function Xo(jt){var yt=jt.width,Q=jt.height,xt=jt.pitch,wt=jt.altitude,ae=jt.nearZMultiplier,ke=jt.farZMultiplier,gn=co({width:yt,height:Q,altitude:wt,pitch:xt,nearZMultiplier:ae,farZMultiplier:ke}),pn=gn.fov,On=gn.aspect,ne=gn.near,Me=gn.far,Ze=We.perspective([],pn,On,ne,Me);return Ze}function io(jt,yt){var Q=Object(Er.a)(jt,3),xt=Q[0],wt=Q[1],ae=Q[2],ke=ae===void 0?0:ae;return mn(Number.isFinite(xt)&&Number.isFinite(wt)&&Number.isFinite(ke)),Cr(yt,[xt,wt,ke,1])}function To(jt,yt){var Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,xt=Object(Er.a)(jt,3),wt=xt[0],ae=xt[1],ke=xt[2];if(mn(Number.isFinite(wt)&&Number.isFinite(ae),"invalid pixel coordinate"),Number.isFinite(ke)){var gn=Cr(yt,[wt,ae,ke,1]);return gn}var pn=Cr(yt,[wt,ae,0,1]),On=Cr(yt,[wt,ae,1,1]),ne=pn[2],Me=On[2],Ze=ne===Me?0:((Q||0)-ne)/(Me-ne);return Ye.lerp([],pn,On,Ze)}var ds=ln(),La=function(){function jt(){var yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Q=yt.width,xt=yt.height,wt=yt.viewMatrix,ae=wt===void 0?ds:wt,ke=yt.projectionMatrix,gn=ke===void 0?ds:ke;Object(xe.a)(this,jt),this.width=Q||1,this.height=xt||1,this.scale=1,this.pixelsPerMeter=1,this.viewMatrix=ae,this.projectionMatrix=gn;var pn=ln();We.multiply(pn,pn,this.projectionMatrix),We.multiply(pn,pn,this.viewMatrix),this.viewProjectionMatrix=pn;var On=ln();We.scale(On,On,[this.width/2,-this.height/2,1]),We.translate(On,On,[1,-1,0]),We.multiply(On,On,this.viewProjectionMatrix);var ne=We.invert(ln(),On);if(!ne)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=On,this.pixelUnprojectionMatrix=ne,this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return Object($e.a)(jt,[{key:"equals",value:function(Q){return Q instanceof jt?Q.width===this.width&&Q.height===this.height&&We.equals(Q.projectionMatrix,this.projectionMatrix)&&We.equals(Q.viewMatrix,this.viewMatrix):!1}},{key:"project",value:function(Q){var xt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},wt=xt.topLeft,ae=wt===void 0?!0:wt,ke=this.projectPosition(Q),gn=io(ke,this.pixelProjectionMatrix),pn=Object(Er.a)(gn,2),On=pn[0],ne=pn[1],Me=ae?ne:this.height-ne;return Q.length===2?[On,Me]:[On,Me,gn[2]]}},{key:"unproject",value:function(Q){var xt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},wt=xt.topLeft,ae=wt===void 0?!0:wt,ke=xt.targetZ,gn=Object(Er.a)(Q,3),pn=gn[0],On=gn[1],ne=gn[2],Me=ae?On:this.height-On,Ze=ke&&ke*this.pixelsPerMeter,In=To([pn,Me,ne],this.pixelUnprojectionMatrix,Ze),ir=this.unprojectPosition(In),or=Object(Er.a)(ir,3),sr=or[0],wr=or[1],ni=or[2];return Number.isFinite(ne)?[sr,wr,ni]:Number.isFinite(ke)?[sr,wr,ke]:[sr,wr]}},{key:"projectPosition",value:function(Q){var xt=this.projectFlat(Q),wt=Object(Er.a)(xt,2),ae=wt[0],ke=wt[1],gn=(Q[2]||0)*this.pixelsPerMeter;return[ae,ke,gn]}},{key:"unprojectPosition",value:function(Q){var xt=this.unprojectFlat(Q),wt=Object(Er.a)(xt,2),ae=wt[0],ke=wt[1],gn=(Q[2]||0)/this.pixelsPerMeter;return[ae,ke,gn]}},{key:"projectFlat",value:function(Q){var xt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return Q}},{key:"unprojectFlat",value:function(Q){var xt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return Q}}]),jt}();function Vo(jt){var yt=jt.width,Q=jt.height,xt=jt.bounds,wt=jt.minExtent,ae=wt===void 0?0:wt,ke=jt.maxZoom,gn=ke===void 0?24:ke,pn=jt.padding,On=pn===void 0?0:pn,ne=jt.offset,Me=ne===void 0?[0,0]:ne,Ze=Object(Er.a)(xt,2),In=Object(Er.a)(Ze[0],2),ir=In[0],or=In[1],sr=Object(Er.a)(Ze[1],2),wr=sr[0],ni=sr[1];if(Number.isFinite(On)){var Yr=On;On={top:Yr,bottom:Yr,left:Yr,right:Yr}}else mn(Number.isFinite(On.top)&&Number.isFinite(On.bottom)&&Number.isFinite(On.left)&&Number.isFinite(On.right));var ei=new Bo({width:yt,height:Q,longitude:0,latitude:0,zoom:0}),hi=ei.project([ir,ni]),Ai=ei.project([wr,or]),di=[Math.max(Math.abs(Ai[0]-hi[0]),ae),Math.max(Math.abs(Ai[1]-hi[1]),ae)],ai=[yt-On.left-On.right-Math.abs(Me[0])*2,Q-On.top-On.bottom-Math.abs(Me[1])*2];mn(ai[0]>0&&ai[1]>0);var Ir=ai[0]/di[0],Mr=ai[1]/di[1],vi=(On.right-On.left)/2/Ir,Vi=(On.bottom-On.top)/2/Mr,$r=[(Ai[0]+hi[0])/2+vi,(Ai[1]+hi[1])/2+Vi],ra=ei.unproject($r),Ci=ei.zoom+Math.log2(Math.abs(Math.min(Ir,Mr)));return{longitude:ra[0],latitude:ra[1],zoom:Math.min(Ci,gn)}}var Bo=function(jt){Object(En.a)(yt,jt);function yt(){var Q,xt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},wt=xt.width,ae=xt.height,ke=xt.latitude,gn=ke===void 0?0:ke,pn=xt.longitude,On=pn===void 0?0:pn,ne=xt.zoom,Me=ne===void 0?0:ne,Ze=xt.pitch,In=Ze===void 0?0:Ze,ir=xt.bearing,or=ir===void 0?0:ir,sr=xt.altitude,wr=sr===void 0?1.5:sr,ni=xt.nearZMultiplier,Yr=xt.farZMultiplier;Object(xe.a)(this,yt),wt=wt||1,ae=ae||1;var ei=pr(Me);wr=Math.max(.75,wr);var hi=Pi([On,gn],ei);hi[2]=0;var Ai=Xo({width:wt,height:ae,pitch:In,bearing:or,altitude:wr,nearZMultiplier:ni||1/ae,farZMultiplier:Yr||1.01}),di=_a({height:ae,center:hi,pitch:In,bearing:or,altitude:wr,flipY:!0});return Q=Object(Fn.a)(this,Object(rr.a)(yt).call(this,{width:wt,height:ae,viewMatrix:di,projectionMatrix:Ai})),Q.latitude=gn,Q.longitude=On,Q.zoom=Me,Q.pitch=In,Q.bearing=or,Q.altitude=wr,Q.scale=ei,Q.center=hi,Q.pixelsPerMeter=ro(Object(Pn.a)(Object(Pn.a)(Q))).pixelsPerMeter[2],Object.freeze(Object(Pn.a)(Object(Pn.a)(Q))),Q}return Object($e.a)(yt,[{key:"projectFlat",value:function(xt){var wt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return Pi(xt,wt)}},{key:"unprojectFlat",value:function(xt){var wt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return Oa(xt,wt)}},{key:"getMapCenterByLngLatPosition",value:function(xt){var wt=xt.lngLat,ae=xt.pos,ke=To(ae,this.pixelUnprojectionMatrix),gn=Pi(wt,this.scale),pn=Ye.add([],gn,Ye.negate([],ke)),On=Ye.add([],this.center,pn);return Oa(On,this.scale)}},{key:"getLocationAtPoint",value:function(xt){var wt=xt.lngLat,ae=xt.pos;return this.getMapCenterByLngLatPosition({lngLat:wt,pos:ae})}},{key:"fitBounds",value:function(xt){var wt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ae=this.width,ke=this.height,gn=Vo(Object.assign({width:ae,height:ke,bounds:xt},wt)),pn=gn.longitude,On=gn.latitude,ne=gn.zoom;return new yt({width:ae,height:ke,longitude:pn,latitude:On,zoom:ne})}}]),yt}(La),lu=function(){function jt(){s()(this,jt),this.viewport=void 0}return r()(jt,[{key:"syncWithMapCamera",value:function(Q){var xt=Q.center,wt=Q.zoom,ae=Q.pitch,ke=Q.bearing,gn=Q.viewportHeight,pn=Q.viewportWidth;this.viewport=new Bo({width:pn,height:gn,longitude:xt&&xt[0],latitude:xt&&xt[1],zoom:wt,pitch:ae,bearing:ke})}},{key:"getZoom",value:function(){return this.viewport.zoom}},{key:"getZoomScale",value:function(){return Math.pow(2,this.getZoom())}},{key:"getCenter",value:function(){return[this.viewport.longitude,this.viewport.latitude]}},{key:"getProjectionMatrix",value:function(){return this.viewport.projectionMatrix}},{key:"getViewMatrix",value:function(){return this.viewport.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.viewMatrixUncentered}},{key:"getViewProjectionMatrix",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(Q,xt){return this.viewport.projectFlat(Q,xt)}}]),jt}(),Jo={light:"mapbox://styles/zcxduo/ck2ypyb1r3q9o1co1766dex29",dark:"mapbox://styles/zcxduo/ck241p6413s0b1cpayzldv7x7",normal:"mapbox://styles/mapbox/streets-v11",blank:{version:8,sources:{},layers:[{id:"background",type:"background",layout:{visibility:"none"}}]}},iu,$s,Ne,oe,Wt,Ee,an,Un,qn,kn,Xr,Si,Ti,ki;function sa(jt,yt){var Q=Object.keys(jt);if(Object.getOwnPropertySymbols){var xt=Object.getOwnPropertySymbols(jt);yt&&(xt=xt.filter(function(wt){return Object.getOwnPropertyDescriptor(jt,wt).enumerable})),Q.push.apply(Q,xt)}return Q}function $a(jt){for(var yt=1;yt<arguments.length;yt++){var Q=arguments[yt]!=null?arguments[yt]:{};yt%2?sa(Object(Q),!0).forEach(function(xt){v()(jt,xt,Q[xt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(jt,Object.getOwnPropertyDescriptors(Q)):sa(Object(Q)).forEach(function(xt){Object.defineProperty(jt,xt,Object.getOwnPropertyDescriptor(Q,xt))})}return jt}L("BGjm")(`/* @antv/l7-maps */
.mapboxgl-map{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mapboxgl-canvas{position:absolute;left:0;top:0}.mapboxgl-map:-webkit-full-screen{width:100%;height:100%}.mapboxgl-canary{background-color:salmon}.mapboxgl-canvas-container.mapboxgl-interactive,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass{cursor:-webkit-grab;cursor:grab;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-canvas-container.mapboxgl-interactive.mapboxgl-track-pointer{cursor:pointer}.mapboxgl-canvas-container.mapboxgl-interactive:active,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass:active{cursor:-webkit-grabbing;cursor:grabbing}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate .mapboxgl-canvas{-ms-touch-action:pan-x pan-y;touch-action:pan-x pan-y}.mapboxgl-canvas-container.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-drag-pan .mapboxgl-canvas{-ms-touch-action:pinch-zoom;touch-action:pinch-zoom}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan .mapboxgl-canvas{-ms-touch-action:none;touch-action:none}.mapboxgl-ctrl-bottom-left,.mapboxgl-ctrl-bottom-right,.mapboxgl-ctrl-top-left,.mapboxgl-ctrl-top-right{position:absolute;pointer-events:none;z-index:2}.mapboxgl-ctrl-top-left{top:0;left:0}.mapboxgl-ctrl-top-right{top:0;right:0}.mapboxgl-ctrl-bottom-left{bottom:0;left:0}.mapboxgl-ctrl-bottom-right{right:0;bottom:0}.mapboxgl-ctrl{clear:both;pointer-events:auto;-webkit-transform:translate(0);transform:translate(0)}.mapboxgl-ctrl-top-left .mapboxgl-ctrl{margin:10px 0 0 10px;float:left}.mapboxgl-ctrl-top-right .mapboxgl-ctrl{margin:10px 10px 0 0;float:right}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl{margin:0 0 10px 10px;float:left}.mapboxgl-ctrl-bottom-right .mapboxgl-ctrl{margin:0 10px 10px 0;float:right}.mapboxgl-ctrl-group{border-radius:4px;background:#fff}.mapboxgl-ctrl-group:not(:empty){-webkit-box-shadow:0 0 2px rgba(0,0,0,.1);box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (-ms-high-contrast:active){.mapboxgl-ctrl-group:not(:empty){-webkit-box-shadow:0 0 0 2px ButtonText;box-shadow:0 0 0 2px ButtonText}}.mapboxgl-ctrl-group button{width:29px;height:29px;display:block;padding:0;outline:none;border:0;-webkit-box-sizing:border-box;box-sizing:border-box;background-color:transparent;cursor:pointer}.mapboxgl-ctrl-group button+button{border-top:1px solid #ddd}.mapboxgl-ctrl button .mapboxgl-ctrl-icon{display:block;width:100%;height:100%;background-repeat:no-repeat;background-position:50%}@media (-ms-high-contrast:active){.mapboxgl-ctrl-icon{background-color:transparent}.mapboxgl-ctrl-group button+button{border-top:1px solid ButtonText}}.mapboxgl-ctrl button::-moz-focus-inner{border:0;padding:0}.mapboxgl-ctrl-attrib-button:focus,.mapboxgl-ctrl-group button:focus{-webkit-box-shadow:0 0 2px 2px #0096ff;box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl button:disabled{cursor:not-allowed}.mapboxgl-ctrl button:disabled .mapboxgl-ctrl-icon{opacity:.25}.mapboxgl-ctrl button:not(:disabled):hover{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-group button:focus:focus-visible{-webkit-box-shadow:0 0 2px 2px #0096ff;box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl-group button:focus:not(:focus-visible){-webkit-box-shadow:none;box-shadow:none}.mapboxgl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.mapboxgl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.mapboxgl-ctrl-group button:focus:only-child{border-radius:inherit}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23999'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23aaa'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting .mapboxgl-ctrl-icon{-webkit-animation:mapboxgl-spin 2s linear infinite;animation:mapboxgl-spin 2s linear infinite}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23999'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23666'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}}@-webkit-keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(1turn)}}@keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}a.mapboxgl-ctrl-logo{width:88px;height:23px;margin:0 0 -4px -4px;display:block;background-repeat:no-repeat;cursor:pointer;overflow:hidden;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg opacity='.3' stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg opacity='.9' fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E")}a.mapboxgl-ctrl-logo.mapboxgl-compact{width:23px}@media (-ms-high-contrast:active){a.mapboxgl-ctrl-logo{background-color:transparent;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){a.mapboxgl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23fff' stroke-width='3' fill='%23fff'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/svg%3E")}}.mapboxgl-ctrl.mapboxgl-ctrl-attrib{padding:0 5px;background-color:hsla(0,0%,100%,.5);margin:0}@media screen{.mapboxgl-ctrl-attrib.mapboxgl-compact{min-height:20px;padding:2px 24px 2px 0;margin:10px;position:relative;background-color:#fff;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show,.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 8px 2px 28px;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner{display:none}.mapboxgl-ctrl-attrib-button{display:none;cursor:pointer;position:absolute;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E");background-color:hsla(0,0%,100%,.5);width:24px;height:24px;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:12px;outline:none;top:0;right:0;border:0}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl-attrib-button,.mapboxgl-ctrl-top-left .mapboxgl-ctrl-attrib-button{left:0}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-inner,.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-button{display:block}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-button{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-bottom-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;right:0}.mapboxgl-ctrl-top-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;right:0}.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;left:0}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;left:0}}@media screen and (-ms-high-contrast:active){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' fill='%23fff'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E")}}@media screen and (-ms-high-contrast:black-on-white){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E")}}.mapboxgl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.mapboxgl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.mapboxgl-ctrl-attrib .mapbox-improve-map{font-weight:700;margin-left:2px}.mapboxgl-attrib-empty{display:none}.mapboxgl-ctrl-scale{background-color:hsla(0,0%,100%,.75);font-size:10px;border:2px solid #333;border-top:#333;padding:0 5px;color:#333;-webkit-box-sizing:border-box;box-sizing:border-box}.mapboxgl-popup{position:absolute;top:0;left:0;display:-webkit-flex;display:-webkit-box;display:-ms-flexbox;display:flex;will-change:transform;pointer-events:none}.mapboxgl-popup-anchor-top,.mapboxgl-popup-anchor-top-left,.mapboxgl-popup-anchor-top-right{-webkit-flex-direction:column;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.mapboxgl-popup-anchor-bottom,.mapboxgl-popup-anchor-bottom-left,.mapboxgl-popup-anchor-bottom-right{-webkit-flex-direction:column-reverse;-webkit-box-orient:vertical;-webkit-box-direction:reverse;-ms-flex-direction:column-reverse;flex-direction:column-reverse}.mapboxgl-popup-anchor-left{-webkit-flex-direction:row;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row}.mapboxgl-popup-anchor-right{-webkit-flex-direction:row-reverse;-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse}.mapboxgl-popup-tip{width:0;height:0;border:10px solid transparent;z-index:1}.mapboxgl-popup-anchor-top .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-top:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip{-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start;border-top:none;border-left:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip{-webkit-align-self:flex-end;-ms-flex-item-align:end;align-self:flex-end;border-top:none;border-right:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-bottom:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip{-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip{-webkit-align-self:flex-end;-ms-flex-item-align:end;align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.mapboxgl-popup-anchor-left .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-left:none;border-right-color:#fff}.mapboxgl-popup-anchor-right .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-right:none;border-left-color:#fff}.mapboxgl-popup-close-button{position:absolute;right:0;top:0;border:0;border-radius:0 3px 0 0;cursor:pointer;background-color:transparent}.mapboxgl-popup-close-button:hover{background-color:rgba(0,0,0,.05)}.mapboxgl-popup-content{position:relative;background:#fff;border-radius:3px;-webkit-box-shadow:0 1px 2px rgba(0,0,0,.1);box-shadow:0 1px 2px rgba(0,0,0,.1);padding:10px 10px 15px;pointer-events:auto}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-content{border-top-left-radius:0}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-content{border-top-right-radius:0}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-content{border-bottom-left-radius:0}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-content{border-bottom-right-radius:0}.mapboxgl-popup-track-pointer{display:none}.mapboxgl-popup-track-pointer *{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-map:hover .mapboxgl-popup-track-pointer{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.mapboxgl-map:active .mapboxgl-popup-track-pointer{display:none}.mapboxgl-marker{position:absolute;top:0;left:0;will-change:transform}.mapboxgl-user-location-dot,.mapboxgl-user-location-dot:before{background-color:#1da1f2;width:15px;height:15px;border-radius:50%}.mapboxgl-user-location-dot:before{content:"";position:absolute;-webkit-animation:mapboxgl-user-location-dot-pulse 2s infinite;animation:mapboxgl-user-location-dot-pulse 2s infinite}.mapboxgl-user-location-dot:after{border-radius:50%;border:2px solid #fff;content:"";height:19px;left:-2px;position:absolute;top:-2px;width:19px;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 0 3px rgba(0,0,0,.35);box-shadow:0 0 3px rgba(0,0,0,.35)}@-webkit-keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);opacity:0}to{-webkit-transform:scale(1);opacity:0}}@keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);transform:scale(3);opacity:0}to{-webkit-transform:scale(1);transform:scale(1);opacity:0}}.mapboxgl-user-location-dot-stale{background-color:#aaa}.mapboxgl-user-location-dot-stale:after{display:none}.mapboxgl-user-location-accuracy-circle{background-color:rgba(29,161,242,.2);width:1px;height:1px;border-radius:100%}.mapboxgl-crosshair,.mapboxgl-crosshair .mapboxgl-interactive,.mapboxgl-crosshair .mapboxgl-interactive:active{cursor:crosshair}.mapboxgl-boxzoom{position:absolute;top:0;left:0;width:0;height:0;background:#fff;border:2px dotted #202020;opacity:.5}@media print{.mapbox-improve-map{display:none}}`),window.mapboxgl=ue.a;var ba={mapmove:"move",camerachange:"move",zoomchange:"zoom",dragging:"drag"},bo=0,Fa=12,oo="pk.eyJ1IjoibHp4dWUiLCJhIjoiYnhfTURyRSJ9.Ugm314vAKPHBzcPmY1p4KQ",Eo=(iu=Object(Lt.injectable)(),$s=Object(Lt.inject)(x.TYPES.MapConfig),Ne=Object(Lt.inject)(x.TYPES.IGlobalConfigService),oe=Object(Lt.inject)(x.TYPES.ILogService),Wt=Object(Lt.inject)(x.TYPES.ICoordinateSystemService),Ee=Object(Lt.inject)(x.TYPES.IEventEmitter),iu(an=(Un=(ki=function(){function jt(){var yt=this;s()(this,jt),this.map=void 0,y()(this,"config",qn,this),y()(this,"configService",kn,this),y()(this,"logger",Xr,this),y()(this,"coordinateSystemService",Si,this),y()(this,"eventEmitter",Ti,this),this.viewport=void 0,this.markerContainer=void 0,this.cameraChangedCallback=void 0,this.$mapContainer=void 0,this.handleCameraChanged=function(){var Q=yt.map.getCenter().wrap(),xt=Q.lat,wt=Q.lng;yt.viewport.syncWithMapCamera({bearing:yt.map.getBearing(),center:[wt,xt],viewportHeight:yt.map.transform.height,pitch:yt.map.getPitch(),viewportWidth:yt.map.transform.width,zoom:yt.map.getZoom(),cameraHeight:0});var ae=yt.config.offsetZoom,ke=ae===void 0?Fa:ae;yt.viewport.getZoom()>ke?yt.coordinateSystemService.setCoordinateSystem(x.CoordinateSystem.LNGLAT_OFFSET):yt.coordinateSystemService.setCoordinateSystem(x.CoordinateSystem.LNGLAT),yt.cameraChangedCallback(yt.viewport)}}return r()(jt,[{key:"addMarkerContainer",value:function(){var Q=this.map.getCanvasContainer();this.markerContainer=It.a.create("div","l7-marker-container",Q),this.markerContainer.setAttribute("tabindex","-1")}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"on",value:function(Q,xt){x.MapServiceEvent.indexOf(Q)!==-1?this.eventEmitter.on(Q,xt):this.map.on(ba[Q]||Q,xt)}},{key:"off",value:function(Q,xt){this.map.off(ba[Q]||Q,xt)}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"getMapCanvasContainer",value:function(){return this.map.getCanvasContainer()}},{key:"getSize",value:function(){var Q=this.map.transform;return[Q.width,Q.height]}},{key:"getType",value:function(){return"mapbox"}},{key:"getZoom",value:function(){return this.map.getZoom()}},{key:"setZoom",value:function(Q){return this.map.setZoom(Q)}},{key:"getCenter",value:function(){return this.map.getCenter()}},{key:"setCenter",value:function(Q){this.map.setCenter(Q)}},{key:"getPitch",value:function(){return this.map.getPitch()}},{key:"getRotation",value:function(){return this.map.getBearing()}},{key:"getBounds",value:function(){return this.map.getBounds().toArray()}},{key:"getMinZoom",value:function(){return this.map.getMinZoom()}},{key:"getMaxZoom",value:function(){return this.map.getMaxZoom()}},{key:"setRotation",value:function(Q){this.map.setBearing(Q)}},{key:"zoomIn",value:function(Q,xt){this.map.zoomIn(Q,xt)}},{key:"zoomOut",value:function(Q,xt){this.map.zoomOut(Q,xt)}},{key:"setPitch",value:function(Q){return this.map.setPitch(Q)}},{key:"panTo",value:function(Q){this.map.panTo(Q)}},{key:"panBy",value:function(Q){this.panTo(Q)}},{key:"fitBounds",value:function(Q,xt){this.map.fitBounds(Q,xt)}},{key:"setMaxZoom",value:function(Q){this.map.setMaxZoom(Q)}},{key:"setMinZoom",value:function(Q){this.map.setMinZoom(Q)}},{key:"setMapStatus",value:function(Q){Q.doubleClickZoom===!0&&this.map.doubleClickZoom.enable(),Q.doubleClickZoom===!1&&this.map.doubleClickZoom.disable(),Q.dragEnable===!1&&this.map.dragPan.disable(),Q.dragEnable===!0&&this.map.dragPan.enable(),Q.rotateEnable===!1&&this.map.dragRotate.disable(),Q.rotateEnable===!0&&this.map.dragRotate.enable(),Q.keyboardEnable===!1&&this.map.keyboard.disable(),Q.keyboardEnable===!0&&this.map.keyboard.enable(),Q.zoomEnable===!1&&this.map.scrollZoom.disable(),Q.zoomEnable===!0&&this.map.scrollZoom.enable()}},{key:"setZoomAndCenter",value:function(Q,xt){this.map.flyTo({zoom:Q,center:xt})}},{key:"setMapStyle",value:function(Q){this.map.setStyle(this.getMapStyle(Q))}},{key:"pixelToLngLat",value:function(Q){return this.map.unproject(Q)}},{key:"lngLatToPixel",value:function(Q){return this.map.project(Q)}},{key:"containerToLngLat",value:function(Q){return this.map.unproject(Q)}},{key:"lngLatToContainer",value:function(Q){return this.map.project(Q)}},{key:"lngLatToMercator",value:function(Q,xt){var wt=window.mapboxgl.MercatorCoordinate.fromLngLat(Q,xt),ae=wt.x,ke=ae===void 0?0:ae,gn=wt.y,pn=gn===void 0?0:gn,On=wt.z,ne=On===void 0?0:On;return{x:ke,y:pn,z:ne}}},{key:"getModelMatrix",value:function(Q,xt,wt){var ae=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],ke=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{x:0,y:0,z:0},gn=window.mapboxgl.MercatorCoordinate.fromLngLat(Q,xt),pn=gn.meterInMercatorCoordinateUnits(),On=Nt.b.create();return Nt.b.translate(On,On,Nt.d.fromValues(gn.x-ke.x,gn.y-ke.y,gn.z||0-ke.z)),Nt.b.scale(On,On,Nt.d.fromValues(pn*ae[0],-pn*ae[1],pn*ae[2])),Nt.b.rotateX(On,On,wt[0]),Nt.b.rotateY(On,On,wt[1]),Nt.b.rotateZ(On,On,wt[2]),On}},{key:"init",value:function(){var yt=K()(ct.a.mark(function xt(){var wt,ae,ke,gn,pn,On,ne,Me,Ze,In,ir,or,sr;return ct.a.wrap(function(ni){for(;;)switch(ni.prev=ni.next){case 0:wt=this.config,ae=wt.id,ke=ae===void 0?"map":ae,gn=wt.attributionControl,pn=gn===void 0?!1:gn,On=wt.style,ne=On===void 0?"light":On,Me=wt.token,Ze=Me===void 0?oo:Me,In=wt.rotation,ir=In===void 0?0:In,or=wt.mapInstance,sr=k()(wt,["id","attributionControl","style","token","rotation","mapInstance"]),this.viewport=new lu,!or&&!window.mapboxgl&&this.logger.error(this.configService.getSceneWarninfo("SDK")),Ze===oo&&ne!=="blank"&&!window.mapboxgl.accessToken&&!or&&this.logger.warn(this.configService.getSceneWarninfo("MapToken")),!or&&!window.mapboxgl.accessToken&&(window.mapboxgl.accessToken=Ze),or?(this.map=or,this.$mapContainer=this.map.getContainer()):(this.$mapContainer=this.creatAmapContainer(ke),this.map=new window.mapboxgl.Map($a({container:this.$mapContainer,style:this.getMapStyle(ne),attributionControl:pn,bearing:ir},sr))),this.map.on("load",this.handleCameraChanged),this.map.on("move",this.handleCameraChanged),this.handleCameraChanged();case 9:case"end":return ni.stop()}},xt,this)}));function Q(){return yt.apply(this,arguments)}return Q}()},{key:"destroy",value:function(){this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}},{key:"emit",value:function(Q){for(var xt,wt=arguments.length,ae=new Array(wt>1?wt-1:0),ke=1;ke<wt;ke++)ae[ke-1]=arguments[ke];(xt=this.eventEmitter).emit.apply(xt,[Q].concat(ae))}},{key:"once",value:function(Q){for(var xt,wt=arguments.length,ae=new Array(wt>1?wt-1:0),ke=1;ke<wt;ke++)ae[ke-1]=arguments[ke];(xt=this.eventEmitter).once.apply(xt,[Q].concat(ae))}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"exportMap",value:function(Q){var xt=this.map.getCanvas(),wt=Q==="jpg"?xt==null?void 0:xt.toDataURL("image/jpeg"):xt==null?void 0:xt.toDataURL("image/png");return wt}},{key:"onCameraChanged",value:function(Q){this.cameraChangedCallback=Q}},{key:"creatAmapContainer",value:function(Q){var xt=Q;typeof Q=="string"&&(xt=document.getElementById(Q));var wt=document.createElement("div");return wt.style.cssText+=`
      position: absolute;
      top: 0;
      height: 100%;
      width: 100%;
    `,wt.id="l7_mapbox_div"+bo++,xt.appendChild(wt),wt}},{key:"getMapStyle",value:function(Q){return typeof Q!="string"?Q:Jo[Q]?Jo[Q]:Q}}]),jt}(),ki),qn=_()(Un.prototype,"config",[$s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kn=_()(Un.prototype,"configService",[Ne],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xr=_()(Un.prototype,"logger",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Si=_()(Un.prototype,"coordinateSystemService",[Wt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ti=_()(Un.prototype,"eventEmitter",[Ee],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Un))||an);function Qa(jt){var yt=Ao();return function(){var xt=u()(jt),wt;if(yt){var ae=u()(this).constructor;wt=Reflect.construct(xt,arguments,ae)}else wt=xt.apply(this,arguments);return a()(this,wt)}}function Ao(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}L("BGjm")(`/* @antv/l7-maps */
.mapboxgl-ctrl-logo {
 display: none !important;
}
`);var as=function(jt){n()(Q,jt);var yt=Qa(Q);function Q(){return s()(this,Q),yt.apply(this,arguments)}return r()(Q,[{key:"getServiceConstructor",value:function(){return Eo}}]),Q}(Z);function No(jt,yt){var Q=Object.keys(jt);if(Object.getOwnPropertySymbols){var xt=Object.getOwnPropertySymbols(jt);yt&&(xt=xt.filter(function(wt){return Object.getOwnPropertyDescriptor(jt,wt).enumerable})),Q.push.apply(Q,xt)}return Q}function xs(jt){for(var yt=1;yt<arguments.length;yt++){var Q=arguments[yt]!=null?arguments[yt]:{};yt%2?No(Object(Q),!0).forEach(function(xt){Co(jt,xt,Q[xt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(jt,Object.getOwnPropertyDescriptors(Q)):No(Object(Q)).forEach(function(xt){Object.defineProperty(jt,xt,Object.getOwnPropertyDescriptor(Q,xt))})}return jt}function Co(jt,yt,Q){return yt in jt?Object.defineProperty(jt,yt,{value:Q,enumerable:!0,configurable:!0,writable:!0}):jt[yt]=Q,jt}function qa(jt,yt){return dr(jt)||yn(jt,yt)||ls(jt,yt)||Ts()}function Ts(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ls(jt,yt){if(!!jt){if(typeof jt=="string")return wa(jt,yt);var Q=Object.prototype.toString.call(jt).slice(8,-1);if(Q==="Object"&&jt.constructor&&(Q=jt.constructor.name),Q==="Map"||Q==="Set")return Array.from(jt);if(Q==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Q))return wa(jt,yt)}}function wa(jt,yt){(yt==null||yt>jt.length)&&(yt=jt.length);for(var Q=0,xt=new Array(yt);Q<yt;Q++)xt[Q]=jt[Q];return xt}function yn(jt,yt){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(jt)))){var Q=[],xt=!0,wt=!1,ae=void 0;try{for(var ke=jt[Symbol.iterator](),gn;!(xt=(gn=ke.next()).done)&&(Q.push(gn.value),!(yt&&Q.length===yt));xt=!0);}catch(pn){wt=!0,ae=pn}finally{try{!xt&&ke.return!=null&&ke.return()}finally{if(wt)throw ae}}return Q}}function dr(jt){if(Array.isArray(jt))return jt}var kr=E.a.memo(function(jt){var yt=jt.style,Q=jt.className,xt=jt.map,wt=jt.option,ae=jt.onSceneLoaded,ke=Object(U.createRef)(),gn=Object(U.useState)(),pn=qa(gn,2),On=pn[0],ne=pn[1];return Object(U.useEffect)(function(){var Me=new t.Scene(xs(xs({id:ke.current},wt),{},{map:new as(xt)}));return Me.on("loaded",function(){ne(Me),ae&&ae(Me)}),function(){Me.destroy()}},[]),Object(U.useEffect)(function(){On&&xt.style&&On.setMapStyle(xt.style)},[JSON.stringify(xt.style)]),Object(U.useEffect)(function(){On&&xt.zoom&&On.setZoom(xt.zoom)},[xt.zoom]),Object(U.useEffect)(function(){On&&xt.center&&On.setCenter(xt.center)},[JSON.stringify(xt.center)]),Object(U.useEffect)(function(){On&&xt.pitch!==void 0&&On.setPitch(xt.pitch||0)},[xt.pitch]),Object(U.useEffect)(function(){On&&xt.rotation&&On.setRotation(xt.rotation)},[xt.rotation]),E.a.createElement(T.Provider,{value:On},Object(U.createElement)("div",{ref:ke,style:yt,className:Q},On&&jt.children))}),Ui=kr,Ja=L("PJYZ"),So=L.n(Ja),po=L("QkVN"),ea=L.n(po),to=L("uhBA"),bs=L("cDf5"),Es=L.n(bs),ka=L("zvhG"),bu=L.n(ka);function Wo(jt,yt){var Q;if(typeof Symbol=="undefined"||jt[Symbol.iterator]==null){if(Array.isArray(jt)||(Q=As(jt))||yt&&jt&&typeof jt.length=="number"){Q&&(jt=Q);var xt=0,wt=function(){};return{s:wt,n:function(){return xt>=jt.length?{done:!0}:{done:!1,value:jt[xt++]}},e:function(On){throw On},f:wt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ae=!0,ke=!1,gn;return{s:function(){Q=jt[Symbol.iterator]()},n:function(){var On=Q.next();return ae=On.done,On},e:function(On){ke=!0,gn=On},f:function(){try{!ae&&Q.return!=null&&Q.return()}finally{if(ke)throw gn}}}}function As(jt,yt){if(!!jt){if(typeof jt=="string")return Qs(jt,yt);var Q=Object.prototype.toString.call(jt).slice(8,-1);if(Q==="Object"&&jt.constructor&&(Q=jt.constructor.name),Q==="Map"||Q==="Set")return Array.from(jt);if(Q==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Q))return Qs(jt,yt)}}function Qs(jt,yt){(yt==null||yt>jt.length)&&(yt=jt.length);for(var Q=0,xt=new Array(yt);Q<yt;Q++)xt[Q]=jt[Q];return xt}var vs;function ps(jt,yt,Q){var xt=Q-yt,wt=((jt-yt)%xt+xt)%xt+yt;return wt===yt?Q:wt}function cs(jt,yt,Q){return Math.min(Q,Math.max(yt,jt))}function gs(jt,yt,Q){return jt*(1-Q)+yt*Q}function Cs(jt,yt,Q,xt){var wt=new bu.a(jt,yt,Q,xt);return function(ae){return wt.solve(ae)}}var Pu=Cs(.25,.1,.25,1);function ju(){return window.matchMedia?(vs==null&&(vs=window.matchMedia("(prefers-reduced-motion: reduce)")),vs.matches):!1}function fo(jt,yt){var Q={},xt=Wo(yt),wt;try{for(xt.s();!(wt=xt.n()).done;){var ae=wt.value;ae in jt&&(Q[ae]=jt[ae])}}catch(ke){xt.e(ke)}finally{xt.f()}return Q}var Ns=window.performance&&window.performance.now?window.performance.now.bind(window.performance):Date.now.bind(Date),Bu=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,ll=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame;function cl(jt){var yt=Bu(jt);return{cancel:function(){return ll(yt)}}}var Xu=function(){function jt(yt,Q){s()(this,jt),this.ne=void 0,this.sw=void 0,yt&&(Q?this.setSouthWest(yt).setNorthEast(Q):yt.length===4?this.setSouthWest([yt[0],yt[1]]).setNorthEast([yt[2],yt[3]]):this.setSouthWest(yt[0]).setNorthEast(yt[1]))}return r()(jt,[{key:"setNorthEast",value:function(Q){return this.ne=Q instanceof Ra?new Ra(Q.lng,Q.lat):Ra.convert(Q),this}},{key:"setSouthWest",value:function(Q){return this.sw=Q instanceof Ra?new Ra(Q.lng,Q.lat):Ra.convert(Q),this}},{key:"extend",value:function(Q){var xt=this.sw,wt=this.ne,ae,ke;if(Q instanceof Ra)ae=Q,ke=Q;else if(Q instanceof jt){if(ae=Q.sw,ke=Q.ne,!ae||!ke)return this}else{if(Array.isArray(Q))if(Q.length===4||Q.every(Array.isArray)){var gn=Q;return this.extend(jt.convert(gn))}else{var pn=Q;return this.extend(Ra.convert(pn))}return this}return!xt&&!wt?(this.sw=new Ra(ae.lng,ae.lat),this.ne=new Ra(ke.lng,ke.lat)):(xt.lng=Math.min(ae.lng,xt.lng),xt.lat=Math.min(ae.lat,xt.lat),wt.lng=Math.max(ke.lng,wt.lng),wt.lat=Math.max(ke.lat,wt.lat)),this}},{key:"getCenter",value:function(){return new Ra((this.sw.lng+this.ne.lng)/2,(this.sw.lat+this.ne.lat)/2)}},{key:"getSouthWest",value:function(){return this.sw}},{key:"getNorthEast",value:function(){return this.ne}},{key:"getNorthWest",value:function(){return new Ra(this.getWest(),this.getNorth())}},{key:"getSouthEast",value:function(){return new Ra(this.getEast(),this.getSouth())}},{key:"getWest",value:function(){return this.sw.lng}},{key:"getSouth",value:function(){return this.sw.lat}},{key:"getEast",value:function(){return this.ne.lng}},{key:"getNorth",value:function(){return this.ne.lat}},{key:"toArray",value:function(){return[this.sw.toArray(),this.ne.toArray()]}},{key:"toString",value:function(){return"LngLatBounds(".concat(this.sw.toString(),", ").concat(this.ne.toString(),")")}},{key:"isEmpty",value:function(){return!(this.sw&&this.ne)}},{key:"contains",value:function(Q){var xt=Ra.convert(Q),wt=xt.lng,ae=xt.lat,ke=this.sw.lat<=ae&&ae<=this.ne.lat,gn=this.sw.lng<=wt&&wt<=this.ne.lng;return this.sw.lng>this.ne.lng&&(gn=this.sw.lng>=wt&&wt>=this.ne.lng),ke&&gn}}],[{key:"convert",value:function(Q){return Q instanceof jt?Q:new jt(Q)}}]),jt}(),Io=63710088e-1,Ra=function(){function jt(yt,Q){if(s()(this,jt),this.lng=void 0,this.lat=void 0,isNaN(yt)||isNaN(Q))throw new Error("Invalid LngLat object: (".concat(yt,", ").concat(Q,")"));if(this.lng=+yt,this.lat=+Q,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}return r()(jt,[{key:"wrap",value:function(){return new jt(ps(this.lng,-180,180),this.lat)}},{key:"toArray",value:function(){return[this.lng,this.lat]}},{key:"toBounds",value:function(){var Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,xt=40075017,wt=360*Q/xt,ae=wt/Math.cos(Math.PI/180*this.lat);return new Xu(new jt(this.lng-ae,this.lat-wt),new jt(this.lng+ae,this.lat+wt))}},{key:"toString",value:function(){return"LngLat(".concat(this.lng,", ").concat(this.lat,")")}},{key:"distanceTo",value:function(Q){var xt=Math.PI/180,wt=this.lat*xt,ae=Q.lat*xt,ke=Math.sin(wt)*Math.sin(ae)+Math.cos(wt)*Math.cos(ae)*Math.cos((Q.lng-this.lng)*xt),gn=Io*Math.acos(Math.min(ke,1));return gn}}],[{key:"convert",value:function(Q){if(Q instanceof jt)return Q;if(Array.isArray(Q)&&(Q.length===2||Q.length===3))return new jt(Number(Q[0]),Number(Q[1]));if(!Array.isArray(Q)&&Es()(Q)==="object"&&Q!==null){var xt="lng"in Q?Q.lng:Q.lon;return new jt(Number(xt),Number(Q.lat))}throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}]),jt}(),Ea=function(){function jt(yt,Q){s()(this,jt),this.x=void 0,this.y=void 0,this.x=yt,this.y=Q}return r()(jt,[{key:"clone",value:function(){return new jt(this.x,this.y)}},{key:"_add",value:function(Q){return this.x+=Q.x,this.y+=Q.y,this}},{key:"add",value:function(Q){return this.clone()._add(Q)}},{key:"_sub",value:function(Q){return this.x-=Q.x,this.y-=Q.y,this}},{key:"sub",value:function(Q){return this.clone()._sub(Q)}},{key:"_multByPoint",value:function(Q){return this.x*=Q.x,this.y*=Q.y,this}},{key:"multByPoint",value:function(Q){return this.clone()._multByPoint(Q)}},{key:"_divByPoint",value:function(Q){return this.x/=Q.x,this.y/=Q.y,this}},{key:"divByPoint",value:function(Q){return this.clone()._divByPoint(Q)}},{key:"_mult",value:function(Q){return this.x*=Q,this.y*=Q,this}},{key:"mult",value:function(Q){return this.clone()._mult(Q)}},{key:"_div",value:function(Q){return this.x/=Q,this.y/=Q,this}},{key:"div",value:function(Q){return this.clone()._div(Q)}},{key:"_rotate",value:function(Q){var xt=Math.cos(Q),wt=Math.sin(Q),ae=xt*this.x-wt*this.y,ke=wt*this.x+xt*this.y;return this.x=ae,this.y=ke,this}},{key:"rotate",value:function(Q){return this.clone()._rotate(Q)}},{key:"_rotateAround",value:function(Q,xt){var wt=Math.cos(Q),ae=Math.sin(Q),ke=xt.x+wt*(this.x-xt.x)-ae*(this.y-xt.y),gn=xt.y+ae*(this.x-xt.x)+wt*(this.y-xt.y);return this.x=ke,this.y=gn,this}},{key:"roateAround",value:function(Q,xt){return this.clone()._rotateAround(Q,xt)}},{key:"_matMult",value:function(Q){var xt=Q[0]*this.x+Q[1]*this.y,wt=Q[2]*this.x+Q[3]*this.y;return this.x=xt,this.y=wt,this}},{key:"matMult",value:function(Q){return this.clone()._matMult(Q)}},{key:"_unit",value:function(){return this.div(this.mag()),this}},{key:"unit",value:function(){return this.clone()._unit()}},{key:"_perp",value:function(){var Q=this.y;return this.y=this.x,this.x=-Q,this}},{key:"perp",value:function(){return this.clone()._perp()}},{key:"_round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"round",value:function(){return this.clone()._round()}},{key:"mag",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"equals",value:function(Q){return this.x===Q.x&&this.y===Q.y}},{key:"dist",value:function(Q){return Math.sqrt(this.distSqr(Q))}},{key:"distSqr",value:function(Q){var xt=Q.x-this.x,wt=Q.y-this.y;return xt*xt+wt*wt}},{key:"angle",value:function(){return Math.atan2(this.y,this.x)}},{key:"angleTo",value:function(Q){return Math.atan2(this.y-Q.y,this.x-Q.x)}},{key:"angleWith",value:function(Q){return this.angleWithSep(Q.x,Q.y)}},{key:"angleWithSep",value:function(Q,xt){return Math.atan2(this.x*xt-this.y*Q,this.x*Q+this.y*xt)}}],[{key:"convert",value:function(Q){return Q instanceof jt?Q:Array.isArray(Q)?new jt(Q[0],Q[1]):Q}}]),jt}(),Ro=function(){function jt(){var yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,xt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,wt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(s()(this,jt),this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,isNaN(yt)||yt<0||isNaN(Q)||Q<0||isNaN(xt)||xt<0||isNaN(wt)||wt<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=yt,this.bottom=Q,this.left=xt,this.right=wt}return r()(jt,[{key:"interpolate",value:function(Q,xt,wt){return xt.top!=null&&Q.top!=null&&(this.top=gs(Q.top,xt.top,wt)),xt.bottom!=null&&Q.bottom!=null&&(this.bottom=gs(Q.bottom,xt.bottom,wt)),xt.left!=null&&Q.left!=null&&(this.left=gs(Q.left,xt.left,wt)),xt.right!=null&&Q.right!=null&&(this.right=gs(Q.right,xt.right,wt)),this}},{key:"getCenter",value:function(Q,xt){var wt=cs((this.left+Q-this.right)/2,0,Q),ae=cs((this.top+xt-this.bottom)/2,0,xt);return new Ea(wt,ae)}},{key:"equals",value:function(Q){return this.top===Q.top&&this.bottom===Q.bottom&&this.left===Q.left&&this.right===Q.right}},{key:"clone",value:function(){return new jt(this.top,this.bottom,this.left,this.right)}},{key:"toJSON",value:function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}]),jt}(),pu=2*Math.PI*Io;function Ml(jt){return pu*Math.cos(jt*Math.PI/180)}function Fs(jt){return(180+jt)/360}function Ss(jt){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+jt*Math.PI/360)))/360}function au(jt,yt){return jt/Ml(yt)}function qs(jt){return jt*360-180}function Ds(jt){var yt=180-jt*360;return 360/Math.PI*Math.atan(Math.exp(yt*Math.PI/180))-90}function Ju(jt,yt){return jt*Ml(Ds(yt))}function ou(jt){return 1/Math.cos(jt*Math.PI/180)}var Wa=function(){function jt(yt,Q){var xt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;s()(this,jt),this.x=void 0,this.y=void 0,this.z=void 0,this.x=+yt,this.y=+Q,this.z=+xt}return r()(jt,[{key:"toLngLat",value:function(){return new Ra(qs(this.x),Ds(this.y))}},{key:"toAltitude",value:function(){return Ju(this.z,this.y)}},{key:"meterInMercatorCoordinateUnits",value:function(){return 1/pu*ou(Ds(this.y))}}],[{key:"fromLngLat",value:function(Q){var xt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,wt=Ra.convert(Q);return new jt(Fs(wt.lng),Ss(wt.lat),au(xt,wt.lat))}}]),jt}();function Pl(jt,yt){var Q;if(typeof Symbol=="undefined"||jt[Symbol.iterator]==null){if(Array.isArray(jt)||(Q=$l(jt))||yt&&jt&&typeof jt.length=="number"){Q&&(jt=Q);var xt=0,wt=function(){};return{s:wt,n:function(){return xt>=jt.length?{done:!0}:{done:!1,value:jt[xt++]}},e:function(On){throw On},f:wt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ae=!0,ke=!1,gn;return{s:function(){Q=jt[Symbol.iterator]()},n:function(){var On=Q.next();return ae=On.done,On},e:function(On){ke=!0,gn=On},f:function(){try{!ae&&Q.return!=null&&Q.return()}finally{if(ke)throw gn}}}}function $l(jt,yt){if(!!jt){if(typeof jt=="string")return Tl(jt,yt);var Q=Object.prototype.toString.call(jt).slice(8,-1);if(Q==="Object"&&jt.constructor&&(Q=jt.constructor.name),Q==="Map"||Q==="Set")return Array.from(jt);if(Q==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Q))return Tl(jt,yt)}}function Tl(jt,yt){(yt==null||yt>jt.length)&&(yt=jt.length);for(var Q=0,xt=new Array(yt);Q<yt;Q++)xt[Q]=jt[Q];return xt}var Ql=8192,Nu=function(){function jt(yt,Q,xt,wt,ae){s()(this,jt),this.tileSize=void 0,this.tileZoom=void 0,this.lngRange=void 0,this.latRange=void 0,this.maxValidLatitude=void 0,this.scale=void 0,this.width=void 0,this.height=void 0,this.angle=void 0,this.rotationMatrix=void 0,this.pixelsToGLUnits=void 0,this.cameraToCenterDistance=void 0,this.mercatorMatrix=void 0,this.projMatrix=void 0,this.invProjMatrix=void 0,this.alignedProjMatrix=void 0,this.pixelMatrix=void 0,this.pixelMatrixInverse=void 0,this.glCoordMatrix=void 0,this.labelPlaneMatrix=void 0,this._fov=void 0,this._pitch=void 0,this._zoom=void 0,this._renderWorldCopies=void 0,this._minZoom=void 0,this._maxZoom=void 0,this._minPitch=void 0,this._maxPitch=void 0,this._center=void 0,this.zoomFraction=void 0,this.unmodified=void 0,this.edgeInsets=void 0,this.constraining=void 0,this.posMatrixCache=void 0,this.alignedPosMatrixCache=void 0,this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=ae===void 0?!0:ae,this._minZoom=yt||0,this._maxZoom=Q||22,this._minPitch=xt==null?0:xt,this._maxPitch=wt==null?60:wt,this.setMaxBounds(),this.width=0,this.height=0,this._center=new Ra(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this.unmodified=!0,this.edgeInsets=new Ro,this.posMatrixCache={},this.alignedPosMatrixCache={}}return r()(jt,[{key:"minZoom",get:function(){return this._minZoom},set:function(Q){this._minZoom!==Q&&(this._minZoom=Q,this.zoom=Math.max(this.zoom,Q))}},{key:"maxZoom",get:function(){return this._maxZoom},set:function(Q){this._maxZoom!==Q&&(this._maxZoom=Q,this.zoom=Math.min(this.zoom,Q))}},{key:"minPitch",get:function(){return this._minPitch},set:function(Q){this._minPitch!==Q&&(this._minPitch=Q,this._pitch=Math.max(this._pitch,Q))}},{key:"maxPitch",get:function(){return this._maxPitch},set:function(Q){this._maxPitch!==Q&&(this._maxPitch=Q,this._pitch=Math.min(this._pitch,Q))}},{key:"renderWorldCopies",get:function(){return this._renderWorldCopies},set:function(Q){Q===void 0?Q=!0:Q===null&&(Q=!1),this._renderWorldCopies=Q}},{key:"worldSize",get:function(){return this.tileSize*this.scale}},{key:"centerOffset",get:function(){return this.centerPoint._sub(this.size._div(2))}},{key:"size",get:function(){return new Ea(this.width,this.height)}},{key:"bearing",get:function(){return-this.angle/Math.PI*180},set:function(Q){var xt=-ps(Q,-180,180)*Math.PI/180;this.angle!==xt&&(this.unmodified=!1,this.angle=xt,this.calcMatrices(),this.rotationMatrix=Nt.a.create(),Nt.a.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))}},{key:"pitch",get:function(){return this._pitch/Math.PI*180},set:function(Q){var xt=cs(Q,this._minPitch,this._maxPitch)/180*Math.PI;this._pitch!==xt&&(this.unmodified=!1,this._pitch=xt,this.calcMatrices())}},{key:"fov",get:function(){return this._fov/Math.PI*180},set:function(Q){Q=Math.max(.01,Math.min(60,Q)),this._fov!==Q&&(this.unmodified=!1,this._fov=Q/180*Math.PI,this.calcMatrices())}},{key:"zoom",get:function(){return this._zoom},set:function(Q){var xt=Math.min(Math.max(Q,this._minZoom),this._maxZoom);this._zoom!==xt&&(this.unmodified=!1,this._zoom=xt,this.scale=this.zoomScale(xt),this.tileZoom=Math.floor(xt),this.zoomFraction=xt-this.tileZoom,this.constrain(),this.calcMatrices())}},{key:"center",get:function(){return this._center},set:function(Q){Q.lat===this._center.lat&&Q.lng===this._center.lng||(this.unmodified=!1,this._center=Q,this.constrain(),this.calcMatrices())}},{key:"padding",get:function(){return this.edgeInsets.toJSON()},set:function(Q){this.edgeInsets.equals(Q)||(this.unmodified=!1,this.edgeInsets.interpolate(this.edgeInsets,Q,1),this.calcMatrices())}},{key:"centerPoint",get:function(){return this.edgeInsets.getCenter(this.width,this.height)}},{key:"point",get:function(){return this.project(this.center)}},{key:"clone",value:function(){var Q=new jt(this._minZoom,this._maxZoom,this._minPitch,this._maxPitch,this._renderWorldCopies);return Q.tileSize=this.tileSize,Q.latRange=this.latRange,Q.width=this.width,Q.height=this.height,Q.center=this._center,Q.zoom=this.zoom,Q.angle=this.angle,Q.fov=this._fov,Q.pitch=this._pitch,Q.unmodified=this.unmodified,Q.edgeInsets=this.edgeInsets.clone(),Q.calcMatrices(),Q}},{key:"isPaddingEqual",value:function(Q){return this.edgeInsets.equals(Q)}},{key:"interpolatePadding",value:function(Q,xt,wt){this.unmodified=!1,this.edgeInsets.interpolate(Q,xt,wt),this.constrain(),this.calcMatrices()}},{key:"coveringZoomLevel",value:function(Q){var xt=(Q.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/Q.tileSize));return Math.max(0,xt)}},{key:"resize",value:function(Q,xt){this.width=Q,this.height=xt,this.pixelsToGLUnits=[2/Q,-2/xt],this.constrain(),this.calcMatrices()}},{key:"zoomScale",value:function(Q){return Math.pow(2,Q)}},{key:"scaleZoom",value:function(Q){return Math.log(Q)/Math.LN2}},{key:"project",value:function(Q){var xt=cs(Q.lat,-this.maxValidLatitude,this.maxValidLatitude);return new Ea(Fs(Q.lng)*this.worldSize,Ss(xt)*this.worldSize)}},{key:"unproject",value:function(Q){return new Wa(Q.x/this.worldSize,Q.y/this.worldSize).toLngLat()}},{key:"setLocationAtPoint",value:function(Q,xt){var wt=this.pointCoordinate(xt),ae=this.pointCoordinate(this.centerPoint),ke=this.locationCoordinate(Q),gn=new Wa(ke.x-(wt.x-ae.x),ke.y-(wt.y-ae.y));this.center=this.coordinateLocation(gn),this._renderWorldCopies&&(this.center=this.center.wrap())}},{key:"pointCoordinate",value:function(Q){var xt=0,wt=new Float32Array([Q.x,Q.y,0,1]),ae=new Float32Array([Q.x,Q.y,1,1]);Nt.e.transformMat4(wt,wt,this.pixelMatrixInverse),Nt.e.transformMat4(ae,ae,this.pixelMatrixInverse);var ke=wt[3],gn=ae[3],pn=wt[0]/ke,On=ae[0]/gn,ne=wt[1]/ke,Me=ae[1]/gn,Ze=wt[2]/ke,In=ae[2]/gn,ir=Ze===In?0:(xt-Ze)/(In-Ze);return new Wa(gs(pn,On,ir)/this.worldSize,gs(ne,Me,ir)/this.worldSize)}},{key:"getBounds",value:function(){return new Xu().extend(this.pointLocation(new Ea(0,0))).extend(this.pointLocation(new Ea(this.width,0))).extend(this.pointLocation(new Ea(this.width,this.height))).extend(this.pointLocation(new Ea(0,this.height)))}},{key:"getMaxBounds",value:function(){return!this.latRange||this.latRange.length!==2||!this.lngRange||this.lngRange.length!==2?null:new Xu([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]])}},{key:"setMaxBounds",value:function(Q){Q?(this.lngRange=[Q.getWest(),Q.getEast()],this.latRange=[Q.getSouth(),Q.getNorth()],this.constrain()):(this.lngRange=void 0,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}},{key:"customLayerMatrix",value:function(){return this.mercatorMatrix.slice()}},{key:"maxPitchScaleFactor",value:function(){if(!this.pixelMatrixInverse)return 1;var Q=this.pointCoordinate(new Ea(0,0)),xt=new Float32Array([Q.x*this.worldSize,Q.y*this.worldSize,0,1]),wt=Nt.e.transformMat4(xt,xt,this.pixelMatrix);return wt[3]/this.cameraToCenterDistance}},{key:"getCameraPoint",value:function(){var Q=this._pitch,xt=Math.tan(Q)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new Ea(0,xt))}},{key:"getCameraQueryGeometry",value:function(Q){var xt=this.getCameraPoint();if(Q.length===1)return[Q[0],xt];var wt=xt.x,ae=xt.y,ke=xt.x,gn=xt.y,pn=Pl(Q),On;try{for(pn.s();!(On=pn.n()).done;){var ne=On.value;wt=Math.min(wt,ne.x),ae=Math.min(ae,ne.y),ke=Math.max(ke,ne.x),gn=Math.max(gn,ne.y)}}catch(Me){pn.e(Me)}finally{pn.f()}return[new Ea(wt,ae),new Ea(ke,ae),new Ea(ke,gn),new Ea(wt,gn),new Ea(wt,ae)]}},{key:"coordinatePoint",value:function(Q){var xt=Nt.e.fromValues(Q.x*this.worldSize,Q.y*this.worldSize,0,1);return Nt.e.transformMat4(xt,xt,this.pixelMatrix),new Ea(xt[0]/xt[3],xt[1]/xt[3])}},{key:"locationPoint",value:function(Q){return this.coordinatePoint(this.locationCoordinate(Q))}},{key:"pointLocation",value:function(Q){return this.coordinateLocation(this.pointCoordinate(Q))}},{key:"locationCoordinate",value:function(Q){return Wa.fromLngLat(Q)}},{key:"coordinateLocation",value:function(Q){return Q.toLngLat()}},{key:"getProjectionMatrix",value:function(){return this.projMatrix}},{key:"constrain",value:function(){if(!(!this.center||!this.width||!this.height||this.constraining)){this.constraining=!0;var Q=-90,xt=90,wt=-180,ae=180,ke,gn,pn,On,ne=this.size,Me=this.unmodified;if(this.latRange){var Ze=this.latRange;Q=Ss(Ze[1])*this.worldSize,xt=Ss(Ze[0])*this.worldSize,ke=xt-Q<ne.y?ne.y/(xt-Q):0}if(this.lngRange){var In=this.lngRange;wt=Fs(In[0])*this.worldSize,ae=Fs(In[1])*this.worldSize,gn=ae-wt<ne.x?ne.x/(ae-wt):0}var ir=this.point,or=Math.max(gn||0,ke||0);if(or){this.center=this.unproject(new Ea(gn?(ae+wt)/2:ir.x,ke?(xt+Q)/2:ir.y)),this.zoom+=this.scaleZoom(or),this.unmodified=Me,this.constraining=!1;return}if(this.latRange){var sr=ir.y,wr=ne.y/2;sr-wr<Q&&(On=Q+wr),sr+wr>xt&&(On=xt-wr)}if(this.lngRange){var ni=ir.x,Yr=ne.x/2;ni-Yr<wt&&(pn=wt+Yr),ni+Yr>ae&&(pn=ae-Yr)}(pn!==void 0||On!==void 0)&&(this.center=this.unproject(new Ea(pn!==void 0?pn:ir.x,On!==void 0?On:ir.y))),this.unmodified=Me,this.constraining=!1}}},{key:"calcMatrices",value:function(){if(!!this.height){var Q=this._fov/2,xt=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(Q)*this.height;var wt=Math.PI/2+this._pitch,ae=this._fov*(.5+xt.y/this.height),ke=Math.sin(ae)*this.cameraToCenterDistance/Math.sin(cs(Math.PI-wt-ae,.01,Math.PI-.01)),gn=this.point,pn=gn.x,On=gn.y,ne=Math.cos(Math.PI/2-this._pitch)*ke+this.cameraToCenterDistance,Me=ne*1.01,Ze=this.height/50,In=Nt.b.create();Nt.b.perspective(In,this._fov,this.width/this.height,Ze,Me),In[8]=-xt.x*2/this.width,In[9]=xt.y*2/this.height,Nt.b.scale(In,In,[1,-1,1]),Nt.b.translate(In,In,[0,0,-this.cameraToCenterDistance]),Nt.b.rotateX(In,In,this._pitch),Nt.b.rotateZ(In,In,this.angle),Nt.b.translate(In,In,[-pn,-On,0]),this.mercatorMatrix=Nt.b.scale(Nt.b.create(),In,[this.worldSize,this.worldSize,this.worldSize]),Nt.b.scale(In,In,Nt.d.fromValues(1,1,au(1,this.center.lat)*this.worldSize)),this.projMatrix=In,this.invProjMatrix=Nt.b.invert(Nt.b.create(),this.projMatrix);var ir=this.width%2/2,or=this.height%2/2,sr=Math.cos(this.angle),wr=Math.sin(this.angle),ni=pn-Math.round(pn)+sr*ir+wr*or,Yr=On-Math.round(On)+sr*or+wr*ir,ei=Nt.b.clone(In);if(Nt.b.translate(ei,ei,[ni>.5?ni-1:ni,Yr>.5?Yr-1:Yr,0]),this.alignedProjMatrix=ei,In=Nt.b.create(),Nt.b.scale(In,In,[this.width/2,-this.height/2,1]),Nt.b.translate(In,In,[1,-1,0]),this.labelPlaneMatrix=In,In=Nt.b.create(),Nt.b.scale(In,In,[1,-1,1]),Nt.b.translate(In,In,[-1,-1,0]),Nt.b.scale(In,In,[2/this.width,2/this.height,1]),this.glCoordMatrix=In,this.pixelMatrix=Nt.b.multiply(Nt.b.create(),this.labelPlaneMatrix,this.projMatrix),In=Nt.b.invert(Nt.b.create(),this.pixelMatrix),!In)throw new Error("failed to invert matrix");this.pixelMatrixInverse=In,this.posMatrixCache={},this.alignedPosMatrixCache={}}}}]),jt}(),Ha=function jt(yt){var Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};s()(this,jt),this.type=void 0,ea()(this,Q),this.type=yt};function su(jt){var yt=Al();return function(){var xt=u()(jt),wt;if(yt){var ae=u()(this).constructor;wt=Reflect.construct(xt,arguments,ae)}else wt=xt.apply(this,arguments);return a()(this,wt)}}function Al(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}var ms=function(jt){n()(Q,jt);var yt=su(Q);function Q(xt){var wt;s()(this,Q),wt=yt.call(this),wt.transform=void 0,wt.options=void 0,wt.moving=void 0,wt.zooming=void 0,wt.rotating=void 0,wt.pitching=void 0,wt.padding=void 0,wt.bearingSnap=void 0,wt.easeEndTimeoutID=void 0,wt.easeStart=void 0,wt.easeOptions=void 0,wt.easeId=void 0,wt.onEaseFrame=void 0,wt.onEaseEnd=void 0,wt.easeFrameId=void 0,wt.renderFrameCallback=function(){var ne=Math.min((Ns()-wt.easeStart)/wt.easeOptions.duration,1);wt.onEaseFrame(wt.easeOptions.easing(ne)),ne<1?wt.easeFrameId=wt.requestRenderFrame(wt.renderFrameCallback):wt.stop()},wt.options=xt;var ae=xt.minZoom,ke=xt.maxZoom,gn=xt.minPitch,pn=xt.maxPitch,On=xt.renderWorldCopies;return wt.moving=!1,wt.zooming=!1,wt.bearingSnap=xt.bearingSnap,wt.transform=new Nu(ae,ke,gn,pn,On),wt}return r()(Q,[{key:"requestRenderFrame",value:function(wt){return 0}},{key:"cancelRenderFrame",value:function(wt){}},{key:"getCenter",value:function(){var wt=this.transform.center,ae=wt.lng,ke=wt.lat;return new Ra(ae,ke)}},{key:"getZoom",value:function(){return this.transform.zoom}},{key:"getPitch",value:function(){return this.transform.pitch}},{key:"setCenter",value:function(wt,ae){return this.jumpTo({center:wt},ae)}},{key:"setPitch",value:function(wt,ae){return this.jumpTo({pitch:wt},ae),this}},{key:"getBearing",value:function(){return this.transform.bearing}},{key:"panTo",value:function(wt,ae,ke){return this.easeTo(ea()({center:wt},ae),ke)}},{key:"zoomOut",value:function(wt,ae){return this.zoomTo(this.getZoom()-1,wt,ae),this}},{key:"setBearing",value:function(wt,ae){return this.jumpTo({bearing:wt},ae),this}},{key:"setZoom",value:function(wt,ae){return this.jumpTo({zoom:wt},ae),this}},{key:"zoomIn",value:function(wt,ae){return this.zoomTo(this.getZoom()+1,wt,ae),this}},{key:"zoomTo",value:function(wt,ae,ke){return this.easeTo(ea()({zoom:wt},ae),ke)}},{key:"getPadding",value:function(){return this.transform.padding}},{key:"setPadding",value:function(wt,ae){return this.jumpTo({padding:wt},ae),this}},{key:"rotateTo",value:function(wt,ae,ke){return this.easeTo(ea()({bearing:wt},ae),ke)}},{key:"resetNorth",value:function(wt,ae){return this.rotateTo(0,ea()({duration:1e3},wt),ae),this}},{key:"resetNorthPitch",value:function(wt,ae){return this.easeTo(ea()({bearing:0,pitch:0,duration:1e3},wt),ae),this}},{key:"fitBounds",value:function(wt,ae,ke){return this.fitInternal(this.cameraForBounds(wt,ae),ae,ke)}},{key:"cameraForBounds",value:function(wt,ae){return wt=Xu.convert(wt),this.cameraForBoxAndBearing(wt.getNorthWest(),wt.getSouthEast(),0,ae)}},{key:"snapToNorth",value:function(wt,ae){return Math.abs(this.getBearing())<this.bearingSnap?this.resetNorth(wt,ae):this}},{key:"jumpTo",value:function(){var wt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ae=arguments.length>1?arguments[1]:void 0;this.stop();var ke=this.transform,gn=!1,pn=!1,On=!1;return wt.zoom&&ke.zoom!==+wt.zoom&&(gn=!0,ke.zoom=+wt.zoom),wt.center!==void 0&&(ke.center=Ra.convert(wt.center)),wt.bearing&&ke.bearing!==+wt.bearing&&(pn=!0,ke.bearing=+wt.bearing),wt.pitch&&ke.pitch!==+wt.pitch&&(On=!0,ke.pitch=+wt.pitch),wt.padding!=null&&!ke.isPaddingEqual(wt.padding)&&(ke.padding=wt.padding),this.emit("movestart",new Ha("movestart",ae)),this.emit("move",new Ha("move",ae)),gn&&(this.emit("zoomstart",new Ha("zoomstart",ae)),this.emit("zoom",new Ha("zoom",ae)),this.emit("zoomend",new Ha("zoomend",ae))),pn&&(this.emit("rotatestart",new Ha("rotatestart",ae)),this.emit("rotate",new Ha("rotate",ae)),this.emit("rotateend",new Ha("rotateend",ae))),On&&(this.emit("pitchstart",new Ha("pitchstart",ae)),this.emit("pitch",new Ha("pitch",ae)),this.emit("pitchend",new Ha("pitchend",ae))),this.emit("moveend",new Ha("moveend",ae))}},{key:"easeTo",value:function(){var wt=this,ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ke=arguments.length>1?arguments[1]:void 0;ae=ea()({offset:[0,0],duration:500,easing:Pu},ae),(ae.animate===!1||!ae.essential&&ju())&&(ae.duration=0);var gn=this.transform,pn=this.getZoom(),On=this.getBearing(),ne=this.getPitch(),Me=this.getPadding(),Ze=ae.zoom?+ae.zoom:pn,In=ae.bearing?this.normalizeBearing(ae.bearing,On):On,ir=ae.pitch?+ae.pitch:ne,or=ae.padding?ae.padding:gn.padding,sr=Ea.convert(ae.offset),wr=gn.centerPoint.add(sr),ni=gn.pointLocation(wr),Yr=Ra.convert(ae.center||ni);this.normalizeCenter(Yr);var ei=gn.project(ni),hi=gn.project(Yr).sub(ei),Ai=gn.zoomScale(Ze-pn),di,ai;ae.around&&(di=Ra.convert(ae.around),ai=gn.locationPoint(di));var Ir={moving:this.moving,zooming:this.zooming,rotating:this.rotating,pitching:this.pitching};return this.zooming=this.zooming||Ze!==pn,this.rotating=this.rotating||On!==In,this.pitching=this.pitching||ir!==ne,this.padding=!gn.isPaddingEqual(or),this.easeId=ae.easeId,this.prepareEase(ke,ae.noMoveStart,Ir),clearTimeout(this.easeEndTimeoutID),this.ease(function(Mr){if(wt.zooming&&(gn.zoom=gs(pn,Ze,Mr)),wt.rotating&&(gn.bearing=gs(On,In,Mr)),wt.pitching&&(gn.pitch=gs(ne,ir,Mr)),wt.padding&&(gn.interpolatePadding(Me,or,Mr),wr=gn.centerPoint.add(sr)),di)gn.setLocationAtPoint(di,ai);else{var vi=gn.zoomScale(gn.zoom-pn),Vi=Ze>pn?Math.min(2,Ai):Math.max(.5,Ai),$r=Math.pow(Vi,1-Mr),ra=gn.unproject(ei.add(hi.mult(Mr*$r)).mult(vi));gn.setLocationAtPoint(gn.renderWorldCopies?ra.wrap():ra,wr)}wt.fireMoveEvents(ke)},function(Mr){wt.afterEase(ke,Mr)},ae),this}},{key:"flyTo",value:function(){var wt=this,ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ke=arguments.length>1?arguments[1]:void 0;if(!ae.essential&&ju()){var gn=fo(ae,["center","zoom","bearing","pitch","around"]);return this.jumpTo(gn,ke)}this.stop(),ae=ea()({offset:[0,0],speed:1.2,curve:1.42,easing:Pu},ae);var pn=this.transform,On=this.getZoom(),ne=this.getBearing(),Me=this.getPitch(),Ze=this.getPadding(),In=ae.zoom?cs(+ae.zoom,pn.minZoom,pn.maxZoom):On,ir=ae.bearing?this.normalizeBearing(ae.bearing,ne):ne,or=ae.pitch?+ae.pitch:Me,sr="padding"in ae?ae.padding:pn.padding,wr=pn.zoomScale(In-On),ni=Ea.convert(ae.offset),Yr=pn.centerPoint.add(ni),ei=pn.pointLocation(Yr),hi=Ra.convert(ae.center||ei);this.normalizeCenter(hi);var Ai=pn.project(ei),di=pn.project(hi).sub(Ai),ai=ae.curve,Ir=Math.max(pn.width,pn.height),Mr=Ir/wr,vi=di.mag();if("minZoom"in ae){var Vi=cs(Math.min(ae.minZoom,On,In),pn.minZoom,pn.maxZoom),$r=Ir/pn.zoomScale(Vi-On);ai=Math.sqrt($r/vi*2)}var ra=ai*ai;function Ci(ia){var Ki=(Mr*Mr-Ir*Ir+(ia?-1:1)*ra*ra*vi*vi)/(2*(ia?Mr:Ir)*ra*vi);return Math.log(Math.sqrt(Ki*Ki+1)-Ki)}function Ei(ia){return(Math.exp(ia)-Math.exp(-ia))/2}function xi(ia){return(Math.exp(ia)+Math.exp(-ia))/2}function Oi(ia){return Ei(ia)/xi(ia)}var oa=Ci(0),Sa=function(Ki){return xi(oa)/xi(oa+ai*Ki)},Di=function(Ki){return Ir*((xi(oa)*Oi(oa+ai*Ki)-Ei(oa))/ra)/vi},_i=(Ci(1)-oa)/ai;if(Math.abs(vi)<1e-6||!isFinite(_i)){if(Math.abs(Ir-Mr)<1e-6)return this.easeTo(ae,ke);var mi=Mr<Ir?-1:1;_i=Math.abs(Math.log(Mr/Ir))/ai,Di=function(){return 0},Sa=function(Ki){return Math.exp(mi*ai*Ki)}}if("duration"in ae)ae.duration=+ae.duration;else{var za="screenSpeed"in ae?+ae.screenSpeed/ai:+ae.speed;ae.duration=1e3*_i/za}return ae.maxDuration&&ae.duration>ae.maxDuration&&(ae.duration=0),this.zooming=!0,this.rotating=ne!==ir,this.pitching=or!==Me,this.padding=!pn.isPaddingEqual(sr),this.prepareEase(ke,!1),this.ease(function(ia){var Ki=ia*_i,Oo=1/Sa(Ki);pn.zoom=ia===1?In:On+pn.scaleZoom(Oo),wt.rotating&&(pn.bearing=gs(ne,ir,ia)),wt.pitching&&(pn.pitch=gs(Me,or,ia)),wt.padding&&(pn.interpolatePadding(Ze,sr,ia),Yr=pn.centerPoint.add(ni));var so=ia===1?hi:pn.unproject(Ai.add(di.mult(Di(Ki))).mult(Oo));pn.setLocationAtPoint(pn.renderWorldCopies?so.wrap():so,Yr),wt.fireMoveEvents(ke)},function(){return wt.afterEase(ke)},ae),this}},{key:"fitScreenCoordinates",value:function(wt,ae,ke,gn,pn){return this.fitInternal(this.cameraForBoxAndBearing(this.transform.pointLocation(Ea.convert(wt)),this.transform.pointLocation(Ea.convert(ae)),ke,gn),gn,pn)}},{key:"stop",value:function(wt,ae){if(this.easeFrameId&&(this.cancelRenderFrame(this.easeFrameId),delete this.easeFrameId,delete this.onEaseFrame),this.onEaseEnd){var ke=this.onEaseEnd;delete this.onEaseEnd,ke.call(this,ae)}return this}},{key:"normalizeBearing",value:function(wt,ae){wt=ps(wt,-180,180);var ke=Math.abs(wt-ae);return Math.abs(wt-360-ae)<ke&&(wt-=360),Math.abs(wt+360-ae)<ke&&(wt+=360),wt}},{key:"normalizeCenter",value:function(wt){var ae=this.transform;if(!(!ae.renderWorldCopies||ae.lngRange)){var ke=wt.lng-ae.center.lng;wt.lng+=ke>180?-360:ke<-180?360:0}}},{key:"fireMoveEvents",value:function(wt){this.emit("move",new Ha("move",wt)),this.zooming&&this.emit("zoom",new Ha("zoom",wt)),this.rotating&&this.emit("rotate",new Ha("rotate",wt)),this.pitching&&this.emit("rotate",new Ha("pitch",wt))}},{key:"prepareEase",value:function(wt){var ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,ke=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.moving=!0,!ae&&!ke.moving&&this.emit("movestart",new Ha("movestart",wt)),this.zooming&&!ke.zooming&&this.emit("zoomstart",new Ha("zoomstart",wt)),this.rotating&&!ke.rotating&&this.emit("rotatestart",new Ha("rotatestart",wt)),this.pitching&&!ke.pitching&&this.emit("pitchstart",new Ha("pitchstart",wt))}},{key:"afterEase",value:function(wt,ae){if(!(this.easeId&&ae&&this.easeId===ae)){delete this.easeId;var ke=this.zooming,gn=this.rotating,pn=this.pitching;this.moving=!1,this.zooming=!1,this.rotating=!1,this.pitching=!1,this.padding=!1,ke&&this.emit("zoomend",new Ha("zoomend",wt)),gn&&this.emit("rotateend",new Ha("rotateend",wt)),pn&&this.emit("pitchend",new Ha("pitchend",wt)),this.emit("moveend",new Ha("moveend",wt))}}},{key:"ease",value:function(wt,ae,ke){ke.animate===!1||ke.duration===0?(wt(1),ae()):(this.easeStart=Ns(),this.easeOptions=ke,this.onEaseFrame=wt,this.onEaseEnd=ae,this.easeFrameId=this.requestRenderFrame(this.renderFrameCallback))}},{key:"cameraForBoxAndBearing",value:function(wt,ae,ke,gn){var pn={top:0,bottom:0,right:0,left:0};if(gn=ea()({padding:pn,offset:[0,0],maxZoom:this.transform.maxZoom},gn),typeof gn.padding=="number"){var On=gn.padding;gn.padding={top:On,bottom:On,right:On,left:On}}gn.padding=ea()(pn,gn.padding);var ne=this.transform,Me=ne.padding,Ze=ne.project(Ra.convert(wt)),In=ne.project(Ra.convert(ae)),ir=Ze.rotate(-ke*Math.PI/180),or=In.rotate(-ke*Math.PI/180),sr=new Ea(Math.max(ir.x,or.x),Math.max(ir.y,or.y)),wr=new Ea(Math.min(ir.x,or.x),Math.min(ir.y,or.y)),ni=sr.sub(wr),Yr=(ne.width-(Me.left+Me.right+gn.padding.left+gn.padding.right))/ni.x,ei=(ne.height-(Me.top+Me.bottom+gn.padding.top+gn.padding.bottom))/ni.y;if(!(ei<0||Yr<0)){var hi=Math.min(ne.scaleZoom(ne.scale*Math.min(Yr,ei)),gn.maxZoom),Ai=Ea.convert(gn.offset),di=(gn.padding.left-gn.padding.right)/2,ai=(gn.padding.top-gn.padding.bottom)/2,Ir=new Ea(Ai.x+di,Ai.y+ai),Mr=Ir.mult(ne.scale/ne.zoomScale(hi)),vi=ne.unproject(Ze.add(In).div(2).sub(Mr));return{center:vi,zoom:hi,bearing:ke}}}},{key:"fitInternal",value:function(wt,ae,ke){return wt?(ae=ea()(wt,ae),delete ae.padding,ae.linear?this.easeTo(ae,ke):this.flyTo(ae,ke)):this}}]),Q}(to.EventEmitter);function Tu(jt,yt){var Q;if(typeof Symbol=="undefined"||jt[Symbol.iterator]==null){if(Array.isArray(jt)||(Q=gu(jt))||yt&&jt&&typeof jt.length=="number"){Q&&(jt=Q);var xt=0,wt=function(){};return{s:wt,n:function(){return xt>=jt.length?{done:!0}:{done:!1,value:jt[xt++]}},e:function(On){throw On},f:wt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ae=!0,ke=!1,gn;return{s:function(){Q=jt[Symbol.iterator]()},n:function(){var On=Q.next();return ae=On.done,On},e:function(On){ke=!0,gn=On},f:function(){try{!ae&&Q.return!=null&&Q.return()}finally{if(ke)throw gn}}}}function gu(jt,yt){if(!!jt){if(typeof jt=="string")return Fu(jt,yt);var Q=Object.prototype.toString.call(jt).slice(8,-1);if(Q==="Object"&&jt.constructor&&(Q=jt.constructor.name),Q==="Map"||Q==="Set")return Array.from(jt);if(Q==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Q))return Fu(jt,yt)}}function Fu(jt,yt){(yt==null||yt>jt.length)&&(yt=jt.length);for(var Q=0,xt=new Array(yt);Q<yt;Q++)xt[Q]=jt[Q];return xt}var Hs={},$o=Hs;Hs.create=function(jt,yt,Q){var xt=window.document.createElement(jt);return yt!==void 0&&(xt.className=yt),Q&&Q.appendChild(xt),xt},Hs.createNS=function(jt,yt){var Q=window.document.createElementNS(jt,yt);return Q};var fs=window.document&&window.document.documentElement.style;function fl(jt){if(!fs)return jt[0];var yt=Tu(jt),Q;try{for(yt.s();!(Q=yt.n()).done;){var xt=Q.value;if(xt in fs)return xt}}catch(wt){yt.e(wt)}finally{yt.f()}return jt[0]}var zl=fl(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),ql;Hs.disableDrag=function(){fs&&zl&&(ql=fs[zl],fs[zl]="none")},Hs.enableDrag=function(){fs&&zl&&(fs[zl]=ql)};var zu=fl(["transform","WebkitTransform"]);Hs.setTransform=function(jt,yt){jt.style[zu]=yt};var $u=!1;try{var Au=Object.defineProperty({},"passive",{get:function(){$u=!0}});window.addEventListener("test",Au,Au),window.removeEventListener("test",Au,Au)}catch(jt){$u=!1}Hs.addEventListener=function(jt,yt,Q){var xt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};"passive"in xt&&$u?jt.addEventListener(yt,Q,xt):jt.addEventListener(yt,Q,xt.capture)},Hs.removeEventListener=function(jt,yt,Q){var xt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};"passive"in xt&&$u?jt.removeEventListener(yt,Q,xt):jt.removeEventListener(yt,Q,xt.capture)};var Cu=function jt(yt){yt.preventDefault(),yt.stopPropagation(),window.removeEventListener("click",jt,!0)};Hs.suppressClick=function(){window.addEventListener("click",Cu,!0),window.setTimeout(function(){window.removeEventListener("click",Cu,!0)},0)},Hs.mousePos=function(jt,yt){var Q=jt.getBoundingClientRect();return new Ea(yt.clientX-Q.left-jt.clientLeft,yt.clientY-Q.top-jt.clientTop)},Hs.touchPos=function(jt,yt){var Q=jt.getBoundingClientRect(),xt=[],wt=Tu(yt),ae;try{for(wt.s();!(ae=wt.n()).done;){var ke=ae.value;xt.push(new Ea(ke.clientX-Q.left-jt.clientLeft,ke.clientY-Q.top-jt.clientTop))}}catch(gn){wt.e(gn)}finally{wt.f()}return xt},Hs.mouseButton=function(jt){return typeof window.InstallTrigger!="undefined"&&jt.button===2&&jt.ctrlKey&&window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:jt.button},Hs.remove=function(jt){jt.parentNode&&jt.parentNode.removeChild(jt)};function mu(jt){var yt=Uu();return function(){var xt=u()(jt),wt;if(yt){var ae=u()(this).constructor;wt=Reflect.construct(xt,arguments,ae)}else wt=xt.apply(this,arguments);return a()(this,wt)}}function Uu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}var zs=function(jt){n()(Q,jt);var yt=mu(Q);function Q(xt,wt,ae){var ke,gn=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};s()(this,Q);var pn=$o.mousePos(wt.getCanvasContainer(),ae),On=wt.unproject(pn);return ke=yt.call(this,xt,ea()({point:pn,lngLat:On,originalEvent:ae},gn)),ke.type=void 0,ke.target=void 0,ke.originalEvent=void 0,ke.point=void 0,ke.lngLat=void 0,ke.defaultPrevented=void 0,ke.defaultPrevented=!1,ke.target=wt,ke}return r()(Q,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),Q}(Ha);function Ul(jt){var yt=gc();return function(){var xt=u()(jt),wt;if(yt){var ae=u()(this).constructor;wt=Reflect.construct(xt,arguments,ae)}else wt=xt.apply(this,arguments);return a()(this,wt)}}function gc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}var Cl=function(jt){n()(Q,jt);var yt=Ul(Q);function Q(xt,wt,ae){var ke;s()(this,Q);var gn=xt==="touchend"?ae.changedTouches:ae.touches,pn=$o.touchPos(wt.getCanvasContainer(),gn),On=pn.map(function(Ze){return wt.unproject(Ze)}),ne=pn.reduce(function(Ze,In,ir,or){return Ze.add(In.div(or.length))},new Ea(0,0)),Me=wt.unproject(ne);return ke=yt.call(this,xt,{points:pn,point:ne,lngLats:On,lngLat:Me,originalEvent:ae}),ke.type=void 0,ke.target=void 0,ke.originalEvent=void 0,ke.lngLat=void 0,ke.point=void 0,ke.points=void 0,ke.lngLats=void 0,ke.defaultPrevented=void 0,ke.defaultPrevented=!1,ke}return r()(Q,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),Q}(Ha);function kl(jt){var yt=Gl();return function(){var xt=u()(jt),wt;if(yt){var ae=u()(this).constructor;wt=Reflect.construct(xt,arguments,ae)}else wt=xt.apply(this,arguments);return a()(this,wt)}}function Gl(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}var cc=function(jt){n()(Q,jt);var yt=kl(Q);function Q(xt,wt,ae){var ke;return s()(this,Q),ke=yt.call(this,xt,{originalEvent:ae}),ke.type=void 0,ke.originalEvent=void 0,ke.defaultPrevented=void 0,ke.target=void 0,ke.defaultPrevented=!1,ke}return r()(Q,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),Q}(Ha),Qu=function(){function jt(yt){s()(this,jt),this.map=void 0,this.delayContextMenu=void 0,this.contextMenuEvent=void 0,this.map=yt}return r()(jt,[{key:"reset",value:function(){this.delayContextMenu=!1,delete this.contextMenuEvent}},{key:"mousemove",value:function(Q){this.map.emit(Q.type,new zs(Q.type,this.map,Q))}},{key:"mousedown",value:function(){this.delayContextMenu=!0}},{key:"mouseup",value:function(){this.delayContextMenu=!1,this.contextMenuEvent&&(this.map.emit("contextmenu",new zs("contextmenu",this.map,this.contextMenuEvent)),delete this.contextMenuEvent)}},{key:"contextmenu",value:function(Q){this.delayContextMenu?this.contextMenuEvent=Q:this.map.emit(Q.type,new zs(Q.type,this.map,Q)),this.map.listeners("contextmenu")&&Q.preventDefault()}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){return!0}},{key:"disable",value:function(){return!1}}]),jt}(),Ol=function(){function jt(yt,Q){s()(this,jt),this.map=void 0,this.el=void 0,this.container=void 0,this.enabled=void 0,this.active=void 0,this.startPos=void 0,this.lastPos=void 0,this.box=void 0,this.clickTolerance=void 0,this.map=yt,this.el=yt.getCanvasContainer(),this.container=yt.getContainer(),this.clickTolerance=Q.clickTolerance||1}return r()(jt,[{key:"isEnabled",value:function(){return!!this.enabled}},{key:"isActive",value:function(){return!!this.active}},{key:"enable",value:function(){this.isEnabled()||(this.enabled=!0)}},{key:"disable",value:function(){!this.isEnabled()||(this.enabled=!1)}},{key:"mousedown",value:function(Q,xt){!this.isEnabled()||!(Q.shiftKey&&Q.button===0)||($o.disableDrag(),this.startPos=this.lastPos=xt,this.active=!0)}},{key:"mousemoveWindow",value:function(Q,xt){if(!!this.active){var wt=xt;if(!(this.lastPos.equals(wt)||!this.box&&wt.dist(this.startPos)<this.clickTolerance)){var ae=this.startPos;this.lastPos=wt,this.box||(this.box=$o.create("div","l7-boxzoom",this.container),this.container.classList.add("l7-crosshair"),this.fireEvent("boxzoomstart",Q));var ke=Math.min(ae.x,wt.x),gn=Math.max(ae.x,wt.x),pn=Math.min(ae.y,wt.y),On=Math.max(ae.y,wt.y);$o.setTransform(this.box,"translate(".concat(ke,"px,").concat(pn,"px)")),this.box&&(this.box.style.width="".concat(gn-ke,"px"),this.box.style.height="".concat(On-pn,"px"))}}}},{key:"mouseupWindow",value:function(Q,xt){var wt=this;if(!!this.active&&Q.button===0){var ae=this.startPos,ke=xt;if(this.reset(),$o.suppressClick(),ae.x===ke.x&&ae.y===ke.y)this.fireEvent("boxzoomcancel",Q);else return this.map.emit("boxzoomend",new Ha("boxzoomend",{originalEvent:Q})),{cameraAnimation:function(pn){return pn.fitScreenCoordinates(ae,ke,wt.map.getBearing(),{linear:!0})}}}}},{key:"keydown",value:function(Q){!this.active||Q.keyCode===27&&(this.reset(),this.fireEvent("boxzoomcancel",Q))}},{key:"reset",value:function(){this.active=!1,this.container.classList.remove("l7-crosshair"),this.box&&($o.remove(this.box),this.box=null),$o.enableDrag(),delete this.startPos,delete this.lastPos}},{key:"fireEvent",value:function(Q,xt){return this.map.emit(Q,new Ha(Q,{originalEvent:xt}))}}]),jt}(),Vl=Ol,tu=function(){function jt(){s()(this,jt),this.enabled=void 0,this.active=void 0,this.reset()}return r()(jt,[{key:"reset",value:function(){this.active=!1}},{key:"dblclick",value:function(Q,xt){return Q.preventDefault(),{cameraAnimation:function(ae){ae.easeTo({duration:300,zoom:ae.getZoom()+(Q.shiftKey?-1:1),around:ae.unproject(xt)},{originalEvent:Q})}}}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),jt}();function go(jt){var yt=gl();return function(){var xt=u()(jt),wt;if(yt){var ae=u()(this).constructor;wt=Reflect.construct(xt,arguments,ae)}else wt=xt.apply(this,arguments);return a()(this,wt)}}function gl(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}var hl=function(jt){n()(Q,jt);var yt=go(Q);function Q(){var xt;s()(this,Q);for(var wt=arguments.length,ae=new Array(wt),ke=0;ke<wt;ke++)ae[ke]=arguments[ke];return xt=yt.call.apply(yt,[this].concat(ae)),xt.type="renderFrame",xt.timeStamp=void 0,xt}return Q}(Ha);function Ys(jt,yt){var Q;if(typeof Symbol=="undefined"||jt[Symbol.iterator]==null){if(Array.isArray(jt)||(Q=Na(jt))||yt&&jt&&typeof jt.length=="number"){Q&&(jt=Q);var xt=0,wt=function(){};return{s:wt,n:function(){return xt>=jt.length?{done:!0}:{done:!1,value:jt[xt++]}},e:function(On){throw On},f:wt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ae=!0,ke=!1,gn;return{s:function(){Q=jt[Symbol.iterator]()},n:function(){var On=Q.next();return ae=On.done,On},e:function(On){ke=!0,gn=On},f:function(){try{!ae&&Q.return!=null&&Q.return()}finally{if(ke)throw gn}}}}function Na(jt,yt){if(!!jt){if(typeof jt=="string")return _o(jt,yt);var Q=Object.prototype.toString.call(jt).slice(8,-1);if(Q==="Object"&&jt.constructor&&(Q=jt.constructor.name),Q==="Map"||Q==="Set")return Array.from(jt);if(Q==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Q))return _o(jt,yt)}}function _o(jt,yt){(yt==null||yt>jt.length)&&(yt=jt.length);for(var Q=0,xt=new Array(yt);Q<yt;Q++)xt[Q]=jt[Q];return xt}var Us={linearity:.3,easing:Cs(0,0,.3,1)},ml=ea()({deceleration:2500,maxSpeed:1400},Us),qu=ea()({deceleration:20,maxSpeed:1400},Us),ku=ea()({deceleration:1e3,maxSpeed:360},Us),mc=ea()({deceleration:1e3,maxSpeed:90},Us),Os=function(){function jt(yt){s()(this,jt),this.map=void 0,this.inertiaBuffer=void 0,this.map=yt,this.clear()}return r()(jt,[{key:"clear",value:function(){this.inertiaBuffer=[]}},{key:"record",value:function(Q){this.drainInertiaBuffer(),this.inertiaBuffer.push({time:Ns(),settings:Q})}},{key:"drainInertiaBuffer",value:function(){for(var Q=this.inertiaBuffer,xt=Ns(),wt=160;Q.length>0&&xt-Q[0].time>wt;)Q.shift()}},{key:"onMoveEnd",value:function(Q){if(this.drainInertiaBuffer(),!(this.inertiaBuffer.length<2)){var xt={zoom:0,bearing:0,pitch:0,pan:new Ea(0,0),pinchAround:void 0,around:void 0},wt=Ys(this.inertiaBuffer),ae;try{for(wt.s();!(ae=wt.n()).done;){var ke=ae.value.settings;xt.zoom+=ke.zoomDelta||0,xt.bearing+=ke.bearingDelta||0,xt.pitch+=ke.pitchDelta||0,ke.panDelta&&xt.pan._add(ke.panDelta),ke.around&&(xt.around=ke.around),ke.pinchAround&&(xt.pinchAround=ke.pinchAround)}}catch(or){wt.e(or)}finally{wt.f()}var gn=this.inertiaBuffer[this.inertiaBuffer.length-1],pn=gn.time-this.inertiaBuffer[0].time,On={};if(xt.pan.mag()){var ne=uu(xt.pan.mag(),pn,ea()({},ml,Q||{}));On.offset=xt.pan.mult(ne.amount/xt.pan.mag()),On.center=this.map.transform.center,tl(On,ne)}if(xt.zoom){var Me=uu(xt.zoom,pn,qu);On.zoom=this.map.transform.zoom+Me.amount,tl(On,Me)}if(xt.bearing){var Ze=uu(xt.bearing,pn,ku);On.bearing=this.map.transform.bearing+cs(Ze.amount,-179,179),tl(On,Ze)}if(xt.pitch){var In=uu(xt.pitch,pn,mc);On.pitch=this.map.transform.pitch+In.amount,tl(On,In)}if(On.zoom||On.bearing){var ir=xt.pinchAround===void 0?xt.around:xt.pinchAround;On.around=ir?this.map.unproject(ir):this.map.getCenter()}return this.clear(),ea()(On,{noMoveStart:!0})}}}]),jt}();function tl(jt,yt){(!jt.duration||jt.duration<yt.duration)&&(jt.duration=yt.duration,jt.easing=yt.easing)}function uu(jt,yt,Q){var xt=Q.maxSpeed,wt=Q.linearity,ae=Q.deceleration,ke=cs(jt*wt/(yt/1e3),-xt,xt),gn=Math.abs(ke)/(ae*wt);return{easing:Q.easing,duration:gn*1e3,amount:ke*(gn/2)}}var Zs={panStep:100,bearingStep:15,pitchStep:10},Qo=function(){function jt(){s()(this,jt),this.enabled=void 0,this.active=void 0,this.panStep=void 0,this.bearingStep=void 0,this.pitchStep=void 0;var yt=Zs;this.panStep=yt.panStep,this.bearingStep=yt.bearingStep,this.pitchStep=yt.pitchStep}return r()(jt,[{key:"reset",value:function(){this.active=!1}},{key:"keydown",value:function(Q){var xt=this;if(!(Q.altKey||Q.ctrlKey||Q.metaKey)){var wt=0,ae=0,ke=0,gn=0,pn=0;switch(Q.keyCode){case 61:case 107:case 171:case 187:wt=1;break;case 189:case 109:case 173:wt=-1;break;case 37:Q.shiftKey?ae=-1:(Q.preventDefault(),gn=-1);break;case 39:Q.shiftKey?ae=1:(Q.preventDefault(),gn=1);break;case 38:Q.shiftKey?ke=1:(Q.preventDefault(),pn=-1);break;case 40:Q.shiftKey?ke=-1:(Q.preventDefault(),pn=1);break;default:return}return{cameraAnimation:function(ne){var Me=ne.getZoom();ne.easeTo({duration:300,easeId:"keyboardHandler",easing:eu,zoom:wt?Math.round(Me)+wt*(Q.shiftKey?2:1):Me,bearing:ne.getBearing()+ae*xt.bearingStep,pitch:ne.getPitch()+ke*xt.pitchStep,offset:[-gn*xt.panStep,-pn*xt.panStep],center:ne.getCenter()},{originalEvent:Q})}}}}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),jt}();function eu(jt){return jt*(2-jt)}var Ou=Qo,qo=function(){function jt(yt,Q){s()(this,jt),this.mousedownPos=void 0,this.clickTolerance=void 0,this.map=void 0,this.map=yt,this.clickTolerance=Q.clickTolerance}return r()(jt,[{key:"reset",value:function(){delete this.mousedownPos}},{key:"wheel",value:function(Q){return this.firePreventable(new cc(Q.type,this.map,Q))}},{key:"mousedown",value:function(Q,xt){return this.mousedownPos=xt,this.firePreventable(new zs(Q.type,this.map,Q))}},{key:"mouseup",value:function(Q){this.map.emit(Q.type,new zs(Q.type,this.map,Q))}},{key:"click",value:function(Q,xt){this.mousedownPos&&this.mousedownPos.dist(xt)>=this.clickTolerance||this.map.emit(Q.type,new zs(Q.type,this.map,Q))}},{key:"dblclick",value:function(Q){return this.firePreventable(new zs(Q.type,this.map,Q))}},{key:"mouseover",value:function(Q){this.map.emit(Q.type,new zs(Q.type,this.map,Q))}},{key:"mouseout",value:function(Q){this.map.emit(Q.type,new zs(Q.type,this.map,Q))}},{key:"touchstart",value:function(Q){return this.firePreventable(new Cl(Q.type,this.map,Q))}},{key:"touchmove",value:function(Q){this.map.emit(Q.type,new Cl(Q.type,this.map,Q))}},{key:"touchend",value:function(Q){this.map.emit(Q.type,new Cl(Q.type,this.map,Q))}},{key:"touchcancel",value:function(Q){this.map.emit(Q.type,new Cl(Q.type,this.map,Q))}},{key:"firePreventable",value:function(Q){if(this.map.emit(Q.type,Q),Q.defaultPrevented)return{}}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){return!1}},{key:"disable",value:function(){return!1}}]),jt}(),Wi=L("iWIM"),ws=L.n(Wi),Gu,wu=0,Fo=2,ko=(Gu={},v()(Gu,wu,1),v()(Gu,Fo,2),Gu);function Eu(jt,yt){var Q=ko[yt];return jt.buttons===void 0||(jt.buttons&Q)!==Q}var Mi=function(){function jt(yt){s()(this,jt),this.enabled=void 0,this.active=void 0,this.lastPoint=void 0,this.eventButton=void 0,this.moved=void 0,this.clickTolerance=void 0,this.reset(),this.clickTolerance=yt.clickTolerance||1}return r()(jt,[{key:"reset",value:function(){this.active=!1,this.moved=!1,delete this.lastPoint,delete this.eventButton}},{key:"mousedown",value:function(Q,xt){if(!this.lastPoint){var wt=$o.mouseButton(Q);!this.correctButton(Q,wt)||(this.lastPoint=xt,this.eventButton=wt)}}},{key:"mousemoveWindow",value:function(Q,xt){var wt=this.lastPoint;if(!!wt){if(Q.preventDefault(),Eu(Q,this.eventButton)){this.reset();return}if(!(!this.moved&&xt.dist(wt)<this.clickTolerance))return this.moved=!0,this.lastPoint=xt,this.move(wt,xt)}}},{key:"mouseupWindow",value:function(Q){if(!!this.lastPoint){var xt=$o.mouseButton(Q);xt===this.eventButton&&(this.moved&&$o.suppressClick(),this.reset())}}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}},{key:"correctButton",value:function(Q,xt){return!1}},{key:"move",value:function(Q,xt){}}]),jt}();function el(jt){var yt=Iu();return function(){var xt=u()(jt),wt;if(yt){var ae=u()(this).constructor;wt=Reflect.construct(xt,arguments,ae)}else wt=xt.apply(this,arguments);return a()(this,wt)}}function Iu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}var Lu=function(jt){n()(Q,jt);var yt=el(Q);function Q(){return s()(this,Q),yt.apply(this,arguments)}return r()(Q,[{key:"mousedown",value:function(wt,ae){ws()(u()(Q.prototype),"mousedown",this).call(this,wt,ae),this.lastPoint&&(this.active=!0)}},{key:"move",value:function(wt,ae){return{around:ae,panDelta:ae.sub(wt)}}},{key:"correctButton",value:function(wt,ae){return ae===wu&&!wt.ctrlKey}}]),Q}(Mi);function nu(jt){var yt=we();return function(){var xt=u()(jt),wt;if(yt){var ae=u()(this).constructor;wt=Reflect.construct(xt,arguments,ae)}else wt=xt.apply(this,arguments);return a()(this,wt)}}function we(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}var Te=function(jt){n()(Q,jt);var yt=nu(Q);function Q(){return s()(this,Q),yt.apply(this,arguments)}return r()(Q,[{key:"correctButton",value:function(wt,ae){return ae===wu&&wt.ctrlKey||ae===Fo}},{key:"move",value:function(wt,ae){var ke=-.5,gn=(ae.y-wt.y)*ke;if(gn)return this.active=!0,{pitchDelta:gn}}},{key:"contextmenu",value:function(wt){wt.preventDefault()}}]),Q}(Mi);function dn(jt){var yt=tn();return function(){var xt=u()(jt),wt;if(yt){var ae=u()(this).constructor;wt=Reflect.construct(xt,arguments,ae)}else wt=xt.apply(this,arguments);return a()(this,wt)}}function tn(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}var wn=function(jt){n()(Q,jt);var yt=dn(Q);function Q(){return s()(this,Q),yt.apply(this,arguments)}return r()(Q,[{key:"contextmenu",value:function(wt){wt.preventDefault()}},{key:"correctButton",value:function(wt,ae){return ae===wu&&wt.ctrlKey||ae===Fo}},{key:"move",value:function(wt,ae){var ke=.8,gn=(ae.x-wt.x)*ke;if(gn)return this.active=!0,{bearingDelta:gn}}}]),Q}(Mi),vr=4.000244140625,Lr=1/100,Kr=1/450,ti=2,Fr=function(){function jt(yt,Q){var xt=this;s()(this,jt),this.map=void 0,this.el=void 0,this.enabled=void 0,this.active=void 0,this.zooming=void 0,this.aroundCenter=void 0,this.around=void 0,this.aroundPoint=void 0,this.type=void 0,this.lastValue=void 0,this.timeout=void 0,this.finishTimeout=void 0,this.lastWheelEvent=void 0,this.lastWheelEventTime=void 0,this.startZoom=void 0,this.targetZoom=void 0,this.delta=void 0,this.easing=void 0,this.prevEase=void 0,this.frameId=void 0,this.handler=void 0,this.defaultZoomRate=void 0,this.wheelZoomRate=void 0,this.onScrollFrame=function(){if(!!xt.frameId&&(xt.frameId=null,!!xt.isActive())){var wt=xt.map.transform;if(xt.delta!==0){var ae=xt.type==="wheel"&&Math.abs(xt.delta)>vr?xt.wheelZoomRate:xt.defaultZoomRate,ke=ti/(1+Math.exp(-Math.abs(xt.delta*ae)));xt.delta<0&&ke!==0&&(ke=1/ke);var gn=typeof xt.targetZoom=="number"?wt.zoomScale(xt.targetZoom):wt.scale;xt.targetZoom=Math.min(wt.maxZoom,Math.max(wt.minZoom,wt.scaleZoom(gn*ke))),xt.type==="wheel"&&(xt.startZoom=wt.zoom,xt.easing=xt.smoothOutEasing(200)),xt.delta=0}var pn=typeof xt.targetZoom=="number"?xt.targetZoom:wt.zoom,On=xt.startZoom,ne=xt.easing,Me=!1,Ze;if(xt.type==="wheel"&&On&&ne){var In=Math.min((Ns()-xt.lastWheelEventTime)/200,1),ir=ne(In);Ze=gs(On,pn,ir),In<1?xt.frameId||(xt.frameId=!0):Me=!0}else Ze=pn,Me=!0;return xt.active=!0,Me&&(xt.active=!1,xt.finishTimeout=setTimeout(function(){xt.zooming=!1,xt.handler.triggerRenderFrame(),delete xt.targetZoom,delete xt.finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Me,zoomDelta:Ze-wt.zoom,around:xt.aroundPoint,originalEvent:xt.lastWheelEvent}}},this.map=yt,this.el=yt.getCanvasContainer(),this.handler=Q,this.delta=0,this.defaultZoomRate=Lr,this.wheelZoomRate=Kr}return r()(jt,[{key:"setZoomRate",value:function(Q){this.defaultZoomRate=Q}},{key:"setWheelZoomRate",value:function(Q){this.wheelZoomRate=Q}},{key:"isEnabled",value:function(){return!!this.enabled}},{key:"isActive",value:function(){return!!this.active||this.finishTimeout!==void 0}},{key:"isZooming",value:function(){return!!this.zooming}},{key:"enable",value:function(Q){this.isEnabled()||(this.enabled=!0,this.aroundCenter=Q&&Q.around==="center")}},{key:"disable",value:function(){!this.isEnabled()||(this.enabled=!1)}},{key:"wheel",value:function(Q){if(!!this.isEnabled()){var xt=Q.deltaMode===window.WheelEvent.DOM_DELTA_LINE?Q.deltaY*40:Q.deltaY,wt=Ns(),ae=wt-(this.lastWheelEventTime||0);this.lastWheelEventTime=wt,xt!==0&&xt%vr==0?this.type="wheel":xt!==0&&Math.abs(xt)<4?this.type="trackpad":ae>400?(this.type=null,this.lastValue=xt,this.timeout=setTimeout(this.onTimeout,40,Q)):this.type||(this.type=Math.abs(ae*xt)<200?"trackpad":"wheel",this.timeout&&(clearTimeout(this.timeout),this.timeout=null,xt+=this.lastValue)),Q.shiftKey&&xt&&(xt=xt/4),this.type&&(this.lastWheelEvent=Q,this.delta-=xt,this.active||this.start(Q)),Q.preventDefault()}}},{key:"renderFrame",value:function(){return this.onScrollFrame()}},{key:"reset",value:function(){this.active=!1}},{key:"onTimeout",value:function(Q){this.type="wheel",this.delta-=this.lastValue,this.active||this.start(Q)}},{key:"start",value:function(Q){if(!!this.delta){this.frameId&&(this.frameId=null),this.active=!0,this.isZooming()||(this.zooming=!0),this.finishTimeout&&(clearTimeout(this.finishTimeout),delete this.finishTimeout);var xt=$o.mousePos(this.el,Q);this.around=Ra.convert(this.aroundCenter?this.map.getCenter():this.map.unproject(xt)),this.aroundPoint=this.map.transform.locationPoint(this.around),this.frameId||(this.frameId=!0,this.handler.triggerRenderFrame())}}},{key:"smoothOutEasing",value:function(Q){var xt=Pu;if(this.prevEase){var wt=this.prevEase,ae=(Ns()-wt.start)/wt.duration,ke=wt.easing(ae+.01)-wt.easing(ae),gn=.27/Math.sqrt(ke*ke+1e-4)*.01,pn=Math.sqrt(.27*.27-gn*gn);xt=Cs(gn,pn,.25,1)}return this.prevEase={start:Ns(),duration:Q,easing:xt},xt}}]),jt}(),ui=Fr,br=function(){function jt(yt,Q){s()(this,jt),this.clickZoom=void 0,this.tapZoom=void 0,this.clickZoom=yt,this.tapZoom=Q}return r()(jt,[{key:"enable",value:function(){this.clickZoom.enable(),this.tapZoom.enable()}},{key:"disable",value:function(){this.clickZoom.disable(),this.tapZoom.disable()}},{key:"isEnabled",value:function(){return this.clickZoom.isEnabled()&&this.tapZoom.isEnabled()}},{key:"isActive",value:function(){return this.clickZoom.isActive()||this.tapZoom.isActive()}}]),jt}(),Zt=function(){function jt(yt,Q,xt){s()(this,jt),this.inertiaOptions=void 0,this.el=void 0,this.mousePan=void 0,this.touchPan=void 0,this.el=yt,this.mousePan=Q,this.touchPan=xt}return r()(jt,[{key:"enable",value:function(Q){this.inertiaOptions=Q||{},this.mousePan.enable(),this.touchPan.enable(),this.el.classList.add("l7-touch-drag-pan")}},{key:"disable",value:function(){this.mousePan.disable(),this.touchPan.disable(),this.el.classList.remove("l7-touch-drag-pan")}},{key:"isEnabled",value:function(){return this.mousePan.isEnabled()&&this.touchPan.isEnabled()}},{key:"isActive",value:function(){return this.mousePan.isActive()||this.touchPan.isActive()}}]),jt}(),te=function(){function jt(yt,Q,xt){s()(this,jt),this.mouseRotate=void 0,this.mousePitch=void 0,this.pitchWithRotate=void 0,this.pitchWithRotate=yt.pitchWithRotate,this.mouseRotate=Q,this.mousePitch=xt}return r()(jt,[{key:"enable",value:function(){this.mouseRotate.enable(),this.pitchWithRotate&&this.mousePitch.enable()}},{key:"disable",value:function(){this.mouseRotate.disable(),this.mousePitch.disable()}},{key:"isEnabled",value:function(){return this.mouseRotate.isEnabled()&&(!this.pitchWithRotate||this.mousePitch.isEnabled())}},{key:"isActive",value:function(){return this.mouseRotate.isActive()||this.mousePitch.isActive()}}]),jt}(),Le=function(){function jt(yt,Q,xt,wt){s()(this,jt),this.el=void 0,this.touchZoom=void 0,this.touchRotate=void 0,this.tapDragZoom=void 0,this.rotationDisabled=void 0,this.enabled=void 0,this.el=yt,this.touchZoom=Q,this.touchRotate=xt,this.tapDragZoom=wt,this.rotationDisabled=!1,this.enabled=!0}return r()(jt,[{key:"enable",value:function(Q){this.touchZoom.enable(Q),this.rotationDisabled||this.touchRotate.enable(Q),this.tapDragZoom.enable(),this.el.classList.add("l7-touch-zoom-rotate")}},{key:"disable",value:function(){this.touchZoom.disable(),this.touchRotate.disable(),this.tapDragZoom.disable(),this.el.classList.remove("l7-touch-zoom-rotate")}},{key:"isEnabled",value:function(){return this.touchZoom.isEnabled()&&(this.rotationDisabled||this.touchRotate.isEnabled())&&this.tapDragZoom.isEnabled()}},{key:"isActive",value:function(){return this.touchZoom.isActive()||this.touchRotate.isActive()||this.tapDragZoom.isActive()}},{key:"disableRotation",value:function(){this.rotationDisabled=!0,this.touchRotate.disable()}},{key:"enableRotation",value:function(){this.rotationDisabled=!1,this.touchZoom.isEnabled()&&this.touchRotate.enable()}}]),jt}();function _e(jt,yt){for(var Q={},xt=0;xt<jt.length;xt++)Q[jt[xt].identifier]=yt[xt];return Q}function Rt(jt,yt){var Q;if(typeof Symbol=="undefined"||jt[Symbol.iterator]==null){if(Array.isArray(jt)||(Q=zt(jt))||yt&&jt&&typeof jt.length=="number"){Q&&(jt=Q);var xt=0,wt=function(){};return{s:wt,n:function(){return xt>=jt.length?{done:!0}:{done:!1,value:jt[xt++]}},e:function(On){throw On},f:wt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ae=!0,ke=!1,gn;return{s:function(){Q=jt[Symbol.iterator]()},n:function(){var On=Q.next();return ae=On.done,On},e:function(On){ke=!0,gn=On},f:function(){try{!ae&&Q.return!=null&&Q.return()}finally{if(ke)throw gn}}}}function zt(jt,yt){if(!!jt){if(typeof jt=="string")return se(jt,yt);var Q=Object.prototype.toString.call(jt).slice(8,-1);if(Q==="Object"&&jt.constructor&&(Q=jt.constructor.name),Q==="Map"||Q==="Set")return Array.from(jt);if(Q==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Q))return se(jt,yt)}}function se(jt,yt){(yt==null||yt>jt.length)&&(yt=jt.length);for(var Q=0,xt=new Array(yt);Q<yt;Q++)xt[Q]=jt[Q];return xt}function re(jt){var yt=new Ea(0,0),Q=Rt(jt),xt;try{for(Q.s();!(xt=Q.n()).done;){var wt=xt.value;yt._add(wt)}}catch(ae){Q.e(ae)}finally{Q.f()}return yt.div(jt.length)}var ce=500,Fe=500,Ke=30,rn=function(){function jt(yt){s()(this,jt),this.numTouches=void 0,this.centroid=void 0,this.startTime=void 0,this.aborted=void 0,this.touches=void 0,this.reset(),this.numTouches=yt.numTouches}return r()(jt,[{key:"reset",value:function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}},{key:"touchstart",value:function(Q,xt,wt){(this.centroid||wt.length>this.numTouches)&&(this.aborted=!0),!this.aborted&&(this.startTime===void 0&&(this.startTime=Q.timeStamp),wt.length===this.numTouches&&(this.centroid=re(xt),this.touches=_e(wt,xt)))}},{key:"touchmove",value:function(Q,xt,wt){if(!(this.aborted||!this.centroid)){var ae=_e(wt,xt);for(var ke in this.touches)if(this.touches[ke]){var gn=this.touches[ke],pn=ae[ke];(!pn||pn.dist(gn)>Ke)&&(this.aborted=!0)}}}},{key:"touchend",value:function(Q,xt,wt){if((!this.centroid||Q.timeStamp-this.startTime>Fe)&&(this.aborted=!0),wt.length===0){var ae=!this.aborted&&this.centroid;if(this.reset(),ae)return ae}}}]),jt}(),Je=function(){function jt(yt){s()(this,jt),this.singleTap=void 0,this.numTaps=void 0,this.lastTime=void 0,this.lastTap=void 0,this.count=void 0,this.singleTap=new rn(yt),this.numTaps=yt.numTaps,this.reset()}return r()(jt,[{key:"reset",value:function(){this.lastTime=Infinity,delete this.lastTap,this.count=0,this.singleTap.reset()}},{key:"touchstart",value:function(Q,xt,wt){this.singleTap.touchstart(Q,xt,wt)}},{key:"touchmove",value:function(Q,xt,wt){this.singleTap.touchmove(Q,xt,wt)}},{key:"touchend",value:function(Q,xt,wt){var ae=this.singleTap.touchend(Q,xt,wt);if(ae){var ke=Q.timeStamp-this.lastTime<ce,gn=!this.lastTap||this.lastTap.dist(ae)<Ke;if((!ke||!gn)&&this.reset(),this.count++,this.lastTime=Q.timeStamp,this.lastTap=ae,this.count===this.numTaps)return this.reset(),ae}}}]),jt}(),vn=function(){function jt(){s()(this,jt),this.enabled=void 0,this.active=void 0,this.swipePoint=void 0,this.swipeTouch=void 0,this.tapTime=void 0,this.tap=void 0,this.tap=new Je({numTouches:1,numTaps:1}),this.reset()}return r()(jt,[{key:"reset",value:function(){this.active=!1,delete this.swipePoint,delete this.swipeTouch,delete this.tapTime,this.tap.reset()}},{key:"touchstart",value:function(Q,xt,wt){this.swipePoint||(this.tapTime&&Q.timeStamp-this.tapTime>ce&&this.reset(),this.tapTime?wt.length>0&&(this.swipePoint=xt[0],this.swipeTouch=wt[0].identifier):this.tap.touchstart(Q,xt,wt))}},{key:"touchmove",value:function(Q,xt,wt){if(!this.tapTime)this.tap.touchmove(Q,xt,wt);else if(this.swipePoint){if(wt[0].identifier!==this.swipeTouch)return;var ae=xt[0],ke=ae.y-this.swipePoint.y;return this.swipePoint=ae,Q.preventDefault(),this.active=!0,{zoomDelta:ke/128}}}},{key:"touchend",value:function(Q,xt,wt){if(this.tapTime)this.swipePoint&&wt.length===0&&this.reset();else{var ae=this.tap.touchend(Q,xt,wt);ae&&(this.tapTime=Q.timeStamp)}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),jt}(),hn=function(){function jt(){s()(this,jt),this.enabled=void 0,this.active=void 0,this.zoomIn=void 0,this.zoomOut=void 0,this.zoomIn=new Je({numTouches:1,numTaps:2}),this.zoomOut=new Je({numTouches:2,numTaps:1}),this.reset()}return r()(jt,[{key:"reset",value:function(){this.active=!1,this.zoomIn.reset(),this.zoomOut.reset()}},{key:"touchstart",value:function(Q,xt,wt){this.zoomIn.touchstart(Q,xt,wt),this.zoomOut.touchstart(Q,xt,wt)}},{key:"touchmove",value:function(Q,xt,wt){this.zoomIn.touchmove(Q,xt,wt),this.zoomOut.touchmove(Q,xt,wt)}},{key:"touchend",value:function(Q,xt,wt){var ae=this,ke=this.zoomIn.touchend(Q,xt,wt),gn=this.zoomOut.touchend(Q,xt,wt);if(ke)return this.active=!0,Q.preventDefault(),setTimeout(function(){return ae.reset()},0),{cameraAnimation:function(On){return On.easeTo({duration:300,zoom:On.getZoom()+1,around:On.unproject(ke)},{originalEvent:Q})}};if(gn)return this.active=!0,Q.preventDefault(),setTimeout(function(){return ae.reset()},0),{cameraAnimation:function(On){return On.easeTo({duration:300,zoom:On.getZoom()-1,around:On.unproject(gn)},{originalEvent:Q})}}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),jt}(),Jn=function(){function jt(yt){s()(this,jt),this.enabled=void 0,this.active=void 0,this.touches=void 0,this.minTouches=void 0,this.clickTolerance=void 0,this.sum=void 0,this.minTouches=1,this.clickTolerance=yt.clickTolerance||1,this.reset()}return r()(jt,[{key:"reset",value:function(){this.active=!1,this.touches={},this.sum=new Ea(0,0)}},{key:"touchstart",value:function(Q,xt,wt){return this.calculateTransform(Q,xt,wt)}},{key:"touchmove",value:function(Q,xt,wt){if(!!this.active)return Q.preventDefault(),this.calculateTransform(Q,xt,wt)}},{key:"touchend",value:function(Q,xt,wt){this.calculateTransform(Q,xt,wt),this.active&&wt.length<this.minTouches&&this.reset()}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}},{key:"calculateTransform",value:function(Q,xt,wt){wt.length>0&&(this.active=!0);var ae=_e(wt,xt),ke=new Ea(0,0),gn=new Ea(0,0),pn=0;for(var On in ae)if(ae[On]){var ne=ae[On],Me=this.touches[On];Me&&(ke._add(ne),gn._add(ne.sub(Me)),pn++,ae[On]=ne)}if(this.touches=ae,!(pn<this.minTouches||!gn.mag())){var Ze=gn.div(pn);if(this.sum._add(Ze),!(this.sum.mag()<this.clickTolerance)){var In=ke.div(pn);return{around:In,panDelta:Ze}}}}}]),jt}(),Vn=function(){function jt(){s()(this,jt),this.enabled=void 0,this.active=void 0,this.firstTwoTouches=void 0,this.vector=void 0,this.startVector=void 0,this.aroundCenter=void 0,this.reset()}return r()(jt,[{key:"reset",value:function(){this.active=!1,delete this.firstTwoTouches}},{key:"start",value:function(Q){}},{key:"move",value:function(Q,xt,wt){}},{key:"touchstart",value:function(Q,xt,wt){this.firstTwoTouches||wt.length<2||(this.firstTwoTouches=[wt[0].identifier,wt[1].identifier],this.start([xt[0],xt[1]]))}},{key:"touchmove",value:function(Q,xt,wt){if(!!this.firstTwoTouches){Q.preventDefault();var ae=At()(this.firstTwoTouches,2),ke=ae[0],gn=ae[1],pn=Zn(wt,xt,ke),On=Zn(wt,xt,gn);if(!(!pn||!On)){var ne=this.aroundCenter?null:pn.add(On).div(2);return this.move([pn,On],ne,Q)}}}},{key:"touchend",value:function(Q,xt,wt){if(!!this.firstTwoTouches){var ae=At()(this.firstTwoTouches,2),ke=ae[0],gn=ae[1],pn=Zn(wt,xt,ke),On=Zn(wt,xt,gn);pn&&On||(this.active&&$o.suppressClick(),this.reset())}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(Q){this.enabled=!0,this.aroundCenter=!!Q&&Q.around==="center"}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),jt}();function Zn(jt,yt,Q){for(var xt=0;xt<jt.length;xt++)if(jt[xt].identifier===Q)return yt[xt]}function Wn(jt){var yt=lr();return function(){var xt=u()(jt),wt;if(yt){var ae=u()(this).constructor;wt=Reflect.construct(xt,arguments,ae)}else wt=xt.apply(this,arguments);return a()(this,wt)}}function lr(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}function xr(jt){return Math.abs(jt.y)>Math.abs(jt.x)}var Vr=100,yi=function(jt){n()(Q,jt);var yt=Wn(Q);function Q(){var xt;s()(this,Q);for(var wt=arguments.length,ae=new Array(wt),ke=0;ke<wt;ke++)ae[ke]=arguments[ke];return xt=yt.call.apply(yt,[this].concat(ae)),xt.valid=void 0,xt.firstMove=void 0,xt.lastPoints=void 0,xt}return r()(Q,[{key:"reset",value:function(){ws()(u()(Q.prototype),"reset",this).call(this),this.valid=void 0,delete this.firstMove,delete this.lastPoints}},{key:"start",value:function(wt){this.lastPoints=wt,xr(wt[0].sub(wt[1]))&&(this.valid=!1)}},{key:"move",value:function(wt,ae,ke){var gn=wt[0].sub(this.lastPoints[0]),pn=wt[1].sub(this.lastPoints[1]);if(this.valid=this.gestureBeginsVertically(gn,pn,ke.timeStamp),!!this.valid){this.lastPoints=wt,this.active=!0;var On=(gn.y+pn.y)/2,ne=-.5;return{pitchDelta:On*ne}}}},{key:"gestureBeginsVertically",value:function(wt,ae,ke){if(this.valid!==void 0)return this.valid;var gn=2,pn=wt.mag()>=gn,On=ae.mag()>=gn;if(!(!pn&&!On)){if(!pn||!On)return this.firstMove===void 0&&(this.firstMove=ke),ke-this.firstMove<Vr?void 0:!1;var ne=wt.y>0==ae.y>0;return xr(wt)&&xr(ae)&&ne}}}]),Q}(Vn);function Br(jt){var yt=si();return function(){var xt=u()(jt),wt;if(yt){var ae=u()(this).constructor;wt=Reflect.construct(xt,arguments,ae)}else wt=xt.apply(this,arguments);return a()(this,wt)}}function si(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}var gi=25;function Zi(jt,yt){return jt.angleWith(yt)*180/Math.PI}var Li=function(jt){n()(Q,jt);var yt=Br(Q);function Q(){var xt;s()(this,Q);for(var wt=arguments.length,ae=new Array(wt),ke=0;ke<wt;ke++)ae[ke]=arguments[ke];return xt=yt.call.apply(yt,[this].concat(ae)),xt.minDiameter=void 0,xt}return r()(Q,[{key:"reset",value:function(){ws()(u()(Q.prototype),"reset",this).call(this),delete this.minDiameter,delete this.startVector,delete this.vector}},{key:"start",value:function(wt){this.startVector=this.vector=wt[0].sub(wt[1]),this.minDiameter=wt[0].dist(wt[1])}},{key:"move",value:function(wt,ae){var ke=this.vector;if(this.vector=wt[0].sub(wt[1]),!(!this.active&&this.isBelowThreshold(this.vector)))return this.active=!0,{bearingDelta:Zi(this.vector,ke),pinchAround:ae}}},{key:"isBelowThreshold",value:function(wt){this.minDiameter=Math.min(this.minDiameter,wt.mag());var ae=Math.PI*this.minDiameter,ke=gi/ae*360,gn=Zi(wt,this.startVector);return Math.abs(gn)<ke}}]),Q}(Vn);function Ma(jt){var yt=ma();return function(){var xt=u()(jt),wt;if(yt){var ae=u()(this).constructor;wt=Reflect.construct(xt,arguments,ae)}else wt=xt.apply(this,arguments);return a()(this,wt)}}function ma(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}var la=.1;function ri(jt,yt){return Math.log(jt/yt)/Math.LN2}var Ta=function(jt){n()(Q,jt);var yt=Ma(Q);function Q(){var xt;s()(this,Q);for(var wt=arguments.length,ae=new Array(wt),ke=0;ke<wt;ke++)ae[ke]=arguments[ke];return xt=yt.call.apply(yt,[this].concat(ae)),xt.distance=void 0,xt.startDistance=void 0,xt}return r()(Q,[{key:"reset",value:function(){ws()(u()(Q.prototype),"reset",this).call(this),delete this.distance,delete this.startDistance}},{key:"start",value:function(wt){this.startDistance=this.distance=wt[0].dist(wt[1])}},{key:"move",value:function(wt,ae){var ke=this.distance;if(this.distance=wt[0].dist(wt[1]),!(!this.active&&Math.abs(ri(this.distance,this.startDistance))<la))return this.active=!0,{zoomDelta:ri(this.distance,ke),pinchAround:ae}}}]),Q}(Vn);function Ga(jt,yt){var Q;if(typeof Symbol=="undefined"||jt[Symbol.iterator]==null){if(Array.isArray(jt)||(Q=Ya(jt))||yt&&jt&&typeof jt.length=="number"){Q&&(jt=Q);var xt=0,wt=function(){};return{s:wt,n:function(){return xt>=jt.length?{done:!0}:{done:!1,value:jt[xt++]}},e:function(On){throw On},f:wt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ae=!0,ke=!1,gn;return{s:function(){Q=jt[Symbol.iterator]()},n:function(){var On=Q.next();return ae=On.done,On},e:function(On){ke=!0,gn=On},f:function(){try{!ae&&Q.return!=null&&Q.return()}finally{if(ke)throw gn}}}}function Ya(jt,yt){if(!!jt){if(typeof jt=="string")return Ii(jt,yt);var Q=Object.prototype.toString.call(jt).slice(8,-1);if(Q==="Object"&&jt.constructor&&(Q=jt.constructor.name),Q==="Map"||Q==="Set")return Array.from(jt);if(Q==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Q))return Ii(jt,yt)}}function Ii(jt,yt){(yt==null||yt>jt.length)&&(yt=jt.length);for(var Q=0,xt=new Array(yt);Q<yt;Q++)xt[Q]=jt[Q];return xt}var Da=function(yt){return yt.zoom||yt.drag||yt.pitch||yt.rotate};function ho(jt){return jt.panDelta&&jt.panDelta.mag()||jt.zoomDelta||jt.bearingDelta||jt.pitchDelta}var js=function(){function jt(yt,Q){var xt=this;s()(this,jt),this.map=void 0,this.el=void 0,this.handlers=void 0,this.eventsInProgress=void 0,this.frameId=void 0,this.inertia=void 0,this.bearingSnap=void 0,this.handlersById=void 0,this.updatingCamera=void 0,this.changes=void 0,this.previousActiveHandlers=void 0,this.bearingChanged=void 0,this.listeners=void 0,this.handleWindowEvent=function(Me){xt.handleEvent(Me,"".concat(Me.type,"Window"))},this.handleEvent=function(Me,Ze){if(Me.type==="blur"){xt.stop();return}xt.updatingCamera=!0;var In=Me.type==="renderFrame"?void 0:Me,ir={needsRenderFrame:!1},or={},sr={},wr=Me.touches?xt.getMapTouches(Me.touches):void 0,ni=wr?$o.touchPos(xt.el,wr):$o.mousePos(xt.el,Me),Yr=Ga(xt.handlers),ei;try{for(Yr.s();!(ei=Yr.n()).done;){var hi=ei.value,Ai=hi.handlerName,di=hi.handler,ai=hi.allowed;if(!!di.isEnabled()){var Ir=void 0;if(xt.blockedByActive(sr,ai,Ai))di.reset();else{var Mr=Ze||Me.type;di&&di[Mr]&&(Ir=di[Mr](Me,ni,wr),xt.mergeIHandlerResult(ir,or,Ir,Ai,In),Ir&&Ir.needsRenderFrame&&xt.triggerRenderFrame())}(Ir||di.isActive())&&(sr[Ai]=di)}}}catch(ra){Yr.e(ra)}finally{Yr.f()}var vi={};for(var Vi in xt.previousActiveHandlers)sr[Vi]||(vi[Vi]=In);xt.previousActiveHandlers=sr,(Object.keys(vi).length||ho(ir))&&(xt.changes.push([ir,or,vi]),xt.triggerRenderFrame()),(Object.keys(sr).length||ho(ir))&&xt.map.stop(!0),xt.updatingCamera=!1;var $r=ir.cameraAnimation;$r&&(xt.inertia.clear(),xt.fireEvents({},{}),xt.changes=[],$r(xt.map))},this.map=yt,this.el=this.map.getCanvasContainer(),this.handlers=[],this.handlersById={},this.changes=[],this.inertia=new Os(yt),this.bearingSnap=Q.bearingSnap,this.previousActiveHandlers={},this.eventsInProgress={},this.addDefaultHandlers(Q);var wt=this.el;this.listeners=[[wt,"touchstart",{passive:!1}],[wt,"touchmove",{passive:!1}],[wt,"touchend",void 0],[wt,"touchcancel",void 0],[wt,"mousedown",void 0],[wt,"mousemove",void 0],[wt,"mouseup",void 0],[window.document,"mousemove",{capture:!0}],[window.document,"mouseup",void 0],[wt,"mouseover",void 0],[wt,"mouseout",void 0],[wt,"dblclick",void 0],[wt,"click",void 0],[wt,"keydown",{capture:!1}],[wt,"keyup",void 0],[wt,"wheel",{passive:!1}],[wt,"contextmenu",void 0],[window,"blur",void 0]];var ae=Ga(this.listeners),ke;try{for(ae.s();!(ke=ae.n()).done;){var gn=At()(ke.value,3),pn=gn[0],On=gn[1],ne=gn[2];$o.addEventListener(pn,On,pn===window.document?this.handleWindowEvent:this.handleEvent,ne)}}catch(Me){ae.e(Me)}finally{ae.f()}}return r()(jt,[{key:"destroy",value:function(){var Q=Ga(this.listeners),xt;try{for(Q.s();!(xt=Q.n()).done;){var wt=At()(xt.value,3),ae=wt[0],ke=wt[1],gn=wt[2];$o.removeEventListener(ae,ke,ae===window.document?this.handleWindowEvent:this.handleEvent,gn)}}catch(pn){Q.e(pn)}finally{Q.f()}}},{key:"stop",value:function(){if(!this.updatingCamera){var Q=Ga(this.handlers),xt;try{for(Q.s();!(xt=Q.n()).done;){var wt=xt.value.handler;wt.reset()}}catch(ae){Q.e(ae)}finally{Q.f()}this.inertia.clear(),this.fireEvents({},{}),this.changes=[]}}},{key:"isActive",value:function(){var Q=Ga(this.handlers),xt;try{for(Q.s();!(xt=Q.n()).done;){var wt=xt.value.handler;if(wt.isActive())return!0}}catch(ae){Q.e(ae)}finally{Q.f()}return!1}},{key:"isZooming",value:function(){return!!this.eventsInProgress.zoom||this.map.scrollZoom.isZooming()}},{key:"isRotating",value:function(){return!!this.eventsInProgress.rotate}},{key:"isMoving",value:function(){return Boolean(Da(this.eventsInProgress))||this.isZooming()}},{key:"mergeIHandlerResult",value:function(Q,xt,wt,ae,ke){if(!!wt){ea()(Q,wt);var gn={handlerName:ae,originalEvent:wt.originalEvent||ke};wt.zoomDelta!==void 0&&(xt.zoom=gn),wt.panDelta!==void 0&&(xt.drag=gn),wt.pitchDelta!==void 0&&(xt.pitch=gn),wt.bearingDelta!==void 0&&(xt.rotate=gn)}}},{key:"triggerRenderFrame",value:function(){var Q=this;this.frameId===void 0&&(this.frameId=this.map.requestRenderFrame(function(xt){delete Q.frameId,Q.handleEvent(new hl("renderFrame",{timeStamp:xt})),Q.applyChanges()}))}},{key:"addDefaultHandlers",value:function(Q){var xt=this.map,wt=xt.getCanvasContainer();this.add("mapEvent",new qo(xt,Q));var ae=xt.boxZoom=new Vl(xt,Q);this.add("boxZoom",ae);var ke=new hn,gn=new tu;xt.doubleClickZoom=new br(gn,ke),this.add("tapZoom",ke),this.add("clickZoom",gn);var pn=new vn;this.add("tapDragZoom",pn);var On=xt.touchPitch=new yi;this.add("touchPitch",On);var ne=new Te(Q),Me=new wn(Q);xt.dragRotate=new te(Q,ne,Me),this.add("mouseRotate",ne,["mousePitch"]),this.add("mousePitch",Me,["mouseRotate"]);var Ze=new Lu(Q),In=new Jn(Q);xt.dragPan=new Zt(wt,Ze,In),this.add("mousePan",Ze),this.add("touchPan",In,["touchZoom","touchRotate"]);var ir=new Li,or=new Ta;xt.touchZoomRotate=new Le(wt,or,ir,pn),this.add("touchRotate",ir,["touchPan","touchZoom"]),this.add("touchZoom",or,["touchPan","touchRotate"]);var sr=xt.scrollZoom=new ui(xt,this);this.add("scrollZoom",sr,["mousePan"]);var wr=xt.keyboard=new Ou;this.add("keyboard",wr),this.add("blockableMapEvent",new Qu(xt));for(var ni=0,Yr=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];ni<Yr.length;ni++){var ei=Yr[ni];Q.interactive&&Q[ei]&&xt[ei].enable(Q[ei])}}},{key:"add",value:function(Q,xt,wt){this.handlers.push({handlerName:Q,handler:xt,allowed:wt}),this.handlersById[Q]=xt}},{key:"blockedByActive",value:function(Q,xt,wt){for(var ae in Q)if(ae!==wt&&(!xt||xt.indexOf(ae)<0))return!0;return!1}},{key:"getMapTouches",value:function(Q){var xt=[],wt=Ga(Q),ae;try{for(wt.s();!(ae=wt.n()).done;){var ke=ae.value,gn=ke.target;this.el.contains(gn)&&xt.push(ke)}}catch(pn){wt.e(pn)}finally{wt.f()}return xt}},{key:"applyChanges",value:function(){var Q={},xt={},wt={},ae=Ga(this.changes),ke;try{for(ae.s();!(ke=ae.n()).done;){var gn=At()(ke.value,3),pn=gn[0],On=gn[1],ne=gn[2];pn.panDelta&&(Q.panDelta=(Q.panDelta||new Ea(0,0))._add(pn.panDelta)),pn.zoomDelta&&(Q.zoomDelta=(Q.zoomDelta||0)+pn.zoomDelta),pn.bearingDelta&&(Q.bearingDelta=(Q.bearingDelta||0)+pn.bearingDelta),pn.pitchDelta&&(Q.pitchDelta=(Q.pitchDelta||0)+pn.pitchDelta),pn.around!==void 0&&(Q.around=pn.around),pn.pinchAround!==void 0&&(Q.pinchAround=pn.pinchAround),pn.noInertia&&(Q.noInertia=pn.noInertia),ea()(xt,On),ea()(wt,ne)}}catch(Me){ae.e(Me)}finally{ae.f()}this.updateMapTransform(Q,xt,wt),this.changes=[]}},{key:"updateMapTransform",value:function(Q,xt,wt){var ae=this.map,ke=ae.transform;if(!ho(Q))return this.fireEvents(xt,wt);var gn=Q.panDelta,pn=Q.zoomDelta,On=Q.bearingDelta,ne=Q.pitchDelta,Me=Q.pinchAround,Ze=Q.around;Me!==void 0&&(Ze=Me),ae.stop(!0),Ze=Ze||ae.transform.centerPoint;var In=ke.pointLocation(gn?Ze.sub(gn):Ze);On&&(ke.bearing+=On),ne&&(ke.pitch+=ne),pn&&(ke.zoom+=pn),ke.setLocationAtPoint(In,Ze),this.map.update(),Q.noInertia||this.inertia.record(Q),this.fireEvents(xt,wt)}},{key:"fireEvents",value:function(Q,xt){var wt=this,ae=Da(this.eventsInProgress),ke=Da(Q),gn={};for(var pn in Q)if(Q[pn]){var On=Q[pn].originalEvent;this.eventsInProgress[pn]||(gn["".concat(pn,"start")]=On),this.eventsInProgress[pn]=Q[pn]}!ae&&ke&&this.fireEvent("movestart",ke.originalEvent);for(var ne in gn)gn[ne]&&this.fireEvent(ne,gn[ne]);Q.rotate&&(this.bearingChanged=!0),ke&&this.fireEvent("move",ke.originalEvent);for(var Me in Q)if(Q[Me]){var Ze=Q[Me].originalEvent;this.fireEvent(Me,Ze)}var In={},ir;for(var or in this.eventsInProgress)if(this.eventsInProgress[or]){var sr=this.eventsInProgress[or],wr=sr.handlerName,ni=sr.originalEvent;this.handlersById[wr].isActive()||(delete this.eventsInProgress[or],ir=xt[wr]||ni,In["".concat(or,"end")]=ir)}for(var Yr in In)In[Yr]&&this.fireEvent(Yr,In[Yr]);var ei=Da(this.eventsInProgress);if((ae||ke)&&!ei){this.updatingCamera=!0;var hi=this.inertia.onMoveEnd(this.map.dragPan.inertiaOptions),Ai=function(ai){return ai!==0&&-wt.bearingSnap<ai&&ai<wt.bearingSnap};hi?(Ai(hi.bearing||this.map.getBearing())&&(hi.bearing=0),this.map.easeTo(hi,{originalEvent:ir})):(this.map.emit("moveend",new Ha("moveend",{originalEvent:ir})),Ai(this.map.getBearing())&&this.map.resetNorth()),this.bearingChanged=!1,this.updatingCamera=!1}}},{key:"fireEvent",value:function(Q,xt){this.map.emit(Q,new Ha(Q,xt?{originalEvent:xt}:{}))}}]),jt}(),Is=js,Vu=L("DzJC"),cu=L.n(Vu),j=function(){function jt(yt){var Q=this;s()(this,jt),this.map=void 0,this.updateHash=void 0,this.hashName=void 0,this.onHashChange=function(){var xt=Q.getCurrentHash();if(xt.length>=3&&!xt.some(function(ae){return isNaN(+ae)})){var wt=Q.map.dragRotate.isEnabled()&&Q.map.touchZoomRotate.isEnabled()?+(xt[3]||0):Q.map.getBearing();return Q.map.jumpTo({center:[+xt[2],+xt[1]],zoom:+xt[0],bearing:wt,pitch:+(xt[4]||0)}),!0}return!1},this.getCurrentHash=function(){var xt=window.location.hash.replace("#","");if(Q.hashName){var wt;return xt.split("&").map(function(ae){return ae.split("=")}).forEach(function(ae){ae[0]===Q.hashName&&(wt=ae)}),(wt&&wt[1]||"").split("/")}return xt.split("/")},this.updateHashUnthrottled=function(){var xt=Q.getHashString();try{window.history.replaceState(window.history.state,"",xt)}catch(wt){}},this.hashName=yt&&encodeURIComponent(yt),this.updateHash=cu()(this.updateHashUnthrottled,30*1e3/100)}return r()(jt,[{key:"addTo",value:function(Q){return this.map=Q,window.addEventListener("hashchange",this.onHashChange,!1),this.map.on("moveend",this.updateHash),this}},{key:"remove",value:function(){return window.removeEventListener("hashchange",this.onHashChange,!1),this.map.off("moveend",this.updateHash),delete this.map,this}},{key:"getHashString",value:function(Q){var xt=this.map.getCenter(),wt=Math.round(this.map.getZoom()*100)/100,ae=Math.ceil((wt*Math.LN2+Math.log(512/360/.5))/Math.LN10),ke=Math.pow(10,ae),gn=Math.round(xt.lng*ke)/ke,pn=Math.round(xt.lat*ke)/ke,On=this.map.getBearing(),ne=this.map.getPitch(),Me="";if(Q?Me+="/".concat(gn,"/").concat(pn,"/").concat(wt):Me+="".concat(wt,"/").concat(pn,"/").concat(gn),(On||ne)&&(Me+="/".concat(Math.round(On*10)/10)),ne&&(Me+="/".concat(Math.round(ne))),this.hashName){var Ze=this.hashName,In=!1,ir=window.location.hash.slice(1).split("&").map(function(or){var sr=or.split("=")[0];return sr===Ze?(In=!0,"".concat(sr,"=").concat(Me)):or}).filter(function(or){return or});return In||ir.push("".concat(Ze,"=").concat(Me)),"#".concat(ir.join("&"))}return"#".concat(Me)}}]),jt}(),I=j,w=null,B=[],D=30,G=1e3/D,J=window.performance,st={create:"create",load:"load",fullLoad:"fullLoad"},Ct={mark:function(yt){J.mark(yt)},frame:function(yt){var Q=yt;if(w!=null){var xt=Q-w;B.push(xt)}w=Q},clearMetrics:function(){w=null,B=[],J.clearMeasures("loadTime"),J.clearMeasures("fullLoadTime");for(var yt in st)J.clearMarks(st[yt])},getPerformanceMetrics:function(){var yt=J.measure("loadTime",st.create,st.load).duration,Q=J.measure("fullLoadTime",st.create,st.fullLoad).duration,xt=B.length,wt=B.reduce(function(pn,On){return pn+On},0)/xt/1e3,ae=1/wt,ke=B.filter(function(pn){return pn>G}).reduce(function(pn,On){return pn+(On-G)/G},0),gn=ke/(xt+ke)*100;return{loadTime:yt,fullLoadTime:Q,fps:ae,percentDroppedFrames:gn}}};function Ot(jt,yt){var Q;if(typeof Symbol=="undefined"||jt[Symbol.iterator]==null){if(Array.isArray(jt)||(Q=Ut(jt))||yt&&jt&&typeof jt.length=="number"){Q&&(jt=Q);var xt=0,wt=function(){};return{s:wt,n:function(){return xt>=jt.length?{done:!0}:{done:!1,value:jt[xt++]}},e:function(On){throw On},f:wt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ae=!0,ke=!1,gn;return{s:function(){Q=jt[Symbol.iterator]()},n:function(){var On=Q.next();return ae=On.done,On},e:function(On){ke=!0,gn=On},f:function(){try{!ae&&Q.return!=null&&Q.return()}finally{if(ke)throw gn}}}}function Ut(jt,yt){if(!!jt){if(typeof jt=="string")return Ht(jt,yt);var Q=Object.prototype.toString.call(jt).slice(8,-1);if(Q==="Object"&&jt.constructor&&(Q=jt.constructor.name),Q==="Map"||Q==="Set")return Array.from(jt);if(Q==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Q))return Ht(jt,yt)}}function Ht(jt,yt){(yt==null||yt>jt.length)&&(yt=jt.length);for(var Q=0,xt=new Array(yt);Q<yt;Q++)xt[Q]=jt[Q];return xt}var qt=function(){function jt(){s()(this,jt),this.queue=void 0,this.id=void 0,this.cleared=void 0,this.currentlyRunning=void 0,this.queue=[],this.id=0,this.cleared=!1,this.currentlyRunning=!1}return r()(jt,[{key:"add",value:function(Q){var xt=++this.id,wt=this.queue;return wt.push({callback:Q,id:xt,cancelled:!1}),xt}},{key:"remove",value:function(Q){var xt=this.currentlyRunning,wt=xt?this.queue.concat(xt):this.queue,ae=Ot(wt),ke;try{for(ae.s();!(ke=ae.n()).done;){var gn=ke.value;if(gn.id===Q){gn.cancelled=!0;return}}}catch(pn){ae.e(pn)}finally{ae.f()}}},{key:"run",value:function(){var Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,xt=this.currentlyRunning=this.queue;this.queue=[];var wt=Ot(xt),ae;try{for(wt.s();!(ae=wt.n()).done;){var ke=ae.value;if(!ke.cancelled&&(ke.callback(Q),this.cleared))break}}catch(gn){wt.e(gn)}finally{wt.f()}this.cleared=!1,this.currentlyRunning=!1}},{key:"clear",value:function(){this.currentlyRunning&&(this.cleared=!0),this.queue=[]}}]),jt}(),fe=qt;function ye(jt){var yt=De();return function(){var xt=u()(jt),wt;if(yt){var ae=u()(this).constructor;wt=Reflect.construct(xt,arguments,ae)}else wt=xt.apply(this,arguments);return a()(this,wt)}}function De(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}L("BGjm")(`/* @antv/l7-map */
.l7-map {
  font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
  overflow: hidden;
  position: relative;
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}

.l7-canvas {
  position: absolute;
  left: 0;
  top: 0;
}

.l7-map:-webkit-full-screen {
  width: 100%;
  height: 100%;
}

.l7-canary {
  background-color: salmon;
}

.l7-canvas-container.l7-interactive,
.l7-ctrl-group button.l7-ctrl-compass {
  cursor: -webkit-grab;
  cursor: grab;
  -moz-user-select: none;
  -webkit-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.l7-canvas-container.l7-interactive.l7-track-pointer {
  cursor: pointer;
}

.l7-canvas-container.l7-interactive:active,
.l7-ctrl-group button.l7-ctrl-compass:active {
  cursor: -webkit-grabbing;
  cursor: grabbing;
}

.l7-canvas-container.l7-touch-zoom-rotate,
.l7-canvas-container.l7-touch-zoom-rotate .l7-canvas {
  -ms-touch-action: pan-x pan-y;
      touch-action: pan-x pan-y;
}

.l7-canvas-container.l7-touch-drag-pan,
.l7-canvas-container.l7-touch-drag-pan .l7-canvas {
  -ms-touch-action: pinch-zoom;
      touch-action: pinch-zoom;
}

.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan,
.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan .l7-canvas {
  -ms-touch-action: none;
      touch-action: none;
}

.l7-ctrl-top-left,
.l7-ctrl-top-right,
.l7-ctrl-bottom-left,
.l7-ctrl-bottom-right { position: absolute; pointer-events: none; z-index: 2; }
.l7-ctrl-top-left     { top: 0; left: 0; }
.l7-ctrl-top-right    { top: 0; right: 0; }
.l7-ctrl-bottom-left  { bottom: 0; left: 0; }
.l7-ctrl-bottom-right { right: 0; bottom: 0; }

.l7-ctrl {
  clear: both;
  pointer-events: auto;

  /* workaround for a Safari bug https://github.com/mapbox/mapbox-gl-js/issues/8185 */
  -webkit-transform: translate(0, 0);
          transform: translate(0, 0);
}
.l7-ctrl-top-left .l7-ctrl     { margin: 10px 0 0 10px; float: left; }
.l7-ctrl-top-right .l7-ctrl    { margin: 10px 10px 0 0; float: right; }
.l7-ctrl-bottom-left .l7-ctrl  { margin: 0 0 10px 10px; float: left; }
.l7-ctrl-bottom-right .l7-ctrl { margin: 0 10px 10px 0; float: right; }


.l7-crosshair,
.l7-crosshair .l7-interactive,
.l7-crosshair .l7-interactive:active {
    cursor: crosshair;
}

.l7-boxzoom {
    position: absolute;
    top: 0;
    left: 0;
    width: 0;
    height: 0;
    background: #fff;
    border: 2px dotted #202020;
    opacity: 0.5;
    z-index: 10;
}
`);var Ie=-2,Ve=22,qe=0,on=60,tr={hash:!1,zoom:-1,center:[112,32],pitch:0,bearing:0,interactive:!0,minZoom:Ie,maxZoom:Ve,minPitch:qe,maxPitch:on,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,trackResize:!0,renderWorldCopies:!0},zn=function(jt){n()(Q,jt);var yt=ye(Q);function Q(xt){var wt;s()(this,Q),wt=yt.call(this,ea()({},tr,xt)),wt.doubleClickZoom=void 0,wt.dragRotate=void 0,wt.dragPan=void 0,wt.touchZoomRotate=void 0,wt.scrollZoom=void 0,wt.keyboard=void 0,wt.touchPitch=void 0,wt.boxZoom=void 0,wt.handlers=void 0,wt.container=void 0,wt.canvas=void 0,wt.canvasContainer=void 0,wt.renderTaskQueue=new fe,wt.frame=void 0,wt.trackResize=!0,wt.hash=void 0,wt.onWindowOnline=function(){wt.update()},wt.onWindowResize=function(ke){wt.trackResize&&wt.resize({originalEvent:ke}).update()},wt.initContainer(),wt.resize(),wt.handlers=new Is(So()(wt),wt.options),typeof window!="undefined"&&(window.addEventListener("online",wt.onWindowOnline,!1),window.addEventListener("resize",wt.onWindowResize,!1),window.addEventListener("orientationchange",wt.onWindowResize,!1));var ae=typeof xt.hash=="string"&&xt.hash||void 0;return xt.hash&&(wt.hash=new I(ae).addTo(So()(wt))),(!wt.hash||!wt.hash.onHashChange())&&(wt.jumpTo({center:xt.center,zoom:xt.zoom,bearing:xt.bearing,pitch:xt.pitch}),xt.bounds&&(wt.resize(),wt.fitBounds(xt.bounds,ea()({},xt.fitBoundsOptions,{duration:0})))),wt}return r()(Q,[{key:"resize",value:function(wt){var ae=this.containerDimensions(),ke=ae[0],gn=ae[1];this.transform.resize(ke,gn);var pn=!this.moving;return pn&&(this.stop(),this.emit("movestart",new Event("movestart",wt)),this.emit("move",new Event("move",wt))),this.emit("resize",new Event("resize",wt)),pn&&this.emit("moveend",new Event("moveend",wt)),this}},{key:"getContainer",value:function(){return this.container}},{key:"getCanvas",value:function(){return this.canvas}},{key:"getCanvasContainer",value:function(){return this.canvasContainer}},{key:"project",value:function(wt){return this.transform.locationPoint(Ra.convert(wt))}},{key:"unproject",value:function(wt){return this.transform.pointLocation(Ea.convert(wt))}},{key:"getBounds",value:function(){return this.transform.getBounds()}},{key:"getMaxBounds",value:function(){return this.transform.getMaxBounds()}},{key:"setMaxBounds",value:function(wt){this.transform.setMaxBounds(Xu.convert(wt))}},{key:"setStyle",value:function(wt){}},{key:"setMinZoom",value:function(wt){if(wt=wt==null?Ie:wt,wt>=Ie&&wt<=this.transform.maxZoom)return this.transform.minZoom=wt,this.getZoom()<wt&&this.setZoom(wt),this;throw new Error("minZoom must be between ".concat(Ie," and the current maxZoom, inclusive"))}},{key:"getMinZoom",value:function(){return this.transform.minZoom}},{key:"setMaxZoom",value:function(wt){if(wt=wt==null?Ve:wt,wt>=this.transform.minZoom)return this.transform.maxZoom=wt,this.getZoom()>wt&&this.setZoom(wt),this;throw new Error("maxZoom must be greater than the current minZoom")}},{key:"getMaxZoom",value:function(){return this.transform.maxZoom}},{key:"setMinPitch",value:function(wt){if(wt=wt==null?qe:wt,wt<qe)throw new Error("minPitch must be greater than or equal to ".concat(qe));if(wt>=qe&&wt<=this.transform.maxPitch)return this.transform.minPitch=wt,this.getPitch()<wt&&this.setPitch(wt),this;throw new Error("minPitch must be between ".concat(qe," and the current maxPitch, inclusive"))}},{key:"getMinPitch",value:function(){return this.transform.minPitch}},{key:"setMaxPitch",value:function(wt){if(wt=wt==null?on:wt,wt>on)throw new Error("maxPitch must be less than or equal to ".concat(on));if(wt>=this.transform.minPitch)return this.transform.maxPitch=wt,this.getPitch()>wt&&this.setPitch(wt),this;throw new Error("maxPitch must be greater than the current minPitch")}},{key:"getMaxPitch",value:function(){return this.transform.maxPitch}},{key:"getRenderWorldCopies",value:function(){return this.transform.renderWorldCopies}},{key:"setRenderWorldCopies",value:function(wt){this.transform.renderWorldCopies=!!wt}},{key:"remove",value:function(){this.frame&&(this.frame.cancel(),this.frame=null),this.renderTaskQueue.clear()}},{key:"requestRenderFrame",value:function(wt){return this.update(),this.renderTaskQueue.add(wt)}},{key:"cancelRenderFrame",value:function(wt){return this.renderTaskQueue.remove(wt)}},{key:"triggerRepaint",value:function(){var wt=this;this.frame||(this.frame=cl(function(ae){Ct.frame(ae),wt.frame=null,wt.update(ae)}))}},{key:"update",value:function(wt){var ae=this;this.frame||(this.frame=cl(function(ke){Ct.frame(ke),ae.frame=null,ae.renderTaskQueue.run(wt)}))}},{key:"initContainer",value:function(){if(typeof this.options.container=="string"){if(this.container=window.document.getElementById(this.options.container),!this.container)throw new Error("Container '".concat(this.options.container,"' not found."))}else if(this.options.container instanceof HTMLElement)this.container=this.options.container;else throw new Error("Invalid type: 'container' must be a String or HTMLElement.");var wt=this.container;wt.classList.add("l7-map");var ae=this.canvasContainer=It.a.create("div","l7-canvas-container",wt);this.options.interactive&&ae.classList.add("l7-interactive")}},{key:"containerDimensions",value:function(){var wt=0,ae=0;return this.container&&(wt=this.container.clientWidth||400,ae=this.container.clientHeight||300),[wt,ae]}},{key:"resizeCanvas",value:function(wt,ae){var ke=It.a.DPR||1;this.canvas.width=ke*wt,this.canvas.height=ke*ae,this.canvas.style.width="".concat(wt,"px"),this.canvas.style.height="".concat(ae,"px")}}]),Q}(ms),cr=function(){function jt(){s()(this,jt),this.viewport=void 0}return r()(jt,[{key:"syncWithMapCamera",value:function(Q){var xt=Q.center,wt=Q.zoom,ae=Q.pitch,ke=Q.bearing,gn=Q.viewportHeight,pn=Q.viewportWidth;this.viewport=new Bo({width:pn,height:gn,longitude:xt&&xt[0],latitude:xt&&xt[1],zoom:wt,pitch:ae,bearing:ke})}},{key:"getZoom",value:function(){return this.viewport.zoom}},{key:"getZoomScale",value:function(){return Math.pow(2,this.getZoom())}},{key:"getCenter",value:function(){return[this.viewport.longitude,this.viewport.latitude]}},{key:"getProjectionMatrix",value:function(){return this.viewport.projectionMatrix}},{key:"getViewMatrix",value:function(){return this.viewport.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.viewMatrixUncentered}},{key:"getViewProjectionMatrix",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(Q,xt){return this.viewport.projectFlat(Q,xt)}}]),jt}(),yr={light:"mapbox://styles/zcxduo/ck2ypyb1r3q9o1co1766dex29",dark:"mapbox://styles/zcxduo/ck241p6413s0b1cpayzldv7x7",normal:"mapbox://styles/mapbox/streets-v11",blank:{version:8,sources:{},layers:[{id:"background",type:"background",layout:{visibility:"none"}}]}},Jr,Wr,bi,ji,Hi,Ji,Pa,ja,Fi,va,ya,Yi,Aa,ua;function Ba(jt,yt){var Q=Object.keys(jt);if(Object.getOwnPropertySymbols){var xt=Object.getOwnPropertySymbols(jt);yt&&(xt=xt.filter(function(wt){return Object.getOwnPropertyDescriptor(jt,wt).enumerable})),Q.push.apply(Q,xt)}return Q}function Za(jt){for(var yt=1;yt<arguments.length;yt++){var Q=arguments[yt]!=null?arguments[yt]:{};yt%2?Ba(Object(Q),!0).forEach(function(xt){v()(jt,xt,Q[xt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(jt,Object.getOwnPropertyDescriptors(Q)):Ba(Object(Q)).forEach(function(xt){Object.defineProperty(jt,xt,Object.getOwnPropertyDescriptor(Q,xt))})}return jt}var os={mapmove:"move",camerachange:"move",zoomchange:"zoom",dragging:"drag"},Go=12,Bs=(Jr=Object(Lt.injectable)(),Wr=Object(Lt.inject)(x.TYPES.MapConfig),bi=Object(Lt.inject)(x.TYPES.IGlobalConfigService),ji=Object(Lt.inject)(x.TYPES.ILogService),Hi=Object(Lt.inject)(x.TYPES.ICoordinateSystemService),Ji=Object(Lt.inject)(x.TYPES.IEventEmitter),Jr(Pa=(ja=(ua=function(){function jt(){var yt=this;s()(this,jt),this.map=void 0,y()(this,"config",Fi,this),y()(this,"configService",va,this),y()(this,"logger",ya,this),y()(this,"coordinateSystemService",Yi,this),y()(this,"eventEmitter",Aa,this),this.viewport=void 0,this.markerContainer=void 0,this.cameraChangedCallback=void 0,this.$mapContainer=void 0,this.handleCameraChanged=function(){var Q=yt.map.getCenter(),xt=Q.lat,wt=Q.lng,ae=yt.config.offsetCoordinate,ke=ae===void 0?!0:ae;yt.viewport.syncWithMapCamera({bearing:yt.map.getBearing(),center:[wt,xt],viewportHeight:yt.map.transform.height,pitch:yt.map.getPitch(),viewportWidth:yt.map.transform.width,zoom:yt.map.getZoom(),cameraHeight:0}),yt.viewport.getZoom()>Go&&ke?yt.coordinateSystemService.setCoordinateSystem(x.CoordinateSystem.LNGLAT_OFFSET):yt.coordinateSystemService.setCoordinateSystem(x.CoordinateSystem.LNGLAT),yt.cameraChangedCallback(yt.viewport)}}return r()(jt,[{key:"addMarkerContainer",value:function(){var Q=this.map.getCanvasContainer();this.markerContainer=It.a.create("div","l7-marker-container",Q),this.markerContainer.setAttribute("tabindex","-1")}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"on",value:function(Q,xt){x.MapServiceEvent.indexOf(Q)!==-1?this.eventEmitter.on(Q,xt):this.map.on(os[Q]||Q,xt)}},{key:"off",value:function(Q,xt){this.map.off(os[Q]||Q,xt)}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"getMapCanvasContainer",value:function(){return this.map.getCanvasContainer()}},{key:"getSize",value:function(){var Q=this.map.transform;return[Q.width,Q.height]}},{key:"getType",value:function(){return"default"}},{key:"getZoom",value:function(){return this.map.getZoom()}},{key:"setZoom",value:function(Q){return this.map.setZoom(Q)}},{key:"getCenter",value:function(){return this.map.getCenter()}},{key:"setCenter",value:function(Q){this.map.setCenter(Q)}},{key:"getPitch",value:function(){return this.map.getPitch()}},{key:"getRotation",value:function(){return this.map.getBearing()}},{key:"getBounds",value:function(){return this.map.getBounds().toArray()}},{key:"getMinZoom",value:function(){return this.map.getMinZoom()}},{key:"getMaxZoom",value:function(){return this.map.getMaxZoom()}},{key:"setRotation",value:function(Q){this.map.setBearing(Q)}},{key:"zoomIn",value:function(Q,xt){this.map.zoomIn(Q,xt)}},{key:"zoomOut",value:function(Q,xt){this.map.zoomOut(Q,xt)}},{key:"setPitch",value:function(Q){return this.map.setPitch(Q)}},{key:"panTo",value:function(Q){this.map.panTo(Q)}},{key:"panBy",value:function(Q){this.panTo(Q)}},{key:"fitBounds",value:function(Q,xt){this.map.fitBounds(Q,xt)}},{key:"setMaxZoom",value:function(Q){this.map.setMaxZoom(Q)}},{key:"setMinZoom",value:function(Q){this.map.setMinZoom(Q)}},{key:"setMapStatus",value:function(Q){Q.doubleClickZoom===!0&&this.map.doubleClickZoom.enable(),Q.doubleClickZoom===!1&&this.map.doubleClickZoom.disable(),Q.dragEnable===!1&&this.map.dragPan.disable(),Q.dragEnable===!0&&this.map.dragPan.enable(),Q.rotateEnable===!1&&this.map.dragRotate.disable(),Q.dragEnable===!0&&this.map.dragRotate.enable(),Q.keyboardEnable===!1&&this.map.keyboard.disable(),Q.keyboardEnable===!0&&this.map.keyboard.enable(),Q.zoomEnable===!1&&this.map.scrollZoom.disable(),Q.zoomEnable===!0&&this.map.scrollZoom.enable()}},{key:"setZoomAndCenter",value:function(Q,xt){this.map.flyTo({zoom:Q,center:xt})}},{key:"setMapStyle",value:function(Q){this.map.setStyle(this.getMapStyle(Q))}},{key:"pixelToLngLat",value:function(Q){return this.map.unproject(Q)}},{key:"lngLatToPixel",value:function(Q){return this.map.project(Q)}},{key:"containerToLngLat",value:function(Q){return this.map.unproject(Q)}},{key:"lngLatToContainer",value:function(Q){return this.map.project(Q)}},{key:"lngLatToMercator",value:function(Q,xt){throw new Error("not implement")}},{key:"getModelMatrix",value:function(Q,xt,wt){var ae=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],ke=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{x:0,y:0,z:0};throw new Error("not implement")}},{key:"init",value:function(){var yt=K()(ct.a.mark(function xt(){var wt,ae,ke,gn,pn,On,ne,Me,Ze,In,ir;return ct.a.wrap(function(sr){for(;;)switch(sr.prev=sr.next){case 0:wt=this.config,ae=wt.id,ke=ae===void 0?"map":ae,gn=wt.attributionControl,pn=gn===void 0?!1:gn,On=wt.style,ne=On===void 0?"light":On,Me=wt.rotation,Ze=Me===void 0?0:Me,In=wt.mapInstance,ir=k()(wt,["id","attributionControl","style","rotation","mapInstance"]),this.viewport=new cr,In?(this.map=In,this.$mapContainer=this.map.getContainer()):(this.$mapContainer=this.creatAmapContainer(ke),this.map=new zn(Za({container:this.$mapContainer,style:this.getMapStyle(ne),bearing:Ze},ir))),this.map.on("load",this.handleCameraChanged),this.map.on("move",this.handleCameraChanged),this.handleCameraChanged();case 6:case"end":return sr.stop()}},xt,this)}));function Q(){return yt.apply(this,arguments)}return Q}()},{key:"destroy",value:function(){this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}},{key:"emit",value:function(Q){for(var xt,wt=arguments.length,ae=new Array(wt>1?wt-1:0),ke=1;ke<wt;ke++)ae[ke-1]=arguments[ke];(xt=this.eventEmitter).emit.apply(xt,[Q].concat(ae))}},{key:"once",value:function(Q){for(var xt,wt=arguments.length,ae=new Array(wt>1?wt-1:0),ke=1;ke<wt;ke++)ae[ke-1]=arguments[ke];(xt=this.eventEmitter).once.apply(xt,[Q].concat(ae))}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"exportMap",value:function(Q){var xt=this.map.getCanvas(),wt=Q==="jpg"?xt==null?void 0:xt.toDataURL("image/jpeg"):xt==null?void 0:xt.toDataURL("image/png");return wt}},{key:"onCameraChanged",value:function(Q){this.cameraChangedCallback=Q}},{key:"creatAmapContainer",value:function(Q){var xt=Q;return typeof Q=="string"&&(xt=document.getElementById(Q)),xt}},{key:"getMapStyle",value:function(Q){return typeof Q!="string"?Q:yr[Q]?yr[Q]:Q}}]),jt}(),ua),Fi=_()(ja.prototype,"config",[Wr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),va=_()(ja.prototype,"configService",[bi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ya=_()(ja.prototype,"logger",[ji],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Yi=_()(ja.prototype,"coordinateSystemService",[Hi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Aa=_()(ja.prototype,"eventEmitter",[Ji],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ja))||Pa);function Yo(jt){var yt=ks();return function(){var xt=u()(jt),wt;if(yt){var ae=u()(this).constructor;wt=Reflect.construct(xt,arguments,ae)}else wt=xt.apply(this,arguments);return a()(this,wt)}}function ks(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}var yl=function(jt){n()(Q,jt);var yt=Yo(Q);function Q(){return s()(this,Q),yt.apply(this,arguments)}return r()(Q,[{key:"getServiceConstructor",value:function(){return Bs}}]),Q}(Z);function nl(jt,yt){var Q=Object.keys(jt);if(Object.getOwnPropertySymbols){var xt=Object.getOwnPropertySymbols(jt);yt&&(xt=xt.filter(function(wt){return Object.getOwnPropertyDescriptor(jt,wt).enumerable})),Q.push.apply(Q,xt)}return Q}function wl(jt){for(var yt=1;yt<arguments.length;yt++){var Q=arguments[yt]!=null?arguments[yt]:{};yt%2?nl(Object(Q),!0).forEach(function(xt){yc(jt,xt,Q[xt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(jt,Object.getOwnPropertyDescriptors(Q)):nl(Object(Q)).forEach(function(xt){Object.defineProperty(jt,xt,Object.getOwnPropertyDescriptor(Q,xt))})}return jt}function yc(jt,yt,Q){return yt in jt?Object.defineProperty(jt,yt,{value:Q,enumerable:!0,configurable:!0,writable:!0}):jt[yt]=Q,jt}function Il(jt,yt){return Uc(jt)||Pc(jt,yt)||xc(jt,yt)||tc()}function tc(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xc(jt,yt){if(!!jt){if(typeof jt=="string")return Bc(jt,yt);var Q=Object.prototype.toString.call(jt).slice(8,-1);if(Q==="Object"&&jt.constructor&&(Q=jt.constructor.name),Q==="Map"||Q==="Set")return Array.from(jt);if(Q==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Q))return Bc(jt,yt)}}function Bc(jt,yt){(yt==null||yt>jt.length)&&(yt=jt.length);for(var Q=0,xt=new Array(yt);Q<yt;Q++)xt[Q]=jt[Q];return xt}function Pc(jt,yt){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(jt)))){var Q=[],xt=!0,wt=!1,ae=void 0;try{for(var ke=jt[Symbol.iterator](),gn;!(xt=(gn=ke.next()).done)&&(Q.push(gn.value),!(yt&&Q.length===yt));xt=!0);}catch(pn){wt=!0,ae=pn}finally{try{!xt&&ke.return!=null&&ke.return()}finally{if(wt)throw ae}}return Q}}function Uc(jt){if(Array.isArray(jt))return jt}var kc=E.a.memo(function(jt){var yt=jt.style,Q=jt.className,xt=jt.map,wt=jt.option,ae=jt.onSceneLoaded,ke=jt.children,gn=Object(U.useRef)(null),pn=Object(U.useState)(),On=Il(pn,2),ne=On[0],Me=On[1];return Object(U.useEffect)(function(){var Ze=new t.Scene(wl(wl({id:gn.current},wt),{},{map:new yl(xt)}));return Ze.on("loaded",function(){Me(Ze),ae&&ae(Ze)}),function(){Ze.destroy()}},[]),Object(U.useEffect)(function(){ne&&xt.style&&ne.setMapStyle(xt.style)},[JSON.stringify(xt.style)]),Object(U.useEffect)(function(){ne&&xt.zoom&&ne.setZoom(xt.zoom)},[xt.zoom]),Object(U.useEffect)(function(){ne&&xt.center&&ne.setCenter(xt.center)},[JSON.stringify(xt.center)]),Object(U.useEffect)(function(){ne&&xt.pitch&&ne.setPitch(xt.pitch)},[xt.pitch]),Object(U.useEffect)(function(){ne&&xt.rotation&&ne.setRotation(xt.rotation)},[xt.rotation]),E.a.createElement(T.Provider,{value:ne},E.a.createElement("div",{ref:gn,className:Q,style:yt},ne&&ke))}),Tc=kc;function Gc(jt,yt){return Wl(jt)||Nc(jt,yt)||Su(jt,yt)||fc()}function fc(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Su(jt,yt){if(!!jt){if(typeof jt=="string")return Ac(jt,yt);var Q=Object.prototype.toString.call(jt).slice(8,-1);if(Q==="Object"&&jt.constructor&&(Q=jt.constructor.name),Q==="Map"||Q==="Set")return Array.from(jt);if(Q==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Q))return Ac(jt,yt)}}function Ac(jt,yt){(yt==null||yt>jt.length)&&(yt=jt.length);for(var Q=0,xt=new Array(yt);Q<yt;Q++)xt[Q]=jt[Q];return xt}function Nc(jt,yt){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(jt)))){var Q=[],xt=!0,wt=!1,ae=void 0;try{for(var ke=jt[Symbol.iterator](),gn;!(xt=(gn=ke.next()).done)&&(Q.push(gn.value),!(yt&&Q.length===yt));xt=!0);}catch(pn){wt=!0,ae=pn}finally{try{!xt&&ke.return!=null&&ke.return()}finally{if(wt)throw ae}}return Q}}function Wl(jt){if(Array.isArray(jt))return jt}var dl=E.a.memo(function(jt){var yt=jt.style,Q=jt.className,xt=jt.map,wt=jt.children,ae=Object(U.useRef)(null),ke=Object(U.useState)(),gn=Gc(ke,2),pn=gn[0],On=gn[1];return Object(U.useEffect)(function(){var ne=new t.Scene({id:ae.current,map:xt});return ne.on("loaded",function(){On(ne)}),function(){ne.destroy()}},[]),E.a.createElement(T.Provider,{value:pn},E.a.createElement("div",{ref:ae,className:Q,style:yt},pn&&wt))}),vl=E.a.memo(function(yt){var Q=e(),xt=Object(U.useRef)(),wt=yt.type,ae=yt.position;return Object(U.useEffect)(function(){var ke;switch(wt){case"scale":ke=new t.Scale({position:ae||"bottomright"});break;case"zoom":ke=new t.Zoom({position:ae||"topright"});break;case"logo":ke=new t.Logo({position:ae||"bottomleft"})}return xt.current=ke,Q.addControl(ke),function(){xt.current=void 0,Q.removeControl(ke)}},[wt]),Object(U.useEffect)(function(){xt.current&&xt.current.setPosition(ae)},[ae]),null}),Wu=L("i8i4");function Hu(jt,yt){return tf(jt)||qc(jt,yt)||ec(jt,yt)||rl()}function rl(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ec(jt,yt){if(!!jt){if(typeof jt=="string")return Ic(jt,yt);var Q=Object.prototype.toString.call(jt).slice(8,-1);if(Q==="Object"&&jt.constructor&&(Q=jt.constructor.name),Q==="Map"||Q==="Set")return Array.from(jt);if(Q==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Q))return Ic(jt,yt)}}function Ic(jt,yt){(yt==null||yt>jt.length)&&(yt=jt.length);for(var Q=0,xt=new Array(yt);Q<yt;Q++)xt[Q]=jt[Q];return xt}function qc(jt,yt){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(jt)))){var Q=[],xt=!0,wt=!1,ae=void 0;try{for(var ke=jt[Symbol.iterator](),gn;!(xt=(gn=ke.next()).done)&&(Q.push(gn.value),!(yt&&Q.length===yt));xt=!0);}catch(pn){wt=!0,ae=pn}finally{try{!xt&&ke.return!=null&&ke.return()}finally{if(wt)throw ae}}return Q}}function tf(jt){if(Array.isArray(jt))return jt}var Lc=U.useEffect,Vc=U.useState;function Fc(jt){var yt=jt.className,Q=jt.style,xt=jt.children,wt=jt.position,ae=e(),ke=Vc(function(){return document.createElement("div")}),gn=Hu(ke,1),pn=gn[0];return Lc(function(){var On=new t.Control({position:wt});return On.onAdd=function(){if(yt&&(pn.className=yt),Q){var ne=Object.keys(Q).map(function(Me){return"".concat(Me,":").concat(Q[Me])}).join(";");pn.style.cssText=ne}return pn},ae.addControl(On),function(){ae.removeControl(On)}},[]),Object(Wu.createPortal)(xt,pn)}var Kl=Object(U.createContext)({});function Yu(){return Object(U.useContext)(Kl)}var ef=U.useEffect,Hl=U.memo(function(yt){var Q=yt.layer,xt=yt.active;return ef(function(){Q.active(xt.option)},[JSON.stringify(xt)]),null}),bf=U.useEffect,wf=U.memo(function(yt){var Q=yt.layer,xt=yt.animate;return bf(function(){Q.animate(xt)},[JSON.stringify(xt)]),null}),If=U.useEffect,Gf=U.memo(function(yt){var Q=yt.layer,xt=yt.color;return If(function(){xt.field?Q.color(xt.field,xt.values):Q.color(xt.values)},[xt.field,xt.scale,JSON.stringify(xt.values),JSON.stringify(xt.options)]),null}),Rc=U.useEffect,Pf=U.memo(function(yt){var Q=yt.layer,xt=yt.filter;return Rc(function(){xt.field&&Q.filter(xt.field,xt.values)},[xt.field,xt.values,JSON.stringify(xt.values),JSON.stringify(xt.options)]),null}),Ef=U.useEffect,Lf=U.memo(function(yt){var Q=yt.layer,xt=yt.scale;return Ef(function(){Q.scale(xt.values)},[xt.values]),null}),Cc=U.useEffect,Xc=U.memo(function(yt){var Q=yt.layer,xt=yt.select;return Cc(function(){Q.select(xt.option)},[JSON.stringify(xt)]),null}),Vf=U.useEffect,nf=U.memo(function(yt){var Q=yt.layer,xt=yt.shape;return Vf(function(){xt.field?Q.shape(xt.field,xt.values):Q.shape(xt.values)},[xt.field,JSON.stringify(xt.values),JSON.stringify(xt.options)]),null}),rf=U.useEffect,Wf=U.memo(function(yt){var Q=yt.layer,xt=yt.size;return rf(function(){xt.field?Q.size(xt.field,xt.values):Q.size(xt.values)},[xt.field,xt.scale,JSON.stringify(xt.values),JSON.stringify(xt.options)]),null});function Hf(jt,yt){if(jt==null)return{};var Q=Yf(jt,yt),xt,wt;if(Object.getOwnPropertySymbols){var ae=Object.getOwnPropertySymbols(jt);for(wt=0;wt<ae.length;wt++)xt=ae[wt],!(yt.indexOf(xt)>=0)&&(!Object.prototype.propertyIsEnumerable.call(jt,xt)||(Q[xt]=jt[xt]))}return Q}function Yf(jt,yt){if(jt==null)return{};var Q={},xt=Object.keys(jt),wt,ae;for(ae=0;ae<xt.length;ae++)wt=xt[ae],!(yt.indexOf(wt)>=0)&&(Q[wt]=jt[wt]);return Q}var Zf=U.useEffect,Tf=U.memo(function(yt){var Q=yt.layer,xt=yt.source,wt=xt.data,ae=Hf(xt,["data"]);return Zf(function(){Q.inited?Q.setData(wt,ae):Q.source(wt,ae),ae.autoFit&&Q.fitBounds(ae&&ae.fitBoundsOptions)},[wt,JSON.stringify(ae)]),null}),qf=U.useEffect,Wc=U.memo(function(yt){var Q=yt.layer,xt=yt.style;return qf(function(){Q.style(xt)},Object.keys(xt).map(function(wt){return xt[wt]})),null});function hf(jt,yt){return oc(jt)||af(jt,yt)||Hc(jt,yt)||yu()}function yu(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hc(jt,yt){if(!!jt){if(typeof jt=="string")return df(jt,yt);var Q=Object.prototype.toString.call(jt).slice(8,-1);if(Q==="Object"&&jt.constructor&&(Q=jt.constructor.name),Q==="Map"||Q==="Set")return Array.from(jt);if(Q==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Q))return df(jt,yt)}}function df(jt,yt){(yt==null||yt>jt.length)&&(yt=jt.length);for(var Q=0,xt=new Array(yt);Q<yt;Q++)xt[Q]=jt[Q];return xt}function af(jt,yt){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(jt)))){var Q=[],xt=!0,wt=!1,ae=void 0;try{for(var ke=jt[Symbol.iterator](),gn;!(xt=(gn=ke.next()).done)&&(Q.push(gn.value),!(yt&&Q.length===yt));xt=!0);}catch(pn){wt=!0,ae=pn}finally{try{!xt&&ke.return!=null&&ke.return()}finally{if(wt)throw ae}}return Q}}function oc(jt){if(Array.isArray(jt))return jt}var hc=U.useEffect,Sf=U.useState;function zc(jt,yt){var Q=yt.source,xt=yt.color,wt=yt.shape,ae=yt.style,ke=yt.size,gn=yt.scale,pn=yt.active,On=yt.select,ne=yt.filter,Me=yt.animate,Ze=yt.options,In=yt.onLayerLoaded,ir=e(),or=Sf(),sr=hf(or,2),wr=sr[0],ni=sr[1];if(!wr){var Yr;switch(jt){case"polygonLayer":Yr=new t.PolygonLayer(Ze);break;case"lineLayer":Yr=new t.LineLayer(Ze);break;case"pointLayer":Yr=new t.PointLayer(Ze);break;case"heatmapLayer":Yr=new t.HeatmapLayer(Ze);break;case"rasterLayer":Yr=new t.RasterLayer(Ze);break;case"imageLayer":Yr=new t.ImageLayer(Ze);break;case"citybuildingLayer":Yr=new t.CityBuildingLayer(Ze);break;default:Yr=new t.PolygonLayer(Ze)}Yr.on("inited",function(){In&&In(Yr,ir)}),ni(Yr)}return hc(function(){if(wr!==void 0)return ir.addLayer(wr),function(){ir.removeLayer(wr)}},[]),hc(function(){wr&&wr.inited&&Ze&&(wr.updateLayerConfig(Ze),ir.render())},[Ze==null?void 0:Ze.minZoom,Ze==null?void 0:Ze.maxZoom,Ze==null?void 0:Ze.visible]),hc(function(){wr&&wr.inited&&Ze&&Ze.zIndex&&wr.setIndex(Ze.zIndex)},[Ze==null?void 0:Ze.zIndex]),hc(function(){wr&&wr.inited&&Ze&&Ze.blend&&wr.setBlend(Ze.blend)},[Ze==null?void 0:Ze.blend]),hc(function(){wr&&ir.render()},[]),wr!=null?U.createElement(Kl.Provider,{value:wr},U.createElement(Tf,{layer:wr,source:Q}),gn&&U.createElement(Lf,{layer:wr,scale:gn}),xt&&U.createElement(Gf,{layer:wr,color:xt}),ke&&U.createElement(Wf,{layer:wr,size:ke}),wt&&U.createElement(nf,{layer:wr,shape:wt}),ae&&U.createElement(Wc,{layer:wr,style:ae}),pn&&U.createElement(Hl,{layer:wr,active:pn}),On&&U.createElement(Xc,{layer:wr,select:On}),ne&&U.createElement(Pf,{layer:wr,filter:ne}),Me&&U.createElement(wf,{layer:wr,animate:Me}),yt.children):null}var vf=U.memo(function(yt){return zc("polygonLayer",yt)}),_f=U.memo(function(yt){return zc("lineLayer",yt)}),of=U.memo(function(yt){return zc("pointLayer",yt)}),jc=U.memo(function(yt){return zc("heatmapLayer",yt)}),de=U.memo(function(yt){return zc("rasterLayer",yt)}),ge=U.memo(function(yt){return zc("imageLayer",yt)}),kt=U.memo(function(yt){return zc("citybuildingLayer",yt)}),Kt=U.useEffect,Ue=U.memo(function(jt){var yt=jt.type,Q=jt.handler,xt=Yu();return Kt(function(){return xt.off(yt,Q),xt.on(yt,Q),function(){xt.off(yt,Q)}},[yt,Q]),null}),un=U.memo(function(jt){var yt=[{title:"1",color:"rgb(239,243,255)"},{title:"10",color:"rgb(198,219,239)"},{title:"30",color:"rgb(158,202,225)"},{title:"50",color:"rgb(107,174,214)"},{title:"60",color:"rgb(49,130,189)"},{title:"100",color:"rgb(8,81,156)"}],Q=jt.items,xt=Q===void 0?yt:Q;return U.createElement("div",null,U.createElement("div",null,xt.map(function(wt,ae){return U.createElement("div",{key:ae,style:{background:wt.color,height:"100%",display:"inline-block",cursor:"pointer",width:""+(100-xt.length)/xt.length+"%",marginRight:"1%",padding:5}})})),U.createElement("div",null,xt.map(function(wt,ae){return U.createElement("div",{key:ae,style:{background:"#fff",height:"100%",display:"inline-block",textAlign:"left",cursor:"pointer",width:""+(100-xt.length)/xt.length+"%",marginRight:"1%"}},wt.title)})))});function Gn(jt){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Gn=function(Q){return typeof Q}:Gn=function(Q){return Q&&typeof Symbol=="function"&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":typeof Q},Gn(jt)}function mr(jt,yt){var Q=Object.keys(jt);if(Object.getOwnPropertySymbols){var xt=Object.getOwnPropertySymbols(jt);yt&&(xt=xt.filter(function(wt){return Object.getOwnPropertyDescriptor(jt,wt).enumerable})),Q.push.apply(Q,xt)}return Q}function gr(jt){for(var yt=1;yt<arguments.length;yt++){var Q=arguments[yt]!=null?arguments[yt]:{};yt%2?mr(Object(Q),!0).forEach(function(xt){Qr(jt,xt,Q[xt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(jt,Object.getOwnPropertyDescriptors(Q)):mr(Object(Q)).forEach(function(xt){Object.defineProperty(jt,xt,Object.getOwnPropertyDescriptor(Q,xt))})}return jt}function Qr(jt,yt,Q){return yt in jt?Object.defineProperty(jt,yt,{value:Q,enumerable:!0,configurable:!0,writable:!0}):jt[yt]=Q,jt}function wi(jt,yt){if(!(jt instanceof yt))throw new TypeError("Cannot call a class as a function")}function $i(jt,yt){for(var Q=0;Q<yt.length;Q++){var xt=yt[Q];xt.enumerable=xt.enumerable||!1,xt.configurable=!0,"value"in xt&&(xt.writable=!0),Object.defineProperty(jt,xt.key,xt)}}function ha(jt,yt,Q){return yt&&$i(jt.prototype,yt),Q&&$i(jt,Q),jt}function xa(jt,yt){if(typeof yt!="function"&&yt!==null)throw new TypeError("Super expression must either be null or a function");jt.prototype=Object.create(yt&&yt.prototype,{constructor:{value:jt,writable:!0,configurable:!0}}),yt&&ao(jt,yt)}function ao(jt,yt){return ao=Object.setPrototypeOf||function(xt,wt){return xt.__proto__=wt,xt},ao(jt,yt)}function vo(jt){var yt=Gs();return function(){var xt=ru(jt),wt;if(yt){var ae=ru(this).constructor;wt=Reflect.construct(xt,arguments,ae)}else wt=xt.apply(this,arguments);return ts(this,wt)}}function ts(jt,yt){return yt&&(Gn(yt)==="object"||typeof yt=="function")?yt:Ho(jt)}function Ho(jt){if(jt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return jt}function Gs(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(jt){return!1}}function ru(jt){return ru=Object.setPrototypeOf?Object.getPrototypeOf:function(Q){return Q.__proto__||Object.getPrototypeOf(Q)},ru(jt)}var xu=function(jt){xa(Q,jt);var yt=vo(Q);function Q(xt){var wt;return wi(this,Q),wt=yt.call(this,xt),wt.el=document.createElement("div"),wt}return ha(Q,[{key:"componentDidMount",value:function(){var wt,ae=this.props,ke=ae.lnglat,gn=ae.children,pn=ae.option,On=ae.lngLat,ne=new t.Popup(gr(gr({},pn),{},{stopPropagation:(wt=this.props.option)===null||wt===void 0?void 0:wt.stopPropagation}));ke&&ne.setLnglat(ke),On&&ne.setLnglat(On),gn&&ne.setDOMContent(this.el),this.popup=ne,this.scene.addPopup(ne)}},{key:"componentDidUpdate",value:function(wt){var ae,ke,gn,pn,On,ne,Me=Array.isArray(wt.lnglat)?wt.lnglat:[wt==null||(ae=wt.lnglat)===null||ae===void 0?void 0:ae.lng,wt==null||(ke=wt.lnglat)===null||ke===void 0?void 0:ke.lat],Ze=Array.isArray(this.props.lnglat)?this.props.lnglat:[(gn=this.props)===null||gn===void 0||(pn=gn.lnglat)===null||pn===void 0?void 0:pn.lng,(On=this.props)===null||On===void 0||(ne=On.lnglat)===null||ne===void 0?void 0:ne.lat],In=Me.toString()!==Ze.toString();if(In){var ir;this.popup.remove(),this.popup=new t.Popup(gr(gr({},this.props.option),{},{stopPropagation:(ir=this.props.option)===null||ir===void 0?void 0:ir.stopPropagation})),this.popup.setLnglat(this.props.lnglat),this.popup.setDOMContent(this.el),this.scene.addPopup(this.popup)}}},{key:"componentWillUnmount",value:function(){this.popup.remove()}},{key:"render",value:function(){var wt=this;return U.createElement(T.Consumer,{},function(ae){return ae&&(wt.scene=ae),Object(Wu.createPortal)(wt.props.children,wt.el)})}}]),Q}(U.PureComponent);function _s(jt){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_s=function(Q){return typeof Q}:_s=function(Q){return Q&&typeof Symbol=="function"&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":typeof Q},_s(jt)}function _u(jt,yt){if(!(jt instanceof yt))throw new TypeError("Cannot call a class as a function")}function mo(jt,yt){for(var Q=0;Q<yt.length;Q++){var xt=yt[Q];xt.enumerable=xt.enumerable||!1,xt.configurable=!0,"value"in xt&&(xt.writable=!0),Object.defineProperty(jt,xt.key,xt)}}function fu(jt,yt,Q){return yt&&mo(jt.prototype,yt),Q&&mo(jt,Q),jt}function xl(jt,yt){if(typeof yt!="function"&&yt!==null)throw new TypeError("Super expression must either be null or a function");jt.prototype=Object.create(yt&&yt.prototype,{constructor:{value:jt,writable:!0,configurable:!0}}),yt&&ss(jt,yt)}function ss(jt,yt){return ss=Object.setPrototypeOf||function(xt,wt){return xt.__proto__=wt,xt},ss(jt,yt)}function Ls(jt){var yt=Yc();return function(){var xt=pf(jt),wt;if(yt){var ae=pf(this).constructor;wt=Reflect.construct(xt,arguments,ae)}else wt=xt.apply(this,arguments);return Ka(this,wt)}}function Ka(jt,yt){return yt&&(_s(yt)==="object"||typeof yt=="function")?yt:Zu(jt)}function Zu(jt){if(jt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return jt}function Yc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(jt){return!1}}function pf(jt){return pf=Object.setPrototypeOf?Object.getPrototypeOf:function(Q){return Q.__proto__||Object.getPrototypeOf(Q)},pf(jt)}var dh=function(jt){xl(Q,jt);var yt=Ls(Q);function Q(xt){var wt;return _u(this,Q),wt=yt.call(this,xt),wt.el=document.createElement("div"),wt}return fu(Q,[{key:"componentDidMount",value:function(){var wt=this.props,ae=wt.lnglat,ke=wt.children,gn=wt.option,pn=wt.onMarkerLoaded,On=new t.Marker(gn);ae&&On.setLnglat(ae),ke&&On.setElement(this.el),this.marker=On,pn&&pn(On),this.scene.addMarker(On)}},{key:"componentDidUpdate",value:function(wt){var ae,ke=(wt==null?void 0:wt.lnglat.toString())!==((ae=this.props)===null||ae===void 0?void 0:ae.lnglat.toString());ke&&this.marker.setLnglat(this.props.lnglat)}},{key:"componentWillUnmount",value:function(){this.marker&&this.marker.remove()}},{key:"render",value:function(){var wt=this;return U.createElement(T.Consumer,{},function(ae){return ae&&(wt.scene=ae),Object(Wu.createPortal)(wt.props.children,wt.el)})}}]),Q}(U.PureComponent),Rf=U.useEffect,bc=U.memo(function(jt){var yt=jt.type,Q=jt.handler,xt=e();return Rf(function(){return xt.on(yt,Q),function(){xt.off(yt,Q)}},[yt]),null}),Kf=bc,gf=U.useEffect,Xf=U.memo(function(yt){var Q=yt.name,xt=yt.url,wt=e();return gf(function(){wt.addImage(Q,xt)},[Q,xt]),null})},"6AGu":function(Se,ft,L){"use strict";Object.defineProperty(ft,"__esModule",{value:!0}),ft.BindingInSyntax=void 0;var U=L("FV85"),E=L("LKzl"),T=function(){function e(t){this._binding=t}return e.prototype.inRequestScope=function(){return this._binding.scope=U.BindingScopeEnum.Request,new E.BindingWhenOnSyntax(this._binding)},e.prototype.inSingletonScope=function(){return this._binding.scope=U.BindingScopeEnum.Singleton,new E.BindingWhenOnSyntax(this._binding)},e.prototype.inTransientScope=function(){return this._binding.scope=U.BindingScopeEnum.Transient,new E.BindingWhenOnSyntax(this._binding)},e}();ft.BindingInSyntax=T},"6D9b":function(Se,ft,L){Se.exports={"ant-statistic":"ant-statistic","ant-statistic-title":"ant-statistic-title","ant-statistic-content":"ant-statistic-content","ant-statistic-content-value":"ant-statistic-content-value","ant-statistic-content-prefix":"ant-statistic-content-prefix","ant-statistic-content-suffix":"ant-statistic-content-suffix","ant-statistic-rtl":"ant-statistic-rtl"}},"6NqC":function(Se,ft){},"6acW":function(Se,ft,L){var U=L("dt0z"),E=L("gQMU");function T(e){return E(U(e).toLowerCase())}Se.exports=T},"6nK8":function(Se,ft,L){var U=L("dVn5"),E=L("fo6e"),T=L("dt0z"),e=L("9NmV");function t(l,s,c){return l=T(l),s=c?void 0:s,s===void 0?E(l)?e(l):U(l):l.match(s)||[]}Se.exports=t},"711d":function(Se,ft){function L(U){return function(E){return E==null?void 0:E[U]}}Se.exports=L},"78VC":function(Se,ft,L){"use strict";Object.defineProperty(ft,"__esModule",{value:!0}),ft.multiBindToService=void 0,ft.multiBindToService=function(U){return function(E){return function(){for(var T=[],e=0;e<arguments.length;e++)T[e]=arguments[e];return T.forEach(function(t){return U.bind(t).toService(E)})}}}},"7Ix3":function(Se,ft){function L(U){var E=[];if(U!=null)for(var T in Object(U))E.push(T);return E}Se.exports=L},"7W2i":function(Se,ft,L){var U=L("SksO");function E(T,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");T.prototype=Object.create(e&&e.prototype,{constructor:{value:T,writable:!0,configurable:!0}}),e&&U(T,e)}Se.exports=E,Se.exports.default=Se.exports,Se.exports.__esModule=!0},"7tbW":function(Se,ft,L){var U=L("LGYb");function E(T){return T&&T.length?U(T):[]}Se.exports=E},"8/Fi":function(Se,ft,L){"use strict";var U=L("J4zp"),E=L.n(U),T=L("9nhX"),e=L.n(T),t=["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"];function l(R){return t.indexOf(R)}var s=2,c=4,r=64,h=128,n=256,i=512,a=8192,o=16384,u=32768,f=32768*2,v=131072,b=262144,y=524288,g=1048576,_=2097152,M=4194304,x=8388608,m=16777216,S=16777216*2;function P(R,W){return R=e()(Math.floor(R),0,255),W=e()(Math.floor(W),0,255),256*R+W}function A(R){var W=R.color,F=R.radius,Z=R.tileX,V=R.tileY,k=R.shape,Y=R.opacity,K=R.stroke,it=R.strokeWidth,ct=R.strokeOpacity,ht=[],ut=[],It=[],Nt=[P(W[0],W[1]),P(W[2],W[3])],Lt=[P(K[0],K[1]),P(K[2],K[3])];return[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(_t){var mt=E()(_t,2),At=mt[0],rt=mt[1];ht.push([].concat(Nt,[(At+1)*x+(rt+1)*_+l(k)*v+F,(Z+512)*y+(V+512)*r])),ut.push([].concat(Lt,[it,ct])),It.push([Y,0,0,0])}),{packedBuffer:ht,packedBuffer2:ut,packedBuffer3:It}}function O(R,W){if(R===0&&!W)return 0;if(R===1&&W)return 4294967295;var F=W?1:0,Z=Math.floor(R*127);return Z*S+F*m+Z*v+F*f+Z*i+F*n+Z*s+F}},"88Gu":function(Se,ft){var L=800,U=16,E=Date.now;function T(e){var t=0,l=0;return function(){var s=E(),c=U-(s-l);if(l=s,c>0){if(++t>=L)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}Se.exports=T},"8ml+":function(Se,ft,L){"use strict";var U=L("h1nZ");L.o(U,"CityBuildingLayer")&&L.d(ft,"CityBuildingLayer",function(){return U.CityBuildingLayer}),L.o(U,"Control")&&L.d(ft,"Control",function(){return U.Control}),L.o(U,"HeatmapLayer")&&L.d(ft,"HeatmapLayer",function(){return U.HeatmapLayer}),L.o(U,"ImageLayer")&&L.d(ft,"ImageLayer",function(){return U.ImageLayer}),L.o(U,"LineLayer")&&L.d(ft,"LineLayer",function(){return U.LineLayer}),L.o(U,"Logo")&&L.d(ft,"Logo",function(){return U.Logo}),L.o(U,"Marker")&&L.d(ft,"Marker",function(){return U.Marker}),L.o(U,"PointLayer")&&L.d(ft,"PointLayer",function(){return U.PointLayer}),L.o(U,"PolygonLayer")&&L.d(ft,"PolygonLayer",function(){return U.PolygonLayer}),L.o(U,"Popup")&&L.d(ft,"Popup",function(){return U.Popup}),L.o(U,"RasterLayer")&&L.d(ft,"RasterLayer",function(){return U.RasterLayer}),L.o(U,"Scale")&&L.d(ft,"Scale",function(){return U.Scale}),L.o(U,"Scene")&&L.d(ft,"Scene",function(){return U.Scene}),L.o(U,"Zoom")&&L.d(ft,"Zoom",function(){return U.Zoom});var E=L("kQ+U");L.d(ft,"Scene",function(){return E.a});var T=L("sxDa");L.d(ft,"CityBuildingLayer",function(){return T.a}),L.d(ft,"HeatmapLayer",function(){return T.b}),L.d(ft,"ImageLayer",function(){return T.c}),L.d(ft,"LineLayer",function(){return T.d}),L.d(ft,"PointLayer",function(){return T.e}),L.d(ft,"PolygonLayer",function(){return T.f}),L.d(ft,"RasterLayer",function(){return T.g});var e=L("k5/I");L.d(ft,"Control",function(){return e.a}),L.d(ft,"Logo",function(){return e.b}),L.d(ft,"Marker",function(){return e.c}),L.d(ft,"Popup",function(){return e.d}),L.d(ft,"Scale",function(){return e.e}),L.d(ft,"Zoom",function(){return e.f});var t=L("Hel2"),l=L("RL2/")},"8uyu":function(Se,ft){},"9Fde":function(Se,ft,L){"use strict";var U=this&&this.__awaiter||function(f,v,b,y){function g(_){return _ instanceof b?_:new b(function(M){M(_)})}return new(b||(b=Promise))(function(_,M){function x(P){try{S(y.next(P))}catch(A){M(A)}}function m(P){try{S(y.throw(P))}catch(A){M(A)}}function S(P){P.done?_(P.value):g(P.value).then(x,m)}S((y=y.apply(f,v||[])).next())})},E=this&&this.__generator||function(f,v){var b={label:0,sent:function(){if(_[0]&1)throw _[1];return _[1]},trys:[],ops:[]},y,g,_,M;return M={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(M[Symbol.iterator]=function(){return this}),M;function x(S){return function(P){return m([S,P])}}function m(S){if(y)throw new TypeError("Generator is already executing.");for(;b;)try{if(y=1,g&&(_=S[0]&2?g.return:S[0]?g.throw||((_=g.return)&&_.call(g),0):g.next)&&!(_=_.call(g,S[1])).done)return _;switch(g=0,_&&(S=[S[0]&2,_.value]),S[0]){case 0:case 1:_=S;break;case 4:return b.label++,{value:S[1],done:!1};case 5:b.label++,g=S[1],S=[0];continue;case 7:S=b.ops.pop(),b.trys.pop();continue;default:if(_=b.trys,!(_=_.length>0&&_[_.length-1])&&(S[0]===6||S[0]===2)){b=0;continue}if(S[0]===3&&(!_||S[1]>_[0]&&S[1]<_[3])){b.label=S[1];break}if(S[0]===6&&b.label<_[1]){b.label=_[1],_=S;break}if(_&&b.label<_[2]){b.label=_[2],b.ops.push(S);break}_[2]&&b.ops.pop(),b.trys.pop();continue}S=v.call(f,b)}catch(P){S=[6,P],g=0}finally{y=_=0}if(S[0]&5)throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}};Object.defineProperty(ft,"__esModule",{value:!0}),ft.Container=void 0;var T=L("LgvC"),e=L("MON2"),t=L("FV85"),l=L("xfSm"),s=L("wnjb"),c=L("h7MG"),r=L("aPG5"),h=L("gzZq"),n=L("d9O0"),i=L("ujMp"),a=L("HpQ9"),o=L("AwBQ"),u=function(){function f(v){var b=v||{};if(typeof b!="object")throw new Error(""+e.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(b.defaultScope===void 0)b.defaultScope=t.BindingScopeEnum.Transient;else if(b.defaultScope!==t.BindingScopeEnum.Singleton&&b.defaultScope!==t.BindingScopeEnum.Transient&&b.defaultScope!==t.BindingScopeEnum.Request)throw new Error(""+e.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(b.autoBindInjectable===void 0)b.autoBindInjectable=!1;else if(typeof b.autoBindInjectable!="boolean")throw new Error(""+e.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(b.skipBaseClassChecks===void 0)b.skipBaseClassChecks=!1;else if(typeof b.skipBaseClassChecks!="boolean")throw new Error(""+e.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:b.autoBindInjectable,defaultScope:b.defaultScope,skipBaseClassChecks:b.skipBaseClassChecks},this.id=n.id(),this._bindingDictionary=new o.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new s.MetadataReader}return f.merge=function(v,b){var y=new f,g=c.getBindingDictionary(y),_=c.getBindingDictionary(v),M=c.getBindingDictionary(b);function x(m,S){m.traverse(function(P,A){A.forEach(function(O){S.add(O.serviceIdentifier,O.clone())})})}return x(_,g),x(M,g),y},f.prototype.load=function(){for(var v=[],b=0;b<arguments.length;b++)v[b]=arguments[b];for(var y=this._getContainerModuleHelpersFactory(),g=0,_=v;g<_.length;g++){var M=_[g],x=y(M.id);M.registry(x.bindFunction,x.unbindFunction,x.isboundFunction,x.rebindFunction)}},f.prototype.loadAsync=function(){for(var v=[],b=0;b<arguments.length;b++)v[b]=arguments[b];return U(this,void 0,void 0,function(){var y,g,_,M,x;return E(this,function(m){switch(m.label){case 0:y=this._getContainerModuleHelpersFactory(),g=0,_=v,m.label=1;case 1:return g<_.length?(M=_[g],x=y(M.id),[4,M.registry(x.bindFunction,x.unbindFunction,x.isboundFunction,x.rebindFunction)]):[3,4];case 2:m.sent(),m.label=3;case 3:return g++,[3,1];case 4:return[2]}})})},f.prototype.unload=function(){for(var v=this,b=[],y=0;y<arguments.length;y++)b[y]=arguments[y];var g=function(M){return function(x){return x.moduleId===M}};b.forEach(function(_){var M=g(_.id);v._bindingDictionary.removeByCondition(M)})},f.prototype.bind=function(v){var b=this.options.defaultScope||t.BindingScopeEnum.Transient,y=new T.Binding(v,b);return this._bindingDictionary.add(v,y),new h.BindingToSyntax(y)},f.prototype.rebind=function(v){return this.unbind(v),this.bind(v)},f.prototype.unbind=function(v){try{this._bindingDictionary.remove(v)}catch(b){throw new Error(e.CANNOT_UNBIND+" "+i.getServiceIdentifierAsString(v))}},f.prototype.unbindAll=function(){this._bindingDictionary=new o.Lookup},f.prototype.isBound=function(v){var b=this._bindingDictionary.hasKey(v);return!b&&this.parent&&(b=this.parent.isBound(v)),b},f.prototype.isBoundNamed=function(v,b){return this.isBoundTagged(v,l.NAMED_TAG,b)},f.prototype.isBoundTagged=function(v,b,y){var g=!1;if(this._bindingDictionary.hasKey(v)){var _=this._bindingDictionary.get(v),M=c.createMockRequest(this,v,b,y);g=_.some(function(x){return x.constraint(M)})}return!g&&this.parent&&(g=this.parent.isBoundTagged(v,b,y)),g},f.prototype.snapshot=function(){this._snapshots.push(a.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},f.prototype.restore=function(){var v=this._snapshots.pop();if(v===void 0)throw new Error(e.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=v.bindings,this._middleware=v.middleware},f.prototype.createChild=function(v){var b=new f(v||this.options);return b.parent=this,b},f.prototype.applyMiddleware=function(){for(var v=[],b=0;b<arguments.length;b++)v[b]=arguments[b];var y=this._middleware?this._middleware:this._planAndResolve();this._middleware=v.reduce(function(g,_){return _(g)},y)},f.prototype.applyCustomMetadataReader=function(v){this._metadataReader=v},f.prototype.get=function(v){return this._get(!1,!1,t.TargetTypeEnum.Variable,v)},f.prototype.getTagged=function(v,b,y){return this._get(!1,!1,t.TargetTypeEnum.Variable,v,b,y)},f.prototype.getNamed=function(v,b){return this.getTagged(v,l.NAMED_TAG,b)},f.prototype.getAll=function(v){return this._get(!0,!0,t.TargetTypeEnum.Variable,v)},f.prototype.getAllTagged=function(v,b,y){return this._get(!1,!0,t.TargetTypeEnum.Variable,v,b,y)},f.prototype.getAllNamed=function(v,b){return this.getAllTagged(v,l.NAMED_TAG,b)},f.prototype.resolve=function(v){var b=this.createChild();return b.bind(v).toSelf(),b.get(v)},f.prototype._getContainerModuleHelpersFactory=function(){var v=this,b=function(m,S){m._binding.moduleId=S},y=function(m){return function(S){var P=v.bind.bind(v),A=P(S);return b(A,m),A}},g=function(m){return function(S){var P=v.unbind.bind(v);P(S)}},_=function(m){return function(S){var P=v.isBound.bind(v);return P(S)}},M=function(m){return function(S){var P=v.rebind.bind(v),A=P(S);return b(A,m),A}};return function(x){return{bindFunction:y(x),isboundFunction:_(x),rebindFunction:M(x),unbindFunction:g(x)}}},f.prototype._get=function(v,b,y,g,_,M){var x=null,m={avoidConstraints:v,contextInterceptor:function(P){return P},isMultiInject:b,key:_,serviceIdentifier:g,targetType:y,value:M};if(this._middleware){if(x=this._middleware(m),x==null)throw new Error(e.INVALID_MIDDLEWARE_RETURN)}else x=this._planAndResolve()(m);return x},f.prototype._planAndResolve=function(){var v=this;return function(b){var y=c.plan(v._metadataReader,v,b.isMultiInject,b.targetType,b.serviceIdentifier,b.key,b.value,b.avoidConstraints);y=b.contextInterceptor(y);var g=r.resolve(y);return g}},f}();ft.Container=u},"9NmV":function(Se,ft){var L="\\ud800-\\udfff",U="\\u0300-\\u036f",E="\\ufe20-\\ufe2f",T="\\u20d0-\\u20ff",e=U+E+T,t="\\u2700-\\u27bf",l="a-z\\xdf-\\xf6\\xf8-\\xff",s="\\xac\\xb1\\xd7\\xf7",c="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",r="\\u2000-\\u206f",h=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",n="A-Z\\xc0-\\xd6\\xd8-\\xde",i="\\ufe0e\\ufe0f",a=s+c+r+h,o="['\u2019]",u="["+a+"]",f="["+e+"]",v="\\d+",b="["+t+"]",y="["+l+"]",g="[^"+L+a+v+t+l+n+"]",_="\\ud83c[\\udffb-\\udfff]",M="(?:"+f+"|"+_+")",x="[^"+L+"]",m="(?:\\ud83c[\\udde6-\\uddff]){2}",S="[\\ud800-\\udbff][\\udc00-\\udfff]",P="["+n+"]",A="\\u200d",O="(?:"+y+"|"+g+")",R="(?:"+P+"|"+g+")",W="(?:"+o+"(?:d|ll|m|re|s|t|ve))?",F="(?:"+o+"(?:D|LL|M|RE|S|T|VE))?",Z=M+"?",V="["+i+"]?",k="(?:"+A+"(?:"+[x,m,S].join("|")+")"+V+Z+")*",Y="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",K="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",it=V+Z+k,ct="(?:"+[b,m,S].join("|")+")"+it,ht=RegExp([P+"?"+y+"+"+W+"(?="+[u,P,"$"].join("|")+")",R+"+"+F+"(?="+[u,P+O,"$"].join("|")+")",P+"?"+O+"+"+W,P+"+"+F,K,Y,v,ct].join("|"),"g");function ut(It){return It.match(ht)||[]}Se.exports=ut},"9lTW":function(Se,ft,L){"use strict";(function(U){var E=L("MgzW");/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function T(O,R){if(O===R)return 0;for(var W=O.length,F=R.length,Z=0,V=Math.min(W,F);Z<V;++Z)if(O[Z]!==R[Z]){W=O[Z],F=R[Z];break}return W<F?-1:F<W?1:0}function e(O){return U.Buffer&&typeof U.Buffer.isBuffer=="function"?U.Buffer.isBuffer(O):!!(O!=null&&O._isBuffer)}var t=L("MCLT"),l=Object.prototype.hasOwnProperty,s=Array.prototype.slice,c=function(){return function(){}.name==="foo"}();function r(O){return Object.prototype.toString.call(O)}function h(O){return e(O)||typeof U.ArrayBuffer!="function"?!1:typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(O):O?!!(O instanceof DataView||O.buffer&&O.buffer instanceof ArrayBuffer):!1}var n=Se.exports=b,i=/\s*function\s+([^\(\s]*)\s*/;function a(O){if(!!t.isFunction(O)){if(c)return O.name;var R=O.toString(),W=R.match(i);return W&&W[1]}}n.AssertionError=function(R){this.name="AssertionError",this.actual=R.actual,this.expected=R.expected,this.operator=R.operator,R.message?(this.message=R.message,this.generatedMessage=!1):(this.message=f(this),this.generatedMessage=!0);var W=R.stackStartFunction||v;if(Error.captureStackTrace)Error.captureStackTrace(this,W);else{var F=new Error;if(F.stack){var Z=F.stack,V=a(W),k=Z.indexOf(`
`+V);if(k>=0){var Y=Z.indexOf(`
`,k+1);Z=Z.substring(Y+1)}this.stack=Z}}},t.inherits(n.AssertionError,Error);function o(O,R){return typeof O=="string"?O.length<R?O:O.slice(0,R):O}function u(O){if(c||!t.isFunction(O))return t.inspect(O);var R=a(O),W=R?": "+R:"";return"[Function"+W+"]"}function f(O){return o(u(O.actual),128)+" "+O.operator+" "+o(u(O.expected),128)}function v(O,R,W,F,Z){throw new n.AssertionError({message:W,actual:O,expected:R,operator:F,stackStartFunction:Z})}n.fail=v;function b(O,R){O||v(O,!0,R,"==",n.ok)}n.ok=b,n.equal=function(R,W,F){R!=W&&v(R,W,F,"==",n.equal)},n.notEqual=function(R,W,F){R==W&&v(R,W,F,"!=",n.notEqual)},n.deepEqual=function(R,W,F){y(R,W,!1)||v(R,W,F,"deepEqual",n.deepEqual)},n.deepStrictEqual=function(R,W,F){y(R,W,!0)||v(R,W,F,"deepStrictEqual",n.deepStrictEqual)};function y(O,R,W,F){if(O===R)return!0;if(e(O)&&e(R))return T(O,R)===0;if(t.isDate(O)&&t.isDate(R))return O.getTime()===R.getTime();if(t.isRegExp(O)&&t.isRegExp(R))return O.source===R.source&&O.global===R.global&&O.multiline===R.multiline&&O.lastIndex===R.lastIndex&&O.ignoreCase===R.ignoreCase;if((O===null||typeof O!="object")&&(R===null||typeof R!="object"))return W?O===R:O==R;if(h(O)&&h(R)&&r(O)===r(R)&&!(O instanceof Float32Array||O instanceof Float64Array))return T(new Uint8Array(O.buffer),new Uint8Array(R.buffer))===0;if(e(O)!==e(R))return!1;F=F||{actual:[],expected:[]};var Z=F.actual.indexOf(O);return Z!==-1&&Z===F.expected.indexOf(R)?!0:(F.actual.push(O),F.expected.push(R),_(O,R,W,F))}function g(O){return Object.prototype.toString.call(O)=="[object Arguments]"}function _(O,R,W,F){if(O==null||R===null||R===void 0)return!1;if(t.isPrimitive(O)||t.isPrimitive(R))return O===R;if(W&&Object.getPrototypeOf(O)!==Object.getPrototypeOf(R))return!1;var Z=g(O),V=g(R);if(Z&&!V||!Z&&V)return!1;if(Z)return O=s.call(O),R=s.call(R),y(O,R,W);var k=A(O),Y=A(R),K,it;if(k.length!==Y.length)return!1;for(k.sort(),Y.sort(),it=k.length-1;it>=0;it--)if(k[it]!==Y[it])return!1;for(it=k.length-1;it>=0;it--)if(K=k[it],!y(O[K],R[K],W,F))return!1;return!0}n.notDeepEqual=function(R,W,F){y(R,W,!1)&&v(R,W,F,"notDeepEqual",n.notDeepEqual)},n.notDeepStrictEqual=M;function M(O,R,W){y(O,R,!0)&&v(O,R,W,"notDeepStrictEqual",M)}n.strictEqual=function(R,W,F){R!==W&&v(R,W,F,"===",n.strictEqual)},n.notStrictEqual=function(R,W,F){R===W&&v(R,W,F,"!==",n.notStrictEqual)};function x(O,R){if(!O||!R)return!1;if(Object.prototype.toString.call(R)=="[object RegExp]")return R.test(O);try{if(O instanceof R)return!0}catch(W){}return Error.isPrototypeOf(R)?!1:R.call({},O)===!0}function m(O){var R;try{O()}catch(W){R=W}return R}function S(O,R,W,F){var Z;if(typeof R!="function")throw new TypeError('"block" argument must be a function');typeof W=="string"&&(F=W,W=null),Z=m(R),F=(W&&W.name?" ("+W.name+").":".")+(F?" "+F:"."),O&&!Z&&v(Z,W,"Missing expected exception"+F);var V=typeof F=="string",k=!O&&t.isError(Z),Y=!O&&Z&&!W;if((k&&V&&x(Z,W)||Y)&&v(Z,W,"Got unwanted exception"+F),O&&Z&&W&&!x(Z,W)||!O&&Z)throw Z}n.throws=function(O,R,W){S(!0,O,R,W)},n.doesNotThrow=function(O,R,W){S(!1,O,R,W)},n.ifError=function(O){if(O)throw O};function P(O,R){O||v(O,!0,R,"==",P)}n.strict=E(P,n,{equal:n.strictEqual,deepEqual:n.deepStrictEqual,notEqual:n.notStrictEqual,notDeepEqual:n.notDeepStrictEqual}),n.strict.strict=n.strict;var A=Object.keys||function(O){var R=[];for(var W in O)l.call(O,W)&&R.push(W);return R}}).call(this,L("IyRk"))},"9nhX":function(Se,ft,L){var U=L("g4R6"),E=L("tLB3");function T(e,t,l){return l===void 0&&(l=t,t=void 0),l!==void 0&&(l=E(l),l=l===l?l:0),t!==void 0&&(t=E(t),t=t===t?t:0),U(E(e),t,l)}Se.exports=T},AFH1:function(Se,ft,L){"use strict";L.d(ft,"a",function(){return U});var U;(function(E){E.TOPRIGHT="topright",E.TOPLEFT="topleft",E.BOTTOMRIGHT="bottomright",E.BOTTOMLEFT="bottomleft"})(U||(U={}))},APxj:function(Se,ft,L){"use strict";Object.defineProperty(ft,"__esModule",{value:!0});var U=L("Ucsi");function E(T,e){e===void 0&&(e=!0);var t=U.makePropertyInjectDecorator(T,e),l=U.makePropertyInjectNamedDecorator(T,e),s=U.makePropertyInjectTaggedDecorator(T,e),c=U.makePropertyMultiInjectDecorator(T,e);return{lazyInject:t,lazyInjectNamed:l,lazyInjectTagged:s,lazyMultiInject:c}}ft.default=E},AwBQ:function(Se,ft,L){"use strict";Object.defineProperty(ft,"__esModule",{value:!0}),ft.Lookup=void 0;var U=L("MON2"),E=function(){function T(){this._map=new Map}return T.prototype.getMap=function(){return this._map},T.prototype.add=function(e,t){if(e==null)throw new Error(U.NULL_ARGUMENT);if(t==null)throw new Error(U.NULL_ARGUMENT);var l=this._map.get(e);l!==void 0?(l.push(t),this._map.set(e,l)):this._map.set(e,[t])},T.prototype.get=function(e){if(e==null)throw new Error(U.NULL_ARGUMENT);var t=this._map.get(e);if(t!==void 0)return t;throw new Error(U.KEY_NOT_FOUND)},T.prototype.remove=function(e){if(e==null)throw new Error(U.NULL_ARGUMENT);if(!this._map.delete(e))throw new Error(U.KEY_NOT_FOUND)},T.prototype.removeByCondition=function(e){var t=this;this._map.forEach(function(l,s){var c=l.filter(function(r){return!e(r)});c.length>0?t._map.set(s,c):t._map.delete(s)})},T.prototype.hasKey=function(e){if(e==null)throw new Error(U.NULL_ARGUMENT);return this._map.has(e)},T.prototype.clone=function(){var e=new T;return this._map.forEach(function(t,l){t.forEach(function(s){return e.add(l,s.clone())})}),e},T.prototype.traverse=function(e){this._map.forEach(function(t,l){e(l,t)})},T}();ft.Lookup=E},"B6l+":function(Se,ft,L){var U=L("Sq3C"),E=L("Z1HP"),T=L("Sxd8"),e=L("dt0z");function t(l,s,c){l=e(l),s=T(s);var r=s?E(l):0;return s&&r<s?l+U(s-r,c):l}Se.exports=t},BGjm:function(Se,ft){Se.exports=L;function L(U,E){E||(E=document);var T=E.head||E.getElementsByTagName("head")[0];if(!T){T=E.createElement("head");var e=E.body||E.getElementsByTagName("body")[0];e?e.parentNode.insertBefore(T,e):E.documentElement.appendChild(T)}var t=E.createElement("style");return t.type="text/css",t.styleSheet?t.styleSheet.cssText=U:t.appendChild(E.createTextNode(U)),T.appendChild(t),t}},BMrR:function(Se,ft,L){"use strict";var U=L("qrJ5");ft.a=U.a},BkRI:function(Se,ft,L){var U=L("OBhP"),E=1,T=4;function e(t){return U(t,E|T)}Se.exports=e},Bnag:function(Se,ft){function L(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}Se.exports=L,Se.exports.default=Se.exports,Se.exports.__esModule=!0},BpBL:function(Se,ft,L){"use strict";L.d(ft,"a",function(){return E});var U=L("Hel2");function E(e,t){var l=t.extent,s=new Promise(function(r){T(e,function(h){r(h)})}),c={images:s,_id:1,dataArray:[{_id:0,coordinates:[[l[0],l[1]],[l[2],l[3]]]}]};return c}function T(e,t){var l=e,s=[];if(typeof l=="string")Object(U.o)({url:l},function(h,n){s.push(n),t(s)});else{var c=l.length,r=0;l.forEach(function(h){Object(U.o)({url:h},function(n,i){r++,s.push(i),r===c&&t(s)})})}return E}},CZoQ:function(Se,ft){function L(U,E,T){for(var e=T-1,t=U.length;++e<t;)if(U[e]===E)return e;return-1}Se.exports=L},"D+ow":function(Se,ft){},D9lx:function(Se,ft,L){"use strict";Object.defineProperty(ft,"__esModule",{value:!0}),ft.BindingInWhenOnSyntax=void 0;var U=L("6AGu"),E=L("406g"),T=L("z4Hk"),e=function(){function t(l){this._binding=l,this._bindingWhenSyntax=new T.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new E.BindingOnSyntax(this._binding),this._bindingInSyntax=new U.BindingInSyntax(l)}return t.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},t.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},t.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},t.prototype.when=function(l){return this._bindingWhenSyntax.when(l)},t.prototype.whenTargetNamed=function(l){return this._bindingWhenSyntax.whenTargetNamed(l)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(l,s){return this._bindingWhenSyntax.whenTargetTagged(l,s)},t.prototype.whenInjectedInto=function(l){return this._bindingWhenSyntax.whenInjectedInto(l)},t.prototype.whenParentNamed=function(l){return this._bindingWhenSyntax.whenParentNamed(l)},t.prototype.whenParentTagged=function(l,s){return this._bindingWhenSyntax.whenParentTagged(l,s)},t.prototype.whenAnyAncestorIs=function(l){return this._bindingWhenSyntax.whenAnyAncestorIs(l)},t.prototype.whenNoAncestorIs=function(l){return this._bindingWhenSyntax.whenNoAncestorIs(l)},t.prototype.whenAnyAncestorNamed=function(l){return this._bindingWhenSyntax.whenAnyAncestorNamed(l)},t.prototype.whenAnyAncestorTagged=function(l,s){return this._bindingWhenSyntax.whenAnyAncestorTagged(l,s)},t.prototype.whenNoAncestorNamed=function(l){return this._bindingWhenSyntax.whenNoAncestorNamed(l)},t.prototype.whenNoAncestorTagged=function(l,s){return this._bindingWhenSyntax.whenNoAncestorTagged(l,s)},t.prototype.whenAnyAncestorMatches=function(l){return this._bindingWhenSyntax.whenAnyAncestorMatches(l)},t.prototype.whenNoAncestorMatches=function(l){return this._bindingWhenSyntax.whenNoAncestorMatches(l)},t.prototype.onActivation=function(l){return this._bindingOnSyntax.onActivation(l)},t}();ft.BindingInWhenOnSyntax=e},DnfT:function(Se,ft,L){Se.exports={"ant-pro-grid-content":"ant-pro-grid-content",wide:"wide"}},"Dw+G":function(Se,ft,L){var U=L("juv8"),E=L("mTTR");function T(e,t){return e&&U(t,E(t),e)}Se.exports=T},DzJC:function(Se,ft,L){var U=L("sEfC"),E=L("GoyQ"),T="Expected a function";function e(t,l,s){var c=!0,r=!0;if(typeof t!="function")throw new TypeError(T);return E(s)&&(c="leading"in s?!!s.leading:c,r="trailing"in s?!!s.trailing:r),U(t,l,{leading:c,maxWait:l,trailing:r})}Se.exports=e},EA7m:function(Se,ft,L){var U=L("zZ0H"),E=L("Ioao"),T=L("wclG");function e(t,l){return T(E(t,l,U),t+"")}Se.exports=e},EEGq:function(Se,ft,L){var U=L("juv8"),E=L("oCl/");function T(e,t){return U(e,E(e),t)}Se.exports=T},EbDI:function(Se,ft){function L(U){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(U))return Array.from(U)}Se.exports=L,Se.exports.default=Se.exports,Se.exports.__esModule=!0},EfZ0:function(Se,ft,L){"use strict";L.d(ft,"a",function(){return U});var U={ProjectionMatrix:"u_ProjectionMatrix",ViewMatrix:"u_ViewMatrix",ViewProjectionMatrix:"u_ViewProjectionMatrix",Zoom:"u_Zoom",ZoomScale:"u_ZoomScale",FocalDistance:"u_FocalDistance",CameraPosition:"u_CameraPosition"}},Em2t:function(Se,ft,L){var U=L("bahg"),E=L("quyA"),T=L("0JQy");function e(t){return E(t)?T(t):U(t)}Se.exports=e},FI6e:function(Se,ft){},FRQA:function(Se,ft,L){"use strict";var U=L("GNNt"),E=L("wEI+"),T=L("DnfT"),e=L.n(T),t=L("q1tI"),l=L.n(t),s=L("TSYQ"),c=L.n(s),r=L("jYQm"),h=function(i){var a=Object(t.useContext)(r.a),o=i.children,u=i.contentWidth,f=i.className,v=i.style,b=Object(t.useContext)(E.b.ConfigContext),y=b.getPrefixCls,g=i.prefixCls||y("pro"),_=u||a.contentWidth,M="".concat(g,"-grid-content");return l.a.createElement("div",{className:c()(M,f,{wide:_==="Fixed"}),style:v},l.a.createElement("div",{className:"".concat(g,"-grid-content-children")},o))};ft.a=h},FV85:function(Se,ft,L){"use strict";Object.defineProperty(ft,"__esModule",{value:!0}),ft.TargetTypeEnum=ft.BindingTypeEnum=ft.BindingScopeEnum=void 0;var U={Request:"Request",Singleton:"Singleton",Transient:"Transient"};ft.BindingScopeEnum=U;var E={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};ft.BindingTypeEnum=E;var T={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"};ft.TargetTypeEnum=T},FmoU:function(Se,ft,L){"use strict";L.d(ft,"a",function(){return g}),L.d(ft,"b",function(){return m});var U=function(k,Y,K){k.prototype=Y.prototype=K,K.constructor=k};function E(k,Y){var K=Object.create(k.prototype);for(var it in Y)K[it]=Y[it];return K}function T(){}var e=.7,t=1/e,l="\\s*([+-]?\\d+)\\s*",s="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",c="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",r=/^#([0-9a-f]{3,8})$/,h=new RegExp("^rgb\\("+[l,l,l]+"\\)$"),n=new RegExp("^rgb\\("+[c,c,c]+"\\)$"),i=new RegExp("^rgba\\("+[l,l,l,s]+"\\)$"),a=new RegExp("^rgba\\("+[c,c,c,s]+"\\)$"),o=new RegExp("^hsl\\("+[s,c,c]+"\\)$"),u=new RegExp("^hsla\\("+[s,c,c,s]+"\\)$"),f={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};U(T,g,{copy:function(Y){return Object.assign(new this.constructor,this,Y)},displayable:function(){return this.rgb().displayable()},hex:v,formatHex:v,formatHsl:b,formatRgb:y,toString:y});function v(){return this.rgb().formatHex()}function b(){return W(this).formatHsl()}function y(){return this.rgb().formatRgb()}function g(k){var Y,K;return k=(k+"").trim().toLowerCase(),(Y=r.exec(k))?(K=Y[1].length,Y=parseInt(Y[1],16),K===6?_(Y):K===3?new S(Y>>8&15|Y>>4&240,Y>>4&15|Y&240,(Y&15)<<4|Y&15,1):K===8?M(Y>>24&255,Y>>16&255,Y>>8&255,(Y&255)/255):K===4?M(Y>>12&15|Y>>8&240,Y>>8&15|Y>>4&240,Y>>4&15|Y&240,((Y&15)<<4|Y&15)/255):null):(Y=h.exec(k))?new S(Y[1],Y[2],Y[3],1):(Y=n.exec(k))?new S(Y[1]*255/100,Y[2]*255/100,Y[3]*255/100,1):(Y=i.exec(k))?M(Y[1],Y[2],Y[3],Y[4]):(Y=a.exec(k))?M(Y[1]*255/100,Y[2]*255/100,Y[3]*255/100,Y[4]):(Y=o.exec(k))?R(Y[1],Y[2]/100,Y[3]/100,1):(Y=u.exec(k))?R(Y[1],Y[2]/100,Y[3]/100,Y[4]):f.hasOwnProperty(k)?_(f[k]):k==="transparent"?new S(NaN,NaN,NaN,0):null}function _(k){return new S(k>>16&255,k>>8&255,k&255,1)}function M(k,Y,K,it){return it<=0&&(k=Y=K=NaN),new S(k,Y,K,it)}function x(k){return k instanceof T||(k=g(k)),k?(k=k.rgb(),new S(k.r,k.g,k.b,k.opacity)):new S}function m(k,Y,K,it){return arguments.length===1?x(k):new S(k,Y,K,it==null?1:it)}function S(k,Y,K,it){this.r=+k,this.g=+Y,this.b=+K,this.opacity=+it}U(S,m,E(T,{brighter:function(Y){return Y=Y==null?t:Math.pow(t,Y),new S(this.r*Y,this.g*Y,this.b*Y,this.opacity)},darker:function(Y){return Y=Y==null?e:Math.pow(e,Y),new S(this.r*Y,this.g*Y,this.b*Y,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:P,formatHex:P,formatRgb:A,toString:A}));function P(){return"#"+O(this.r)+O(this.g)+O(this.b)}function A(){var k=this.opacity;return k=isNaN(k)?1:Math.max(0,Math.min(1,k)),(k===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(k===1?")":", "+k+")")}function O(k){return k=Math.max(0,Math.min(255,Math.round(k)||0)),(k<16?"0":"")+k.toString(16)}function R(k,Y,K,it){return it<=0?k=Y=K=NaN:K<=0||K>=1?k=Y=NaN:Y<=0&&(k=NaN),new Z(k,Y,K,it)}function W(k){if(k instanceof Z)return new Z(k.h,k.s,k.l,k.opacity);if(k instanceof T||(k=g(k)),!k)return new Z;if(k instanceof Z)return k;k=k.rgb();var Y=k.r/255,K=k.g/255,it=k.b/255,ct=Math.min(Y,K,it),ht=Math.max(Y,K,it),ut=NaN,It=ht-ct,Nt=(ht+ct)/2;return It?(Y===ht?ut=(K-it)/It+(K<it)*6:K===ht?ut=(it-Y)/It+2:ut=(Y-K)/It+4,It/=Nt<.5?ht+ct:2-ht-ct,ut*=60):It=Nt>0&&Nt<1?0:ut,new Z(ut,It,Nt,k.opacity)}function F(k,Y,K,it){return arguments.length===1?W(k):new Z(k,Y,K,it==null?1:it)}function Z(k,Y,K,it){this.h=+k,this.s=+Y,this.l=+K,this.opacity=+it}U(Z,F,E(T,{brighter:function(Y){return Y=Y==null?t:Math.pow(t,Y),new Z(this.h,this.s,this.l*Y,this.opacity)},darker:function(Y){return Y=Y==null?e:Math.pow(e,Y),new Z(this.h,this.s,this.l*Y,this.opacity)},rgb:function(){var Y=this.h%360+(this.h<0)*360,K=isNaN(Y)||isNaN(this.s)?0:this.s,it=this.l,ct=it+(it<.5?it:1-it)*K,ht=2*it-ct;return new S(V(Y>=240?Y-240:Y+120,ht,ct),V(Y,ht,ct),V(Y<120?Y+240:Y-120,ht,ct),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var Y=this.opacity;return Y=isNaN(Y)?1:Math.max(0,Math.min(1,Y)),(Y===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(Y===1?")":", "+Y+")")}}));function V(k,Y,K){return(k<60?Y+(K-Y)*k/60:k<180?K:k<240?Y+(K-Y)*(240-k)/60:Y)*255}},G6z8:function(Se,ft,L){var U=L("fR/l"),E=L("oCl/"),T=L("mTTR");function e(t){return U(t,T,E)}Se.exports=e},GXnB:function(Se,ft,L){"use strict";Object.defineProperty(ft,"__esModule",{value:!0}),ft.Metadata=void 0;var U=L("xfSm"),E=function(){function T(e,t){this.key=e,this.value=t}return T.prototype.toString=function(){return this.key===U.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},T}();ft.Metadata=E},Gi0A:function(Se,ft,L){var U=L("QqLw"),E=L("ExA7"),T="[object Map]";function e(t){return E(t)&&U(t)==T}Se.exports=e},Hel2:function(Se,ft,L){"use strict";L.d(ft,"o",function(){return At}),L.d(ft,"m",function(){return z}),L.d(ft,"p",function(){return ot}),L.d(ft,"d",function(){return q}),L.d(ft,"q",function(){return vt}),L.d(ft,"r",function(){return Qt}),L.d(ft,"j",function(){return ee}),L.d(ft,"h",function(){return Gt}),L.d(ft,"b",function(){return $t}),L.d(ft,"i",function(){return Pe}),L.d(ft,"s",function(){return le}),L.d(ft,"k",function(){return be}),L.d(ft,"l",function(){return ze}),L.d(ft,"n",function(){return Xe}),L.d(ft,"f",function(){return _n}),L.d(ft,"e",function(){return Kn}),L.d(ft,"g",function(){return Hn}),L.d(ft,"a",function(){return U}),L.d(ft,"c",function(){return E});var U={};L.r(U),L.d(U,"getContainer",function(){return c}),L.d(U,"trim",function(){return r}),L.d(U,"splitWords",function(){return h}),L.d(U,"create",function(){return i}),L.d(U,"remove",function(){return a}),L.d(U,"addClass",function(){return o}),L.d(U,"removeClass",function(){return u}),L.d(U,"hasClass",function(){return f}),L.d(U,"setClass",function(){return v}),L.d(U,"getClass",function(){return b}),L.d(U,"empty",function(){return y}),L.d(U,"setTransform",function(){return _}),L.d(U,"triggerResize",function(){return M}),L.d(U,"printCanvas",function(){return x}),L.d(U,"getViewPortScale",function(){return m}),L.d(U,"DPR",function(){return S});var E={};L.r(E),L.d(E,"sum",function(){return An}),L.d(E,"max",function(){return nn}),L.d(E,"min",function(){return en}),L.d(E,"mean",function(){return Nn}),L.d(E,"mode",function(){return hr}),L.d(E,"statMap",function(){return fi}),L.d(E,"getColumn",function(){return Oe}),L.d(E,"getSatByColumn",function(){return Ae});function T(Jt){var ve=131,Vt=137,ie=0;Jt+="x";for(var Ce=Math.floor(9007199254740991/Vt),ue=0;ue<Jt.length;ue++)ie>Ce&&(ie=Math.floor(ie/Vt)),ie=ie*ve+Jt.charCodeAt(ue);return ie}function e(Jt){Jt=Jt.toString();for(var ve=5381,Vt=Jt.length;Vt;)ve=ve*33^Jt.charCodeAt(--Vt);return ve>>>0}var t=L("J4zp"),l=L.n(t),s=window.document.documentElement.style;function c(Jt){var ve=Jt;return typeof Jt=="string"&&(ve=document.getElementById(Jt)),ve}function r(Jt){return Jt.trim?Jt.trim():Jt.replace(/^\s+|\s+$/g,"")}function h(Jt){return r(Jt).split(/\s+/)}function n(Jt){if(!s)return Jt[0];for(var ve in Jt)if(Jt[ve]&&Jt[ve]in s)return Jt[ve];return Jt[0]}function i(Jt,ve,Vt){var ie=document.createElement(Jt);return ie.className=ve||"",Vt&&Vt.appendChild(ie),ie}function a(Jt){var ve=Jt.parentNode;ve&&ve.removeChild(Jt)}function o(Jt,ve){if(Jt.classList!==void 0)for(var Vt=h(ve),ie=0,Ce=Vt.length;ie<Ce;ie++)Jt.classList.add(Vt[ie]);else if(!f(Jt,ve)){var ue=b(Jt);v(Jt,(ue?ue+" ":"")+ve)}}function u(Jt,ve){Jt.classList!==void 0?Jt.classList.remove(ve):v(Jt,r((" "+b(Jt)+" ").replace(" "+ve+" "," ")))}function f(Jt,ve){if(Jt.classList!==void 0)return Jt.classList.contains(ve);var Vt=b(Jt);return Vt.length>0&&new RegExp("(^|\\s)"+ve+"(\\s|$)").test(Vt)}function v(Jt,ve){Jt instanceof HTMLElement?Jt.className=ve:Jt.className.baseVal=ve}function b(Jt){return Jt instanceof SVGElement&&(Jt=Jt.correspondingElement),Jt.className.baseVal===void 0?Jt.className:Jt.className.baseVal}function y(Jt){for(;Jt&&Jt.firstChild;)Jt.removeChild(Jt.firstChild)}var g=n(["transform","WebkitTransform"]);function _(Jt,ve){Jt.style[g]=ve}function M(){if(typeof Event=="function")window.dispatchEvent(new Event("resize"));else{var Jt=window.document.createEvent("UIEvents");Jt.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(Jt)}}function x(Jt){var ve=["padding: "+(Jt.height/2-8)+"px "+Jt.width/2+"px;","line-height: "+Jt.height+"px;","background-image: url("+Jt.toDataURL()+");"];console.log(`%c
`,ve.join(""))}function m(){var Jt,ve=document.querySelector('meta[name="viewport"]');if(!ve)return 1;var Vt=(Jt=ve.content)===null||Jt===void 0?void 0:Jt.split(","),ie=Vt.find(function(Ce){var ue=Ce.split("="),xe=l()(ue,2),$e=xe[0],Fn=xe[1];return $e==="initial-scale"});return ie?ie.split("=")[1]*1:1}var S=m()<1?1:window.devicePixelRatio,P=L("lwsE"),A=L.n(P),O=L("W8MJ"),R=L.n(O),W=L("7W2i"),F=L.n(W),Z=L("a1gu"),V=L.n(Z),k=L("Nsbk"),Y=L.n(k),K=L("oShl"),it=L.n(K);function ct(Jt){var ve=ht();return function(){var ie=Y()(Jt),Ce;if(ve){var ue=Y()(this).constructor;Ce=Reflect.construct(ie,arguments,ue)}else Ce=ie.apply(this,arguments);return V()(this,Ce)}}function ht(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Jt){return!1}}var ut=function(Jt){F()(Vt,Jt);var ve=ct(Vt);function Vt(ie,Ce,ue){var xe;return A()(this,Vt),xe=ve.call(this,ie),xe.status=void 0,xe.url=void 0,xe.status=Ce,xe.url=ue,xe.name=xe.constructor.name,xe.message=ie,xe}return R()(Vt,[{key:"toString",value:function(){return"".concat(this.name,": ").concat(this.message," (").concat(this.status,"): ").concat(this.url)}}]),Vt}(it()(Error));function It(Jt){var ve=new XMLHttpRequest;ve.open("GET",Jt.url,!0);for(var Vt in Jt.headers)Jt.headers.hasOwnProperty(Vt)&&ve.setRequestHeader(Vt,Jt.headers[Vt]);return ve.withCredentials=Jt.credentials==="include",ve}var Nt=function(ve,Vt){var ie=It(ve);return ie.setRequestHeader("Accept","application/json"),ie.onerror=function(){Vt(new Error(ie.statusText))},ie.onload=function(){if(ie.status>=200&&ie.status<300&&ie.response){var Ce;try{Ce=JSON.parse(ie.response)}catch(ue){return Vt(ue)}Vt(null,Ce)}else ie.status===401?Vt(new ut("".concat(ie.statusText),ie.status,ve.url)):Vt(new ut(ie.statusText,ie.status,ve.url))},ie.send(),ie},Lt=function(ve,Vt){var ie=It(ve);return ie.responseType="arraybuffer",ie.onerror=function(){Vt(new Error(ie.statusText))},ie.onload=function(){var Ce=ie.response;if(Ce.byteLength===0&&ie.status===200)return Vt(new Error("http status 200 returned without content."));ie.status>=200&&ie.status<300&&ie.response?Vt(null,{data:Ce,cacheControl:ie.getResponseHeader("Cache-Control"),expires:ie.getResponseHeader("Expires")}):Vt(new ut(ie.statusText,ie.status,ve.url))},ie.send(),ie};function _t(Jt){var ve=window.document.createElement("a");return ve.href=Jt,ve.protocol===window.document.location.protocol&&ve.host===window.document.location.host}var mt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",At=function(ve,Vt){return Lt(ve,function(ie,Ce){if(ie)Vt(ie);else if(Ce){var ue=new window.Image;ue.crossOrigin="anonymous";var xe=window.URL||window.webkitURL;ue.onload=function(){Vt(null,ue),xe.revokeObjectURL(ue.src)};var $e=new window.Blob([new Uint8Array(Ce.data)],{type:"image/png"});ue.src=Ce.data.byteLength?xe.createObjectURL($e):mt}})},rt=L("0wsv"),Mt=2*Math.PI*6378137/2;function z(Jt){var ve=[Infinity,Infinity,-Infinity,-Infinity];return Jt.forEach(function(Vt){var ie=Vt.coordinates;$(ve,ie)}),ve}function $(Jt,ve){return Array.isArray(ve[0])?ve.forEach(function(Vt){$(Jt,Vt)}):(Jt[0]>ve[0]&&(Jt[0]=ve[0]),Jt[1]>ve[1]&&(Jt[1]=ve[1]),Jt[2]<ve[0]&&(Jt[2]=ve[0]),Jt[3]<ve[1]&&(Jt[3]=ve[1])),Jt}function dt(Jt,ve){return et(Jt,ve)}function et(Jt,ve){return Array.isArray(Jt[0])?Jt.map(function(Vt){return et(Vt,ve)}):ve(Jt)}function ot(Jt){var ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,Vt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{enable:!0,decimal:1};Jt=at(Jt,ve);var ie=Jt[0],Ce=Jt[1],ue=ie*Mt/180,xe=Math.log(Math.tan((90+Ce)*Math.PI/360))/(Math.PI/180);return xe=xe*Mt/180,Vt.enable&&(ue=Number(ue.toFixed(Vt.decimal)),xe=Number(xe.toFixed(Vt.decimal))),Jt.length===3?[ue,xe,Jt[2]]:[ue,xe]}function pt(Jt){var ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,Vt=Jt[0],ie=Jt[1],Ce=Vt/Mt*180,ue=ie/Mt*180;return ue=180/Math.PI*(2*Math.atan(Math.exp(ue*Math.PI/180))-Math.PI/2),ve!=null&&(Ce=Number(Ce.toFixed(ve)),ue=Number(ue.toFixed(ve))),Jt.length===3?[Ce,ue,Jt[2]]:[Ce,ue]}function H(Jt){if(Jt==null)throw new Error("lng is required");return(Jt>180||Jt<-180)&&(Jt=Jt%360,Jt>180&&(Jt=-360+Jt),Jt<-180&&(Jt=360+Jt),Jt===0&&(Jt=0)),Jt}function nt(Jt){if(Jt==null)throw new Error("lat is required");return(Jt>90||Jt<-90)&&(Jt=Jt%180,Jt>90&&(Jt=-180+Jt),Jt<-90&&(Jt=180+Jt),Jt===0&&(Jt=0)),Jt}function at(Jt,ve){if(ve===!1)return Jt;var Vt=H(Jt[0]),ie=nt(Jt[1]);return ie>85&&(ie=85),ie<-85&&(ie=-85),Jt.length===3?[Vt,ie,Jt[2]]:[Vt,ie]}function q(Jt){var ve=85.0511287798,Vt=Math.max(Math.min(ve,Jt[1]),-ve),ie=256<<20,Ce=Math.PI/180,ue=Jt[0]*Ce,xe=Vt*Ce;xe=Math.log(Math.tan(Math.PI/4+xe/2));var $e=.5/Math.PI,Fn=.5,rr=-.5/Math.PI;return Ce=.5,ue=ie*($e*ue+Fn),xe=ie*(rr*xe+Ce),[Math.floor(ue),Math.floor(xe)]}function Et(Jt){var ve=.5/Math.PI,Vt=.5,ie=-.5/Math.PI,Ce=.5,ue=256<<20,xe=l()(Jt,2),$e=xe[0],Fn=xe[1];$e=($e/ue-Vt)/ve,Fn=(Fn/ue-Ce)/ie,Fn=(Math.atan(Math.pow(Math.E,Fn))-Math.PI/4)*2,Ce=Math.PI/180;var rr=Fn/Ce,En=$e/Ce;return[En,rr]}function vt(Jt,ve,Vt){var ie=Object(rt.a)(ve[1]-Jt[1]),Ce=Object(rt.a)(ve[0]-Jt[0]),ue=Object(rt.a)(Jt[1]),xe=Object(rt.a)(ve[1]),$e=Math.pow(Math.sin(ie/2),2)+Math.pow(Math.sin(Ce/2),2)*Math.cos(ue)*Math.cos(xe);return Object(rt.g)(2*Math.atan2(Math.sqrt($e),Math.sqrt(1-$e)),Vt="meters")}function Ft(Jt){var ve=Math.PI/180,Vt=85.0511287798,ie=6378137,Ce=Math.max(Math.min(Vt,Jt[1]),-Vt),ue=Math.sin(Ce*ve),xe=ie*Jt[0]*ve,$e=ie*Math.log((1+ue)/(1-ue))/2;return[xe,$e]}function Qt(Jt,ve){var Vt=Math.abs(Jt[1][1]-Jt[0][1])*ve,ie=Math.abs(Jt[1][0]-Jt[0][0])*ve;return[[Jt[0][0]-ie,Jt[0][1]-Vt],[Jt[1][0]+ie,Jt[1][1]+Vt]]}function ee(Jt,ve){return Jt[0][0]<=ve[0][0]&&Jt[0][1]<=ve[0][1]&&Jt[1][0]>=ve[1][0]&&Jt[1][1]>=ve[1][1]}function Gt(Jt){return[[Jt[0],Jt[1]],[Jt[2],Jt[3]]]}var $t=function(){function Jt(){var ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:50,Vt=arguments.length>1?arguments[1]:void 0;A()(this,Jt),this.limit=void 0,this.cache=void 0,this.destroy=void 0,this.order=void 0,this.limit=ve,this.destroy=Vt||this.defaultDestroy,this.order=[],this.clear()}return R()(Jt,[{key:"clear",value:function(){var Vt=this;this.order.forEach(function(ie){Vt.delete(ie)}),this.cache={},this.order=[]}},{key:"get",value:function(Vt){var ie=this.cache[Vt];return ie&&(this.deleteOrder(Vt),this.appendOrder(Vt)),ie}},{key:"set",value:function(Vt,ie){this.cache[Vt]?(this.delete(Vt),this.cache[Vt]=ie,this.appendOrder(Vt)):(Object.keys(this.cache).length===this.limit&&this.delete(this.order[0]),this.cache[Vt]=ie,this.appendOrder(Vt))}},{key:"delete",value:function(Vt){var ie=this.cache[Vt];ie&&(this.deleteCache(Vt),this.deleteOrder(Vt),this.destroy(ie,Vt))}},{key:"deleteCache",value:function(Vt){delete this.cache[Vt]}},{key:"deleteOrder",value:function(Vt){var ie=this.order.findIndex(function(Ce){return Ce===Vt});ie>=0&&this.order.splice(ie,1)}},{key:"appendOrder",value:function(Vt){this.order.push(Vt)}},{key:"defaultDestroy",value:function(Vt,ie){return null}}]),Jt}();function Pe(Jt,ve){Jt.forEach(function(Vt){!ve[Vt]||(ve[Vt]=ve[Vt].bind(ve))})}var me=L("FmoU");function le(Jt){var ve=me.a(Jt),Vt=[0,0,0,0];return ve!=null&&(Vt[0]=ve.r/255,Vt[1]=ve.g/255,Vt[2]=ve.b/255,Vt[3]=ve.opacity),Vt}function be(Jt){var ve=Jt&&Jt[0],Vt=Jt&&Jt[1],ie=Jt&&Jt[2],Ce=ve+Vt*256+ie*65536-1;return Ce}function ze(Jt){return[Jt+1&255,Jt+1>>8&255,Jt+1>>8>>8&255]}function Xe(Jt){var ve=document.createElement("canvas"),Vt=ve.getContext("2d");ve.width=256,ve.height=1;for(var ie=Vt.createLinearGradient(0,0,256,1),Ce=null,ue=Jt.positions[0],xe=Jt.positions[Jt.positions.length-1],$e=0;$e<Jt.colors.length;++$e){var Fn=(Jt.positions[$e]-ue)/(xe-ue);ie.addColorStop(Fn,Jt.colors[$e])}return Vt.fillStyle=ie,Vt.fillRect(0,0,256,1),Ce=new Uint8ClampedArray(Vt.getImageData(0,0,256,1).data),new ImageData(Ce,256,1)}var _n;(function(Jt){Jt.CENTER="center",Jt.TOP="top",Jt["TOP-LEFT"]="top-left",Jt["TOP-RIGHT"]="top-right",Jt.BOTTOM="bottom",Jt["BOTTOM-LEFT"]="bottom-left",Jt.LEFT="left",Jt.RIGHT="right"})(_n||(_n={}));var Kn={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Hn(Jt,ve,Vt){var ie=Jt.classList;for(var Ce in Kn)Kn.hasOwnProperty(Ce)&&ie.remove("l7-".concat(Vt,"-anchor-").concat(Ce));ie.add("l7-".concat(Vt,"-anchor-").concat(ve))}function nn(Jt){if(Jt.length===0)throw new Error("max requires at least one data point");for(var ve=Jt[0],Vt=1;Vt<Jt.length;Vt++)Jt[Vt]>ve&&(ve=Jt[Vt]);return ve*1}function en(Jt){if(Jt.length===0)throw new Error("min requires at least one data point");for(var ve=Jt[0],Vt=1;Vt<Jt.length;Vt++)Jt[Vt]<ve&&(ve=Jt[Vt]);return ve*1}function An(Jt){if(Jt.length===0)return 0;for(var ve=Jt[0]*1,Vt=1;Vt<Jt.length;Vt++)ve+=Jt[Vt]*1;return ve}function Nn(Jt){if(Jt.length===0)throw new Error("mean requires at least one data point");return An(Jt)/Jt.length}function hr(Jt){if(Jt.length===0)throw new Error("mean requires at least one data point");if(Jt.length<3)return Jt[0];Jt.sort();for(var ve=Jt[0],Vt=NaN,ie=0,Ce=1,ue=1;ue<Jt.length+1;ue++)Jt[ue]!==ve?(Ce>ie&&(ie=Ce,Vt=ve),Ce=1,ve=Jt[ue]):Ce++;return Vt*1}var fi={min:en,max:nn,mean:Nn,sum:An,mode:hr};function Oe(Jt,ve){return Jt.map(function(Vt){return Vt[ve]})}function Ae(Jt,ve){return fi[Jt](ve)}},HpQ9:function(Se,ft,L){"use strict";Object.defineProperty(ft,"__esModule",{value:!0}),ft.ContainerSnapshot=void 0;var U=function(){function E(){}return E.of=function(T,e){var t=new E;return t.bindings=T,t.middleware=e,t},E}();ft.ContainerSnapshot=U},HthE:function(Se,ft,L){"use strict";L.d(ft,"a",function(){return U}),L.d(ft,"b",function(){return E});var U;(function(T){T[T.LNGLAT=1]="LNGLAT",T[T.LNGLAT_OFFSET=2]="LNGLAT_OFFSET",T[T.VECTOR_TILE=3]="VECTOR_TILE",T[T.IDENTITY=4]="IDENTITY",T[T.P20=5]="P20",T[T.P20_OFFSET=6]="P20_OFFSET",T[T.METER_OFFSET=7]="METER_OFFSET"})(U||(U={}));var E={CoordinateSystem:"u_CoordinateSystem",ViewportCenter:"u_ViewportCenter",ViewportCenterProjection:"u_ViewportCenterProjection",PixelsPerDegree:"u_PixelsPerDegree",PixelsPerDegree2:"u_PixelsPerDegree2",PixelsPerMeter:"u_PixelsPerMeter"}},I0ug:function(Se,ft,L){"use strict";(function(U){L.d(ft,"a",function(){return T});var E=L("U8pU");function T(e){if(typeof window!="undefined"&&Object(E.a)(window.process)==="object"&&window.process.type==="renderer"||typeof U!="undefined"&&Object(E.a)(U.versions)==="object"&&Boolean(U.versions.electron))return!0;var t=(typeof navigator=="undefined"?"undefined":Object(E.a)(navigator))==="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,l=e||t;return!!(l&&l.indexOf("Electron")>=0)}}).call(this,L("Q2Ig"))},IOcx:function(Se,ft,L){"use strict";L.d(ft,"a",function(){return U}),L.d(ft,"b",function(){return R}),L.d(ft,"c",function(){return W}),L.d(ft,"d",function(){return F}),L.d(ft,"e",function(){return Z});var U={};L.r(U),L.d(U,"create",function(){return T}),L.d(U,"clone",function(){return e}),L.d(U,"copy",function(){return t}),L.d(U,"identity",function(){return l}),L.d(U,"fromValues",function(){return s}),L.d(U,"set",function(){return c}),L.d(U,"transpose",function(){return r}),L.d(U,"invert",function(){return h}),L.d(U,"adjoint",function(){return n}),L.d(U,"determinant",function(){return i}),L.d(U,"multiply",function(){return a}),L.d(U,"rotate",function(){return o}),L.d(U,"scale",function(){return u}),L.d(U,"fromRotation",function(){return f}),L.d(U,"fromScaling",function(){return v}),L.d(U,"str",function(){return b}),L.d(U,"frob",function(){return y}),L.d(U,"LDU",function(){return g}),L.d(U,"add",function(){return _}),L.d(U,"subtract",function(){return M}),L.d(U,"exactEquals",function(){return x}),L.d(U,"equals",function(){return m}),L.d(U,"multiplyScalar",function(){return S}),L.d(U,"multiplyScalarAndAdd",function(){return P}),L.d(U,"mul",function(){return A}),L.d(U,"sub",function(){return O});var E=L("yU0y");function T(){var V=new E.a(4);return E.a!=Float32Array&&(V[1]=0,V[2]=0),V[0]=1,V[3]=1,V}function e(V){var k=new E.a(4);return k[0]=V[0],k[1]=V[1],k[2]=V[2],k[3]=V[3],k}function t(V,k){return V[0]=k[0],V[1]=k[1],V[2]=k[2],V[3]=k[3],V}function l(V){return V[0]=1,V[1]=0,V[2]=0,V[3]=1,V}function s(V,k,Y,K){var it=new E.a(4);return it[0]=V,it[1]=k,it[2]=Y,it[3]=K,it}function c(V,k,Y,K,it){return V[0]=k,V[1]=Y,V[2]=K,V[3]=it,V}function r(V,k){if(V===k){var Y=k[1];V[1]=k[2],V[2]=Y}else V[0]=k[0],V[1]=k[2],V[2]=k[1],V[3]=k[3];return V}function h(V,k){var Y=k[0],K=k[1],it=k[2],ct=k[3],ht=Y*ct-it*K;return ht?(ht=1/ht,V[0]=ct*ht,V[1]=-K*ht,V[2]=-it*ht,V[3]=Y*ht,V):null}function n(V,k){var Y=k[0];return V[0]=k[3],V[1]=-k[1],V[2]=-k[2],V[3]=Y,V}function i(V){return V[0]*V[3]-V[2]*V[1]}function a(V,k,Y){var K=k[0],it=k[1],ct=k[2],ht=k[3],ut=Y[0],It=Y[1],Nt=Y[2],Lt=Y[3];return V[0]=K*ut+ct*It,V[1]=it*ut+ht*It,V[2]=K*Nt+ct*Lt,V[3]=it*Nt+ht*Lt,V}function o(V,k,Y){var K=k[0],it=k[1],ct=k[2],ht=k[3],ut=Math.sin(Y),It=Math.cos(Y);return V[0]=K*It+ct*ut,V[1]=it*It+ht*ut,V[2]=K*-ut+ct*It,V[3]=it*-ut+ht*It,V}function u(V,k,Y){var K=k[0],it=k[1],ct=k[2],ht=k[3],ut=Y[0],It=Y[1];return V[0]=K*ut,V[1]=it*ut,V[2]=ct*It,V[3]=ht*It,V}function f(V,k){var Y=Math.sin(k),K=Math.cos(k);return V[0]=K,V[1]=Y,V[2]=-Y,V[3]=K,V}function v(V,k){return V[0]=k[0],V[1]=0,V[2]=0,V[3]=k[1],V}function b(V){return"mat2("+V[0]+", "+V[1]+", "+V[2]+", "+V[3]+")"}function y(V){return Math.hypot(V[0],V[1],V[2],V[3])}function g(V,k,Y,K){return V[2]=K[2]/K[0],Y[0]=K[0],Y[1]=K[1],Y[3]=K[3]-V[2]*Y[1],[V,k,Y]}function _(V,k,Y){return V[0]=k[0]+Y[0],V[1]=k[1]+Y[1],V[2]=k[2]+Y[2],V[3]=k[3]+Y[3],V}function M(V,k,Y){return V[0]=k[0]-Y[0],V[1]=k[1]-Y[1],V[2]=k[2]-Y[2],V[3]=k[3]-Y[3],V}function x(V,k){return V[0]===k[0]&&V[1]===k[1]&&V[2]===k[2]&&V[3]===k[3]}function m(V,k){var Y=V[0],K=V[1],it=V[2],ct=V[3],ht=k[0],ut=k[1],It=k[2],Nt=k[3];return Math.abs(Y-ht)<=E.b*Math.max(1,Math.abs(Y),Math.abs(ht))&&Math.abs(K-ut)<=E.b*Math.max(1,Math.abs(K),Math.abs(ut))&&Math.abs(it-It)<=E.b*Math.max(1,Math.abs(it),Math.abs(It))&&Math.abs(ct-Nt)<=E.b*Math.max(1,Math.abs(ct),Math.abs(Nt))}function S(V,k,Y){return V[0]=k[0]*Y,V[1]=k[1]*Y,V[2]=k[2]*Y,V[3]=k[3]*Y,V}function P(V,k,Y,K){return V[0]=k[0]+Y[0]*K,V[1]=k[1]+Y[1]*K,V[2]=k[2]+Y[2]*K,V[3]=k[3]+Y[3]*K,V}var A=a,O=M,R=L("ZaHm"),W=L("ZxFD"),F=L("n+fv"),Z=L("bl9R")},ISu3:function(Se,ft,L){"use strict";L.d(ft,"a",function(){return T}),L.d(ft,"c",function(){return e}),L.d(ft,"b",function(){return t}),L.d(ft,"d",function(){return l});var U={},E={},T=function(c){return E[c]},e=function(c,r){E[c]=r},t=function(c){return U[c]},l=function(c,r){U[c]=r}},Ijbi:function(Se,ft,L){var U=L("WkPL");function E(T){if(Array.isArray(T))return U(T)}Se.exports=E,Se.exports.default=Se.exports,Se.exports.__esModule=!0},Ioao:function(Se,ft,L){var U=L("heNW"),E=Math.max;function T(e,t,l){return t=E(t===void 0?e.length-1:t,0),function(){for(var s=arguments,c=-1,r=E(s.length-t,0),h=Array(r);++c<r;)h[c]=s[t+c];c=-1;for(var n=Array(t+1);++c<t;)n[c]=s[c];return n[t]=l(h),U(e,this,n)}}Se.exports=T},IzEo:function(Se,ft,L){"use strict";var U=L("cIOH"),E=L.n(U),T=L("lnY3"),e=L.n(T),t=L("Znn+"),l=L("14J3"),s=L("jCWc")},J2iB:function(Se,ft){function L(U){return U==null}Se.exports=L},J7lC:function(Se,ft){},JBE3:function(Se,ft,L){var U=L("+Qka"),E=L("LsHQ"),T=E(function(e,t,l,s){U(e,t,l,s)});Se.exports=T},Jssm:function(Se,ft,L){"use strict";var U=L("q1tI"),E=L("i8i4"),T=L("17x9"),e=L("fhzG");Se.exports=e({displayName:"ReactFitText",propTypes:{children:T.element.isRequired,compressor:T.number,minFontSize:T.number,maxFontSize:T.number},getDefaultProps:function(){return{compressor:1,minFontSize:Number.NEGATIVE_INFINITY,maxFontSize:Number.POSITIVE_INFINITY}},componentDidMount:function(){window.addEventListener("resize",this._onBodyResize),this._onBodyResize()},componentWillUnmount:function(){window.removeEventListener("resize",this._onBodyResize)},componentDidUpdate:function(){this._onBodyResize()},_onBodyResize:function(){var l=E.findDOMNode(this),s=l.offsetWidth;l.style.fontSize=Math.max(Math.min(s/(this.props.compressor*10),parseFloat(this.props.maxFontSize)),parseFloat(this.props.minFontSize))+"px"},_renderChildren:function(){var l=this;return U.Children.map(this.props.children,function(s){return U.cloneElement(s,{ref:function(r){return l._childRef=r}})})},render:function(){return this._renderChildren()[0]}})},K9nA:function(Se,ft,L){"use strict";(function(U,E){L.d(ft,"b",function(){return l}),L.d(ft,"a",function(){return r});var T=L("U8pU"),e={self:typeof self!="undefined"&&self,window:typeof window!="undefined"&&window,global:typeof U!="undefined"&&U,document:typeof document!="undefined"&&document,process:(typeof E=="undefined"?"undefined":Object(T.a)(E))==="object"&&E},t=e.self||e.window||e.global,l=e.window||e.self||e.global,s=e.global||e.self||e.window,c=e.document||{},r=e.process||{},h=console}).call(this,L("IyRk"),L("Q2Ig"))},KKCa:function(Se,ft){typeof Object.create=="function"?Se.exports=function(U,E){U.super_=E,U.prototype=Object.create(E.prototype,{constructor:{value:U,enumerable:!1,writable:!0,configurable:!0}})}:Se.exports=function(U,E){U.super_=E;var T=function(){};T.prototype=E.prototype,U.prototype=new T,U.prototype.constructor=U}},KwMD:function(Se,ft){function L(U,E,T,e){for(var t=U.length,l=T+(e?1:-1);e?l--:++l<t;)if(E(U[l],l,U))return l;return-1}Se.exports=L},KxBF:function(Se,ft){function L(U,E,T){var e=-1,t=U.length;E<0&&(E=-E>t?0:t+E),T=T>t?t:T,T<0&&(T+=t),t=E>T?0:T-E>>>0,E>>>=0;for(var l=Array(t);++e<t;)l[e]=U[e+E];return l}Se.exports=L},L56e:function(Se,ft,L){"use strict";L.d(ft,"a",function(){return U});var U=["mapload"]},LGYb:function(Se,ft,L){var U=L("1hJj"),E=L("jbM+"),T=L("Xt/L"),e=L("xYSL"),t=L("dQpi"),l=L("rEGp"),s=200;function c(r,h,n){var i=-1,a=E,o=r.length,u=!0,f=[],v=f;if(n)u=!1,a=T;else if(o>=s){var b=h?null:t(r);if(b)return l(b);u=!1,a=e,v=new U}else v=h?[]:f;t:for(;++i<o;){var y=r[i],g=h?h(y):y;if(y=n||y!==0?y:0,u&&g===g){for(var _=v.length;_--;)if(v[_]===g)continue t;h&&v.push(g),f.push(y)}else a(v,g,n)||(v!==f&&v.push(g),f.push(y))}return f}Se.exports=c},LKzl:function(Se,ft,L){"use strict";Object.defineProperty(ft,"__esModule",{value:!0}),ft.BindingWhenOnSyntax=void 0;var U=L("406g"),E=L("z4Hk"),T=function(){function e(t){this._binding=t,this._bindingWhenSyntax=new E.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new U.BindingOnSyntax(this._binding)}return e.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},e.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(t,l){return this._bindingWhenSyntax.whenTargetTagged(t,l)},e.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},e.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},e.prototype.whenParentTagged=function(t,l){return this._bindingWhenSyntax.whenParentTagged(t,l)},e.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},e.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},e.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},e.prototype.whenAnyAncestorTagged=function(t,l){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,l)},e.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},e.prototype.whenNoAncestorTagged=function(t,l){return this._bindingWhenSyntax.whenNoAncestorTagged(t,l)},e.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},e.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},e.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},e}();ft.BindingWhenOnSyntax=T},LcsW:function(Se,ft,L){var U=L("kekF"),E=U(Object.getPrototypeOf,Object);Se.exports=E},LgvC:function(Se,ft,L){"use strict";Object.defineProperty(ft,"__esModule",{value:!0}),ft.Binding=void 0;var U=L("FV85"),E=L("d9O0"),T=function(){function e(t,l){this.id=E.id(),this.activated=!1,this.serviceIdentifier=t,this.scope=l,this.type=U.BindingTypeEnum.Invalid,this.constraint=function(s){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return e.prototype.clone=function(){var t=new e(this.serviceIdentifier,this.scope);return t.activated=!1,t.implementationType=this.implementationType,t.dynamicValue=this.dynamicValue,t.scope=this.scope,t.type=this.type,t.factory=this.factory,t.provider=this.provider,t.constraint=this.constraint,t.onActivation=this.onActivation,t.cache=this.cache,t},e}();ft.Binding=T},LsHQ:function(Se,ft,L){var U=L("EA7m"),E=L("mv/X");function T(e){return U(function(t,l){var s=-1,c=l.length,r=c>1?l[c-1]:void 0,h=c>2?l[2]:void 0;for(r=e.length>3&&typeof r=="function"?(c--,r):void 0,h&&E(l[0],l[1],h)&&(r=c<3?void 0:r,c=1),t=Object(t);++s<c;){var n=l[s];n&&e(t,n,s,r)}return t})}Se.exports=T},LvWW:function(Se,ft,L){var U=L("mhV4");Se.exports=E;function E(c,r){switch(c&&c.type||null){case"FeatureCollection":return c.features=c.features.map(T(E,r)),c;case"GeometryCollection":return c.geometries=c.geometries.map(T(E,r)),c;case"Feature":return c.geometry=E(c.geometry,r),c;case"Polygon":case"MultiPolygon":return e(c,r);default:return c}}function T(c,r){return function(h){return c(h,r)}}function e(c,r){return c.type==="Polygon"?c.coordinates=t(c.coordinates,r):c.type==="MultiPolygon"&&(c.coordinates=c.coordinates.map(T(t,r))),c}function t(c,r){r=!!r,c[0]=l(c[0],r);for(var h=1;h<c.length;h++)c[h]=l(c[h],!r);return c}function l(c,r){return s(c)===r?c:c.reverse()}function s(c){return U.ring(c)>=0}},MCLT:function(Se,ft,L){(function(U){var E=Object.getOwnPropertyDescriptors||function(ht){for(var ut=Object.keys(ht),It={},Nt=0;Nt<ut.length;Nt++)It[ut[Nt]]=Object.getOwnPropertyDescriptor(ht,ut[Nt]);return It},T=/%[sdj%]/g;ft.format=function(ct){if(!_(ct)){for(var ht=[],ut=0;ut<arguments.length;ut++)ht.push(l(arguments[ut]));return ht.join(" ")}for(var ut=1,It=arguments,Nt=It.length,Lt=String(ct).replace(T,function(mt){if(mt==="%%")return"%";if(ut>=Nt)return mt;switch(mt){case"%s":return String(It[ut++]);case"%d":return Number(It[ut++]);case"%j":try{return JSON.stringify(It[ut++])}catch(At){return"[Circular]"}default:return mt}}),_t=It[ut];ut<Nt;_t=It[++ut])b(_t)||!S(_t)?Lt+=" "+_t:Lt+=" "+l(_t);return Lt},ft.deprecate=function(ct,ht){if(typeof U!="undefined"&&U.noDeprecation===!0)return ct;if(typeof U=="undefined")return function(){return ft.deprecate(ct,ht).apply(this,arguments)};var ut=!1;function It(){if(!ut){if(U.throwDeprecation)throw new Error(ht);U.traceDeprecation?console.trace(ht):console.error(ht),ut=!0}return ct.apply(this,arguments)}return It};var e={},t;ft.debuglog=function(ct){if(x(t)&&(t=Object({NODE_ENV:"production"}).NODE_DEBUG||""),ct=ct.toUpperCase(),!e[ct])if(new RegExp("\\b"+ct+"\\b","i").test(t)){var ht=U.pid;e[ct]=function(){var ut=ft.format.apply(ft,arguments);console.error("%s %d: %s",ct,ht,ut)}}else e[ct]=function(){};return e[ct]};function l(ct,ht){var ut={seen:[],stylize:c};return arguments.length>=3&&(ut.depth=arguments[2]),arguments.length>=4&&(ut.colors=arguments[3]),v(ht)?ut.showHidden=ht:ht&&ft._extend(ut,ht),x(ut.showHidden)&&(ut.showHidden=!1),x(ut.depth)&&(ut.depth=2),x(ut.colors)&&(ut.colors=!1),x(ut.customInspect)&&(ut.customInspect=!0),ut.colors&&(ut.stylize=s),h(ut,ct,ut.depth)}ft.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function s(ct,ht){var ut=l.styles[ht];return ut?"["+l.colors[ut][0]+"m"+ct+"["+l.colors[ut][1]+"m":ct}function c(ct,ht){return ct}function r(ct){var ht={};return ct.forEach(function(ut,It){ht[ut]=!0}),ht}function h(ct,ht,ut){if(ct.customInspect&&ht&&O(ht.inspect)&&ht.inspect!==ft.inspect&&!(ht.constructor&&ht.constructor.prototype===ht)){var It=ht.inspect(ut,ct);return _(It)||(It=h(ct,It,ut)),It}var Nt=n(ct,ht);if(Nt)return Nt;var Lt=Object.keys(ht),_t=r(Lt);if(ct.showHidden&&(Lt=Object.getOwnPropertyNames(ht)),A(ht)&&(Lt.indexOf("message")>=0||Lt.indexOf("description")>=0))return i(ht);if(Lt.length===0){if(O(ht)){var mt=ht.name?": "+ht.name:"";return ct.stylize("[Function"+mt+"]","special")}if(m(ht))return ct.stylize(RegExp.prototype.toString.call(ht),"regexp");if(P(ht))return ct.stylize(Date.prototype.toString.call(ht),"date");if(A(ht))return i(ht)}var At="",rt=!1,Mt=["{","}"];if(f(ht)&&(rt=!0,Mt=["[","]"]),O(ht)){var z=ht.name?": "+ht.name:"";At=" [Function"+z+"]"}if(m(ht)&&(At=" "+RegExp.prototype.toString.call(ht)),P(ht)&&(At=" "+Date.prototype.toUTCString.call(ht)),A(ht)&&(At=" "+i(ht)),Lt.length===0&&(!rt||ht.length==0))return Mt[0]+At+Mt[1];if(ut<0)return m(ht)?ct.stylize(RegExp.prototype.toString.call(ht),"regexp"):ct.stylize("[Object]","special");ct.seen.push(ht);var $;return rt?$=a(ct,ht,ut,_t,Lt):$=Lt.map(function(dt){return o(ct,ht,ut,_t,dt,rt)}),ct.seen.pop(),u($,At,Mt)}function n(ct,ht){if(x(ht))return ct.stylize("undefined","undefined");if(_(ht)){var ut="'"+JSON.stringify(ht).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return ct.stylize(ut,"string")}if(g(ht))return ct.stylize(""+ht,"number");if(v(ht))return ct.stylize(""+ht,"boolean");if(b(ht))return ct.stylize("null","null")}function i(ct){return"["+Error.prototype.toString.call(ct)+"]"}function a(ct,ht,ut,It,Nt){for(var Lt=[],_t=0,mt=ht.length;_t<mt;++_t)k(ht,String(_t))?Lt.push(o(ct,ht,ut,It,String(_t),!0)):Lt.push("");return Nt.forEach(function(At){At.match(/^\d+$/)||Lt.push(o(ct,ht,ut,It,At,!0))}),Lt}function o(ct,ht,ut,It,Nt,Lt){var _t,mt,At;if(At=Object.getOwnPropertyDescriptor(ht,Nt)||{value:ht[Nt]},At.get?At.set?mt=ct.stylize("[Getter/Setter]","special"):mt=ct.stylize("[Getter]","special"):At.set&&(mt=ct.stylize("[Setter]","special")),k(It,Nt)||(_t="["+Nt+"]"),mt||(ct.seen.indexOf(At.value)<0?(b(ut)?mt=h(ct,At.value,null):mt=h(ct,At.value,ut-1),mt.indexOf(`
`)>-1&&(Lt?mt=mt.split(`
`).map(function(rt){return"  "+rt}).join(`
`).substr(2):mt=`
`+mt.split(`
`).map(function(rt){return"   "+rt}).join(`
`))):mt=ct.stylize("[Circular]","special")),x(_t)){if(Lt&&Nt.match(/^\d+$/))return mt;_t=JSON.stringify(""+Nt),_t.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(_t=_t.substr(1,_t.length-2),_t=ct.stylize(_t,"name")):(_t=_t.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),_t=ct.stylize(_t,"string"))}return _t+": "+mt}function u(ct,ht,ut){var It=0,Nt=ct.reduce(function(Lt,_t){return It++,_t.indexOf(`
`)>=0&&It++,Lt+_t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return Nt>60?ut[0]+(ht===""?"":ht+`
 `)+" "+ct.join(`,
  `)+" "+ut[1]:ut[0]+ht+" "+ct.join(", ")+" "+ut[1]}function f(ct){return Array.isArray(ct)}ft.isArray=f;function v(ct){return typeof ct=="boolean"}ft.isBoolean=v;function b(ct){return ct===null}ft.isNull=b;function y(ct){return ct==null}ft.isNullOrUndefined=y;function g(ct){return typeof ct=="number"}ft.isNumber=g;function _(ct){return typeof ct=="string"}ft.isString=_;function M(ct){return typeof ct=="symbol"}ft.isSymbol=M;function x(ct){return ct===void 0}ft.isUndefined=x;function m(ct){return S(ct)&&W(ct)==="[object RegExp]"}ft.isRegExp=m;function S(ct){return typeof ct=="object"&&ct!==null}ft.isObject=S;function P(ct){return S(ct)&&W(ct)==="[object Date]"}ft.isDate=P;function A(ct){return S(ct)&&(W(ct)==="[object Error]"||ct instanceof Error)}ft.isError=A;function O(ct){return typeof ct=="function"}ft.isFunction=O;function R(ct){return ct===null||typeof ct=="boolean"||typeof ct=="number"||typeof ct=="string"||typeof ct=="symbol"||typeof ct=="undefined"}ft.isPrimitive=R,ft.isBuffer=L("1gqn");function W(ct){return Object.prototype.toString.call(ct)}function F(ct){return ct<10?"0"+ct.toString(10):ct.toString(10)}var Z=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function V(){var ct=new Date,ht=[F(ct.getHours()),F(ct.getMinutes()),F(ct.getSeconds())].join(":");return[ct.getDate(),Z[ct.getMonth()],ht].join(" ")}ft.log=function(){console.log("%s - %s",V(),ft.format.apply(ft,arguments))},ft.inherits=L("KKCa"),ft._extend=function(ct,ht){if(!ht||!S(ht))return ct;for(var ut=Object.keys(ht),It=ut.length;It--;)ct[ut[It]]=ht[ut[It]];return ct};function k(ct,ht){return Object.prototype.hasOwnProperty.call(ct,ht)}var Y=typeof Symbol!="undefined"?Symbol("util.promisify.custom"):void 0;ft.promisify=function(ht){if(typeof ht!="function")throw new TypeError('The "original" argument must be of type Function');if(Y&&ht[Y]){var ut=ht[Y];if(typeof ut!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(ut,Y,{value:ut,enumerable:!1,writable:!1,configurable:!0}),ut}function ut(){for(var It,Nt,Lt=new Promise(function(At,rt){It=At,Nt=rt}),_t=[],mt=0;mt<arguments.length;mt++)_t.push(arguments[mt]);_t.push(function(At,rt){At?Nt(At):It(rt)});try{ht.apply(this,_t)}catch(At){Nt(At)}return Lt}return Object.setPrototypeOf(ut,Object.getPrototypeOf(ht)),Y&&Object.defineProperty(ut,Y,{value:ut,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(ut,E(ht))},ft.promisify.custom=Y;function K(ct,ht){if(!ct){var ut=new Error("Promise was rejected with a falsy value");ut.reason=ct,ct=ut}return ht(ct)}function it(ct){if(typeof ct!="function")throw new TypeError('The "original" argument must be of type Function');function ht(){for(var ut=[],It=0;It<arguments.length;It++)ut.push(arguments[It]);var Nt=ut.pop();if(typeof Nt!="function")throw new TypeError("The last argument must be of type Function");var Lt=this,_t=function(){return Nt.apply(Lt,arguments)};ct.apply(this,ut).then(function(mt){U.nextTick(_t,null,mt)},function(mt){U.nextTick(K,mt,_t)})}return Object.setPrototypeOf(ht,Object.getPrototypeOf(ct)),Object.defineProperties(ht,E(ct)),ht}ft.callbackify=it}).call(this,L("Q2Ig"))},MON2:function(Se,ft,L){"use strict";Object.defineProperty(ft,"__esModule",{value:!0}),ft.STACK_OVERFLOW=ft.CIRCULAR_DEPENDENCY_IN_FACTORY=ft.POST_CONSTRUCT_ERROR=ft.MULTIPLE_POST_CONSTRUCT_METHODS=ft.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=ft.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=ft.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=ft.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=ft.ARGUMENTS_LENGTH_MISMATCH=ft.INVALID_DECORATOR_OPERATION=ft.INVALID_TO_SELF_VALUE=ft.INVALID_FUNCTION_BINDING=ft.INVALID_MIDDLEWARE_RETURN=ft.NO_MORE_SNAPSHOTS_AVAILABLE=ft.INVALID_BINDING_TYPE=ft.NOT_IMPLEMENTED=ft.CIRCULAR_DEPENDENCY=ft.UNDEFINED_INJECT_ANNOTATION=ft.MISSING_INJECT_ANNOTATION=ft.MISSING_INJECTABLE_ANNOTATION=ft.NOT_REGISTERED=ft.CANNOT_UNBIND=ft.AMBIGUOUS_MATCH=ft.KEY_NOT_FOUND=ft.NULL_ARGUMENT=ft.DUPLICATED_METADATA=ft.DUPLICATED_INJECTABLE_DECORATOR=void 0,ft.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",ft.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",ft.NULL_ARGUMENT="NULL argument",ft.KEY_NOT_FOUND="Key Not Found",ft.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",ft.CANNOT_UNBIND="Could not unbind serviceIdentifier:",ft.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",ft.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",ft.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:",ft.UNDEFINED_INJECT_ANNOTATION=function(U){return"@inject called with undefined this could mean that the class "+U+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},ft.CIRCULAR_DEPENDENCY="Circular dependency found:",ft.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",ft.INVALID_BINDING_TYPE="Invalid binding type:",ft.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",ft.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",ft.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",ft.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",ft.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",ft.ARGUMENTS_LENGTH_MISMATCH=function(){for(var U=[],E=0;E<arguments.length;E++)U[E]=arguments[E];return"The number of constructor arguments in the derived class "+(U[0]+" must be >= than the number of constructor arguments of its base class.")},ft.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",ft.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",ft.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",ft.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",ft.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class",ft.POST_CONSTRUCT_ERROR=function(){for(var U=[],E=0;E<arguments.length;E++)U[E]=arguments[E];return"@postConstruct error in class "+U[0]+": "+U[1]},ft.CIRCULAR_DEPENDENCY_IN_FACTORY=function(){for(var U=[],E=0;E<arguments.length;E++)U[E]=arguments[E];return"It looks like there is a circular dependency "+("in one of the '"+U[0]+"' bindings. Please investigate bindings with")+("service identifier '"+U[1]+"'.")},ft.STACK_OVERFLOW="Maximum call stack size exceeded"},MrPd:function(Se,ft,L){var U=L("hypo"),E=L("ljhN"),T=Object.prototype,e=T.hasOwnProperty;function t(l,s,c){var r=l[s];(!(e.call(l,s)&&E(r,c))||c===void 0&&!(s in l))&&U(l,s,c)}Se.exports=t},Nsbk:function(Se,ft){function L(U){return Se.exports=L=Object.setPrototypeOf?Object.getPrototypeOf:function(T){return T.__proto__||Object.getPrototypeOf(T)},Se.exports.default=Se.exports,Se.exports.__esModule=!0,L(U)}Se.exports=L,Se.exports.default=Se.exports,Se.exports.__esModule=!0},O0oS:function(Se,ft,L){var U=L("Cwc5"),E=function(){try{var T=U(Object,"defineProperty");return T({},"",{}),T}catch(e){}}();Se.exports=E},O1je:function(Se,ft){},OBhP:function(Se,ft,L){var U=L("fmRc"),E=L("gFfm"),T=L("MrPd"),e=L("WwFo"),t=L("Dw+G"),l=L("5Tg0"),s=L("Q1l4"),c=L("VOtZ"),r=L("EEGq"),h=L("qZTm"),n=L("G6z8"),i=L("QqLw"),a=L("yHx3"),o=L("wrZu"),u=L("+iFO"),f=L("Z0cm"),v=L("DSRE"),b=L("zEVN"),y=L("GoyQ"),g=L("1+5i"),_=L("7GkX"),M=L("mTTR"),x=1,m=2,S=4,P="[object Arguments]",A="[object Array]",O="[object Boolean]",R="[object Date]",W="[object Error]",F="[object Function]",Z="[object GeneratorFunction]",V="[object Map]",k="[object Number]",Y="[object Object]",K="[object RegExp]",it="[object Set]",ct="[object String]",ht="[object Symbol]",ut="[object WeakMap]",It="[object ArrayBuffer]",Nt="[object DataView]",Lt="[object Float32Array]",_t="[object Float64Array]",mt="[object Int8Array]",At="[object Int16Array]",rt="[object Int32Array]",Mt="[object Uint8Array]",z="[object Uint8ClampedArray]",$="[object Uint16Array]",dt="[object Uint32Array]",et={};et[P]=et[A]=et[It]=et[Nt]=et[O]=et[R]=et[Lt]=et[_t]=et[mt]=et[At]=et[rt]=et[V]=et[k]=et[Y]=et[K]=et[it]=et[ct]=et[ht]=et[Mt]=et[z]=et[$]=et[dt]=!0,et[W]=et[F]=et[ut]=!1;function ot(pt,H,nt,at,q,Et){var vt,Ft=H&x,Qt=H&m,ee=H&S;if(nt&&(vt=q?nt(pt,at,q,Et):nt(pt)),vt!==void 0)return vt;if(!y(pt))return pt;var Gt=f(pt);if(Gt){if(vt=a(pt),!Ft)return s(pt,vt)}else{var $t=i(pt),Pe=$t==F||$t==Z;if(v(pt))return l(pt,Ft);if($t==Y||$t==P||Pe&&!q){if(vt=Qt||Pe?{}:u(pt),!Ft)return Qt?r(pt,t(vt,pt)):c(pt,e(vt,pt))}else{if(!et[$t])return q?pt:{};vt=o(pt,$t,Ft)}}Et||(Et=new U);var me=Et.get(pt);if(me)return me;Et.set(pt,vt),g(pt)?pt.forEach(function(ze){vt.add(ot(ze,H,nt,ze,pt,Et))}):b(pt)&&pt.forEach(function(ze,Xe){vt.set(Xe,ot(ze,H,nt,Xe,pt,Et))});var le=ee?Qt?n:h:Qt?M:_,be=Gt?void 0:le(pt);return E(be||pt,function(ze,Xe){be&&(Xe=ze,ze=pt[Xe]),T(vt,Xe,ot(ze,H,nt,Xe,pt,Et))}),vt}Se.exports=ot},PArb:function(Se,ft,L){"use strict";var U=L("wx14"),E=L("rePB"),T=L("q1tI"),e=L.n(T),t=L("TSYQ"),l=L.n(t),s=L("H84U"),c=function(h,n){var i={};for(var a in h)Object.prototype.hasOwnProperty.call(h,a)&&n.indexOf(a)<0&&(i[a]=h[a]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(h);o<a.length;o++)n.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(h,a[o])&&(i[a[o]]=h[a[o]]);return i},r=function(n){return T.createElement(s.a,null,function(i){var a,o=i.getPrefixCls,u=i.direction,f=n.prefixCls,v=n.type,b=v===void 0?"horizontal":v,y=n.orientation,g=y===void 0?"center":y,_=n.className,M=n.children,x=n.dashed,m=n.plain,S=c(n,["prefixCls","type","orientation","className","children","dashed","plain"]),P=o("divider",f),A=g.length>0?"-".concat(g):g,O=!!M,R=l()(P,"".concat(P,"-").concat(b),(a={},Object(E.a)(a,"".concat(P,"-with-text"),O),Object(E.a)(a,"".concat(P,"-with-text").concat(A),O),Object(E.a)(a,"".concat(P,"-dashed"),!!x),Object(E.a)(a,"".concat(P,"-plain"),!!m),Object(E.a)(a,"".concat(P,"-rtl"),u==="rtl"),a),_);return T.createElement("div",Object(U.a)({className:R},S,{role:"separator"}),M&&T.createElement("span",{className:"".concat(P,"-inner-text")},M))})};ft.a=r},PJYZ:function(Se,ft){function L(U){if(U===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U}Se.exports=L,Se.exports.default=Se.exports,Se.exports.__esModule=!0},PSsN:function(Se,ft){},PUg6:function(Se,ft,L){"use strict";L.d(ft,"a",function(){return U});var U;(function(E){E.normal="normal",E.additive="additive",E.subtractive="subtractive",E.min="min",E.max="max",E.none="none"})(U||(U={}))},Q1l4:function(Se,ft){function L(U,E){var T=-1,e=U.length;for(E||(E=Array(e));++T<e;)E[T]=U[T];return E}Se.exports=L},QGbF:function(Se,ft){},"QQZ/":function(Se,ft,L){var U=L("Sq3C"),E=L("Z1HP"),T=L("Sxd8"),e=L("dt0z");function t(l,s,c){l=e(l),s=T(s);var r=s?E(l):0;return s&&r<s?U(s-r,c)+l:l}Se.exports=t},QcOe:function(Se,ft,L){var U=L("GoyQ"),E=L("6sVZ"),T=L("7Ix3"),e=Object.prototype,t=e.hasOwnProperty;function l(s){if(!U(s))return T(s);var c=E(s),r=[];for(var h in s)h=="constructor"&&(c||!t.call(s,h))||r.push(h);return r}Se.exports=l},QkVN:function(Se,ft,L){var U=L("+Qka"),E=L("LsHQ"),T=E(function(e,t,l){U(e,t,l)});Se.exports=T},"R/W3":function(Se,ft,L){var U=L("KwMD"),E=L("2ajD"),T=L("CZoQ");function e(t,l,s){return l===l?T(t,l,s):U(t,E,s)}Se.exports=e},RIqP:function(Se,ft,L){var U=L("Ijbi"),E=L("EbDI"),T=L("ZhPi"),e=L("Bnag");function t(l){return U(l)||E(l)||T(l)||e()}Se.exports=t,Se.exports.default=Se.exports,Se.exports.__esModule=!0},"RL2/":function(Se,ft,L){"use strict";var U="2.3.9"},RMtq:function(Se,ft){},"RR/i":function(Se,ft,L){"use strict";Object.defineProperty(ft,"__esModule",{value:!0}),ft.typeConstraint=ft.namedConstraint=ft.taggedConstraint=ft.traverseAncerstors=void 0;var U=L("xfSm"),E=L("GXnB"),T=function s(c,r){var h=c.parentRequest;return h!==null?r(h)?!0:s(h,r):!1};ft.traverseAncerstors=T;var e=function(c){return function(r){var h=function(i){return i!==null&&i.target!==null&&i.target.matchesTag(c)(r)};return h.metaData=new E.Metadata(c,r),h}};ft.taggedConstraint=e;var t=e(U.NAMED_TAG);ft.namedConstraint=t;var l=function(c){return function(r){var h=null;if(r!==null)if(h=r.bindings[0],typeof c=="string"){var n=h.serviceIdentifier;return n===c}else{var i=r.bindings[0].implementationType;return c===i}return!1}};ft.typeConstraint=l},Sk89:function(Se,ft,L){"use strict";Object.defineProperty(ft,"__esModule",{value:!0}),ft.postConstruct=void 0;var U=L("MON2"),E=L("xfSm"),T=L("GXnB");function e(){return function(t,l,s){var c=new T.Metadata(E.POST_CONSTRUCT,l);if(Reflect.hasOwnMetadata(E.POST_CONSTRUCT,t.constructor))throw new Error(U.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(E.POST_CONSTRUCT,c,t.constructor)}}ft.postConstruct=e},SksO:function(Se,ft){function L(U,E){return Se.exports=L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Se.exports.default=Se.exports,Se.exports.__esModule=!0,L(U,E)}Se.exports=L,Se.exports.default=Se.exports,Se.exports.__esModule=!0},Sq3C:function(Se,ft,L){var U=L("sKgW"),E=L("zoYe"),T=L("wy8a"),e=L("quyA"),t=L("Z1HP"),l=L("Em2t"),s=Math.ceil;function c(r,h){h=h===void 0?" ":E(h);var n=h.length;if(n<2)return n?U(h,r):h;var i=U(h,s(r/t(h)));return e(h)?T(l(i),0,r).join(""):i.slice(0,r)}Se.exports=c},Sxd8:function(Se,ft,L){var U=L("ZCgT");function E(T){var e=U(T),t=e%1;return e===e?t?e-t:e:0}Se.exports=E},T1AV:function(Se,ft,L){var U=L("t2Dn"),E=L("5Tg0"),T=L("yP5f"),e=L("Q1l4"),t=L("+iFO"),l=L("03A+"),s=L("Z0cm"),c=L("3L66"),r=L("DSRE"),h=L("lSCD"),n=L("GoyQ"),i=L("YO3V"),a=L("c6wG"),o=L("itsj"),u=L("jeLo");function f(v,b,y,g,_,M,x){var m=o(v,y),S=o(b,y),P=x.get(S);if(P){U(v,y,P);return}var A=M?M(m,S,y+"",v,b,x):void 0,O=A===void 0;if(O){var R=s(S),W=!R&&r(S),F=!R&&!W&&a(S);A=S,R||W||F?s(m)?A=m:c(m)?A=e(m):W?(O=!1,A=E(S,!0)):F?(O=!1,A=T(S,!0)):A=[]:i(S)||l(S)?(A=m,l(m)?A=u(m):(!n(m)||h(m))&&(A=t(S))):O=!1}O&&(x.set(S,A),_(A,S,g,M,x),x.delete(S)),U(v,y,A)}Se.exports=f},TKrE:function(Se,ft,L){var U=L("qRkn"),E=L("dt0z"),T=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,e="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",l="\\u20d0-\\u20ff",s=e+t+l,c="["+s+"]",r=RegExp(c,"g");function h(n){return n=E(n),n&&n.replace(T,U).replace(r,"")}Se.exports=h},"U+yc":function(Se,ft){function L(U,E,T,e,t){var l={};return Object.keys(e).forEach(function(s){l[s]=e[s]}),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=T.slice().reverse().reduce(function(s,c){return c(U,E,s)||s},l),t&&l.initializer!==void 0&&(l.value=l.initializer?l.initializer.call(t):void 0,l.initializer=void 0),l.initializer===void 0&&(Object.defineProperty(U,E,l),l=null),l}Se.exports=L,Se.exports.default=Se.exports,Se.exports.__esModule=!0},U1ZX:function(Se,ft){},UB5X:function(Se,ft,L){var U=L("NykK"),E=L("ExA7"),T="[object Number]";function e(t){return typeof t=="number"||E(t)&&U(t)==T}Se.exports=e},Ucsi:function(Se,ft,L){"use strict";Object.defineProperty(ft,"__esModule",{value:!0});var U=Symbol.for("INJECTION");function E(s,c,r,h){function n(){return h&&!Reflect.hasMetadata(U,this,c)&&Reflect.defineMetadata(U,r(),this,c),Reflect.hasMetadata(U,this,c)?Reflect.getMetadata(U,this,c):r()}function i(a){Reflect.defineMetadata(U,a,this,c)}Object.defineProperty(s,c,{configurable:!0,enumerable:!0,get:n,set:i})}function T(s,c){return function(r){return function(h,n){var i=function(){return s.get(r)};E(h,n,i,c)}}}ft.makePropertyInjectDecorator=T;function e(s,c){return function(r,h){return function(n,i){var a=function(){return s.getNamed(r,h)};E(n,i,a,c)}}}ft.makePropertyInjectNamedDecorator=e;function t(s,c){return function(r,h,n){return function(i,a){var o=function(){return s.getTagged(r,h,n)};E(i,a,o,c)}}}ft.makePropertyInjectTaggedDecorator=t;function l(s,c){return function(r){return function(h,n){var i=function(){return s.getAll(r)};E(h,n,i,c)}}}ft.makePropertyMultiInjectDecorator=l},V1cb:function(Se,ft,L){"use strict";L.d(ft,"a",function(){return U});var U;(function(E){E.Hover="hover",E.Click="click",E.Select="select",E.Active="active",E.Drag="drag"})(U||(U={}))},VIsB:function(Se,ft,L){"use strict";L.d(ft,"a",function(){return l});var U=L("Hel2");function E(i,a){var o;if(typeof Symbol=="undefined"||i[Symbol.iterator]==null){if(Array.isArray(i)||(o=T(i))||a&&i&&typeof i.length=="number"){o&&(i=o);var u=0,f=function(){};return{s:f,n:function(){return u>=i.length?{done:!0}:{done:!1,value:i[u++]}},e:function(_){throw _},f}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var v=!0,b=!1,y;return{s:function(){o=i[Symbol.iterator]()},n:function(){var _=o.next();return v=_.done,_},e:function(_){b=!0,y=_},f:function(){try{!v&&o.return!=null&&o.return()}finally{if(b)throw y}}}}function T(i,a){if(!!i){if(typeof i=="string")return e(i,a);var o=Object.prototype.toString.call(i).slice(8,-1);if(o==="Object"&&i.constructor&&(o=i.constructor.name),o==="Map"||o==="Set")return Array.from(i);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return e(i,a)}}function e(i,a){(a==null||a>i.length)&&(a=i.length);for(var o=0,u=new Array(a);o<a;o++)u[o]=i[o];return u}var t=6378e3;function l(i,a){var o=i.dataArray,u=a.size,f=u===void 0?10:u,v=f/(2*Math.PI*t)*(256<<20)/2,b=s(o,f),y=b.gridHash,g=b.gridOffset,_=n(y,g,a);return{yOffset:v,xOffset:v,radius:v,type:"grid",dataArray:_}}function s(i,a){var o=Infinity,u=-Infinity,f,v=E(i),b;try{for(v.s();!(b=v.n()).done;){var y=b.value;f=y.coordinates[1],Number.isFinite(f)&&(o=f<o?f:o,u=f>u?f:u)}}catch(F){v.e(F)}finally{v.f()}var g=(o+u)/2,_=c(a,g);if(_.xOffset<=0||_.yOffset<=0)return{gridHash:{},gridOffset:_};var M={},x=E(i),m;try{for(x.s();!(m=x.n()).done;){var S=m.value,P=S.coordinates[1],A=S.coordinates[0];if(Number.isFinite(P)&&Number.isFinite(A)){var O=Math.floor((P+90)/_.yOffset),R=Math.floor((A+180)/_.xOffset),W="".concat(O,"-").concat(R);M[W]=M[W]||{count:0,points:[]},M[W].count+=1,M[W].points.push(S)}}}catch(F){x.e(F)}finally{x.f()}return{gridHash:M,gridOffset:_}}function c(i,a){var o=r(i),u=h(a,i);return{yOffset:o,xOffset:u}}function r(i){return i/t*(180/Math.PI)}function h(i,a){return a/t*(180/Math.PI)/Math.cos(i*Math.PI/180)}function n(i,a,o){return Object.keys(i).reduce(function(u,f,v){var b=f.split("-"),y=parseInt(b[0],10),g=parseInt(b[1],10),_={};if(o.field&&o.method){var M=U.c.getColumn(i[f].points,o.field);_[o.method]=U.c.statMap[o.method](M)}return Object.assign(_,{_id:v,coordinates:Object(U.d)([-180+a.xOffset*(g+.5),-90+a.yOffset*(y+.5)]),rawData:i[f].points,count:i[f].count}),u.push(_),u},[])}},VOtZ:function(Se,ft,L){var U=L("juv8"),E=L("MvSz");function T(e,t){return U(e,E(e),t)}Se.exports=T},VmRL:function(Se,ft,L){"use strict";Se.exports=U,Se.exports.default=U;function U(V,k,Y){Y=Y||2;var K=k&&k.length,it=K?k[0]*Y:V.length,ct=E(V,0,it,Y,!0),ht=[];if(!ct||ct.next===ct.prev)return ht;var ut,It,Nt,Lt,_t,mt,At;if(K&&(ct=r(V,k,ct,Y)),V.length>80*Y){ut=Nt=V[0],It=Lt=V[1];for(var rt=Y;rt<it;rt+=Y)_t=V[rt],mt=V[rt+1],_t<ut&&(ut=_t),mt<It&&(It=mt),_t>Nt&&(Nt=_t),mt>Lt&&(Lt=mt);At=Math.max(Nt-ut,Lt-It),At=At!==0?1/At:0}return e(ct,ht,Y,ut,It,At),ht}function E(V,k,Y,K,it){var ct,ht;if(it===Z(V,k,Y,K)>0)for(ct=k;ct<Y;ct+=K)ht=R(ct,V[ct],V[ct+1],ht);else for(ct=Y-K;ct>=k;ct-=K)ht=R(ct,V[ct],V[ct+1],ht);return ht&&_(ht,ht.next)&&(W(ht),ht=ht.next),ht}function T(V,k){if(!V)return V;k||(k=V);var Y=V,K;do if(K=!1,!Y.steiner&&(_(Y,Y.next)||g(Y.prev,Y,Y.next)===0)){if(W(Y),Y=k=Y.prev,Y===Y.next)break;K=!0}else Y=Y.next;while(K||Y!==k);return k}function e(V,k,Y,K,it,ct,ht){if(!!V){!ht&&ct&&o(V,K,it,ct);for(var ut=V,It,Nt;V.prev!==V.next;){if(It=V.prev,Nt=V.next,ct?l(V,K,it,ct):t(V)){k.push(It.i/Y),k.push(V.i/Y),k.push(Nt.i/Y),W(V),V=Nt.next,ut=Nt.next;continue}if(V=Nt,V===ut){ht?ht===1?(V=s(T(V),k,Y),e(V,k,Y,K,it,ct,2)):ht===2&&c(V,k,Y,K,it,ct):e(T(V),k,Y,K,it,ct,1);break}}}}function t(V){var k=V.prev,Y=V,K=V.next;if(g(k,Y,K)>=0)return!1;for(var it=V.next.next;it!==V.prev;){if(b(k.x,k.y,Y.x,Y.y,K.x,K.y,it.x,it.y)&&g(it.prev,it,it.next)>=0)return!1;it=it.next}return!0}function l(V,k,Y,K){var it=V.prev,ct=V,ht=V.next;if(g(it,ct,ht)>=0)return!1;for(var ut=it.x<ct.x?it.x<ht.x?it.x:ht.x:ct.x<ht.x?ct.x:ht.x,It=it.y<ct.y?it.y<ht.y?it.y:ht.y:ct.y<ht.y?ct.y:ht.y,Nt=it.x>ct.x?it.x>ht.x?it.x:ht.x:ct.x>ht.x?ct.x:ht.x,Lt=it.y>ct.y?it.y>ht.y?it.y:ht.y:ct.y>ht.y?ct.y:ht.y,_t=f(ut,It,k,Y,K),mt=f(Nt,Lt,k,Y,K),At=V.prevZ,rt=V.nextZ;At&&At.z>=_t&&rt&&rt.z<=mt;){if(At!==V.prev&&At!==V.next&&b(it.x,it.y,ct.x,ct.y,ht.x,ht.y,At.x,At.y)&&g(At.prev,At,At.next)>=0||(At=At.prevZ,rt!==V.prev&&rt!==V.next&&b(it.x,it.y,ct.x,ct.y,ht.x,ht.y,rt.x,rt.y)&&g(rt.prev,rt,rt.next)>=0))return!1;rt=rt.nextZ}for(;At&&At.z>=_t;){if(At!==V.prev&&At!==V.next&&b(it.x,it.y,ct.x,ct.y,ht.x,ht.y,At.x,At.y)&&g(At.prev,At,At.next)>=0)return!1;At=At.prevZ}for(;rt&&rt.z<=mt;){if(rt!==V.prev&&rt!==V.next&&b(it.x,it.y,ct.x,ct.y,ht.x,ht.y,rt.x,rt.y)&&g(rt.prev,rt,rt.next)>=0)return!1;rt=rt.nextZ}return!0}function s(V,k,Y){var K=V;do{var it=K.prev,ct=K.next.next;!_(it,ct)&&M(it,K,K.next,ct)&&P(it,ct)&&P(ct,it)&&(k.push(it.i/Y),k.push(K.i/Y),k.push(ct.i/Y),W(K),W(K.next),K=V=ct),K=K.next}while(K!==V);return T(K)}function c(V,k,Y,K,it,ct){var ht=V;do{for(var ut=ht.next.next;ut!==ht.prev;){if(ht.i!==ut.i&&y(ht,ut)){var It=O(ht,ut);ht=T(ht,ht.next),It=T(It,It.next),e(ht,k,Y,K,it,ct),e(It,k,Y,K,it,ct);return}ut=ut.next}ht=ht.next}while(ht!==V)}function r(V,k,Y,K){var it=[],ct,ht,ut,It,Nt;for(ct=0,ht=k.length;ct<ht;ct++)ut=k[ct]*K,It=ct<ht-1?k[ct+1]*K:V.length,Nt=E(V,ut,It,K,!1),Nt===Nt.next&&(Nt.steiner=!0),it.push(v(Nt));for(it.sort(h),ct=0;ct<it.length;ct++)n(it[ct],Y),Y=T(Y,Y.next);return Y}function h(V,k){return V.x-k.x}function n(V,k){if(k=i(V,k),k){var Y=O(k,V);T(k,k.next),T(Y,Y.next)}}function i(V,k){var Y=k,K=V.x,it=V.y,ct=-Infinity,ht;do{if(it<=Y.y&&it>=Y.next.y&&Y.next.y!==Y.y){var ut=Y.x+(it-Y.y)*(Y.next.x-Y.x)/(Y.next.y-Y.y);if(ut<=K&&ut>ct){if(ct=ut,ut===K){if(it===Y.y)return Y;if(it===Y.next.y)return Y.next}ht=Y.x<Y.next.x?Y:Y.next}}Y=Y.next}while(Y!==k);if(!ht)return null;if(K===ct)return ht;var It=ht,Nt=ht.x,Lt=ht.y,_t=Infinity,mt;Y=ht;do K>=Y.x&&Y.x>=Nt&&K!==Y.x&&b(it<Lt?K:ct,it,Nt,Lt,it<Lt?ct:K,it,Y.x,Y.y)&&(mt=Math.abs(it-Y.y)/(K-Y.x),P(Y,V)&&(mt<_t||mt===_t&&(Y.x>ht.x||Y.x===ht.x&&a(ht,Y)))&&(ht=Y,_t=mt)),Y=Y.next;while(Y!==It);return ht}function a(V,k){return g(V.prev,V,k.prev)<0&&g(k.next,V,V.next)<0}function o(V,k,Y,K){var it=V;do it.z===null&&(it.z=f(it.x,it.y,k,Y,K)),it.prevZ=it.prev,it.nextZ=it.next,it=it.next;while(it!==V);it.prevZ.nextZ=null,it.prevZ=null,u(it)}function u(V){var k,Y,K,it,ct,ht,ut,It,Nt=1;do{for(Y=V,V=null,ct=null,ht=0;Y;){for(ht++,K=Y,ut=0,k=0;k<Nt&&(ut++,K=K.nextZ,!!K);k++);for(It=Nt;ut>0||It>0&&K;)ut!==0&&(It===0||!K||Y.z<=K.z)?(it=Y,Y=Y.nextZ,ut--):(it=K,K=K.nextZ,It--),ct?ct.nextZ=it:V=it,it.prevZ=ct,ct=it;Y=K}ct.nextZ=null,Nt*=2}while(ht>1);return V}function f(V,k,Y,K,it){return V=32767*(V-Y)*it,k=32767*(k-K)*it,V=(V|V<<8)&16711935,V=(V|V<<4)&252645135,V=(V|V<<2)&858993459,V=(V|V<<1)&1431655765,k=(k|k<<8)&16711935,k=(k|k<<4)&252645135,k=(k|k<<2)&858993459,k=(k|k<<1)&1431655765,V|k<<1}function v(V){var k=V,Y=V;do(k.x<Y.x||k.x===Y.x&&k.y<Y.y)&&(Y=k),k=k.next;while(k!==V);return Y}function b(V,k,Y,K,it,ct,ht,ut){return(it-ht)*(k-ut)-(V-ht)*(ct-ut)>=0&&(V-ht)*(K-ut)-(Y-ht)*(k-ut)>=0&&(Y-ht)*(ct-ut)-(it-ht)*(K-ut)>=0}function y(V,k){return V.next.i!==k.i&&V.prev.i!==k.i&&!S(V,k)&&(P(V,k)&&P(k,V)&&A(V,k)&&(g(V.prev,V,k.prev)||g(V,k.prev,k))||_(V,k)&&g(V.prev,V,V.next)>0&&g(k.prev,k,k.next)>0)}function g(V,k,Y){return(k.y-V.y)*(Y.x-k.x)-(k.x-V.x)*(Y.y-k.y)}function _(V,k){return V.x===k.x&&V.y===k.y}function M(V,k,Y,K){var it=m(g(V,k,Y)),ct=m(g(V,k,K)),ht=m(g(Y,K,V)),ut=m(g(Y,K,k));return!!(it!==ct&&ht!==ut||it===0&&x(V,Y,k)||ct===0&&x(V,K,k)||ht===0&&x(Y,V,K)||ut===0&&x(Y,k,K))}function x(V,k,Y){return k.x<=Math.max(V.x,Y.x)&&k.x>=Math.min(V.x,Y.x)&&k.y<=Math.max(V.y,Y.y)&&k.y>=Math.min(V.y,Y.y)}function m(V){return V>0?1:V<0?-1:0}function S(V,k){var Y=V;do{if(Y.i!==V.i&&Y.next.i!==V.i&&Y.i!==k.i&&Y.next.i!==k.i&&M(Y,Y.next,V,k))return!0;Y=Y.next}while(Y!==V);return!1}function P(V,k){return g(V.prev,V,V.next)<0?g(V,k,V.next)>=0&&g(V,V.prev,k)>=0:g(V,k,V.prev)<0||g(V,V.next,k)<0}function A(V,k){var Y=V,K=!1,it=(V.x+k.x)/2,ct=(V.y+k.y)/2;do Y.y>ct!=Y.next.y>ct&&Y.next.y!==Y.y&&it<(Y.next.x-Y.x)*(ct-Y.y)/(Y.next.y-Y.y)+Y.x&&(K=!K),Y=Y.next;while(Y!==V);return K}function O(V,k){var Y=new F(V.i,V.x,V.y),K=new F(k.i,k.x,k.y),it=V.next,ct=k.prev;return V.next=k,k.prev=V,Y.next=it,it.prev=Y,K.next=Y,Y.prev=K,ct.next=K,K.prev=ct,K}function R(V,k,Y,K){var it=new F(V,k,Y);return K?(it.next=K.next,it.prev=K,K.next.prev=it,K.next=it):(it.prev=it,it.next=it),it}function W(V){V.next.prev=V.prev,V.prev.next=V.next,V.prevZ&&(V.prevZ.nextZ=V.nextZ),V.nextZ&&(V.nextZ.prevZ=V.prevZ)}function F(V,k,Y){this.i=V,this.x=k,this.y=Y,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}U.deviation=function(V,k,Y,K){var it=k&&k.length,ct=it?k[0]*Y:V.length,ht=Math.abs(Z(V,0,ct,Y));if(it)for(var ut=0,It=k.length;ut<It;ut++){var Nt=k[ut]*Y,Lt=ut<It-1?k[ut+1]*Y:V.length;ht-=Math.abs(Z(V,Nt,Lt,Y))}var _t=0;for(ut=0;ut<K.length;ut+=3){var mt=K[ut]*Y,At=K[ut+1]*Y,rt=K[ut+2]*Y;_t+=Math.abs((V[mt]-V[rt])*(V[At+1]-V[mt+1])-(V[mt]-V[At])*(V[rt+1]-V[mt+1]))}return ht===0&&_t===0?0:Math.abs((_t-ht)/ht)};function Z(V,k,Y,K){for(var it=0,ct=k,ht=Y-K;ct<Y;ct+=K)it+=(V[ht]-V[ct])*(V[ct+1]+V[ht+1]),ht=ct;return it}U.flatten=function(V){for(var k=V[0][0].length,Y={vertices:[],holes:[],dimensions:k},K=0,it=0;it<V.length;it++){for(var ct=0;ct<V[it].length;ct++)for(var ht=0;ht<k;ht++)Y.vertices.push(V[it][ct][ht]);it>0&&(K+=V[it-1].length,Y.holes.push(K))}return Y}},W8MJ:function(Se,ft){function L(E,T){for(var e=0;e<T.length;e++){var t=T[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(E,t.key,t)}}function U(E,T,e){return T&&L(E.prototype,T),e&&L(E,e),E}Se.exports=U,Se.exports.default=Se.exports,Se.exports.__esModule=!0},WFAs:function(Se,ft){var L=Array.isArray;Se.exports=L},WwFo:function(Se,ft,L){var U=L("juv8"),E=L("7GkX");function T(e,t){return e&&U(t,E(t),e)}Se.exports=T},XYm9:function(Se,ft,L){var U=L("+K+b");function E(T,e){var t=e?U(T.buffer):T.buffer;return new T.constructor(t,T.byteOffset,T.byteLength)}Se.exports=E},"Xt/L":function(Se,ft){function L(U,E,T){for(var e=-1,t=U==null?0:U.length;++e<t;)if(T(E,U[e]))return!0;return!1}Se.exports=L},Y8BV:function(Se,ft,L){"use strict";L.d(ft,"a",function(){return U});function U(E,T){var e=T.callback;return e&&(E.dataArray=E.dataArray.filter(e)),E}},YO3V:function(Se,ft,L){var U=L("NykK"),E=L("LcsW"),T=L("ExA7"),e="[object Object]",t=Function.prototype,l=Object.prototype,s=t.toString,c=l.hasOwnProperty,r=s.call(Object);function h(n){if(!T(n)||U(n)!=e)return!1;var i=E(n);if(i===null)return!0;var a=c.call(i,"constructor")&&i.constructor;return typeof a=="function"&&a instanceof a&&s.call(a)==r}Se.exports=h},Yk9n:function(Se,ft,L){"use strict";Object.defineProperty(ft,"__esModule",{value:!0}),ft.inject=ft.LazyServiceIdentifer=void 0;var U=L("MON2"),E=L("xfSm"),T=L("GXnB"),e=L("Ztfv"),t=function(){function s(c){this._cb=c}return s.prototype.unwrap=function(){return this._cb()},s}();ft.LazyServiceIdentifer=t;function l(s){return function(c,r,h){if(s===void 0)throw new Error(U.UNDEFINED_INJECT_ANNOTATION(c.name));var n=new T.Metadata(E.INJECT_TAG,s);typeof h=="number"?e.tagParameter(c,r,h,n):e.tagProperty(c,r,n)}}ft.inject=l},Z1HP:function(Se,ft,L){var U=L("ycre"),E=L("quyA"),T=L("q4HE");function e(t){return E(t)?T(t):U(t)}Se.exports=e},ZCgT:function(Se,ft,L){var U=L("tLB3"),E=1/0,T=17976931348623157e292;function e(t){if(!t)return t===0?t:0;if(t=U(t),t===E||t===-E){var l=t<0?-1:1;return l*T}return t===t?t:0}Se.exports=e},ZK94:function(Se,ft){Se.exports.RADIUS=6378137,Se.exports.FLATTENING=1/298.257223563,Se.exports.POLAR_RADIUS=63567523142e-4},ZaHm:function(Se,ft,L){"use strict";L.r(ft),L.d(ft,"create",function(){return E}),L.d(ft,"clone",function(){return T}),L.d(ft,"copy",function(){return e}),L.d(ft,"fromValues",function(){return t}),L.d(ft,"set",function(){return l}),L.d(ft,"identity",function(){return s}),L.d(ft,"transpose",function(){return c}),L.d(ft,"invert",function(){return r}),L.d(ft,"adjoint",function(){return h}),L.d(ft,"determinant",function(){return n}),L.d(ft,"multiply",function(){return i}),L.d(ft,"translate",function(){return a}),L.d(ft,"scale",function(){return o}),L.d(ft,"rotate",function(){return u}),L.d(ft,"rotateX",function(){return f}),L.d(ft,"rotateY",function(){return v}),L.d(ft,"rotateZ",function(){return b}),L.d(ft,"fromTranslation",function(){return y}),L.d(ft,"fromScaling",function(){return g}),L.d(ft,"fromRotation",function(){return _}),L.d(ft,"fromXRotation",function(){return M}),L.d(ft,"fromYRotation",function(){return x}),L.d(ft,"fromZRotation",function(){return m}),L.d(ft,"fromRotationTranslation",function(){return S}),L.d(ft,"fromQuat2",function(){return P}),L.d(ft,"getTranslation",function(){return A}),L.d(ft,"getScaling",function(){return O}),L.d(ft,"getRotation",function(){return R}),L.d(ft,"fromRotationTranslationScale",function(){return W}),L.d(ft,"fromRotationTranslationScaleOrigin",function(){return F}),L.d(ft,"fromQuat",function(){return Z}),L.d(ft,"frustum",function(){return V}),L.d(ft,"perspective",function(){return k}),L.d(ft,"perspectiveFromFieldOfView",function(){return Y}),L.d(ft,"ortho",function(){return K}),L.d(ft,"lookAt",function(){return it}),L.d(ft,"targetTo",function(){return ct}),L.d(ft,"str",function(){return ht}),L.d(ft,"frob",function(){return ut}),L.d(ft,"add",function(){return It}),L.d(ft,"subtract",function(){return Nt}),L.d(ft,"multiplyScalar",function(){return Lt}),L.d(ft,"multiplyScalarAndAdd",function(){return _t}),L.d(ft,"exactEquals",function(){return mt}),L.d(ft,"equals",function(){return At}),L.d(ft,"mul",function(){return rt}),L.d(ft,"sub",function(){return Mt});var U=L("yU0y");function E(){var z=new U.a(16);return U.a!=Float32Array&&(z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[11]=0,z[12]=0,z[13]=0,z[14]=0),z[0]=1,z[5]=1,z[10]=1,z[15]=1,z}function T(z){var $=new U.a(16);return $[0]=z[0],$[1]=z[1],$[2]=z[2],$[3]=z[3],$[4]=z[4],$[5]=z[5],$[6]=z[6],$[7]=z[7],$[8]=z[8],$[9]=z[9],$[10]=z[10],$[11]=z[11],$[12]=z[12],$[13]=z[13],$[14]=z[14],$[15]=z[15],$}function e(z,$){return z[0]=$[0],z[1]=$[1],z[2]=$[2],z[3]=$[3],z[4]=$[4],z[5]=$[5],z[6]=$[6],z[7]=$[7],z[8]=$[8],z[9]=$[9],z[10]=$[10],z[11]=$[11],z[12]=$[12],z[13]=$[13],z[14]=$[14],z[15]=$[15],z}function t(z,$,dt,et,ot,pt,H,nt,at,q,Et,vt,Ft,Qt,ee,Gt){var $t=new U.a(16);return $t[0]=z,$t[1]=$,$t[2]=dt,$t[3]=et,$t[4]=ot,$t[5]=pt,$t[6]=H,$t[7]=nt,$t[8]=at,$t[9]=q,$t[10]=Et,$t[11]=vt,$t[12]=Ft,$t[13]=Qt,$t[14]=ee,$t[15]=Gt,$t}function l(z,$,dt,et,ot,pt,H,nt,at,q,Et,vt,Ft,Qt,ee,Gt,$t){return z[0]=$,z[1]=dt,z[2]=et,z[3]=ot,z[4]=pt,z[5]=H,z[6]=nt,z[7]=at,z[8]=q,z[9]=Et,z[10]=vt,z[11]=Ft,z[12]=Qt,z[13]=ee,z[14]=Gt,z[15]=$t,z}function s(z){return z[0]=1,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=1,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=1,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}function c(z,$){if(z===$){var dt=$[1],et=$[2],ot=$[3],pt=$[6],H=$[7],nt=$[11];z[1]=$[4],z[2]=$[8],z[3]=$[12],z[4]=dt,z[6]=$[9],z[7]=$[13],z[8]=et,z[9]=pt,z[11]=$[14],z[12]=ot,z[13]=H,z[14]=nt}else z[0]=$[0],z[1]=$[4],z[2]=$[8],z[3]=$[12],z[4]=$[1],z[5]=$[5],z[6]=$[9],z[7]=$[13],z[8]=$[2],z[9]=$[6],z[10]=$[10],z[11]=$[14],z[12]=$[3],z[13]=$[7],z[14]=$[11],z[15]=$[15];return z}function r(z,$){var dt=$[0],et=$[1],ot=$[2],pt=$[3],H=$[4],nt=$[5],at=$[6],q=$[7],Et=$[8],vt=$[9],Ft=$[10],Qt=$[11],ee=$[12],Gt=$[13],$t=$[14],Pe=$[15],me=dt*nt-et*H,le=dt*at-ot*H,be=dt*q-pt*H,ze=et*at-ot*nt,Xe=et*q-pt*nt,_n=ot*q-pt*at,Kn=Et*Gt-vt*ee,Hn=Et*$t-Ft*ee,nn=Et*Pe-Qt*ee,en=vt*$t-Ft*Gt,An=vt*Pe-Qt*Gt,Nn=Ft*Pe-Qt*$t,hr=me*Nn-le*An+be*en+ze*nn-Xe*Hn+_n*Kn;return hr?(hr=1/hr,z[0]=(nt*Nn-at*An+q*en)*hr,z[1]=(ot*An-et*Nn-pt*en)*hr,z[2]=(Gt*_n-$t*Xe+Pe*ze)*hr,z[3]=(Ft*Xe-vt*_n-Qt*ze)*hr,z[4]=(at*nn-H*Nn-q*Hn)*hr,z[5]=(dt*Nn-ot*nn+pt*Hn)*hr,z[6]=($t*be-ee*_n-Pe*le)*hr,z[7]=(Et*_n-Ft*be+Qt*le)*hr,z[8]=(H*An-nt*nn+q*Kn)*hr,z[9]=(et*nn-dt*An-pt*Kn)*hr,z[10]=(ee*Xe-Gt*be+Pe*me)*hr,z[11]=(vt*be-Et*Xe-Qt*me)*hr,z[12]=(nt*Hn-H*en-at*Kn)*hr,z[13]=(dt*en-et*Hn+ot*Kn)*hr,z[14]=(Gt*le-ee*ze-$t*me)*hr,z[15]=(Et*ze-vt*le+Ft*me)*hr,z):null}function h(z,$){var dt=$[0],et=$[1],ot=$[2],pt=$[3],H=$[4],nt=$[5],at=$[6],q=$[7],Et=$[8],vt=$[9],Ft=$[10],Qt=$[11],ee=$[12],Gt=$[13],$t=$[14],Pe=$[15];return z[0]=nt*(Ft*Pe-Qt*$t)-vt*(at*Pe-q*$t)+Gt*(at*Qt-q*Ft),z[1]=-(et*(Ft*Pe-Qt*$t)-vt*(ot*Pe-pt*$t)+Gt*(ot*Qt-pt*Ft)),z[2]=et*(at*Pe-q*$t)-nt*(ot*Pe-pt*$t)+Gt*(ot*q-pt*at),z[3]=-(et*(at*Qt-q*Ft)-nt*(ot*Qt-pt*Ft)+vt*(ot*q-pt*at)),z[4]=-(H*(Ft*Pe-Qt*$t)-Et*(at*Pe-q*$t)+ee*(at*Qt-q*Ft)),z[5]=dt*(Ft*Pe-Qt*$t)-Et*(ot*Pe-pt*$t)+ee*(ot*Qt-pt*Ft),z[6]=-(dt*(at*Pe-q*$t)-H*(ot*Pe-pt*$t)+ee*(ot*q-pt*at)),z[7]=dt*(at*Qt-q*Ft)-H*(ot*Qt-pt*Ft)+Et*(ot*q-pt*at),z[8]=H*(vt*Pe-Qt*Gt)-Et*(nt*Pe-q*Gt)+ee*(nt*Qt-q*vt),z[9]=-(dt*(vt*Pe-Qt*Gt)-Et*(et*Pe-pt*Gt)+ee*(et*Qt-pt*vt)),z[10]=dt*(nt*Pe-q*Gt)-H*(et*Pe-pt*Gt)+ee*(et*q-pt*nt),z[11]=-(dt*(nt*Qt-q*vt)-H*(et*Qt-pt*vt)+Et*(et*q-pt*nt)),z[12]=-(H*(vt*$t-Ft*Gt)-Et*(nt*$t-at*Gt)+ee*(nt*Ft-at*vt)),z[13]=dt*(vt*$t-Ft*Gt)-Et*(et*$t-ot*Gt)+ee*(et*Ft-ot*vt),z[14]=-(dt*(nt*$t-at*Gt)-H*(et*$t-ot*Gt)+ee*(et*at-ot*nt)),z[15]=dt*(nt*Ft-at*vt)-H*(et*Ft-ot*vt)+Et*(et*at-ot*nt),z}function n(z){var $=z[0],dt=z[1],et=z[2],ot=z[3],pt=z[4],H=z[5],nt=z[6],at=z[7],q=z[8],Et=z[9],vt=z[10],Ft=z[11],Qt=z[12],ee=z[13],Gt=z[14],$t=z[15],Pe=$*H-dt*pt,me=$*nt-et*pt,le=$*at-ot*pt,be=dt*nt-et*H,ze=dt*at-ot*H,Xe=et*at-ot*nt,_n=q*ee-Et*Qt,Kn=q*Gt-vt*Qt,Hn=q*$t-Ft*Qt,nn=Et*Gt-vt*ee,en=Et*$t-Ft*ee,An=vt*$t-Ft*Gt;return Pe*An-me*en+le*nn+be*Hn-ze*Kn+Xe*_n}function i(z,$,dt){var et=$[0],ot=$[1],pt=$[2],H=$[3],nt=$[4],at=$[5],q=$[6],Et=$[7],vt=$[8],Ft=$[9],Qt=$[10],ee=$[11],Gt=$[12],$t=$[13],Pe=$[14],me=$[15],le=dt[0],be=dt[1],ze=dt[2],Xe=dt[3];return z[0]=le*et+be*nt+ze*vt+Xe*Gt,z[1]=le*ot+be*at+ze*Ft+Xe*$t,z[2]=le*pt+be*q+ze*Qt+Xe*Pe,z[3]=le*H+be*Et+ze*ee+Xe*me,le=dt[4],be=dt[5],ze=dt[6],Xe=dt[7],z[4]=le*et+be*nt+ze*vt+Xe*Gt,z[5]=le*ot+be*at+ze*Ft+Xe*$t,z[6]=le*pt+be*q+ze*Qt+Xe*Pe,z[7]=le*H+be*Et+ze*ee+Xe*me,le=dt[8],be=dt[9],ze=dt[10],Xe=dt[11],z[8]=le*et+be*nt+ze*vt+Xe*Gt,z[9]=le*ot+be*at+ze*Ft+Xe*$t,z[10]=le*pt+be*q+ze*Qt+Xe*Pe,z[11]=le*H+be*Et+ze*ee+Xe*me,le=dt[12],be=dt[13],ze=dt[14],Xe=dt[15],z[12]=le*et+be*nt+ze*vt+Xe*Gt,z[13]=le*ot+be*at+ze*Ft+Xe*$t,z[14]=le*pt+be*q+ze*Qt+Xe*Pe,z[15]=le*H+be*Et+ze*ee+Xe*me,z}function a(z,$,dt){var et=dt[0],ot=dt[1],pt=dt[2],H,nt,at,q,Et,vt,Ft,Qt,ee,Gt,$t,Pe;return $===z?(z[12]=$[0]*et+$[4]*ot+$[8]*pt+$[12],z[13]=$[1]*et+$[5]*ot+$[9]*pt+$[13],z[14]=$[2]*et+$[6]*ot+$[10]*pt+$[14],z[15]=$[3]*et+$[7]*ot+$[11]*pt+$[15]):(H=$[0],nt=$[1],at=$[2],q=$[3],Et=$[4],vt=$[5],Ft=$[6],Qt=$[7],ee=$[8],Gt=$[9],$t=$[10],Pe=$[11],z[0]=H,z[1]=nt,z[2]=at,z[3]=q,z[4]=Et,z[5]=vt,z[6]=Ft,z[7]=Qt,z[8]=ee,z[9]=Gt,z[10]=$t,z[11]=Pe,z[12]=H*et+Et*ot+ee*pt+$[12],z[13]=nt*et+vt*ot+Gt*pt+$[13],z[14]=at*et+Ft*ot+$t*pt+$[14],z[15]=q*et+Qt*ot+Pe*pt+$[15]),z}function o(z,$,dt){var et=dt[0],ot=dt[1],pt=dt[2];return z[0]=$[0]*et,z[1]=$[1]*et,z[2]=$[2]*et,z[3]=$[3]*et,z[4]=$[4]*ot,z[5]=$[5]*ot,z[6]=$[6]*ot,z[7]=$[7]*ot,z[8]=$[8]*pt,z[9]=$[9]*pt,z[10]=$[10]*pt,z[11]=$[11]*pt,z[12]=$[12],z[13]=$[13],z[14]=$[14],z[15]=$[15],z}function u(z,$,dt,et){var ot=et[0],pt=et[1],H=et[2],nt=Math.hypot(ot,pt,H),at,q,Et,vt,Ft,Qt,ee,Gt,$t,Pe,me,le,be,ze,Xe,_n,Kn,Hn,nn,en,An,Nn,hr,fi;return nt<U.b?null:(nt=1/nt,ot*=nt,pt*=nt,H*=nt,at=Math.sin(dt),q=Math.cos(dt),Et=1-q,vt=$[0],Ft=$[1],Qt=$[2],ee=$[3],Gt=$[4],$t=$[5],Pe=$[6],me=$[7],le=$[8],be=$[9],ze=$[10],Xe=$[11],_n=ot*ot*Et+q,Kn=pt*ot*Et+H*at,Hn=H*ot*Et-pt*at,nn=ot*pt*Et-H*at,en=pt*pt*Et+q,An=H*pt*Et+ot*at,Nn=ot*H*Et+pt*at,hr=pt*H*Et-ot*at,fi=H*H*Et+q,z[0]=vt*_n+Gt*Kn+le*Hn,z[1]=Ft*_n+$t*Kn+be*Hn,z[2]=Qt*_n+Pe*Kn+ze*Hn,z[3]=ee*_n+me*Kn+Xe*Hn,z[4]=vt*nn+Gt*en+le*An,z[5]=Ft*nn+$t*en+be*An,z[6]=Qt*nn+Pe*en+ze*An,z[7]=ee*nn+me*en+Xe*An,z[8]=vt*Nn+Gt*hr+le*fi,z[9]=Ft*Nn+$t*hr+be*fi,z[10]=Qt*Nn+Pe*hr+ze*fi,z[11]=ee*Nn+me*hr+Xe*fi,$!==z&&(z[12]=$[12],z[13]=$[13],z[14]=$[14],z[15]=$[15]),z)}function f(z,$,dt){var et=Math.sin(dt),ot=Math.cos(dt),pt=$[4],H=$[5],nt=$[6],at=$[7],q=$[8],Et=$[9],vt=$[10],Ft=$[11];return $!==z&&(z[0]=$[0],z[1]=$[1],z[2]=$[2],z[3]=$[3],z[12]=$[12],z[13]=$[13],z[14]=$[14],z[15]=$[15]),z[4]=pt*ot+q*et,z[5]=H*ot+Et*et,z[6]=nt*ot+vt*et,z[7]=at*ot+Ft*et,z[8]=q*ot-pt*et,z[9]=Et*ot-H*et,z[10]=vt*ot-nt*et,z[11]=Ft*ot-at*et,z}function v(z,$,dt){var et=Math.sin(dt),ot=Math.cos(dt),pt=$[0],H=$[1],nt=$[2],at=$[3],q=$[8],Et=$[9],vt=$[10],Ft=$[11];return $!==z&&(z[4]=$[4],z[5]=$[5],z[6]=$[6],z[7]=$[7],z[12]=$[12],z[13]=$[13],z[14]=$[14],z[15]=$[15]),z[0]=pt*ot-q*et,z[1]=H*ot-Et*et,z[2]=nt*ot-vt*et,z[3]=at*ot-Ft*et,z[8]=pt*et+q*ot,z[9]=H*et+Et*ot,z[10]=nt*et+vt*ot,z[11]=at*et+Ft*ot,z}function b(z,$,dt){var et=Math.sin(dt),ot=Math.cos(dt),pt=$[0],H=$[1],nt=$[2],at=$[3],q=$[4],Et=$[5],vt=$[6],Ft=$[7];return $!==z&&(z[8]=$[8],z[9]=$[9],z[10]=$[10],z[11]=$[11],z[12]=$[12],z[13]=$[13],z[14]=$[14],z[15]=$[15]),z[0]=pt*ot+q*et,z[1]=H*ot+Et*et,z[2]=nt*ot+vt*et,z[3]=at*ot+Ft*et,z[4]=q*ot-pt*et,z[5]=Et*ot-H*et,z[6]=vt*ot-nt*et,z[7]=Ft*ot-at*et,z}function y(z,$){return z[0]=1,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=1,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=1,z[11]=0,z[12]=$[0],z[13]=$[1],z[14]=$[2],z[15]=1,z}function g(z,$){return z[0]=$[0],z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=$[1],z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=$[2],z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}function _(z,$,dt){var et=dt[0],ot=dt[1],pt=dt[2],H=Math.hypot(et,ot,pt),nt,at,q;return H<U.b?null:(H=1/H,et*=H,ot*=H,pt*=H,nt=Math.sin($),at=Math.cos($),q=1-at,z[0]=et*et*q+at,z[1]=ot*et*q+pt*nt,z[2]=pt*et*q-ot*nt,z[3]=0,z[4]=et*ot*q-pt*nt,z[5]=ot*ot*q+at,z[6]=pt*ot*q+et*nt,z[7]=0,z[8]=et*pt*q+ot*nt,z[9]=ot*pt*q-et*nt,z[10]=pt*pt*q+at,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z)}function M(z,$){var dt=Math.sin($),et=Math.cos($);return z[0]=1,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=et,z[6]=dt,z[7]=0,z[8]=0,z[9]=-dt,z[10]=et,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}function x(z,$){var dt=Math.sin($),et=Math.cos($);return z[0]=et,z[1]=0,z[2]=-dt,z[3]=0,z[4]=0,z[5]=1,z[6]=0,z[7]=0,z[8]=dt,z[9]=0,z[10]=et,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}function m(z,$){var dt=Math.sin($),et=Math.cos($);return z[0]=et,z[1]=dt,z[2]=0,z[3]=0,z[4]=-dt,z[5]=et,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=1,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}function S(z,$,dt){var et=$[0],ot=$[1],pt=$[2],H=$[3],nt=et+et,at=ot+ot,q=pt+pt,Et=et*nt,vt=et*at,Ft=et*q,Qt=ot*at,ee=ot*q,Gt=pt*q,$t=H*nt,Pe=H*at,me=H*q;return z[0]=1-(Qt+Gt),z[1]=vt+me,z[2]=Ft-Pe,z[3]=0,z[4]=vt-me,z[5]=1-(Et+Gt),z[6]=ee+$t,z[7]=0,z[8]=Ft+Pe,z[9]=ee-$t,z[10]=1-(Et+Qt),z[11]=0,z[12]=dt[0],z[13]=dt[1],z[14]=dt[2],z[15]=1,z}function P(z,$){var dt=new U.a(3),et=-$[0],ot=-$[1],pt=-$[2],H=$[3],nt=$[4],at=$[5],q=$[6],Et=$[7],vt=et*et+ot*ot+pt*pt+H*H;return vt>0?(dt[0]=(nt*H+Et*et+at*pt-q*ot)*2/vt,dt[1]=(at*H+Et*ot+q*et-nt*pt)*2/vt,dt[2]=(q*H+Et*pt+nt*ot-at*et)*2/vt):(dt[0]=(nt*H+Et*et+at*pt-q*ot)*2,dt[1]=(at*H+Et*ot+q*et-nt*pt)*2,dt[2]=(q*H+Et*pt+nt*ot-at*et)*2),S(z,$,dt),z}function A(z,$){return z[0]=$[12],z[1]=$[13],z[2]=$[14],z}function O(z,$){var dt=$[0],et=$[1],ot=$[2],pt=$[4],H=$[5],nt=$[6],at=$[8],q=$[9],Et=$[10];return z[0]=Math.hypot(dt,et,ot),z[1]=Math.hypot(pt,H,nt),z[2]=Math.hypot(at,q,Et),z}function R(z,$){var dt=new U.a(3);O(dt,$);var et=1/dt[0],ot=1/dt[1],pt=1/dt[2],H=$[0]*et,nt=$[1]*ot,at=$[2]*pt,q=$[4]*et,Et=$[5]*ot,vt=$[6]*pt,Ft=$[8]*et,Qt=$[9]*ot,ee=$[10]*pt,Gt=H+Et+ee,$t=0;return Gt>0?($t=Math.sqrt(Gt+1)*2,z[3]=.25*$t,z[0]=(vt-Qt)/$t,z[1]=(Ft-at)/$t,z[2]=(nt-q)/$t):H>Et&&H>ee?($t=Math.sqrt(1+H-Et-ee)*2,z[3]=(vt-Qt)/$t,z[0]=.25*$t,z[1]=(nt+q)/$t,z[2]=(Ft+at)/$t):Et>ee?($t=Math.sqrt(1+Et-H-ee)*2,z[3]=(Ft-at)/$t,z[0]=(nt+q)/$t,z[1]=.25*$t,z[2]=(vt+Qt)/$t):($t=Math.sqrt(1+ee-H-Et)*2,z[3]=(nt-q)/$t,z[0]=(Ft+at)/$t,z[1]=(vt+Qt)/$t,z[2]=.25*$t),z}function W(z,$,dt,et){var ot=$[0],pt=$[1],H=$[2],nt=$[3],at=ot+ot,q=pt+pt,Et=H+H,vt=ot*at,Ft=ot*q,Qt=ot*Et,ee=pt*q,Gt=pt*Et,$t=H*Et,Pe=nt*at,me=nt*q,le=nt*Et,be=et[0],ze=et[1],Xe=et[2];return z[0]=(1-(ee+$t))*be,z[1]=(Ft+le)*be,z[2]=(Qt-me)*be,z[3]=0,z[4]=(Ft-le)*ze,z[5]=(1-(vt+$t))*ze,z[6]=(Gt+Pe)*ze,z[7]=0,z[8]=(Qt+me)*Xe,z[9]=(Gt-Pe)*Xe,z[10]=(1-(vt+ee))*Xe,z[11]=0,z[12]=dt[0],z[13]=dt[1],z[14]=dt[2],z[15]=1,z}function F(z,$,dt,et,ot){var pt=$[0],H=$[1],nt=$[2],at=$[3],q=pt+pt,Et=H+H,vt=nt+nt,Ft=pt*q,Qt=pt*Et,ee=pt*vt,Gt=H*Et,$t=H*vt,Pe=nt*vt,me=at*q,le=at*Et,be=at*vt,ze=et[0],Xe=et[1],_n=et[2],Kn=ot[0],Hn=ot[1],nn=ot[2],en=(1-(Gt+Pe))*ze,An=(Qt+be)*ze,Nn=(ee-le)*ze,hr=(Qt-be)*Xe,fi=(1-(Ft+Pe))*Xe,Oe=($t+me)*Xe,Ae=(ee+le)*_n,Jt=($t-me)*_n,ve=(1-(Ft+Gt))*_n;return z[0]=en,z[1]=An,z[2]=Nn,z[3]=0,z[4]=hr,z[5]=fi,z[6]=Oe,z[7]=0,z[8]=Ae,z[9]=Jt,z[10]=ve,z[11]=0,z[12]=dt[0]+Kn-(en*Kn+hr*Hn+Ae*nn),z[13]=dt[1]+Hn-(An*Kn+fi*Hn+Jt*nn),z[14]=dt[2]+nn-(Nn*Kn+Oe*Hn+ve*nn),z[15]=1,z}function Z(z,$){var dt=$[0],et=$[1],ot=$[2],pt=$[3],H=dt+dt,nt=et+et,at=ot+ot,q=dt*H,Et=et*H,vt=et*nt,Ft=ot*H,Qt=ot*nt,ee=ot*at,Gt=pt*H,$t=pt*nt,Pe=pt*at;return z[0]=1-vt-ee,z[1]=Et+Pe,z[2]=Ft-$t,z[3]=0,z[4]=Et-Pe,z[5]=1-q-ee,z[6]=Qt+Gt,z[7]=0,z[8]=Ft+$t,z[9]=Qt-Gt,z[10]=1-q-vt,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}function V(z,$,dt,et,ot,pt,H){var nt=1/(dt-$),at=1/(ot-et),q=1/(pt-H);return z[0]=pt*2*nt,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=pt*2*at,z[6]=0,z[7]=0,z[8]=(dt+$)*nt,z[9]=(ot+et)*at,z[10]=(H+pt)*q,z[11]=-1,z[12]=0,z[13]=0,z[14]=H*pt*2*q,z[15]=0,z}function k(z,$,dt,et,ot){var pt=1/Math.tan($/2),H;return z[0]=pt/dt,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=pt,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[11]=-1,z[12]=0,z[13]=0,z[15]=0,ot!=null&&ot!==Infinity?(H=1/(et-ot),z[10]=(ot+et)*H,z[14]=2*ot*et*H):(z[10]=-1,z[14]=-2*et),z}function Y(z,$,dt,et){var ot=Math.tan($.upDegrees*Math.PI/180),pt=Math.tan($.downDegrees*Math.PI/180),H=Math.tan($.leftDegrees*Math.PI/180),nt=Math.tan($.rightDegrees*Math.PI/180),at=2/(H+nt),q=2/(ot+pt);return z[0]=at,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=q,z[6]=0,z[7]=0,z[8]=-((H-nt)*at*.5),z[9]=(ot-pt)*q*.5,z[10]=et/(dt-et),z[11]=-1,z[12]=0,z[13]=0,z[14]=et*dt/(dt-et),z[15]=0,z}function K(z,$,dt,et,ot,pt,H){var nt=1/($-dt),at=1/(et-ot),q=1/(pt-H);return z[0]=-2*nt,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=-2*at,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=2*q,z[11]=0,z[12]=($+dt)*nt,z[13]=(ot+et)*at,z[14]=(H+pt)*q,z[15]=1,z}function it(z,$,dt,et){var ot,pt,H,nt,at,q,Et,vt,Ft,Qt,ee=$[0],Gt=$[1],$t=$[2],Pe=et[0],me=et[1],le=et[2],be=dt[0],ze=dt[1],Xe=dt[2];return Math.abs(ee-be)<U.b&&Math.abs(Gt-ze)<U.b&&Math.abs($t-Xe)<U.b?s(z):(Et=ee-be,vt=Gt-ze,Ft=$t-Xe,Qt=1/Math.hypot(Et,vt,Ft),Et*=Qt,vt*=Qt,Ft*=Qt,ot=me*Ft-le*vt,pt=le*Et-Pe*Ft,H=Pe*vt-me*Et,Qt=Math.hypot(ot,pt,H),Qt?(Qt=1/Qt,ot*=Qt,pt*=Qt,H*=Qt):(ot=0,pt=0,H=0),nt=vt*H-Ft*pt,at=Ft*ot-Et*H,q=Et*pt-vt*ot,Qt=Math.hypot(nt,at,q),Qt?(Qt=1/Qt,nt*=Qt,at*=Qt,q*=Qt):(nt=0,at=0,q=0),z[0]=ot,z[1]=nt,z[2]=Et,z[3]=0,z[4]=pt,z[5]=at,z[6]=vt,z[7]=0,z[8]=H,z[9]=q,z[10]=Ft,z[11]=0,z[12]=-(ot*ee+pt*Gt+H*$t),z[13]=-(nt*ee+at*Gt+q*$t),z[14]=-(Et*ee+vt*Gt+Ft*$t),z[15]=1,z)}function ct(z,$,dt,et){var ot=$[0],pt=$[1],H=$[2],nt=et[0],at=et[1],q=et[2],Et=ot-dt[0],vt=pt-dt[1],Ft=H-dt[2],Qt=Et*Et+vt*vt+Ft*Ft;Qt>0&&(Qt=1/Math.sqrt(Qt),Et*=Qt,vt*=Qt,Ft*=Qt);var ee=at*Ft-q*vt,Gt=q*Et-nt*Ft,$t=nt*vt-at*Et;return Qt=ee*ee+Gt*Gt+$t*$t,Qt>0&&(Qt=1/Math.sqrt(Qt),ee*=Qt,Gt*=Qt,$t*=Qt),z[0]=ee,z[1]=Gt,z[2]=$t,z[3]=0,z[4]=vt*$t-Ft*Gt,z[5]=Ft*ee-Et*$t,z[6]=Et*Gt-vt*ee,z[7]=0,z[8]=Et,z[9]=vt,z[10]=Ft,z[11]=0,z[12]=ot,z[13]=pt,z[14]=H,z[15]=1,z}function ht(z){return"mat4("+z[0]+", "+z[1]+", "+z[2]+", "+z[3]+", "+z[4]+", "+z[5]+", "+z[6]+", "+z[7]+", "+z[8]+", "+z[9]+", "+z[10]+", "+z[11]+", "+z[12]+", "+z[13]+", "+z[14]+", "+z[15]+")"}function ut(z){return Math.hypot(z[0],z[1],z[2],z[3],z[4],z[5],z[6],z[7],z[8],z[9],z[10],z[11],z[12],z[13],z[14],z[15])}function It(z,$,dt){return z[0]=$[0]+dt[0],z[1]=$[1]+dt[1],z[2]=$[2]+dt[2],z[3]=$[3]+dt[3],z[4]=$[4]+dt[4],z[5]=$[5]+dt[5],z[6]=$[6]+dt[6],z[7]=$[7]+dt[7],z[8]=$[8]+dt[8],z[9]=$[9]+dt[9],z[10]=$[10]+dt[10],z[11]=$[11]+dt[11],z[12]=$[12]+dt[12],z[13]=$[13]+dt[13],z[14]=$[14]+dt[14],z[15]=$[15]+dt[15],z}function Nt(z,$,dt){return z[0]=$[0]-dt[0],z[1]=$[1]-dt[1],z[2]=$[2]-dt[2],z[3]=$[3]-dt[3],z[4]=$[4]-dt[4],z[5]=$[5]-dt[5],z[6]=$[6]-dt[6],z[7]=$[7]-dt[7],z[8]=$[8]-dt[8],z[9]=$[9]-dt[9],z[10]=$[10]-dt[10],z[11]=$[11]-dt[11],z[12]=$[12]-dt[12],z[13]=$[13]-dt[13],z[14]=$[14]-dt[14],z[15]=$[15]-dt[15],z}function Lt(z,$,dt){return z[0]=$[0]*dt,z[1]=$[1]*dt,z[2]=$[2]*dt,z[3]=$[3]*dt,z[4]=$[4]*dt,z[5]=$[5]*dt,z[6]=$[6]*dt,z[7]=$[7]*dt,z[8]=$[8]*dt,z[9]=$[9]*dt,z[10]=$[10]*dt,z[11]=$[11]*dt,z[12]=$[12]*dt,z[13]=$[13]*dt,z[14]=$[14]*dt,z[15]=$[15]*dt,z}function _t(z,$,dt,et){return z[0]=$[0]+dt[0]*et,z[1]=$[1]+dt[1]*et,z[2]=$[2]+dt[2]*et,z[3]=$[3]+dt[3]*et,z[4]=$[4]+dt[4]*et,z[5]=$[5]+dt[5]*et,z[6]=$[6]+dt[6]*et,z[7]=$[7]+dt[7]*et,z[8]=$[8]+dt[8]*et,z[9]=$[9]+dt[9]*et,z[10]=$[10]+dt[10]*et,z[11]=$[11]+dt[11]*et,z[12]=$[12]+dt[12]*et,z[13]=$[13]+dt[13]*et,z[14]=$[14]+dt[14]*et,z[15]=$[15]+dt[15]*et,z}function mt(z,$){return z[0]===$[0]&&z[1]===$[1]&&z[2]===$[2]&&z[3]===$[3]&&z[4]===$[4]&&z[5]===$[5]&&z[6]===$[6]&&z[7]===$[7]&&z[8]===$[8]&&z[9]===$[9]&&z[10]===$[10]&&z[11]===$[11]&&z[12]===$[12]&&z[13]===$[13]&&z[14]===$[14]&&z[15]===$[15]}function At(z,$){var dt=z[0],et=z[1],ot=z[2],pt=z[3],H=z[4],nt=z[5],at=z[6],q=z[7],Et=z[8],vt=z[9],Ft=z[10],Qt=z[11],ee=z[12],Gt=z[13],$t=z[14],Pe=z[15],me=$[0],le=$[1],be=$[2],ze=$[3],Xe=$[4],_n=$[5],Kn=$[6],Hn=$[7],nn=$[8],en=$[9],An=$[10],Nn=$[11],hr=$[12],fi=$[13],Oe=$[14],Ae=$[15];return Math.abs(dt-me)<=U.b*Math.max(1,Math.abs(dt),Math.abs(me))&&Math.abs(et-le)<=U.b*Math.max(1,Math.abs(et),Math.abs(le))&&Math.abs(ot-be)<=U.b*Math.max(1,Math.abs(ot),Math.abs(be))&&Math.abs(pt-ze)<=U.b*Math.max(1,Math.abs(pt),Math.abs(ze))&&Math.abs(H-Xe)<=U.b*Math.max(1,Math.abs(H),Math.abs(Xe))&&Math.abs(nt-_n)<=U.b*Math.max(1,Math.abs(nt),Math.abs(_n))&&Math.abs(at-Kn)<=U.b*Math.max(1,Math.abs(at),Math.abs(Kn))&&Math.abs(q-Hn)<=U.b*Math.max(1,Math.abs(q),Math.abs(Hn))&&Math.abs(Et-nn)<=U.b*Math.max(1,Math.abs(Et),Math.abs(nn))&&Math.abs(vt-en)<=U.b*Math.max(1,Math.abs(vt),Math.abs(en))&&Math.abs(Ft-An)<=U.b*Math.max(1,Math.abs(Ft),Math.abs(An))&&Math.abs(Qt-Nn)<=U.b*Math.max(1,Math.abs(Qt),Math.abs(Nn))&&Math.abs(ee-hr)<=U.b*Math.max(1,Math.abs(ee),Math.abs(hr))&&Math.abs(Gt-fi)<=U.b*Math.max(1,Math.abs(Gt),Math.abs(fi))&&Math.abs($t-Oe)<=U.b*Math.max(1,Math.abs($t),Math.abs(Oe))&&Math.abs(Pe-Ae)<=U.b*Math.max(1,Math.abs(Pe),Math.abs(Ae))}var rt=i,Mt=Nt},ZhIB:function(Se,ft,L){var U,E;/*! @preserve
* numeral.js
* version : 2.0.6
* author : Adam Draper
* license : MIT
* http://adamwdraper.github.com/Numeral-js/
*/(function(T,e){U=e,E=typeof U=="function"?U.call(ft,L,ft,Se):U,E!==void 0&&(Se.exports=E)})(this,function(){var T,e,t="2.0.6",l={},s={},c={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0},r={currentLocale:c.currentLocale,zeroFormat:c.zeroFormat,nullFormat:c.nullFormat,defaultFormat:c.defaultFormat,scalePercentBy100:c.scalePercentBy100};function h(n,i){this._input=n,this._value=i}return T=function(i){var a,o,u,f;if(T.isNumeral(i))a=i.value();else if(i===0||typeof i=="undefined")a=0;else if(i===null||e.isNaN(i))a=null;else if(typeof i=="string")if(r.zeroFormat&&i===r.zeroFormat)a=0;else if(r.nullFormat&&i===r.nullFormat||!i.replace(/[^0-9]+/g,"").length)a=null;else{for(o in l)if(f=typeof l[o].regexps.unformat=="function"?l[o].regexps.unformat():l[o].regexps.unformat,f&&i.match(f)){u=l[o].unformat;break}u=u||T._.stringToNumber,a=u(i)}else a=Number(i)||null;return new h(i,a)},T.version=t,T.isNumeral=function(n){return n instanceof h},T._=e={numberToFormat:function(i,a,o){var u=s[T.options.currentLocale],f=!1,v=!1,b=0,y="",g=1e12,_=1e9,M=1e6,x=1e3,m="",S=!1,P,A,O,R,W,F,Z,V,k,Y;if(i=i||0,A=Math.abs(i),T._.includes(a,"(")?(f=!0,a=a.replace(/[\(|\)]/g,"")):(T._.includes(a,"+")||T._.includes(a,"-"))&&(V=T._.includes(a,"+")?a.indexOf("+"):i<0?a.indexOf("-"):-1,a=a.replace(/[\+|\-]/g,"")),T._.includes(a,"a")&&(P=a.match(/a(k|m|b|t)?/),P=P?P[1]:!1,T._.includes(a," a")&&(y=" "),a=a.replace(new RegExp(y+"a[kmbt]?"),""),A>=g&&!P||P==="t"?(y+=u.abbreviations.trillion,i=i/g):A<g&&A>=_&&!P||P==="b"?(y+=u.abbreviations.billion,i=i/_):A<_&&A>=M&&!P||P==="m"?(y+=u.abbreviations.million,i=i/M):(A<M&&A>=x&&!P||P==="k")&&(y+=u.abbreviations.thousand,i=i/x)),T._.includes(a,"[.]")&&(v=!0,a=a.replace("[.]",".")),F=i.toString().split(".")[0],Z=a.split(".")[1],k=a.indexOf(","),b=(a.split(".")[0].split(",")[0].match(/0/g)||[]).length,Z?(T._.includes(Z,"[")?(Z=Z.replace("]",""),Z=Z.split("["),m=T._.toFixed(i,Z[0].length+Z[1].length,o,Z[1].length)):m=T._.toFixed(i,Z.length,o),F=m.split(".")[0],T._.includes(m,".")?m=u.delimiters.decimal+m.split(".")[1]:m="",v&&Number(m.slice(1))===0&&(m="")):F=T._.toFixed(i,0,o),y&&!P&&Number(F)>=1e3&&y!==u.abbreviations.trillion)switch(F=String(Number(F)/1e3),y){case u.abbreviations.thousand:y=u.abbreviations.million;break;case u.abbreviations.million:y=u.abbreviations.billion;break;case u.abbreviations.billion:y=u.abbreviations.trillion;break}if(T._.includes(F,"-")&&(F=F.slice(1),S=!0),F.length<b)for(var K=b-F.length;K>0;K--)F="0"+F;return k>-1&&(F=F.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+u.delimiters.thousands)),a.indexOf(".")===0&&(F=""),Y=F+m+(y||""),f?Y=(f&&S?"(":"")+Y+(f&&S?")":""):V>=0?Y=V===0?(S?"-":"+")+Y:Y+(S?"-":"+"):S&&(Y="-"+Y),Y},stringToNumber:function(i){var a=s[r.currentLocale],o=i,u={thousand:3,million:6,billion:9,trillion:12},f,v,b,y;if(r.zeroFormat&&i===r.zeroFormat)v=0;else if(r.nullFormat&&i===r.nullFormat||!i.replace(/[^0-9]+/g,"").length)v=null;else{v=1,a.delimiters.decimal!=="."&&(i=i.replace(/\./g,"").replace(a.delimiters.decimal,"."));for(f in u)if(y=new RegExp("[^a-zA-Z]"+a.abbreviations[f]+"(?:\\)|(\\"+a.currency.symbol+")?(?:\\))?)?$"),o.match(y)){v*=Math.pow(10,u[f]);break}v*=(i.split("-").length+Math.min(i.split("(").length-1,i.split(")").length-1))%2?1:-1,i=i.replace(/[^0-9\.]+/g,""),v*=Number(i)}return v},isNaN:function(n){function i(a){return n.apply(this,arguments)}return i.toString=function(){return n.toString()},i}(function(n){return typeof n=="number"&&isNaN(n)}),includes:function(i,a){return i.indexOf(a)!==-1},insert:function(i,a,o){return i.slice(0,o)+a+i.slice(o)},reduce:function(i,a){if(this===null)throw new TypeError("Array.prototype.reduce called on null or undefined");if(typeof a!="function")throw new TypeError(a+" is not a function");var o=Object(i),u=o.length>>>0,f=0,v;if(arguments.length===3)v=arguments[2];else{for(;f<u&&!(f in o);)f++;if(f>=u)throw new TypeError("Reduce of empty array with no initial value");v=o[f++]}for(;f<u;f++)f in o&&(v=a(v,o[f],f,o));return v},multiplier:function(i){var a=i.toString().split(".");return a.length<2?1:Math.pow(10,a[1].length)},correctionFactor:function(){var i=Array.prototype.slice.call(arguments);return i.reduce(function(a,o){var u=e.multiplier(o);return a>u?a:u},1)},toFixed:function(i,a,o,u){var f=i.toString().split("."),v=a-(u||0),b,y,g,_;return f.length===2?b=Math.min(Math.max(f[1].length,v),a):b=v,g=Math.pow(10,b),_=(o(i+"e+"+b)/g).toFixed(b),u>a-b&&(y=new RegExp("\\.?0{1,"+(u-(a-b))+"}$"),_=_.replace(y,"")),_}},T.options=r,T.formats=l,T.locales=s,T.locale=function(n){return n&&(r.currentLocale=n.toLowerCase()),r.currentLocale},T.localeData=function(n){if(!n)return s[r.currentLocale];if(n=n.toLowerCase(),!s[n])throw new Error("Unknown locale : "+n);return s[n]},T.reset=function(){for(var n in c)r[n]=c[n]},T.zeroFormat=function(n){r.zeroFormat=typeof n=="string"?n:null},T.nullFormat=function(n){r.nullFormat=typeof n=="string"?n:null},T.defaultFormat=function(n){r.defaultFormat=typeof n=="string"?n:"0.0"},T.register=function(n,i,a){if(i=i.toLowerCase(),this[n+"s"][i])throw new TypeError(i+" "+n+" already registered.");return this[n+"s"][i]=a,a},T.validate=function(n,i){var a,o,u,f,v,b,y,g;if(typeof n!="string"&&(n+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",n)),n=n.trim(),n.match(/^\d+$/))return!0;if(n==="")return!1;try{y=T.localeData(i)}catch(_){y=T.localeData(T.locale())}return u=y.currency.symbol,v=y.abbreviations,a=y.delimiters.decimal,y.delimiters.thousands==="."?o="\\.":o=y.delimiters.thousands,g=n.match(/^[^\d]+/),g!==null&&(n=n.substr(1),g[0]!==u)||(g=n.match(/[^\d]+$/),g!==null&&(n=n.slice(0,-1),g[0]!==v.thousand&&g[0]!==v.million&&g[0]!==v.billion&&g[0]!==v.trillion))?!1:(b=new RegExp(o+"{2}"),n.match(/[^\d.,]/g)?!1:(f=n.split(a),f.length>2?!1:f.length<2?!!f[0].match(/^\d+.*\d$/)&&!f[0].match(b):f[0].length===1?!!f[0].match(/^\d+$/)&&!f[0].match(b)&&!!f[1].match(/^\d+$/):!!f[0].match(/^\d+.*\d$/)&&!f[0].match(b)&&!!f[1].match(/^\d+$/)))},T.fn=h.prototype={clone:function(){return T(this)},format:function(i,a){var o=this._value,u=i||r.defaultFormat,f,v,b;if(a=a||Math.round,o===0&&r.zeroFormat!==null)v=r.zeroFormat;else if(o===null&&r.nullFormat!==null)v=r.nullFormat;else{for(f in l)if(u.match(l[f].regexps.format)){b=l[f].format;break}b=b||T._.numberToFormat,v=b(o,u,a)}return v},value:function(){return this._value},input:function(){return this._input},set:function(i){return this._value=Number(i),this},add:function(i){var a=e.correctionFactor.call(null,this._value,i);function o(u,f,v,b){return u+Math.round(a*f)}return this._value=e.reduce([this._value,i],o,0)/a,this},subtract:function(i){var a=e.correctionFactor.call(null,this._value,i);function o(u,f,v,b){return u-Math.round(a*f)}return this._value=e.reduce([i],o,Math.round(this._value*a))/a,this},multiply:function(i){function a(o,u,f,v){var b=e.correctionFactor(o,u);return Math.round(o*b)*Math.round(u*b)/Math.round(b*b)}return this._value=e.reduce([this._value,i],a,1),this},divide:function(i){function a(o,u,f,v){var b=e.correctionFactor(o,u);return Math.round(o*b)/Math.round(u*b)}return this._value=e.reduce([this._value,i],a),this},difference:function(i){return Math.abs(T(this._value).subtract(i).value())}},T.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(i){var a=i%10;return~~(i%100/10)==1?"th":a===1?"st":a===2?"nd":a===3?"rd":"th"},currency:{symbol:"$"}}),function(){T.register("format","bps",{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(i,a,o){var u=T._.includes(a," BPS")?" ":"",f;return i=i*1e4,a=a.replace(/\s?BPS/,""),f=T._.numberToFormat(i,a,o),T._.includes(f,")")?(f=f.split(""),f.splice(-1,0,u+"BPS"),f=f.join("")):f=f+u+"BPS",f},unformat:function(i){return+(T._.stringToNumber(i)*1e-4).toFixed(15)}})}(),function(){var n={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]},i={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},a=n.suffixes.concat(i.suffixes.filter(function(u){return n.suffixes.indexOf(u)<0})),o=a.join("|");o="("+o.replace("B","B(?!PS)")+")",T.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp(o)},format:function(f,v,b){var y,g=T._.includes(v,"ib")?i:n,_=T._.includes(v," b")||T._.includes(v," ib")?" ":"",M,x,m;for(v=v.replace(/\s?i?b/,""),M=0;M<=g.suffixes.length;M++)if(x=Math.pow(g.base,M),m=Math.pow(g.base,M+1),f===null||f===0||f>=x&&f<m){_+=g.suffixes[M],x>0&&(f=f/x);break}return y=T._.numberToFormat(f,v,b),y+_},unformat:function(f){var v=T._.stringToNumber(f),b,y;if(v){for(b=n.suffixes.length-1;b>=0;b--){if(T._.includes(f,n.suffixes[b])){y=Math.pow(n.base,b);break}if(T._.includes(f,i.suffixes[b])){y=Math.pow(i.base,b);break}}v*=y||1}return v}})}(),function(){T.register("format","currency",{regexps:{format:/(\$)/},format:function(i,a,o){var u=T.locales[T.options.currentLocale],f={before:a.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:a.match(/([\+|\-|\)|\s|\$]*)$/)[0]},v,b,y;for(a=a.replace(/\s?\$\s?/,""),v=T._.numberToFormat(i,a,o),i>=0?(f.before=f.before.replace(/[\-\(]/,""),f.after=f.after.replace(/[\-\)]/,"")):i<0&&!T._.includes(f.before,"-")&&!T._.includes(f.before,"(")&&(f.before="-"+f.before),y=0;y<f.before.length;y++)switch(b=f.before[y],b){case"$":v=T._.insert(v,u.currency.symbol,y);break;case" ":v=T._.insert(v," ",y+u.currency.symbol.length-1);break}for(y=f.after.length-1;y>=0;y--)switch(b=f.after[y],b){case"$":v=y===f.after.length-1?v+u.currency.symbol:T._.insert(v,u.currency.symbol,-(f.after.length-(1+y)));break;case" ":v=y===f.after.length-1?v+" ":T._.insert(v," ",-(f.after.length-(1+y)+u.currency.symbol.length-1));break}return v}})}(),function(){T.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(i,a,o){var u,f=typeof i=="number"&&!T._.isNaN(i)?i.toExponential():"0e+0",v=f.split("e");return a=a.replace(/e[\+|\-]{1}0/,""),u=T._.numberToFormat(Number(v[0]),a,o),u+"e"+v[1]},unformat:function(i){var a=T._.includes(i,"e+")?i.split("e+"):i.split("e-"),o=Number(a[0]),u=Number(a[1]);u=T._.includes(i,"e-")?u*=-1:u;function f(v,b,y,g){var _=T._.correctionFactor(v,b),M=v*_*(b*_)/(_*_);return M}return T._.reduce([o,Math.pow(10,u)],f,1)}})}(),function(){T.register("format","ordinal",{regexps:{format:/(o)/},format:function(i,a,o){var u=T.locales[T.options.currentLocale],f,v=T._.includes(a," o")?" ":"";return a=a.replace(/\s?o/,""),v+=u.ordinal(i),f=T._.numberToFormat(i,a,o),f+v}})}(),function(){T.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(i,a,o){var u=T._.includes(a," %")?" ":"",f;return T.options.scalePercentBy100&&(i=i*100),a=a.replace(/\s?\%/,""),f=T._.numberToFormat(i,a,o),T._.includes(f,")")?(f=f.split(""),f.splice(-1,0,u+"%"),f=f.join("")):f=f+u+"%",f},unformat:function(i){var a=T._.stringToNumber(i);return T.options.scalePercentBy100?a*.01:a}})}(),function(){T.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(i,a,o){var u=Math.floor(i/60/60),f=Math.floor((i-u*60*60)/60),v=Math.round(i-u*60*60-f*60);return u+":"+(f<10?"0"+f:f)+":"+(v<10?"0"+v:v)},unformat:function(i){var a=i.split(":"),o=0;return a.length===3?(o=o+Number(a[0])*60*60,o=o+Number(a[1])*60,o=o+Number(a[2])):a.length===2&&(o=o+Number(a[0])*60,o=o+Number(a[1])),Number(o)}})}(),T})},Ztfv:function(Se,ft,L){"use strict";Object.defineProperty(ft,"__esModule",{value:!0}),ft.tagProperty=ft.tagParameter=ft.decorate=void 0;var U=L("MON2"),E=L("xfSm");function T(r,h,n,i){var a=E.TAGGED;t(a,r,h,i,n)}ft.tagParameter=T;function e(r,h,n){var i=E.TAGGED_PROP;t(i,r.constructor,h,n)}ft.tagProperty=e;function t(r,h,n,i,a){var o={},u=typeof a=="number",f=a!==void 0&&u?a.toString():n;if(u&&n!==void 0)throw new Error(U.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(r,h)&&(o=Reflect.getMetadata(r,h));var v=o[f];if(!Array.isArray(v))v=[];else for(var b=0,y=v;b<y.length;b++){var g=y[b];if(g.key===i.key)throw new Error(U.DUPLICATED_METADATA+" "+g.key.toString())}v.push(i),o[f]=v,Reflect.defineMetadata(r,o,h)}function l(r,h){Reflect.decorate(r,h)}function s(r,h){return function(n,i){h(n,i,r)}}function c(r,h,n){typeof n=="number"?l([s(n,r)],h):typeof n=="string"?Reflect.decorate([r],h,n):l([r],h)}ft.decorate=c},ZxFD:function(Se,ft,L){"use strict";L.r(ft),L.d(ft,"create",function(){return E}),L.d(ft,"clone",function(){return T}),L.d(ft,"fromValues",function(){return e}),L.d(ft,"copy",function(){return t}),L.d(ft,"set",function(){return l}),L.d(ft,"add",function(){return s}),L.d(ft,"subtract",function(){return c}),L.d(ft,"multiply",function(){return r}),L.d(ft,"divide",function(){return h}),L.d(ft,"ceil",function(){return n}),L.d(ft,"floor",function(){return i}),L.d(ft,"min",function(){return a}),L.d(ft,"max",function(){return o}),L.d(ft,"round",function(){return u}),L.d(ft,"scale",function(){return f}),L.d(ft,"scaleAndAdd",function(){return v}),L.d(ft,"distance",function(){return b}),L.d(ft,"squaredDistance",function(){return y}),L.d(ft,"length",function(){return g}),L.d(ft,"squaredLength",function(){return _}),L.d(ft,"negate",function(){return M}),L.d(ft,"inverse",function(){return x}),L.d(ft,"normalize",function(){return m}),L.d(ft,"dot",function(){return S}),L.d(ft,"cross",function(){return P}),L.d(ft,"lerp",function(){return A}),L.d(ft,"random",function(){return O}),L.d(ft,"transformMat2",function(){return R}),L.d(ft,"transformMat2d",function(){return W}),L.d(ft,"transformMat3",function(){return F}),L.d(ft,"transformMat4",function(){return Z}),L.d(ft,"rotate",function(){return V}),L.d(ft,"angle",function(){return k}),L.d(ft,"zero",function(){return Y}),L.d(ft,"str",function(){return K}),L.d(ft,"exactEquals",function(){return it}),L.d(ft,"equals",function(){return ct}),L.d(ft,"len",function(){return ht}),L.d(ft,"sub",function(){return ut}),L.d(ft,"mul",function(){return It}),L.d(ft,"div",function(){return Nt}),L.d(ft,"dist",function(){return Lt}),L.d(ft,"sqrDist",function(){return _t}),L.d(ft,"sqrLen",function(){return mt}),L.d(ft,"forEach",function(){return At});var U=L("yU0y");function E(){var rt=new U.a(2);return U.a!=Float32Array&&(rt[0]=0,rt[1]=0),rt}function T(rt){var Mt=new U.a(2);return Mt[0]=rt[0],Mt[1]=rt[1],Mt}function e(rt,Mt){var z=new U.a(2);return z[0]=rt,z[1]=Mt,z}function t(rt,Mt){return rt[0]=Mt[0],rt[1]=Mt[1],rt}function l(rt,Mt,z){return rt[0]=Mt,rt[1]=z,rt}function s(rt,Mt,z){return rt[0]=Mt[0]+z[0],rt[1]=Mt[1]+z[1],rt}function c(rt,Mt,z){return rt[0]=Mt[0]-z[0],rt[1]=Mt[1]-z[1],rt}function r(rt,Mt,z){return rt[0]=Mt[0]*z[0],rt[1]=Mt[1]*z[1],rt}function h(rt,Mt,z){return rt[0]=Mt[0]/z[0],rt[1]=Mt[1]/z[1],rt}function n(rt,Mt){return rt[0]=Math.ceil(Mt[0]),rt[1]=Math.ceil(Mt[1]),rt}function i(rt,Mt){return rt[0]=Math.floor(Mt[0]),rt[1]=Math.floor(Mt[1]),rt}function a(rt,Mt,z){return rt[0]=Math.min(Mt[0],z[0]),rt[1]=Math.min(Mt[1],z[1]),rt}function o(rt,Mt,z){return rt[0]=Math.max(Mt[0],z[0]),rt[1]=Math.max(Mt[1],z[1]),rt}function u(rt,Mt){return rt[0]=Math.round(Mt[0]),rt[1]=Math.round(Mt[1]),rt}function f(rt,Mt,z){return rt[0]=Mt[0]*z,rt[1]=Mt[1]*z,rt}function v(rt,Mt,z,$){return rt[0]=Mt[0]+z[0]*$,rt[1]=Mt[1]+z[1]*$,rt}function b(rt,Mt){var z=Mt[0]-rt[0],$=Mt[1]-rt[1];return Math.hypot(z,$)}function y(rt,Mt){var z=Mt[0]-rt[0],$=Mt[1]-rt[1];return z*z+$*$}function g(rt){var Mt=rt[0],z=rt[1];return Math.hypot(Mt,z)}function _(rt){var Mt=rt[0],z=rt[1];return Mt*Mt+z*z}function M(rt,Mt){return rt[0]=-Mt[0],rt[1]=-Mt[1],rt}function x(rt,Mt){return rt[0]=1/Mt[0],rt[1]=1/Mt[1],rt}function m(rt,Mt){var z=Mt[0],$=Mt[1],dt=z*z+$*$;return dt>0&&(dt=1/Math.sqrt(dt)),rt[0]=Mt[0]*dt,rt[1]=Mt[1]*dt,rt}function S(rt,Mt){return rt[0]*Mt[0]+rt[1]*Mt[1]}function P(rt,Mt,z){var $=Mt[0]*z[1]-Mt[1]*z[0];return rt[0]=rt[1]=0,rt[2]=$,rt}function A(rt,Mt,z,$){var dt=Mt[0],et=Mt[1];return rt[0]=dt+$*(z[0]-dt),rt[1]=et+$*(z[1]-et),rt}function O(rt,Mt){Mt=Mt||1;var z=U.c()*2*Math.PI;return rt[0]=Math.cos(z)*Mt,rt[1]=Math.sin(z)*Mt,rt}function R(rt,Mt,z){var $=Mt[0],dt=Mt[1];return rt[0]=z[0]*$+z[2]*dt,rt[1]=z[1]*$+z[3]*dt,rt}function W(rt,Mt,z){var $=Mt[0],dt=Mt[1];return rt[0]=z[0]*$+z[2]*dt+z[4],rt[1]=z[1]*$+z[3]*dt+z[5],rt}function F(rt,Mt,z){var $=Mt[0],dt=Mt[1];return rt[0]=z[0]*$+z[3]*dt+z[6],rt[1]=z[1]*$+z[4]*dt+z[7],rt}function Z(rt,Mt,z){var $=Mt[0],dt=Mt[1];return rt[0]=z[0]*$+z[4]*dt+z[12],rt[1]=z[1]*$+z[5]*dt+z[13],rt}function V(rt,Mt,z,$){var dt=Mt[0]-z[0],et=Mt[1]-z[1],ot=Math.sin($),pt=Math.cos($);return rt[0]=dt*pt-et*ot+z[0],rt[1]=dt*ot+et*pt+z[1],rt}function k(rt,Mt){var z=rt[0],$=rt[1],dt=Mt[0],et=Mt[1],ot=Math.sqrt(z*z+$*$)*Math.sqrt(dt*dt+et*et),pt=ot&&(z*dt+$*et)/ot;return Math.acos(Math.min(Math.max(pt,-1),1))}function Y(rt){return rt[0]=0,rt[1]=0,rt}function K(rt){return"vec2("+rt[0]+", "+rt[1]+")"}function it(rt,Mt){return rt[0]===Mt[0]&&rt[1]===Mt[1]}function ct(rt,Mt){var z=rt[0],$=rt[1],dt=Mt[0],et=Mt[1];return Math.abs(z-dt)<=U.b*Math.max(1,Math.abs(z),Math.abs(dt))&&Math.abs($-et)<=U.b*Math.max(1,Math.abs($),Math.abs(et))}var ht=g,ut=c,It=r,Nt=h,Lt=b,_t=y,mt=_,At=function(){var rt=E();return function(Mt,z,$,dt,et,ot){var pt,H;for(z||(z=2),$||($=0),dt?H=Math.min(dt*z+$,Mt.length):H=Mt.length,pt=$;pt<H;pt+=z)rt[0]=Mt[pt],rt[1]=Mt[pt+1],et(rt,rt,ot),Mt[pt]=rt[0],Mt[pt+1]=rt[1];return Mt}}()},ZzCi:function(Se,ft,L){"use strict";Object.defineProperty(ft,"__esModule",{value:!0}),ft.named=void 0;var U=L("xfSm"),E=L("GXnB"),T=L("Ztfv");function e(t){return function(l,s,c){var r=new E.Metadata(U.NAMED_TAG,t);typeof c=="number"?T.tagParameter(l,s,c,r):T.tagProperty(l,s,r)}}ft.named=e},a1gu:function(Se,ft,L){var U=L("cDf5").default,E=L("PJYZ");function T(e,t){return t&&(U(t)==="object"||typeof t=="function")?t:E(e)}Se.exports=T,Se.exports.default=Se.exports,Se.exports.__esModule=!0},aF1E:function(Se,ft,L){"use strict";L.d(ft,"a",function(){return t});var U=L("lSNA"),E=L.n(U);function T(l,s){var c=Object.keys(l);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(l);s&&(r=r.filter(function(h){return Object.getOwnPropertyDescriptor(l,h).enumerable})),c.push.apply(c,r)}return c}function e(l){for(var s=1;s<arguments.length;s++){var c=arguments[s]!=null?arguments[s]:{};s%2?T(Object(c),!0).forEach(function(r){E()(l,r,c[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(c)):T(Object(c)).forEach(function(r){Object.defineProperty(l,r,Object.getOwnPropertyDescriptor(c,r))})}return l}function t(l,s){var c=s.sourceField,r=s.targetField,h=s.data,n={};return h.forEach(function(i){n[i[c]]=i}),l.dataArray=l.dataArray.map(function(i){var a=i[r];return e(e({},i),n[a])}),l}},aHsQ:function(Se,ft,L){"use strict";var U=L("cIOH"),E=L.n(U),T=L("6D9b"),e=L.n(T),t=L("cWXX")},aPG5:function(Se,ft,L){"use strict";Object.defineProperty(ft,"__esModule",{value:!0}),ft.resolve=void 0;var U=L("MON2"),E=L("FV85"),T=L("qK8v"),e=L("ujMp"),t=L("cSJO"),l=function(h,n,i){try{return i()}catch(a){throw T.isStackOverflowExeption(a)?new Error(U.CIRCULAR_DEPENDENCY_IN_FACTORY(h,n.toString())):a}},s=function r(h){return function(n){n.parentContext.setCurrentRequest(n);var i=n.bindings,a=n.childRequests,o=n.target&&n.target.isArray(),u=!n.parentRequest||!n.parentRequest.target||!n.target||!n.parentRequest.target.matchesArray(n.target.serviceIdentifier);if(o&&u)return a.map(function(_){var M=r(h);return M(_)});var f=null;if(n.target.isOptional()&&i.length===0)return;var v=i[0],b=v.scope===E.BindingScopeEnum.Singleton,y=v.scope===E.BindingScopeEnum.Request;if(b&&v.activated)return v.cache;if(y&&h!==null&&h.has(v.id))return h.get(v.id);if(v.type===E.BindingTypeEnum.ConstantValue)f=v.cache;else if(v.type===E.BindingTypeEnum.Function)f=v.cache;else if(v.type===E.BindingTypeEnum.Constructor)f=v.implementationType;else if(v.type===E.BindingTypeEnum.DynamicValue&&v.dynamicValue!==null)f=l("toDynamicValue",v.serviceIdentifier,function(){return v.dynamicValue(n.parentContext)});else if(v.type===E.BindingTypeEnum.Factory&&v.factory!==null)f=l("toFactory",v.serviceIdentifier,function(){return v.factory(n.parentContext)});else if(v.type===E.BindingTypeEnum.Provider&&v.provider!==null)f=l("toProvider",v.serviceIdentifier,function(){return v.provider(n.parentContext)});else if(v.type===E.BindingTypeEnum.Instance&&v.implementationType!==null)f=t.resolveInstance(v.implementationType,a,r(h));else{var g=e.getServiceIdentifierAsString(n.serviceIdentifier);throw new Error(U.INVALID_BINDING_TYPE+" "+g)}return typeof v.onActivation=="function"&&(f=v.onActivation(n.parentContext,f)),b&&(v.cache=f,v.activated=!0),y&&h!==null&&!h.has(v.id)&&h.set(v.id,f),f}};function c(r){var h=s(r.plan.rootRequest.requestScope);return h(r.plan.rootRequest)}ft.resolve=c},asDA:function(Se,ft){function L(U,E,T,e){var t=-1,l=U==null?0:U.length;for(e&&l&&(T=U[++t]);++t<l;)T=E(T,U[t],t,U);return T}Se.exports=L},b2z7:function(Se,ft){var L=/\w*$/;function U(E){var T=new E.constructor(E.source,L.exec(E));return T.lastIndex=E.lastIndex,T}Se.exports=U},b48C:function(Se,ft){function L(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(U){return!1}}Se.exports=L,Se.exports.default=Se.exports,Se.exports.__esModule=!0},bB6j:function(Se,ft,L){"use strict";L.d(ft,"a",function(){return U});var U={IEventEmitter:Symbol.for("IEventEmitter"),ISceneService:Symbol.for("ISceneService"),IGlobalConfigService:Symbol.for("IGlobalConfigService"),ICameraService:Symbol.for("ICameraService"),ICoordinateSystemService:Symbol.for("ICoordinateSystemService"),ILayerService:Symbol.for("ILayerService"),ILayerMappingService:Symbol.for("ILayerMappingService"),ILayerStyleService:Symbol.for("ILayerStyleService"),ILogService:Symbol.for("ILogService"),IMapService:Symbol.for("IMapService"),IMarkerService:Symbol.for("IMarkerService"),IPopupService:Symbol.for("PopupService"),IFactoryMapService:Symbol.for("Factory<IMapService>"),IRendererService:Symbol.for("IRendererService"),IShaderModuleService:Symbol.for("IShaderModuleService"),IIconService:Symbol.for("IIconService"),IFontService:Symbol.for("IFontService"),IInteractionService:Symbol.for("IInteractionService"),IPickingService:Symbol.for("IPickingService"),IControlService:Symbol.for("IControlService"),IStyleAttributeService:Symbol.for("IStyleAttributeService"),ILayer:Symbol.for("ILayer"),ILayerPlugin:Symbol.for("ILayerPlugin"),INormalPass:Symbol.for("INormalPass"),IPostProcessor:Symbol.for("IPostProcessor"),IPostProcessingPass:Symbol.for("IPostProcessingPass"),IFactoryPostProcessingPass:Symbol.for("Factory<IPostProcessingPass>"),IFactoryNormalPass:Symbol.for("Factory<IFactoryNormalPass>"),IMultiPassRenderer:Symbol.for("IMultiPassRenderer"),SceneID:Symbol.for("SceneID"),MapConfig:Symbol.for("MapConfig")}},bE4E:function(Se,ft,L){Se.exports={"ant-divider":"ant-divider","ant-divider-vertical":"ant-divider-vertical","ant-divider-horizontal":"ant-divider-horizontal","ant-divider-with-text":"ant-divider-with-text","ant-divider-with-text-left":"ant-divider-with-text-left","ant-divider-with-text-right":"ant-divider-with-text-right","ant-divider-inner-text":"ant-divider-inner-text","ant-divider-dashed":"ant-divider-dashed","ant-divider-plain":"ant-divider-plain","ant-divider-rtl":"ant-divider-rtl"}},bPkA:function(Se,ft,L){"use strict";L.d(ft,"a",function(){return U});var U;(function(E){E.Normal="normal",E.PostProcessing="post-processing"})(U||(U={}))},bTtR:function(Se,ft){},bYl4:function(Se,ft){},bahg:function(Se,ft){function L(U){return U.split("")}Se.exports=L},bl9R:function(Se,ft,L){"use strict";L.r(ft),L.d(ft,"create",function(){return E}),L.d(ft,"clone",function(){return T}),L.d(ft,"fromValues",function(){return e}),L.d(ft,"copy",function(){return t}),L.d(ft,"set",function(){return l}),L.d(ft,"add",function(){return s}),L.d(ft,"subtract",function(){return c}),L.d(ft,"multiply",function(){return r}),L.d(ft,"divide",function(){return h}),L.d(ft,"ceil",function(){return n}),L.d(ft,"floor",function(){return i}),L.d(ft,"min",function(){return a}),L.d(ft,"max",function(){return o}),L.d(ft,"round",function(){return u}),L.d(ft,"scale",function(){return f}),L.d(ft,"scaleAndAdd",function(){return v}),L.d(ft,"distance",function(){return b}),L.d(ft,"squaredDistance",function(){return y}),L.d(ft,"length",function(){return g}),L.d(ft,"squaredLength",function(){return _}),L.d(ft,"negate",function(){return M}),L.d(ft,"inverse",function(){return x}),L.d(ft,"normalize",function(){return m}),L.d(ft,"dot",function(){return S}),L.d(ft,"cross",function(){return P}),L.d(ft,"lerp",function(){return A}),L.d(ft,"random",function(){return O}),L.d(ft,"transformMat4",function(){return R}),L.d(ft,"transformQuat",function(){return W}),L.d(ft,"zero",function(){return F}),L.d(ft,"str",function(){return Z}),L.d(ft,"exactEquals",function(){return V}),L.d(ft,"equals",function(){return k}),L.d(ft,"sub",function(){return Y}),L.d(ft,"mul",function(){return K}),L.d(ft,"div",function(){return it}),L.d(ft,"dist",function(){return ct}),L.d(ft,"sqrDist",function(){return ht}),L.d(ft,"len",function(){return ut}),L.d(ft,"sqrLen",function(){return It}),L.d(ft,"forEach",function(){return Nt});var U=L("yU0y");function E(){var Lt=new U.a(4);return U.a!=Float32Array&&(Lt[0]=0,Lt[1]=0,Lt[2]=0,Lt[3]=0),Lt}function T(Lt){var _t=new U.a(4);return _t[0]=Lt[0],_t[1]=Lt[1],_t[2]=Lt[2],_t[3]=Lt[3],_t}function e(Lt,_t,mt,At){var rt=new U.a(4);return rt[0]=Lt,rt[1]=_t,rt[2]=mt,rt[3]=At,rt}function t(Lt,_t){return Lt[0]=_t[0],Lt[1]=_t[1],Lt[2]=_t[2],Lt[3]=_t[3],Lt}function l(Lt,_t,mt,At,rt){return Lt[0]=_t,Lt[1]=mt,Lt[2]=At,Lt[3]=rt,Lt}function s(Lt,_t,mt){return Lt[0]=_t[0]+mt[0],Lt[1]=_t[1]+mt[1],Lt[2]=_t[2]+mt[2],Lt[3]=_t[3]+mt[3],Lt}function c(Lt,_t,mt){return Lt[0]=_t[0]-mt[0],Lt[1]=_t[1]-mt[1],Lt[2]=_t[2]-mt[2],Lt[3]=_t[3]-mt[3],Lt}function r(Lt,_t,mt){return Lt[0]=_t[0]*mt[0],Lt[1]=_t[1]*mt[1],Lt[2]=_t[2]*mt[2],Lt[3]=_t[3]*mt[3],Lt}function h(Lt,_t,mt){return Lt[0]=_t[0]/mt[0],Lt[1]=_t[1]/mt[1],Lt[2]=_t[2]/mt[2],Lt[3]=_t[3]/mt[3],Lt}function n(Lt,_t){return Lt[0]=Math.ceil(_t[0]),Lt[1]=Math.ceil(_t[1]),Lt[2]=Math.ceil(_t[2]),Lt[3]=Math.ceil(_t[3]),Lt}function i(Lt,_t){return Lt[0]=Math.floor(_t[0]),Lt[1]=Math.floor(_t[1]),Lt[2]=Math.floor(_t[2]),Lt[3]=Math.floor(_t[3]),Lt}function a(Lt,_t,mt){return Lt[0]=Math.min(_t[0],mt[0]),Lt[1]=Math.min(_t[1],mt[1]),Lt[2]=Math.min(_t[2],mt[2]),Lt[3]=Math.min(_t[3],mt[3]),Lt}function o(Lt,_t,mt){return Lt[0]=Math.max(_t[0],mt[0]),Lt[1]=Math.max(_t[1],mt[1]),Lt[2]=Math.max(_t[2],mt[2]),Lt[3]=Math.max(_t[3],mt[3]),Lt}function u(Lt,_t){return Lt[0]=Math.round(_t[0]),Lt[1]=Math.round(_t[1]),Lt[2]=Math.round(_t[2]),Lt[3]=Math.round(_t[3]),Lt}function f(Lt,_t,mt){return Lt[0]=_t[0]*mt,Lt[1]=_t[1]*mt,Lt[2]=_t[2]*mt,Lt[3]=_t[3]*mt,Lt}function v(Lt,_t,mt,At){return Lt[0]=_t[0]+mt[0]*At,Lt[1]=_t[1]+mt[1]*At,Lt[2]=_t[2]+mt[2]*At,Lt[3]=_t[3]+mt[3]*At,Lt}function b(Lt,_t){var mt=_t[0]-Lt[0],At=_t[1]-Lt[1],rt=_t[2]-Lt[2],Mt=_t[3]-Lt[3];return Math.hypot(mt,At,rt,Mt)}function y(Lt,_t){var mt=_t[0]-Lt[0],At=_t[1]-Lt[1],rt=_t[2]-Lt[2],Mt=_t[3]-Lt[3];return mt*mt+At*At+rt*rt+Mt*Mt}function g(Lt){var _t=Lt[0],mt=Lt[1],At=Lt[2],rt=Lt[3];return Math.hypot(_t,mt,At,rt)}function _(Lt){var _t=Lt[0],mt=Lt[1],At=Lt[2],rt=Lt[3];return _t*_t+mt*mt+At*At+rt*rt}function M(Lt,_t){return Lt[0]=-_t[0],Lt[1]=-_t[1],Lt[2]=-_t[2],Lt[3]=-_t[3],Lt}function x(Lt,_t){return Lt[0]=1/_t[0],Lt[1]=1/_t[1],Lt[2]=1/_t[2],Lt[3]=1/_t[3],Lt}function m(Lt,_t){var mt=_t[0],At=_t[1],rt=_t[2],Mt=_t[3],z=mt*mt+At*At+rt*rt+Mt*Mt;return z>0&&(z=1/Math.sqrt(z)),Lt[0]=mt*z,Lt[1]=At*z,Lt[2]=rt*z,Lt[3]=Mt*z,Lt}function S(Lt,_t){return Lt[0]*_t[0]+Lt[1]*_t[1]+Lt[2]*_t[2]+Lt[3]*_t[3]}function P(Lt,_t,mt,At){var rt=mt[0]*At[1]-mt[1]*At[0],Mt=mt[0]*At[2]-mt[2]*At[0],z=mt[0]*At[3]-mt[3]*At[0],$=mt[1]*At[2]-mt[2]*At[1],dt=mt[1]*At[3]-mt[3]*At[1],et=mt[2]*At[3]-mt[3]*At[2],ot=_t[0],pt=_t[1],H=_t[2],nt=_t[3];return Lt[0]=pt*et-H*dt+nt*$,Lt[1]=-(ot*et)+H*z-nt*Mt,Lt[2]=ot*dt-pt*z+nt*rt,Lt[3]=-(ot*$)+pt*Mt-H*rt,Lt}function A(Lt,_t,mt,At){var rt=_t[0],Mt=_t[1],z=_t[2],$=_t[3];return Lt[0]=rt+At*(mt[0]-rt),Lt[1]=Mt+At*(mt[1]-Mt),Lt[2]=z+At*(mt[2]-z),Lt[3]=$+At*(mt[3]-$),Lt}function O(Lt,_t){_t=_t||1;var mt,At,rt,Mt,z,$;do mt=U.c()*2-1,At=U.c()*2-1,z=mt*mt+At*At;while(z>=1);do rt=U.c()*2-1,Mt=U.c()*2-1,$=rt*rt+Mt*Mt;while($>=1);var dt=Math.sqrt((1-z)/$);return Lt[0]=_t*mt,Lt[1]=_t*At,Lt[2]=_t*rt*dt,Lt[3]=_t*Mt*dt,Lt}function R(Lt,_t,mt){var At=_t[0],rt=_t[1],Mt=_t[2],z=_t[3];return Lt[0]=mt[0]*At+mt[4]*rt+mt[8]*Mt+mt[12]*z,Lt[1]=mt[1]*At+mt[5]*rt+mt[9]*Mt+mt[13]*z,Lt[2]=mt[2]*At+mt[6]*rt+mt[10]*Mt+mt[14]*z,Lt[3]=mt[3]*At+mt[7]*rt+mt[11]*Mt+mt[15]*z,Lt}function W(Lt,_t,mt){var At=_t[0],rt=_t[1],Mt=_t[2],z=mt[0],$=mt[1],dt=mt[2],et=mt[3],ot=et*At+$*Mt-dt*rt,pt=et*rt+dt*At-z*Mt,H=et*Mt+z*rt-$*At,nt=-z*At-$*rt-dt*Mt;return Lt[0]=ot*et+nt*-z+pt*-dt-H*-$,Lt[1]=pt*et+nt*-$+H*-z-ot*-dt,Lt[2]=H*et+nt*-dt+ot*-$-pt*-z,Lt[3]=_t[3],Lt}function F(Lt){return Lt[0]=0,Lt[1]=0,Lt[2]=0,Lt[3]=0,Lt}function Z(Lt){return"vec4("+Lt[0]+", "+Lt[1]+", "+Lt[2]+", "+Lt[3]+")"}function V(Lt,_t){return Lt[0]===_t[0]&&Lt[1]===_t[1]&&Lt[2]===_t[2]&&Lt[3]===_t[3]}function k(Lt,_t){var mt=Lt[0],At=Lt[1],rt=Lt[2],Mt=Lt[3],z=_t[0],$=_t[1],dt=_t[2],et=_t[3];return Math.abs(mt-z)<=U.b*Math.max(1,Math.abs(mt),Math.abs(z))&&Math.abs(At-$)<=U.b*Math.max(1,Math.abs(At),Math.abs($))&&Math.abs(rt-dt)<=U.b*Math.max(1,Math.abs(rt),Math.abs(dt))&&Math.abs(Mt-et)<=U.b*Math.max(1,Math.abs(Mt),Math.abs(et))}var Y=c,K=r,it=h,ct=b,ht=y,ut=g,It=_,Nt=function(){var Lt=E();return function(_t,mt,At,rt,Mt,z){var $,dt;for(mt||(mt=4),At||(At=0),rt?dt=Math.min(rt*mt+At,_t.length):dt=_t.length,$=At;$<dt;$+=mt)Lt[0]=_t[$],Lt[1]=_t[$+1],Lt[2]=_t[$+2],Lt[3]=_t[$+3],Mt(Lt,Lt,z),_t[$]=Lt[0],_t[$+1]=Lt[1],_t[$+2]=Lt[2],_t[$+3]=Lt[3];return _t}}()},bx4M:function(Se,ft,L){"use strict";var U=L("rePB"),E=L("wx14"),T=L("q1tI"),e=L("TSYQ"),t=L.n(e),l=L("bT9E"),s=L("H84U"),c=function(M,x){var m={};for(var S in M)Object.prototype.hasOwnProperty.call(M,S)&&x.indexOf(S)<0&&(m[S]=M[S]);if(M!=null&&typeof Object.getOwnPropertySymbols=="function")for(var P=0,S=Object.getOwnPropertySymbols(M);P<S.length;P++)x.indexOf(S[P])<0&&Object.prototype.propertyIsEnumerable.call(M,S[P])&&(m[S[P]]=M[S[P]]);return m},r=function(x){var m=x.prefixCls,S=x.className,P=x.hoverable,A=P===void 0?!0:P,O=c(x,["prefixCls","className","hoverable"]);return T.createElement(s.a,null,function(R){var W=R.getPrefixCls,F=W("card",m),Z=t()("".concat(F,"-grid"),S,Object(U.a)({},"".concat(F,"-grid-hoverable"),A));return T.createElement("div",Object(E.a)({},O,{className:Z}))})},h=r,n=function(M,x){var m={};for(var S in M)Object.prototype.hasOwnProperty.call(M,S)&&x.indexOf(S)<0&&(m[S]=M[S]);if(M!=null&&typeof Object.getOwnPropertySymbols=="function")for(var P=0,S=Object.getOwnPropertySymbols(M);P<S.length;P++)x.indexOf(S[P])<0&&Object.prototype.propertyIsEnumerable.call(M,S[P])&&(m[S[P]]=M[S[P]]);return m},i=function(x){return T.createElement(s.a,null,function(m){var S=m.getPrefixCls,P=x.prefixCls,A=x.className,O=x.avatar,R=x.title,W=x.description,F=n(x,["prefixCls","className","avatar","title","description"]),Z=S("card",P),V=t()("".concat(Z,"-meta"),A),k=O?T.createElement("div",{className:"".concat(Z,"-meta-avatar")},O):null,Y=R?T.createElement("div",{className:"".concat(Z,"-meta-title")},R):null,K=W?T.createElement("div",{className:"".concat(Z,"-meta-description")},W):null,it=Y||K?T.createElement("div",{className:"".concat(Z,"-meta-detail")},Y,K):null;return T.createElement("div",Object(E.a)({},F,{className:V}),k,it)})},a=i,o=L("ZTPi"),u=L("BMrR"),f=L("kPKH"),v=L("3Nzz"),b=function(M,x){var m={};for(var S in M)Object.prototype.hasOwnProperty.call(M,S)&&x.indexOf(S)<0&&(m[S]=M[S]);if(M!=null&&typeof Object.getOwnPropertySymbols=="function")for(var P=0,S=Object.getOwnPropertySymbols(M);P<S.length;P++)x.indexOf(S[P])<0&&Object.prototype.propertyIsEnumerable.call(M,S[P])&&(m[S[P]]=M[S[P]]);return m};function y(M){var x=M.map(function(m,S){return T.createElement("li",{style:{width:"".concat(100/M.length,"%")},key:"action-".concat(S)},T.createElement("span",null,m))});return x}var g=function(x){var m,S,P=T.useContext(s.b),A=P.getPrefixCls,O=P.direction,R=T.useContext(v.b),W=function(Xe){var _n;(_n=x.onTabChange)===null||_n===void 0||_n.call(x,Xe)},F=function(){var Xe;return T.Children.forEach(x.children,function(_n){_n&&_n.type&&_n.type===h&&(Xe=!0)}),Xe},Z=x.prefixCls,V=x.className,k=x.extra,Y=x.headStyle,K=Y===void 0?{}:Y,it=x.bodyStyle,ct=it===void 0?{}:it,ht=x.title,ut=x.loading,It=x.bordered,Nt=It===void 0?!0:It,Lt=x.size,_t=x.type,mt=x.cover,At=x.actions,rt=x.tabList,Mt=x.children,z=x.activeTabKey,$=x.defaultActiveTabKey,dt=x.tabBarExtraContent,et=x.hoverable,ot=x.tabProps,pt=ot===void 0?{}:ot,H=b(x,["prefixCls","className","extra","headStyle","bodyStyle","title","loading","bordered","size","type","cover","actions","tabList","children","activeTabKey","defaultActiveTabKey","tabBarExtraContent","hoverable","tabProps"]),nt=A("card",Z),at=ct.padding===0||ct.padding==="0px"?{padding:24}:void 0,q=T.createElement("div",{className:"".concat(nt,"-loading-block")}),Et=T.createElement("div",{className:"".concat(nt,"-loading-content"),style:at},T.createElement(u.a,{gutter:8},T.createElement(f.a,{span:22},q)),T.createElement(u.a,{gutter:8},T.createElement(f.a,{span:8},q),T.createElement(f.a,{span:15},q)),T.createElement(u.a,{gutter:8},T.createElement(f.a,{span:6},q),T.createElement(f.a,{span:18},q)),T.createElement(u.a,{gutter:8},T.createElement(f.a,{span:13},q),T.createElement(f.a,{span:9},q)),T.createElement(u.a,{gutter:8},T.createElement(f.a,{span:4},q),T.createElement(f.a,{span:3},q),T.createElement(f.a,{span:16},q))),vt=z!==void 0,Ft=Object(E.a)(Object(E.a)({},pt),(m={},Object(U.a)(m,vt?"activeKey":"defaultActiveKey",vt?z:$),Object(U.a)(m,"tabBarExtraContent",dt),m)),Qt,ee=rt&&rt.length?T.createElement(o.a,Object(E.a)({size:"large"},Ft,{className:"".concat(nt,"-head-tabs"),onChange:W}),rt.map(function(ze){return T.createElement(o.a.TabPane,{tab:ze.tab,disabled:ze.disabled,key:ze.key})})):null;(ht||k||ee)&&(Qt=T.createElement("div",{className:"".concat(nt,"-head"),style:K},T.createElement("div",{className:"".concat(nt,"-head-wrapper")},ht&&T.createElement("div",{className:"".concat(nt,"-head-title")},ht),k&&T.createElement("div",{className:"".concat(nt,"-extra")},k)),ee));var Gt=mt?T.createElement("div",{className:"".concat(nt,"-cover")},mt):null,$t=T.createElement("div",{className:"".concat(nt,"-body"),style:ct},ut?Et:Mt),Pe=At&&At.length?T.createElement("ul",{className:"".concat(nt,"-actions")},y(At)):null,me=Object(l.a)(H,["onTabChange"]),le=Lt||R,be=t()(nt,(S={},Object(U.a)(S,"".concat(nt,"-loading"),ut),Object(U.a)(S,"".concat(nt,"-bordered"),Nt),Object(U.a)(S,"".concat(nt,"-hoverable"),et),Object(U.a)(S,"".concat(nt,"-contain-grid"),F()),Object(U.a)(S,"".concat(nt,"-contain-tabs"),rt&&rt.length),Object(U.a)(S,"".concat(nt,"-").concat(le),le),Object(U.a)(S,"".concat(nt,"-type-").concat(_t),!!_t),Object(U.a)(S,"".concat(nt,"-rtl"),O==="rtl"),S),V);return T.createElement("div",Object(E.a)({},me,{className:be}),Qt,Gt,$t,Pe)};g.Grid=h,g.Meta=a;var _=ft.a=g},bzyH:function(Se,ft){},cQSq:function(Se,ft,L){(function(E,T){Se.exports=T()})(window,function(){return function(U){var E={};function T(e){if(E[e])return E[e].exports;var t=E[e]={i:e,l:!1,exports:{}};return U[e].call(t.exports,t,t.exports,T),t.l=!0,t.exports}return T.m=U,T.c=E,T.d=function(e,t,l){T.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:l})},T.r=function(e){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},T.t=function(e,t){if(t&1&&(e=T(e)),t&8||t&4&&typeof e=="object"&&e&&e.__esModule)return e;var l=Object.create(null);if(T.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),t&2&&typeof e!="string")for(var s in e)T.d(l,s,function(c){return e[c]}.bind(null,s));return l},T.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return T.d(t,"a",t),t},T.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},T.p="",T(T.s="./src/index.ts")}({"./node_modules/_@antv_hierarchy@0.6.6@@antv/hierarchy/build/hierarchy.js":function(E,T,e){(function(l,s){E.exports=s()})(typeof self!="undefined"?self:this,function(){return function(t){var l={};function s(c){if(l[c])return l[c].exports;var r=l[c]={i:c,l:!1,exports:{}};return t[c].call(r.exports,r,r.exports,s),r.l=!0,r.exports}return s.m=t,s.c=l,s.d=function(c,r,h){s.o(c,r)||Object.defineProperty(c,r,{configurable:!1,enumerable:!0,get:h})},s.n=function(c){var r=c&&c.__esModule?function(){return c.default}:function(){return c};return s.d(r,"a",r),r},s.o=function(c,r){return Object.prototype.hasOwnProperty.call(c,r)},s.p="",s(s.s=31)}([function(t,l,s){"use strict";var c=s(4);l.a=function(r){return Array.isArray?Array.isArray(r):Object(c.a)(r,"Array")}},function(t,l,s){"use strict";var c=function(h){return h!==null&&typeof h!="function"&&isFinite(h.length)};l.a=c},function(t,l,s){"use strict";var c=s(0),r=s(13);function h(n,i){if(!!n){var a;if(Object(c.a)(n))for(var o=0,u=n.length;o<u&&(a=i(n[o],o),a!==!1);o++);else if(Object(r.a)(n)){for(var f in n)if(n.hasOwnProperty(f)&&(a=i(n[f],f),a===!1))break}}}l.a=h},function(t,l,s){"use strict";var c=s(4);l.a=function(r){return Object(c.a)(r,"Function")}},function(t,l,s){"use strict";var c={}.toString,r=function(n,i){return c.call(n)==="[object "+i+"]"};l.a=r},function(t,l,s){"use strict";var c=s(4),r=function(n){return Object(c.a)(n,"Number")};l.a=r},function(t,l,s){"use strict";var c=function(h){return h==null};l.a=c},function(t,l,s){var c=s(33),r=c.mix;t.exports={assign:r}},function(t,l,s){"use strict";var c=s(4);l.a=function(r){return Object(c.a)(r,"String")}},function(t,l,s){"use strict";var c=s(15),r=s(4),h=function(i){if(!Object(c.a)(i)||!Object(r.a)(i,"Object"))return!1;if(Object.getPrototypeOf(i)===null)return!0;for(var a=i;Object.getPrototypeOf(a)!==null;)a=Object.getPrototypeOf(a);return Object.getPrototypeOf(i)===a};l.a=h},function(t,l,s){"use strict";var c=s(6);l.a=function(r){return Object(c.a)(r)?"":r.toString()}},function(t,l,s){var c=s(18),r=function(){function h(i,a){a===void 0&&(a={});var o=this;o.options=a,o.rootNode=c(i,a)}var n=h.prototype;return n.execute=function(){throw new Error("please override this method")},h}();t.exports=r},function(t,l,s){"use strict";var c=s(1),r=function(n,i){return Object(c.a)(n)?n.indexOf(i)>-1:!1};l.a=r},function(t,l,s){"use strict";l.a=function(c){var r=typeof c;return c!==null&&r==="object"||r==="function"}},function(t,l,s){"use strict";var c=s(2),r=s(1),h=function(i,a){if(!Object(r.a)(i))return i;var o=[];return Object(c.a)(i,function(u,f){a(u,f)&&o.push(u)}),o};l.a=h},function(t,l,s){"use strict";var c=function(h){return typeof h=="object"&&h!==null};l.a=c},function(t,l,s){"use strict";l.a=r;function c(h,n){for(var i in n)n.hasOwnProperty(i)&&i!=="constructor"&&n[i]!==void 0&&(h[i]=n[i])}function r(h,n,i,a){return n&&c(h,n),i&&c(h,i),a&&c(h,a),h}},function(t,l,s){var c=s(30),r=["LR","RL","TB","BT","H","V"],h=["LR","RL","H"],n=function(o){return h.indexOf(o)>-1},i=r[0];t.exports=function(a,o,u){var f=o.direction||i;if(o.isHorizontal=n(f),f&&r.indexOf(f)===-1)throw new TypeError("Invalid direction: "+f);if(f===r[0])u(a,o);else if(f===r[1])u(a,o),a.right2left();else if(f===r[2])u(a,o);else if(f===r[3])u(a,o),a.bottom2top();else if(f===r[4]||f===r[5]){var v=c(a,o),b=v.left,y=v.right;u(b,o),u(y,o),o.isHorizontal?b.right2left():b.bottom2top(),y.translate(b.x-y.x,b.y-y.y),a.x=b.x,a.y=y.y;var g=a.getBoundingBox();o.isHorizontal?g.top<0&&a.translate(0,-g.top):g.left<0&&a.translate(-g.left,0)}var _=o.fixedRoot;return _===void 0&&(_=!0),_&&a.translate(-(a.x+a.width/2+a.hgap),-(a.y+a.height/2+a.vgap)),a}},function(t,l,s){var c=s(7),r=18,h=r*2,n=r,i={getId:function(f){return f.id||f.name},getHGap:function(f){return f.hgap||n},getVGap:function(f){return f.vgap||n},getChildren:function(f){return f.children},getHeight:function(f){return f.height||h},getWidth:function(f){var v=f.label||" ";return f.width||v.split("").length*r}};function a(u,f){var v=this;if(v.vgap=v.hgap=0,u instanceof a)return u;v.data=u;var b=f.getHGap(u),y=f.getVGap(u);return v.width=f.getWidth(u),v.height=f.getHeight(u),v.id=f.getId(u),v.x=v.y=0,v.depth=0,v.children||(v.children=[]),v.addGap(b,y),v}c.assign(a.prototype,{isRoot:function(){return this.depth===0},isLeaf:function(){return this.children.length===0},addGap:function(f,v){var b=this;b.hgap+=f,b.vgap+=v,b.width+=2*f,b.height+=2*v},eachNode:function(f){for(var v=this,b=[v],y;y=b.shift();)f(y),b=y.children.concat(b)},DFTraverse:function(f){this.eachNode(f)},BFTraverse:function(f){for(var v=this,b=[v],y;y=b.shift();)f(y),b=b.concat(y.children)},getBoundingBox:function(){var f={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(v){f.left=Math.min(f.left,v.x),f.top=Math.min(f.top,v.y),f.width=Math.max(f.width,v.x+v.width),f.height=Math.max(f.height,v.y+v.height)}),f},translate:function(f,v){f===void 0&&(f=0),v===void 0&&(v=0),this.eachNode(function(b){b.x+=f,b.y+=v})},right2left:function(){var f=this,v=f.getBoundingBox();f.eachNode(function(b){b.x=b.x-(b.x-v.left)*2-b.width}),f.translate(v.width,0)},bottom2top:function(){var f=this,v=f.getBoundingBox();f.eachNode(function(b){b.y=b.y-(b.y-v.top)*2-b.height}),f.translate(0,v.height)}});function o(u,f,v){f===void 0&&(f={}),f=c.assign({},i,f);var b=new a(u,f),y=[b],g;if(!v&&!u.collapsed){for(;g=y.shift();)if(!g.data.collapsed){var _=f.getChildren(g.data),M=_?_.length:0;if(g.children=new Array(M),_&&M)for(var x=0;x<M;x++){var m=new a(_[x],f);g.children[x]=m,y.push(m),m.parent=g,m.depth=g.depth+1}}}return b}t.exports=o},function(t,l,s){"use strict";var c=s(6),r=s(20);function h(n,i){var a=Object(r.a)(i),o=a.length;if(Object(c.a)(n))return!o;for(var u=0;u<o;u+=1){var f=a[u];if(i[f]!==n[f]||!(f in n))return!1}return!0}l.a=h},function(t,l,s){"use strict";var c=s(2),r=s(3),h=Object.keys?function(n){return Object.keys(n)}:function(n){var i=[];return Object(c.a)(n,function(a,o){Object(r.a)(n)&&o==="prototype"||i.push(o)}),i};l.a=h},function(t,l,s){"use strict";var c=s(1),r=Array.prototype.splice,h=function(i,a){if(!Object(c.a)(i))return[];for(var o=i?a.length:0,u=o-1;o--;){var f=void 0,v=a[o];(o===u||v!==f)&&(f=v,r.call(i,v,1))}return i};l.a=h},function(t,l,s){"use strict";var c=s(12),r=s(2),h=function(i){var a=[];return Object(r.a)(i,function(o){Object(c.a)(a,o)||a.push(o)}),a};l.a=h},function(t,l,s){"use strict";var c=s(0),r=s(3),h=s(24),n=function(a,o){if(!o)return{0:a};if(!Object(r.a)(o)){var u=Object(c.a)(o)?o:o.replace(/\s+/g,"").split("*");o=function(b){for(var y="_",g=0,_=u.length;g<_;g++)y+=b[u[g]]&&b[u[g]].toString();return y}}var f=Object(h.a)(a,o);return f};l.a=n},function(t,l,s){"use strict";var c=s(2),r=s(0),h=s(3),n=Object.prototype.hasOwnProperty;function i(a,o){if(!o||!Object(r.a)(a))return{};var u={},f=Object(h.a)(o)?o:function(b){return b[o]},v;return Object(c.a)(a,function(b){v=f(b),n.call(u,v)?u[v].push(b):u[v]=[b]}),u}l.a=i},function(t,l,s){"use strict";l.a=function(c,r){return c.hasOwnProperty(r)}},function(t,l,s){"use strict";var c=s(2),r=s(3),h=Object.values?function(n){return Object.values(n)}:function(n){var i=[];return Object(c.a)(n,function(a,o){Object(r.a)(n)&&o==="prototype"||i.push(a)}),i};l.a=h},function(t,l,s){"use strict";var c={}.toString,r=function(n){return c.call(n).replace(/^\[object /,"").replace(/]$/,"")};l.a=r},function(t,l,s){"use strict";var c=Object.prototype,r=function(n){var i=n&&n.constructor,a=typeof i=="function"&&i.prototype||c;return n===a};l.a=r},function(t,l,s){"use strict";var c=s(15),r=s(1),h=s(8),n=function i(a,o){if(a===o)return!0;if(!a||!o||Object(h.a)(a)||Object(h.a)(o))return!1;if(Object(r.a)(a)||Object(r.a)(o)){if(a.length!==o.length)return!1;for(var u=!0,f=0;f<a.length&&(u=i(a[f],o[f]),!!u);f++);return u}if(Object(c.a)(a)||Object(c.a)(o)){var v=Object.keys(a),b=Object.keys(o);if(v.length!==b.length)return!1;for(var u=!0,f=0;f<v.length&&(u=i(a[v[f]],o[v[f]]),!!u);f++);return u}return!1};l.a=n},function(t,l,s){var c=s(18);t.exports=function(r,h){for(var n=c(r.data,h,!0),i=c(r.data,h,!0),a=r.children.length,o=Math.round(a/2),u=h.getSide||function(y,g){return g<o?"right":"left"},f=0;f<a;f++){var v=r.children[f],b=u(v,f);b==="right"?i.children.push(v):n.children.push(v)}return n.eachNode(function(y){y.isRoot()||(y.side="left")}),i.eachNode(function(y){y.isRoot()||(y.side="right")}),{left:n,right:i}}},function(t,l,s){var c={compactBox:s(32),dendrogram:s(114),indented:s(116),mindmap:s(118)};t.exports=c},function(t,l,s){function c(f,v){f.prototype=Object.create(v.prototype),f.prototype.constructor=f,f.__proto__=v}var r=s(11),h=s(113),n=s(17),i=s(7),a=function(f){c(v,f);function v(){return f.apply(this,arguments)||this}var b=v.prototype;return b.execute=function(){var g=this;return n(g.rootNode,g.options,h)},v}(r),o={};function u(f,v){return v=i.assign({},o,v),new a(f,v).execute()}t.exports=u},function(t,l,s){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var c=s(12);s.d(l,"contains",function(){return c.a}),s.d(l,"includes",function(){return c.a});var r=s(34);s.d(l,"difference",function(){return r.a});var h=s(35);s.d(l,"find",function(){return h.a});var n=s(36);s.d(l,"findIndex",function(){return n.a});var i=s(37);s.d(l,"firstValue",function(){return i.a});var a=s(38);s.d(l,"flatten",function(){return a.a});var o=s(39);s.d(l,"flattenDeep",function(){return o.a});var u=s(40);s.d(l,"getRange",function(){return u.a});var f=s(41);s.d(l,"pull",function(){return f.a});var v=s(21);s.d(l,"pullAt",function(){return v.a});var b=s(42);s.d(l,"reduce",function(){return b.a});var y=s(43);s.d(l,"remove",function(){return y.a});var g=s(44);s.d(l,"sortBy",function(){return g.a});var _=s(45);s.d(l,"union",function(){return _.a});var M=s(22);s.d(l,"uniq",function(){return M.a});var x=s(46);s.d(l,"valuesOfKey",function(){return x.a});var m=s(47);s.d(l,"head",function(){return m.a});var S=s(48);s.d(l,"last",function(){return S.a});var P=s(49);s.d(l,"startsWith",function(){return P.a});var A=s(50);s.d(l,"endsWith",function(){return A.a});var O=s(14);s.d(l,"filter",function(){return O.a});var R=s(51);s.d(l,"every",function(){return R.a});var W=s(52);s.d(l,"some",function(){return W.a});var F=s(53);s.d(l,"group",function(){return F.a});var Z=s(24);s.d(l,"groupBy",function(){return Z.a});var V=s(23);s.d(l,"groupToMap",function(){return V.a});var k=s(54);s.d(l,"getWrapBehavior",function(){return k.a});var Y=s(55);s.d(l,"wrapBehavior",function(){return Y.a});var K=s(56);s.d(l,"number2color",function(){return K.a});var it=s(57);s.d(l,"parseRadius",function(){return it.a});var ct=s(58);s.d(l,"clamp",function(){return ct.a});var ht=s(59);s.d(l,"fixedBase",function(){return ht.a});var ut=s(60);s.d(l,"isDecimal",function(){return ut.a});var It=s(61);s.d(l,"isEven",function(){return It.a});var Nt=s(62);s.d(l,"isInteger",function(){return Nt.a});var Lt=s(63);s.d(l,"isNegative",function(){return Lt.a});var _t=s(64);s.d(l,"isNumberEqual",function(){return _t.a});var mt=s(65);s.d(l,"isOdd",function(){return mt.a});var At=s(66);s.d(l,"isPositive",function(){return At.a});var rt=s(67);s.d(l,"maxBy",function(){return rt.a});var Mt=s(68);s.d(l,"minBy",function(){return Mt.a});var z=s(69);s.d(l,"mod",function(){return z.a});var $=s(70);s.d(l,"toDegree",function(){return $.a});var dt=s(71);s.d(l,"toInteger",function(){return dt.a});var et=s(72);s.d(l,"toRadian",function(){return et.a});var ot=s(73);s.d(l,"forIn",function(){return ot.a});var pt=s(25);s.d(l,"has",function(){return pt.a});var H=s(74);s.d(l,"hasKey",function(){return H.a});var nt=s(75);s.d(l,"hasValue",function(){return nt.a});var at=s(20);s.d(l,"keys",function(){return at.a});var q=s(19);s.d(l,"isMatch",function(){return q.a});var Et=s(26);s.d(l,"values",function(){return Et.a});var vt=s(76);s.d(l,"lowerCase",function(){return vt.a});var Ft=s(77);s.d(l,"lowerFirst",function(){return Ft.a});var Qt=s(78);s.d(l,"substitute",function(){return Qt.a});var ee=s(79);s.d(l,"upperCase",function(){return ee.a});var Gt=s(80);s.d(l,"upperFirst",function(){return Gt.a});var $t=s(27);s.d(l,"getType",function(){return $t.a});var Pe=s(81);s.d(l,"isArguments",function(){return Pe.a});var me=s(0);s.d(l,"isArray",function(){return me.a});var le=s(1);s.d(l,"isArrayLike",function(){return le.a});var be=s(82);s.d(l,"isBoolean",function(){return be.a});var ze=s(83);s.d(l,"isDate",function(){return ze.a});var Xe=s(84);s.d(l,"isError",function(){return Xe.a});var _n=s(3);s.d(l,"isFunction",function(){return _n.a});var Kn=s(85);s.d(l,"isFinite",function(){return Kn.a});var Hn=s(6);s.d(l,"isNil",function(){return Hn.a});var nn=s(86);s.d(l,"isNull",function(){return nn.a});var en=s(5);s.d(l,"isNumber",function(){return en.a});var An=s(13);s.d(l,"isObject",function(){return An.a});var Nn=s(15);s.d(l,"isObjectLike",function(){return Nn.a});var hr=s(9);s.d(l,"isPlainObject",function(){return hr.a});var fi=s(28);s.d(l,"isPrototype",function(){return fi.a});var Oe=s(87);s.d(l,"isRegExp",function(){return Oe.a});var Ae=s(8);s.d(l,"isString",function(){return Ae.a});var Jt=s(4);s.d(l,"isType",function(){return Jt.a});var ve=s(88);s.d(l,"isUndefined",function(){return ve.a});var Vt=s(89);s.d(l,"isElement",function(){return Vt.a});var ie=s(90);s.d(l,"requestAnimationFrame",function(){return ie.a});var Ce=s(91);s.d(l,"clearAnimationFrame",function(){return Ce.a});var ue=s(92);s.d(l,"augment",function(){return ue.a});var xe=s(93);s.d(l,"clone",function(){return xe.a});var $e=s(94);s.d(l,"debounce",function(){return $e.a});var Fn=s(95);s.d(l,"memoize",function(){return Fn.a});var rr=s(96);s.d(l,"deepMix",function(){return rr.a});var En=s(2);s.d(l,"each",function(){return En.a});var Pn=s(97);s.d(l,"extend",function(){return Pn.a});var Er=s(98);s.d(l,"indexOf",function(){return Er.a});var Pr=s(99);s.d(l,"isEmpty",function(){return Pr.a});var ln=s(29);s.d(l,"isEqual",function(){return ln.a});var Cr=s(100);s.d(l,"isEqualWith",function(){return Cr.a});var Ar=s(101);s.d(l,"map",function(){return Ar.a});var je=s(102);s.d(l,"mapValues",function(){return je.a});var We=s(16);s.d(l,"mix",function(){return We.a}),s.d(l,"assign",function(){return We.a});var Ye=s(103);s.d(l,"get",function(){return Ye.a});var fn=s(104);s.d(l,"set",function(){return fn.a});var mn=s(105);s.d(l,"pick",function(){return mn.a});var jn=s(106);s.d(l,"throttle",function(){return jn.a});var bn=s(107);s.d(l,"toArray",function(){return bn.a});var Ln=s(10);s.d(l,"toString",function(){return Ln.a});var nr=s(108);s.d(l,"uniqueId",function(){return nr.a});var Yn=s(109);s.d(l,"noop",function(){return Yn.a});var Mn=s(110);s.d(l,"identity",function(){return Mn.a});var Rr=s(111);s.d(l,"size",function(){return Rr.a});var pr=s(112);s.d(l,"Cache",function(){return pr.a})},function(t,l,s){"use strict";var c=s(14),r=s(12),h=function(i,a){return a===void 0&&(a=[]),Object(c.a)(i,function(o){return!Object(r.a)(a,o)})};l.a=h},function(t,l,s){"use strict";var c=s(3),r=s(19),h=s(0),n=s(9);function i(a,o){if(!Object(h.a)(a))return null;var u;if(Object(c.a)(o)&&(u=o),Object(n.a)(o)&&(u=function(b){return Object(r.a)(b,o)}),u){for(var f=0;f<a.length;f+=1)if(u(a[f]))return a[f]}return null}l.a=i},function(t,l,s){"use strict";function c(r,h,n){n===void 0&&(n=0);for(var i=n;i<r.length;i++)if(h(r[i],i))return i;return-1}l.a=c},function(t,l,s){"use strict";var c=s(6),r=s(0),h=function(i,a){for(var o=null,u=0;u<i.length;u++){var f=i[u],v=f[a];if(!Object(c.a)(v)){Object(r.a)(v)?o=v[0]:o=v;break}}return o};l.a=h},function(t,l,s){"use strict";var c=s(0),r=function(n){if(!Object(c.a)(n))return[];for(var i=[],a=0;a<n.length;a++)i=i.concat(n[a]);return i};l.a=r},function(t,l,s){"use strict";var c=s(0),r=function h(n,i){if(i===void 0&&(i=[]),!Object(c.a)(n))i.push(n);else for(var a=0;a<n.length;a+=1)h(n[a],i);return i};l.a=r},function(t,l,s){"use strict";var c=s(0),r=s(14),h=function(i){if(i=Object(r.a)(i,function(v){return!isNaN(v)}),!i.length)return{min:0,max:0};if(Object(c.a)(i[0])){for(var a=[],o=0;o<i.length;o++)a=a.concat(i[o]);i=a}var u=Math.max.apply(null,i),f=Math.min.apply(null,i);return{min:f,max:u}};l.a=h},function(t,l,s){"use strict";var c=Array.prototype,r=c.splice,h=c.indexOf,n=function(a){for(var o=[],u=1;u<arguments.length;u++)o[u-1]=arguments[u];for(var f=0;f<o.length;f++)for(var v=o[f],b=-1;(b=h.call(a,v))>-1;)r.call(a,b,1);return a};l.a=n},function(t,l,s){"use strict";var c=s(2),r=s(0),h=s(9),n=function(a,o,u){if(!Object(r.a)(a)&&!Object(h.a)(a))return a;var f=u;return Object(c.a)(a,function(v,b){f=o(f,v,b)}),f};l.a=n},function(t,l,s){"use strict";var c=s(1),r=s(21),h=function(i,a){var o=[];if(!Object(c.a)(i))return o;for(var u=-1,f=[],v=i.length;++u<v;){var b=i[u];a(b,u,i)&&(o.push(b),f.push(u))}return Object(r.a)(i,f),o};l.a=h},function(t,l,s){"use strict";var c=s(0),r=s(8),h=s(3);function n(i,a){var o;if(Object(h.a)(a))o=function(v,b){return a(v)-a(b)};else{var u=[];Object(r.a)(a)?u.push(a):Object(c.a)(a)&&(u=a),o=function(v,b){for(var y=0;y<u.length;y+=1){var g=u[y];if(v[g]>b[g])return 1;if(v[g]<b[g])return-1}return 0}}return i.sort(o),i}l.a=n},function(t,l,s){"use strict";var c=s(22),r=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return Object(c.a)([].concat.apply([],n))};l.a=r},function(t,l,s){"use strict";var c=s(2),r=s(0),h=s(6);l.a=function(n,i){var a=[],o={};return n.forEach(function(u){var f=u[i];Object(h.a)(f)||(Object(r.a)(f)||(f=[f]),Object(c.a)(f,function(v){o[v]||(a.push(v),o[v]=!0)}))}),a}},function(t,l,s){"use strict";l.a=r;var c=s(1);function r(h){if(Object(c.a)(h))return h[0]}},function(t,l,s){"use strict";l.a=r;var c=s(1);function r(h){if(Object(c.a)(h)){var n=h;return n[n.length-1]}}},function(t,l,s){"use strict";var c=s(0),r=s(8);function h(n,i){return Object(c.a)(n)||Object(r.a)(n)?n[0]===i:!1}l.a=h},function(t,l,s){"use strict";var c=s(0),r=s(8);function h(n,i){return Object(c.a)(n)||Object(r.a)(n)?n[n.length-1]===i:!1}l.a=h},function(t,l,s){"use strict";var c=function(h,n){for(var i=0;i<h.length;i++)if(!n(h[i],i))return!1;return!0};l.a=c},function(t,l,s){"use strict";var c=function(h,n){for(var i=0;i<h.length;i++)if(n(h[i],i))return!0;return!1};l.a=c},function(t,l,s){"use strict";var c=s(23);l.a=function(r,h){if(!h)return[r];var n=Object(c.a)(r,h),i=[];for(var a in n)i.push(n[a]);return i}},function(t,l,s){"use strict";function c(r,h){return r["_wrap_"+h]}l.a=c},function(t,l,s){"use strict";function c(r,h){if(r["_wrap_"+h])return r["_wrap_"+h];var n=function(a){r[h](a)};return r["_wrap_"+h]=n,n}l.a=c},function(t,l,s){"use strict";var c={};function r(h){var n=c[h];if(!n){for(var i=h.toString(16),a=i.length;a<6;a++)i="0"+i;n="#"+i,c[h]=n}return n}l.a=r},function(t,l,s){"use strict";var c=s(0);function r(h){var n=0,i=0,a=0,o=0;return Object(c.a)(h)?h.length===1?n=i=a=o=h[0]:h.length===2?(n=a=h[0],i=o=h[1]):h.length===3?(n=h[0],i=o=h[1],a=h[2]):(n=h[0],i=h[1],a=h[2],o=h[3]):n=i=a=o=h,{r1:n,r2:i,r3:a,r4:o}}l.a=r},function(t,l,s){"use strict";var c=function(h,n,i){return h<n?n:h>i?i:h};l.a=c},function(t,l,s){"use strict";var c=function(h,n){var i=n.toString(),a=i.indexOf(".");if(a===-1)return Math.round(h);var o=i.substr(a+1).length;return o>20&&(o=20),parseFloat(h.toFixed(o))};l.a=c},function(t,l,s){"use strict";var c=s(5),r=function(n){return Object(c.a)(n)&&n%1!=0};l.a=r},function(t,l,s){"use strict";var c=s(5),r=function(n){return Object(c.a)(n)&&n%2==0};l.a=r},function(t,l,s){"use strict";var c=s(5),r=Number.isInteger?Number.isInteger:function(h){return Object(c.a)(h)&&h%1==0};l.a=r},function(t,l,s){"use strict";var c=s(5),r=function(n){return Object(c.a)(n)&&n<0};l.a=r},function(t,l,s){"use strict";l.a=r;var c=1e-5;function r(h,n,i){return i===void 0&&(i=c),Math.abs(h-n)<i}},function(t,l,s){"use strict";var c=s(5),r=function(n){return Object(c.a)(n)&&n%2!=0};l.a=r},function(t,l,s){"use strict";var c=s(5),r=function(n){return Object(c.a)(n)&&n>0};l.a=r},function(t,l,s){"use strict";var c=s(2),r=s(0),h=s(3);l.a=function(n,i){if(!!Object(r.a)(n)){var a=n[0],o;Object(h.a)(i)?o=i(n[0]):o=n[0][i];var u;return Object(c.a)(n,function(f){Object(h.a)(i)?u=i(f):u=f[i],u>o&&(a=f,o=u)}),a}}},function(t,l,s){"use strict";var c=s(2),r=s(0),h=s(3);l.a=function(n,i){if(!!Object(r.a)(n)){var a=n[0],o;Object(h.a)(i)?o=i(n[0]):o=n[0][i];var u;return Object(c.a)(n,function(f){Object(h.a)(i)?u=i(f):u=f[i],u<o&&(a=f,o=u)}),a}}},function(t,l,s){"use strict";var c=function(h,n){return(h%n+n)%n};l.a=c},function(t,l,s){"use strict";var c=180/Math.PI,r=function(n){return c*n};l.a=r},function(t,l,s){"use strict";l.a=parseInt},function(t,l,s){"use strict";var c=Math.PI/180,r=function(n){return c*n};l.a=r},function(t,l,s){"use strict";var c=s(2);l.a=c.a},function(t,l,s){"use strict";var c=s(25);l.a=c.a},function(t,l,s){"use strict";var c=s(12),r=s(26);l.a=function(h,n){return Object(c.a)(Object(r.a)(h),n)}},function(t,l,s){"use strict";var c=s(10),r=function(n){return Object(c.a)(n).toLowerCase()};l.a=r},function(t,l,s){"use strict";var c=s(10),r=function(n){var i=Object(c.a)(n);return i.charAt(0).toLowerCase()+i.substring(1)};l.a=r},function(t,l,s){"use strict";function c(r,h){return!r||!h?r:r.replace(/\\?\{([^{}]+)\}/g,function(n,i){return n.charAt(0)==="\\"?n.slice(1):h[i]===void 0?"":h[i]})}l.a=c},function(t,l,s){"use strict";var c=s(10),r=function(n){return Object(c.a)(n).toUpperCase()};l.a=r},function(t,l,s){"use strict";var c=s(10),r=function(n){var i=Object(c.a)(n);return i.charAt(0).toUpperCase()+i.substring(1)};l.a=r},function(t,l,s){"use strict";var c=s(4),r=function(n){return Object(c.a)(n,"Arguments")};l.a=r},function(t,l,s){"use strict";var c=s(4),r=function(n){return Object(c.a)(n,"Boolean")};l.a=r},function(t,l,s){"use strict";var c=s(4),r=function(n){return Object(c.a)(n,"Date")};l.a=r},function(t,l,s){"use strict";var c=s(4),r=function(n){return Object(c.a)(n,"Error")};l.a=r},function(t,l,s){"use strict";var c=s(5);l.a=function(r){return Object(c.a)(r)&&isFinite(r)}},function(t,l,s){"use strict";var c=function(h){return h===null};l.a=c},function(t,l,s){"use strict";var c=s(4),r=function(n){return Object(c.a)(n,"RegExp")};l.a=r},function(t,l,s){"use strict";var c=function(h){return h===void 0};l.a=c},function(t,l,s){"use strict";var c=function(h){return h instanceof Element||h instanceof HTMLDocument};l.a=c},function(t,l,s){"use strict";l.a=c;function c(r){var h=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(n){return setTimeout(n,16)};return h(r)}},function(t,l,s){"use strict";l.a=c;function c(r){var h=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;h(r)}},function(t,l,s){"use strict";var c=s(16),r=s(3),h=function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];for(var o=i[0],u=1;u<i.length;u++){var f=i[u];Object(r.a)(f)&&(f=f.prototype),Object(c.a)(o.prototype,f)}};l.a=h},function(t,l,s){"use strict";var c=s(0),r=function h(n){if(typeof n!="object"||n===null)return n;var i;if(Object(c.a)(n)){i=[];for(var a=0,o=n.length;a<o;a++)typeof n[a]=="object"&&n[a]!=null?i[a]=h(n[a]):i[a]=n[a]}else{i={};for(var u in n)typeof n[u]=="object"&&n[u]!=null?i[u]=h(n[u]):i[u]=n[u]}return i};l.a=r},function(t,l,s){"use strict";function c(r,h,n){var i;return function(){var a=this,o=arguments,u=function(){i=null,n||r.apply(a,o)},f=n&&!i;clearTimeout(i),i=setTimeout(u,h),f&&r.apply(a,o)}}l.a=c},function(t,l,s){"use strict";var c=s(3);l.a=function(r,h){if(!Object(c.a)(r))throw new TypeError("Expected a function");var n=function i(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];var u=h?h.apply(this,a):a[0],f=i.cache;if(f.has(u))return f.get(u);var v=r.apply(this,a);return f.set(u,v),v};return n.cache=new Map,n}},function(t,l,s){"use strict";var c=s(0),r=s(9),h=5;function n(a,o,u,f){u=u||0,f=f||h;for(var v in o)if(o.hasOwnProperty(v)){var b=o[v];b!==null&&Object(r.a)(b)?(Object(r.a)(a[v])||(a[v]={}),u<f?n(a[v],b,u+1,f):a[v]=o[v]):Object(c.a)(b)?(a[v]=[],a[v]=a[v].concat(b)):b!==void 0&&(a[v]=b)}}var i=function(o){for(var u=[],f=1;f<arguments.length;f++)u[f-1]=arguments[f];for(var v=0;v<u.length;v+=1)n(o,u[v]);return o};l.a=i},function(t,l,s){"use strict";var c=s(16),r=s(3),h=function(i,a,o,u){Object(r.a)(a)||(o=a,a=i,i=function(){});var f=Object.create?function(b,y){return Object.create(b,{constructor:{value:y}})}:function(b,y){function g(){}g.prototype=b;var _=new g;return _.constructor=y,_},v=f(a.prototype,i);return i.prototype=Object(c.a)(v,i.prototype),i.superclass=f(a.prototype,a),Object(c.a)(v,o),Object(c.a)(i,u),i};l.a=h},function(t,l,s){"use strict";var c=s(1),r=function(n,i){if(!Object(c.a)(n))return-1;var a=Array.prototype.indexOf;if(a)return a.call(n,i);for(var o=-1,u=0;u<n.length;u++)if(n[u]===i){o=u;break}return o};l.a=r},function(t,l,s){"use strict";var c=s(6),r=s(1),h=s(27),n=s(28),i=Object.prototype.hasOwnProperty;function a(o){if(Object(c.a)(o))return!0;if(Object(r.a)(o))return!o.length;var u=Object(h.a)(o);if(u==="Map"||u==="Set")return!o.size;if(Object(n.a)(o))return!Object.keys(o).length;for(var f in o)if(i.call(o,f))return!1;return!0}l.a=a},function(t,l,s){"use strict";var c=s(3),r=s(29);l.a=function(h,n,i){return Object(c.a)(i)?!!i(h,n):Object(r.a)(h,n)}},function(t,l,s){"use strict";var c=s(2),r=s(1),h=function(i,a){if(!Object(r.a)(i))return i;var o=[];return Object(c.a)(i,function(u,f){o.push(a(u,f))}),o};l.a=h},function(t,l,s){"use strict";var c=s(6),r=s(13),h=function(i){return i};l.a=function(n,i){i===void 0&&(i=h);var a={};return Object(r.a)(n)&&!Object(c.a)(n)&&Object.keys(n).forEach(function(o){a[o]=i(n[o],o)}),a}},function(t,l,s){"use strict";var c=s(8);l.a=function(r,h,n){for(var i=0,a=Object(c.a)(h)?h.split("."):h;r&&i<a.length;)r=r[a[i++]];return r===void 0||i<a.length?n:r}},function(t,l,s){"use strict";var c=s(13),r=s(8),h=s(5);l.a=function(n,i,a){var o=n,u=Object(r.a)(i)?i.split("."):i;return u.forEach(function(f,v){v<u.length-1?(Object(c.a)(o[f])||(o[f]=Object(h.a)(u[v+1])?[]:{}),o=o[f]):o[f]=a}),n}},function(t,l,s){"use strict";var c=s(2),r=s(9),h=Object.prototype.hasOwnProperty;l.a=function(n,i){if(n===null||!Object(r.a)(n))return{};var a={};return Object(c.a)(i,function(o){h.call(n,o)&&(a[o]=n[o])}),a}},function(t,l,s){"use strict";l.a=function(c,r,h){var n,i,a,o,u=0;h||(h={});var f=function(){u=h.leading===!1?0:Date.now(),n=null,o=c.apply(i,a),n||(i=a=null)},v=function(){var y=Date.now();!u&&h.leading===!1&&(u=y);var g=r-(y-u);return i=this,a=arguments,g<=0||g>r?(n&&(clearTimeout(n),n=null),u=y,o=c.apply(i,a),n||(i=a=null)):!n&&h.trailing!==!1&&(n=setTimeout(f,g)),o};return v.cancel=function(){clearTimeout(n),u=0,n=i=a=null},v}},function(t,l,s){"use strict";var c=s(1);l.a=function(r){return Object(c.a)(r)?Array.prototype.slice.call(r):[]}},function(t,l,s){"use strict";var c={};l.a=function(r){return r=r||"g",c[r]?c[r]+=1:c[r]=1,r+c[r]}},function(t,l,s){"use strict";l.a=function(){}},function(t,l,s){"use strict";l.a=function(c){return c}},function(t,l,s){"use strict";l.a=h;var c=s(6),r=s(1);function h(n){return Object(c.a)(n)?0:Object(r.a)(n)?n.length:Object.keys(n).length}},function(t,l,s){"use strict";var c=function(){function r(){this.map={}}return r.prototype.has=function(h){return this.map[h]!==void 0},r.prototype.get=function(h,n){var i=this.map[h];return i===void 0?n:i},r.prototype.set=function(h,n){this.map[h]=n},r.prototype.clear=function(){this.map={}},r.prototype.delete=function(h){delete this.map[h]},r.prototype.size=function(){return Object.keys(this.map).length},r}();l.a=c},function(t,l){function s(a,o,u,f){f===void 0&&(f=[]);var v=this;v.w=a||0,v.h=o||0,v.y=u||0,v.x=0,v.c=f||[],v.cs=f.length,v.prelim=0,v.mod=0,v.shift=0,v.change=0,v.tl=null,v.tr=null,v.el=null,v.er=null,v.msel=0,v.mser=0}s.fromNode=function(a,o){if(!a)return null;var u=[];return a.children.forEach(function(f){u.push(s.fromNode(f,o))}),o?new s(a.height,a.width,a.x,u):new s(a.width,a.height,a.y,u)};function c(a,o,u){u?a.y+=o:a.x+=o,a.children.forEach(function(f){c(f,o,u)})}function r(a,o){var u=o?a.y:a.x;return a.children.forEach(function(f){u=Math.min(r(f,o),u)}),u}function h(a,o){var u=r(a,o);c(a,-u,o)}function n(a,o,u){u?o.y=a.x:o.x=a.x,a.c.forEach(function(f,v){n(f,o.children[v],u)})}function i(a,o,u){u===void 0&&(u=0),o?(a.x=u,u+=a.width):(a.y=u,u+=a.height),a.children.forEach(function(f){i(f,o,u)})}t.exports=function(a,o){o===void 0&&(o={});var u=o.isHorizontal;function f(F){if(F.cs===0){v(F);return}f(F.c[0]);for(var Z=R(M(F.c[0].el),0,null),V=1;V<F.cs;++V){f(F.c[V]);var k=M(F.c[V].er);b(F,V,Z),Z=R(k,V,Z)}S(F),v(F)}function v(F){F.cs===0?(F.el=F,F.er=F,F.msel=F.mser=0):(F.el=F.c[0].el,F.msel=F.c[0].msel,F.er=F.c[F.cs-1].er,F.mser=F.c[F.cs-1].mser)}function b(F,Z,V){for(var k=F.c[Z-1],Y=k.mod,K=F.c[Z],it=K.mod;k!==null&&K!==null;){M(k)>V.low&&(V=V.nxt);var ct=Y+k.prelim+k.w-(it+K.prelim);ct>0&&(it+=ct,y(F,Z,V.index,ct));var ht=M(k),ut=M(K);ht<=ut&&(k=_(k),k!==null&&(Y+=k.mod)),ht>=ut&&(K=g(K),K!==null&&(it+=K.mod))}!k&&!!K?x(F,Z,K,it):!!k&&!K&&m(F,Z,k,Y)}function y(F,Z,V,k){F.c[Z].mod+=k,F.c[Z].msel+=k,F.c[Z].mser+=k,A(F,Z,V,k)}function g(F){return F.cs===0?F.tl:F.c[0]}function _(F){return F.cs===0?F.tr:F.c[F.cs-1]}function M(F){return F.y+F.h}function x(F,Z,V,k){var Y=F.c[0].el;Y.tl=V;var K=k-V.mod-F.c[0].msel;Y.mod+=K,Y.prelim-=K,F.c[0].el=F.c[Z].el,F.c[0].msel=F.c[Z].msel}function m(F,Z,V,k){var Y=F.c[Z].er;Y.tr=V;var K=k-V.mod-F.c[Z].mser;Y.mod+=K,Y.prelim-=K,F.c[Z].er=F.c[Z-1].er,F.c[Z].mser=F.c[Z-1].mser}function S(F){F.prelim=(F.c[0].prelim+F.c[0].mod+F.c[F.cs-1].mod+F.c[F.cs-1].prelim+F.c[F.cs-1].w)/2-F.w/2}function P(F,Z){Z+=F.mod,F.x=F.prelim+Z,O(F);for(var V=0;V<F.cs;V++)P(F.c[V],Z)}function A(F,Z,V,k){if(V!==Z-1){var Y=Z-V;F.c[V+1].shift+=k/Y,F.c[Z].shift-=k/Y,F.c[Z].change-=k-k/Y}}function O(F){for(var Z=0,V=0,k=0;k<F.cs;k++)Z+=F.c[k].shift,V+=Z+F.c[k].change,F.c[k].mod+=V}function R(F,Z,V){for(;V!==null&&F>=V.low;)V=V.nxt;return{low:F,index:Z,nxt:V}}i(a,u);var W=s.fromNode(a,u);return f(W),P(W,0),n(W,a,u),h(a,u),a}},function(t,l,s){function c(f,v){f.prototype=Object.create(v.prototype),f.prototype.constructor=f,f.__proto__=v}var r=s(11),h=s(115),n=s(17),i=s(7),a=function(f){c(v,f);function v(){return f.apply(this,arguments)||this}var b=v.prototype;return b.execute=function(){var g=this;return g.rootNode.width=0,n(g.rootNode,g.options,h)},v}(r),o={};function u(f,v){return v=i.assign({},o,v),new a(f,v).execute()}t.exports=u},function(t,l,s){var c=s(7);function r(i,a){i===void 0&&(i=0),a===void 0&&(a=[]);var o=this;o.x=o.y=0,o.leftChild=o.rightChild=null,o.height=0,o.children=a}var h={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function n(i,a,o){o?(a.x=i.x,a.y=i.y):(a.x=i.y,a.y=i.x),i.children.forEach(function(u,f){n(u,a.children[f],o)})}t.exports=function(i,a){a===void 0&&(a={}),a=c.assign({},h,a);var o=0;function u(g){if(!g)return null;g.width=0,g.depth&&g.depth>o&&(o=g.depth);var _=g.children,M=_.length,x=new r(g.height,[]);return _.forEach(function(m,S){var P=u(m);x.children.push(P),S===0&&(x.leftChild=P),S===M-1&&(x.rightChild=P)}),x.originNode=g,x.isLeaf=g.isLeaf(),x}function f(g){if(g.isLeaf||g.children.length===0)g.drawingDepth=o;else{var _=g.children.map(function(x){return f(x)}),M=Math.min.apply(null,_);g.drawingDepth=M-1}return g.drawingDepth}var v;function b(g){g.x=g.drawingDepth*a.rankSep,g.isLeaf?(g.y=0,v&&(g.y=v.y+v.height+a.nodeSep,g.originNode.parent!==v.originNode.parent&&(g.y+=a.subTreeSep)),v=g):(g.children.forEach(function(_){b(_)}),g.y=(g.leftChild.y+g.rightChild.y)/2)}var y=u(i);return f(y),b(y),n(y,i,a.isHorizontal),i}},function(t,l,s){function c(b,y){b.prototype=Object.create(y.prototype),b.prototype.constructor=b,b.__proto__=y}var r=s(11),h=s(117),n=s(30),i=s(7),a=["LR","RL","H"],o=a[0],u=function(b){c(y,b);function y(){return b.apply(this,arguments)||this}var g=y.prototype;return g.execute=function(){var M=this,x=M.options,m=M.rootNode;x.isHorizontal=!0;var S=x.indent,P=S===void 0?20:S,A=x.dropCap,O=A===void 0?!0:A,R=x.direction||o;if(R&&a.indexOf(R)===-1)throw new TypeError("Invalid direction: "+R);if(R===a[0])h(m,P,O);else if(R===a[1])h(m,P,O),m.right2left();else if(R===a[2]){var W=n(m,x),F=W.left,Z=W.right;h(F,P,O),F.right2left(),h(Z,P,O);var V=F.getBoundingBox();Z.translate(V.width,0),m.x=Z.x-m.width/2}return m},y}(r),f={};function v(b,y){return y=i.assign({},f,y),new u(b,y).execute()}t.exports=v},function(t,l){function s(c,r,h,n){if(!n)try{if(c.id===c.parent.children[0].id){c.x+=h*c.depth,c.y=r?r.y:0;return}}catch(i){}c.x+=h*c.depth,c.y=r?r.y+r.height:0}t.exports=function(c,r,h){var n=null;c.eachNode(function(i){s(i,n,r,h),n=i})}},function(t,l,s){function c(f,v){f.prototype=Object.create(v.prototype),f.prototype.constructor=f,f.__proto__=v}var r=s(11),h=s(119),n=s(17),i=s(7),a=function(f){c(v,f);function v(){return f.apply(this,arguments)||this}var b=v.prototype;return b.execute=function(){var g=this;return n(g.rootNode,g.options,h)},v}(r),o={};function u(f,v){return v=i.assign({},o,v),new a(f,v).execute()}t.exports=u},function(t,l,s){var c=s(7);function r(i,a){var o=0;return i.children.length?i.children.forEach(function(u){o+=r(u,a)}):o=i.height,i._subTreeSep=a.getSubTreeSep(i.data),i.totalHeight=Math.max(i.height,o)+2*i._subTreeSep,i.totalHeight}function h(i){var a=i.children,o=a.length;if(o){a.forEach(function(g){h(g)});var u=a[0],f=a[o-1],v=f.y-u.y+f.height,b=0;if(a.forEach(function(g){b+=g.totalHeight}),v>i.height)i.y=u.y+v/2-i.height/2;else if(a.length!==1||i.height>b){var y=i.y+(i.height-v)/2-u.y;a.forEach(function(g){g.translate(0,y)})}else i.y=(u.y+u.height/2+f.y+f.height/2)/2-i.height/2}}var n={getSubTreeSep:function(){return 0}};t.exports=function(i,a){a===void 0&&(a={}),a=c.assign({},n,a),i.parent={x:0,width:0,height:0,y:0},i.BFTraverse(function(o){o.x=o.parent.x+o.parent.width}),i.parent=null,r(i,a),i.startY=0,i.y=i.totalHeight/2-i.height/2,i.eachNode(function(o){var u=o.children,f=u.length;if(f){var v=u[0];if(v.startY=o.startY+o._subTreeSep,f===1)v.y=o.y+o.height/2-v.height/2;else{v.y=v.startY+v.totalHeight/2-v.height/2;for(var b=1;b<f;b++){var y=u[b];y.startY=u[b-1].startY+u[b-1].totalHeight,y.y=y.startY+y.totalHeight/2-y.height/2}}}}),h(i)}}])})},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/augment.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/mix.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js"),s=function(){for(var r=[],h=0;h<arguments.length;h++)r[h]=arguments[h];for(var n=r[0],i=1;i<r.length;i++){var a=r[i];l.default(a)&&(a=a.prototype),t.default(n.prototype,a)}};T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/cache.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(){function l(){this.map={}}return l.prototype.has=function(s){return this.map[s]!==void 0},l.prototype.get=function(s,c){var r=this.map[s];return r===void 0?c:r},l.prototype.set=function(s,c){this.map[s]=c},l.prototype.clear=function(){this.map={}},l.prototype.delete=function(s){delete this.map[s]},l.prototype.size=function(){return Object.keys(this.map).length},l}();T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/clamp.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(s,c,r){return s<c?c:s>r?r:s};T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/clear-animation-frame.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function t(l){var s=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;s(l)}T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/clone.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),l=function s(c){if(typeof c!="object"||c===null)return c;var r;if(t.default(c)){r=[];for(var h=0,n=c.length;h<n;h++)typeof c[h]=="object"&&c[h]!=null?r[h]=s(c[h]):r[h]=c[h]}else{r={};for(var i in c)typeof c[i]=="object"&&c[i]!=null?r[i]=s(c[i]):r[i]=c[i]}return r};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/contains.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js"),l=function(c,r){return t.default(c)?c.indexOf(r)>-1:!1};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/debounce.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function t(l,s,c){var r;return function(){var h=this,n=arguments,i=function(){r=null,c||l.apply(h,n)},a=c&&!r;clearTimeout(r),r=setTimeout(i,s),a&&l.apply(h,n)}}T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/deep-mix.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-plain-object.js"),s=5;function c(h,n,i,a){i=i||0,a=a||s;for(var o in n)if(n.hasOwnProperty(o)){var u=n[o];u!==null&&l.default(u)?(l.default(h[o])||(h[o]={}),i<a?c(h[o],u,i+1,a):h[o]=n[o]):t.default(u)?(h[o]=[],h[o]=h[o].concat(u)):u!==void 0&&(h[o]=u)}}var r=function(n){for(var i=[],a=1;a<arguments.length;a++)i[a-1]=arguments[a];for(var o=0;o<i.length;o+=1)c(n,i[o]);return n};T.default=r},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/difference.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/filter.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/contains.js"),s=function(r,h){return h===void 0&&(h=[]),t.default(r,function(n){return!l.default(h,n)})};T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-object.js");function s(c,r){if(!!c){var h;if(t.default(c))for(var n=0,i=c.length;n<i&&(h=r(c[n],n),h!==!1);n++);else if(l.default(c)){for(var a in c)if(c.hasOwnProperty(a)&&(h=r(c[a],a),h===!1))break}}}T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/ends-with.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-string.js");function s(c,r){return t.default(c)||l.default(c)?c[c.length-1]===r:!1}T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/every.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(s,c){for(var r=0;r<s.length;r++)if(!c(s[r],r))return!1;return!0};T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/extend.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/mix.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js"),s=function(r,h,n,i){l.default(h)||(n=h,h=r,r=function(){});var a=Object.create?function(u,f){return Object.create(u,{constructor:{value:f}})}:function(u,f){function v(){}v.prototype=u;var b=new v;return b.constructor=f,b},o=a(h.prototype,r);return r.prototype=t.default(o,r.prototype),r.superclass=a(h.prototype,h),t.default(o,n),t.default(r,i),r};T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/filter.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js"),l=function(c,r){if(!t.default(c))return c;for(var h=[],n=0;n<c.length;n++){var i=c[n];r(i,n)&&h.push(i)}return h};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/find-index.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function t(l,s,c){c===void 0&&(c=0);for(var r=c;r<l.length;r++)if(s(l[r],r))return r;return-1}T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/find.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-match.js"),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),c=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-plain-object.js");function r(h,n){if(!s.default(h))return null;var i;if(t.default(n)&&(i=n),c.default(n)&&(i=function(u){return l.default(u,n)}),i){for(var a=0;a<h.length;a+=1)if(i(h[a]))return h[a]}return null}T.default=r},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/first-value.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-nil.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),s=function(r,h){for(var n=null,i=0;i<r.length;i++){var a=r[i],o=a[h];if(!t.default(o)){l.default(o)?n=o[0]:n=o;break}}return n};T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/fixed-base.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(s,c){var r=c.toString(),h=r.indexOf(".");if(h===-1)return Math.round(s);var n=r.substr(h+1).length;return n>20&&(n=20),parseFloat(s.toFixed(n))};T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/flatten-deep.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),l=function s(c,r){if(r===void 0&&(r=[]),!t.default(c))r.push(c);else for(var h=0;h<c.length;h+=1)s(c[h],r);return r};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/flatten.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),l=function(c){if(!t.default(c))return[];for(var r=[],h=0;h<c.length;h++)r=r.concat(c[h]);return r};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/for-in.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js");T.default=t.default},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/get-range.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),l=function(c){var r=c.filter(function(o){return!isNaN(o)});if(!r.length)return{min:0,max:0};if(t.default(c[0])){for(var h=[],n=0;n<c.length;n++)h=h.concat(c[n]);r=h}var i=Math.max.apply(null,r),a=Math.min.apply(null,r);return{min:a,max:i}};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/get-type.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t={}.toString,l=function(c){return t.call(c).replace(/^\[object /,"").replace(/]$/,"")};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/get-wrap-behavior.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function t(l,s){return l["_wrap_"+s]}T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/get.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-string.js");T.default=function(l,s,c){for(var r=0,h=t.default(s)?s.split("."):s;l&&r<h.length;)l=l[h[r++]];return l===void 0||r<h.length?c:l}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/group-by.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js"),s=Object.prototype.hasOwnProperty;function c(r,h){if(!h||!t.default(r))return{};for(var n={},i=l.default(h)?h:function(f){return f[h]},a,o=0;o<r.length;o++){var u=r[o];a=i(u),s.call(n,a)?n[a].push(u):n[a]=[u]}return n}T.default=c},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/group-to-map.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js"),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/group-by.js"),c=function(h,n){if(!n)return{0:h};if(!l.default(n)){var i=t.default(n)?n:n.replace(/\s+/g,"").split("*");n=function(u){for(var f="_",v=0,b=i.length;v<b;v++)f+=u[i[v]]&&u[i[v]].toString();return f}}var a=s.default(h,n);return a};T.default=c},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/group.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/group-to-map.js");T.default=function(l,s){if(!s)return[l];var c=t.default(l,s),r=[];for(var h in c)r.push(c[h]);return r}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/has-key.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/has.js");T.default=t.default},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/has-value.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/contains.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/values.js");T.default=function(s,c){return t.default(l.default(s),c)}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/has.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(t,l){return t.hasOwnProperty(l)}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/head.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js");function l(s){if(t.default(s))return s[0]}T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/identity.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(t){return t}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/index-of.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js"),l=function(c,r){if(!t.default(c))return-1;var h=Array.prototype.indexOf;if(h)return h.call(c,r);for(var n=-1,i=0;i<c.length;i++)if(c[i]===r){n=i;break}return n};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/contains.js");Object.defineProperty(T,"contains",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(T,"includes",{enumerable:!0,get:function(){return t.default}});var l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/difference.js");Object.defineProperty(T,"difference",{enumerable:!0,get:function(){return l.default}});var s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/find.js");Object.defineProperty(T,"find",{enumerable:!0,get:function(){return s.default}});var c=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/find-index.js");Object.defineProperty(T,"findIndex",{enumerable:!0,get:function(){return c.default}});var r=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/first-value.js");Object.defineProperty(T,"firstValue",{enumerable:!0,get:function(){return r.default}});var h=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/flatten.js");Object.defineProperty(T,"flatten",{enumerable:!0,get:function(){return h.default}});var n=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/flatten-deep.js");Object.defineProperty(T,"flattenDeep",{enumerable:!0,get:function(){return n.default}});var i=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/get-range.js");Object.defineProperty(T,"getRange",{enumerable:!0,get:function(){return i.default}});var a=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/pull.js");Object.defineProperty(T,"pull",{enumerable:!0,get:function(){return a.default}});var o=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/pull-at.js");Object.defineProperty(T,"pullAt",{enumerable:!0,get:function(){return o.default}});var u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/reduce.js");Object.defineProperty(T,"reduce",{enumerable:!0,get:function(){return u.default}});var f=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/remove.js");Object.defineProperty(T,"remove",{enumerable:!0,get:function(){return f.default}});var v=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/sort-by.js");Object.defineProperty(T,"sortBy",{enumerable:!0,get:function(){return v.default}});var b=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/union.js");Object.defineProperty(T,"union",{enumerable:!0,get:function(){return b.default}});var y=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/uniq.js");Object.defineProperty(T,"uniq",{enumerable:!0,get:function(){return y.default}});var g=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/values-of-key.js");Object.defineProperty(T,"valuesOfKey",{enumerable:!0,get:function(){return g.default}});var _=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/head.js");Object.defineProperty(T,"head",{enumerable:!0,get:function(){return _.default}});var M=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/last.js");Object.defineProperty(T,"last",{enumerable:!0,get:function(){return M.default}});var x=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/starts-with.js");Object.defineProperty(T,"startsWith",{enumerable:!0,get:function(){return x.default}});var m=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/ends-with.js");Object.defineProperty(T,"endsWith",{enumerable:!0,get:function(){return m.default}});var S=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/filter.js");Object.defineProperty(T,"filter",{enumerable:!0,get:function(){return S.default}});var P=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/every.js");Object.defineProperty(T,"every",{enumerable:!0,get:function(){return P.default}});var A=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/some.js");Object.defineProperty(T,"some",{enumerable:!0,get:function(){return A.default}});var O=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/group.js");Object.defineProperty(T,"group",{enumerable:!0,get:function(){return O.default}});var R=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/group-by.js");Object.defineProperty(T,"groupBy",{enumerable:!0,get:function(){return R.default}});var W=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/group-to-map.js");Object.defineProperty(T,"groupToMap",{enumerable:!0,get:function(){return W.default}});var F=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/get-wrap-behavior.js");Object.defineProperty(T,"getWrapBehavior",{enumerable:!0,get:function(){return F.default}});var Z=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/wrap-behavior.js");Object.defineProperty(T,"wrapBehavior",{enumerable:!0,get:function(){return Z.default}});var V=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/number2color.js");Object.defineProperty(T,"number2color",{enumerable:!0,get:function(){return V.default}});var k=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/parse-radius.js");Object.defineProperty(T,"parseRadius",{enumerable:!0,get:function(){return k.default}});var Y=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/clamp.js");Object.defineProperty(T,"clamp",{enumerable:!0,get:function(){return Y.default}});var K=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/fixed-base.js");Object.defineProperty(T,"fixedBase",{enumerable:!0,get:function(){return K.default}});var it=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-decimal.js");Object.defineProperty(T,"isDecimal",{enumerable:!0,get:function(){return it.default}});var ct=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-even.js");Object.defineProperty(T,"isEven",{enumerable:!0,get:function(){return ct.default}});var ht=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-integer.js");Object.defineProperty(T,"isInteger",{enumerable:!0,get:function(){return ht.default}});var ut=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-negative.js");Object.defineProperty(T,"isNegative",{enumerable:!0,get:function(){return ut.default}});var It=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number-equal.js");Object.defineProperty(T,"isNumberEqual",{enumerable:!0,get:function(){return It.default}});var Nt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-odd.js");Object.defineProperty(T,"isOdd",{enumerable:!0,get:function(){return Nt.default}});var Lt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-positive.js");Object.defineProperty(T,"isPositive",{enumerable:!0,get:function(){return Lt.default}});var _t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/max-by.js");Object.defineProperty(T,"maxBy",{enumerable:!0,get:function(){return _t.default}});var mt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/min-by.js");Object.defineProperty(T,"minBy",{enumerable:!0,get:function(){return mt.default}});var At=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/mod.js");Object.defineProperty(T,"mod",{enumerable:!0,get:function(){return At.default}});var rt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-degree.js");Object.defineProperty(T,"toDegree",{enumerable:!0,get:function(){return rt.default}});var Mt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-integer.js");Object.defineProperty(T,"toInteger",{enumerable:!0,get:function(){return Mt.default}});var z=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-radian.js");Object.defineProperty(T,"toRadian",{enumerable:!0,get:function(){return z.default}});var $=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/for-in.js");Object.defineProperty(T,"forIn",{enumerable:!0,get:function(){return $.default}});var dt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/has.js");Object.defineProperty(T,"has",{enumerable:!0,get:function(){return dt.default}});var et=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/has-key.js");Object.defineProperty(T,"hasKey",{enumerable:!0,get:function(){return et.default}});var ot=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/has-value.js");Object.defineProperty(T,"hasValue",{enumerable:!0,get:function(){return ot.default}});var pt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/keys.js");Object.defineProperty(T,"keys",{enumerable:!0,get:function(){return pt.default}});var H=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-match.js");Object.defineProperty(T,"isMatch",{enumerable:!0,get:function(){return H.default}});var nt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/values.js");Object.defineProperty(T,"values",{enumerable:!0,get:function(){return nt.default}});var at=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/lower-case.js");Object.defineProperty(T,"lowerCase",{enumerable:!0,get:function(){return at.default}});var q=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/lower-first.js");Object.defineProperty(T,"lowerFirst",{enumerable:!0,get:function(){return q.default}});var Et=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/substitute.js");Object.defineProperty(T,"substitute",{enumerable:!0,get:function(){return Et.default}});var vt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/upper-case.js");Object.defineProperty(T,"upperCase",{enumerable:!0,get:function(){return vt.default}});var Ft=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/upper-first.js");Object.defineProperty(T,"upperFirst",{enumerable:!0,get:function(){return Ft.default}});var Qt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/get-type.js");Object.defineProperty(T,"getType",{enumerable:!0,get:function(){return Qt.default}});var ee=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-arguments.js");Object.defineProperty(T,"isArguments",{enumerable:!0,get:function(){return ee.default}});var Gt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js");Object.defineProperty(T,"isArray",{enumerable:!0,get:function(){return Gt.default}});var $t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js");Object.defineProperty(T,"isArrayLike",{enumerable:!0,get:function(){return $t.default}});var Pe=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-boolean.js");Object.defineProperty(T,"isBoolean",{enumerable:!0,get:function(){return Pe.default}});var me=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-date.js");Object.defineProperty(T,"isDate",{enumerable:!0,get:function(){return me.default}});var le=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-error.js");Object.defineProperty(T,"isError",{enumerable:!0,get:function(){return le.default}});var be=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js");Object.defineProperty(T,"isFunction",{enumerable:!0,get:function(){return be.default}});var ze=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-finite.js");Object.defineProperty(T,"isFinite",{enumerable:!0,get:function(){return ze.default}});var Xe=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-nil.js");Object.defineProperty(T,"isNil",{enumerable:!0,get:function(){return Xe.default}});var _n=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-null.js");Object.defineProperty(T,"isNull",{enumerable:!0,get:function(){return _n.default}});var Kn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js");Object.defineProperty(T,"isNumber",{enumerable:!0,get:function(){return Kn.default}});var Hn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-object.js");Object.defineProperty(T,"isObject",{enumerable:!0,get:function(){return Hn.default}});var nn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-object-like.js");Object.defineProperty(T,"isObjectLike",{enumerable:!0,get:function(){return nn.default}});var en=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-plain-object.js");Object.defineProperty(T,"isPlainObject",{enumerable:!0,get:function(){return en.default}});var An=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-prototype.js");Object.defineProperty(T,"isPrototype",{enumerable:!0,get:function(){return An.default}});var Nn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-reg-exp.js");Object.defineProperty(T,"isRegExp",{enumerable:!0,get:function(){return Nn.default}});var hr=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-string.js");Object.defineProperty(T,"isString",{enumerable:!0,get:function(){return hr.default}});var fi=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js");Object.defineProperty(T,"isType",{enumerable:!0,get:function(){return fi.default}});var Oe=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-undefined.js");Object.defineProperty(T,"isUndefined",{enumerable:!0,get:function(){return Oe.default}});var Ae=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-element.js");Object.defineProperty(T,"isElement",{enumerable:!0,get:function(){return Ae.default}});var Jt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/request-animation-frame.js");Object.defineProperty(T,"requestAnimationFrame",{enumerable:!0,get:function(){return Jt.default}});var ve=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/clear-animation-frame.js");Object.defineProperty(T,"clearAnimationFrame",{enumerable:!0,get:function(){return ve.default}});var Vt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/augment.js");Object.defineProperty(T,"augment",{enumerable:!0,get:function(){return Vt.default}});var ie=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/clone.js");Object.defineProperty(T,"clone",{enumerable:!0,get:function(){return ie.default}});var Ce=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/debounce.js");Object.defineProperty(T,"debounce",{enumerable:!0,get:function(){return Ce.default}});var ue=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/memoize.js");Object.defineProperty(T,"memoize",{enumerable:!0,get:function(){return ue.default}});var xe=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/deep-mix.js");Object.defineProperty(T,"deepMix",{enumerable:!0,get:function(){return xe.default}});var $e=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js");Object.defineProperty(T,"each",{enumerable:!0,get:function(){return $e.default}});var Fn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/extend.js");Object.defineProperty(T,"extend",{enumerable:!0,get:function(){return Fn.default}});var rr=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index-of.js");Object.defineProperty(T,"indexOf",{enumerable:!0,get:function(){return rr.default}});var En=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-empty.js");Object.defineProperty(T,"isEmpty",{enumerable:!0,get:function(){return En.default}});var Pn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-equal.js");Object.defineProperty(T,"isEqual",{enumerable:!0,get:function(){return Pn.default}});var Er=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-equal-with.js");Object.defineProperty(T,"isEqualWith",{enumerable:!0,get:function(){return Er.default}});var Pr=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/map.js");Object.defineProperty(T,"map",{enumerable:!0,get:function(){return Pr.default}});var ln=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/map-values.js");Object.defineProperty(T,"mapValues",{enumerable:!0,get:function(){return ln.default}});var Cr=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/mix.js");Object.defineProperty(T,"mix",{enumerable:!0,get:function(){return Cr.default}}),Object.defineProperty(T,"assign",{enumerable:!0,get:function(){return Cr.default}});var Ar=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/get.js");Object.defineProperty(T,"get",{enumerable:!0,get:function(){return Ar.default}});var je=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/set.js");Object.defineProperty(T,"set",{enumerable:!0,get:function(){return je.default}});var We=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/pick.js");Object.defineProperty(T,"pick",{enumerable:!0,get:function(){return We.default}});var Ye=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/throttle.js");Object.defineProperty(T,"throttle",{enumerable:!0,get:function(){return Ye.default}});var fn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-array.js");Object.defineProperty(T,"toArray",{enumerable:!0,get:function(){return fn.default}});var mn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-string.js");Object.defineProperty(T,"toString",{enumerable:!0,get:function(){return mn.default}});var jn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/unique-id.js");Object.defineProperty(T,"uniqueId",{enumerable:!0,get:function(){return jn.default}});var bn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/noop.js");Object.defineProperty(T,"noop",{enumerable:!0,get:function(){return bn.default}});var Ln=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/identity.js");Object.defineProperty(T,"identity",{enumerable:!0,get:function(){return Ln.default}});var nr=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/size.js");Object.defineProperty(T,"size",{enumerable:!0,get:function(){return nr.default}});var Yn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/cache.js");Object.defineProperty(T,"Cache",{enumerable:!0,get:function(){return Yn.default}})},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-arguments.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js"),l=function(c){return t.default(c,"Arguments")};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(s){return s!==null&&typeof s!="function"&&isFinite(s.length)};T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js");T.default=function(l){return Array.isArray?Array.isArray(l):t.default(l,"Array")}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-boolean.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js"),l=function(c){return t.default(c,"Boolean")};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-date.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js"),l=function(c){return t.default(c,"Date")};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-decimal.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js"),l=function(c){return t.default(c)&&c%1!=0};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-element.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(s){return s instanceof Element||s instanceof HTMLDocument};T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-empty.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-nil.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js"),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/get-type.js"),c=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-prototype.js"),r=Object.prototype.hasOwnProperty;function h(n){if(t.default(n))return!0;if(l.default(n))return!n.length;var i=s.default(n);if(i==="Map"||i==="Set")return!n.size;if(c.default(n))return!Object.keys(n).length;for(var a in n)if(r.call(n,a))return!1;return!0}T.default=h},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-equal-with.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-equal.js");T.default=function(s,c,r){return t.default(r)?!!r(s,c):l.default(s,c)}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-equal.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-object-like.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js"),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-string.js"),c=function r(h,n){if(h===n)return!0;if(!h||!n||s.default(h)||s.default(n))return!1;if(l.default(h)||l.default(n)){if(h.length!==n.length)return!1;for(var i=!0,a=0;a<h.length&&(i=r(h[a],n[a]),!!i);a++);return i}if(t.default(h)||t.default(n)){var o=Object.keys(h),u=Object.keys(n);if(o.length!==u.length)return!1;for(var i=!0,a=0;a<o.length&&(i=r(h[o[a]],n[o[a]]),!!i);a++);return i}return!1};T.default=c},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-error.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js"),l=function(c){return t.default(c,"Error")};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-even.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js"),l=function(c){return t.default(c)&&c%2==0};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-finite.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js");function l(s){return t.default(s)&&isFinite(s)}T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js");T.default=function(l){return t.default(l,"Function")}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-integer.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js"),l=Number.isInteger?Number.isInteger:function(s){return t.default(s)&&s%1==0};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-match.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-nil.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/keys.js");function s(c,r){var h=l.default(r),n=h.length;if(t.default(c))return!n;for(var i=0;i<n;i+=1){var a=h[i];if(r[a]!==c[a]||!(a in c))return!1}return!0}T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-negative.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js"),l=function(c){return t.default(c)&&c<0};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-nil.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(s){return s==null};T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-null.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(s){return s===null};T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number-equal.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=1e-5;function l(s,c,r){return r===void 0&&(r=t),Math.abs(s-c)<r}T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js"),l=function(c){return t.default(c,"Number")};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-object-like.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(s){return typeof s=="object"&&s!==null};T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-object.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(t){var l=typeof t;return t!==null&&l==="object"||l==="function"}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-odd.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js"),l=function(c){return t.default(c)&&c%2!=0};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-plain-object.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-object-like.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js"),s=function(r){if(!t.default(r)||!l.default(r,"Object"))return!1;if(Object.getPrototypeOf(r)===null)return!0;for(var h=r;Object.getPrototypeOf(h)!==null;)h=Object.getPrototypeOf(h);return Object.getPrototypeOf(r)===h};T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-positive.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js"),l=function(c){return t.default(c)&&c>0};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-prototype.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=Object.prototype,l=function(c){var r=c&&c.constructor,h=typeof r=="function"&&r.prototype||t;return c===h};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-reg-exp.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js"),l=function(c){return t.default(c,"RegExp")};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-string.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js");T.default=function(l){return t.default(l,"String")}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t={}.toString,l=function(c,r){return t.call(c)==="[object "+r+"]"};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-undefined.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(s){return s===void 0};T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/keys.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js"),s=Object.keys?function(c){return Object.keys(c)}:function(c){var r=[];return t.default(c,function(h,n){l.default(c)&&n==="prototype"||r.push(n)}),r};T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/last.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js");function l(s){if(t.default(s)){var c=s;return c[c.length-1]}}T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/lower-case.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-string.js"),l=function(c){return t.default(c).toLowerCase()};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/lower-first.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-string.js"),l=function(c){var r=t.default(c);return r.charAt(0).toLowerCase()+r.substring(1)};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/map-values.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-nil.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-object.js"),s=function(r){return r};T.default=function(c,r){r===void 0&&(r=s);var h={};return l.default(c)&&!t.default(c)&&Object.keys(c).forEach(function(n){h[n]=r(c[n],n)}),h}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/map.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js"),l=function(c,r){if(!t.default(c))return c;for(var h=[],n=0;n<c.length;n++){var i=c[n];h.push(r(i,n))}return h};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/max-by.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js");T.default=function(c,r){if(!!l.default(c)){var h=c[0],n;s.default(r)?n=r(c[0]):n=c[0][r];var i;return t.default(c,function(a){s.default(r)?i=r(a):i=a[r],i>n&&(h=a,n=i)}),h}}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/memoize.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js");T.default=function(l,s){if(!t.default(l))throw new TypeError("Expected a function");var c=function r(){for(var h=[],n=0;n<arguments.length;n++)h[n]=arguments[n];var i=s?s.apply(this,h):h[0],a=r.cache;if(a.has(i))return a.get(i);var o=l.apply(this,h);return a.set(i,o),o};return c.cache=new Map,c}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/min-by.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js");T.default=function(c,r){if(!!l.default(c)){var h=c[0],n;s.default(r)?n=r(c[0]):n=c[0][r];var i;return t.default(c,function(a){s.default(r)?i=r(a):i=a[r],i<n&&(h=a,n=i)}),h}}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/mix.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function t(s,c){for(var r in c)c.hasOwnProperty(r)&&r!=="constructor"&&c[r]!==void 0&&(s[r]=c[r])}function l(s,c,r,h){return c&&t(s,c),r&&t(s,r),h&&t(s,h),s}T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/mod.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(s,c){return(s%c+c)%c};T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/noop.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/number2color.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t={};function l(s){var c=t[s];if(!c){for(var r=s.toString(16),h=r.length;h<6;h++)r="0"+r;c="#"+r,t[s]=c}return c}T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/parse-radius.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js");function l(s){var c=0,r=0,h=0,n=0;return t.default(s)?s.length===1?c=r=h=n=s[0]:s.length===2?(c=h=s[0],r=n=s[1]):s.length===3?(c=s[0],r=n=s[1],h=s[2]):(c=s[0],r=s[1],h=s[2],n=s[3]):c=r=h=n=s,{r1:c,r2:r,r3:h,r4:n}}T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/pick.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-plain-object.js"),s=Object.prototype.hasOwnProperty;T.default=function(c,r){if(c===null||!l.default(c))return{};var h={};return t.default(r,function(n){s.call(c,n)&&(h[n]=c[n])}),h}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/pull-at.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js"),l=Array.prototype.splice,s=function(r,h){if(!t.default(r))return[];for(var n=r?h.length:0,i=n-1;n--;){var a=void 0,o=h[n];(n===i||o!==a)&&(a=o,l.call(r,o,1))}return r};T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/pull.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=Array.prototype,l=t.splice,s=t.indexOf,c=function(h){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];for(var a=0;a<n.length;a++)for(var o=n[a],u=-1;(u=s.call(h,o))>-1;)l.call(h,u,1);return h};T.default=c},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/reduce.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-plain-object.js"),c=function(h,n,i){if(!l.default(h)&&!s.default(h))return h;var a=i;return t.default(h,function(o,u){a=n(a,o,u)}),a};T.default=c},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/remove.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/pull-at.js"),s=function(r,h){var n=[];if(!t.default(r))return n;for(var i=-1,a=[],o=r.length;++i<o;){var u=r[i];h(u,i,r)&&(n.push(u),a.push(i))}return l.default(r,a),n};T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/request-animation-frame.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function t(l){var s=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(c){return setTimeout(c,16)};return s(l)}T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/set.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-object.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-string.js"),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js");T.default=function(c,r,h){var n=c,i=l.default(r)?r.split("."):r;return i.forEach(function(a,o){o<i.length-1?(t.default(n[a])||(n[a]=s.default(i[o+1])?[]:{}),n=n[a]):n[a]=h}),c}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/size.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-nil.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js");function s(c){return t.default(c)?0:l.default(c)?c.length:Object.keys(c).length}T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/some.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(s,c){for(var r=0;r<s.length;r++)if(c(s[r],r))return!0;return!1};T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/sort-by.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-string.js"),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js");function c(r,h){var n;if(s.default(h))n=function(o,u){return h(o)-h(u)};else{var i=[];l.default(h)?i.push(h):t.default(h)&&(i=h),n=function(o,u){for(var f=0;f<i.length;f+=1){var v=i[f];if(o[v]>u[v])return 1;if(o[v]<u[v])return-1}return 0}}return r.sort(n),r}T.default=c},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/starts-with.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-string.js");function s(c,r){return t.default(c)||l.default(c)?c[0]===r:!1}T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/substitute.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function t(l,s){return!l||!s?l:l.replace(/\\?\{([^{}]+)\}/g,function(c,r){return c.charAt(0)==="\\"?c.slice(1):s[r]===void 0?"":s[r]})}T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/throttle.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(t,l,s){var c,r,h,n,i=0;s||(s={});var a=function(){i=s.leading===!1?0:Date.now(),c=null,n=t.apply(r,h),c||(r=h=null)},o=function(){var f=Date.now();!i&&s.leading===!1&&(i=f);var v=l-(f-i);return r=this,h=arguments,v<=0||v>l?(c&&(clearTimeout(c),c=null),i=f,n=t.apply(r,h),c||(r=h=null)):!c&&s.trailing!==!1&&(c=setTimeout(a,v)),n};return o.cancel=function(){clearTimeout(c),i=0,c=r=h=null},o}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-array.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js");T.default=function(l){return t.default(l)?Array.prototype.slice.call(l):[]}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-degree.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=180/Math.PI,l=function(c){return t*c};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-integer.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=parseInt},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-radian.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=Math.PI/180,l=function(c){return t*c};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-string.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-nil.js");T.default=function(l){return t.default(l)?"":l.toString()}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/union.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/uniq.js"),l=function(){for(var c=[],r=0;r<arguments.length;r++)c[r]=arguments[r];return t.default([].concat.apply([],c))};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/uniq.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/contains.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js"),s=function(r){var h=[];return l.default(r,function(n){t.default(h,n)||h.push(n)}),h};T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/unique-id.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t={};T.default=function(l){return l=l||"g",t[l]?t[l]+=1:t[l]=1,l+t[l]}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/upper-case.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-string.js"),l=function(c){return t.default(c).toUpperCase()};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/upper-first.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-string.js"),l=function(c){var r=t.default(c);return r.charAt(0).toUpperCase()+r.substring(1)};T.default=l},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/values-of-key.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-nil.js");T.default=function(s,c){for(var r=[],h={},n=0;n<s.length;n++){var i=s[n],a=i[c];if(!l.default(a)){t.default(a)||(a=[a]);for(var o=0;o<a.length;o++){var u=a[o];h[u]||(r.push(u),h[u]=!0)}}}return r}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/values.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js"),s=Object.values?function(c){return Object.values(c)}:function(c){var r=[];return t.default(c,function(h,n){l.default(c)&&n==="prototype"||r.push(h)}),r};T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/wrap-behavior.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function t(l,s){if(l["_wrap_"+s])return l["_wrap_"+s];var c=function(h){l[s](h)};return l["_wrap_"+s]=c,c}T.default=t},"./node_modules/_abs-svg-path@0.1.1@abs-svg-path/index.js":function(E,T){E.exports=e;function e(t){var l=0,s=0,c=0,r=0;return t.map(function(h){h=h.slice();var n=h[0],i=n.toUpperCase();if(n!=i)switch(h[0]=i,n){case"a":h[6]+=c,h[7]+=r;break;case"v":h[1]+=r;break;case"h":h[1]+=c;break;default:for(var a=1;a<h.length;)h[a++]+=c,h[a++]+=r}switch(i){case"Z":c=l,r=s;break;case"H":c=h[1];break;case"V":r=h[1];break;case"M":c=l=h[1],r=s=h[2];break;default:c=h[h.length-2],r=h[h.length-1]}return h})}},"./node_modules/_d3-array@1.2.4@d3-array/dist/d3-array.js":function(E,T,e){(function(t,l){l(T)})(this,function(t){"use strict";function l(z,$){return z<$?-1:z>$?1:z>=$?0:NaN}function s(z){return z.length===1&&(z=c(z)),{left:function(dt,et,ot,pt){for(ot==null&&(ot=0),pt==null&&(pt=dt.length);ot<pt;){var H=ot+pt>>>1;z(dt[H],et)<0?ot=H+1:pt=H}return ot},right:function(dt,et,ot,pt){for(ot==null&&(ot=0),pt==null&&(pt=dt.length);ot<pt;){var H=ot+pt>>>1;z(dt[H],et)>0?pt=H:ot=H+1}return ot}}}function c(z){return function($,dt){return l(z($),dt)}}var r=s(l),h=r.right,n=r.left;function i(z,$){$==null&&($=a);for(var dt=0,et=z.length-1,ot=z[0],pt=new Array(et<0?0:et);dt<et;)pt[dt]=$(ot,ot=z[++dt]);return pt}function a(z,$){return[z,$]}function o(z,$,dt){var et=z.length,ot=$.length,pt=new Array(et*ot),H,nt,at,q;for(dt==null&&(dt=a),H=at=0;H<et;++H)for(q=z[H],nt=0;nt<ot;++nt,++at)pt[at]=dt(q,$[nt]);return pt}function u(z,$){return $<z?-1:$>z?1:$>=z?0:NaN}function f(z){return z===null?NaN:+z}function v(z,$){var dt=z.length,et=0,ot=-1,pt=0,H,nt,at=0;if($==null)for(;++ot<dt;)isNaN(H=f(z[ot]))||(nt=H-pt,pt+=nt/++et,at+=nt*(H-pt));else for(;++ot<dt;)isNaN(H=f($(z[ot],ot,z)))||(nt=H-pt,pt+=nt/++et,at+=nt*(H-pt));if(et>1)return at/(et-1)}function b(z,$){var dt=v(z,$);return dt&&Math.sqrt(dt)}function y(z,$){var dt=z.length,et=-1,ot,pt,H;if($==null){for(;++et<dt;)if((ot=z[et])!=null&&ot>=ot)for(pt=H=ot;++et<dt;)(ot=z[et])!=null&&(pt>ot&&(pt=ot),H<ot&&(H=ot))}else for(;++et<dt;)if((ot=$(z[et],et,z))!=null&&ot>=ot)for(pt=H=ot;++et<dt;)(ot=$(z[et],et,z))!=null&&(pt>ot&&(pt=ot),H<ot&&(H=ot));return[pt,H]}var g=Array.prototype,_=g.slice,M=g.map;function x(z){return function(){return z}}function m(z){return z}function S(z,$,dt){z=+z,$=+$,dt=(ot=arguments.length)<2?($=z,z=0,1):ot<3?1:+dt;for(var et=-1,ot=Math.max(0,Math.ceil(($-z)/dt))|0,pt=new Array(ot);++et<ot;)pt[et]=z+et*dt;return pt}var P=Math.sqrt(50),A=Math.sqrt(10),O=Math.sqrt(2);function R(z,$,dt){var et,ot=-1,pt,H,nt;if($=+$,z=+z,dt=+dt,z===$&&dt>0)return[z];if((et=$<z)&&(pt=z,z=$,$=pt),(nt=W(z,$,dt))===0||!isFinite(nt))return[];if(nt>0)for(z=Math.ceil(z/nt),$=Math.floor($/nt),H=new Array(pt=Math.ceil($-z+1));++ot<pt;)H[ot]=(z+ot)*nt;else for(z=Math.floor(z*nt),$=Math.ceil($*nt),H=new Array(pt=Math.ceil(z-$+1));++ot<pt;)H[ot]=(z-ot)/nt;return et&&H.reverse(),H}function W(z,$,dt){var et=($-z)/Math.max(0,dt),ot=Math.floor(Math.log(et)/Math.LN10),pt=et/Math.pow(10,ot);return ot>=0?(pt>=P?10:pt>=A?5:pt>=O?2:1)*Math.pow(10,ot):-Math.pow(10,-ot)/(pt>=P?10:pt>=A?5:pt>=O?2:1)}function F(z,$,dt){var et=Math.abs($-z)/Math.max(0,dt),ot=Math.pow(10,Math.floor(Math.log(et)/Math.LN10)),pt=et/ot;return pt>=P?ot*=10:pt>=A?ot*=5:pt>=O&&(ot*=2),$<z?-ot:ot}function Z(z){return Math.ceil(Math.log(z.length)/Math.LN2)+1}function V(){var z=m,$=y,dt=Z;function et(ot){var pt,H=ot.length,nt,at=new Array(H);for(pt=0;pt<H;++pt)at[pt]=z(ot[pt],pt,ot);var q=$(at),Et=q[0],vt=q[1],Ft=dt(at,Et,vt);Array.isArray(Ft)||(Ft=F(Et,vt,Ft),Ft=S(Math.ceil(Et/Ft)*Ft,vt,Ft));for(var Qt=Ft.length;Ft[0]<=Et;)Ft.shift(),--Qt;for(;Ft[Qt-1]>vt;)Ft.pop(),--Qt;var ee=new Array(Qt+1),Gt;for(pt=0;pt<=Qt;++pt)Gt=ee[pt]=[],Gt.x0=pt>0?Ft[pt-1]:Et,Gt.x1=pt<Qt?Ft[pt]:vt;for(pt=0;pt<H;++pt)nt=at[pt],Et<=nt&&nt<=vt&&ee[h(Ft,nt,0,Qt)].push(ot[pt]);return ee}return et.value=function(ot){return arguments.length?(z=typeof ot=="function"?ot:x(ot),et):z},et.domain=function(ot){return arguments.length?($=typeof ot=="function"?ot:x([ot[0],ot[1]]),et):$},et.thresholds=function(ot){return arguments.length?(dt=typeof ot=="function"?ot:Array.isArray(ot)?x(_.call(ot)):x(ot),et):dt},et}function k(z,$,dt){if(dt==null&&(dt=f),!!(et=z.length)){if(($=+$)<=0||et<2)return+dt(z[0],0,z);if($>=1)return+dt(z[et-1],et-1,z);var et,ot=(et-1)*$,pt=Math.floor(ot),H=+dt(z[pt],pt,z),nt=+dt(z[pt+1],pt+1,z);return H+(nt-H)*(ot-pt)}}function Y(z,$,dt){return z=M.call(z,f).sort(l),Math.ceil((dt-$)/(2*(k(z,.75)-k(z,.25))*Math.pow(z.length,-1/3)))}function K(z,$,dt){return Math.ceil((dt-$)/(3.5*b(z)*Math.pow(z.length,-1/3)))}function it(z,$){var dt=z.length,et=-1,ot,pt;if($==null){for(;++et<dt;)if((ot=z[et])!=null&&ot>=ot)for(pt=ot;++et<dt;)(ot=z[et])!=null&&ot>pt&&(pt=ot)}else for(;++et<dt;)if((ot=$(z[et],et,z))!=null&&ot>=ot)for(pt=ot;++et<dt;)(ot=$(z[et],et,z))!=null&&ot>pt&&(pt=ot);return pt}function ct(z,$){var dt=z.length,et=dt,ot=-1,pt,H=0;if($==null)for(;++ot<dt;)isNaN(pt=f(z[ot]))?--et:H+=pt;else for(;++ot<dt;)isNaN(pt=f($(z[ot],ot,z)))?--et:H+=pt;if(et)return H/et}function ht(z,$){var dt=z.length,et=-1,ot,pt=[];if($==null)for(;++et<dt;)isNaN(ot=f(z[et]))||pt.push(ot);else for(;++et<dt;)isNaN(ot=f($(z[et],et,z)))||pt.push(ot);return k(pt.sort(l),.5)}function ut(z){for(var $=z.length,dt,et=-1,ot=0,pt,H;++et<$;)ot+=z[et].length;for(pt=new Array(ot);--$>=0;)for(H=z[$],dt=H.length;--dt>=0;)pt[--ot]=H[dt];return pt}function It(z,$){var dt=z.length,et=-1,ot,pt;if($==null){for(;++et<dt;)if((ot=z[et])!=null&&ot>=ot)for(pt=ot;++et<dt;)(ot=z[et])!=null&&pt>ot&&(pt=ot)}else for(;++et<dt;)if((ot=$(z[et],et,z))!=null&&ot>=ot)for(pt=ot;++et<dt;)(ot=$(z[et],et,z))!=null&&pt>ot&&(pt=ot);return pt}function Nt(z,$){for(var dt=$.length,et=new Array(dt);dt--;)et[dt]=z[$[dt]];return et}function Lt(z,$){if(!!(dt=z.length)){var dt,et=0,ot=0,pt,H=z[ot];for($==null&&($=l);++et<dt;)($(pt=z[et],H)<0||$(H,H)!==0)&&(H=pt,ot=et);if($(H,H)===0)return ot}}function _t(z,$,dt){for(var et=(dt==null?z.length:dt)-($=$==null?0:+$),ot,pt;et;)pt=Math.random()*et--|0,ot=z[et+$],z[et+$]=z[pt+$],z[pt+$]=ot;return z}function mt(z,$){var dt=z.length,et=-1,ot,pt=0;if($==null)for(;++et<dt;)(ot=+z[et])&&(pt+=ot);else for(;++et<dt;)(ot=+$(z[et],et,z))&&(pt+=ot);return pt}function At(z){if(!(pt=z.length))return[];for(var $=-1,dt=It(z,rt),et=new Array(dt);++$<dt;)for(var ot=-1,pt,H=et[$]=new Array(pt);++ot<pt;)H[ot]=z[ot][$];return et}function rt(z){return z.length}function Mt(){return At(arguments)}t.bisect=h,t.bisectRight=h,t.bisectLeft=n,t.ascending=l,t.bisector=s,t.cross=o,t.descending=u,t.deviation=b,t.extent=y,t.histogram=V,t.thresholdFreedmanDiaconis=Y,t.thresholdScott=K,t.thresholdSturges=Z,t.max=it,t.mean=ct,t.median=ht,t.merge=ut,t.min=It,t.pairs=i,t.permute=Nt,t.quantile=k,t.range=S,t.scan=Lt,t.shuffle=_t,t.sum=mt,t.ticks=R,t.tickIncrement=W,t.tickStep=F,t.transpose=At,t.variance=v,t.zip=Mt,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-array@2.11.0@d3-array/dist/d3-array.js":function(E,T,e){var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js");(function(l,s){s(T)})(this,function(l){"use strict";function s(je,We){return je<We?-1:je>We?1:je>=We?0:NaN}function c(je){var We=je,Ye=je;je.length===1&&(We=function(Ln,nr){return je(Ln)-nr},Ye=r(je));function fn(bn,Ln,nr,Yn){for(nr==null&&(nr=0),Yn==null&&(Yn=bn.length);nr<Yn;){var Mn=nr+Yn>>>1;Ye(bn[Mn],Ln)<0?nr=Mn+1:Yn=Mn}return nr}function mn(bn,Ln,nr,Yn){for(nr==null&&(nr=0),Yn==null&&(Yn=bn.length);nr<Yn;){var Mn=nr+Yn>>>1;Ye(bn[Mn],Ln)>0?Yn=Mn:nr=Mn+1}return nr}function jn(bn,Ln,nr,Yn){nr==null&&(nr=0),Yn==null&&(Yn=bn.length);var Mn=fn(bn,Ln,nr,Yn-1);return Mn>nr&&We(bn[Mn-1],Ln)>-We(bn[Mn],Ln)?Mn-1:Mn}return{left:fn,center:jn,right:mn}}function r(je){return function(We,Ye){return s(je(We),Ye)}}function h(je){return je===null?NaN:+je}function n(je,We){var Ye,fn,mn,jn,bn,Ln,nr,mn,Yn,Mn,Rr,pr,zr;return t.__generator(this,function(Pi){switch(Pi.label){case 0:if(We!==void 0)return[3,9];Pi.label=1;case 1:Pi.trys.push([1,6,7,8]),Ye=t.__values(je),fn=Ye.next(),Pi.label=2;case 2:return fn.done?[3,5]:(mn=fn.value,mn!=null&&(mn=+mn)>=mn?[4,mn]:[3,4]);case 3:Pi.sent(),Pi.label=4;case 4:return fn=Ye.next(),[3,2];case 5:return[3,8];case 6:return jn=Pi.sent(),Mn={error:jn},[3,8];case 7:try{fn&&!fn.done&&(Rr=Ye.return)&&Rr.call(Ye)}finally{if(Mn)throw Mn.error}return[7];case 8:return[3,17];case 9:bn=-1,Pi.label=10;case 10:Pi.trys.push([10,15,16,17]),Ln=t.__values(je),nr=Ln.next(),Pi.label=11;case 11:return nr.done?[3,14]:(mn=nr.value,(mn=We(mn,++bn,je))!=null&&(mn=+mn)>=mn?[4,mn]:[3,13]);case 12:Pi.sent(),Pi.label=13;case 13:return nr=Ln.next(),[3,11];case 14:return[3,17];case 15:return Yn=Pi.sent(),pr={error:Yn},[3,17];case 16:try{nr&&!nr.done&&(zr=Ln.return)&&zr.call(Ln)}finally{if(pr)throw pr.error}return[7];case 17:return[2]}})}var i=c(s),a=i.right,o=i.left,u=c(h).center;function f(je,We){var Ye,fn,mn,jn,bn=0;if(We===void 0)try{for(var Ln=t.__values(je),nr=Ln.next();!nr.done;nr=Ln.next()){var Yn=nr.value;Yn!=null&&(Yn=+Yn)>=Yn&&++bn}}catch(zr){Ye={error:zr}}finally{try{nr&&!nr.done&&(fn=Ln.return)&&fn.call(Ln)}finally{if(Ye)throw Ye.error}}else{var Mn=-1;try{for(var Rr=t.__values(je),pr=Rr.next();!pr.done;pr=Rr.next()){var Yn=pr.value;(Yn=We(Yn,++Mn,je))!=null&&(Yn=+Yn)>=Yn&&++bn}}catch(zr){mn={error:zr}}finally{try{pr&&!pr.done&&(jn=Rr.return)&&jn.call(Rr)}finally{if(mn)throw mn.error}}}return bn}function v(je){return je.length|0}function b(je){return!(je>0)}function y(je){return typeof je!="object"||"length"in je?je:Array.from(je)}function g(je){return function(We){return je.apply(void 0,t.__spread(We))}}function _(){for(var je=[],We=0;We<arguments.length;We++)je[We]=arguments[We];var Ye=typeof je[je.length-1]=="function"&&g(je.pop());je=je.map(y);var fn=je.map(v),mn=je.length-1,jn=new Array(mn+1).fill(0),bn=[];if(mn<0||fn.some(b))return bn;for(;;){bn.push(jn.map(function(nr,Yn){return je[Yn][nr]}));for(var Ln=mn;++jn[Ln]===fn[Ln];){if(Ln===0)return Ye?bn.map(Ye):bn;jn[Ln--]=0}}}function M(je,We){var Ye=0,fn=0;return Float64Array.from(je,We===void 0?function(mn){return Ye+=+mn||0}:function(mn){return Ye+=+We(mn,fn++,je)||0})}function x(je,We){return We<je?-1:We>je?1:We>=je?0:NaN}function m(je,We){var Ye,fn,mn,jn,bn=0,Ln,nr=0,Yn=0;if(We===void 0)try{for(var Mn=t.__values(je),Rr=Mn.next();!Rr.done;Rr=Mn.next()){var pr=Rr.value;pr!=null&&(pr=+pr)>=pr&&(Ln=pr-nr,nr+=Ln/++bn,Yn+=Ln*(pr-nr))}}catch(Ua){Ye={error:Ua}}finally{try{Rr&&!Rr.done&&(fn=Mn.return)&&fn.call(Mn)}finally{if(Ye)throw Ye.error}}else{var zr=-1;try{for(var Pi=t.__values(je),Oa=Pi.next();!Oa.done;Oa=Pi.next()){var pr=Oa.value;(pr=We(pr,++zr,je))!=null&&(pr=+pr)>=pr&&(Ln=pr-nr,nr+=Ln/++bn,Yn+=Ln*(pr-nr))}}catch(Ua){mn={error:Ua}}finally{try{Oa&&!Oa.done&&(jn=Pi.return)&&jn.call(Pi)}finally{if(mn)throw mn.error}}}if(bn>1)return Yn/(bn-1)}function S(je,We){var Ye=m(je,We);return Ye&&Math.sqrt(Ye)}function P(je,We){var Ye,fn,mn,jn,bn,Ln;if(We===void 0)try{for(var nr=t.__values(je),Yn=nr.next();!Yn.done;Yn=nr.next()){var Mn=Yn.value;Mn!=null&&(bn===void 0?Mn>=Mn&&(bn=Ln=Mn):(bn>Mn&&(bn=Mn),Ln<Mn&&(Ln=Mn)))}}catch(Pi){Ye={error:Pi}}finally{try{Yn&&!Yn.done&&(fn=nr.return)&&fn.call(nr)}finally{if(Ye)throw Ye.error}}else{var Rr=-1;try{for(var pr=t.__values(je),zr=pr.next();!zr.done;zr=pr.next()){var Mn=zr.value;(Mn=We(Mn,++Rr,je))!=null&&(bn===void 0?Mn>=Mn&&(bn=Ln=Mn):(bn>Mn&&(bn=Mn),Ln<Mn&&(Ln=Mn)))}}catch(Pi){mn={error:Pi}}finally{try{zr&&!zr.done&&(jn=pr.return)&&jn.call(pr)}finally{if(mn)throw mn.error}}}return[bn,Ln]}var A=function(){function je(){this._partials=new Float64Array(32),this._n=0}return je.prototype.add=function(We){for(var Ye=this._partials,fn=0,mn=0;mn<this._n&&mn<32;mn++){var jn=Ye[mn],bn=We+jn,Ln=Math.abs(We)<Math.abs(jn)?We-(bn-jn):jn-(bn-We);Ln&&(Ye[fn++]=Ln),We=bn}return Ye[fn]=We,this._n=fn+1,this},je.prototype.valueOf=function(){var We=this._partials,Ye=this._n,fn,mn,jn,bn=0;if(Ye>0){for(bn=We[--Ye];Ye>0&&(fn=bn,mn=We[--Ye],bn=fn+mn,jn=mn-(bn-fn),!jn););Ye>0&&(jn<0&&We[Ye-1]<0||jn>0&&We[Ye-1]>0)&&(mn=jn*2,fn=bn+mn,mn==fn-bn&&(bn=fn))}return bn},je}();function O(je,We){var Ye,fn,mn,jn,bn=new A;if(We===void 0)try{for(var Ln=t.__values(je),nr=Ln.next();!nr.done;nr=Ln.next()){var Yn=nr.value;(Yn=+Yn)&&bn.add(Yn)}}catch(zr){Ye={error:zr}}finally{try{nr&&!nr.done&&(fn=Ln.return)&&fn.call(Ln)}finally{if(Ye)throw Ye.error}}else{var Mn=-1;try{for(var Rr=t.__values(je),pr=Rr.next();!pr.done;pr=Rr.next()){var Yn=pr.value;(Yn=+We(Yn,++Mn,je))&&bn.add(Yn)}}catch(zr){mn={error:zr}}finally{try{pr&&!pr.done&&(jn=Rr.return)&&jn.call(Rr)}finally{if(mn)throw mn.error}}}return+bn}var R=function(je){t.__extends(We,je);function We(Ye,fn){var mn,jn;Ye===void 0&&(Ye=[]),fn===void 0&&(fn=k);var bn=je.call(this)||this;Object.defineProperties(bn,{_intern:{value:new Map},_key:{value:fn}});try{for(var Ln=t.__values(Ye),nr=Ln.next();!nr.done;nr=Ln.next()){var Yn=t.__read(nr.value,2),Mn=Yn[0],Rr=Yn[1];bn.set(Mn,Rr)}}catch(pr){mn={error:pr}}finally{try{nr&&!nr.done&&(jn=Ln.return)&&jn.call(Ln)}finally{if(mn)throw mn.error}}return bn}return We.prototype.get=function(Ye){return je.prototype.get.call(this,F(this,Ye))},We.prototype.has=function(Ye){return je.prototype.has.call(this,F(this,Ye))},We.prototype.set=function(Ye,fn){return je.prototype.set.call(this,Z(this,Ye),fn)},We.prototype.delete=function(Ye){return je.prototype.delete.call(this,V(this,Ye))},We}(Map),W=function(je){t.__extends(We,je);function We(Ye,fn){var mn,jn;Ye===void 0&&(Ye=[]),fn===void 0&&(fn=k);var bn=je.call(this)||this;Object.defineProperties(bn,{_intern:{value:new Map},_key:{value:fn}});try{for(var Ln=t.__values(Ye),nr=Ln.next();!nr.done;nr=Ln.next()){var Yn=nr.value;bn.add(Yn)}}catch(Mn){mn={error:Mn}}finally{try{nr&&!nr.done&&(jn=Ln.return)&&jn.call(Ln)}finally{if(mn)throw mn.error}}return bn}return We.prototype.has=function(Ye){return je.prototype.has.call(this,F(this,Ye))},We.prototype.add=function(Ye){return je.prototype.add.call(this,Z(this,Ye))},We.prototype.delete=function(Ye){return je.prototype.delete.call(this,V(this,Ye))},We}(Set);function F(je,We){var Ye=je._intern,fn=je._key,mn=fn(We);return Ye.has(mn)?Ye.get(mn):We}function Z(je,We){var Ye=je._intern,fn=je._key,mn=fn(We);return Ye.has(mn)?Ye.get(mn):(Ye.set(mn,We),We)}function V(je,We){var Ye=je._intern,fn=je._key,mn=fn(We);return Ye.has(mn)&&(We=Ye.get(We),Ye.delete(mn)),We}function k(je){return je!==null&&typeof je=="object"?je.valueOf():je}function Y(je){return je}function K(je){for(var We=[],Ye=1;Ye<arguments.length;Ye++)We[Ye-1]=arguments[Ye];return Lt(je,Y,Y,We)}function it(je){for(var We=[],Ye=1;Ye<arguments.length;Ye++)We[Ye-1]=arguments[Ye];return Lt(je,Array.from,Y,We)}function ct(je,We){for(var Ye=[],fn=2;fn<arguments.length;fn++)Ye[fn-2]=arguments[fn];return Lt(je,Y,We,Ye)}function ht(je,We){for(var Ye=[],fn=2;fn<arguments.length;fn++)Ye[fn-2]=arguments[fn];return Lt(je,Array.from,We,Ye)}function ut(je){for(var We=[],Ye=1;Ye<arguments.length;Ye++)We[Ye-1]=arguments[Ye];return Lt(je,Y,Nt,We)}function It(je){for(var We=[],Ye=1;Ye<arguments.length;Ye++)We[Ye-1]=arguments[Ye];return Lt(je,Array.from,Nt,We)}function Nt(je){if(je.length!==1)throw new Error("duplicate key");return je[0]}function Lt(je,We,Ye,fn){return function mn(jn,bn){var Ln,nr,Yn,Mn;if(bn>=fn.length)return Ye(jn);var Rr=new R,pr=fn[bn++],zr=-1;try{for(var Pi=t.__values(jn),Oa=Pi.next();!Oa.done;Oa=Pi.next()){var Ua=Oa.value,ro=pr(Ua,++zr,jn),Ko=Rr.get(ro);Ko?Ko.push(Ua):Rr.set(ro,[Ua])}}catch(To){Ln={error:To}}finally{try{Oa&&!Oa.done&&(nr=Pi.return)&&nr.call(Pi)}finally{if(Ln)throw Ln.error}}try{for(var _a=t.__values(Rr),co=_a.next();!co.done;co=_a.next()){var Xo=t.__read(co.value,2),ro=Xo[0],io=Xo[1];Rr.set(ro,mn(io,bn))}}catch(To){Yn={error:To}}finally{try{co&&!co.done&&(Mn=_a.return)&&Mn.call(_a)}finally{if(Yn)throw Yn.error}}return We(Rr)}(je,0)}function _t(je,We){return Array.from(We,function(Ye){return je[Ye]})}function mt(je){for(var We=[],Ye=1;Ye<arguments.length;Ye++)We[Ye-1]=arguments[Ye];if(typeof je[Symbol.iterator]!="function")throw new TypeError("values is not iterable");je=Array.from(je);var fn=t.__read(We,1),mn=fn[0],jn=mn===void 0?s:mn;if(jn.length===1||We.length>1){var bn=Uint32Array.from(je,function(Ln,nr){return nr});return We.length>1?(We=We.map(function(Ln){return je.map(Ln)}),bn.sort(function(Ln,nr){var Yn,Mn;try{for(var Rr=t.__values(We),pr=Rr.next();!pr.done;pr=Rr.next()){var zr=pr.value,Pi=s(zr[Ln],zr[nr]);if(Pi)return Pi}}catch(Oa){Yn={error:Oa}}finally{try{pr&&!pr.done&&(Mn=Rr.return)&&Mn.call(Rr)}finally{if(Yn)throw Yn.error}}})):(jn=je.map(jn),bn.sort(function(Ln,nr){return s(jn[Ln],jn[nr])})),_t(je,bn)}return je.sort(jn)}function At(je,We,Ye){return(We.length===1?mt(ct(je,We,Ye),function(fn,mn){var jn=t.__read(fn,2),bn=jn[0],Ln=jn[1],nr=t.__read(mn,2),Yn=nr[0],Mn=nr[1];return s(Ln,Mn)||s(bn,Yn)}):mt(K(je,Ye),function(fn,mn){var jn=t.__read(fn,2),bn=jn[0],Ln=jn[1],nr=t.__read(mn,2),Yn=nr[0],Mn=nr[1];return We(Ln,Mn)||s(bn,Yn)})).map(function(fn){var mn=t.__read(fn,1),jn=mn[0];return jn})}var rt=Array.prototype,Mt=rt.slice;function z(je){return function(){return je}}var $=Math.sqrt(50),dt=Math.sqrt(10),et=Math.sqrt(2);function ot(je,We,Ye){var fn,mn=-1,jn,bn,Ln;if(We=+We,je=+je,Ye=+Ye,je===We&&Ye>0)return[je];if((fn=We<je)&&(jn=je,je=We,We=jn),(Ln=pt(je,We,Ye))===0||!isFinite(Ln))return[];if(Ln>0)for(je=Math.ceil(je/Ln),We=Math.floor(We/Ln),bn=new Array(jn=Math.ceil(We-je+1));++mn<jn;)bn[mn]=(je+mn)*Ln;else for(Ln=-Ln,je=Math.ceil(je*Ln),We=Math.floor(We*Ln),bn=new Array(jn=Math.ceil(We-je+1));++mn<jn;)bn[mn]=(je+mn)/Ln;return fn&&bn.reverse(),bn}function pt(je,We,Ye){var fn=(We-je)/Math.max(0,Ye),mn=Math.floor(Math.log(fn)/Math.LN10),jn=fn/Math.pow(10,mn);return mn>=0?(jn>=$?10:jn>=dt?5:jn>=et?2:1)*Math.pow(10,mn):-Math.pow(10,-mn)/(jn>=$?10:jn>=dt?5:jn>=et?2:1)}function H(je,We,Ye){var fn=Math.abs(We-je)/Math.max(0,Ye),mn=Math.pow(10,Math.floor(Math.log(fn)/Math.LN10)),jn=fn/mn;return jn>=$?mn*=10:jn>=dt?mn*=5:jn>=et&&(mn*=2),We<je?-mn:mn}function nt(je,We,Ye){for(var fn;;){var mn=pt(je,We,Ye);if(mn===fn||mn===0||!isFinite(mn))return[je,We];mn>0?(je=Math.floor(je/mn)*mn,We=Math.ceil(We/mn)*mn):mn<0&&(je=Math.ceil(je*mn)/mn,We=Math.floor(We*mn)/mn),fn=mn}}function at(je){return Math.ceil(Math.log(f(je))/Math.LN2)+1}function q(){var je=Y,We=P,Ye=at;function fn(mn){var jn;Array.isArray(mn)||(mn=Array.from(mn));var bn,Ln=mn.length,nr,Yn=new Array(Ln);for(bn=0;bn<Ln;++bn)Yn[bn]=je(mn[bn],bn,mn);var Mn=We(Yn),Rr=Mn[0],pr=Mn[1],zr=Ye(Yn,Rr,pr);if(!Array.isArray(zr)){var Pi=pr,Oa=+zr;if(We===P&&(jn=t.__read(nt(Rr,pr,Oa),2),Rr=jn[0],pr=jn[1]),zr=ot(Rr,pr,Oa),zr[zr.length-1]>=pr)if(Pi>=pr&&We===P){var Ua=pt(Rr,pr,Oa);isFinite(Ua)&&(Ua>0?pr=(Math.floor(pr/Ua)+1)*Ua:Ua<0&&(pr=(Math.ceil(pr*-Ua)+1)/-Ua))}else zr.pop()}for(var ro=zr.length;zr[0]<=Rr;)zr.shift(),--ro;for(;zr[ro-1]>pr;)zr.pop(),--ro;var Ko=new Array(ro+1),_a;for(bn=0;bn<=ro;++bn)_a=Ko[bn]=[],_a.x0=bn>0?zr[bn-1]:Rr,_a.x1=bn<ro?zr[bn]:pr;for(bn=0;bn<Ln;++bn)nr=Yn[bn],Rr<=nr&&nr<=pr&&Ko[a(zr,nr,0,ro)].push(mn[bn]);return Ko}return fn.value=function(mn){return arguments.length?(je=typeof mn=="function"?mn:z(mn),fn):je},fn.domain=function(mn){return arguments.length?(We=typeof mn=="function"?mn:z([mn[0],mn[1]]),fn):We},fn.thresholds=function(mn){return arguments.length?(Ye=typeof mn=="function"?mn:Array.isArray(mn)?z(Mt.call(mn)):z(mn),fn):Ye},fn}function Et(je,We){var Ye,fn,mn,jn,bn;if(We===void 0)try{for(var Ln=t.__values(je),nr=Ln.next();!nr.done;nr=Ln.next()){var Yn=nr.value;Yn!=null&&(bn<Yn||bn===void 0&&Yn>=Yn)&&(bn=Yn)}}catch(zr){Ye={error:zr}}finally{try{nr&&!nr.done&&(fn=Ln.return)&&fn.call(Ln)}finally{if(Ye)throw Ye.error}}else{var Mn=-1;try{for(var Rr=t.__values(je),pr=Rr.next();!pr.done;pr=Rr.next()){var Yn=pr.value;(Yn=We(Yn,++Mn,je))!=null&&(bn<Yn||bn===void 0&&Yn>=Yn)&&(bn=Yn)}}catch(zr){mn={error:zr}}finally{try{pr&&!pr.done&&(jn=Rr.return)&&jn.call(Rr)}finally{if(mn)throw mn.error}}}return bn}function vt(je,We){var Ye,fn,mn,jn,bn;if(We===void 0)try{for(var Ln=t.__values(je),nr=Ln.next();!nr.done;nr=Ln.next()){var Yn=nr.value;Yn!=null&&(bn>Yn||bn===void 0&&Yn>=Yn)&&(bn=Yn)}}catch(zr){Ye={error:zr}}finally{try{nr&&!nr.done&&(fn=Ln.return)&&fn.call(Ln)}finally{if(Ye)throw Ye.error}}else{var Mn=-1;try{for(var Rr=t.__values(je),pr=Rr.next();!pr.done;pr=Rr.next()){var Yn=pr.value;(Yn=We(Yn,++Mn,je))!=null&&(bn>Yn||bn===void 0&&Yn>=Yn)&&(bn=Yn)}}catch(zr){mn={error:zr}}finally{try{pr&&!pr.done&&(jn=Rr.return)&&jn.call(Rr)}finally{if(mn)throw mn.error}}}return bn}function Ft(je,We,Ye,fn,mn){for(Ye===void 0&&(Ye=0),fn===void 0&&(fn=je.length-1),mn===void 0&&(mn=s);fn>Ye;){if(fn-Ye>600){var jn=fn-Ye+1,bn=We-Ye+1,Ln=Math.log(jn),nr=.5*Math.exp(2*Ln/3),Yn=.5*Math.sqrt(Ln*nr*(jn-nr)/jn)*(bn-jn/2<0?-1:1),Mn=Math.max(Ye,Math.floor(We-bn*nr/jn+Yn)),Rr=Math.min(fn,Math.floor(We+(jn-bn)*nr/jn+Yn));Ft(je,We,Mn,Rr,mn)}var pr=je[We],zr=Ye,Pi=fn;for(Qt(je,Ye,We),mn(je[fn],pr)>0&&Qt(je,Ye,fn);zr<Pi;){for(Qt(je,zr,Pi),++zr,--Pi;mn(je[zr],pr)<0;)++zr;for(;mn(je[Pi],pr)>0;)--Pi}mn(je[Ye],pr)===0?Qt(je,Ye,Pi):(++Pi,Qt(je,Pi,fn)),Pi<=We&&(Ye=Pi+1),We<=Pi&&(fn=Pi-1)}return je}function Qt(je,We,Ye){var fn=je[We];je[We]=je[Ye],je[Ye]=fn}function ee(je,We,Ye){if(je=Float64Array.from(n(je,Ye)),!!(fn=je.length)){if((We=+We)<=0||fn<2)return vt(je);if(We>=1)return Et(je);var fn,mn=(fn-1)*We,jn=Math.floor(mn),bn=Et(Ft(je,jn).subarray(0,jn+1)),Ln=vt(je.subarray(jn+1));return bn+(Ln-bn)*(mn-jn)}}function Gt(je,We,Ye){if(Ye===void 0&&(Ye=h),!!(fn=je.length)){if((We=+We)<=0||fn<2)return+Ye(je[0],0,je);if(We>=1)return+Ye(je[fn-1],fn-1,je);var fn,mn=(fn-1)*We,jn=Math.floor(mn),bn=+Ye(je[jn],jn,je),Ln=+Ye(je[jn+1],jn+1,je);return bn+(Ln-bn)*(mn-jn)}}function $t(je,We,Ye){return Math.ceil((Ye-We)/(2*(ee(je,.75)-ee(je,.25))*Math.pow(f(je),-1/3)))}function Pe(je,We,Ye){return Math.ceil((Ye-We)/(3.5*S(je)*Math.pow(f(je),-1/3)))}function me(je,We){var Ye,fn,mn,jn,bn,Ln=-1,nr=-1;if(We===void 0)try{for(var Yn=t.__values(je),Mn=Yn.next();!Mn.done;Mn=Yn.next()){var Rr=Mn.value;++nr,Rr!=null&&(bn<Rr||bn===void 0&&Rr>=Rr)&&(bn=Rr,Ln=nr)}}catch(Pi){Ye={error:Pi}}finally{try{Mn&&!Mn.done&&(fn=Yn.return)&&fn.call(Yn)}finally{if(Ye)throw Ye.error}}else try{for(var pr=t.__values(je),zr=pr.next();!zr.done;zr=pr.next()){var Rr=zr.value;(Rr=We(Rr,++nr,je))!=null&&(bn<Rr||bn===void 0&&Rr>=Rr)&&(bn=Rr,Ln=nr)}}catch(Pi){mn={error:Pi}}finally{try{zr&&!zr.done&&(jn=pr.return)&&jn.call(pr)}finally{if(mn)throw mn.error}}return Ln}function le(je,We){var Ye,fn,mn,jn,bn=0,Ln=0;if(We===void 0)try{for(var nr=t.__values(je),Yn=nr.next();!Yn.done;Yn=nr.next()){var Mn=Yn.value;Mn!=null&&(Mn=+Mn)>=Mn&&(++bn,Ln+=Mn)}}catch(Pi){Ye={error:Pi}}finally{try{Yn&&!Yn.done&&(fn=nr.return)&&fn.call(nr)}finally{if(Ye)throw Ye.error}}else{var Rr=-1;try{for(var pr=t.__values(je),zr=pr.next();!zr.done;zr=pr.next()){var Mn=zr.value;(Mn=We(Mn,++Rr,je))!=null&&(Mn=+Mn)>=Mn&&(++bn,Ln+=Mn)}}catch(Pi){mn={error:Pi}}finally{try{zr&&!zr.done&&(jn=pr.return)&&jn.call(pr)}finally{if(mn)throw mn.error}}}if(bn)return Ln/bn}function be(je,We){return ee(je,.5,We)}function ze(je){var We,Ye,fn,mn,jn,bn;return t.__generator(this,function(Ln){switch(Ln.label){case 0:Ln.trys.push([0,5,6,7]),We=t.__values(je),Ye=We.next(),Ln.label=1;case 1:return Ye.done?[3,4]:(fn=Ye.value,[5,t.__values(fn)]);case 2:Ln.sent(),Ln.label=3;case 3:return Ye=We.next(),[3,1];case 4:return[3,7];case 5:return mn=Ln.sent(),jn={error:mn},[3,7];case 6:try{Ye&&!Ye.done&&(bn=We.return)&&bn.call(We)}finally{if(jn)throw jn.error}return[7];case 7:return[2]}})}function Xe(je){return Array.from(ze(je))}function _n(je,We){var Ye,fn,mn,jn,bn,Ln=-1,nr=-1;if(We===void 0)try{for(var Yn=t.__values(je),Mn=Yn.next();!Mn.done;Mn=Yn.next()){var Rr=Mn.value;++nr,Rr!=null&&(bn>Rr||bn===void 0&&Rr>=Rr)&&(bn=Rr,Ln=nr)}}catch(Pi){Ye={error:Pi}}finally{try{Mn&&!Mn.done&&(fn=Yn.return)&&fn.call(Yn)}finally{if(Ye)throw Ye.error}}else try{for(var pr=t.__values(je),zr=pr.next();!zr.done;zr=pr.next()){var Rr=zr.value;(Rr=We(Rr,++nr,je))!=null&&(bn>Rr||bn===void 0&&Rr>=Rr)&&(bn=Rr,Ln=nr)}}catch(Pi){mn={error:Pi}}finally{try{zr&&!zr.done&&(jn=pr.return)&&jn.call(pr)}finally{if(mn)throw mn.error}}return Ln}function Kn(je,We){var Ye,fn;We===void 0&&(We=Hn);var mn=[],jn,bn=!1;try{for(var Ln=t.__values(je),nr=Ln.next();!nr.done;nr=Ln.next()){var Yn=nr.value;bn&&mn.push(We(jn,Yn)),jn=Yn,bn=!0}}catch(Mn){Ye={error:Mn}}finally{try{nr&&!nr.done&&(fn=Ln.return)&&fn.call(Ln)}finally{if(Ye)throw Ye.error}}return mn}function Hn(je,We){return[je,We]}function nn(je,We,Ye){je=+je,We=+We,Ye=(mn=arguments.length)<2?(We=je,je=0,1):mn<3?1:+Ye;for(var fn=-1,mn=Math.max(0,Math.ceil((We-je)/Ye))|0,jn=new Array(mn);++fn<mn;)jn[fn]=je+fn*Ye;return jn}function en(je,We){var Ye,fn,mn,jn;We===void 0&&(We=s);var bn,Ln=!1;if(We.length===1){var nr=void 0;try{for(var Yn=t.__values(je),Mn=Yn.next();!Mn.done;Mn=Yn.next()){var Rr=Mn.value,pr=We(Rr);(Ln?s(pr,nr)<0:s(pr,pr)===0)&&(bn=Rr,nr=pr,Ln=!0)}}catch(Oa){Ye={error:Oa}}finally{try{Mn&&!Mn.done&&(fn=Yn.return)&&fn.call(Yn)}finally{if(Ye)throw Ye.error}}}else try{for(var zr=t.__values(je),Pi=zr.next();!Pi.done;Pi=zr.next()){var pr=Pi.value;(Ln?We(pr,bn)<0:We(pr,pr)===0)&&(bn=pr,Ln=!0)}}catch(Oa){mn={error:Oa}}finally{try{Pi&&!Pi.done&&(jn=zr.return)&&jn.call(zr)}finally{if(mn)throw mn.error}}return bn}function An(je,We){var Ye,fn;if(We===void 0&&(We=s),We.length===1)return _n(je,We);var mn,jn=-1,bn=-1;try{for(var Ln=t.__values(je),nr=Ln.next();!nr.done;nr=Ln.next()){var Yn=nr.value;++bn,(jn<0?We(Yn,Yn)===0:We(Yn,mn)<0)&&(mn=Yn,jn=bn)}}catch(Mn){Ye={error:Mn}}finally{try{nr&&!nr.done&&(fn=Ln.return)&&fn.call(Ln)}finally{if(Ye)throw Ye.error}}return jn}function Nn(je,We){var Ye,fn,mn,jn;We===void 0&&(We=s);var bn,Ln=!1;if(We.length===1){var nr=void 0;try{for(var Yn=t.__values(je),Mn=Yn.next();!Mn.done;Mn=Yn.next()){var Rr=Mn.value,pr=We(Rr);(Ln?s(pr,nr)>0:s(pr,pr)===0)&&(bn=Rr,nr=pr,Ln=!0)}}catch(Oa){Ye={error:Oa}}finally{try{Mn&&!Mn.done&&(fn=Yn.return)&&fn.call(Yn)}finally{if(Ye)throw Ye.error}}}else try{for(var zr=t.__values(je),Pi=zr.next();!Pi.done;Pi=zr.next()){var pr=Pi.value;(Ln?We(pr,bn)>0:We(pr,pr)===0)&&(bn=pr,Ln=!0)}}catch(Oa){mn={error:Oa}}finally{try{Pi&&!Pi.done&&(jn=zr.return)&&jn.call(zr)}finally{if(mn)throw mn.error}}return bn}function hr(je,We){var Ye,fn;if(We===void 0&&(We=s),We.length===1)return me(je,We);var mn,jn=-1,bn=-1;try{for(var Ln=t.__values(je),nr=Ln.next();!nr.done;nr=Ln.next()){var Yn=nr.value;++bn,(jn<0?We(Yn,Yn)===0:We(Yn,mn)>0)&&(mn=Yn,jn=bn)}}catch(Mn){Ye={error:Mn}}finally{try{nr&&!nr.done&&(fn=Ln.return)&&fn.call(Ln)}finally{if(Ye)throw Ye.error}}return jn}function fi(je,We){var Ye=An(je,We);return Ye<0?void 0:Ye}var Oe=Ae(Math.random);function Ae(je){return function(Ye,fn,mn){fn===void 0&&(fn=0),mn===void 0&&(mn=Ye.length);for(var jn=mn-(fn=+fn);jn;){var bn=je()*jn--|0,Ln=Ye[jn+fn];Ye[jn+fn]=Ye[bn+fn],Ye[bn+fn]=Ln}return Ye}}function Jt(je,We){var Ye,fn,mn,jn,bn=0;if(We===void 0)try{for(var Ln=t.__values(je),nr=Ln.next();!nr.done;nr=Ln.next()){var Yn=nr.value;(Yn=+Yn)&&(bn+=Yn)}}catch(zr){Ye={error:zr}}finally{try{nr&&!nr.done&&(fn=Ln.return)&&fn.call(Ln)}finally{if(Ye)throw Ye.error}}else{var Mn=-1;try{for(var Rr=t.__values(je),pr=Rr.next();!pr.done;pr=Rr.next()){var Yn=pr.value;(Yn=+We(Yn,++Mn,je))&&(bn+=Yn)}}catch(zr){mn={error:zr}}finally{try{pr&&!pr.done&&(jn=Rr.return)&&jn.call(Rr)}finally{if(mn)throw mn.error}}}return bn}function ve(je){if(!(jn=je.length))return[];for(var We=-1,Ye=vt(je,Vt),fn=new Array(Ye);++We<Ye;)for(var mn=-1,jn,bn=fn[We]=new Array(jn);++mn<jn;)bn[mn]=je[mn][We];return fn}function Vt(je){return je.length}function ie(){return ve(arguments)}function Ce(je,We){var Ye,fn;if(typeof We!="function")throw new TypeError("test is not a function");var mn=-1;try{for(var jn=t.__values(je),bn=jn.next();!bn.done;bn=jn.next()){var Ln=bn.value;if(!We(Ln,++mn,je))return!1}}catch(nr){Ye={error:nr}}finally{try{bn&&!bn.done&&(fn=jn.return)&&fn.call(jn)}finally{if(Ye)throw Ye.error}}return!0}function ue(je,We){var Ye,fn;if(typeof We!="function")throw new TypeError("test is not a function");var mn=-1;try{for(var jn=t.__values(je),bn=jn.next();!bn.done;bn=jn.next()){var Ln=bn.value;if(We(Ln,++mn,je))return!0}}catch(nr){Ye={error:nr}}finally{try{bn&&!bn.done&&(fn=jn.return)&&fn.call(jn)}finally{if(Ye)throw Ye.error}}return!1}function xe(je,We){var Ye,fn;if(typeof We!="function")throw new TypeError("test is not a function");var mn=[],jn=-1;try{for(var bn=t.__values(je),Ln=bn.next();!Ln.done;Ln=bn.next()){var nr=Ln.value;We(nr,++jn,je)&&mn.push(nr)}}catch(Yn){Ye={error:Yn}}finally{try{Ln&&!Ln.done&&(fn=bn.return)&&fn.call(bn)}finally{if(Ye)throw Ye.error}}return mn}function $e(je,We){if(typeof je[Symbol.iterator]!="function")throw new TypeError("values is not iterable");if(typeof We!="function")throw new TypeError("mapper is not a function");return Array.from(je,function(Ye,fn){return We(Ye,fn,je)})}function Fn(je,We,Ye){var fn,mn;if(typeof We!="function")throw new TypeError("reducer is not a function");var jn=je[Symbol.iterator](),bn,Ln,nr=-1;if(arguments.length<3){if(fn=jn.next(),bn=fn.done,Ye=fn.value,bn)return;++nr}for(;mn=jn.next(),bn=mn.done,Ln=mn.value,!bn;)Ye=We(Ye,Ln,++nr,je);return Ye}function rr(je){if(typeof je[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(je).reverse()}function En(je){for(var We,Ye,fn,mn,jn=[],bn=1;bn<arguments.length;bn++)jn[bn-1]=arguments[bn];je=new Set(je);try{for(var Ln=t.__values(jn),nr=Ln.next();!nr.done;nr=Ln.next()){var Yn=nr.value;try{for(var Mn=(fn=void 0,t.__values(Yn)),Rr=Mn.next();!Rr.done;Rr=Mn.next()){var pr=Rr.value;je.delete(pr)}}catch(zr){fn={error:zr}}finally{try{Rr&&!Rr.done&&(mn=Mn.return)&&mn.call(Mn)}finally{if(fn)throw fn.error}}}}catch(zr){We={error:zr}}finally{try{nr&&!nr.done&&(Ye=Ln.return)&&Ye.call(Ln)}finally{if(We)throw We.error}}return je}function Pn(je,We){var Ye,fn,mn,jn=We[Symbol.iterator](),bn=new Set;try{for(var Ln=t.__values(je),nr=Ln.next();!nr.done;nr=Ln.next()){var Yn=nr.value;if(bn.has(Yn))return!1;for(var Mn=void 0,Rr=void 0;(mn=jn.next(),Mn=mn.value,Rr=mn.done,mn)&&!Rr;){if(Object.is(Yn,Mn))return!1;bn.add(Mn)}}}catch(pr){Ye={error:pr}}finally{try{nr&&!nr.done&&(fn=Ln.return)&&fn.call(Ln)}finally{if(Ye)throw Ye.error}}return!0}function Er(je){return je instanceof Set?je:new Set(je)}function Pr(je){for(var We,Ye,fn,mn,jn=[],bn=1;bn<arguments.length;bn++)jn[bn-1]=arguments[bn];je=new Set(je),jn=jn.map(Er);try{t:for(var Ln=t.__values(je),nr=Ln.next();!nr.done;nr=Ln.next()){var Yn=nr.value;try{for(var Mn=(fn=void 0,t.__values(jn)),Rr=Mn.next();!Rr.done;Rr=Mn.next()){var pr=Rr.value;if(!pr.has(Yn)){je.delete(Yn);continue t}}}catch(zr){fn={error:zr}}finally{try{Rr&&!Rr.done&&(mn=Mn.return)&&mn.call(Mn)}finally{if(fn)throw fn.error}}}}catch(zr){We={error:zr}}finally{try{nr&&!nr.done&&(Ye=Ln.return)&&Ye.call(Ln)}finally{if(We)throw We.error}}return je}function ln(je,We){var Ye,fn,mn,jn=je[Symbol.iterator](),bn=new Set;try{for(var Ln=t.__values(We),nr=Ln.next();!nr.done;nr=Ln.next()){var Yn=nr.value;if(!bn.has(Yn))for(var Mn=void 0,Rr=void 0;mn=jn.next(),Mn=mn.value,Rr=mn.done,mn;){if(Rr)return!1;if(bn.add(Mn),Object.is(Yn,Mn))break}}}catch(pr){Ye={error:pr}}finally{try{nr&&!nr.done&&(fn=Ln.return)&&fn.call(Ln)}finally{if(Ye)throw Ye.error}}return!0}function Cr(je,We){return ln(We,je)}function Ar(){for(var je,We,Ye,fn,mn=[],jn=0;jn<arguments.length;jn++)mn[jn]=arguments[jn];var bn=new Set;try{for(var Ln=t.__values(mn),nr=Ln.next();!nr.done;nr=Ln.next()){var Yn=nr.value;try{for(var Mn=(Ye=void 0,t.__values(Yn)),Rr=Mn.next();!Rr.done;Rr=Mn.next()){var pr=Rr.value;bn.add(pr)}}catch(zr){Ye={error:zr}}finally{try{Rr&&!Rr.done&&(fn=Mn.return)&&fn.call(Mn)}finally{if(Ye)throw Ye.error}}}}catch(zr){je={error:zr}}finally{try{nr&&!nr.done&&(We=Ln.return)&&We.call(Ln)}finally{if(je)throw je.error}}return bn}l.Adder=A,l.InternMap=R,l.InternSet=W,l.ascending=s,l.bin=q,l.bisect=a,l.bisectCenter=u,l.bisectLeft=o,l.bisectRight=a,l.bisector=c,l.count=f,l.cross=_,l.cumsum=M,l.descending=x,l.deviation=S,l.difference=En,l.disjoint=Pn,l.every=Ce,l.extent=P,l.filter=xe,l.fsum=O,l.greatest=Nn,l.greatestIndex=hr,l.group=K,l.groupSort=At,l.groups=it,l.histogram=q,l.index=ut,l.indexes=It,l.intersection=Pr,l.least=en,l.leastIndex=An,l.map=$e,l.max=Et,l.maxIndex=me,l.mean=le,l.median=be,l.merge=Xe,l.min=vt,l.minIndex=_n,l.nice=nt,l.pairs=Kn,l.permute=_t,l.quantile=ee,l.quantileSorted=Gt,l.quickselect=Ft,l.range=nn,l.reduce=Fn,l.reverse=rr,l.rollup=ct,l.rollups=ht,l.scan=fi,l.shuffle=Oe,l.shuffler=Ae,l.some=ue,l.sort=mt,l.subset=Cr,l.sum=Jt,l.superset=ln,l.thresholdFreedmanDiaconis=$t,l.thresholdScott=Pe,l.thresholdSturges=at,l.tickIncrement=pt,l.tickStep=H,l.ticks=ot,l.transpose=ve,l.union=Ar,l.variance=m,l.zip=ie,Object.defineProperty(l,"__esModule",{value:!0})})},"./node_modules/_d3-collection@1.0.7@d3-collection/dist/d3-collection.js":function(E,T,e){(function(t,l){l(T)})(this,function(t){"use strict";var l="$";function s(){}s.prototype=c.prototype={constructor:s,has:function(_){return l+_ in this},get:function(_){return this[l+_]},set:function(_,M){return this[l+_]=M,this},remove:function(_){var M=l+_;return M in this&&delete this[M]},clear:function(){for(var _ in this)_[0]===l&&delete this[_]},keys:function(){var _=[];for(var M in this)M[0]===l&&_.push(M.slice(1));return _},values:function(){var _=[];for(var M in this)M[0]===l&&_.push(this[M]);return _},entries:function(){var _=[];for(var M in this)M[0]===l&&_.push({key:M.slice(1),value:this[M]});return _},size:function(){var _=0;for(var M in this)M[0]===l&&++_;return _},empty:function(){for(var _ in this)if(_[0]===l)return!1;return!0},each:function(_){for(var M in this)M[0]===l&&_(this[M],M.slice(1),this)}};function c(g,_){var M=new s;if(g instanceof s)g.each(function(A,O){M.set(O,A)});else if(Array.isArray(g)){var x=-1,m=g.length,S;if(_==null)for(;++x<m;)M.set(x,g[x]);else for(;++x<m;)M.set(_(S=g[x],x,g),S)}else if(g)for(var P in g)M.set(P,g[P]);return M}function r(){var g=[],_=[],M,x,m;function S(A,O,R,W){if(O>=g.length)return M!=null&&A.sort(M),x!=null?x(A):A;for(var F=-1,Z=A.length,V=g[O++],k,Y,K=c(),it,ct=R();++F<Z;)(it=K.get(k=V(Y=A[F])+""))?it.push(Y):K.set(k,[Y]);return K.each(function(ht,ut){W(ct,ut,S(ht,O,R,W))}),ct}function P(A,O){if(++O>g.length)return A;var R,W=_[O-1];return x!=null&&O>=g.length?R=A.entries():(R=[],A.each(function(F,Z){R.push({key:Z,values:P(F,O)})})),W!=null?R.sort(function(F,Z){return W(F.key,Z.key)}):R}return m={object:function(O){return S(O,0,h,n)},map:function(O){return S(O,0,i,a)},entries:function(O){return P(S(O,0,i,a),0)},key:function(O){return g.push(O),m},sortKeys:function(O){return _[g.length-1]=O,m},sortValues:function(O){return M=O,m},rollup:function(O){return x=O,m}}}function h(){return{}}function n(g,_,M){g[_]=M}function i(){return c()}function a(g,_,M){g.set(_,M)}function o(){}var u=c.prototype;o.prototype=f.prototype={constructor:o,has:u.has,add:function(_){return _+="",this[l+_]=_,this},remove:u.remove,clear:u.clear,values:u.keys,size:u.size,empty:u.empty,each:u.each};function f(g,_){var M=new o;if(g instanceof o)g.each(function(S){M.add(S)});else if(g){var x=-1,m=g.length;if(_==null)for(;++x<m;)M.add(g[x]);else for(;++x<m;)M.add(_(g[x],x,g))}return M}function v(g){var _=[];for(var M in g)_.push(M);return _}function b(g){var _=[];for(var M in g)_.push(g[M]);return _}function y(g){var _=[];for(var M in g)_.push({key:M,value:g[M]});return _}t.nest=r,t.set=f,t.map=c,t.keys=v,t.values=b,t.entries=y,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-composite-projections@1.4.0@d3-composite-projections/d3-composite-projections.js":function(E,T,e){var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js");(function(l,s){s(T,e("./node_modules/_d3-geo@2.0.1@d3-geo/dist/d3-geo.js"),e("./node_modules/_d3-path@2.0.0@d3-path/dist/d3-path.js"))})(this,function(l,s,c){"use strict";var r=1e-6;function h(){}var n=Infinity,i=n,a=-n,o=a,u={point:f,lineStart:h,lineEnd:h,polygonStart:h,polygonEnd:h,result:function(){var At=[[n,i],[a,o]];return a=o=-(i=n=Infinity),At}};function f(mt,At){mt<n&&(n=mt),mt>a&&(a=mt),At<i&&(i=At),At>o&&(o=At)}function v(mt,At,rt){var Mt=At[1][0]-At[0][0],z=At[1][1]-At[0][1],$=mt.clipExtent&&mt.clipExtent();mt.scale(150).translate([0,0]),$!=null&&mt.clipExtent(null),s.geoStream(rt,mt.stream(u));var dt=u.result(),et=Math.min(Mt/(dt[1][0]-dt[0][0]),z/(dt[1][1]-dt[0][1])),ot=+At[0][0]+(Mt-et*(dt[1][0]+dt[0][0]))/2,pt=+At[0][1]+(z-et*(dt[1][1]+dt[0][1]))/2;return $!=null&&mt.clipExtent($),mt.scale(et*150).translate([ot,pt])}function b(mt,At,rt){return v(mt,[[0,0],At],rt)}function y(mt){var At=mt.length;return{point:function(Mt,z){for(var $=-1;++$<At;)mt[$].point(Mt,z)},sphere:function(){for(var Mt=-1;++Mt<At;)mt[Mt].sphere()},lineStart:function(){for(var Mt=-1;++Mt<At;)mt[Mt].lineStart()},lineEnd:function(){for(var Mt=-1;++Mt<At;)mt[Mt].lineEnd()},polygonStart:function(){for(var Mt=-1;++Mt<At;)mt[Mt].polygonStart()},polygonEnd:function(){for(var Mt=-1;++Mt<At;)mt[Mt].polygonEnd()}}}function g(){var mt,At,rt=s.geoAlbers(),Mt,z=s.geoConicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),$,dt=s.geoConicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),et,ot,pt={point:function(q,Et){ot=[q,Et]}};function H(at){var q=at[0],Et=at[1];return ot=null,Mt.point(q,Et),ot||($.point(q,Et),ot)||(et.point(q,Et),ot)}H.invert=function(at){var q=rt.scale(),Et=rt.translate(),vt=(at[0]-Et[0])/q,Ft=(at[1]-Et[1])/q;return(Ft>=.12&&Ft<.234&&vt>=-.425&&vt<-.214?z:Ft>=.166&&Ft<.234&&vt>=-.214&&vt<-.115?dt:rt).invert(at)},H.stream=function(at){return mt&&At===at?mt:mt=y([rt.stream(At=at),z.stream(at),dt.stream(at)])},H.precision=function(at){return arguments.length?(rt.precision(at),z.precision(at),dt.precision(at),nt()):rt.precision()},H.scale=function(at){return arguments.length?(rt.scale(at),z.scale(at*.35),dt.scale(at),H.translate(rt.translate())):rt.scale()},H.translate=function(at){if(!arguments.length)return rt.translate();var q=rt.scale(),Et=+at[0],vt=+at[1];return Mt=rt.translate(at).clipExtent([[Et-.455*q,vt-.238*q],[Et+.455*q,vt+.238*q]]).stream(pt),$=z.translate([Et-.307*q,vt+.201*q]).clipExtent([[Et-.425*q+r,vt+.12*q+r],[Et-.214*q-r,vt+.234*q-r]]).stream(pt),et=dt.translate([Et-.205*q,vt+.212*q]).clipExtent([[Et-.214*q+r,vt+.166*q+r],[Et-.115*q-r,vt+.234*q-r]]).stream(pt),nt()},H.fitExtent=function(at,q){return v(H,at,q)},H.fitSize=function(at,q){return b(H,at,q)};function nt(){return mt=At=null,H}return H.drawCompositionBorders=function(at){var q=rt([-102.91,26.3]),Et=rt([-104,27.5]),vt=rt([-108,29.1]),Ft=rt([-110,29.1]),Qt=rt([-110,26.7]),ee=rt([-112.8,27.6]),Gt=rt([-114.3,30.6]),$t=rt([-119.3,30.1]);at.moveTo(q[0],q[1]),at.lineTo(Et[0],Et[1]),at.lineTo(vt[0],vt[1]),at.lineTo(Ft[0],Ft[1]),at.moveTo(Qt[0],Qt[1]),at.lineTo(ee[0],ee[1]),at.lineTo(Gt[0],Gt[1]),at.lineTo($t[0],$t[1])},H.getCompositionBorders=function(){var at=c.path();return this.drawCompositionBorders(at),at.toString()},H.scale(1070)}function _(mt){var At=mt.length;return{point:function(Mt,z){for(var $=-1;++$<At;)mt[$].point(Mt,z)},sphere:function(){for(var Mt=-1;++Mt<At;)mt[Mt].sphere()},lineStart:function(){for(var Mt=-1;++Mt<At;)mt[Mt].lineStart()},lineEnd:function(){for(var Mt=-1;++Mt<At;)mt[Mt].lineEnd()},polygonStart:function(){for(var Mt=-1;++Mt<At;)mt[Mt].polygonStart()},polygonEnd:function(){for(var Mt=-1;++Mt<At;)mt[Mt].polygonEnd()}}}function M(){var mt,At,rt=s.geoAlbers(),Mt,z=s.geoConicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),$,dt=s.geoConicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),et,ot=s.geoConicEqualArea().rotate([66,0]).center([0,18]).parallels([8,18]),pt,H=s.geoEquirectangular().rotate([173,14]),nt,at=s.geoEquirectangular().rotate([-145,-16.8]),q,Et,vt={point:function(Gt,$t){Et=[Gt,$t]}};function Ft(ee){var Gt=ee[0],$t=ee[1];return Et=null,Mt.point(Gt,$t),Et||($.point(Gt,$t),Et)||(et.point(Gt,$t),Et)||(pt.point(Gt,$t),Et)||(nt.point(Gt,$t),Et)||(q.point(Gt,$t),Et)}Ft.invert=function(ee){var Gt=rt.scale(),$t=rt.translate(),Pe=(ee[0]-$t[0])/Gt,me=(ee[1]-$t[1])/Gt;return(me>=.12&&me<.234&&Pe>=-.425&&Pe<-.214?z:me>=.166&&me<.234&&Pe>=-.214&&Pe<-.115?dt:me>=.2064&&me<.2413&&Pe>=.312&&Pe<.385?ot:me>=.09&&me<.1197&&Pe>=-.4243&&Pe<-.3232?H:me>=-.0518&&me<.0895&&Pe>=-.4243&&Pe<-.3824?at:rt).invert(ee)},Ft.stream=function(ee){return mt&&At===ee?mt:mt=_([rt.stream(At=ee),z.stream(ee),dt.stream(ee),ot.stream(ee),H.stream(ee),at.stream(ee)])},Ft.precision=function(ee){return arguments.length?(rt.precision(ee),z.precision(ee),dt.precision(ee),ot.precision(ee),H.precision(ee),at.precision(ee),Qt()):rt.precision()},Ft.scale=function(ee){return arguments.length?(rt.scale(ee),z.scale(ee*.35),dt.scale(ee),ot.scale(ee),H.scale(ee*2),at.scale(ee),Ft.translate(rt.translate())):rt.scale()},Ft.translate=function(ee){if(!arguments.length)return rt.translate();var Gt=rt.scale(),$t=+ee[0],Pe=+ee[1];return Mt=rt.translate(ee).clipExtent([[$t-.455*Gt,Pe-.238*Gt],[$t+.455*Gt,Pe+.238*Gt]]).stream(vt),$=z.translate([$t-.307*Gt,Pe+.201*Gt]).clipExtent([[$t-.425*Gt+r,Pe+.12*Gt+r],[$t-.214*Gt-r,Pe+.233*Gt-r]]).stream(vt),et=dt.translate([$t-.205*Gt,Pe+.212*Gt]).clipExtent([[$t-.214*Gt+r,Pe+.166*Gt+r],[$t-.115*Gt-r,Pe+.233*Gt-r]]).stream(vt),pt=ot.translate([$t+.35*Gt,Pe+.224*Gt]).clipExtent([[$t+.312*Gt+r,Pe+.2064*Gt+r],[$t+.385*Gt-r,Pe+.233*Gt-r]]).stream(vt),nt=H.translate([$t-.492*Gt,Pe+.09*Gt]).clipExtent([[$t-.4243*Gt+r,Pe+.0903*Gt+r],[$t-.3233*Gt-r,Pe+.1197*Gt-r]]).stream(vt),q=at.translate([$t-.408*Gt,Pe+.018*Gt]).clipExtent([[$t-.4244*Gt+r,Pe-.0519*Gt+r],[$t-.3824*Gt-r,Pe+.0895*Gt-r]]).stream(vt),Qt()},Ft.fitExtent=function(ee,Gt){return v(Ft,ee,Gt)},Ft.fitSize=function(ee,Gt){return b(Ft,ee,Gt)};function Qt(){return mt=At=null,Ft}return Ft.drawCompositionBorders=function(ee){var Gt=rt([-110.4641,28.2805]),$t=rt([-104.0597,28.9528]),Pe=rt([-103.7049,25.1031]),me=rt([-109.8337,24.4531]),le=rt([-124.4745,28.1407]),be=rt([-110.931,30.8844]),ze=rt([-109.8337,24.4531]),Xe=rt([-122.4628,21.8562]),_n=rt([-76.8579,25.1544]),Kn=rt([-72.429,24.2097]),Hn=rt([-72.8265,22.7056]),nn=rt([-77.1852,23.6392]),en=rt([-125.0093,29.7791]),An=rt([-118.5193,31.3262]),Nn=rt([-118.064,29.6912]),hr=rt([-124.4369,28.169]),fi=rt([-128.1314,37.4582]),Oe=rt([-125.2132,38.214]),Ae=rt([-122.3616,30.5115]),Jt=rt([-125.0315,29.8211]);ee.moveTo(Gt[0],Gt[1]),ee.lineTo($t[0],$t[1]),ee.lineTo(Pe[0],Pe[1]),ee.lineTo(Pe[0],Pe[1]),ee.lineTo(me[0],me[1]),ee.closePath(),ee.moveTo(le[0],le[1]),ee.lineTo(be[0],be[1]),ee.lineTo(ze[0],ze[1]),ee.lineTo(ze[0],ze[1]),ee.lineTo(Xe[0],Xe[1]),ee.closePath(),ee.moveTo(_n[0],_n[1]),ee.lineTo(Kn[0],Kn[1]),ee.lineTo(Hn[0],Hn[1]),ee.lineTo(Hn[0],Hn[1]),ee.lineTo(nn[0],nn[1]),ee.closePath(),ee.moveTo(en[0],en[1]),ee.lineTo(An[0],An[1]),ee.lineTo(Nn[0],Nn[1]),ee.lineTo(Nn[0],Nn[1]),ee.lineTo(hr[0],hr[1]),ee.closePath(),ee.moveTo(fi[0],fi[1]),ee.lineTo(Oe[0],Oe[1]),ee.lineTo(Ae[0],Ae[1]),ee.lineTo(Ae[0],Ae[1]),ee.lineTo(Jt[0],Jt[1]),ee.closePath()},Ft.getCompositionBorders=function(){var ee=c.path();return this.drawCompositionBorders(ee),ee.toString()},Ft.scale(1070)}function x(mt){var At=mt.length;return{point:function(Mt,z){for(var $=-1;++$<At;)mt[$].point(Mt,z)},sphere:function(){for(var Mt=-1;++Mt<At;)mt[Mt].sphere()},lineStart:function(){for(var Mt=-1;++Mt<At;)mt[Mt].lineStart()},lineEnd:function(){for(var Mt=-1;++Mt<At;)mt[Mt].lineEnd()},polygonStart:function(){for(var Mt=-1;++Mt<At;)mt[Mt].polygonStart()},polygonEnd:function(){for(var Mt=-1;++Mt<At;)mt[Mt].polygonEnd()}}}function m(){var mt,At,rt=s.geoConicConformal().rotate([5,-38.6]).parallels([0,60]),Mt,z=s.geoConicConformal().rotate([5,-38.6]).parallels([0,60]),$,dt,et={point:function(nt,at){dt=[nt,at]}};function ot(H){var nt=H[0],at=H[1];return dt=null,Mt.point(nt,at),dt||($.point(nt,at),dt)}ot.invert=function(H){var nt=rt.scale(),at=rt.translate(),q=(H[0]-at[0])/nt,Et=(H[1]-at[1])/nt;return(Et>=.05346&&Et<.0897&&q>=-.13388&&q<-.0322?z:rt).invert(H)},ot.stream=function(H){return mt&&At===H?mt:mt=x([rt.stream(At=H),z.stream(H)])},ot.precision=function(H){return arguments.length?(rt.precision(H),z.precision(H),pt()):rt.precision()},ot.scale=function(H){return arguments.length?(rt.scale(H),z.scale(H),ot.translate(rt.translate())):rt.scale()},ot.translate=function(H){if(!arguments.length)return rt.translate();var nt=rt.scale(),at=+H[0],q=+H[1];return Mt=rt.translate(H).clipExtent([[at-.06857*nt,q-.1288*nt],[at+.13249*nt,q+.06*nt]]).stream(et),$=z.translate([at+.1*nt,q-.094*nt]).clipExtent([[at-.1331*nt+r,q+.053457*nt+r],[at-.0354*nt-r,q+.08969*nt-r]]).stream(et),pt()},ot.fitExtent=function(H,nt){return v(ot,H,nt)},ot.fitSize=function(H,nt){return b(ot,H,nt)};function pt(){return mt=At=null,ot}return ot.drawCompositionBorders=function(H){var nt=rt([-14.034675,34.965007]),at=rt([-7.4208899,35.536988]),q=rt([-7.3148275,33.54359]);H.moveTo(nt[0],nt[1]),H.lineTo(at[0],at[1]),H.lineTo(q[0],q[1])},ot.getCompositionBorders=function(){var H=c.path();return this.drawCompositionBorders(H),H.toString()},ot.scale(2700)}function S(mt){var At=mt.length;return{point:function(Mt,z){for(var $=-1;++$<At;)mt[$].point(Mt,z)},sphere:function(){for(var Mt=-1;++Mt<At;)mt[Mt].sphere()},lineStart:function(){for(var Mt=-1;++Mt<At;)mt[Mt].lineStart()},lineEnd:function(){for(var Mt=-1;++Mt<At;)mt[Mt].lineEnd()},polygonStart:function(){for(var Mt=-1;++Mt<At;)mt[Mt].polygonStart()},polygonEnd:function(){for(var Mt=-1;++Mt<At;)mt[Mt].polygonEnd()}}}function P(){var mt,At,rt=s.geoConicConformal().rotate([10,-39.3]).parallels([0,60]),Mt,z=s.geoConicConformal().rotate([17,-32.7]).parallels([0,60]),$,dt=s.geoConicConformal().rotate([27.8,-38.6]).parallels([0,60]),et,ot,pt={point:function(q,Et){ot=[q,Et]}};function H(at){var q=at[0],Et=at[1];return ot=null,Mt.point(q,Et),ot||($.point(q,Et),ot)||(et.point(q,Et),ot)}H.invert=function(at){var q=rt.scale(),Et=rt.translate(),vt=(at[0]-Et[0])/q,Ft=(at[1]-Et[1])/q;return(Ft>=.0093&&Ft<.03678&&vt>=-.03875&&vt<-.0116?z:Ft>=-.0412&&Ft<.0091&&vt>=-.07782&&vt<-.01166?dt:rt).invert(at)},H.stream=function(at){return mt&&At===at?mt:mt=S([rt.stream(At=at),z.stream(at),dt.stream(at)])},H.precision=function(at){return arguments.length?(rt.precision(at),z.precision(at),dt.precision(at),nt()):rt.precision()},H.scale=function(at){return arguments.length?(rt.scale(at),z.scale(at),dt.scale(at*.6),H.translate(rt.translate())):rt.scale()},H.translate=function(at){if(!arguments.length)return rt.translate();var q=rt.scale(),Et=+at[0],vt=+at[1];return Mt=rt.translate(at).clipExtent([[Et-.0115*q,vt-.1138*q],[Et+.2105*q,vt+.0673*q]]).stream(pt),$=z.translate([Et-.0265*q,vt+.025*q]).clipExtent([[Et-.0388*q+r,vt+.0093*q+r],[Et-.0116*q-r,vt+.0368*q-r]]).stream(pt),et=dt.translate([Et-.045*q,vt+-.02*q]).clipExtent([[Et-.0778*q+r,vt-.0413*q+r],[Et-.0117*q-r,vt+.0091*q-r]]).stream(pt),nt()},H.fitExtent=function(at,q){return v(H,at,q)},H.fitSize=function(at,q){return b(H,at,q)};function nt(){return mt=At=null,H}return H.drawCompositionBorders=function(at){var q=rt([-12.8351,38.7113]),Et=rt([-10.8482,38.7633]),vt=rt([-10.8181,37.2072]),Ft=rt([-12.7345,37.1573]),Qt=rt([-16.0753,41.4436]),ee=rt([-10.9168,41.6861]),Gt=rt([-10.8557,38.7747]),$t=rt([-15.6728,38.5505]);at.moveTo(q[0],q[1]),at.lineTo(Et[0],Et[1]),at.lineTo(vt[0],vt[1]),at.lineTo(vt[0],vt[1]),at.lineTo(Ft[0],Ft[1]),at.closePath(),at.moveTo(Qt[0],Qt[1]),at.lineTo(ee[0],ee[1]),at.lineTo(Gt[0],Gt[1]),at.lineTo(Gt[0],Gt[1]),at.lineTo($t[0],$t[1]),at.closePath()},H.getCompositionBorders=function(){var at=c.path();return this.drawCompositionBorders(at),at.toString()},H.scale(4200)}function A(mt){var At=mt.length;return{point:function(Mt,z){for(var $=-1;++$<At;)mt[$].point(Mt,z)},sphere:function(){for(var Mt=-1;++Mt<At;)mt[Mt].sphere()},lineStart:function(){for(var Mt=-1;++Mt<At;)mt[Mt].lineStart()},lineEnd:function(){for(var Mt=-1;++Mt<At;)mt[Mt].lineEnd()},polygonStart:function(){for(var Mt=-1;++Mt<At;)mt[Mt].polygonStart()},polygonEnd:function(){for(var Mt=-1;++Mt<At;)mt[Mt].polygonEnd()}}}function O(){var mt,At,rt=s.geoMercator().rotate([80,1.5]),Mt,z=s.geoMercator().rotate([90.73,1]),$,dt,et={point:function(nt,at){dt=[nt,at]}};function ot(H){var nt=H[0],at=H[1];return dt=null,Mt.point(nt,at),dt||($.point(nt,at),dt)}ot.invert=function(H){var nt=rt.scale(),at=rt.translate(),q=(H[0]-at[0])/nt,Et=(H[1]-at[1])/nt;return(Et>=-.0676&&Et<-.026&&q>=-.0857&&q<-.0263?z:rt).invert(H)},ot.stream=function(H){return mt&&At===H?mt:mt=A([rt.stream(At=H),z.stream(H)])},ot.precision=function(H){return arguments.length?(rt.precision(H),z.precision(H),pt()):rt.precision()},ot.scale=function(H){return arguments.length?(rt.scale(H),z.scale(H),ot.translate(rt.translate())):rt.scale()},ot.translate=function(H){if(!arguments.length)return rt.translate();var nt=rt.scale(),at=+H[0],q=+H[1];return Mt=rt.translate(H).clipExtent([[at-.0262*nt,q-.0734*nt],[at+.1741*nt,q+.079*nt]]).stream(et),$=z.translate([at-.06*nt,q-.04*nt]).clipExtent([[at-.0857*nt+r,q-.0676*nt+r],[at-.0263*nt-r,q-.026*nt-r]]).stream(et),pt()},ot.fitExtent=function(H,nt){return v(ot,H,nt)},ot.fitSize=function(H,nt){return b(ot,H,nt)};function pt(){return mt=At=null,ot}return ot.drawCompositionBorders=function(H){var nt=rt([-84.9032,2.3757]),at=rt([-81.5047,2.3708]),q=rt([-81.5063,-.01]),Et=rt([-84.9086,-.005]);H.moveTo(nt[0],nt[1]),H.lineTo(at[0],at[1]),H.lineTo(q[0],q[1]),H.lineTo(Et[0],Et[1]),H.closePath()},ot.getCompositionBorders=function(){var H=c.path();return this.drawCompositionBorders(H),H.toString()},ot.scale(3500)}function R(mt){var At=mt.length;return{point:function(Mt,z){for(var $=-1;++$<At;)mt[$].point(Mt,z)},sphere:function(){for(var Mt=-1;++Mt<At;)mt[Mt].sphere()},lineStart:function(){for(var Mt=-1;++Mt<At;)mt[Mt].lineStart()},lineEnd:function(){for(var Mt=-1;++Mt<At;)mt[Mt].lineEnd()},polygonStart:function(){for(var Mt=-1;++Mt<At;)mt[Mt].polygonStart()},polygonEnd:function(){for(var Mt=-1;++Mt<At;)mt[Mt].polygonEnd()}}}function W(){var mt,At,rt=s.geoTransverseMercator().rotate([72,37]),Mt,z=s.geoStereographic().rotate([72,0]),$,dt=s.geoMercator().rotate([80,33.5]),et,ot=s.geoMercator().rotate([110,25]),pt,H,nt={point:function(vt,Ft){H=[vt,Ft]}};function at(Et){var vt=Et[0],Ft=Et[1];return H=null,Mt.point(vt,Ft),H||($.point(vt,Ft),H)||(et.point(vt,Ft),H)||(pt.point(vt,Ft),H)}at.invert=function(Et){var vt=rt.scale(),Ft=rt.translate(),Qt=(Et[0]-Ft[0])/vt,ee=(Et[1]-Ft[1])/vt;return(ee>=.2582&&ee<.32&&Qt>=-.1036&&Qt<-.087?z:ee>=-.01298&&ee<.0133&&Qt>=-.11396&&Qt<-.05944?dt:ee>=.01539&&ee<.03911&&Qt>=-.089&&Qt<-.0588?ot:rt).invert(Et)},at.stream=function(Et){return mt&&At===Et?mt:mt=R([rt.stream(At=Et),z.stream(Et),dt.stream(Et),ot.stream(Et)])},at.precision=function(Et){return arguments.length?(rt.precision(Et),z.precision(Et),dt.precision(Et),ot.precision(Et),q()):rt.precision()},at.scale=function(Et){return arguments.length?(rt.scale(Et),z.scale(Et*.15),dt.scale(Et*1.5),ot.scale(Et*1.5),at.translate(rt.translate())):rt.scale()},at.translate=function(Et){if(!arguments.length)return rt.translate();var vt=rt.scale(),Ft=+Et[0],Qt=+Et[1];return Mt=rt.translate(Et).clipExtent([[Ft-.059*vt,Qt-.3835*vt],[Ft+.4498*vt,Qt+.3375*vt]]).stream(nt),$=z.translate([Ft-.087*vt,Qt+.17*vt]).clipExtent([[Ft-.1166*vt+r,Qt+.2582*vt+r],[Ft-.06*vt-r,Qt+.32*vt-r]]).stream(nt),et=dt.translate([Ft-.092*vt,Qt-0*vt]).clipExtent([[Ft-.114*vt+r,Qt-.013*vt+r],[Ft-.0594*vt-r,Qt+.0133*vt-r]]).stream(nt),pt=ot.translate([Ft-.089*vt,Qt-.0265*vt]).clipExtent([[Ft-.089*vt+r,Qt+.0154*vt+r],[Ft-.0588*vt-r,Qt+.0391*vt-r]]).stream(nt),q()},at.fitExtent=function(Et,vt){return v(at,Et,vt)},at.fitSize=function(Et,vt){return b(at,Et,vt)};function q(){return mt=At=null,at}return at.drawCompositionBorders=function(Et){var vt=rt([-82.6999,-51.3043]),Ft=rt([-77.5442,-51.6631]),Qt=rt([-78.0254,-55.186]),ee=rt([-83.6106,-54.7785]),Gt=rt([-80.0638,-35.984]),$t=rt([-76.2153,-36.1811]),Pe=rt([-76.2994,-37.6839]),me=rt([-80.2231,-37.4757]),le=rt([-78.442,-37.706]),be=rt([-76.263,-37.8054]),ze=rt([-76.344,-39.1595]),Xe=rt([-78.5638,-39.0559]);Et.moveTo(vt[0],vt[1]),Et.lineTo(Ft[0],Ft[1]),Et.lineTo(Qt[0],Qt[1]),Et.lineTo(Qt[0],Qt[1]),Et.lineTo(ee[0],ee[1]),Et.closePath(),Et.moveTo(Gt[0],Gt[1]),Et.lineTo($t[0],$t[1]),Et.lineTo(Pe[0],Pe[1]),Et.lineTo(Pe[0],Pe[1]),Et.lineTo(me[0],me[1]),Et.closePath(),Et.moveTo(le[0],le[1]),Et.lineTo(be[0],be[1]),Et.lineTo(ze[0],ze[1]),Et.lineTo(ze[0],ze[1]),Et.lineTo(Xe[0],Xe[1]),Et.closePath()},at.getCompositionBorders=function(){var Et=c.path();return this.drawCompositionBorders(Et),Et.toString()},at.scale(700)}function F(mt){var At=mt.length;return{point:function(Mt,z){for(var $=-1;++$<At;)mt[$].point(Mt,z)},sphere:function(){for(var Mt=-1;++Mt<At;)mt[Mt].sphere()},lineStart:function(){for(var Mt=-1;++Mt<At;)mt[Mt].lineStart()},lineEnd:function(){for(var Mt=-1;++Mt<At;)mt[Mt].lineEnd()},polygonStart:function(){for(var Mt=-1;++Mt<At;)mt[Mt].polygonStart()},polygonEnd:function(){for(var Mt=-1;++Mt<At;)mt[Mt].polygonEnd()}}}function Z(){var mt,At,rt=s.geoConicEquidistant().rotate([-136,-22]).parallels([40,34]),Mt,z=s.geoConicEquidistant().rotate([-146,-26]).parallels([40,34]),$,dt=s.geoConicEquidistant().rotate([-126,-19]).parallels([40,34]),et,ot,pt={point:function(q,Et){ot=[q,Et]}};function H(at){var q=at[0],Et=at[1];return ot=null,Mt.point(q,Et),ot||($.point(q,Et),ot)||(et.point(q,Et),ot)}H.invert=function(at){var q=rt.scale(),Et=rt.translate(),vt=(at[0]-Et[0])/q,Ft=(at[1]-Et[1])/q;return(Ft>=-.10925&&Ft<-.02701&&vt>=-.135&&vt<-.0397?z:Ft>=.04713&&Ft<.11138&&vt>=-.03986&&vt<.051?dt:rt).invert(at)},H.stream=function(at){return mt&&At===at?mt:mt=F([rt.stream(At=at),z.stream(at),dt.stream(at)])},H.precision=function(at){return arguments.length?(rt.precision(at),z.precision(at),dt.precision(at),nt()):rt.precision()},H.scale=function(at){return arguments.length?(rt.scale(at),z.scale(at),dt.scale(at*.7),H.translate(rt.translate())):rt.scale()},H.translate=function(at){if(!arguments.length)return rt.translate();var q=rt.scale(),Et=+at[0],vt=+at[1];return Mt=rt.translate(at).clipExtent([[Et-.1352*q,vt-.1091*q],[Et+.117*q,vt+.098*q]]).stream(pt),$=z.translate([Et-.0425*q,vt-.005*q]).clipExtent([[Et-.135*q+r,vt-.1093*q+r],[Et-.0397*q-r,vt-.027*q-r]]).stream(pt),et=dt.translate(at).clipExtent([[Et-.0399*q+r,vt+.0471*q+r],[Et+.051*q-r,vt+.1114*q-r]]).stream(pt),nt()},H.fitExtent=function(at,q){return v(H,at,q)},H.fitSize=function(at,q){return b(H,at,q)};function nt(){return mt=At=null,H}return H.drawCompositionBorders=function(at){var q=rt([126.01320483689143,41.621090310215585]),Et=rt([133.04304387025903,42.15087523707186]),vt=rt([133.3021766080688,37.43975444725098]),Ft=rt([126.87889168628224,36.95488945159779]),Qt=rt([132.9,29.8]),ee=rt([134,33]),Gt=rt([139.3,33.2]),$t=rt([139.16,30.5]);at.moveTo(q[0],q[1]),at.lineTo(Et[0],Et[1]),at.lineTo(vt[0],vt[1]),at.lineTo(Ft[0],Ft[1]),at.closePath(),at.moveTo(Qt[0],Qt[1]),at.lineTo(ee[0],ee[1]),at.lineTo(Gt[0],Gt[1]),at.lineTo($t[0],$t[1])},H.getCompositionBorders=function(){var at=c.path();return this.drawCompositionBorders(at),at.toString()},H.scale(2200)}function V(mt){var At=mt.length;return{point:function(Mt,z){for(var $=-1;++$<At;)mt[$].point(Mt,z)},sphere:function(){for(var Mt=-1;++Mt<At;)mt[Mt].sphere()},lineStart:function(){for(var Mt=-1;++Mt<At;)mt[Mt].lineStart()},lineEnd:function(){for(var Mt=-1;++Mt<At;)mt[Mt].lineEnd()},polygonStart:function(){for(var Mt=-1;++Mt<At;)mt[Mt].polygonStart()},polygonEnd:function(){for(var Mt=-1;++Mt<At;)mt[Mt].polygonEnd()}}}function k(){var mt,At,rt=s.geoConicConformal().rotate([-3,-46.2]).parallels([0,60]),Mt,z=s.geoMercator().center([-53.2,3.9]),$,dt=s.geoMercator().center([-61.03,14.67]),et,ot=s.geoMercator().center([-61.46,16.14]),pt,H=s.geoMercator().center([-62.85,17.92]),nt,at=s.geoMercator().center([-56.23,46.93]),q,Et=s.geoMercator().center([45.16,-12.8]),vt,Ft=s.geoMercator().center([55.52,-21.13]),Qt,ee=s.geoMercator().center([165.8,-21.07]),Gt,$t=s.geoMercator().center([-178.1,-14.3]),Pe,me=s.geoMercator().center([-150.55,-17.11]),le,be=s.geoMercator().center([-150.55,-17.11]),ze,Xe,_n={point:function(en,An){Xe=[en,An]}};function Kn(nn){var en=nn[0],An=nn[1];return Xe=null,Mt.point(en,An),Xe||($.point(en,An),Xe)||(et.point(en,An),Xe)||(pt.point(en,An),Xe)||(nt.point(en,An),Xe)||(q.point(en,An),Xe)||(vt.point(en,An),Xe)||(Qt.point(en,An),Xe)||(Gt.point(en,An),Xe)||(Pe.point(en,An),Xe)||(le.point(en,An),Xe)||(ze.point(en,An),Xe)}Kn.invert=function(nn){var en=rt.scale(),An=rt.translate(),Nn=(nn[0]-An[0])/en,hr=(nn[1]-An[1])/en;return(hr>=.029&&hr<.0864&&Nn>=-.14&&Nn<-.0996?z:hr>=0&&hr<.029&&Nn>=-.14&&Nn<-.0996?dt:hr>=-.032&&hr<0&&Nn>=-.14&&Nn<-.0996?ot:hr>=-.052&&hr<-.032&&Nn>=-.14&&Nn<-.0996?H:hr>=-.076&&hr<.052&&Nn>=-.14&&Nn<-.0996?at:hr>=-.076&&hr<-.052&&Nn>=.0967&&Nn<.1371?Et:hr>=-.052&&hr<-.02&&Nn>=.0967&&Nn<.1371?Ft:hr>=-.02&&hr<.012&&Nn>=.0967&&Nn<.1371?ee:hr>=.012&&hr<.033&&Nn>=.0967&&Nn<.1371?$t:hr>=.033&&hr<.0864&&Nn>=.0967&&Nn<.1371?me:rt).invert(nn)},Kn.stream=function(nn){return mt&&At===nn?mt:mt=V([rt.stream(At=nn),z.stream(nn),dt.stream(nn),ot.stream(nn),H.stream(nn),at.stream(nn),Et.stream(nn),Ft.stream(nn),ee.stream(nn),$t.stream(nn),me.stream(nn),be.stream(nn)])},Kn.precision=function(nn){return arguments.length?(rt.precision(nn),z.precision(nn),dt.precision(nn),ot.precision(nn),H.precision(nn),at.precision(nn),Et.precision(nn),Ft.precision(nn),ee.precision(nn),$t.precision(nn),me.precision(nn),be.precision(nn),Hn()):rt.precision()},Kn.scale=function(nn){return arguments.length?(rt.scale(nn),z.scale(nn*.6),dt.scale(nn*1.6),ot.scale(nn*1.4),H.scale(nn*5),at.scale(nn*1.3),Et.scale(nn*1.6),Ft.scale(nn*1.2),ee.scale(nn*.3),$t.scale(nn*2.7),me.scale(nn*.5),be.scale(nn*.06),Kn.translate(rt.translate())):rt.scale()},Kn.translate=function(nn){if(!arguments.length)return rt.translate();var en=rt.scale(),An=+nn[0],Nn=+nn[1];return Mt=rt.translate(nn).clipExtent([[An-.0996*en,Nn-.0908*en],[An+.0967*en,Nn+.0864*en]]).stream(_n),$=z.translate([An-.12*en,Nn+.0575*en]).clipExtent([[An-.14*en+r,Nn+.029*en+r],[An-.0996*en-r,Nn+.0864*en-r]]).stream(_n),et=dt.translate([An-.12*en,Nn+.013*en]).clipExtent([[An-.14*en+r,Nn+0*en+r],[An-.0996*en-r,Nn+.029*en-r]]).stream(_n),pt=ot.translate([An-.12*en,Nn-.014*en]).clipExtent([[An-.14*en+r,Nn-.032*en+r],[An-.0996*en-r,Nn+0*en-r]]).stream(_n),nt=H.translate([An-.12*en,Nn-.044*en]).clipExtent([[An-.14*en+r,Nn-.052*en+r],[An-.0996*en-r,Nn-.032*en-r]]).stream(_n),q=at.translate([An-.12*en,Nn-.065*en]).clipExtent([[An-.14*en+r,Nn-.076*en+r],[An-.0996*en-r,Nn-.052*en-r]]).stream(_n),vt=Et.translate([An+.117*en,Nn-.064*en]).clipExtent([[An+.0967*en+r,Nn-.076*en+r],[An+.1371*en-r,Nn-.052*en-r]]).stream(_n),Qt=Ft.translate([An+.116*en,Nn-.0355*en]).clipExtent([[An+.0967*en+r,Nn-.052*en+r],[An+.1371*en-r,Nn-.02*en-r]]).stream(_n),Gt=ee.translate([An+.116*en,Nn-.0048*en]).clipExtent([[An+.0967*en+r,Nn-.02*en+r],[An+.1371*en-r,Nn+.012*en-r]]).stream(_n),Pe=$t.translate([An+.116*en,Nn+.022*en]).clipExtent([[An+.0967*en+r,Nn+.012*en+r],[An+.1371*en-r,Nn+.033*en-r]]).stream(_n),ze=be.translate([An+.11*en,Nn+.045*en]).clipExtent([[An+.0967*en+r,Nn+.033*en+r],[An+.1371*en-r,Nn+.06*en-r]]).stream(_n),le=me.translate([An+.115*en,Nn+.075*en]).clipExtent([[An+.0967*en+r,Nn+.06*en+r],[An+.1371*en-r,Nn+.0864*en-r]]).stream(_n),Hn()},Kn.fitExtent=function(nn,en){return v(Kn,nn,en)},Kn.fitSize=function(nn,en){return b(Kn,nn,en)};function Hn(){return mt=At=null,Kn}return Kn.drawCompositionBorders=function(nn){var en,An,Nn,hr;en=rt([-7.938886725111036,43.7219460918835]),An=rt([-4.832080896458295,44.12930268549372]),Nn=rt([-4.205299743793263,40.98096346967365]),hr=rt([-7.071796453126152,40.610037319181444]),nn.moveTo(en[0],en[1]),nn.lineTo(An[0],An[1]),nn.lineTo(Nn[0],Nn[1]),nn.lineTo(hr[0],hr[1]),nn.closePath(),en=rt([-8.42751373617692,45.32889452553031]),An=rt([-5.18599305777107,45.7566442062976]),Nn=rt([-4.832080905154431,44.129302726751426]),hr=rt([-7.938886737126192,43.72194613263854]),nn.moveTo(en[0],en[1]),nn.lineTo(An[0],An[1]),nn.lineTo(Nn[0],Nn[1]),nn.lineTo(hr[0],hr[1]),nn.closePath(),en=rt([-9.012656899657046,47.127733821030176]),An=rt([-5.6105244772793155,47.579777861410626]),Nn=rt([-5.185993067168585,45.756644248170346]),hr=rt([-8.427513749141811,45.32889456686326]),nn.moveTo(en[0],en[1]),nn.lineTo(An[0],An[1]),nn.lineTo(Nn[0],Nn[1]),nn.lineTo(hr[0],hr[1]),nn.closePath(),en=rt([-9.405747558985553,48.26506375557457]),An=rt([-5.896175018439575,48.733352850851624]),Nn=rt([-5.610524487556043,47.57977790393761]),hr=rt([-9.012656913808351,47.127733862971255]),nn.moveTo(en[0],en[1]),nn.lineTo(An[0],An[1]),nn.lineTo(Nn[0],Nn[1]),nn.lineTo(hr[0],hr[1]),nn.closePath(),en=rt([-9.908436061346974,49.642448789505856]),An=rt([-6.262026716233124,50.131426841787174]),Nn=rt([-5.896175029331232,48.73335289377258]),hr=rt([-9.40574757396393,48.26506379787767]),nn.moveTo(en[0],en[1]),nn.lineTo(An[0],An[1]),nn.lineTo(Nn[0],Nn[1]),nn.lineTo(hr[0],hr[1]),nn.closePath(),en=rt([11.996907706504462,50.16039028163579]),An=rt([15.649907879773343,49.68279246765253]),Nn=rt([15.156712840526632,48.30371557625831]),hr=rt([11.64122661754411,48.761078240546816]),nn.moveTo(en[0],en[1]),nn.lineTo(An[0],An[1]),nn.lineTo(Nn[0],Nn[1]),nn.lineTo(hr[0],hr[1]),nn.closePath(),en=rt([11.641226606955788,48.7610781975889]),An=rt([15.156712825832164,48.30371553390465]),Nn=rt([14.549932166241172,46.4866532486199]),hr=rt([11.204443787952183,46.91899233914248]),nn.moveTo(en[0],en[1]),nn.lineTo(An[0],An[1]),nn.lineTo(Nn[0],Nn[1]),nn.lineTo(hr[0],hr[1]),nn.closePath(),en=rt([11.204443778297161,46.918992296823646]),An=rt([14.549932152815039,46.486653206856396]),Nn=rt([13.994409796764009,44.695833444323256]),hr=rt([10.805306599253848,45.105133870684924]),nn.moveTo(en[0],en[1]),nn.lineTo(An[0],An[1]),nn.lineTo(Nn[0],Nn[1]),nn.lineTo(hr[0],hr[1]),nn.closePath(),en=rt([10.805306590412085,45.10513382903308]),An=rt([13.99440978444733,44.695833403183606]),Nn=rt([13.654633799024392,43.53552468558152]),hr=rt([10.561516803980956,43.930671459798624]),nn.moveTo(en[0],en[1]),nn.lineTo(An[0],An[1]),nn.lineTo(Nn[0],Nn[1]),nn.lineTo(hr[0],hr[1]),nn.closePath(),en=rt([10.561516795617383,43.93067141859757]),An=rt([13.654633787361952,43.5355246448671]),Nn=rt([12.867691604239901,40.640701985019405]),hr=rt([9.997809515987688,41.00288343254471]),nn.moveTo(en[0],en[1]),nn.lineTo(An[0],An[1]),nn.lineTo(Nn[0],Nn[1]),nn.lineTo(hr[0],hr[1]),nn.closePath(),en=rt([10.8,42.4]),An=rt([12.8,42.13]),nn.moveTo(en[0],en[1]),nn.lineTo(An[0],An[1])},Kn.getCompositionBorders=function(){var nn=c.path();return this.drawCompositionBorders(nn),nn.toString()},Kn.scale(2700)}function Y(mt){var At=mt.length;return{point:function(Mt,z){for(var $=-1;++$<At;)mt[$].point(Mt,z)},sphere:function(){for(var Mt=-1;++Mt<At;)mt[Mt].sphere()},lineStart:function(){for(var Mt=-1;++Mt<At;)mt[Mt].lineStart()},lineEnd:function(){for(var Mt=-1;++Mt<At;)mt[Mt].lineEnd()},polygonStart:function(){for(var Mt=-1;++Mt<At;)mt[Mt].polygonStart()},polygonEnd:function(){for(var Mt=-1;++Mt<At;)mt[Mt].polygonEnd()}}}function K(){var mt,At,rt=s.geoConicConformal().rotate([-10,-53]).parallels([0,60]),Mt,z=s.geoMercator().center([-61.46,16.14]),$,dt=s.geoMercator().center([-53.2,3.9]),et,ot=s.geoConicConformal().rotate([27.8,-38.9]).parallels([0,60]),pt,H=s.geoConicConformal().rotate([25.43,-37.398]).parallels([0,60]),nt,at=s.geoConicConformal().rotate([31.17,-39.539]).parallels([0,60]),q,Et=s.geoConicConformal().rotate([17,-32.7]).parallels([0,60]),vt,Ft=s.geoConicConformal().rotate([16,-28.5]).parallels([0,60]),Qt,ee=s.geoMercator().center([-61.03,14.67]),Gt,$t=s.geoMercator().center([45.16,-12.8]),Pe,me=s.geoMercator().center([55.52,-21.13]),le,be=s.geoConicConformal().rotate([-14.4,-35.95]).parallels([0,60]),ze,Xe,_n={point:function(en,An){Xe=[en,An]}};function Kn(nn){var en=nn[0],An=nn[1];return Xe=null,Mt.point(en,An),Xe||(et.point(en,An),Xe)||(Gt.point(en,An),Xe)||($.point(en,An),Xe)||(Qt.point(en,An),Xe)||(vt.point(en,An),Xe)||(Pe.point(en,An),Xe)||(le.point(en,An),Xe)||(ze.point(en,An),Xe)||(pt.point(en,An),Xe)||(nt.point(en,An),Xe)||(q.point(en,An),Xe)}Kn.invert=function(nn){var en=rt.scale(),An=rt.translate(),Nn=(nn[0]-(An[0]+.08*en))/en,hr=(nn[1]-An[1])/en;return(hr>=-.31&&hr<-.24&&Nn>=.14&&Nn<.24?z:hr>=-.24&&hr<-.17&&Nn>=.14&&Nn<.24?dt:hr>=-.17&&hr<-.12&&Nn>=.21&&Nn<.24?H:hr>=-.17&&hr<-.14&&Nn>=.14&&Nn<.165?at:hr>=-.17&&hr<-.1&&Nn>=.14&&Nn<.24?ot:hr>=-.1&&hr<-.03&&Nn>=.14&&Nn<.24?Et:hr>=-.03&&hr<.04&&Nn>=.14&&Nn<.24?Ft:hr>=-.31&&hr<-.24&&Nn>=.24&&Nn<.34?ee:hr>=-.24&&hr<-.17&&Nn>=.24&&Nn<.34?$t:hr>=-.17&&hr<-.1&&Nn>=.24&&Nn<.34?me:hr>=-.1&&hr<-.03&&Nn>=.24&&Nn<.34?be:rt).invert(nn)},Kn.stream=function(nn){return mt&&At===nn?mt:mt=Y([rt.stream(At=nn),dt.stream(nn),ee.stream(nn),z.stream(nn),Ft.stream(nn),Et.stream(nn),$t.stream(nn),me.stream(nn),be.stream(nn),ot.stream(nn),H.stream(nn),at.stream(nn)])},Kn.precision=function(nn){return arguments.length?(rt.precision(nn),dt.precision(nn),ee.precision(nn),z.precision(nn),Ft.precision(nn),Et.precision(nn),$t.precision(nn),me.precision(nn),be.precision(nn),ot.precision(nn),H.precision(nn),at.precision(nn),Hn()):rt.precision()},Kn.scale=function(nn){return arguments.length?(rt.scale(nn),z.scale(nn*3),dt.scale(nn*.8),ee.scale(nn*3.5),me.scale(nn*2.7),ot.scale(nn*2),H.scale(nn*2),at.scale(nn*2),Et.scale(nn*3),Ft.scale(nn),$t.scale(nn*5.5),be.scale(nn*6),Kn.translate(rt.translate())):rt.scale()},Kn.translate=function(nn){if(!arguments.length)return rt.translate();var en=rt.scale(),An=+nn[0],Nn=+nn[1];return Mt=rt.translate([An-.08*en,Nn]).clipExtent([[An-.51*en,Nn-.33*en],[An+.5*en,Nn+.33*en]]).stream(_n),$=z.translate([An+.19*en,Nn-.275*en]).clipExtent([[An+.14*en+r,Nn-.31*en+r],[An+.24*en-r,Nn-.24*en-r]]).stream(_n),et=dt.translate([An+.19*en,Nn-.205*en]).clipExtent([[An+.14*en+r,Nn-.24*en+r],[An+.24*en-r,Nn-.17*en-r]]).stream(_n),pt=ot.translate([An+.19*en,Nn-.135*en]).clipExtent([[An+.14*en+r,Nn-.17*en+r],[An+.24*en-r,Nn-.1*en-r]]).stream(_n),nt=H.translate([An+.225*en,Nn-.147*en]).clipExtent([[An+.21*en+r,Nn-.17*en+r],[An+.24*en-r,Nn-.12*en-r]]).stream(_n),q=at.translate([An+.153*en,Nn-.15*en]).clipExtent([[An+.14*en+r,Nn-.17*en+r],[An+.165*en-r,Nn-.14*en-r]]).stream(_n),vt=Et.translate([An+.19*en,Nn-.065*en]).clipExtent([[An+.14*en+r,Nn-.1*en+r],[An+.24*en-r,Nn-.03*en-r]]).stream(_n),Qt=Ft.translate([An+.19*en,Nn+.005*en]).clipExtent([[An+.14*en+r,Nn-.03*en+r],[An+.24*en-r,Nn+.04*en-r]]).stream(_n),Gt=ee.translate([An+.29*en,Nn-.275*en]).clipExtent([[An+.24*en+r,Nn-.31*en+r],[An+.34*en-r,Nn-.24*en-r]]).stream(_n),Pe=$t.translate([An+.29*en,Nn-.205*en]).clipExtent([[An+.24*en+r,Nn-.24*en+r],[An+.34*en-r,Nn-.17*en-r]]).stream(_n),le=me.translate([An+.29*en,Nn-.135*en]).clipExtent([[An+.24*en+r,Nn-.17*en+r],[An+.34*en-r,Nn-.1*en-r]]).stream(_n),ze=be.translate([An+.29*en,Nn-.065*en]).clipExtent([[An+.24*en+r,Nn-.1*en+r],[An+.34*en-r,Nn-.03*en-r]]).stream(_n),Hn()},Kn.fitExtent=function(nn,en){return v(Kn,nn,en)},Kn.fitSize=function(nn,en){return b(Kn,nn,en)};function Hn(){return mt=At=null,Kn}return Kn.drawCompositionBorders=function(nn){var en,An,Nn,hr;en=rt([42.45755610828648,63.343658547914934]),An=rt([52.65837266667029,59.35045080290929]),Nn=rt([47.19754502247785,56.12653496548117]),hr=rt([37.673034273363044,59.61638268506111]),nn.moveTo(en[0],en[1]),nn.lineTo(An[0],An[1]),nn.lineTo(Nn[0],Nn[1]),nn.lineTo(hr[0],hr[1]),nn.closePath(),en=rt([59.41110754003403,62.35069727399336]),An=rt([66.75050228640794,57.11797303636038]),Nn=rt([60.236065725110436,54.63331433818992]),hr=rt([52.65837313153311,59.350450804599355]),nn.moveTo(en[0],en[1]),nn.lineTo(An[0],An[1]),nn.lineTo(Nn[0],Nn[1]),nn.lineTo(hr[0],hr[1]),nn.closePath(),en=rt([48.81091130080243,66.93353402634641]),An=rt([59.41110730654679,62.35069740653086]),Nn=rt([52.6583728974441,59.3504509222445]),hr=rt([42.45755631675751,63.34365868805821]),nn.moveTo(en[0],en[1]),nn.lineTo(An[0],An[1]),nn.lineTo(Nn[0],Nn[1]),nn.lineTo(hr[0],hr[1]),nn.closePath(),en=rt([31.054198418446475,52.1080673766184]),An=rt([39.09869284884117,49.400700047190554]),Nn=rt([36.0580811499175,46.02944174908498]),hr=rt([28.690508588835726,48.433126979386415]),nn.moveTo(en[0],en[1]),nn.lineTo(An[0],An[1]),nn.lineTo(Nn[0],Nn[1]),nn.lineTo(hr[0],hr[1]),nn.closePath(),en=rt([33.977877745912025,55.849945501331]),An=rt([42.75328432167726,52.78455122462353]),Nn=rt([39.09869297540224,49.400700176148625]),hr=rt([31.05419851807008,52.10806751810923]),nn.moveTo(en[0],en[1]),nn.lineTo(An[0],An[1]),nn.lineTo(Nn[0],Nn[1]),nn.lineTo(hr[0],hr[1]),nn.closePath(),en=rt([52.658372900759296,59.35045068526415]),An=rt([60.23606549583304,54.63331423800264]),Nn=rt([54.6756370953122,51.892298789399455]),hr=rt([47.19754524788189,56.126534861222794]),nn.moveTo(en[0],en[1]),nn.lineTo(An[0],An[1]),nn.lineTo(Nn[0],Nn[1]),nn.lineTo(hr[0],hr[1]),nn.closePath(),en=rt([47.19754506082455,56.126534735591456]),An=rt([54.675636900123514,51.892298681337095]),Nn=rt([49.94448648951486,48.98775484983285]),hr=rt([42.75328468716108,52.78455126060818]),nn.moveTo(en[0],en[1]),nn.lineTo(An[0],An[1]),nn.lineTo(Nn[0],Nn[1]),nn.lineTo(hr[0],hr[1]),nn.closePath(),en=rt([42.75328453416769,52.78455113209101]),An=rt([49.94448632339758,48.98775473706457]),Nn=rt([45.912339990394315,45.99361784987003]),hr=rt([39.09869317356607,49.40070009378711]),nn.moveTo(en[0],en[1]),nn.lineTo(An[0],An[1]),nn.lineTo(Nn[0],Nn[1]),nn.lineTo(hr[0],hr[1]),nn.closePath(),en=rt([37.673034114296634,59.61638254183119]),An=rt([47.197544835420544,56.126534839849846]),Nn=rt([42.75328447467064,52.78455135314068]),hr=rt([33.977877870363905,55.849945644671145]),nn.moveTo(en[0],en[1]),nn.lineTo(An[0],An[1]),nn.lineTo(Nn[0],Nn[1]),nn.lineTo(hr[0],hr[1]),nn.closePath(),en=rt([44.56748486446032,57.26489367845818]),Nn=rt([43.9335791193588,53.746540942601726]),hr=rt([43,56]),nn.moveTo(en[0],en[1]),nn.lineTo(An[0],An[1]),nn.lineTo(Nn[0],Nn[1]),nn.lineTo(hr[0],hr[1]),nn.closePath(),en=rt([37.673034114296634,59.61638254183119]),An=rt([40.25902691953466,58.83002044222639]),Nn=rt([38.458270492742024,57.26232178028002]),hr=rt([35.97754948030156,58.00266637992386]),nn.moveTo(en[0],en[1]),nn.lineTo(An[0],An[1]),nn.lineTo(Nn[0],Nn[1]),nn.lineTo(hr[0],hr[1]),nn.closePath()},Kn.getCompositionBorders=function(){var nn=c.path();return this.drawCompositionBorders(nn),nn.toString()},Kn.scale(750)}function it(mt){var At=mt.length;return{point:function(Mt,z){for(var $=-1;++$<At;)mt[$].point(Mt,z)},sphere:function(){for(var Mt=-1;++Mt<At;)mt[Mt].sphere()},lineStart:function(){for(var Mt=-1;++Mt<At;)mt[Mt].lineStart()},lineEnd:function(){for(var Mt=-1;++Mt<At;)mt[Mt].lineEnd()},polygonStart:function(){for(var Mt=-1;++Mt<At;)mt[Mt].polygonStart()},polygonEnd:function(){for(var Mt=-1;++Mt<At;)mt[Mt].polygonEnd()}}}function ct(){var mt,At,rt=s.geoConicConformal().rotate([-5.5,-52.2]).parallels([0,60]),Mt,z=s.geoMercator().center([-68.25,12.2]),$,dt=s.geoMercator().center([-63.1,17.5]),et,ot,pt={point:function(q,Et){ot=[q,Et]}};function H(at){var q=t.__read(at,2),Et=q[0],vt=q[1];return ot=null,Mt.point(Et,vt),ot||($.point(Et,vt),ot)||(et.point(Et,vt),ot)}H.invert=function(at){var q=rt.scale(),Et=rt.translate(),vt=(at[0]-Et[0])/q,Ft=(at[1]-Et[1])/q;return(Ft>=-.0067&&Ft<.0015&&vt>=-.0232&&vt<-.0154?z:Ft>=-.022&&Ft<-.014&&vt>=-.023&&vt<-.014?dt:rt).invert(at)},H.stream=function(at){return mt&&At===at?mt:mt=it([rt.stream(At=at),z.stream(at),dt.stream(at)])},H.precision=function(at){return arguments.length?(rt.precision(at),z.precision(at),dt.precision(at),nt()):rt.precision()},H.scale=function(at){return arguments.length?(rt.scale(at),z.scale(at),dt.scale(at),H.translate(rt.translate())):rt.scale()},H.translate=function(at){if(!arguments.length)return rt.translate();var q=rt.scale(),Et=+at[0],vt=+at[1];return Mt=rt.translate(at).clipExtent([[Et-.0245*q,vt-.026*q],[Et+.023*q,vt+.026*q]]).stream(pt),$=z.translate([Et-.0186*q,vt-.00325*q]).clipExtent([[Et-.0232*q+r,vt-.0067*q+r],[Et-.0154*q-r,vt+.0015*q-r]]).stream(pt),et=dt.translate([Et-.0185*q,vt-.017*q]).clipExtent([[Et-.023*q+r,vt-.022*q+r],[Et-.014*q-r,vt-.014*q-r]]).stream(pt),nt()},H.fitExtent=function(at,q){return v(H,at,q)},H.fitSize=function(at,q){return b(H,at,q)};function nt(){return mt=At=null,H}return H.drawCompositionBorders=function(at){var q=rt([3.30573,52.5562]),Et=rt([4.043,52.572]),vt=rt([4.0646,52.1017]),Ft=rt([3.3382,52.0861]),Qt=rt([3.262,53.439]),ee=rt([4.1373,53.4571]),Gt=rt([4.1574,52.9946]),$t=rt([3.2951,52.9768]);at.moveTo(q[0],q[1]),at.lineTo(Et[0],Et[1]),at.lineTo(vt[0],vt[1]),at.lineTo(vt[0],vt[1]),at.lineTo(Ft[0],Ft[1]),at.closePath(),at.moveTo(Qt[0],Qt[1]),at.lineTo(ee[0],ee[1]),at.lineTo(Gt[0],Gt[1]),at.lineTo(Gt[0],Gt[1]),at.lineTo($t[0],$t[1]),at.closePath()},H.getCompositionBorders=function(){var at=c.path();return this.drawCompositionBorders(at),at.toString()},H.scale(4200)}function ht(mt){var At=mt.length;return{point:function(Mt,z){for(var $=-1;++$<At;)mt[$].point(Mt,z)},sphere:function(){for(var Mt=-1;++Mt<At;)mt[Mt].sphere()},lineStart:function(){for(var Mt=-1;++Mt<At;)mt[Mt].lineStart()},lineEnd:function(){for(var Mt=-1;++Mt<At;)mt[Mt].lineEnd()},polygonStart:function(){for(var Mt=-1;++Mt<At;)mt[Mt].polygonStart()},polygonEnd:function(){for(var Mt=-1;++Mt<At;)mt[Mt].polygonEnd()}}}function ut(){var mt,At,rt=s.geoMercator().center([105.25,4]),Mt,z=s.geoMercator().center([118.65,2.86]),$,dt,et={point:function(nt,at){dt=[nt,at]}};function ot(H){var nt=H[0],at=H[1];return dt=null,Mt.point(nt,at),dt||($.point(nt,at),dt)}ot.invert=function(H){var nt=rt.scale(),at=rt.translate(),q=(H[0]-at[0])/nt,Et=(H[1]-at[1])/nt;return(Et>=-.0521&&Et<.0229&&q>=-.0111&&q<.1?z:rt).invert(H)},ot.stream=function(H){return mt&&At===H?mt:mt=ht([rt.stream(At=H),z.stream(H)])},ot.precision=function(H){return arguments.length?(rt.precision(H),z.precision(H),pt()):rt.precision()},ot.scale=function(H){return arguments.length?(rt.scale(H),z.scale(H*.615),ot.translate(rt.translate())):rt.scale()},ot.translate=function(H){if(!arguments.length)return rt.translate();var nt=rt.scale(),at=+H[0],q=+H[1];return Mt=rt.translate(H).clipExtent([[at-.11*nt,q-.0521*nt],[at-.0111*nt,q+.0521*nt]]).stream(et),$=z.translate([at+.09*nt,q-0*nt]).clipExtent([[at-.0111*nt+r,q-.0521*nt+r],[at+.1*nt-r,q+.024*nt-r]]).stream(et),pt()},ot.fitExtent=function(H,nt){return v(ot,H,nt)},ot.fitSize=function(H,nt){return b(ot,H,nt)};function pt(){return mt=At=null,ot}return ot.drawCompositionBorders=function(H){var nt=rt([106.3214,2.0228]),at=rt([105.1843,2.3761]),q=rt([104.2151,3.3618]),Et=rt([104.215,4.5651]);H.moveTo(nt[0],nt[1]),H.lineTo(at[0],at[1]),H.lineTo(q[0],q[1]),H.lineTo(Et[0],Et[1])},ot.getCompositionBorders=function(){var H=c.path();return this.drawCompositionBorders(H),H.toString()},ot.scale(4800)}function It(mt){var At=mt.length;return{point:function(Mt,z){for(var $=-1;++$<At;)mt[$].point(Mt,z)},sphere:function(){for(var Mt=-1;++Mt<At;)mt[Mt].sphere()},lineStart:function(){for(var Mt=-1;++Mt<At;)mt[Mt].lineStart()},lineEnd:function(){for(var Mt=-1;++Mt<At;)mt[Mt].lineEnd()},polygonStart:function(){for(var Mt=-1;++Mt<At;)mt[Mt].polygonStart()},polygonEnd:function(){for(var Mt=-1;++Mt<At;)mt[Mt].polygonEnd()}}}function Nt(){var mt,At,rt=s.geoMercator().rotate([-9.5,-1.5]),Mt,z=s.geoMercator().rotate([-8.6,-3.5]),$,dt=s.geoMercator().rotate([-5.6,1.45]),et,ot,pt={point:function(q,Et){ot=[q,Et]}};function H(at){var q=at[0],Et=at[1];return ot=null,Mt.point(q,Et),ot||($.point(q,Et),ot)||(et.point(q,Et),ot)}H.invert=function(at){var q=rt.scale(),Et=rt.translate(),vt=(at[0]-Et[0])/q,Ft=(at[1]-Et[1])/q;return(Ft>=-.02&&Ft<0&&vt>=-.038&&vt<-.005?z:Ft>=0&&Ft<.02&&vt>=-.038&&vt<-.005?dt:rt).invert(at)},H.stream=function(at){return mt&&At===at?mt:mt=It([rt.stream(At=at),z.stream(at),dt.stream(at)])},H.precision=function(at){return arguments.length?(rt.precision(at),z.precision(at),dt.precision(at),nt()):rt.precision()},H.scale=function(at){return arguments.length?(rt.scale(at),z.scale(at*1.5),dt.scale(at*4),H.translate(rt.translate())):rt.scale()},H.translate=function(at){if(!arguments.length)return rt.translate();var q=rt.scale(),Et=+at[0],vt=+at[1];return Mt=rt.translate(at).clipExtent([[Et-.005*q,vt-.02*q],[Et+.038*q,vt+.02*q]]).stream(pt),$=z.translate([Et-.025*q,vt-.01*q]).clipExtent([[Et-.038*q+r,vt-.02*q+r],[Et-.005*q-r,vt+0*q-r]]).stream(pt),et=dt.translate([Et-.025*q,vt+.01*q]).clipExtent([[Et-.038*q+r,vt-0*q+r],[Et-.005*q-r,vt+.02*q-r]]).stream(pt),nt()},H.fitExtent=function(at,q){return v(H,at,q)},H.fitSize=function(at,q){return b(H,at,q)};function nt(){return mt=At=null,H}return H.drawCompositionBorders=function(at){var q,Et,vt,Ft;q=rt([9.21327272751682,2.645820439454123]),Et=rt([11.679126293239872,2.644755519268689]),vt=rt([11.676845389029227,.35307824637606433]),Ft=rt([9.213572917774014,.35414205204417754]),at.moveTo(q[0],q[1]),at.lineTo(Et[0],Et[1]),at.lineTo(vt[0],vt[1]),at.lineTo(Ft[0],Ft[1]),at.closePath(),q=rt([7.320873711543669,2.64475551449975]),Et=rt([9.213272722738658,2.645820434679803]),vt=rt([9.213422896480349,1.4999812505283054]),Ft=rt([7.322014760520787,1.4989168878985566]),at.moveTo(q[0],q[1]),at.lineTo(Et[0],Et[1]),at.lineTo(vt[0],vt[1]),at.lineTo(Ft[0],Ft[1]),at.closePath(),q=rt([7.3220147605302905,1.4989168783492766]),Et=rt([9.213422896481598,1.499981240979021]),vt=rt([9.213572912999604,.354142056817247]),Ft=rt([7.323154615739809,.353078251154504]),at.moveTo(q[0],q[1]),at.lineTo(Et[0],Et[1]),at.lineTo(vt[0],vt[1]),at.lineTo(Ft[0],Ft[1]),at.closePath()},H.getCompositionBorders=function(){var at=c.path();return this.drawCompositionBorders(at),at.toString()},H.scale(12e3)}function Lt(mt){var At=mt.length;return{point:function(Mt,z){for(var $=-1;++$<At;)mt[$].point(Mt,z)},sphere:function(){for(var Mt=-1;++Mt<At;)mt[Mt].sphere()},lineStart:function(){for(var Mt=-1;++Mt<At;)mt[Mt].lineStart()},lineEnd:function(){for(var Mt=-1;++Mt<At;)mt[Mt].lineEnd()},polygonStart:function(){for(var Mt=-1;++Mt<At;)mt[Mt].polygonStart()},polygonEnd:function(){for(var Mt=-1;++Mt<At;)mt[Mt].polygonEnd()}}}function _t(){var mt,At,rt=s.geoAlbers().rotate([4.4,.8]).center([0,55.4]).parallels([50,60]),Mt,z=s.geoAlbers().rotate([4.4,.8]).center([0,55.4]).parallels([50,60]),$,dt,et={point:function(nt,at){dt=[nt,at]}};function ot(H){var nt=H[0],at=H[1];return dt=null,Mt.point(nt,at),dt||($.point(nt,at),dt)}ot.invert=function(H){var nt=rt.scale(),at=rt.translate(),q=(H[0]-at[0])/nt,Et=(H[1]-at[1])/nt;return(Et>=-.089&&Et<.06&&q>=.029&&q<.046?z:rt).invert(H)},ot.stream=function(H){return mt&&At===H?mt:mt=Lt([rt.stream(At=H),z.stream(H)])},ot.precision=function(H){return arguments.length?(rt.precision(H),z.precision(H),pt()):rt.precision()},ot.scale=function(H){return arguments.length?(rt.scale(H),z.scale(H),ot.translate(rt.translate())):rt.scale()},ot.translate=function(H){if(!arguments.length)return rt.translate();var nt=rt.scale(),at=+H[0],q=+H[1];return Mt=rt.translate(H).clipExtent([[at-.065*nt,q-.089*nt],[at+.075*nt,q+.089*nt]]).stream(et),$=z.translate([at+.01*nt,q+.025*nt]).clipExtent([[at+.029*nt+r,q-.089*nt+r],[at+.046*nt-r,q-.06*nt-r]]).stream(et),pt()},ot.fitExtent=function(H,nt){return v(ot,H,nt)},ot.fitSize=function(H,nt){return b(ot,H,nt)};function pt(){return mt=At=null,ot}return ot.drawCompositionBorders=function(H){var nt,at,q,Et;nt=rt([-1.113205870242365,59.64920050773357]),at=rt([.807899092399606,59.59085836472269]),q=rt([.5778611961420386,57.93467822832577]),Et=rt([-1.25867782078448,57.99029450085142]),H.moveTo(nt[0],nt[1]),H.lineTo(at[0],at[1]),H.lineTo(q[0],q[1]),H.lineTo(Et[0],Et[1]),H.closePath()},ot.getCompositionBorders=function(){var H=c.path();return this.drawCompositionBorders(H),H.toString()},ot.scale(2800)}l.geoAlbersUk=_t,l.geoAlbersUsa=g,l.geoAlbersUsaTerritories=M,l.geoConicConformalEurope=K,l.geoConicConformalFrance=k,l.geoConicConformalNetherlands=ct,l.geoConicConformalPortugal=P,l.geoConicConformalSpain=m,l.geoConicEquidistantJapan=Z,l.geoMercatorEcuador=O,l.geoMercatorEquatorialGuinea=Nt,l.geoMercatorMalaysia=ut,l.geoTransverseMercatorChile=W,Object.defineProperty(l,"__esModule",{value:!0})})},"./node_modules/_d3-dsv@1.2.0@d3-dsv/dist/d3-dsv.js":function(E,T,e){(function(t,l){l(T)})(this,function(t){"use strict";var l={},s={},c=34,r=10,h=13;function n(K){return new Function("d","return {"+K.map(function(it,ct){return JSON.stringify(it)+": d["+ct+'] || ""'}).join(",")+"}")}function i(K,it){var ct=n(K);return function(ht,ut){return it(ct(ht),ut,K)}}function a(K){var it=Object.create(null),ct=[];return K.forEach(function(ht){for(var ut in ht)ut in it||ct.push(it[ut]=ut)}),ct}function o(K,it){var ct=K+"",ht=ct.length;return ht<it?new Array(it-ht+1).join(0)+ct:ct}function u(K){return K<0?"-"+o(-K,6):K>9999?"+"+o(K,6):o(K,4)}function f(K){var it=K.getUTCHours(),ct=K.getUTCMinutes(),ht=K.getUTCSeconds(),ut=K.getUTCMilliseconds();return isNaN(K)?"Invalid Date":u(K.getUTCFullYear())+"-"+o(K.getUTCMonth()+1,2)+"-"+o(K.getUTCDate(),2)+(ut?"T"+o(it,2)+":"+o(ct,2)+":"+o(ht,2)+"."+o(ut,3)+"Z":ht?"T"+o(it,2)+":"+o(ct,2)+":"+o(ht,2)+"Z":ct||it?"T"+o(it,2)+":"+o(ct,2)+"Z":"")}function v(K){var it=new RegExp('["'+K+`
\r]`),ct=K.charCodeAt(0);function ht(rt,Mt){var z,$,dt=ut(rt,function(et,ot){if(z)return z(et,ot-1);$=et,z=Mt?i(et,Mt):n(et)});return dt.columns=$||[],dt}function ut(rt,Mt){var z=[],$=rt.length,dt=0,et=0,ot,pt=$<=0,H=!1;rt.charCodeAt($-1)===r&&--$,rt.charCodeAt($-1)===h&&--$;function nt(){if(pt)return s;if(H)return H=!1,l;var q,Et=dt,vt;if(rt.charCodeAt(Et)===c){for(;dt++<$&&rt.charCodeAt(dt)!==c||rt.charCodeAt(++dt)===c;);return(q=dt)>=$?pt=!0:(vt=rt.charCodeAt(dt++))===r?H=!0:vt===h&&(H=!0,rt.charCodeAt(dt)===r&&++dt),rt.slice(Et+1,q-1).replace(/""/g,'"')}for(;dt<$;){if((vt=rt.charCodeAt(q=dt++))===r)H=!0;else if(vt===h)H=!0,rt.charCodeAt(dt)===r&&++dt;else if(vt!==ct)continue;return rt.slice(Et,q)}return pt=!0,rt.slice(Et,$)}for(;(ot=nt())!==s;){for(var at=[];ot!==l&&ot!==s;)at.push(ot),ot=nt();Mt&&(at=Mt(at,et++))==null||z.push(at)}return z}function It(rt,Mt){return rt.map(function(z){return Mt.map(function($){return At(z[$])}).join(K)})}function Nt(rt,Mt){return Mt==null&&(Mt=a(rt)),[Mt.map(At).join(K)].concat(It(rt,Mt)).join(`
`)}function Lt(rt,Mt){return Mt==null&&(Mt=a(rt)),It(rt,Mt).join(`
`)}function _t(rt){return rt.map(mt).join(`
`)}function mt(rt){return rt.map(At).join(K)}function At(rt){return rt==null?"":rt instanceof Date?f(rt):it.test(rt+="")?'"'+rt.replace(/"/g,'""')+'"':rt}return{parse:ht,parseRows:ut,format:Nt,formatBody:Lt,formatRows:_t,formatRow:mt,formatValue:At}}var b=v(","),y=b.parse,g=b.parseRows,_=b.format,M=b.formatBody,x=b.formatRows,m=b.formatRow,S=b.formatValue,P=v("	"),A=P.parse,O=P.parseRows,R=P.format,W=P.formatBody,F=P.formatRows,Z=P.formatRow,V=P.formatValue;function k(K){for(var it in K){var ct=K[it].trim(),ht,ut;if(!ct)ct=null;else if(ct==="true")ct=!0;else if(ct==="false")ct=!1;else if(ct==="NaN")ct=NaN;else if(!isNaN(ht=+ct))ct=ht;else if(ut=ct.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))Y&&!!ut[4]&&!ut[7]&&(ct=ct.replace(/-/g,"/").replace(/T/," ")),ct=new Date(ct);else continue;K[it]=ct}return K}var Y=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();t.autoType=k,t.csvFormat=_,t.csvFormatBody=M,t.csvFormatRow=m,t.csvFormatRows=x,t.csvFormatValue=S,t.csvParse=y,t.csvParseRows=g,t.dsvFormat=v,t.tsvFormat=R,t.tsvFormatBody=W,t.tsvFormatRow=Z,t.tsvFormatRows=F,t.tsvFormatValue=V,t.tsvParse=A,t.tsvParseRows=O,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-geo-projection@2.1.2@d3-geo-projection/build/d3-geo-projection.js":function(E,T,e){(function(t,l){l(T,e("./node_modules/_d3-geo@1.12.1@d3-geo/dist/d3-geo.js"),e("./node_modules/_d3-array@1.2.4@d3-array/dist/d3-array.js"))})(this,function(t,l,s){"use strict";var c=Math.abs,r=Math.atan,h=Math.atan2,n=Math.cos,i=Math.exp,a=Math.floor,o=Math.log,u=Math.max,f=Math.min,v=Math.pow,b=Math.round,y=Math.sign||function(D){return D>0?1:D<0?-1:0},g=Math.sin,_=Math.tan,M=1e-6,x=1e-12,m=Math.PI,S=m/2,P=m/4,A=Math.SQRT1_2,O=K(2),R=K(m),W=m*2,F=180/m,Z=m/180;function V(D){return D?D/Math.sin(D):1}function k(D){return D>1?S:D<-1?-S:Math.asin(D)}function Y(D){return D>1?0:D<-1?m:Math.acos(D)}function K(D){return D>0?Math.sqrt(D):0}function it(D){return D=i(2*D),(D-1)/(D+1)}function ct(D){return(i(D)-i(-D))/2}function ht(D){return(i(D)+i(-D))/2}function ut(D){return o(D+K(D*D+1))}function It(D){return o(D+K(D*D-1))}function Nt(D){var G=_(D/2),J=2*o(n(D/2))/(G*G);function st(Ct,Ot){var Ut=n(Ct),Ht=n(Ot),qt=g(Ot),fe=Ht*Ut,ye=-((1-fe?o((1+fe)/2)/(1-fe):-.5)+J/(1+fe));return[ye*Ht*g(Ct),ye*qt]}return st.invert=function(Ct,Ot){var Ut=K(Ct*Ct+Ot*Ot),Ht=-D/2,qt=50,fe;if(!Ut)return[0,0];do{var ye=Ht/2,De=n(ye),Ie=g(ye),Ve=_(ye),qe=o(1/De);Ht-=fe=(2/Ve*qe-J*Ve-Ut)/(-qe/(Ie*Ie)+1-J/(2*De*De))}while(c(fe)>M&&--qt>0);var on=g(Ht);return[h(Ct*on,Ut*n(Ht)),k(Ot*on/Ut)]},st}var Lt=function(){var G=S,J=l.geoProjectionMutator(Nt),st=J(G);return st.radius=function(Ct){return arguments.length?J(G=Ct*Z):G*F},st.scale(179.976).clipAngle(147)};function _t(D,G){var J=n(G),st=V(Y(J*n(D/=2)));return[2*J*g(D)*st,g(G)*st]}_t.invert=function(D,G){if(!(D*D+4*G*G>m*m+M)){var J=D,st=G,Ct=25;do{var Ot=g(J),Ut=g(J/2),Ht=n(J/2),qt=g(st),fe=n(st),ye=g(2*st),De=qt*qt,Ie=fe*fe,Ve=Ut*Ut,qe=1-Ie*Ht*Ht,on=qe?Y(fe*Ht)*K(tr=1/qe):tr=0,tr,zn=2*on*fe*Ut-D,cr=on*qt-G,yr=tr*(Ie*Ve+on*fe*Ht*De),Jr=tr*(.5*Ot*ye-on*2*qt*Ut),Wr=tr*.25*(ye*Ut-on*qt*Ie*Ot),bi=tr*(De*Ht+on*Ve*fe),ji=Jr*Wr-bi*yr;if(!ji)break;var Hi=(cr*Jr-zn*bi)/ji,Ji=(zn*Wr-cr*yr)/ji;J-=Hi,st-=Ji}while((c(Hi)>M||c(Ji)>M)&&--Ct>0);return[J,st]}};var mt=function(){return l.geoProjection(_t).scale(152.63)};function At(D){var G=g(D),J=n(D),st=D>=0?1:-1,Ct=_(st*D),Ot=(1+G-J)/2;function Ut(Ht,qt){var fe=n(qt),ye=n(Ht/=2);return[(1+fe)*g(Ht),(st*qt>-h(ye,Ct)-.001?0:-st*10)+Ot+g(qt)*J-(1+fe)*G*ye]}return Ut.invert=function(Ht,qt){var fe=0,ye=0,De=50;do{var Ie=n(fe),Ve=g(fe),qe=n(ye),on=g(ye),tr=1+qe,zn=tr*Ve-Ht,cr=Ot+on*J-tr*G*Ie-qt,yr=tr*Ie/2,Jr=-Ve*on,Wr=G*tr*Ve/2,bi=J*qe+G*Ie*on,ji=Jr*Wr-bi*yr,Hi=(cr*Jr-zn*bi)/ji/2,Ji=(zn*Wr-cr*yr)/ji;fe-=Hi,ye-=Ji}while((c(Hi)>M||c(Ji)>M)&&--De>0);return st*ye>-h(n(fe),Ct)-.001?[fe*2,ye]:null},Ut}var rt=function(){var G=20*Z,J=G>=0?1:-1,st=_(J*G),Ct=l.geoProjectionMutator(At),Ot=Ct(G),Ut=Ot.stream;return Ot.parallel=function(Ht){return arguments.length?(st=_((J=(G=Ht*Z)>=0?1:-1)*G),Ct(G)):G*F},Ot.stream=function(Ht){var qt=Ot.rotate(),fe=Ut(Ht),ye=(Ot.rotate([0,0]),Ut(Ht));return Ot.rotate(qt),fe.sphere=function(){ye.polygonStart(),ye.lineStart();for(var De=J*-180;J*De<180;De+=J*90)ye.point(De,J*90);for(;J*(De-=G)>=-180;)ye.point(De,J*-h(n(De*Z/2),st)*F);ye.lineEnd(),ye.polygonEnd()},fe},Ot.scale(218.695).center([0,28.0974])};function Mt(D,G){var J=_(G/2),st=K(1-J*J),Ct=1+st*n(D/=2),Ot=g(D)*st/Ct,Ut=J/Ct,Ht=Ot*Ot,qt=Ut*Ut;return[4/3*Ot*(3+Ht-3*qt),4/3*Ut*(3+3*Ht-qt)]}Mt.invert=function(D,G){if(D*=3/8,G*=3/8,!D&&c(G)>1)return null;var J=D*D,st=G*G,Ct=1+J+st,Ot=K((Ct-K(Ct*Ct-4*G*G))/2),Ut=k(Ot)/3,Ht=Ot?It(c(G/Ot))/3:ut(c(D))/3,qt=n(Ut),fe=ht(Ht),ye=fe*fe-qt*qt;return[y(D)*2*h(ct(Ht)*qt,.25-ye),y(G)*2*h(fe*g(Ut),.25+ye)]};var z=function(){return l.geoProjection(Mt).scale(66.1603)},$=K(8),dt=o(1+O);function et(D,G){var J=c(G);return J<P?[D,o(_(P+G/2))]:[D*n(J)*(2*O-1/g(J)),y(G)*(2*O*(J-P)-o(_(J/2)))]}et.invert=function(D,G){if((Ot=c(G))<dt)return[D,2*r(i(G))-S];var J=P,st=25,Ct,Ot;do{var Ut=n(J/2),Ht=_(J/2);J-=Ct=($*(J-P)-o(Ht)-Ot)/($-Ut*Ut/(2*Ht))}while(c(Ct)>x&&--st>0);return[D/(n(J)*($-1/g(J))),y(G)*J]};var ot=function(){return l.geoProjection(et).scale(112.314)};function pt(D){var G=2*m/D;function J(st,Ct){var Ot=l.geoAzimuthalEquidistantRaw(st,Ct);if(c(st)>S){var Ut=h(Ot[1],Ot[0]),Ht=K(Ot[0]*Ot[0]+Ot[1]*Ot[1]),qt=G*b((Ut-S)/G)+S,fe=h(g(Ut-=qt),2-n(Ut));Ut=qt+k(m/Ht*g(fe))-fe,Ot[0]=Ht*n(Ut),Ot[1]=Ht*g(Ut)}return Ot}return J.invert=function(st,Ct){var Ot=K(st*st+Ct*Ct);if(Ot>S){var Ut=h(Ct,st),Ht=G*b((Ut-S)/G)+S,qt=Ut>Ht?-1:1,fe=Ot*n(Ht-Ut),ye=1/_(qt*Y((fe-m)/K(m*(m-2*fe)+Ot*Ot)));Ut=Ht+2*r((ye+qt*K(ye*ye-3))/3),st=Ot*n(Ut),Ct=Ot*g(Ut)}return l.geoAzimuthalEquidistantRaw.invert(st,Ct)},J}var H=function(){var G=5,J=l.geoProjectionMutator(pt),st=J(G),Ct=st.stream,Ot=.01,Ut=-n(Ot*Z),Ht=g(Ot*Z);return st.lobes=function(qt){return arguments.length?J(G=+qt):G},st.stream=function(qt){var fe=st.rotate(),ye=Ct(qt),De=(st.rotate([0,0]),Ct(qt));return st.rotate(fe),ye.sphere=function(){De.polygonStart(),De.lineStart();for(var Ie=0,Ve=360/G,qe=2*m/G,on=90-180/G,tr=S;Ie<G;++Ie,on-=Ve,tr-=qe)De.point(h(Ht*n(tr),Ut)*F,k(Ht*g(tr))*F),on<-90?(De.point(-90,-180-on-Ot),De.point(-90,-180-on+Ot)):(De.point(90,on+Ot),De.point(90,on-Ot));De.lineEnd(),De.polygonEnd()},ye},st.scale(87.8076).center([0,17.1875]).clipAngle(180-.001)};function nt(D,G){var J=D*g(G),st=30,Ct;do G-=Ct=(G+g(G)-J)/(1+n(G));while(c(Ct)>M&&--st>0);return G/2}function at(D,G,J){function st(Ct,Ot){return[D*Ct*n(Ot=nt(J,Ot)),G*g(Ot)]}return st.invert=function(Ct,Ot){return Ot=k(Ot/G),[Ct/(D*n(Ot)),k((2*Ot+g(2*Ot))/J)]},st}var q=at(O/S,O,m),Et=function(){return l.geoProjection(q).scale(169.529)},vt=2.00276,Ft=1.11072;function Qt(D,G){var J=nt(m,G);return[vt*D/(1/n(G)+Ft/n(J)),(G+O*g(J))/vt]}Qt.invert=function(D,G){var J=vt*G,st=G<0?-P:P,Ct=25,Ot,Ut;do Ut=J-O*g(st),st-=Ot=(g(2*st)+2*st-m*g(Ut))/(2*n(2*st)+2+m*n(Ut)*O*n(st));while(c(Ot)>M&&--Ct>0);return Ut=J-O*g(st),[D*(1/n(Ut)+Ft/n(st))/vt,Ut]};var ee=function(){return l.geoProjection(Qt).scale(160.857)},Gt=function(G){var J=0,st=l.geoProjectionMutator(G),Ct=st(J);return Ct.parallel=function(Ot){return arguments.length?st(J=Ot*Z):J*F},Ct};function $t(D,G){return[D*n(G),G]}$t.invert=function(D,G){return[D/n(G),G]};var Pe=function(){return l.geoProjection($t).scale(152.63)};function me(D){if(!D)return $t;var G=1/_(D);function J(st,Ct){var Ot=G+D-Ct,Ut=Ot&&st*n(Ct)/Ot;return[Ot*g(Ut),G-Ot*n(Ut)]}return J.invert=function(st,Ct){var Ot=K(st*st+(Ct=G-Ct)*Ct),Ut=G+D-Ot;return[Ot/n(Ut)*h(st,Ct),Ut]},J}var le=function(){return Gt(me).scale(123.082).center([0,26.1441]).parallel(45)};function be(D){function G(J,st){var Ct=S-st,Ot=Ct&&J*D*g(Ct)/Ct;return[Ct*g(Ot)/D,S-Ct*n(Ot)]}return G.invert=function(J,st){var Ct=J*D,Ot=S-st,Ut=K(Ct*Ct+Ot*Ot),Ht=h(Ct,Ot);return[(Ut?Ut/g(Ut):1)*Ht/D,S-Ut]},G}var ze=function(){var G=.5,J=l.geoProjectionMutator(be),st=J(G);return st.fraction=function(Ct){return arguments.length?J(G=+Ct):G},st.scale(158.837)},Xe=at(1,4/m,m),_n=function(){return l.geoProjection(Xe).scale(152.63)};function Kn(D,G,J,st,Ct,Ot){var Ut=n(Ot),Ht;if(c(D)>1||c(Ot)>1)Ht=Y(J*Ct+G*st*Ut);else{var qt=g(D/2),fe=g(Ot/2);Ht=2*k(K(qt*qt+G*st*fe*fe))}return c(Ht)>M?[Ht,h(st*g(Ot),G*Ct-J*st*Ut)]:[0,0]}function Hn(D,G,J){return Y((D*D+G*G-J*J)/(2*D*G))}function nn(D){return D-2*m*a((D+m)/(2*m))}function en(D,G,J){for(var st=[[D[0],D[1],g(D[1]),n(D[1])],[G[0],G[1],g(G[1]),n(G[1])],[J[0],J[1],g(J[1]),n(J[1])]],Ct=st[2],Ot,Ut=0;Ut<3;++Ut,Ct=Ot)Ot=st[Ut],Ct.v=Kn(Ot[1]-Ct[1],Ct[3],Ct[2],Ot[3],Ot[2],Ot[0]-Ct[0]),Ct.point=[0,0];var Ht=Hn(st[0].v[0],st[2].v[0],st[1].v[0]),qt=Hn(st[0].v[0],st[1].v[0],st[2].v[0]),fe=m-Ht;st[2].point[1]=0,st[0].point[0]=-(st[1].point[0]=st[0].v[0]/2);var ye=[st[2].point[0]=st[0].point[0]+st[2].v[0]*n(Ht),2*(st[0].point[1]=st[1].point[1]=st[2].v[0]*g(Ht))];function De(Ie,Ve){var qe=g(Ve),on=n(Ve),tr=new Array(3),zn;for(zn=0;zn<3;++zn){var cr=st[zn];if(tr[zn]=Kn(Ve-cr[1],cr[3],cr[2],on,qe,Ie-cr[0]),!tr[zn][0])return cr.point;tr[zn][1]=nn(tr[zn][1]-cr.v[1])}var yr=ye.slice();for(zn=0;zn<3;++zn){var Jr=zn==2?0:zn+1,Wr=Hn(st[zn].v[0],tr[zn][0],tr[Jr][0]);tr[zn][1]<0&&(Wr=-Wr),zn?zn==1?(Wr=qt-Wr,yr[0]-=tr[zn][0]*n(Wr),yr[1]-=tr[zn][0]*g(Wr)):(Wr=fe-Wr,yr[0]+=tr[zn][0]*n(Wr),yr[1]+=tr[zn][0]*g(Wr)):(yr[0]+=tr[zn][0]*n(Wr),yr[1]-=tr[zn][0]*g(Wr))}return yr[0]/=3,yr[1]/=3,yr}return De}function An(D){return D[0]*=Z,D[1]*=Z,D}function Nn(){return hr([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function hr(D,G,J){var st=l.geoCentroid({type:"MultiPoint",coordinates:[D,G,J]}),Ct=[-st[0],-st[1]],Ot=l.geoRotation(Ct),Ut=l.geoProjection(en(An(Ot(D)),An(Ot(G)),An(Ot(J)))).rotate(Ct),Ht=Ut.center;return delete Ut.rotate,Ut.center=function(qt){return arguments.length?Ht(Ot(qt)):Ot.invert(Ht())},Ut.clipAngle(90)}function fi(D,G){var J=K(1-g(G));return[2/R*D*J,R*(1-J)]}fi.invert=function(D,G){var J=(J=G/R-1)*J;return[J>0?D*K(m/J)/2:0,k(1-J)]};var Oe=function(){return l.geoProjection(fi).scale(95.6464).center([0,30])};function Ae(D){var G=_(D);function J(st,Ct){return[st,(st?st/g(st):1)*(g(Ct)*n(st)-G*n(Ct))]}return J.invert=G?function(st,Ct){st&&(Ct*=g(st)/st);var Ot=n(st);return[st,2*h(K(Ot*Ot+G*G-Ct*Ct)-Ot,G-Ct)]}:function(st,Ct){return[st,k(st?Ct*_(st)/st:Ct)]},J}var Jt=function(){return Gt(Ae).scale(249.828).clipAngle(90)},ve=K(3);function Vt(D,G){return[ve*D*(2*n(2*G/3)-1)/R,ve*R*g(G/3)]}Vt.invert=function(D,G){var J=3*k(G/(ve*R));return[R*D/(ve*(2*n(2*J/3)-1)),J]};var ie=function(){return l.geoProjection(Vt).scale(156.19)};function Ce(D){var G=n(D);function J(st,Ct){return[st*G,g(Ct)/G]}return J.invert=function(st,Ct){return[st/G,k(Ct*G)]},J}var ue=function(){return Gt(Ce).parallel(38.58).scale(195.044)};function xe(D){var G=n(D);function J(st,Ct){return[st*G,(1+G)*_(Ct/2)]}return J.invert=function(st,Ct){return[st/G,r(Ct/(1+G))*2]},J}var $e=function(){return Gt(xe).scale(124.75)};function Fn(D,G){var J=K(8/(3*m));return[J*D*(1-c(G)/m),J*G]}Fn.invert=function(D,G){var J=K(8/(3*m)),st=G/J;return[D/(J*(1-c(st)/m)),st]};var rr=function(){return l.geoProjection(Fn).scale(165.664)};function En(D,G){var J=K(4-3*g(c(G)));return[2/K(6*m)*D*J,y(G)*K(2*m/3)*(2-J)]}En.invert=function(D,G){var J=2-c(G)/K(2*m/3);return[D*K(6*m)/(2*J),y(G)*k((4-J*J)/3)]};var Pn=function(){return l.geoProjection(En).scale(165.664)};function Er(D,G){var J=K(m*(4+m));return[2/J*D*(1+K(1-4*G*G/(m*m))),4/J*G]}Er.invert=function(D,G){var J=K(m*(4+m))/2;return[D*J/(1+K(1-G*G*(4+m)/(4*m))),G*J/2]};var Pr=function(){return l.geoProjection(Er).scale(180.739)};function ln(D,G){var J=(2+S)*g(G);G/=2;for(var st=0,Ct=Infinity;st<10&&c(Ct)>M;st++){var Ot=n(G);G-=Ct=(G+g(G)*(Ot+2)-J)/(2*Ot*(1+Ot))}return[2/K(m*(4+m))*D*(1+n(G)),2*K(m/(4+m))*g(G)]}ln.invert=function(D,G){var J=G*K((4+m)/m)/2,st=k(J),Ct=n(st);return[D/(2/K(m*(4+m))*(1+Ct)),k((st+J*(Ct+2))/(2+S))]};var Cr=function(){return l.geoProjection(ln).scale(180.739)};function Ar(D,G){return[D*(1+n(G))/K(2+m),2*G/K(2+m)]}Ar.invert=function(D,G){var J=K(2+m),st=G*J/2;return[J*D/(1+n(st)),st]};var je=function(){return l.geoProjection(Ar).scale(173.044)};function We(D,G){for(var J=(1+S)*g(G),st=0,Ct=Infinity;st<10&&c(Ct)>M;st++)G-=Ct=(G+g(G)-J)/(1+n(G));return J=K(2+m),[D*(1+n(G))/J,2*G/J]}We.invert=function(D,G){var J=1+S,st=K(J/2);return[D*2*st/(1+n(G*=st)),k((G+g(G))/J)]};var Ye=function(){return l.geoProjection(We).scale(173.044)},fn=3+2*O;function mn(D,G){var J=g(D/=2),st=n(D),Ct=K(n(G)),Ot=n(G/=2),Ut=g(G)/(Ot+O*st*Ct),Ht=K(2/(1+Ut*Ut)),qt=K((O*Ot+(st+J)*Ct)/(O*Ot+(st-J)*Ct));return[fn*(Ht*(qt-1/qt)-2*o(qt)),fn*(Ht*Ut*(qt+1/qt)-2*r(Ut))]}mn.invert=function(D,G){if(!(Ot=Mt.invert(D/1.2,G*1.065)))return null;var J=Ot[0],st=Ot[1],Ct=20,Ot;D/=fn,G/=fn;do{var Ut=J/2,Ht=st/2,qt=g(Ut),fe=n(Ut),ye=g(Ht),De=n(Ht),Ie=n(st),Ve=K(Ie),qe=ye/(De+O*fe*Ve),on=qe*qe,tr=K(2/(1+on)),zn=O*De+(fe+qt)*Ve,cr=O*De+(fe-qt)*Ve,yr=zn/cr,Jr=K(yr),Wr=Jr-1/Jr,bi=Jr+1/Jr,ji=tr*Wr-2*o(Jr)-D,Hi=tr*qe*bi-2*r(qe)-G,Ji=ye&&A*Ve*qt*on/ye,Pa=(O*fe*De+Ve)/(2*(De+O*fe*Ve)*(De+O*fe*Ve)*Ve),ja=-.5*qe*tr*tr*tr,Fi=ja*Ji,va=ja*Pa,ya=(ya=2*De+O*Ve*(fe-qt))*ya*Jr,Yi=(O*fe*De*Ve+Ie)/ya,Aa=-(O*qt*ye)/(Ve*ya),ua=Wr*Fi-2*Yi/Jr+tr*(Yi+Yi/yr),Ba=Wr*va-2*Aa/Jr+tr*(Aa+Aa/yr),Za=qe*bi*Fi-2*Ji/(1+on)+tr*bi*Ji+tr*qe*(Yi-Yi/yr),os=qe*bi*va-2*Pa/(1+on)+tr*bi*Pa+tr*qe*(Aa-Aa/yr),Go=Ba*Za-os*ua;if(!Go)break;var Bs=(Hi*Ba-ji*os)/Go,Yo=(ji*Za-Hi*ua)/Go;J-=Bs,st=u(-S,f(S,st-Yo))}while((c(Bs)>M||c(Yo)>M)&&--Ct>0);return c(c(st)-S)<M?[0,st]:Ct&&[J,st]};var jn=function(){return l.geoProjection(mn).scale(62.5271)},bn=n(35*Z);function Ln(D,G){var J=_(G/2);return[D*bn*K(1-J*J),(1+bn)*J]}Ln.invert=function(D,G){var J=G/(1+bn);return[D&&D/(bn*K(1-J*J)),2*r(J)]};var nr=function(){return l.geoProjection(Ln).scale(137.152)};function Yn(D,G){var J=G/2,st=n(J);return[2*D/R*n(G)*st*st,R*_(J)]}Yn.invert=function(D,G){var J=r(G/R),st=n(J),Ct=2*J;return[D*R/2/(n(Ct)*st*st),Ct]};var Mn=function(){return l.geoProjection(Yn).scale(135.264)};function Rr(D){return[D[0]/2,k(_(D[1]/2*Z))*F]}function pr(D){return[D[0]*2,2*r(g(D[1]*Z))*F]}var zr=function(G){G==null&&(G=l.geoOrthographic);var J=G(),st=l.geoEquirectangular().scale(F).precision(0).clipAngle(null).translate([0,0]);function Ct(Ut){return J(Rr(Ut))}J.invert&&(Ct.invert=function(Ut){return pr(J.invert(Ut))}),Ct.stream=function(Ut){var Ht=J.stream(Ut),qt=st.stream({point:function(ye,De){Ht.point(ye/2,k(_(-De/2*Z))*F)},lineStart:function(){Ht.lineStart()},lineEnd:function(){Ht.lineEnd()},polygonStart:function(){Ht.polygonStart()},polygonEnd:function(){Ht.polygonEnd()}});return qt.sphere=Ht.sphere,qt};function Ot(Ut){Ct[Ut]=function(Ht){return arguments.length?(J[Ut](Ht),Ct):J[Ut]()}}return Ct.rotate=function(Ut){return arguments.length?(st.rotate(Ut),Ct):st.rotate()},Ct.center=function(Ut){return arguments.length?(J.center(Rr(Ut)),Ct):pr(J.center())},Ot("clipAngle"),Ot("clipExtent"),Ot("scale"),Ot("translate"),Ot("precision"),Ct.scale(249.5)};function Pi(D,G){var J=2*m/G,st=D*D;function Ct(Ot,Ut){var Ht=l.geoAzimuthalEquidistantRaw(Ot,Ut),qt=Ht[0],fe=Ht[1],ye=qt*qt+fe*fe;if(ye>st){var De=K(ye),Ie=h(fe,qt),Ve=J*b(Ie/J),qe=Ie-Ve,on=D*n(qe),tr=(D*g(qe)-qe*g(on))/(S-on),zn=Oa(qe,tr),cr=(m-D)/Ua(zn,on,m);qt=De;var yr=50,Jr;do qt-=Jr=(D+Ua(zn,on,qt)*cr-De)/(zn(qt)*cr);while(c(Jr)>M&&--yr>0);fe=qe*g(qt),qt<S&&(fe-=tr*(qt-S));var Wr=g(Ve),bi=n(Ve);Ht[0]=qt*bi-fe*Wr,Ht[1]=qt*Wr+fe*bi}return Ht}return Ct.invert=function(Ot,Ut){var Ht=Ot*Ot+Ut*Ut;if(Ht>st){var qt=K(Ht),fe=h(Ut,Ot),ye=J*b(fe/J),De=fe-ye;Ot=qt*n(De),Ut=qt*g(De);for(var Ie=Ot-S,Ve=g(Ot),qe=Ut/Ve,on=Ot<S?Infinity:0,tr=10;;){var zn=D*g(qe),cr=D*n(qe),yr=g(cr),Jr=S-cr,Wr=(zn-qe*yr)/Jr,bi=Oa(qe,Wr);if(c(on)<x||!--tr)break;qe-=on=(qe*Ve-Wr*Ie-Ut)/(Ve-Ie*2*(Jr*(cr+qe*zn*n(cr)-yr)-zn*(zn-qe*yr))/(Jr*Jr))}qt=D+Ua(bi,cr,Ot)*(m-D)/Ua(bi,cr,m),fe=ye+qe,Ot=qt*n(fe),Ut=qt*g(fe)}return l.geoAzimuthalEquidistantRaw.invert(Ot,Ut)},Ct}function Oa(D,G){return function(J){var st=D*n(J);return J<S&&(st-=G),K(1+st*st)}}function Ua(D,G,J){for(var st=50,Ct=(J-G)/st,Ot=D(G)+D(J),Ut=1,Ht=G;Ut<st;++Ut)Ot+=2*D(Ht+=Ct);return Ot*.5*Ct}var ro=function(){var G=6,J=30*Z,st=n(J),Ct=g(J),Ot=l.geoProjectionMutator(Pi),Ut=Ot(J,G),Ht=Ut.stream,qt=.01,fe=-n(qt*Z),ye=g(qt*Z);return Ut.radius=function(De){return arguments.length?(st=n(J=De*Z),Ct=g(J),Ot(J,G)):J*F},Ut.lobes=function(De){return arguments.length?Ot(J,G=+De):G},Ut.stream=function(De){var Ie=Ut.rotate(),Ve=Ht(De),qe=(Ut.rotate([0,0]),Ht(De));return Ut.rotate(Ie),Ve.sphere=function(){qe.polygonStart(),qe.lineStart();for(var on=0,tr=2*m/G,zn=0;on<G;++on,zn-=tr)qe.point(h(ye*n(zn),fe)*F,k(ye*g(zn))*F),qe.point(h(Ct*n(zn-tr/2),st)*F,k(Ct*g(zn-tr/2))*F);qe.lineEnd(),qe.polygonEnd()},Ve},Ut.rotate([90,-40]).scale(91.7095).clipAngle(180-.001)},Ko=function(G,J,st,Ct,Ot,Ut,Ht,qt){arguments.length<8&&(qt=0);function fe(ye,De){if(!De)return[G*ye/m,0];var Ie=De*De,Ve=G+Ie*(J+Ie*(st+Ie*Ct)),qe=De*(Ot-1+Ie*(Ut-qt+Ie*Ht)),on=(Ve*Ve+qe*qe)/(2*qe),tr=ye*k(Ve/on)/m;return[on*g(tr),De*(1+Ie*qt)+on*(1-n(tr))]}return fe.invert=function(ye,De){var Ie=m*ye/G,Ve=De,qe,on,tr=50;do{var zn=Ve*Ve,cr=G+zn*(J+zn*(st+zn*Ct)),yr=Ve*(Ot-1+zn*(Ut-qt+zn*Ht)),Jr=cr*cr+yr*yr,Wr=2*yr,bi=Jr/Wr,ji=bi*bi,Hi=k(cr/bi)/m,Ji=Ie*Hi,Pa=cr*cr,ja=(2*J+zn*(4*st+zn*6*Ct))*Ve,Fi=Ot+zn*(3*Ut+zn*5*Ht),va=2*(cr*ja+yr*(Fi-1)),ya=2*(Fi-1),Yi=(va*Wr-Jr*ya)/(Wr*Wr),Aa=n(Ji),ua=g(Ji),Ba=bi*Aa,Za=bi*ua,os=Ie/m*(1/K(1-Pa/ji))*(ja*bi-cr*Yi)/ji,Go=Za-ye,Bs=Ve*(1+zn*qt)+bi-Ba-De,Yo=Yi*ua+Ba*os,ks=Ba*Hi,yl=1+Yi-(Yi*Aa-Za*os),nl=Za*Hi,wl=Yo*nl-yl*ks;if(!wl)break;Ie-=qe=(Bs*Yo-Go*yl)/wl,Ve-=on=(Go*nl-Bs*ks)/wl}while((c(qe)>M||c(on)>M)&&--tr>0);return[Ie,Ve]},fe},_a=Ko(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555),co=function(){return l.geoProjection(_a).scale(149.995)},Xo=Ko(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742),io=function(){return l.geoProjection(Xo).scale(153.93)},To=Ko(5/6*m,-.62636,-.0344,0,1.3493,-.05524,0,.045),ds=function(){return l.geoProjection(To).scale(130.945)};function La(D,G){var J=D*D,st=G*G;return[D*(1-.162388*st)*(.87-952426e-9*J*J),G*(1+st/12)]}La.invert=function(D,G){var J=D,st=G,Ct=50,Ot;do{var Ut=st*st;st-=Ot=(st*(1+Ut/12)-G)/(1+Ut/4)}while(c(Ot)>M&&--Ct>0);Ct=50,D/=1-.162388*Ut;do{var Ht=(Ht=J*J)*Ht;J-=Ot=(J*(.87-952426e-9*Ht)-D)/(.87-.00476213*Ht)}while(c(Ot)>M&&--Ct>0);return[J,st]};var Vo=function(){return l.geoProjection(La).scale(131.747)},Bo=Ko(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762),lu=function(){return l.geoProjection(Bo).scale(131.087)},Jo=function(G){var J=G(S,0)[0]-G(-S,0)[0];function st(Ct,Ot){var Ut=Ct>0?-.5:.5,Ht=G(Ct+Ut*m,Ot);return Ht[0]-=Ut*J,Ht}return G.invert&&(st.invert=function(Ct,Ot){var Ut=Ct>0?-.5:.5,Ht=G.invert(Ct+Ut*J,Ot),qt=Ht[0]-Ut*m;return qt<-m?qt+=2*m:qt>m&&(qt-=2*m),Ht[0]=qt,Ht}),st};function iu(D,G){var J=y(D),st=y(G),Ct=n(G),Ot=n(D)*Ct,Ut=g(D)*Ct,Ht=g(st*G);D=c(h(Ut,Ht)),G=k(Ot),c(D-S)>M&&(D%=S);var qt=$s(D>m/4?S-D:D,G);return D>m/4&&(Ht=qt[0],qt[0]=-qt[1],qt[1]=-Ht),qt[0]*=J,qt[1]*=-st,qt}iu.invert=function(D,G){c(D)>1&&(D=y(D)*2-D),c(G)>1&&(G=y(G)*2-G);var J=y(D),st=y(G),Ct=-J*D,Ot=-st*G,Ut=Ot/Ct<1,Ht=Ne(Ut?Ot:Ct,Ut?Ct:Ot),qt=Ht[0],fe=Ht[1],ye=n(fe);return Ut&&(qt=-S-qt),[J*(h(g(qt)*ye,-g(fe))+m),st*k(n(qt)*ye)]};function $s(D,G){if(G===S)return[0,0];var J=g(G),st=J*J,Ct=st*st,Ot=1+Ct,Ut=1+3*Ct,Ht=1-Ct,qt=k(1/K(Ot)),fe=Ht+st*Ot*qt,ye=(1-J)/fe,De=K(ye),Ie=ye*Ot,Ve=K(Ie),qe=De*Ht,on,tr;if(D===0)return[0,-(qe+st*Ve)];var zn=n(G),cr=1/zn,yr=2*J*zn,Jr=(-3*st+qt*Ut)*yr,Wr=(-fe*zn-(1-J)*Jr)/(fe*fe),bi=.5*Wr/De,ji=Ht*bi-2*st*De*yr,Hi=st*Ot*Wr+ye*Ut*yr,Ji=-cr*yr,Pa=-cr*Hi,ja=-2*cr*ji,Fi=4*D/m,va;if(D>.222*m||G<m/4&&D>.175*m){if(on=(qe+st*K(Ie*(1+Ct)-qe*qe))/(1+Ct),D>m/4)return[on,on];var ya=on,Yi=.5*on;on=.5*(Yi+ya),tr=50;do{var Aa=K(Ie-on*on),ua=on*(ja+Ji*Aa)+Pa*k(on/Ve)-Fi;if(!ua)break;ua<0?Yi=on:ya=on,on=.5*(Yi+ya)}while(c(ya-Yi)>M&&--tr>0)}else{on=M,tr=25;do{var Ba=on*on,Za=K(Ie-Ba),os=ja+Ji*Za,Go=on*os+Pa*k(on/Ve)-Fi,Bs=os+(Pa-Ji*Ba)/Za;on-=va=Za?Go/Bs:0}while(c(va)>M&&--tr>0)}return[on,-qe-st*K(Ie-on*on)]}function Ne(D,G){for(var J=0,st=1,Ct=.5,Ot=50;;){var Ut=Ct*Ct,Ht=K(Ct),qt=k(1/K(1+Ut)),fe=1-Ut+Ct*(1+Ut)*qt,ye=(1-Ht)/fe,De=K(ye),Ie=ye*(1+Ut),Ve=De*(1-Ut),qe=Ie-D*D,on=K(qe),tr=G+Ve+Ct*on;if(c(st-J)<x||--Ot==0||tr===0)break;tr>0?J=Ct:st=Ct,Ct=.5*(J+st)}if(!Ot)return null;var zn=k(Ht),cr=n(zn),yr=1/cr,Jr=2*Ht*cr,Wr=(-3*Ct+qt*(1+3*Ut))*Jr,bi=(-fe*cr-(1-Ht)*Wr)/(fe*fe),ji=.5*bi/De,Hi=(1-Ut)*ji-2*Ct*De*Jr,Ji=-2*yr*Hi,Pa=-yr*Jr,ja=-yr*(Ct*(1+Ut)*bi+ye*(1+3*Ut)*Jr);return[m/4*(D*(Ji+Pa*on)+ja*k(D/K(Ie))),zn]}var oe=function(){return l.geoProjection(Jo(iu)).scale(239.75)};function Wt(D,G,J){var st,Ct,Ot;return D?(st=Ee(D,J),G?(Ct=Ee(G,1-J),Ot=Ct[1]*Ct[1]+J*st[0]*st[0]*Ct[0]*Ct[0],[[st[0]*Ct[2]/Ot,st[1]*st[2]*Ct[0]*Ct[1]/Ot],[st[1]*Ct[1]/Ot,-st[0]*st[2]*Ct[0]*Ct[2]/Ot],[st[2]*Ct[1]*Ct[2]/Ot,-J*st[0]*st[1]*Ct[0]/Ot]]):[[st[0],0],[st[1],0],[st[2],0]]):(Ct=Ee(G,1-J),[[0,Ct[0]/Ct[1]],[1/Ct[1],0],[Ct[2]/Ct[1],0]])}function Ee(D,G){var J,st,Ct,Ot,Ut;if(G<M)return Ot=g(D),st=n(D),J=G*(D-Ot*st)/4,[Ot-J*st,st+J*Ot,1-G*Ot*Ot/2,D-J];if(G>=1-M)return J=(1-G)/4,st=ht(D),Ot=it(D),Ct=1/st,Ut=st*ct(D),[Ot+J*(Ut-D)/(st*st),Ct-J*Ot*Ct*(Ut-D),Ct+J*Ot*Ct*(Ut+D),2*r(i(D))-S+J*(Ut-D)/st];var Ht=[1,0,0,0,0,0,0,0,0],qt=[K(G),0,0,0,0,0,0,0,0],fe=0;for(st=K(1-G),Ut=1;c(qt[fe]/Ht[fe])>M&&fe<8;)J=Ht[fe++],qt[fe]=(J-st)/2,Ht[fe]=(J+st)/2,st=K(J*st),Ut*=2;Ct=Ut*Ht[fe]*D;do Ot=qt[fe]*g(st=Ct)/Ht[fe],Ct=(k(Ot)+Ct)/2;while(--fe);return[g(Ct),Ot=n(Ct),Ot/n(Ct-st),Ct]}function an(D,G,J){var st=c(D),Ct=c(G),Ot=ct(Ct);if(st){var Ut=1/g(st),Ht=1/(_(st)*_(st)),qt=-(Ht+J*(Ot*Ot*Ut*Ut)-1+J),fe=(J-1)*Ht,ye=(-qt+K(qt*qt-4*fe))/2;return[Un(r(1/K(ye)),J)*y(D),Un(r(K((ye/Ht-1)/J)),1-J)*y(G)]}return[0,Un(r(Ot),1-J)*y(G)]}function Un(D,G){if(!G)return D;if(G===1)return o(_(D/2+P));for(var J=1,st=K(1-G),Ct=K(G),Ot=0;c(Ct)>M;Ot++){if(D%m){var Ut=r(st*_(D)/J);Ut<0&&(Ut+=m),D+=Ut+~~(D/m)*m}else D+=D;Ct=(J+st)/2,st=K(J*st),Ct=((J=Ct)-st)/2}return D/(v(2,Ot)*J)}function qn(D,G){var J=(O-1)/(O+1),st=K(1-J*J),Ct=Un(S,st*st),Ot=-1,Ut=o(_(m/4+c(G)/2)),Ht=i(Ot*Ut)/K(J),qt=kn(Ht*n(Ot*D),Ht*g(Ot*D)),fe=an(qt[0],qt[1],st*st);return[-fe[1],(G>=0?1:-1)*(.5*Ct-fe[0])]}function kn(D,G){var J=D*D,st=G+1,Ct=1-J-G*G;return[.5*((D>=0?S:-S)-h(Ct,2*D)),-.25*o(Ct*Ct+4*J)+.5*o(st*st+J)]}function Xr(D,G){var J=G[0]*G[0]+G[1]*G[1];return[(D[0]*G[0]+D[1]*G[1])/J,(D[1]*G[0]-D[0]*G[1])/J]}qn.invert=function(D,G){var J=(O-1)/(O+1),st=K(1-J*J),Ct=Un(S,st*st),Ot=-1,Ut=Wt(.5*Ct-G,-D,st*st),Ht=Xr(Ut[0],Ut[1]),qt=h(Ht[1],Ht[0])/Ot;return[qt,2*r(i(.5/Ot*o(J*Ht[0]*Ht[0]+J*Ht[1]*Ht[1])))-S]};var Si=function(){return l.geoProjection(Jo(qn)).scale(151.496)};function Ti(D,G){if(arguments.length<2&&(G=D),G===1)return l.geoAzimuthalEqualAreaRaw;if(G===Infinity)return ki;function J(st,Ct){var Ot=l.geoAzimuthalEqualAreaRaw(st/G,Ct);return Ot[0]*=D,Ot}return J.invert=function(st,Ct){var Ot=l.geoAzimuthalEqualAreaRaw.invert(st/D,Ct);return Ot[0]*=G,Ot},J}function ki(D,G){return[D*n(G)/n(G/=2),2*g(G)]}ki.invert=function(D,G){var J=2*k(G/2);return[D*n(J/2)/n(J),J]};var sa=function(){var G=2,J=l.geoProjectionMutator(Ti),st=J(G);return st.coefficient=function(Ct){return arguments.length?J(G=+Ct):G},st.scale(169.529)};function $a(D){var G=g(D),J=n(D),st=ba(D);st.invert=ba(-D);function Ct(Ot,Ut){var Ht=st(Ot,Ut);Ot=Ht[0],Ut=Ht[1];var qt=g(Ut),fe=n(Ut),ye=n(Ot),De=Y(G*qt+J*fe*ye),Ie=g(De),Ve=c(Ie)>M?De/Ie:1;return[Ve*J*g(Ot),(c(Ot)>S?Ve:-Ve)*(G*fe-J*qt*ye)]}return Ct.invert=function(Ot,Ut){var Ht=K(Ot*Ot+Ut*Ut),qt=-g(Ht),fe=n(Ht),ye=Ht*fe,De=-Ut*qt,Ie=Ht*G,Ve=K(ye*ye+De*De-Ie*Ie),qe=h(ye*Ie+De*Ve,De*Ie-ye*Ve),on=(Ht>S?-1:1)*h(Ot*qt,Ht*n(qe)*fe+Ut*g(qe)*qt);return st.invert(on,qe)},Ct}function ba(D){var G=g(D),J=n(D);return function(st,Ct){var Ot=n(Ct),Ut=n(st)*Ot,Ht=g(st)*Ot,qt=g(Ct);return[h(Ht,Ut*J-qt*G),k(qt*J+Ut*G)]}}var bo=function(){var G=0,J=l.geoProjectionMutator($a),st=J(G),Ct=st.rotate,Ot=st.stream,Ut=l.geoCircle();return st.parallel=function(Ht){if(!arguments.length)return G*F;var qt=st.rotate();return J(G=Ht*Z).rotate(qt)},st.rotate=function(Ht){return arguments.length?(Ct.call(st,[Ht[0],Ht[1]-G*F]),Ut.center([-Ht[0],-Ht[1]]),st):(Ht=Ct.call(st),Ht[1]+=G*F,Ht)},st.stream=function(Ht){return Ht=Ot(Ht),Ht.sphere=function(){Ht.polygonStart();var qt=.01,fe=Ut.radius(90-qt)().coordinates[0],ye=fe.length-1,De=-1,Ie;for(Ht.lineStart();++De<ye;)Ht.point((Ie=fe[De])[0],Ie[1]);for(Ht.lineEnd(),fe=Ut.radius(90+qt)().coordinates[0],ye=fe.length-1,Ht.lineStart();--De>=0;)Ht.point((Ie=fe[De])[0],Ie[1]);Ht.lineEnd(),Ht.polygonEnd()},Ht},st.scale(79.4187).parallel(45).clipAngle(180-.001)},Fa=41+48/36+37/3600,oo=Ce(0);function Eo(D){var G=Fa*Z,J=fi(m,G)[0]-fi(-m,G)[0],st=oo(0,G)[1],Ct=fi(0,G)[1],Ot=R-Ct,Ut=W/D,Ht=4/W,qt=st+Ot*Ot*4/W;function fe(ye,De){var Ie,Ve=c(De);if(Ve>G){var qe=f(D-1,u(0,a((ye+m)/Ut)));ye+=m*(D-1)/D-qe*Ut,Ie=fi(ye,Ve),Ie[0]=Ie[0]*W/J-W*(D-1)/(2*D)+qe*W/D,Ie[1]=st+(Ie[1]-Ct)*4*Ot/W,De<0&&(Ie[1]=-Ie[1])}else Ie=oo(ye,De);return Ie[0]*=Ht,Ie[1]/=qt,Ie}return fe.invert=function(ye,De){ye/=Ht,De*=qt;var Ie=c(De);if(Ie>st){var Ve=f(D-1,u(0,a((ye+m)/Ut)));ye=(ye+m*(D-1)/D-Ve*Ut)*J/W;var qe=fi.invert(ye,.25*(Ie-st)*W/Ot+Ct);return qe[0]-=m*(D-1)/D-Ve*Ut,De<0&&(qe[1]=-qe[1]),qe}return oo.invert(ye,De)},fe}function Qa(D){return{type:"Polygon",coordinates:[s.range(-180,180+D/2,D).map(function(G,J){return[G,J&1?90-1e-6:Fa]}).concat(s.range(180,-180-D/2,-D).map(function(G,J){return[G,J&1?-90+1e-6:-Fa]}))]}}var Ao=function(){var G=4,J=l.geoProjectionMutator(Eo),st=J(G),Ct=st.stream;return st.lobes=function(Ot){return arguments.length?J(G=+Ot):G},st.stream=function(Ot){var Ut=st.rotate(),Ht=Ct(Ot),qt=(st.rotate([0,0]),Ct(Ot));return st.rotate(Ut),Ht.sphere=function(){l.geoStream(Qa(180/G),qt)},Ht},st.scale(239.75)};function as(D){var G=1+D,J=g(1/G),st=k(J),Ct=2*K(m/(Ot=m+4*st*G)),Ot,Ut=.5*Ct*(G+K(D*(2+D))),Ht=D*D,qt=G*G;function fe(ye,De){var Ie=1-g(De),Ve,qe;if(Ie&&Ie<2){var on=S-De,tr=25,zn;do{var cr=g(on),yr=n(on),Jr=st+h(cr,G-yr),Wr=1+qt-2*G*yr;on-=zn=(on-Ht*st-G*cr+Wr*Jr-.5*Ie*Ot)/(2*G*cr*Jr)}while(c(zn)>x&&--tr>0);Ve=Ct*K(Wr),qe=ye*Jr/m}else Ve=Ct*(D+Ie),qe=ye*st/m;return[Ve*g(qe),Ut-Ve*n(qe)]}return fe.invert=function(ye,De){var Ie=ye*ye+(De-=Ut)*De,Ve=(1+qt-Ie/(Ct*Ct))/(2*G),qe=Y(Ve),on=g(qe),tr=st+h(on,G-Ve);return[k(ye/K(Ie))*m/tr,k(1-2*(qe-Ht*st-G*on+(1+qt-2*G*Ve)*tr)/Ot)]},fe}var No=function(){var G=1,J=l.geoProjectionMutator(as),st=J(G);return st.ratio=function(Ct){return arguments.length?J(G=+Ct):G},st.scale(167.774).center([0,18.67])},xs=.7109889596207567,Co=.0528035274542;function qa(D,G){return G>-xs?(D=q(D,G),D[1]+=Co,D):$t(D,G)}qa.invert=function(D,G){return G>-xs?q.invert(D,G-Co):$t.invert(D,G)};var Ts=function(){return l.geoProjection(qa).rotate([-20,-55]).scale(164.263).center([0,-5.4036])};function ls(D,G){return c(G)>xs?(D=q(D,G),D[1]-=G>0?Co:-Co,D):$t(D,G)}ls.invert=function(D,G){return c(G)>xs?q.invert(D,G+(G>0?Co:-Co)):$t.invert(D,G)};var wa=function(){return l.geoProjection(ls).scale(152.63)};function yn(D,G){return c(D[0]-G[0])<M&&c(D[1]-G[1])<M}function dr(D,G){for(var J=-1,st=D.length,Ct=D[0],Ot,Ut,Ht,qt=[];++J<st;){Ot=D[J],Ut=(Ot[0]-Ct[0])/G,Ht=(Ot[1]-Ct[1])/G;for(var fe=0;fe<G;++fe)qt.push([Ct[0]+fe*Ut,Ct[1]+fe*Ht]);Ct=Ot}return qt.push(Ot),qt}function kr(D){var G=[],J,st,Ct,Ot,Ut,Ht,qt,fe=D[0].length;for(qt=0;qt<fe;++qt)J=D[0][qt],st=J[0][0],Ct=J[0][1],Ot=J[1][1],Ut=J[2][0],Ht=J[2][1],G.push(dr([[st+M,Ct+M],[st+M,Ot-M],[Ut-M,Ot-M],[Ut-M,Ht+M]],30));for(qt=D[1].length-1;qt>=0;--qt)J=D[1][qt],st=J[0][0],Ct=J[0][1],Ot=J[1][1],Ut=J[2][0],Ht=J[2][1],G.push(dr([[Ut-M,Ht-M],[Ut-M,Ot+M],[st+M,Ot+M],[st+M,Ct-M]],30));return{type:"Polygon",coordinates:[s.merge(G)]}}var Ui=function(G,J){var st=kr(J);J=J.map(function(qt){return qt.map(function(fe){return[[fe[0][0]*Z,fe[0][1]*Z],[fe[1][0]*Z,fe[1][1]*Z],[fe[2][0]*Z,fe[2][1]*Z]]})});var Ct=J.map(function(qt){return qt.map(function(fe){var ye=G(fe[0][0],fe[0][1])[0],De=G(fe[2][0],fe[2][1])[0],Ie=G(fe[1][0],fe[0][1])[1],Ve=G(fe[1][0],fe[1][1])[1],qe;return Ie>Ve&&(qe=Ie,Ie=Ve,Ve=qe),[[ye,Ie],[De,Ve]]})});function Ot(qt,fe){for(var ye=fe<0?-1:1,De=J[+(fe<0)],Ie=0,Ve=De.length-1;Ie<Ve&&qt>De[Ie][2][0];++Ie);var qe=G(qt-De[Ie][1][0],fe);return qe[0]+=G(De[Ie][1][0],ye*fe>ye*De[Ie][0][1]?De[Ie][0][1]:fe)[0],qe}G.invert&&(Ot.invert=function(qt,fe){for(var ye=Ct[+(fe<0)],De=J[+(fe<0)],Ie=0,Ve=ye.length;Ie<Ve;++Ie){var qe=ye[Ie];if(qe[0][0]<=qt&&qt<qe[1][0]&&qe[0][1]<=fe&&fe<qe[1][1]){var on=G.invert(qt-G(De[Ie][1][0],0)[0],fe);return on[0]+=De[Ie][1][0],yn(Ot(on[0],on[1]),[qt,fe])?on:null}}});var Ut=l.geoProjection(Ot),Ht=Ut.stream;return Ut.stream=function(qt){var fe=Ut.rotate(),ye=Ht(qt),De=(Ut.rotate([0,0]),Ht(qt));return Ut.rotate(fe),ye.sphere=function(){l.geoStream(st,De)},ye},Ut},Ja=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],So=function(){return Ui(Qt,Ja).scale(160.857)},po=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],ea=function(){return Ui(ls,po).scale(152.63)},to=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],bs=function(){return Ui(q,to).scale(169.529)},Es=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]],ka=function(){return Ui(q,Es).scale(169.529).rotate([20,0])},bu=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]],Wo=function(){return Ui(qa,bu).rotate([-20,-55]).scale(164.263).center([0,-5.4036])},As=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]],Qs=function(){return Ui($t,As).scale(152.63).rotate([-20,0])};function vs(D,G){return[3/W*D*K(m*m/3-G*G),G]}vs.invert=function(D,G){return[W/3*D/K(m*m/3-G*G),G]};var ps=function(){return l.geoProjection(vs).scale(158.837)};function cs(D){function G(J,st){if(c(c(st)-S)<M)return[0,st<0?-2:2];var Ct=g(st),Ot=v((1+Ct)/(1-Ct),D/2),Ut=.5*(Ot+1/Ot)+n(J*=D);return[2*g(J)/Ut,(Ot-1/Ot)/Ut]}return G.invert=function(J,st){var Ct=c(st);if(c(Ct-2)<M)return J?null:[0,y(st)*S];if(Ct>2)return null;J/=2,st/=2;var Ot=J*J,Ut=st*st,Ht=2*st/(1+Ot+Ut);return Ht=v((1+Ht)/(1-Ht),1/D),[h(2*J,1-Ot-Ut)/D,k((Ht-1)/(Ht+1))]},G}var gs=function(){var G=.5,J=l.geoProjectionMutator(cs),st=J(G);return st.spacing=function(Ct){return arguments.length?J(G=+Ct):G},st.scale(124.75)},Cs=m/O;function Pu(D,G){return[D*(1+K(n(G)))/2,G/(n(G/2)*n(D/6))]}Pu.invert=function(D,G){var J=c(D),st=c(G),Ct=M,Ot=S;st<Cs?Ot*=st/Cs:Ct+=6*Y(Cs/st);for(var Ut=0;Ut<25;Ut++){var Ht=g(Ot),qt=K(n(Ot)),fe=g(Ot/2),ye=n(Ot/2),De=g(Ct/6),Ie=n(Ct/6),Ve=.5*Ct*(1+qt)-J,qe=Ot/(ye*Ie)-st,on=qt?-.25*Ct*Ht/qt:0,tr=.5*(1+qt),zn=(1+.5*Ot*fe/ye)/(ye*Ie),cr=Ot/ye*(De/6)/(Ie*Ie),yr=on*cr-zn*tr,Jr=(Ve*cr-qe*tr)/yr,Wr=(qe*on-Ve*zn)/yr;if(Ot-=Jr,Ct-=Wr,c(Jr)<M&&c(Wr)<M)break}return[D<0?-Ct:Ct,G<0?-Ot:Ot]};var ju=function(){return l.geoProjection(Pu).scale(97.2672)};function fo(D,G){var J=D*D,st=G*G;return[D*(.975534+st*(-.119161+J*-.0143059+st*-.0547009)),G*(1.00384+J*(.0802894+st*-.02855+J*199025e-9)+st*(.0998909+st*-.0491032))]}fo.invert=function(D,G){var J=y(D)*m,st=G/2,Ct=50;do{var Ot=J*J,Ut=st*st,Ht=J*st,qt=J*(.975534+Ut*(-.119161+Ot*-.0143059+Ut*-.0547009))-D,fe=st*(1.00384+Ot*(.0802894+Ut*-.02855+Ot*199025e-9)+Ut*(.0998909+Ut*-.0491032))-G,ye=.975534-Ut*(.119161+3*Ot*.0143059+Ut*.0547009),De=-Ht*(2*.119161+4*.0547009*Ut+2*.0143059*Ot),Ie=Ht*(2*.0802894+4*199025e-9*Ot+2*-.02855*Ut),Ve=1.00384+Ot*(.0802894+199025e-9*Ot)+Ut*(3*(.0998909-.02855*Ot)-5*.0491032*Ut),qe=De*Ie-Ve*ye,on=(fe*De-qt*Ve)/qe,tr=(qt*Ie-fe*ye)/qe;J-=on,st-=tr}while((c(on)>M||c(tr)>M)&&--Ct>0);return Ct&&[J,st]};var Ns=function(){return l.geoProjection(fo).scale(139.98)};function Bu(D,G){return[g(D)/n(G),_(G)*n(D)]}Bu.invert=function(D,G){var J=D*D,st=G*G,Ct=st+1,Ot=D?A*K((Ct-K(J*J+2*J*(st-1)+Ct*Ct))/J+1):1/K(Ct);return[k(D*Ot),y(G)*Y(Ot)]};var ll=function(){return l.geoProjection(Bu).scale(144.049).clipAngle(90-.001)};function cl(D){var G=n(D),J=_(P+D/2);function st(Ct,Ot){var Ut=Ot-D,Ht=c(Ut)<M?Ct*G:c(Ht=P+Ot/2)<M||c(c(Ht)-S)<M?0:Ct*Ut/o(_(Ht)/J);return[Ht,Ut]}return st.invert=function(Ct,Ot){var Ut,Ht=Ot+D;return[c(Ot)<M?Ct/G:c(Ut=P+Ht/2)<M||c(c(Ut)-S)<M?0:Ct*o(_(Ut)/J)/Ot,Ht]},st}var Xu=function(){return Gt(cl).parallel(40).scale(158.837)};function Io(D,G){return[D,1.25*o(_(P+.4*G))]}Io.invert=function(D,G){return[D,2.5*r(i(.8*G))-.625*m]};var Ra=function(){return l.geoProjection(Io).scale(108.318)};function Ea(D){var G=D.length-1;function J(st,Ct){for(var Ot=n(Ct),Ut=2/(1+Ot*n(st)),Ht=Ut*Ot*g(st),qt=Ut*g(Ct),fe=G,ye=D[fe],De=ye[0],Ie=ye[1],Ve;--fe>=0;)ye=D[fe],De=ye[0]+Ht*(Ve=De)-qt*Ie,Ie=ye[1]+Ht*Ie+qt*Ve;return De=Ht*(Ve=De)-qt*Ie,Ie=Ht*Ie+qt*Ve,[De,Ie]}return J.invert=function(st,Ct){var Ot=20,Ut=st,Ht=Ct;do{for(var qt=G,fe=D[qt],ye=fe[0],De=fe[1],Ie=0,Ve=0,qe;--qt>=0;)fe=D[qt],Ie=ye+Ut*(qe=Ie)-Ht*Ve,Ve=De+Ut*Ve+Ht*qe,ye=fe[0]+Ut*(qe=ye)-Ht*De,De=fe[1]+Ut*De+Ht*qe;Ie=ye+Ut*(qe=Ie)-Ht*Ve,Ve=De+Ut*Ve+Ht*qe,ye=Ut*(qe=ye)-Ht*De-st,De=Ut*De+Ht*qe-Ct;var on=Ie*Ie+Ve*Ve,tr,zn;Ut-=tr=(ye*Ie+De*Ve)/on,Ht-=zn=(De*Ie-ye*Ve)/on}while(c(tr)+c(zn)>M*M&&--Ot>0);if(Ot){var cr=K(Ut*Ut+Ht*Ht),yr=2*r(cr*.5),Jr=g(yr);return[h(Ut*Jr,cr*n(yr)),cr?k(Ht*Jr/cr):0]}},J}var Ro=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],pu=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],Ml=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],Fs=[[.9245,0],[0,0],[.01943,0]],Ss=[[.721316,0],[0,0],[-.00881625,-.00617325]];function au(){return Wa(Ro,[152,-64]).scale(1500).center([-160.908,62.4864]).clipAngle(25)}function qs(){return Wa(pu,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function Ds(){return Wa(Ml,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function Ju(){return Wa(Fs,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function ou(){return Wa(Ss,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function Wa(D,G){var J=l.geoProjection(Ea(D)).rotate(G).clipAngle(90),st=l.geoRotation(G),Ct=J.center;return delete J.rotate,J.center=function(Ot){return arguments.length?Ct(st(Ot)):st.invert(Ct())},J}var Pl=K(6),$l=K(7);function Tl(D,G){var J=k(7*g(G)/(3*Pl));return[Pl*D*(2*n(2*J/3)-1)/$l,9*g(J/3)/$l]}Tl.invert=function(D,G){var J=3*k(G*$l/9);return[D*$l/(Pl*(2*n(2*J/3)-1)),k(g(J)*3*Pl/7)]};var Ql=function(){return l.geoProjection(Tl).scale(164.859)};function Nu(D,G){for(var J=(1+A)*g(G),st=G,Ct=0,Ot;Ct<25&&(st-=Ot=(g(st/2)+g(st)-J)/(.5*n(st/2)+n(st)),!(c(Ot)<M));Ct++);return[D*(1+2*n(st)/n(st/2))/(3*O),2*K(3)*g(st/2)/K(2+O)]}Nu.invert=function(D,G){var J=G*K(2+O)/(2*K(3)),st=2*k(J);return[3*O*D/(1+2*n(st)/n(st/2)),k((J+g(st))/(1+A))]};var Ha=function(){return l.geoProjection(Nu).scale(188.209)};function su(D,G){for(var J=K(6/(4+m)),st=(1+m/4)*g(G),Ct=G/2,Ot=0,Ut;Ot<25&&(Ct-=Ut=(Ct/2+g(Ct)-st)/(.5+n(Ct)),!(c(Ut)<M));Ot++);return[J*(.5+n(Ct))*D/1.5,J*Ct]}su.invert=function(D,G){var J=K(6/(4+m)),st=G/J;return c(c(st)-S)<M&&(st=st<0?-S:S),[1.5*D/(J*(.5+n(st))),k((st/2+g(st))/(1+m/4))]};var Al=function(){return l.geoProjection(su).scale(166.518)};function ms(D,G){var J=G*G,st=J*J;return[D*(.8707-.131979*J+st*(-.013791+st*(.003971*J-.001529*st))),G*(1.007226+J*(.015085+st*(-.044475+.028874*J-.005916*st)))]}ms.invert=function(D,G){var J=G,st=25,Ct;do{var Ot=J*J,Ut=Ot*Ot;J-=Ct=(J*(1.007226+Ot*(.015085+Ut*(-.044475+.028874*Ot-.005916*Ut)))-G)/(1.007226+Ot*(.015085*3+Ut*(-.044475*7+.028874*9*Ot-.005916*11*Ut)))}while(c(Ct)>M&&--st>0);return[D/(.8707+(Ot=J*J)*(-.131979+Ot*(-.013791+Ot*Ot*Ot*(.003971-.001529*Ot)))),J]};var Tu=function(){return l.geoProjection(ms).scale(175.295)};function gu(D,G){var J=G*G,st=J*J,Ct=J*st;return[D*(.84719-.13063*J+Ct*Ct*(-.04515+.05494*J-.02326*st+.00331*Ct)),G*(1.01183+st*st*(-.02625+.01926*J-.00396*st))]}gu.invert=function(D,G){var J=G,st=25,Ct,Ot,Ut,Ht;do Ot=J*J,Ut=Ot*Ot,J-=Ct=(J*(1.01183+Ut*Ut*(-.02625+.01926*Ot-.00396*Ut))-G)/(1.01183+Ut*Ut*(9*-.02625+11*.01926*Ot+13*-.00396*Ut));while(c(Ct)>x&&--st>0);return Ot=J*J,Ut=Ot*Ot,Ht=Ot*Ut,[D/(.84719-.13063*Ot+Ht*Ht*(-.04515+.05494*Ot-.02326*Ut+.00331*Ht)),J]};var Fu=function(){return l.geoProjection(gu).scale(175.295)};function Hs(D,G){return[D*(1+n(G))/2,2*(G-_(G/2))]}Hs.invert=function(D,G){for(var J=G/2,st=0,Ct=Infinity;st<10&&c(Ct)>M;++st){var Ot=n(G/2);G-=Ct=(G-_(G/2)-J)/(1-.5/(Ot*Ot))}return[2*D/(1+n(G)),G]};var $o=function(){return l.geoProjection(Hs).scale(152.63)},fs=1.0148,fl=.23185,zl=-.14499,ql=.02406,zu=fs,$u=5*fl,Au=7*zl,Cu=9*ql,mu=1.790857183;function Uu(D,G){var J=G*G;return[D,G*(fs+J*J*(fl+J*(zl+ql*J)))]}Uu.invert=function(D,G){G>mu?G=mu:G<-mu&&(G=-mu);var J=G,st;do{var Ct=J*J;J-=st=(J*(fs+Ct*Ct*(fl+Ct*(zl+ql*Ct)))-G)/(zu+Ct*Ct*($u+Ct*(Au+Cu*Ct)))}while(c(st)>M);return[D,J]};var zs=function(){return l.geoProjection(Uu).scale(139.319)};function Ul(D,G){if(c(G)<M)return[D,0];var J=_(G),st=D*g(G);return[g(st)/J,G+(1-n(st))/J]}Ul.invert=function(D,G){if(c(G)<M)return[D,0];var J=D*D+G*G,st=G*.5,Ct=10,Ot;do{var Ut=_(st),Ht=1/n(st),qt=J-2*G*st+st*st;st-=Ot=(Ut*qt+2*(st-G))/(2+qt*Ht*Ht+2*(st-G)*Ut)}while(c(Ot)>M&&--Ct>0);return Ut=_(st),[(c(G)<c(st+1/Ut)?k(D*Ut):y(D)*(Y(c(D*Ut))+S))/g(st),st]};var gc=function(){return l.geoProjection(Ul).scale(103.74)},Cl=function(G,J){var st=cc(G[1],G[0]),Ct=cc(J[1],J[0]),Ot=Ol(st,Ct),Ut=Qu(st)/Qu(Ct);return Gl([1,0,G[0][0],0,1,G[0][1]],Gl([Ut,0,0,0,Ut,0],Gl([n(Ot),g(Ot),0,-g(Ot),n(Ot),0],[1,0,-J[0][0],0,1,-J[0][1]])))};function kl(D){var G=1/(D[0]*D[4]-D[1]*D[3]);return[G*D[4],-G*D[1],G*(D[1]*D[5]-D[2]*D[4]),-G*D[3],G*D[0],G*(D[2]*D[3]-D[0]*D[5])]}function Gl(D,G){return[D[0]*G[0]+D[1]*G[3],D[0]*G[1]+D[1]*G[4],D[0]*G[2]+D[1]*G[5]+D[2],D[3]*G[0]+D[4]*G[3],D[3]*G[1]+D[4]*G[4],D[3]*G[2]+D[4]*G[5]+D[5]]}function cc(D,G){return[D[0]-G[0],D[1]-G[1]]}function Qu(D){return K(D[0]*D[0]+D[1]*D[1])}function Ol(D,G){return h(D[0]*G[1]-D[1]*G[0],D[0]*G[0]+D[1]*G[1])}var Vl=function(G,J,st){st=st==null?-m/6:st,Ct(G,{transform:[n(st),g(st),0,-g(st),n(st),0]});function Ct(ye,De){if(ye.edges=hl(ye.face),De.face){var Ie=ye.shared=gl(ye.face,De.face),Ve=Cl(Ie.map(De.project),Ie.map(ye.project));ye.transform=De.transform?Gl(De.transform,Ve):Ve;for(var qe=De.edges,on=0,tr=qe.length;on<tr;++on)go(Ie[0],qe[on][1])&&go(Ie[1],qe[on][0])&&(qe[on]=ye),go(Ie[0],qe[on][0])&&go(Ie[1],qe[on][1])&&(qe[on]=ye);for(qe=ye.edges,on=0,tr=qe.length;on<tr;++on)go(Ie[0],qe[on][0])&&go(Ie[1],qe[on][1])&&(qe[on]=De),go(Ie[0],qe[on][1])&&go(Ie[1],qe[on][0])&&(qe[on]=De)}else ye.transform=De.transform;return ye.children&&ye.children.forEach(function(zn){Ct(zn,ye)}),ye}function Ot(ye,De){var Ie=J(ye,De),Ve=Ie.project([ye*F,De*F]),qe;return(qe=Ie.transform)?[qe[0]*Ve[0]+qe[1]*Ve[1]+qe[2],-(qe[3]*Ve[0]+qe[4]*Ve[1]+qe[5])]:(Ve[1]=-Ve[1],Ve)}Ys(G)&&(Ot.invert=function(ye,De){var Ie=Ut(G,[ye,-De]);return Ie&&(Ie[0]*=Z,Ie[1]*=Z,Ie)});function Ut(ye,De){var Ie=ye.project.invert,Ve=ye.transform,qe=De;if(Ve&&(Ve=kl(Ve),qe=[Ve[0]*qe[0]+Ve[1]*qe[1]+Ve[2],Ve[3]*qe[0]+Ve[4]*qe[1]+Ve[5]]),Ie&&ye===Ht(on=Ie(qe)))return on;for(var on,tr=ye.children,zn=0,cr=tr&&tr.length;zn<cr;++zn)if(on=Ut(tr[zn],De))return on}function Ht(ye){return J(ye[0]*Z,ye[1]*Z)}var qt=l.geoProjection(Ot),fe=qt.stream;return qt.stream=function(ye){var De=qt.rotate(),Ie=fe(ye),Ve=(qt.rotate([0,0]),fe(ye));return qt.rotate(De),Ie.sphere=function(){Ve.polygonStart(),Ve.lineStart(),tu(Ve,G),Ve.lineEnd(),Ve.polygonEnd()},Ie},qt};function tu(D,G,J){var st,Ct=G.edges,Ot=Ct.length,Ut,Ht={type:"MultiPoint",coordinates:G.face},qt=G.face.filter(function(on){return c(on[1])!==90}),fe=l.geoBounds({type:"MultiPoint",coordinates:qt}),ye=!1,De=-1,Ie=fe[1][0]-fe[0][0],Ve=Ie===180||Ie===360?[(fe[0][0]+fe[1][0])/2,(fe[0][1]+fe[1][1])/2]:l.geoCentroid(Ht);if(J)for(;++De<Ot&&Ct[De]!==J;);++De;for(var qe=0;qe<Ot;++qe)Ut=Ct[(qe+De)%Ot],Array.isArray(Ut)?(ye||(D.point((st=l.geoInterpolate(Ut[0],Ve)(M))[0],st[1]),ye=!0),D.point((st=l.geoInterpolate(Ut[1],Ve)(M))[0],st[1])):(ye=!1,Ut!==J&&tu(D,Ut,G))}function go(D,G){return D&&G&&D[0]===G[0]&&D[1]===G[1]}function gl(D,G){for(var J,st,Ct=D.length,Ot=null,Ut=0;Ut<Ct;++Ut){J=D[Ut];for(var Ht=G.length;--Ht>=0;)if(st=G[Ht],J[0]===st[0]&&J[1]===st[1]){if(Ot)return[Ot,J];Ot=J}}}function hl(D){for(var G=D.length,J=[],st=D[G-1],Ct=0;Ct<G;++Ct)J.push([st,st=D[Ct]]);return J}function Ys(D){return D.project.invert||D.children&&D.children.some(Ys)}var Na=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],_o=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(D){return D.map(function(G){return Na[G]})}),Us=function(G){G=G||function(st){var Ct=l.geoCentroid({type:"MultiPoint",coordinates:st});return l.geoGnomonic().scale(1).translate([0,0]).rotate([-Ct[0],-Ct[1]])};var J=_o.map(function(st){return{face:st,project:G(st)}});return[-1,0,0,1,0,1,4,5].forEach(function(st,Ct){var Ot=J[st];Ot&&(Ot.children||(Ot.children=[])).push(J[Ct])}),Vl(J[0],function(st,Ct){return J[st<-m/2?Ct<0?6:4:st<0?Ct<0?2:0:st<m/2?Ct<0?3:1:Ct<0?7:5]}).scale(101.858).center([0,45])},ml=2/K(3);function qu(D,G){var J=fi(D,G);return[J[0]*ml,J[1]]}qu.invert=function(D,G){return fi.invert(D/ml,G)};var ku=function(G){G=G||function(st){var Ct=l.geoCentroid({type:"MultiPoint",coordinates:st});return l.geoProjection(qu).translate([0,0]).scale(1).rotate(Ct[1]>0?[-Ct[0],0]:[180-Ct[0],180])};var J=_o.map(function(st){return{face:st,project:G(st)}});return[-1,0,0,1,0,1,4,5].forEach(function(st,Ct){var Ot=J[st];Ot&&(Ot.children||(Ot.children=[])).push(J[Ct])}),Vl(J[0],function(st,Ct){return J[st<-m/2?Ct<0?6:4:st<0?Ct<0?2:0:st<m/2?Ct<0?3:1:Ct<0?7:5]}).scale(121.906).center([0,48.5904])},mc=function(G){G=G||function(Ht){var qt=Ht.length===6?l.geoCentroid({type:"MultiPoint",coordinates:Ht}):Ht[0];return l.geoGnomonic().scale(1).translate([0,0]).rotate([-qt[0],-qt[1]])};var J=_o.map(function(Ht){for(var qt=Ht.map(Zs),fe=qt.length,ye=qt[fe-1],De,Ie=[],Ve=0;Ve<fe;++Ve)De=qt[Ve],Ie.push(uu([ye[0]*.9486832980505138+De[0]*.31622776601683794,ye[1]*.9486832980505138+De[1]*.31622776601683794,ye[2]*.9486832980505138+De[2]*.31622776601683794]),uu([De[0]*.9486832980505138+ye[0]*.31622776601683794,De[1]*.9486832980505138+ye[1]*.31622776601683794,De[2]*.9486832980505138+ye[2]*.31622776601683794])),ye=De;return Ie}),st=[],Ct=[-1,0,0,1,0,1,4,5];J.forEach(function(Ht,qt){for(var fe=_o[qt],ye=fe.length,De=st[qt]=[],Ie=0;Ie<ye;++Ie)J.push([fe[Ie],Ht[(Ie*2+2)%(2*ye)],Ht[(Ie*2+1)%(2*ye)]]),Ct.push(qt),De.push(tl(Zs(Ht[(Ie*2+2)%(2*ye)]),Zs(Ht[(Ie*2+1)%(2*ye)])))});var Ot=J.map(function(Ht){return{project:G(Ht),face:Ht}});Ct.forEach(function(Ht,qt){var fe=Ot[Ht];fe&&(fe.children||(fe.children=[])).push(Ot[qt])});function Ut(Ht,qt){var fe=n(qt),ye=[fe*n(Ht),fe*g(Ht),g(qt)],De=Ht<-m/2?qt<0?6:4:Ht<0?qt<0?2:0:Ht<m/2?qt<0?3:1:qt<0?7:5,Ie=st[De];return Ot[Os(Ie[0],ye)<0?8+3*De:Os(Ie[1],ye)<0?8+3*De+1:Os(Ie[2],ye)<0?8+3*De+2:De]}return Vl(Ot[0],Ut).scale(110.625).center([0,45])};function Os(D,G){for(var J=0,st=D.length,Ct=0;J<st;++J)Ct+=D[J]*G[J];return Ct}function tl(D,G){return[D[1]*G[2]-D[2]*G[1],D[2]*G[0]-D[0]*G[2],D[0]*G[1]-D[1]*G[0]]}function uu(D){return[h(D[1],D[0])*F,k(u(-1,f(1,D[2])))*F]}function Zs(D){var G=D[0]*Z,J=D[1]*Z,st=n(J);return[st*n(G),st*g(G),g(J)]}var Qo=function(){},eu=function(G){if((st=G.length)<4)return!1;for(var J=0,st,Ct=G[st-1][1]*G[0][0]-G[st-1][0]*G[0][1];++J<st;)Ct+=G[J-1][1]*G[J][0]-G[J-1][0]*G[J][1];return Ct<=0},Ou=function(G,J){for(var st=J[0],Ct=J[1],Ot=!1,Ut=0,Ht=G.length,qt=Ht-1;Ut<Ht;qt=Ut++){var fe=G[Ut],ye=fe[0],De=fe[1],Ie=G[qt],Ve=Ie[0],qe=Ie[1];De>Ct^qe>Ct&&st<(Ve-ye)*(Ct-De)/(qe-De)+ye&&(Ot=!Ot)}return Ot},qo=function(G,J){var st=J.stream,Ct;if(!st)throw new Error("invalid projection");switch(G&&G.type){case"Feature":Ct=ws;break;case"FeatureCollection":Ct=Wi;break;default:Ct=wu;break}return Ct(G,st)};function Wi(D,G){return{type:"FeatureCollection",features:D.features.map(function(J){return ws(J,G)})}}function ws(D,G){return{type:"Feature",id:D.id,properties:D.properties,geometry:wu(D.geometry,G)}}function Gu(D,G){return{type:"GeometryCollection",geometries:D.geometries.map(function(J){return wu(J,G)})}}function wu(D,G){if(!D)return null;if(D.type==="GeometryCollection")return Gu(D,G);var J;switch(D.type){case"Point":J=Eu;break;case"MultiPoint":J=Eu;break;case"LineString":J=Mi;break;case"MultiLineString":J=Mi;break;case"Polygon":J=el;break;case"MultiPolygon":J=el;break;case"Sphere":J=el;break;default:return null}return l.geoStream(D,G(J)),J.result()}var Fo=[],ko=[],Eu={point:function(G,J){Fo.push([G,J])},result:function(){var G=Fo.length?Fo.length<2?{type:"Point",coordinates:Fo[0]}:{type:"MultiPoint",coordinates:Fo}:null;return Fo=[],G}},Mi={lineStart:Qo,point:function(G,J){Fo.push([G,J])},lineEnd:function(){Fo.length&&(ko.push(Fo),Fo=[])},result:function(){var G=ko.length?ko.length<2?{type:"LineString",coordinates:ko[0]}:{type:"MultiLineString",coordinates:ko}:null;return ko=[],G}},el={polygonStart:Qo,lineStart:Qo,point:function(G,J){Fo.push([G,J])},lineEnd:function(){var G=Fo.length;if(G){do Fo.push(Fo[0].slice());while(++G<4);ko.push(Fo),Fo=[]}},polygonEnd:Qo,result:function(){if(!ko.length)return null;var G=[],J=[];return ko.forEach(function(st){eu(st)?G.push([st]):J.push(st)}),J.forEach(function(st){var Ct=st[0];G.some(function(Ot){if(Ou(Ot[0],Ct))return Ot.push(st),!0})||G.push([st])}),ko=[],G.length?G.length>1?{type:"MultiPolygon",coordinates:G}:{type:"Polygon",coordinates:G[0]}:null}},Iu=function(G){var J=G(S,0)[0]-G(-S,0)[0];function st(Ct,Ot){var Ut=c(Ct)<S,Ht=G(Ut?Ct:Ct>0?Ct-m:Ct+m,Ot),qt=(Ht[0]-Ht[1])*A,fe=(Ht[0]+Ht[1])*A;if(Ut)return[qt,fe];var ye=J*A,De=qt>0^fe>0?-1:1;return[De*qt-y(fe)*ye,De*fe-y(qt)*ye]}return G.invert&&(st.invert=function(Ct,Ot){var Ut=(Ct+Ot)*A,Ht=(Ot-Ct)*A,qt=c(Ut)<.5*J&&c(Ht)<.5*J;if(!qt){var fe=J*A,ye=Ut>0^Ht>0?-1:1,De=-ye*Ct+(Ht>0?1:-1)*fe,Ie=-ye*Ot+(Ut>0?1:-1)*fe;Ut=(-De-Ie)*A,Ht=(De-Ie)*A}var Ve=G.invert(Ut,Ht);return qt||(Ve[0]+=Ut>0?m:-m),Ve}),l.geoProjection(st).rotate([-90,-90,45]).clipAngle(180-.001)},Lu=function(){return Iu(iu).scale(176.423)},nu=function(){return Iu(qn).scale(111.48)},we=function(G,J){if(!(0<=(J=+J)&&J<=20))throw new Error("invalid digits");function st(fe){var ye=fe.length,De=2,Ie=new Array(ye);for(Ie[0]=+fe[0].toFixed(J),Ie[1]=+fe[1].toFixed(J);De<ye;)Ie[De]=fe[De],++De;return Ie}function Ct(fe){return fe.map(st)}function Ot(fe){return fe.map(Ct)}function Ut(fe){if(fe==null)return fe;var ye;switch(fe.type){case"GeometryCollection":ye={type:"GeometryCollection",geometries:fe.geometries.map(Ut)};break;case"Point":ye={type:"Point",coordinates:st(fe.coordinates)};break;case"MultiPoint":case"LineString":ye={type:fe.type,coordinates:Ct(fe.coordinates)};break;case"MultiLineString":case"Polygon":ye={type:fe.type,coordinates:Ot(fe.coordinates)};break;case"MultiPolygon":ye={type:"MultiPolygon",coordinates:fe.coordinates.map(Ot)};break;default:return fe}return fe.bbox!=null&&(ye.bbox=fe.bbox),ye}function Ht(fe){var ye={type:"Feature",properties:fe.properties,geometry:Ut(fe.geometry)};return fe.id!=null&&(ye.id=fe.id),fe.bbox!=null&&(ye.bbox=fe.bbox),ye}if(G!=null)switch(G.type){case"Feature":return Ht(G);case"FeatureCollection":{var qt={type:"FeatureCollection",features:G.features.map(Ht)};return G.bbox!=null&&(qt.bbox=G.bbox),qt}default:return Ut(G)}return G};function Te(D){var G=g(D);function J(st,Ct){var Ot=G?_(st*G/2)/G:st/2;if(!Ct)return[2*Ot,-D];var Ut=2*r(Ot*g(Ct)),Ht=1/_(Ct);return[g(Ut)*Ht,Ct+(1-n(Ut))*Ht-D]}return J.invert=function(st,Ct){if(c(Ct+=D)<M)return[G?2*r(G*st/2)/G:st,0];var Ot=st*st+Ct*Ct,Ut=0,Ht=10,qt;do{var fe=_(Ut),ye=1/n(Ut),De=Ot-2*Ct*Ut+Ut*Ut;Ut-=qt=(fe*De+2*(Ut-Ct))/(2+De*ye*ye+2*(Ut-Ct)*fe)}while(c(qt)>M&&--Ht>0);var Ie=st*(fe=_(Ut)),Ve=_(c(Ct)<c(Ut+1/fe)?k(Ie)*.5:Y(Ie)*.5+m/4)/g(Ut);return[G?2*r(G*Ve)/G:2*Ve,Ut]},J}var dn=function(){return Gt(Te).scale(131.215)},tn=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];tn.forEach(function(D){D[1]*=1.0144});function wn(D,G){var J=f(18,c(G)*36/m),st=a(J),Ct=J-st,Ot=(De=tn[st])[0],Ut=De[1],Ht=(De=tn[++st])[0],qt=De[1],fe=(De=tn[f(19,++st)])[0],ye=De[1],De;return[D*(Ht+Ct*(fe-Ot)/2+Ct*Ct*(fe-2*Ht+Ot)/2),(G>0?S:-S)*(qt+Ct*(ye-Ut)/2+Ct*Ct*(ye-2*qt+Ut)/2)]}wn.invert=function(D,G){var J=G/S,st=J*90,Ct=f(18,c(st/5)),Ot=u(0,a(Ct));do{var Ut=tn[Ot][1],Ht=tn[Ot+1][1],qt=tn[f(19,Ot+2)][1],fe=qt-Ut,ye=qt-2*Ht+Ut,De=2*(c(J)-Ht)/fe,Ie=ye/fe,Ve=De*(1-Ie*De*(1-2*Ie*De));if(Ve>=0||Ot===1){st=(G>=0?5:-5)*(Ve+Ct);var qe=50,on;do Ct=f(18,c(st)/5),Ot=a(Ct),Ve=Ct-Ot,Ut=tn[Ot][1],Ht=tn[Ot+1][1],qt=tn[f(19,Ot+2)][1],st-=(on=(G>=0?S:-S)*(Ht+Ve*(qt-Ut)/2+Ve*Ve*(qt-2*Ht+Ut)/2)-G)*F;while(c(on)>x&&--qe>0);break}}while(--Ot>=0);var tr=tn[Ot][0],zn=tn[Ot+1][0],cr=tn[f(19,Ot+2)][0];return[D/(zn+Ve*(cr-tr)/2+Ve*Ve*(cr-2*zn+tr)/2),st*Z]};var vr=function(){return l.geoProjection(wn).scale(152.63)};function Lr(D){function G(J,st){var Ct=n(st),Ot=(D-1)/(D-Ct*n(J));return[Ot*Ct*g(J),Ot*g(st)]}return G.invert=function(J,st){var Ct=J*J+st*st,Ot=K(Ct),Ut=(D-K(1-Ct*(D+1)/(D-1)))/((D-1)/Ot+Ot/(D-1));return[h(J*Ut,Ot*K(1-Ut*Ut)),Ot?k(st*Ut/Ot):0]},G}function Kr(D,G){var J=Lr(D);if(!G)return J;var st=n(G),Ct=g(G);function Ot(Ut,Ht){var qt=J(Ut,Ht),fe=qt[1],ye=fe*Ct/(D-1)+st;return[qt[0]*st/ye,fe/ye]}return Ot.invert=function(Ut,Ht){var qt=(D-1)/(D-1-Ht*Ct);return J.invert(qt*Ut,qt*Ht*st)},Ot}var ti=function(){var G=2,J=0,st=l.geoProjectionMutator(Kr),Ct=st(G,J);return Ct.distance=function(Ot){return arguments.length?st(G=+Ot,J):G},Ct.tilt=function(Ot){return arguments.length?st(G,J=Ot*Z):J*F},Ct.scale(432.147).clipAngle(Y(1/G)*F-1e-6)},Fr=1e-4,ui=1e4,br=-180,Zt=br+Fr,te=180,Le=te-Fr,_e=-90,Rt=_e+Fr,zt=90,se=zt-Fr;function re(D){return D.length>0}function ce(D){return Math.floor(D*ui)/ui}function Fe(D){return D===_e||D===zt?[0,D]:[br,ce(D)]}function Ke(D){var G=D[0],J=D[1],st=!1;return G<=Zt?(G=br,st=!0):G>=Le&&(G=te,st=!0),J<=Rt?(J=_e,st=!0):J>=se&&(J=zt,st=!0),st?[G,J]:D}function rn(D){return D.map(Ke)}function Je(D,G,J){for(var st=0,Ct=D.length;st<Ct;++st){var Ot=D[st].slice();J.push({index:-1,polygon:G,ring:Ot});for(var Ut=0,Ht=Ot.length;Ut<Ht;++Ut){var qt=Ot[Ut],fe=qt[0],ye=qt[1];if(fe<=Zt||fe>=Le||ye<=Rt||ye>=se){Ot[Ut]=Ke(qt);for(var De=Ut+1;De<Ht;++De){var Ie=Ot[De],Ve=Ie[0],qe=Ie[1];if(Ve>Zt&&Ve<Le&&qe>Rt&&qe<se)break}if(De===Ut+1)continue;if(Ut){var on={index:-1,polygon:G,ring:Ot.slice(0,Ut+1)};on.ring[on.ring.length-1]=Fe(ye),J[J.length-1]=on}else J.pop();if(De>=Ht)break;J.push({index:-1,polygon:G,ring:Ot=Ot.slice(De-1)}),Ot[0]=Fe(Ot[0][1]),Ut=-1,Ht=Ot.length}}}}function vn(D){var G,J=D.length,st={},Ct={},Ot,Ut,Ht,qt,fe;for(G=0;G<J;++G){if(Ot=D[G],Ut=Ot.ring[0],qt=Ot.ring[Ot.ring.length-1],Ut[0]===qt[0]&&Ut[1]===qt[1]){Ot.polygon.push(Ot.ring),D[G]=null;continue}Ot.index=G,st[Ut]=Ct[qt]=Ot}for(G=0;G<J;++G)if(Ot=D[G],Ot){if(Ut=Ot.ring[0],qt=Ot.ring[Ot.ring.length-1],Ht=Ct[Ut],fe=st[qt],delete st[Ut],delete Ct[qt],Ut[0]===qt[0]&&Ut[1]===qt[1]){Ot.polygon.push(Ot.ring);continue}Ht?(delete Ct[Ut],delete st[Ht.ring[0]],Ht.ring.pop(),D[Ht.index]=null,Ot={index:-1,polygon:Ht.polygon,ring:Ht.ring.concat(Ot.ring)},Ht===fe?Ot.polygon.push(Ot.ring):(Ot.index=J++,D.push(st[Ot.ring[0]]=Ct[Ot.ring[Ot.ring.length-1]]=Ot))):fe?(delete st[qt],delete Ct[fe.ring[fe.ring.length-1]],Ot.ring.pop(),Ot={index:J++,polygon:fe.polygon,ring:Ot.ring.concat(fe.ring)},D[fe.index]=null,D.push(st[Ot.ring[0]]=Ct[Ot.ring[Ot.ring.length-1]]=Ot)):(Ot.ring.push(Ot.ring[0]),Ot.polygon.push(Ot.ring))}}function hn(D){var G={type:"Feature",geometry:Jn(D.geometry)};return D.id!=null&&(G.id=D.id),D.bbox!=null&&(G.bbox=D.bbox),D.properties!=null&&(G.properties=D.properties),G}function Jn(D){if(D==null)return D;var G,J,st,Ct;switch(D.type){case"GeometryCollection":G={type:"GeometryCollection",geometries:D.geometries.map(Jn)};break;case"Point":G={type:"Point",coordinates:Ke(D.coordinates)};break;case"MultiPoint":case"LineString":G={type:D.type,coordinates:rn(D.coordinates)};break;case"MultiLineString":G={type:"MultiLineString",coordinates:D.coordinates.map(rn)};break;case"Polygon":{var Ot=[];Je(D.coordinates,Ot,J=[]),vn(J),G={type:"Polygon",coordinates:Ot};break}case"MultiPolygon":{J=[],st=-1,Ct=D.coordinates.length;for(var Ut=new Array(Ct);++st<Ct;)Je(D.coordinates[st],Ut[st]=[],J);vn(J),G={type:"MultiPolygon",coordinates:Ut.filter(re)};break}default:return D}return D.bbox!=null&&(G.bbox=D.bbox),G}var Vn=function(G){if(G==null)return G;switch(G.type){case"Feature":return hn(G);case"FeatureCollection":{var J={type:"FeatureCollection",features:G.features.map(hn)};return G.bbox!=null&&(J.bbox=G.bbox),J}default:return Jn(G)}};function Zn(D,G){var J=_(G/2),st=g(P*J);return[D*(.74482-.34588*st*st),1.70711*J]}Zn.invert=function(D,G){var J=G/1.70711,st=g(P*J);return[D/(.74482-.34588*st*st),2*r(J)]};var Wn=function(){return l.geoProjection(Zn).scale(146.153)},lr=function(G,J,st){var Ct=l.geoInterpolate(J,st),Ot=Ct(.5),Ut=l.geoRotation([-Ot[0],-Ot[1]])(J),Ht=Ct.distance/2,qt=-k(g(Ut[1]*Z)/g(Ht)),fe=[-Ot[0],-Ot[1],-(Ut[0]>0?m-qt:qt)*F],ye=l.geoProjection(G(Ht)).rotate(fe),De=l.geoRotation(fe),Ie=ye.center;return delete ye.rotate,ye.center=function(Ve){return arguments.length?Ie(De(Ve)):De.invert(Ie())},ye.clipAngle(90)};function xr(D){var G=n(D);function J(st,Ct){var Ot=l.geoGnomonicRaw(st,Ct);return Ot[0]*=G,Ot}return J.invert=function(st,Ct){return l.geoGnomonicRaw.invert(st/G,Ct)},J}function Vr(){return yi([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function yi(D,G){return lr(xr,D,G)}function Br(D){if(!(D*=2))return l.geoAzimuthalEquidistantRaw;var G=-D/2,J=-G,st=D*D,Ct=_(J),Ot=.5/g(J);function Ut(Ht,qt){var fe=Y(n(qt)*n(Ht-G)),ye=Y(n(qt)*n(Ht-J)),De=qt<0?-1:1;return fe*=fe,ye*=ye,[(fe-ye)/(2*D),De*K(4*st*ye-(st-fe+ye)*(st-fe+ye))/(2*D)]}return Ut.invert=function(Ht,qt){var fe=qt*qt,ye=n(K(fe+(Ie=Ht+G)*Ie)),De=n(K(fe+(Ie=Ht+J)*Ie)),Ie,Ve;return[h(Ve=ye-De,Ie=(ye+De)*Ct),(qt<0?-1:1)*Y(K(Ie*Ie+Ve*Ve)*Ot)]},Ut}function si(){return gi([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function gi(D,G){return lr(Br,D,G)}function Zi(D,G){if(c(G)<M)return[D,0];var J=c(G/S),st=k(J);if(c(D)<M||c(c(G)-S)<M)return[0,y(G)*m*_(st/2)];var Ct=n(st),Ot=c(m/D-D/m)/2,Ut=Ot*Ot,Ht=Ct/(J+Ct-1),qt=Ht*(2/J-1),fe=qt*qt,ye=fe+Ut,De=Ht-fe,Ie=Ut+Ht;return[y(D)*m*(Ot*De+K(Ut*De*De-ye*(Ht*Ht-fe)))/ye,y(G)*m*(qt*Ie-Ot*K((Ut+1)*ye-Ie*Ie))/ye]}Zi.invert=function(D,G){if(c(G)<M)return[D,0];if(c(D)<M)return[0,S*g(2*r(G/m))];var J=(D/=m)*D,st=(G/=m)*G,Ct=J+st,Ot=Ct*Ct,Ut=-c(G)*(1+Ct),Ht=Ut-2*st+J,qt=-2*Ut+1+2*st+Ot,fe=st/qt+(2*Ht*Ht*Ht/(qt*qt*qt)-9*Ut*Ht/(qt*qt))/27,ye=(Ut-Ht*Ht/(3*qt))/qt,De=2*K(-ye/3),Ie=Y(3*fe/(ye*De))/3;return[m*(Ct-1+K(1+2*(J-st)+Ot))/(2*D),y(G)*m*(-De*n(Ie+m/3)-Ht/(3*qt))]};var Li=function(){return l.geoProjection(Zi).scale(79.4183)};function Ma(D,G){if(c(G)<M)return[D,0];var J=c(G/S),st=k(J);if(c(D)<M||c(c(G)-S)<M)return[0,y(G)*m*_(st/2)];var Ct=n(st),Ot=c(m/D-D/m)/2,Ut=Ot*Ot,Ht=Ct*(K(1+Ut)-Ot*Ct)/(1+Ut*J*J);return[y(D)*m*Ht,y(G)*m*K(1-Ht*(2*Ot+Ht))]}Ma.invert=function(D,G){if(!D)return[0,S*g(2*r(G/m))];var J=c(D/m),st=(1-J*J-(G/=m)*G)/(2*J),Ct=st*st,Ot=K(Ct+1);return[y(D)*m*(Ot-st),y(G)*S*g(2*h(K((1-2*st*J)*(st+Ot)-J),K(Ot+st+J)))]};var ma=function(){return l.geoProjection(Ma).scale(79.4183)};function la(D,G){if(c(G)<M)return[D,0];var J=G/S,st=k(J);if(c(D)<M||c(c(G)-S)<M)return[0,m*_(st/2)];var Ct=(m/D-D/m)/2,Ot=J/(1+n(st));return[m*(y(D)*K(Ct*Ct+1-Ot*Ot)-Ct),m*Ot]}la.invert=function(D,G){if(!G)return[D,0];var J=G/m,st=(m*m*(1-J*J)-D*D)/(2*m*D);return[D?m*(y(D)*K(st*st+1)-st):0,S*g(2*r(J))]};var ri=function(){return l.geoProjection(la).scale(79.4183)};function Ta(D,G){if(!G)return[D,0];var J=c(G);if(!D||J===S)return[0,G];var st=J/S,Ct=st*st,Ot=(8*st-Ct*(Ct+2)-5)/(2*Ct*(st-1)),Ut=Ot*Ot,Ht=st*Ot,qt=Ct+Ut+2*Ht,fe=st+3*Ot,ye=D/S,De=ye+1/ye,Ie=y(c(D)-S)*K(De*De-4),Ve=Ie*Ie,qe=qt*(Ct+Ut*Ve-1)+(1-Ct)*(Ct*(fe*fe+4*Ut)+12*Ht*Ut+4*Ut*Ut),on=(Ie*(qt+Ut-1)+2*K(qe))/(4*qt+Ve);return[y(D)*S*on,y(G)*S*K(1+Ie*c(on)-on*on)]}Ta.invert=function(D,G){var J;if(!D||!G)return[D,G];G/=m;var st=y(D)*D/S,Ct=(st*st-1+4*G*G)/c(st),Ot=Ct*Ct,Ut=2*G,Ht=50;do{var qt=Ut*Ut,fe=(8*Ut-qt*(qt+2)-5)/(2*qt*(Ut-1)),ye=(3*Ut-qt*Ut-10)/(2*qt*Ut),De=fe*fe,Ie=Ut*fe,Ve=Ut+fe,qe=Ve*Ve,on=Ut+3*fe,tr=qe*(qt+De*Ot-1)+(1-qt)*(qt*(on*on+4*De)+De*(12*Ie+4*De)),zn=-2*Ve*(4*Ie*De+(1-4*qt+3*qt*qt)*(1+ye)+De*(-6+14*qt-Ot+(-8+8*qt-2*Ot)*ye)+Ie*(-8+12*qt+(-10+10*qt-Ot)*ye)),cr=K(tr),yr=Ct*(qe+De-1)+2*cr-st*(4*qe+Ot),Jr=Ct*(2*fe*ye+2*Ve*(1+ye))+zn/cr-8*Ve*(Ct*(-1+De+qe)+2*cr)*(1+ye)/(Ot+4*qe);Ut-=J=yr/Jr}while(J>M&&--Ht>0);return[y(D)*(K(Ct*Ct+4)+Ct)*m/4,S*Ut]};var Ga=function(){return l.geoProjection(Ta).scale(127.16)},Ya=4*m+3*K(3),Ii=2*K(2*m*K(3)/Ya),Da=at(Ii*K(3)/m,Ii,Ya/6),ho=function(){return l.geoProjection(Da).scale(176.84)};function js(D,G){return[D*K(1-3*G*G/(m*m)),G]}js.invert=function(D,G){return[D/K(1-3*G*G/(m*m)),G]};var Is=function(){return l.geoProjection(js).scale(152.63)};function Vu(D,G){var J=.90631*g(G),st=K(1-J*J),Ct=K(2/(1+st*n(D/=3)));return[2.66723*st*Ct*g(D),1.24104*J*Ct]}Vu.invert=function(D,G){var J=D/2.66723,st=G/1.24104,Ct=K(J*J+st*st),Ot=2*k(Ct/2);return[3*h(D*_(Ot),2.66723*Ct),Ct&&k(G*g(Ot)/(1.24104*.90631*Ct))]};var cu=function(){return l.geoProjection(Vu).scale(172.632)};function j(D,G){var J=n(G),st=n(D)*J,Ct=1-st,Ot=n(D=h(g(D)*J,-g(G))),Ut=g(D);return J=K(1-st*st),[Ut*J-Ot*Ct,-Ot*J-Ut*Ct]}j.invert=function(D,G){var J=(D*D+G*G)/-2,st=K(-J*(2+J)),Ct=G*J+D*st,Ot=D*J-G*st,Ut=K(Ot*Ot+Ct*Ct);return[h(st*Ct,Ut*(1+J)),Ut?-k(st*Ot/Ut):0]};var I=function(){return l.geoProjection(j).rotate([0,-90,45]).scale(124.75).clipAngle(180-.001)};function w(D,G){var J=_t(D,G);return[(J[0]+D/S)/2,(J[1]+G)/2]}w.invert=function(D,G){var J=D,st=G,Ct=25;do{var Ot=n(st),Ut=g(st),Ht=g(2*st),qt=Ut*Ut,fe=Ot*Ot,ye=g(J),De=n(J/2),Ie=g(J/2),Ve=Ie*Ie,qe=1-fe*De*De,on=qe?Y(Ot*De)*K(tr=1/qe):tr=0,tr,zn=.5*(2*on*Ot*Ie+J/S)-D,cr=.5*(on*Ut+st)-G,yr=.5*tr*(fe*Ve+on*Ot*De*qt)+.5/S,Jr=tr*(ye*Ht/4-on*Ut*Ie),Wr=.125*tr*(Ht*Ie-on*Ut*fe*ye),bi=.5*tr*(qt*De+on*Ve*Ot)+.5,ji=Jr*Wr-bi*yr,Hi=(cr*Jr-zn*bi)/ji,Ji=(zn*Wr-cr*yr)/ji;J-=Hi,st-=Ji}while((c(Hi)>M||c(Ji)>M)&&--Ct>0);return[J,st]};var B=function(){return l.geoProjection(w).scale(158.837)};t.geoAiry=Lt,t.geoAiryRaw=Nt,t.geoAitoff=mt,t.geoAitoffRaw=_t,t.geoArmadillo=rt,t.geoArmadilloRaw=At,t.geoAugust=z,t.geoAugustRaw=Mt,t.geoBaker=ot,t.geoBakerRaw=et,t.geoBerghaus=H,t.geoBerghausRaw=pt,t.geoBoggs=ee,t.geoBoggsRaw=Qt,t.geoBonne=le,t.geoBonneRaw=me,t.geoBottomley=ze,t.geoBottomleyRaw=be,t.geoBromley=_n,t.geoBromleyRaw=Xe,t.geoChamberlin=hr,t.geoChamberlinRaw=en,t.geoChamberlinAfrica=Nn,t.geoCollignon=Oe,t.geoCollignonRaw=fi,t.geoCraig=Jt,t.geoCraigRaw=Ae,t.geoCraster=ie,t.geoCrasterRaw=Vt,t.geoCylindricalEqualArea=ue,t.geoCylindricalEqualAreaRaw=Ce,t.geoCylindricalStereographic=$e,t.geoCylindricalStereographicRaw=xe,t.geoEckert1=rr,t.geoEckert1Raw=Fn,t.geoEckert2=Pn,t.geoEckert2Raw=En,t.geoEckert3=Pr,t.geoEckert3Raw=Er,t.geoEckert4=Cr,t.geoEckert4Raw=ln,t.geoEckert5=je,t.geoEckert5Raw=Ar,t.geoEckert6=Ye,t.geoEckert6Raw=We,t.geoEisenlohr=jn,t.geoEisenlohrRaw=mn,t.geoFahey=nr,t.geoFaheyRaw=Ln,t.geoFoucaut=Mn,t.geoFoucautRaw=Yn,t.geoGilbert=zr,t.geoGingery=ro,t.geoGingeryRaw=Pi,t.geoGinzburg4=co,t.geoGinzburg4Raw=_a,t.geoGinzburg5=io,t.geoGinzburg5Raw=Xo,t.geoGinzburg6=ds,t.geoGinzburg6Raw=To,t.geoGinzburg8=Vo,t.geoGinzburg8Raw=La,t.geoGinzburg9=lu,t.geoGinzburg9Raw=Bo,t.geoGringorten=oe,t.geoGringortenRaw=iu,t.geoGuyou=Si,t.geoGuyouRaw=qn,t.geoHammer=sa,t.geoHammerRaw=Ti,t.geoHammerRetroazimuthal=bo,t.geoHammerRetroazimuthalRaw=$a,t.geoHealpix=Ao,t.geoHealpixRaw=Eo,t.geoHill=No,t.geoHillRaw=as,t.geoHomolosine=wa,t.geoHomolosineRaw=ls,t.geoInterrupt=Ui,t.geoInterruptedBoggs=So,t.geoInterruptedHomolosine=ea,t.geoInterruptedMollweide=bs,t.geoInterruptedMollweideHemispheres=ka,t.geoInterruptedSinuMollweide=Wo,t.geoInterruptedSinusoidal=Qs,t.geoKavrayskiy7=ps,t.geoKavrayskiy7Raw=vs,t.geoLagrange=gs,t.geoLagrangeRaw=cs,t.geoLarrivee=ju,t.geoLarriveeRaw=Pu,t.geoLaskowski=Ns,t.geoLaskowskiRaw=fo,t.geoLittrow=ll,t.geoLittrowRaw=Bu,t.geoLoximuthal=Xu,t.geoLoximuthalRaw=cl,t.geoMiller=Ra,t.geoMillerRaw=Io,t.geoModifiedStereographic=Wa,t.geoModifiedStereographicRaw=Ea,t.geoModifiedStereographicAlaska=au,t.geoModifiedStereographicGs48=qs,t.geoModifiedStereographicGs50=Ds,t.geoModifiedStereographicMiller=Ju,t.geoModifiedStereographicLee=ou,t.geoMollweide=Et,t.geoMollweideRaw=q,t.geoMtFlatPolarParabolic=Ql,t.geoMtFlatPolarParabolicRaw=Tl,t.geoMtFlatPolarQuartic=Ha,t.geoMtFlatPolarQuarticRaw=Nu,t.geoMtFlatPolarSinusoidal=Al,t.geoMtFlatPolarSinusoidalRaw=su,t.geoNaturalEarth=Tu,t.geoNaturalEarthRaw=ms,t.geoNaturalEarth2=Fu,t.geoNaturalEarth2Raw=gu,t.geoNellHammer=$o,t.geoNellHammerRaw=Hs,t.geoPatterson=zs,t.geoPattersonRaw=Uu,t.geoPolyconic=gc,t.geoPolyconicRaw=Ul,t.geoPolyhedral=Vl,t.geoPolyhedralButterfly=Us,t.geoPolyhedralCollignon=ku,t.geoPolyhedralWaterman=mc,t.geoProject=qo,t.geoGringortenQuincuncial=Lu,t.geoPeirceQuincuncial=nu,t.geoPierceQuincuncial=nu,t.geoQuantize=we,t.geoQuincuncial=Iu,t.geoRectangularPolyconic=dn,t.geoRectangularPolyconicRaw=Te,t.geoRobinson=vr,t.geoRobinsonRaw=wn,t.geoSatellite=ti,t.geoSatelliteRaw=Kr,t.geoSinuMollweide=Ts,t.geoSinuMollweideRaw=qa,t.geoSinusoidal=Pe,t.geoSinusoidalRaw=$t,t.geoStitch=Vn,t.geoTimes=Wn,t.geoTimesRaw=Zn,t.geoTwoPointAzimuthal=yi,t.geoTwoPointAzimuthalRaw=xr,t.geoTwoPointAzimuthalUsa=Vr,t.geoTwoPointEquidistant=gi,t.geoTwoPointEquidistantRaw=Br,t.geoTwoPointEquidistantUsa=si,t.geoVanDerGrinten=Li,t.geoVanDerGrintenRaw=Zi,t.geoVanDerGrinten2=ma,t.geoVanDerGrinten2Raw=Ma,t.geoVanDerGrinten3=ri,t.geoVanDerGrinten3Raw=la,t.geoVanDerGrinten4=Ga,t.geoVanDerGrinten4Raw=Ta,t.geoWagner4=ho,t.geoWagner4Raw=Da,t.geoWagner6=Is,t.geoWagner6Raw=js,t.geoWagner7=cu,t.geoWagner7Raw=Vu,t.geoWiechel=I,t.geoWiechelRaw=j,t.geoWinkel3=B,t.geoWinkel3Raw=w,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-geo@1.12.1@d3-geo/dist/d3-geo.js":function(E,T,e){(function(t,l){l(T,e("./node_modules/_d3-array@1.2.4@d3-array/dist/d3-array.js"))})(this,function(t,l){"use strict";function s(){return new c}function c(){this.reset()}c.prototype={constructor:c,reset:function(){this.s=this.t=0},add:function(zt){h(r,zt,this.t),h(this,r.s,this.s),this.s?this.t+=r.t:this.s=r.t},valueOf:function(){return this.s}};var r=new c;function h(Rt,zt,se){var re=Rt.s=zt+se,ce=re-zt,Fe=re-ce;Rt.t=zt-Fe+(se-ce)}var n=1e-6,i=1e-12,a=Math.PI,o=a/2,u=a/4,f=a*2,v=180/a,b=a/180,y=Math.abs,g=Math.atan,_=Math.atan2,M=Math.cos,x=Math.ceil,m=Math.exp,S=Math.log,P=Math.pow,A=Math.sin,O=Math.sign||function(Rt){return Rt>0?1:Rt<0?-1:0},R=Math.sqrt,W=Math.tan;function F(Rt){return Rt>1?0:Rt<-1?a:Math.acos(Rt)}function Z(Rt){return Rt>1?o:Rt<-1?-o:Math.asin(Rt)}function V(Rt){return(Rt=A(Rt/2))*Rt}function k(){}function Y(Rt,zt){Rt&&it.hasOwnProperty(Rt.type)&&it[Rt.type](Rt,zt)}var K={Feature:function(zt,se){Y(zt.geometry,se)},FeatureCollection:function(zt,se){for(var re=zt.features,ce=-1,Fe=re.length;++ce<Fe;)Y(re[ce].geometry,se)}},it={Sphere:function(zt,se){se.sphere()},Point:function(zt,se){zt=zt.coordinates,se.point(zt[0],zt[1],zt[2])},MultiPoint:function(zt,se){for(var re=zt.coordinates,ce=-1,Fe=re.length;++ce<Fe;)zt=re[ce],se.point(zt[0],zt[1],zt[2])},LineString:function(zt,se){ct(zt.coordinates,se,0)},MultiLineString:function(zt,se){for(var re=zt.coordinates,ce=-1,Fe=re.length;++ce<Fe;)ct(re[ce],se,0)},Polygon:function(zt,se){ht(zt.coordinates,se)},MultiPolygon:function(zt,se){for(var re=zt.coordinates,ce=-1,Fe=re.length;++ce<Fe;)ht(re[ce],se)},GeometryCollection:function(zt,se){for(var re=zt.geometries,ce=-1,Fe=re.length;++ce<Fe;)Y(re[ce],se)}};function ct(Rt,zt,se){var re=-1,ce=Rt.length-se,Fe;for(zt.lineStart();++re<ce;)Fe=Rt[re],zt.point(Fe[0],Fe[1],Fe[2]);zt.lineEnd()}function ht(Rt,zt){var se=-1,re=Rt.length;for(zt.polygonStart();++se<re;)ct(Rt[se],zt,1);zt.polygonEnd()}function ut(Rt,zt){Rt&&K.hasOwnProperty(Rt.type)?K[Rt.type](Rt,zt):Y(Rt,zt)}var It=s(),Nt=s(),Lt,_t,mt,At,rt,Mt={point:k,lineStart:k,lineEnd:k,polygonStart:function(){It.reset(),Mt.lineStart=z,Mt.lineEnd=$},polygonEnd:function(){var zt=+It;Nt.add(zt<0?f+zt:zt),this.lineStart=this.lineEnd=this.point=k},sphere:function(){Nt.add(f)}};function z(){Mt.point=dt}function $(){et(Lt,_t)}function dt(Rt,zt){Mt.point=et,Lt=Rt,_t=zt,Rt*=b,zt*=b,mt=Rt,At=M(zt=zt/2+u),rt=A(zt)}function et(Rt,zt){Rt*=b,zt*=b,zt=zt/2+u;var se=Rt-mt,re=se>=0?1:-1,ce=re*se,Fe=M(zt),Ke=A(zt),rn=rt*Ke,Je=At*Fe+rn*M(ce),vn=rn*re*A(ce);It.add(_(vn,Je)),mt=Rt,At=Fe,rt=Ke}function ot(Rt){return Nt.reset(),ut(Rt,Mt),Nt*2}function pt(Rt){return[_(Rt[1],Rt[0]),Z(Rt[2])]}function H(Rt){var zt=Rt[0],se=Rt[1],re=M(se);return[re*M(zt),re*A(zt),A(se)]}function nt(Rt,zt){return Rt[0]*zt[0]+Rt[1]*zt[1]+Rt[2]*zt[2]}function at(Rt,zt){return[Rt[1]*zt[2]-Rt[2]*zt[1],Rt[2]*zt[0]-Rt[0]*zt[2],Rt[0]*zt[1]-Rt[1]*zt[0]]}function q(Rt,zt){Rt[0]+=zt[0],Rt[1]+=zt[1],Rt[2]+=zt[2]}function Et(Rt,zt){return[Rt[0]*zt,Rt[1]*zt,Rt[2]*zt]}function vt(Rt){var zt=R(Rt[0]*Rt[0]+Rt[1]*Rt[1]+Rt[2]*Rt[2]);Rt[0]/=zt,Rt[1]/=zt,Rt[2]/=zt}var Ft,Qt,ee,Gt,$t,Pe,me,le,be=s(),ze,Xe,_n={point:Kn,lineStart:nn,lineEnd:en,polygonStart:function(){_n.point=An,_n.lineStart=Nn,_n.lineEnd=hr,be.reset(),Mt.polygonStart()},polygonEnd:function(){Mt.polygonEnd(),_n.point=Kn,_n.lineStart=nn,_n.lineEnd=en,It<0?(Ft=-(ee=180),Qt=-(Gt=90)):be>n?Gt=90:be<-n&&(Qt=-90),Xe[0]=Ft,Xe[1]=ee},sphere:function(){Ft=-(ee=180),Qt=-(Gt=90)}};function Kn(Rt,zt){ze.push(Xe=[Ft=Rt,ee=Rt]),zt<Qt&&(Qt=zt),zt>Gt&&(Gt=zt)}function Hn(Rt,zt){var se=H([Rt*b,zt*b]);if(le){var re=at(le,se),ce=[re[1],-re[0],0],Fe=at(ce,re);vt(Fe),Fe=pt(Fe);var Ke=Rt-$t,rn=Ke>0?1:-1,Je=Fe[0]*v*rn,vn,hn=y(Ke)>180;hn^(rn*$t<Je&&Je<rn*Rt)?(vn=Fe[1]*v,vn>Gt&&(Gt=vn)):(Je=(Je+360)%360-180,hn^(rn*$t<Je&&Je<rn*Rt)?(vn=-Fe[1]*v,vn<Qt&&(Qt=vn)):(zt<Qt&&(Qt=zt),zt>Gt&&(Gt=zt))),hn?Rt<$t?fi(Ft,Rt)>fi(Ft,ee)&&(ee=Rt):fi(Rt,ee)>fi(Ft,ee)&&(Ft=Rt):ee>=Ft?(Rt<Ft&&(Ft=Rt),Rt>ee&&(ee=Rt)):Rt>$t?fi(Ft,Rt)>fi(Ft,ee)&&(ee=Rt):fi(Rt,ee)>fi(Ft,ee)&&(Ft=Rt)}else ze.push(Xe=[Ft=Rt,ee=Rt]);zt<Qt&&(Qt=zt),zt>Gt&&(Gt=zt),le=se,$t=Rt}function nn(){_n.point=Hn}function en(){Xe[0]=Ft,Xe[1]=ee,_n.point=Kn,le=null}function An(Rt,zt){if(le){var se=Rt-$t;be.add(y(se)>180?se+(se>0?360:-360):se)}else Pe=Rt,me=zt;Mt.point(Rt,zt),Hn(Rt,zt)}function Nn(){Mt.lineStart()}function hr(){An(Pe,me),Mt.lineEnd(),y(be)>n&&(Ft=-(ee=180)),Xe[0]=Ft,Xe[1]=ee,le=null}function fi(Rt,zt){return(zt-=Rt)<0?zt+360:zt}function Oe(Rt,zt){return Rt[0]-zt[0]}function Ae(Rt,zt){return Rt[0]<=Rt[1]?Rt[0]<=zt&&zt<=Rt[1]:zt<Rt[0]||Rt[1]<zt}function Jt(Rt){var zt,se,re,ce,Fe,Ke,rn;if(Gt=ee=-(Ft=Qt=Infinity),ze=[],ut(Rt,_n),se=ze.length){for(ze.sort(Oe),zt=1,re=ze[0],Fe=[re];zt<se;++zt)ce=ze[zt],Ae(re,ce[0])||Ae(re,ce[1])?(fi(re[0],ce[1])>fi(re[0],re[1])&&(re[1]=ce[1]),fi(ce[0],re[1])>fi(re[0],re[1])&&(re[0]=ce[0])):Fe.push(re=ce);for(Ke=-Infinity,se=Fe.length-1,zt=0,re=Fe[se];zt<=se;re=ce,++zt)ce=Fe[zt],(rn=fi(re[1],ce[0]))>Ke&&(Ke=rn,Ft=ce[0],ee=re[1])}return ze=Xe=null,Ft===Infinity||Qt===Infinity?[[NaN,NaN],[NaN,NaN]]:[[Ft,Qt],[ee,Gt]]}var ve,Vt,ie,Ce,ue,xe,$e,Fn,rr,En,Pn,Er,Pr,ln,Cr,Ar,je={sphere:k,point:We,lineStart:fn,lineEnd:bn,polygonStart:function(){je.lineStart=Ln,je.lineEnd=nr},polygonEnd:function(){je.lineStart=fn,je.lineEnd=bn}};function We(Rt,zt){Rt*=b,zt*=b;var se=M(zt);Ye(se*M(Rt),se*A(Rt),A(zt))}function Ye(Rt,zt,se){++ve,ie+=(Rt-ie)/ve,Ce+=(zt-Ce)/ve,ue+=(se-ue)/ve}function fn(){je.point=mn}function mn(Rt,zt){Rt*=b,zt*=b;var se=M(zt);ln=se*M(Rt),Cr=se*A(Rt),Ar=A(zt),je.point=jn,Ye(ln,Cr,Ar)}function jn(Rt,zt){Rt*=b,zt*=b;var se=M(zt),re=se*M(Rt),ce=se*A(Rt),Fe=A(zt),Ke=_(R((Ke=Cr*Fe-Ar*ce)*Ke+(Ke=Ar*re-ln*Fe)*Ke+(Ke=ln*ce-Cr*re)*Ke),ln*re+Cr*ce+Ar*Fe);Vt+=Ke,xe+=Ke*(ln+(ln=re)),$e+=Ke*(Cr+(Cr=ce)),Fn+=Ke*(Ar+(Ar=Fe)),Ye(ln,Cr,Ar)}function bn(){je.point=We}function Ln(){je.point=Yn}function nr(){Mn(Er,Pr),je.point=We}function Yn(Rt,zt){Er=Rt,Pr=zt,Rt*=b,zt*=b,je.point=Mn;var se=M(zt);ln=se*M(Rt),Cr=se*A(Rt),Ar=A(zt),Ye(ln,Cr,Ar)}function Mn(Rt,zt){Rt*=b,zt*=b;var se=M(zt),re=se*M(Rt),ce=se*A(Rt),Fe=A(zt),Ke=Cr*Fe-Ar*ce,rn=Ar*re-ln*Fe,Je=ln*ce-Cr*re,vn=R(Ke*Ke+rn*rn+Je*Je),hn=Z(vn),Jn=vn&&-hn/vn;rr+=Jn*Ke,En+=Jn*rn,Pn+=Jn*Je,Vt+=hn,xe+=hn*(ln+(ln=re)),$e+=hn*(Cr+(Cr=ce)),Fn+=hn*(Ar+(Ar=Fe)),Ye(ln,Cr,Ar)}function Rr(Rt){ve=Vt=ie=Ce=ue=xe=$e=Fn=rr=En=Pn=0,ut(Rt,je);var zt=rr,se=En,re=Pn,ce=zt*zt+se*se+re*re;return ce<i&&(zt=xe,se=$e,re=Fn,Vt<n&&(zt=ie,se=Ce,re=ue),ce=zt*zt+se*se+re*re,ce<i)?[NaN,NaN]:[_(se,zt)*v,Z(re/R(ce))*v]}function pr(Rt){return function(){return Rt}}function zr(Rt,zt){function se(re,ce){return re=Rt(re,ce),zt(re[0],re[1])}return Rt.invert&&zt.invert&&(se.invert=function(re,ce){return re=zt.invert(re,ce),re&&Rt.invert(re[0],re[1])}),se}function Pi(Rt,zt){return[y(Rt)>a?Rt+Math.round(-Rt/f)*f:Rt,zt]}Pi.invert=Pi;function Oa(Rt,zt,se){return(Rt%=f)?zt||se?zr(ro(Rt),Ko(zt,se)):ro(Rt):zt||se?Ko(zt,se):Pi}function Ua(Rt){return function(zt,se){return zt+=Rt,[zt>a?zt-f:zt<-a?zt+f:zt,se]}}function ro(Rt){var zt=Ua(Rt);return zt.invert=Ua(-Rt),zt}function Ko(Rt,zt){var se=M(Rt),re=A(Rt),ce=M(zt),Fe=A(zt);function Ke(rn,Je){var vn=M(Je),hn=M(rn)*vn,Jn=A(rn)*vn,Vn=A(Je),Zn=Vn*se+hn*re;return[_(Jn*ce-Zn*Fe,hn*se-Vn*re),Z(Zn*ce+Jn*Fe)]}return Ke.invert=function(rn,Je){var vn=M(Je),hn=M(rn)*vn,Jn=A(rn)*vn,Vn=A(Je),Zn=Vn*ce-Jn*Fe;return[_(Jn*ce+Vn*Fe,hn*se+Zn*re),Z(Zn*se-hn*re)]},Ke}function _a(Rt){Rt=Oa(Rt[0]*b,Rt[1]*b,Rt.length>2?Rt[2]*b:0);function zt(se){return se=Rt(se[0]*b,se[1]*b),se[0]*=v,se[1]*=v,se}return zt.invert=function(se){return se=Rt.invert(se[0]*b,se[1]*b),se[0]*=v,se[1]*=v,se},zt}function co(Rt,zt,se,re,ce,Fe){if(!!se){var Ke=M(zt),rn=A(zt),Je=re*se;ce==null?(ce=zt+re*f,Fe=zt-Je/2):(ce=Xo(Ke,ce),Fe=Xo(Ke,Fe),(re>0?ce<Fe:ce>Fe)&&(ce+=re*f));for(var vn,hn=ce;re>0?hn>Fe:hn<Fe;hn-=Je)vn=pt([Ke,-rn*M(hn),-rn*A(hn)]),Rt.point(vn[0],vn[1])}}function Xo(Rt,zt){zt=H(zt),zt[0]-=Rt,vt(zt);var se=F(-zt[1]);return((-zt[2]<0?-se:se)+f-n)%f}function io(){var Rt=pr([0,0]),zt=pr(90),se=pr(6),re,ce,Fe={point:Ke};function Ke(Je,vn){re.push(Je=ce(Je,vn)),Je[0]*=v,Je[1]*=v}function rn(){var Je=Rt.apply(this,arguments),vn=zt.apply(this,arguments)*b,hn=se.apply(this,arguments)*b;return re=[],ce=Oa(-Je[0]*b,-Je[1]*b,0).invert,co(Fe,vn,hn,1),Je={type:"Polygon",coordinates:[re]},re=ce=null,Je}return rn.center=function(Je){return arguments.length?(Rt=typeof Je=="function"?Je:pr([+Je[0],+Je[1]]),rn):Rt},rn.radius=function(Je){return arguments.length?(zt=typeof Je=="function"?Je:pr(+Je),rn):zt},rn.precision=function(Je){return arguments.length?(se=typeof Je=="function"?Je:pr(+Je),rn):se},rn}function To(){var Rt=[],zt;return{point:function(re,ce,Fe){zt.push([re,ce,Fe])},lineStart:function(){Rt.push(zt=[])},lineEnd:k,rejoin:function(){Rt.length>1&&Rt.push(Rt.pop().concat(Rt.shift()))},result:function(){var re=Rt;return Rt=[],zt=null,re}}}function ds(Rt,zt){return y(Rt[0]-zt[0])<n&&y(Rt[1]-zt[1])<n}function La(Rt,zt,se,re){this.x=Rt,this.z=zt,this.o=se,this.e=re,this.v=!1,this.n=this.p=null}function Vo(Rt,zt,se,re,ce){var Fe=[],Ke=[],rn,Je;if(Rt.forEach(function(Wn){if(!((lr=Wn.length-1)<=0)){var lr,xr=Wn[0],Vr=Wn[lr],yi;if(ds(xr,Vr)){if(!xr[2]&&!Vr[2]){for(ce.lineStart(),rn=0;rn<lr;++rn)ce.point((xr=Wn[rn])[0],xr[1]);ce.lineEnd();return}Vr[0]+=2*n}Fe.push(yi=new La(xr,Wn,null,!0)),Ke.push(yi.o=new La(xr,null,yi,!1)),Fe.push(yi=new La(Vr,Wn,null,!1)),Ke.push(yi.o=new La(Vr,null,yi,!0))}}),!!Fe.length){for(Ke.sort(zt),Bo(Fe),Bo(Ke),rn=0,Je=Ke.length;rn<Je;++rn)Ke[rn].e=se=!se;for(var vn=Fe[0],hn,Jn;;){for(var Vn=vn,Zn=!0;Vn.v;)if((Vn=Vn.n)===vn)return;hn=Vn.z,ce.lineStart();do{if(Vn.v=Vn.o.v=!0,Vn.e){if(Zn)for(rn=0,Je=hn.length;rn<Je;++rn)ce.point((Jn=hn[rn])[0],Jn[1]);else re(Vn.x,Vn.n.x,1,ce);Vn=Vn.n}else{if(Zn)for(hn=Vn.p.z,rn=hn.length-1;rn>=0;--rn)ce.point((Jn=hn[rn])[0],Jn[1]);else re(Vn.x,Vn.p.x,-1,ce);Vn=Vn.p}Vn=Vn.o,hn=Vn.z,Zn=!Zn}while(!Vn.v);ce.lineEnd()}}}function Bo(Rt){if(!!(zt=Rt.length)){for(var zt,se=0,re=Rt[0],ce;++se<zt;)re.n=ce=Rt[se],ce.p=re,re=ce;re.n=ce=Rt[0],ce.p=re}}var lu=s();function Jo(Rt){return y(Rt[0])<=a?Rt[0]:O(Rt[0])*((y(Rt[0])+a)%f-a)}function iu(Rt,zt){var se=Jo(zt),re=zt[1],ce=A(re),Fe=[A(se),-M(se),0],Ke=0,rn=0;lu.reset(),ce===1?re=o+n:ce===-1&&(re=-o-n);for(var Je=0,vn=Rt.length;Je<vn;++Je)if(!!(Jn=(hn=Rt[Je]).length))for(var hn,Jn,Vn=hn[Jn-1],Zn=Jo(Vn),Wn=Vn[1]/2+u,lr=A(Wn),xr=M(Wn),Vr=0;Vr<Jn;++Vr,Zn=Br,lr=gi,xr=Zi,Vn=yi){var yi=hn[Vr],Br=Jo(yi),si=yi[1]/2+u,gi=A(si),Zi=M(si),Li=Br-Zn,Ma=Li>=0?1:-1,ma=Ma*Li,la=ma>a,ri=lr*gi;if(lu.add(_(ri*Ma*A(ma),xr*Zi+ri*M(ma))),Ke+=la?Li+Ma*f:Li,la^Zn>=se^Br>=se){var Ta=at(H(Vn),H(yi));vt(Ta);var Ga=at(Fe,Ta);vt(Ga);var Ya=(la^Li>=0?-1:1)*Z(Ga[2]);(re>Ya||re===Ya&&(Ta[0]||Ta[1]))&&(rn+=la^Li>=0?1:-1)}}return(Ke<-n||Ke<n&&lu<-n)^rn&1}function $s(Rt,zt,se,re){return function(ce){var Fe=zt(ce),Ke=To(),rn=zt(Ke),Je=!1,vn,hn,Jn,Vn={point:Zn,lineStart:lr,lineEnd:xr,polygonStart:function(){Vn.point=Vr,Vn.lineStart=yi,Vn.lineEnd=Br,hn=[],vn=[]},polygonEnd:function(){Vn.point=Zn,Vn.lineStart=lr,Vn.lineEnd=xr,hn=l.merge(hn);var gi=iu(vn,re);hn.length?(Je||(ce.polygonStart(),Je=!0),Vo(hn,oe,gi,se,ce)):gi&&(Je||(ce.polygonStart(),Je=!0),ce.lineStart(),se(null,null,1,ce),ce.lineEnd()),Je&&(ce.polygonEnd(),Je=!1),hn=vn=null},sphere:function(){ce.polygonStart(),ce.lineStart(),se(null,null,1,ce),ce.lineEnd(),ce.polygonEnd()}};function Zn(si,gi){Rt(si,gi)&&ce.point(si,gi)}function Wn(si,gi){Fe.point(si,gi)}function lr(){Vn.point=Wn,Fe.lineStart()}function xr(){Vn.point=Zn,Fe.lineEnd()}function Vr(si,gi){Jn.push([si,gi]),rn.point(si,gi)}function yi(){rn.lineStart(),Jn=[]}function Br(){Vr(Jn[0][0],Jn[0][1]),rn.lineEnd();var si=rn.clean(),gi=Ke.result(),Zi,Li=gi.length,Ma,ma,la;if(Jn.pop(),vn.push(Jn),Jn=null,!!Li){if(si&1){if(ma=gi[0],(Ma=ma.length-1)>0){for(Je||(ce.polygonStart(),Je=!0),ce.lineStart(),Zi=0;Zi<Ma;++Zi)ce.point((la=ma[Zi])[0],la[1]);ce.lineEnd()}return}Li>1&&si&2&&gi.push(gi.pop().concat(gi.shift())),hn.push(gi.filter(Ne))}}return Vn}}function Ne(Rt){return Rt.length>1}function oe(Rt,zt){return((Rt=Rt.x)[0]<0?Rt[1]-o-n:o-Rt[1])-((zt=zt.x)[0]<0?zt[1]-o-n:o-zt[1])}var Wt=$s(function(){return!0},Ee,Un,[-a,-o]);function Ee(Rt){var zt=NaN,se=NaN,re=NaN,ce;return{lineStart:function(){Rt.lineStart(),ce=1},point:function(Ke,rn){var Je=Ke>0?a:-a,vn=y(Ke-zt);y(vn-a)<n?(Rt.point(zt,se=(se+rn)/2>0?o:-o),Rt.point(re,se),Rt.lineEnd(),Rt.lineStart(),Rt.point(Je,se),Rt.point(Ke,se),ce=0):re!==Je&&vn>=a&&(y(zt-re)<n&&(zt-=re*n),y(Ke-Je)<n&&(Ke-=Je*n),se=an(zt,se,Ke,rn),Rt.point(re,se),Rt.lineEnd(),Rt.lineStart(),Rt.point(Je,se),ce=0),Rt.point(zt=Ke,se=rn),re=Je},lineEnd:function(){Rt.lineEnd(),zt=se=NaN},clean:function(){return 2-ce}}}function an(Rt,zt,se,re){var ce,Fe,Ke=A(Rt-se);return y(Ke)>n?g((A(zt)*(Fe=M(re))*A(se)-A(re)*(ce=M(zt))*A(Rt))/(ce*Fe*Ke)):(zt+re)/2}function Un(Rt,zt,se,re){var ce;if(Rt==null)ce=se*o,re.point(-a,ce),re.point(0,ce),re.point(a,ce),re.point(a,0),re.point(a,-ce),re.point(0,-ce),re.point(-a,-ce),re.point(-a,0),re.point(-a,ce);else if(y(Rt[0]-zt[0])>n){var Fe=Rt[0]<zt[0]?a:-a;ce=se*Fe/2,re.point(-Fe,ce),re.point(0,ce),re.point(Fe,ce)}else re.point(zt[0],zt[1])}function qn(Rt){var zt=M(Rt),se=6*b,re=zt>0,ce=y(zt)>n;function Fe(hn,Jn,Vn,Zn){co(Zn,Rt,se,Vn,hn,Jn)}function Ke(hn,Jn){return M(hn)*M(Jn)>zt}function rn(hn){var Jn,Vn,Zn,Wn,lr;return{lineStart:function(){Wn=Zn=!1,lr=1},point:function(Vr,yi){var Br=[Vr,yi],si,gi=Ke(Vr,yi),Zi=re?gi?0:vn(Vr,yi):gi?vn(Vr+(Vr<0?a:-a),yi):0;if(!Jn&&(Wn=Zn=gi)&&hn.lineStart(),gi!==Zn&&(si=Je(Jn,Br),(!si||ds(Jn,si)||ds(Br,si))&&(Br[2]=1)),gi!==Zn)lr=0,gi?(hn.lineStart(),si=Je(Br,Jn),hn.point(si[0],si[1])):(si=Je(Jn,Br),hn.point(si[0],si[1],2),hn.lineEnd()),Jn=si;else if(ce&&Jn&&re^gi){var Li;!(Zi&Vn)&&(Li=Je(Br,Jn,!0))&&(lr=0,re?(hn.lineStart(),hn.point(Li[0][0],Li[0][1]),hn.point(Li[1][0],Li[1][1]),hn.lineEnd()):(hn.point(Li[1][0],Li[1][1]),hn.lineEnd(),hn.lineStart(),hn.point(Li[0][0],Li[0][1],3)))}gi&&(!Jn||!ds(Jn,Br))&&hn.point(Br[0],Br[1]),Jn=Br,Zn=gi,Vn=Zi},lineEnd:function(){Zn&&hn.lineEnd(),Jn=null},clean:function(){return lr|(Wn&&Zn)<<1}}}function Je(hn,Jn,Vn){var Zn=H(hn),Wn=H(Jn),lr=[1,0,0],xr=at(Zn,Wn),Vr=nt(xr,xr),yi=xr[0],Br=Vr-yi*yi;if(!Br)return!Vn&&hn;var si=zt*Vr/Br,gi=-zt*yi/Br,Zi=at(lr,xr),Li=Et(lr,si),Ma=Et(xr,gi);q(Li,Ma);var ma=Zi,la=nt(Li,ma),ri=nt(ma,ma),Ta=la*la-ri*(nt(Li,Li)-1);if(!(Ta<0)){var Ga=R(Ta),Ya=Et(ma,(-la-Ga)/ri);if(q(Ya,Li),Ya=pt(Ya),!Vn)return Ya;var Ii=hn[0],Da=Jn[0],ho=hn[1],js=Jn[1],Is;Da<Ii&&(Is=Ii,Ii=Da,Da=Is);var Vu=Da-Ii,cu=y(Vu-a)<n,j=cu||Vu<n;if(!cu&&js<ho&&(Is=ho,ho=js,js=Is),j?cu?ho+js>0^Ya[1]<(y(Ya[0]-Ii)<n?ho:js):ho<=Ya[1]&&Ya[1]<=js:Vu>a^(Ii<=Ya[0]&&Ya[0]<=Da)){var I=Et(ma,(-la+Ga)/ri);return q(I,Li),[Ya,pt(I)]}}}function vn(hn,Jn){var Vn=re?Rt:a-Rt,Zn=0;return hn<-Vn?Zn|=1:hn>Vn&&(Zn|=2),Jn<-Vn?Zn|=4:Jn>Vn&&(Zn|=8),Zn}return $s(Ke,rn,Fe,re?[0,-Rt]:[-a,Rt-a])}function kn(Rt,zt,se,re,ce,Fe){var Ke=Rt[0],rn=Rt[1],Je=zt[0],vn=zt[1],hn=0,Jn=1,Vn=Je-Ke,Zn=vn-rn,Wn;if(Wn=se-Ke,!(!Vn&&Wn>0)){if(Wn/=Vn,Vn<0){if(Wn<hn)return;Wn<Jn&&(Jn=Wn)}else if(Vn>0){if(Wn>Jn)return;Wn>hn&&(hn=Wn)}if(Wn=ce-Ke,!(!Vn&&Wn<0)){if(Wn/=Vn,Vn<0){if(Wn>Jn)return;Wn>hn&&(hn=Wn)}else if(Vn>0){if(Wn<hn)return;Wn<Jn&&(Jn=Wn)}if(Wn=re-rn,!(!Zn&&Wn>0)){if(Wn/=Zn,Zn<0){if(Wn<hn)return;Wn<Jn&&(Jn=Wn)}else if(Zn>0){if(Wn>Jn)return;Wn>hn&&(hn=Wn)}if(Wn=Fe-rn,!(!Zn&&Wn<0)){if(Wn/=Zn,Zn<0){if(Wn>Jn)return;Wn>hn&&(hn=Wn)}else if(Zn>0){if(Wn<hn)return;Wn<Jn&&(Jn=Wn)}return hn>0&&(Rt[0]=Ke+hn*Vn,Rt[1]=rn+hn*Zn),Jn<1&&(zt[0]=Ke+Jn*Vn,zt[1]=rn+Jn*Zn),!0}}}}}var Xr=1e9,Si=-Xr;function Ti(Rt,zt,se,re){function ce(vn,hn){return Rt<=vn&&vn<=se&&zt<=hn&&hn<=re}function Fe(vn,hn,Jn,Vn){var Zn=0,Wn=0;if(vn==null||(Zn=Ke(vn,Jn))!==(Wn=Ke(hn,Jn))||Je(vn,hn)<0^Jn>0)do Vn.point(Zn===0||Zn===3?Rt:se,Zn>1?re:zt);while((Zn=(Zn+Jn+4)%4)!==Wn);else Vn.point(hn[0],hn[1])}function Ke(vn,hn){return y(vn[0]-Rt)<n?hn>0?0:3:y(vn[0]-se)<n?hn>0?2:1:y(vn[1]-zt)<n?hn>0?1:0:hn>0?3:2}function rn(vn,hn){return Je(vn.x,hn.x)}function Je(vn,hn){var Jn=Ke(vn,1),Vn=Ke(hn,1);return Jn!==Vn?Jn-Vn:Jn===0?hn[1]-vn[1]:Jn===1?vn[0]-hn[0]:Jn===2?vn[1]-hn[1]:hn[0]-vn[0]}return function(vn){var hn=vn,Jn=To(),Vn,Zn,Wn,lr,xr,Vr,yi,Br,si,gi,Zi,Li={point:Ma,lineStart:Ta,lineEnd:Ga,polygonStart:la,polygonEnd:ri};function Ma(Ii,Da){ce(Ii,Da)&&hn.point(Ii,Da)}function ma(){for(var Ii=0,Da=0,ho=Zn.length;Da<ho;++Da)for(var js=Zn[Da],Is=1,Vu=js.length,cu=js[0],j,I,w=cu[0],B=cu[1];Is<Vu;++Is)j=w,I=B,cu=js[Is],w=cu[0],B=cu[1],I<=re?B>re&&(w-j)*(re-I)>(B-I)*(Rt-j)&&++Ii:B<=re&&(w-j)*(re-I)<(B-I)*(Rt-j)&&--Ii;return Ii}function la(){hn=Jn,Vn=[],Zn=[],Zi=!0}function ri(){var Ii=ma(),Da=Zi&&Ii,ho=(Vn=l.merge(Vn)).length;(Da||ho)&&(vn.polygonStart(),Da&&(vn.lineStart(),Fe(null,null,1,vn),vn.lineEnd()),ho&&Vo(Vn,rn,Ii,Fe,vn),vn.polygonEnd()),hn=vn,Vn=Zn=Wn=null}function Ta(){Li.point=Ya,Zn&&Zn.push(Wn=[]),gi=!0,si=!1,yi=Br=NaN}function Ga(){Vn&&(Ya(lr,xr),Vr&&si&&Jn.rejoin(),Vn.push(Jn.result())),Li.point=Ma,si&&hn.lineEnd()}function Ya(Ii,Da){var ho=ce(Ii,Da);if(Zn&&Wn.push([Ii,Da]),gi)lr=Ii,xr=Da,Vr=ho,gi=!1,ho&&(hn.lineStart(),hn.point(Ii,Da));else if(ho&&si)hn.point(Ii,Da);else{var js=[yi=Math.max(Si,Math.min(Xr,yi)),Br=Math.max(Si,Math.min(Xr,Br))],Is=[Ii=Math.max(Si,Math.min(Xr,Ii)),Da=Math.max(Si,Math.min(Xr,Da))];kn(js,Is,Rt,zt,se,re)?(si||(hn.lineStart(),hn.point(js[0],js[1])),hn.point(Is[0],Is[1]),ho||hn.lineEnd(),Zi=!1):ho&&(hn.lineStart(),hn.point(Ii,Da),Zi=!1)}yi=Ii,Br=Da,si=ho}return Li}}function ki(){var Rt=0,zt=0,se=960,re=500,ce,Fe,Ke;return Ke={stream:function(Je){return ce&&Fe===Je?ce:ce=Ti(Rt,zt,se,re)(Fe=Je)},extent:function(Je){return arguments.length?(Rt=+Je[0][0],zt=+Je[0][1],se=+Je[1][0],re=+Je[1][1],ce=Fe=null,Ke):[[Rt,zt],[se,re]]}}}var sa=s(),$a,ba,bo,Fa={sphere:k,point:k,lineStart:oo,lineEnd:k,polygonStart:k,polygonEnd:k};function oo(){Fa.point=Qa,Fa.lineEnd=Eo}function Eo(){Fa.point=Fa.lineEnd=k}function Qa(Rt,zt){Rt*=b,zt*=b,$a=Rt,ba=A(zt),bo=M(zt),Fa.point=Ao}function Ao(Rt,zt){Rt*=b,zt*=b;var se=A(zt),re=M(zt),ce=y(Rt-$a),Fe=M(ce),Ke=A(ce),rn=re*Ke,Je=bo*se-ba*re*Fe,vn=ba*se+bo*re*Fe;sa.add(_(R(rn*rn+Je*Je),vn)),$a=Rt,ba=se,bo=re}function as(Rt){return sa.reset(),ut(Rt,Fa),+sa}var No=[null,null],xs={type:"LineString",coordinates:No};function Co(Rt,zt){return No[0]=Rt,No[1]=zt,as(xs)}var qa={Feature:function(zt,se){return ls(zt.geometry,se)},FeatureCollection:function(zt,se){for(var re=zt.features,ce=-1,Fe=re.length;++ce<Fe;)if(ls(re[ce].geometry,se))return!0;return!1}},Ts={Sphere:function(){return!0},Point:function(zt,se){return wa(zt.coordinates,se)},MultiPoint:function(zt,se){for(var re=zt.coordinates,ce=-1,Fe=re.length;++ce<Fe;)if(wa(re[ce],se))return!0;return!1},LineString:function(zt,se){return yn(zt.coordinates,se)},MultiLineString:function(zt,se){for(var re=zt.coordinates,ce=-1,Fe=re.length;++ce<Fe;)if(yn(re[ce],se))return!0;return!1},Polygon:function(zt,se){return dr(zt.coordinates,se)},MultiPolygon:function(zt,se){for(var re=zt.coordinates,ce=-1,Fe=re.length;++ce<Fe;)if(dr(re[ce],se))return!0;return!1},GeometryCollection:function(zt,se){for(var re=zt.geometries,ce=-1,Fe=re.length;++ce<Fe;)if(ls(re[ce],se))return!0;return!1}};function ls(Rt,zt){return Rt&&Ts.hasOwnProperty(Rt.type)?Ts[Rt.type](Rt,zt):!1}function wa(Rt,zt){return Co(Rt,zt)===0}function yn(Rt,zt){for(var se,re,ce,Fe=0,Ke=Rt.length;Fe<Ke;Fe++){if(re=Co(Rt[Fe],zt),re===0||Fe>0&&(ce=Co(Rt[Fe],Rt[Fe-1]),ce>0&&se<=ce&&re<=ce&&(se+re-ce)*(1-Math.pow((se-re)/ce,2))<i*ce))return!0;se=re}return!1}function dr(Rt,zt){return!!iu(Rt.map(kr),Ui(zt))}function kr(Rt){return Rt=Rt.map(Ui),Rt.pop(),Rt}function Ui(Rt){return[Rt[0]*b,Rt[1]*b]}function Ja(Rt,zt){return(Rt&&qa.hasOwnProperty(Rt.type)?qa[Rt.type]:ls)(Rt,zt)}function So(Rt,zt,se){var re=l.range(Rt,zt-n,se).concat(zt);return function(ce){return re.map(function(Fe){return[ce,Fe]})}}function po(Rt,zt,se){var re=l.range(Rt,zt-n,se).concat(zt);return function(ce){return re.map(function(Fe){return[Fe,ce]})}}function ea(){var Rt,zt,se,re,ce,Fe,Ke,rn,Je=10,vn=Je,hn=90,Jn=360,Vn,Zn,Wn,lr,xr=2.5;function Vr(){return{type:"MultiLineString",coordinates:yi()}}function yi(){return l.range(x(re/hn)*hn,se,hn).map(Wn).concat(l.range(x(rn/Jn)*Jn,Ke,Jn).map(lr)).concat(l.range(x(zt/Je)*Je,Rt,Je).filter(function(Br){return y(Br%hn)>n}).map(Vn)).concat(l.range(x(Fe/vn)*vn,ce,vn).filter(function(Br){return y(Br%Jn)>n}).map(Zn))}return Vr.lines=function(){return yi().map(function(Br){return{type:"LineString",coordinates:Br}})},Vr.outline=function(){return{type:"Polygon",coordinates:[Wn(re).concat(lr(Ke).slice(1),Wn(se).reverse().slice(1),lr(rn).reverse().slice(1))]}},Vr.extent=function(Br){return arguments.length?Vr.extentMajor(Br).extentMinor(Br):Vr.extentMinor()},Vr.extentMajor=function(Br){return arguments.length?(re=+Br[0][0],se=+Br[1][0],rn=+Br[0][1],Ke=+Br[1][1],re>se&&(Br=re,re=se,se=Br),rn>Ke&&(Br=rn,rn=Ke,Ke=Br),Vr.precision(xr)):[[re,rn],[se,Ke]]},Vr.extentMinor=function(Br){return arguments.length?(zt=+Br[0][0],Rt=+Br[1][0],Fe=+Br[0][1],ce=+Br[1][1],zt>Rt&&(Br=zt,zt=Rt,Rt=Br),Fe>ce&&(Br=Fe,Fe=ce,ce=Br),Vr.precision(xr)):[[zt,Fe],[Rt,ce]]},Vr.step=function(Br){return arguments.length?Vr.stepMajor(Br).stepMinor(Br):Vr.stepMinor()},Vr.stepMajor=function(Br){return arguments.length?(hn=+Br[0],Jn=+Br[1],Vr):[hn,Jn]},Vr.stepMinor=function(Br){return arguments.length?(Je=+Br[0],vn=+Br[1],Vr):[Je,vn]},Vr.precision=function(Br){return arguments.length?(xr=+Br,Vn=So(Fe,ce,90),Zn=po(zt,Rt,xr),Wn=So(rn,Ke,90),lr=po(re,se,xr),Vr):xr},Vr.extentMajor([[-180,-90+n],[180,90-n]]).extentMinor([[-180,-80-n],[180,80+n]])}function to(){return ea()()}function bs(Rt,zt){var se=Rt[0]*b,re=Rt[1]*b,ce=zt[0]*b,Fe=zt[1]*b,Ke=M(re),rn=A(re),Je=M(Fe),vn=A(Fe),hn=Ke*M(se),Jn=Ke*A(se),Vn=Je*M(ce),Zn=Je*A(ce),Wn=2*Z(R(V(Fe-re)+Ke*Je*V(ce-se))),lr=A(Wn),xr=Wn?function(Vr){var yi=A(Vr*=Wn)/lr,Br=A(Wn-Vr)/lr,si=Br*hn+yi*Vn,gi=Br*Jn+yi*Zn,Zi=Br*rn+yi*vn;return[_(gi,si)*v,_(Zi,R(si*si+gi*gi))*v]}:function(){return[se*v,re*v]};return xr.distance=Wn,xr}function Es(Rt){return Rt}var ka=s(),bu=s(),Wo,As,Qs,vs,ps={point:k,lineStart:k,lineEnd:k,polygonStart:function(){ps.lineStart=cs,ps.lineEnd=Pu},polygonEnd:function(){ps.lineStart=ps.lineEnd=ps.point=k,ka.add(y(bu)),bu.reset()},result:function(){var zt=ka/2;return ka.reset(),zt}};function cs(){ps.point=gs}function gs(Rt,zt){ps.point=Cs,Wo=Qs=Rt,As=vs=zt}function Cs(Rt,zt){bu.add(vs*Rt-Qs*zt),Qs=Rt,vs=zt}function Pu(){Cs(Wo,As)}var ju=Infinity,fo=ju,Ns=-ju,Bu=Ns,ll={point:cl,lineStart:k,lineEnd:k,polygonStart:k,polygonEnd:k,result:function(){var zt=[[ju,fo],[Ns,Bu]];return Ns=Bu=-(fo=ju=Infinity),zt}};function cl(Rt,zt){Rt<ju&&(ju=Rt),Rt>Ns&&(Ns=Rt),zt<fo&&(fo=zt),zt>Bu&&(Bu=zt)}var Xu=0,Io=0,Ra=0,Ea=0,Ro=0,pu=0,Ml=0,Fs=0,Ss=0,au,qs,Ds,Ju,ou={point:Wa,lineStart:Pl,lineEnd:Ql,polygonStart:function(){ou.lineStart=Nu,ou.lineEnd=Ha},polygonEnd:function(){ou.point=Wa,ou.lineStart=Pl,ou.lineEnd=Ql},result:function(){var zt=Ss?[Ml/Ss,Fs/Ss]:pu?[Ea/pu,Ro/pu]:Ra?[Xu/Ra,Io/Ra]:[NaN,NaN];return Xu=Io=Ra=Ea=Ro=pu=Ml=Fs=Ss=0,zt}};function Wa(Rt,zt){Xu+=Rt,Io+=zt,++Ra}function Pl(){ou.point=$l}function $l(Rt,zt){ou.point=Tl,Wa(Ds=Rt,Ju=zt)}function Tl(Rt,zt){var se=Rt-Ds,re=zt-Ju,ce=R(se*se+re*re);Ea+=ce*(Ds+Rt)/2,Ro+=ce*(Ju+zt)/2,pu+=ce,Wa(Ds=Rt,Ju=zt)}function Ql(){ou.point=Wa}function Nu(){ou.point=su}function Ha(){Al(au,qs)}function su(Rt,zt){ou.point=Al,Wa(au=Ds=Rt,qs=Ju=zt)}function Al(Rt,zt){var se=Rt-Ds,re=zt-Ju,ce=R(se*se+re*re);Ea+=ce*(Ds+Rt)/2,Ro+=ce*(Ju+zt)/2,pu+=ce,ce=Ju*Rt-Ds*zt,Ml+=ce*(Ds+Rt),Fs+=ce*(Ju+zt),Ss+=ce*3,Wa(Ds=Rt,Ju=zt)}function ms(Rt){this._context=Rt}ms.prototype={_radius:4.5,pointRadius:function(zt){return this._radius=zt,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(zt,se){switch(this._point){case 0:{this._context.moveTo(zt,se),this._point=1;break}case 1:{this._context.lineTo(zt,se);break}default:{this._context.moveTo(zt+this._radius,se),this._context.arc(zt,se,this._radius,0,f);break}}},result:k};var Tu=s(),gu,Fu,Hs,$o,fs,fl={point:k,lineStart:function(){fl.point=zl},lineEnd:function(){gu&&ql(Fu,Hs),fl.point=k},polygonStart:function(){gu=!0},polygonEnd:function(){gu=null},result:function(){var zt=+Tu;return Tu.reset(),zt}};function zl(Rt,zt){fl.point=ql,Fu=$o=Rt,Hs=fs=zt}function ql(Rt,zt){$o-=Rt,fs-=zt,Tu.add(R($o*$o+fs*fs)),$o=Rt,fs=zt}function zu(){this._string=[]}zu.prototype={_radius:4.5,_circle:$u(4.5),pointRadius:function(zt){return(zt=+zt)!==this._radius&&(this._radius=zt,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(zt,se){switch(this._point){case 0:{this._string.push("M",zt,",",se),this._point=1;break}case 1:{this._string.push("L",zt,",",se);break}default:{this._circle==null&&(this._circle=$u(this._radius)),this._string.push("M",zt,",",se,this._circle);break}}},result:function(){if(this._string.length){var zt=this._string.join("");return this._string=[],zt}else return null}};function $u(Rt){return"m0,"+Rt+"a"+Rt+","+Rt+" 0 1,1 0,"+-2*Rt+"a"+Rt+","+Rt+" 0 1,1 0,"+2*Rt+"z"}function Au(Rt,zt){var se=4.5,re,ce;function Fe(Ke){return Ke&&(typeof se=="function"&&ce.pointRadius(+se.apply(this,arguments)),ut(Ke,re(ce))),ce.result()}return Fe.area=function(Ke){return ut(Ke,re(ps)),ps.result()},Fe.measure=function(Ke){return ut(Ke,re(fl)),fl.result()},Fe.bounds=function(Ke){return ut(Ke,re(ll)),ll.result()},Fe.centroid=function(Ke){return ut(Ke,re(ou)),ou.result()},Fe.projection=function(Ke){return arguments.length?(re=Ke==null?(Rt=null,Es):(Rt=Ke).stream,Fe):Rt},Fe.context=function(Ke){return arguments.length?(ce=Ke==null?(zt=null,new zu):new ms(zt=Ke),typeof se!="function"&&ce.pointRadius(se),Fe):zt},Fe.pointRadius=function(Ke){return arguments.length?(se=typeof Ke=="function"?Ke:(ce.pointRadius(+Ke),+Ke),Fe):se},Fe.projection(Rt).context(zt)}function Cu(Rt){return{stream:mu(Rt)}}function mu(Rt){return function(zt){var se=new Uu;for(var re in Rt)se[re]=Rt[re];return se.stream=zt,se}}function Uu(){}Uu.prototype={constructor:Uu,point:function(zt,se){this.stream.point(zt,se)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function zs(Rt,zt,se){var re=Rt.clipExtent&&Rt.clipExtent();return Rt.scale(150).translate([0,0]),re!=null&&Rt.clipExtent(null),ut(se,Rt.stream(ll)),zt(ll.result()),re!=null&&Rt.clipExtent(re),Rt}function Ul(Rt,zt,se){return zs(Rt,function(re){var ce=zt[1][0]-zt[0][0],Fe=zt[1][1]-zt[0][1],Ke=Math.min(ce/(re[1][0]-re[0][0]),Fe/(re[1][1]-re[0][1])),rn=+zt[0][0]+(ce-Ke*(re[1][0]+re[0][0]))/2,Je=+zt[0][1]+(Fe-Ke*(re[1][1]+re[0][1]))/2;Rt.scale(150*Ke).translate([rn,Je])},se)}function gc(Rt,zt,se){return Ul(Rt,[[0,0],zt],se)}function Cl(Rt,zt,se){return zs(Rt,function(re){var ce=+zt,Fe=ce/(re[1][0]-re[0][0]),Ke=(ce-Fe*(re[1][0]+re[0][0]))/2,rn=-Fe*re[0][1];Rt.scale(150*Fe).translate([Ke,rn])},se)}function kl(Rt,zt,se){return zs(Rt,function(re){var ce=+zt,Fe=ce/(re[1][1]-re[0][1]),Ke=-Fe*re[0][0],rn=(ce-Fe*(re[1][1]+re[0][1]))/2;Rt.scale(150*Fe).translate([Ke,rn])},se)}var Gl=16,cc=M(30*b);function Qu(Rt,zt){return+zt?Vl(Rt,zt):Ol(Rt)}function Ol(Rt){return mu({point:function(se,re){se=Rt(se,re),this.stream.point(se[0],se[1])}})}function Vl(Rt,zt){function se(re,ce,Fe,Ke,rn,Je,vn,hn,Jn,Vn,Zn,Wn,lr,xr){var Vr=vn-re,yi=hn-ce,Br=Vr*Vr+yi*yi;if(Br>4*zt&&lr--){var si=Ke+Vn,gi=rn+Zn,Zi=Je+Wn,Li=R(si*si+gi*gi+Zi*Zi),Ma=Z(Zi/=Li),ma=y(y(Zi)-1)<n||y(Fe-Jn)<n?(Fe+Jn)/2:_(gi,si),la=Rt(ma,Ma),ri=la[0],Ta=la[1],Ga=ri-re,Ya=Ta-ce,Ii=yi*Ga-Vr*Ya;(Ii*Ii/Br>zt||y((Vr*Ga+yi*Ya)/Br-.5)>.3||Ke*Vn+rn*Zn+Je*Wn<cc)&&(se(re,ce,Fe,Ke,rn,Je,ri,Ta,ma,si/=Li,gi/=Li,Zi,lr,xr),xr.point(ri,Ta),se(ri,Ta,ma,si,gi,Zi,vn,hn,Jn,Vn,Zn,Wn,lr,xr))}}return function(re){var ce,Fe,Ke,rn,Je,vn,hn,Jn,Vn,Zn,Wn,lr,xr={point:Vr,lineStart:yi,lineEnd:si,polygonStart:function(){re.polygonStart(),xr.lineStart=gi},polygonEnd:function(){re.polygonEnd(),xr.lineStart=yi}};function Vr(Ma,ma){Ma=Rt(Ma,ma),re.point(Ma[0],Ma[1])}function yi(){Jn=NaN,xr.point=Br,re.lineStart()}function Br(Ma,ma){var la=H([Ma,ma]),ri=Rt(Ma,ma);se(Jn,Vn,hn,Zn,Wn,lr,Jn=ri[0],Vn=ri[1],hn=Ma,Zn=la[0],Wn=la[1],lr=la[2],Gl,re),re.point(Jn,Vn)}function si(){xr.point=Vr,re.lineEnd()}function gi(){yi(),xr.point=Zi,xr.lineEnd=Li}function Zi(Ma,ma){Br(ce=Ma,ma),Fe=Jn,Ke=Vn,rn=Zn,Je=Wn,vn=lr,xr.point=Br}function Li(){se(Jn,Vn,hn,Zn,Wn,lr,Fe,Ke,ce,rn,Je,vn,Gl,re),xr.lineEnd=si,si()}return xr}}var tu=mu({point:function(zt,se){this.stream.point(zt*b,se*b)}});function go(Rt){return mu({point:function(se,re){var ce=Rt(se,re);return this.stream.point(ce[0],ce[1])}})}function gl(Rt,zt,se,re,ce){function Fe(Ke,rn){return Ke*=re,rn*=ce,[zt+Rt*Ke,se-Rt*rn]}return Fe.invert=function(Ke,rn){return[(Ke-zt)/Rt*re,(se-rn)/Rt*ce]},Fe}function hl(Rt,zt,se,re,ce,Fe){var Ke=M(Fe),rn=A(Fe),Je=Ke*Rt,vn=rn*Rt,hn=Ke/Rt,Jn=rn/Rt,Vn=(rn*se-Ke*zt)/Rt,Zn=(rn*zt+Ke*se)/Rt;function Wn(lr,xr){return lr*=re,xr*=ce,[Je*lr-vn*xr+zt,se-vn*lr-Je*xr]}return Wn.invert=function(lr,xr){return[re*(hn*lr-Jn*xr+Vn),ce*(Zn-Jn*lr-hn*xr)]},Wn}function Ys(Rt){return Na(function(){return Rt})()}function Na(Rt){var zt,se=150,re=480,ce=250,Fe=0,Ke=0,rn=0,Je=0,vn=0,hn,Jn=0,Vn=1,Zn=1,Wn=null,lr=Wt,xr=null,Vr,yi,Br,si=Es,gi=.5,Zi,Li,Ma,ma,la;function ri(Ii){return Ma(Ii[0]*b,Ii[1]*b)}function Ta(Ii){return Ii=Ma.invert(Ii[0],Ii[1]),Ii&&[Ii[0]*v,Ii[1]*v]}ri.stream=function(Ii){return ma&&la===Ii?ma:ma=tu(go(hn)(lr(Zi(si(la=Ii)))))},ri.preclip=function(Ii){return arguments.length?(lr=Ii,Wn=void 0,Ya()):lr},ri.postclip=function(Ii){return arguments.length?(si=Ii,xr=Vr=yi=Br=null,Ya()):si},ri.clipAngle=function(Ii){return arguments.length?(lr=+Ii?qn(Wn=Ii*b):(Wn=null,Wt),Ya()):Wn*v},ri.clipExtent=function(Ii){return arguments.length?(si=Ii==null?(xr=Vr=yi=Br=null,Es):Ti(xr=+Ii[0][0],Vr=+Ii[0][1],yi=+Ii[1][0],Br=+Ii[1][1]),Ya()):xr==null?null:[[xr,Vr],[yi,Br]]},ri.scale=function(Ii){return arguments.length?(se=+Ii,Ga()):se},ri.translate=function(Ii){return arguments.length?(re=+Ii[0],ce=+Ii[1],Ga()):[re,ce]},ri.center=function(Ii){return arguments.length?(Fe=Ii[0]%360*b,Ke=Ii[1]%360*b,Ga()):[Fe*v,Ke*v]},ri.rotate=function(Ii){return arguments.length?(rn=Ii[0]%360*b,Je=Ii[1]%360*b,vn=Ii.length>2?Ii[2]%360*b:0,Ga()):[rn*v,Je*v,vn*v]},ri.angle=function(Ii){return arguments.length?(Jn=Ii%360*b,Ga()):Jn*v},ri.reflectX=function(Ii){return arguments.length?(Vn=Ii?-1:1,Ga()):Vn<0},ri.reflectY=function(Ii){return arguments.length?(Zn=Ii?-1:1,Ga()):Zn<0},ri.precision=function(Ii){return arguments.length?(Zi=Qu(Li,gi=Ii*Ii),Ya()):R(gi)},ri.fitExtent=function(Ii,Da){return Ul(ri,Ii,Da)},ri.fitSize=function(Ii,Da){return gc(ri,Ii,Da)},ri.fitWidth=function(Ii,Da){return Cl(ri,Ii,Da)},ri.fitHeight=function(Ii,Da){return kl(ri,Ii,Da)};function Ga(){var Ii=hl(se,0,0,Vn,Zn,Jn).apply(null,zt(Fe,Ke)),Da=(Jn?hl:gl)(se,re-Ii[0],ce-Ii[1],Vn,Zn,Jn);return hn=Oa(rn,Je,vn),Li=zr(zt,Da),Ma=zr(hn,Li),Zi=Qu(Li,gi),Ya()}function Ya(){return ma=la=null,ri}return function(){return zt=Rt.apply(this,arguments),ri.invert=zt.invert&&Ta,Ga()}}function _o(Rt){var zt=0,se=a/3,re=Na(Rt),ce=re(zt,se);return ce.parallels=function(Fe){return arguments.length?re(zt=Fe[0]*b,se=Fe[1]*b):[zt*v,se*v]},ce}function Us(Rt){var zt=M(Rt);function se(re,ce){return[re*zt,A(ce)/zt]}return se.invert=function(re,ce){return[re/zt,Z(ce*zt)]},se}function ml(Rt,zt){var se=A(Rt),re=(se+A(zt))/2;if(y(re)<n)return Us(Rt);var ce=1+se*(2*re-se),Fe=R(ce)/re;function Ke(rn,Je){var vn=R(ce-2*re*A(Je))/re;return[vn*A(rn*=re),Fe-vn*M(rn)]}return Ke.invert=function(rn,Je){var vn=Fe-Je,hn=_(rn,y(vn))*O(vn);return vn*re<0&&(hn-=a*O(rn)*O(vn)),[hn/re,Z((ce-(rn*rn+vn*vn)*re*re)/(2*re))]},Ke}function qu(){return _o(ml).scale(155.424).center([0,33.6442])}function ku(){return qu().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function mc(Rt){var zt=Rt.length;return{point:function(re,ce){for(var Fe=-1;++Fe<zt;)Rt[Fe].point(re,ce)},sphere:function(){for(var re=-1;++re<zt;)Rt[re].sphere()},lineStart:function(){for(var re=-1;++re<zt;)Rt[re].lineStart()},lineEnd:function(){for(var re=-1;++re<zt;)Rt[re].lineEnd()},polygonStart:function(){for(var re=-1;++re<zt;)Rt[re].polygonStart()},polygonEnd:function(){for(var re=-1;++re<zt;)Rt[re].polygonEnd()}}}function Os(){var Rt,zt,se=ku(),re,ce=qu().rotate([154,0]).center([-2,58.5]).parallels([55,65]),Fe,Ke=qu().rotate([157,0]).center([-3,19.9]).parallels([8,18]),rn,Je,vn={point:function(Zn,Wn){Je=[Zn,Wn]}};function hn(Vn){var Zn=Vn[0],Wn=Vn[1];return Je=null,re.point(Zn,Wn),Je||(Fe.point(Zn,Wn),Je)||(rn.point(Zn,Wn),Je)}hn.invert=function(Vn){var Zn=se.scale(),Wn=se.translate(),lr=(Vn[0]-Wn[0])/Zn,xr=(Vn[1]-Wn[1])/Zn;return(xr>=.12&&xr<.234&&lr>=-.425&&lr<-.214?ce:xr>=.166&&xr<.234&&lr>=-.214&&lr<-.115?Ke:se).invert(Vn)},hn.stream=function(Vn){return Rt&&zt===Vn?Rt:Rt=mc([se.stream(zt=Vn),ce.stream(Vn),Ke.stream(Vn)])},hn.precision=function(Vn){return arguments.length?(se.precision(Vn),ce.precision(Vn),Ke.precision(Vn),Jn()):se.precision()},hn.scale=function(Vn){return arguments.length?(se.scale(Vn),ce.scale(Vn*.35),Ke.scale(Vn),hn.translate(se.translate())):se.scale()},hn.translate=function(Vn){if(!arguments.length)return se.translate();var Zn=se.scale(),Wn=+Vn[0],lr=+Vn[1];return re=se.translate(Vn).clipExtent([[Wn-.455*Zn,lr-.238*Zn],[Wn+.455*Zn,lr+.238*Zn]]).stream(vn),Fe=ce.translate([Wn-.307*Zn,lr+.201*Zn]).clipExtent([[Wn-.425*Zn+n,lr+.12*Zn+n],[Wn-.214*Zn-n,lr+.234*Zn-n]]).stream(vn),rn=Ke.translate([Wn-.205*Zn,lr+.212*Zn]).clipExtent([[Wn-.214*Zn+n,lr+.166*Zn+n],[Wn-.115*Zn-n,lr+.234*Zn-n]]).stream(vn),Jn()},hn.fitExtent=function(Vn,Zn){return Ul(hn,Vn,Zn)},hn.fitSize=function(Vn,Zn){return gc(hn,Vn,Zn)},hn.fitWidth=function(Vn,Zn){return Cl(hn,Vn,Zn)},hn.fitHeight=function(Vn,Zn){return kl(hn,Vn,Zn)};function Jn(){return Rt=zt=null,hn}return hn.scale(1070)}function tl(Rt){return function(zt,se){var re=M(zt),ce=M(se),Fe=Rt(re*ce);return[Fe*ce*A(zt),Fe*A(se)]}}function uu(Rt){return function(zt,se){var re=R(zt*zt+se*se),ce=Rt(re),Fe=A(ce),Ke=M(ce);return[_(zt*Fe,re*Ke),Z(re&&se*Fe/re)]}}var Zs=tl(function(Rt){return R(2/(1+Rt))});Zs.invert=uu(function(Rt){return 2*Z(Rt/2)});function Qo(){return Ys(Zs).scale(124.75).clipAngle(180-.001)}var eu=tl(function(Rt){return(Rt=F(Rt))&&Rt/A(Rt)});eu.invert=uu(function(Rt){return Rt});function Ou(){return Ys(eu).scale(79.4188).clipAngle(180-.001)}function qo(Rt,zt){return[Rt,S(W((o+zt)/2))]}qo.invert=function(Rt,zt){return[Rt,2*g(m(zt))-o]};function Wi(){return ws(qo).scale(961/f)}function ws(Rt){var zt=Ys(Rt),se=zt.center,re=zt.scale,ce=zt.translate,Fe=zt.clipExtent,Ke=null,rn,Je,vn;zt.scale=function(Jn){return arguments.length?(re(Jn),hn()):re()},zt.translate=function(Jn){return arguments.length?(ce(Jn),hn()):ce()},zt.center=function(Jn){return arguments.length?(se(Jn),hn()):se()},zt.clipExtent=function(Jn){return arguments.length?(Jn==null?Ke=rn=Je=vn=null:(Ke=+Jn[0][0],rn=+Jn[0][1],Je=+Jn[1][0],vn=+Jn[1][1]),hn()):Ke==null?null:[[Ke,rn],[Je,vn]]};function hn(){var Jn=a*re(),Vn=zt(_a(zt.rotate()).invert([0,0]));return Fe(Ke==null?[[Vn[0]-Jn,Vn[1]-Jn],[Vn[0]+Jn,Vn[1]+Jn]]:Rt===qo?[[Math.max(Vn[0]-Jn,Ke),rn],[Math.min(Vn[0]+Jn,Je),vn]]:[[Ke,Math.max(Vn[1]-Jn,rn)],[Je,Math.min(Vn[1]+Jn,vn)]])}return hn()}function Gu(Rt){return W((o+Rt)/2)}function wu(Rt,zt){var se=M(Rt),re=Rt===zt?A(Rt):S(se/M(zt))/S(Gu(zt)/Gu(Rt)),ce=se*P(Gu(Rt),re)/re;if(!re)return qo;function Fe(Ke,rn){ce>0?rn<-o+n&&(rn=-o+n):rn>o-n&&(rn=o-n);var Je=ce/P(Gu(rn),re);return[Je*A(re*Ke),ce-Je*M(re*Ke)]}return Fe.invert=function(Ke,rn){var Je=ce-rn,vn=O(re)*R(Ke*Ke+Je*Je),hn=_(Ke,y(Je))*O(Je);return Je*re<0&&(hn-=a*O(Ke)*O(Je)),[hn/re,2*g(P(ce/vn,1/re))-o]},Fe}function Fo(){return _o(wu).scale(109.5).parallels([30,30])}function ko(Rt,zt){return[Rt,zt]}ko.invert=ko;function Eu(){return Ys(ko).scale(152.63)}function Mi(Rt,zt){var se=M(Rt),re=Rt===zt?A(Rt):(se-M(zt))/(zt-Rt),ce=se/re+Rt;if(y(re)<n)return ko;function Fe(Ke,rn){var Je=ce-rn,vn=re*Ke;return[Je*A(vn),ce-Je*M(vn)]}return Fe.invert=function(Ke,rn){var Je=ce-rn,vn=_(Ke,y(Je))*O(Je);return Je*re<0&&(vn-=a*O(Ke)*O(Je)),[vn/re,ce-O(re)*R(Ke*Ke+Je*Je)]},Fe}function el(){return _o(Mi).scale(131.154).center([0,13.9389])}var Iu=1.340264,Lu=-.081106,nu=893e-6,we=.003796,Te=R(3)/2,dn=12;function tn(Rt,zt){var se=Z(Te*A(zt)),re=se*se,ce=re*re*re;return[Rt*M(se)/(Te*(Iu+3*Lu*re+ce*(7*nu+9*we*re))),se*(Iu+Lu*re+ce*(nu+we*re))]}tn.invert=function(Rt,zt){for(var se=zt,re=se*se,ce=re*re*re,Fe=0,Ke,rn,Je;Fe<dn&&(rn=se*(Iu+Lu*re+ce*(nu+we*re))-zt,Je=Iu+3*Lu*re+ce*(7*nu+9*we*re),se-=Ke=rn/Je,re=se*se,ce=re*re*re,!(y(Ke)<i));++Fe);return[Te*Rt*(Iu+3*Lu*re+ce*(7*nu+9*we*re))/M(se),Z(A(se)/Te)]};function wn(){return Ys(tn).scale(177.158)}function vr(Rt,zt){var se=M(zt),re=M(Rt)*se;return[se*A(Rt)/re,A(zt)/re]}vr.invert=uu(g);function Lr(){return Ys(vr).scale(144.049).clipAngle(60)}function Kr(){var Rt=1,zt=0,se=0,re=1,ce=1,Fe=0,Ke,rn,Je=null,vn,hn,Jn,Vn=1,Zn=1,Wn=mu({point:function(gi,Zi){var Li=Br([gi,Zi]);this.stream.point(Li[0],Li[1])}}),lr=Es,xr,Vr;function yi(){return Vn=Rt*re,Zn=Rt*ce,xr=Vr=null,Br}function Br(si){var gi=si[0]*Vn,Zi=si[1]*Zn;if(Fe){var Li=Zi*Ke-gi*rn;gi=gi*Ke+Zi*rn,Zi=Li}return[gi+zt,Zi+se]}return Br.invert=function(si){var gi=si[0]-zt,Zi=si[1]-se;if(Fe){var Li=Zi*Ke+gi*rn;gi=gi*Ke-Zi*rn,Zi=Li}return[gi/Vn,Zi/Zn]},Br.stream=function(si){return xr&&Vr===si?xr:xr=Wn(lr(Vr=si))},Br.postclip=function(si){return arguments.length?(lr=si,Je=vn=hn=Jn=null,yi()):lr},Br.clipExtent=function(si){return arguments.length?(lr=si==null?(Je=vn=hn=Jn=null,Es):Ti(Je=+si[0][0],vn=+si[0][1],hn=+si[1][0],Jn=+si[1][1]),yi()):Je==null?null:[[Je,vn],[hn,Jn]]},Br.scale=function(si){return arguments.length?(Rt=+si,yi()):Rt},Br.translate=function(si){return arguments.length?(zt=+si[0],se=+si[1],yi()):[zt,se]},Br.angle=function(si){return arguments.length?(Fe=si%360*b,rn=A(Fe),Ke=M(Fe),yi()):Fe*v},Br.reflectX=function(si){return arguments.length?(re=si?-1:1,yi()):re<0},Br.reflectY=function(si){return arguments.length?(ce=si?-1:1,yi()):ce<0},Br.fitExtent=function(si,gi){return Ul(Br,si,gi)},Br.fitSize=function(si,gi){return gc(Br,si,gi)},Br.fitWidth=function(si,gi){return Cl(Br,si,gi)},Br.fitHeight=function(si,gi){return kl(Br,si,gi)},Br}function ti(Rt,zt){var se=zt*zt,re=se*se;return[Rt*(.8707-.131979*se+re*(-.013791+re*(.003971*se-.001529*re))),zt*(1.007226+se*(.015085+re*(-.044475+.028874*se-.005916*re)))]}ti.invert=function(Rt,zt){var se=zt,re=25,ce;do{var Fe=se*se,Ke=Fe*Fe;se-=ce=(se*(1.007226+Fe*(.015085+Ke*(-.044475+.028874*Fe-.005916*Ke)))-zt)/(1.007226+Fe*(.015085*3+Ke*(-.044475*7+.028874*9*Fe-.005916*11*Ke)))}while(y(ce)>n&&--re>0);return[Rt/(.8707+(Fe=se*se)*(-.131979+Fe*(-.013791+Fe*Fe*Fe*(.003971-.001529*Fe)))),se]};function Fr(){return Ys(ti).scale(175.295)}function ui(Rt,zt){return[M(zt)*A(Rt),A(zt)]}ui.invert=uu(Z);function br(){return Ys(ui).scale(249.5).clipAngle(90+n)}function Zt(Rt,zt){var se=M(zt),re=1+M(Rt)*se;return[se*A(Rt)/re,A(zt)/re]}Zt.invert=uu(function(Rt){return 2*g(Rt)});function te(){return Ys(Zt).scale(250).clipAngle(142)}function Le(Rt,zt){return[S(W((o+zt)/2)),-Rt]}Le.invert=function(Rt,zt){return[-zt,2*g(m(Rt))-o]};function _e(){var Rt=ws(Le),zt=Rt.center,se=Rt.rotate;return Rt.center=function(re){return arguments.length?zt([-re[1],re[0]]):(re=zt(),[re[1],-re[0]])},Rt.rotate=function(re){return arguments.length?se([re[0],re[1],re.length>2?re[2]+90:90]):(re=se(),[re[0],re[1],re[2]-90])},se([0,0,90]).scale(159.155)}t.geoAlbers=ku,t.geoAlbersUsa=Os,t.geoArea=ot,t.geoAzimuthalEqualArea=Qo,t.geoAzimuthalEqualAreaRaw=Zs,t.geoAzimuthalEquidistant=Ou,t.geoAzimuthalEquidistantRaw=eu,t.geoBounds=Jt,t.geoCentroid=Rr,t.geoCircle=io,t.geoClipAntimeridian=Wt,t.geoClipCircle=qn,t.geoClipExtent=ki,t.geoClipRectangle=Ti,t.geoConicConformal=Fo,t.geoConicConformalRaw=wu,t.geoConicEqualArea=qu,t.geoConicEqualAreaRaw=ml,t.geoConicEquidistant=el,t.geoConicEquidistantRaw=Mi,t.geoContains=Ja,t.geoDistance=Co,t.geoEqualEarth=wn,t.geoEqualEarthRaw=tn,t.geoEquirectangular=Eu,t.geoEquirectangularRaw=ko,t.geoGnomonic=Lr,t.geoGnomonicRaw=vr,t.geoGraticule=ea,t.geoGraticule10=to,t.geoIdentity=Kr,t.geoInterpolate=bs,t.geoLength=as,t.geoMercator=Wi,t.geoMercatorRaw=qo,t.geoNaturalEarth1=Fr,t.geoNaturalEarth1Raw=ti,t.geoOrthographic=br,t.geoOrthographicRaw=ui,t.geoPath=Au,t.geoProjection=Ys,t.geoProjectionMutator=Na,t.geoRotation=_a,t.geoStereographic=te,t.geoStereographicRaw=Zt,t.geoStream=ut,t.geoTransform=Cu,t.geoTransverseMercator=_e,t.geoTransverseMercatorRaw=Le,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-geo@1.6.4@d3-geo/build/d3-geo.js":function(E,T,e){(function(t,l){l(T,e("./node_modules/_d3-array@1.2.4@d3-array/dist/d3-array.js"))})(this,function(t,l){"use strict";var s=function(){return new c};function c(){this.reset()}c.prototype={constructor:c,reset:function(){this.s=this.t=0},add:function(Te){h(r,Te,this.t),h(this,r.s,this.s),this.s?this.t+=r.t:this.s=r.t},valueOf:function(){return this.s}};var r=new c;function h(we,Te,dn){var tn=we.s=Te+dn,wn=tn-Te,vr=tn-wn;we.t=Te-vr+(dn-wn)}var n=1e-6,i=1e-12,a=Math.PI,o=a/2,u=a/4,f=a*2,v=180/a,b=a/180,y=Math.abs,g=Math.atan,_=Math.atan2,M=Math.cos,x=Math.ceil,m=Math.exp,S=Math.log,P=Math.pow,A=Math.sin,O=Math.sign||function(we){return we>0?1:we<0?-1:0},R=Math.sqrt,W=Math.tan;function F(we){return we>1?0:we<-1?a:Math.acos(we)}function Z(we){return we>1?o:we<-1?-o:Math.asin(we)}function V(we){return(we=A(we/2))*we}function k(){}function Y(we,Te){we&&it.hasOwnProperty(we.type)&&it[we.type](we,Te)}var K={Feature:function(Te,dn){Y(Te.geometry,dn)},FeatureCollection:function(Te,dn){for(var tn=Te.features,wn=-1,vr=tn.length;++wn<vr;)Y(tn[wn].geometry,dn)}},it={Sphere:function(Te,dn){dn.sphere()},Point:function(Te,dn){Te=Te.coordinates,dn.point(Te[0],Te[1],Te[2])},MultiPoint:function(Te,dn){for(var tn=Te.coordinates,wn=-1,vr=tn.length;++wn<vr;)Te=tn[wn],dn.point(Te[0],Te[1],Te[2])},LineString:function(Te,dn){ct(Te.coordinates,dn,0)},MultiLineString:function(Te,dn){for(var tn=Te.coordinates,wn=-1,vr=tn.length;++wn<vr;)ct(tn[wn],dn,0)},Polygon:function(Te,dn){ht(Te.coordinates,dn)},MultiPolygon:function(Te,dn){for(var tn=Te.coordinates,wn=-1,vr=tn.length;++wn<vr;)ht(tn[wn],dn)},GeometryCollection:function(Te,dn){for(var tn=Te.geometries,wn=-1,vr=tn.length;++wn<vr;)Y(tn[wn],dn)}};function ct(we,Te,dn){var tn=-1,wn=we.length-dn,vr;for(Te.lineStart();++tn<wn;)vr=we[tn],Te.point(vr[0],vr[1],vr[2]);Te.lineEnd()}function ht(we,Te){var dn=-1,tn=we.length;for(Te.polygonStart();++dn<tn;)ct(we[dn],Te,1);Te.polygonEnd()}var ut=function(Te,dn){Te&&K.hasOwnProperty(Te.type)?K[Te.type](Te,dn):Y(Te,dn)},It=s(),Nt=s(),Lt,_t,mt,At,rt,Mt={point:k,lineStart:k,lineEnd:k,polygonStart:function(){It.reset(),Mt.lineStart=z,Mt.lineEnd=$},polygonEnd:function(){var Te=+It;Nt.add(Te<0?f+Te:Te),this.lineStart=this.lineEnd=this.point=k},sphere:function(){Nt.add(f)}};function z(){Mt.point=dt}function $(){et(Lt,_t)}function dt(we,Te){Mt.point=et,Lt=we,_t=Te,we*=b,Te*=b,mt=we,At=M(Te=Te/2+u),rt=A(Te)}function et(we,Te){we*=b,Te*=b,Te=Te/2+u;var dn=we-mt,tn=dn>=0?1:-1,wn=tn*dn,vr=M(Te),Lr=A(Te),Kr=rt*Lr,ti=At*vr+Kr*M(wn),Fr=Kr*tn*A(wn);It.add(_(Fr,ti)),mt=we,At=vr,rt=Lr}var ot=function(Te){return Nt.reset(),ut(Te,Mt),Nt*2};function pt(we){return[_(we[1],we[0]),Z(we[2])]}function H(we){var Te=we[0],dn=we[1],tn=M(dn);return[tn*M(Te),tn*A(Te),A(dn)]}function nt(we,Te){return we[0]*Te[0]+we[1]*Te[1]+we[2]*Te[2]}function at(we,Te){return[we[1]*Te[2]-we[2]*Te[1],we[2]*Te[0]-we[0]*Te[2],we[0]*Te[1]-we[1]*Te[0]]}function q(we,Te){we[0]+=Te[0],we[1]+=Te[1],we[2]+=Te[2]}function Et(we,Te){return[we[0]*Te,we[1]*Te,we[2]*Te]}function vt(we){var Te=R(we[0]*we[0]+we[1]*we[1]+we[2]*we[2]);we[0]/=Te,we[1]/=Te,we[2]/=Te}var Ft,Qt,ee,Gt,$t,Pe,me,le,be=s(),ze,Xe,_n={point:Kn,lineStart:nn,lineEnd:en,polygonStart:function(){_n.point=An,_n.lineStart=Nn,_n.lineEnd=hr,be.reset(),Mt.polygonStart()},polygonEnd:function(){Mt.polygonEnd(),_n.point=Kn,_n.lineStart=nn,_n.lineEnd=en,It<0?(Ft=-(ee=180),Qt=-(Gt=90)):be>n?Gt=90:be<-n&&(Qt=-90),Xe[0]=Ft,Xe[1]=ee}};function Kn(we,Te){ze.push(Xe=[Ft=we,ee=we]),Te<Qt&&(Qt=Te),Te>Gt&&(Gt=Te)}function Hn(we,Te){var dn=H([we*b,Te*b]);if(le){var tn=at(le,dn),wn=[tn[1],-tn[0],0],vr=at(wn,tn);vt(vr),vr=pt(vr);var Lr=we-$t,Kr=Lr>0?1:-1,ti=vr[0]*v*Kr,Fr,ui=y(Lr)>180;ui^(Kr*$t<ti&&ti<Kr*we)?(Fr=vr[1]*v,Fr>Gt&&(Gt=Fr)):(ti=(ti+360)%360-180,ui^(Kr*$t<ti&&ti<Kr*we)?(Fr=-vr[1]*v,Fr<Qt&&(Qt=Fr)):(Te<Qt&&(Qt=Te),Te>Gt&&(Gt=Te))),ui?we<$t?fi(Ft,we)>fi(Ft,ee)&&(ee=we):fi(we,ee)>fi(Ft,ee)&&(Ft=we):ee>=Ft?(we<Ft&&(Ft=we),we>ee&&(ee=we)):we>$t?fi(Ft,we)>fi(Ft,ee)&&(ee=we):fi(we,ee)>fi(Ft,ee)&&(Ft=we)}else ze.push(Xe=[Ft=we,ee=we]);Te<Qt&&(Qt=Te),Te>Gt&&(Gt=Te),le=dn,$t=we}function nn(){_n.point=Hn}function en(){Xe[0]=Ft,Xe[1]=ee,_n.point=Kn,le=null}function An(we,Te){if(le){var dn=we-$t;be.add(y(dn)>180?dn+(dn>0?360:-360):dn)}else Pe=we,me=Te;Mt.point(we,Te),Hn(we,Te)}function Nn(){Mt.lineStart()}function hr(){An(Pe,me),Mt.lineEnd(),y(be)>n&&(Ft=-(ee=180)),Xe[0]=Ft,Xe[1]=ee,le=null}function fi(we,Te){return(Te-=we)<0?Te+360:Te}function Oe(we,Te){return we[0]-Te[0]}function Ae(we,Te){return we[0]<=we[1]?we[0]<=Te&&Te<=we[1]:Te<we[0]||we[1]<Te}var Jt=function(Te){var dn,tn,wn,vr,Lr,Kr,ti;if(Gt=ee=-(Ft=Qt=Infinity),ze=[],ut(Te,_n),tn=ze.length){for(ze.sort(Oe),dn=1,wn=ze[0],Lr=[wn];dn<tn;++dn)vr=ze[dn],Ae(wn,vr[0])||Ae(wn,vr[1])?(fi(wn[0],vr[1])>fi(wn[0],wn[1])&&(wn[1]=vr[1]),fi(vr[0],wn[1])>fi(wn[0],wn[1])&&(wn[0]=vr[0])):Lr.push(wn=vr);for(Kr=-Infinity,tn=Lr.length-1,dn=0,wn=Lr[tn];dn<=tn;wn=vr,++dn)vr=Lr[dn],(ti=fi(wn[1],vr[0]))>Kr&&(Kr=ti,Ft=vr[0],ee=wn[1])}return ze=Xe=null,Ft===Infinity||Qt===Infinity?[[NaN,NaN],[NaN,NaN]]:[[Ft,Qt],[ee,Gt]]},ve,Vt,ie,Ce,ue,xe,$e,Fn,rr,En,Pn,Er,Pr,ln,Cr,Ar,je={sphere:k,point:We,lineStart:fn,lineEnd:bn,polygonStart:function(){je.lineStart=Ln,je.lineEnd=nr},polygonEnd:function(){je.lineStart=fn,je.lineEnd=bn}};function We(we,Te){we*=b,Te*=b;var dn=M(Te);Ye(dn*M(we),dn*A(we),A(Te))}function Ye(we,Te,dn){++ve,ie+=(we-ie)/ve,Ce+=(Te-Ce)/ve,ue+=(dn-ue)/ve}function fn(){je.point=mn}function mn(we,Te){we*=b,Te*=b;var dn=M(Te);ln=dn*M(we),Cr=dn*A(we),Ar=A(Te),je.point=jn,Ye(ln,Cr,Ar)}function jn(we,Te){we*=b,Te*=b;var dn=M(Te),tn=dn*M(we),wn=dn*A(we),vr=A(Te),Lr=_(R((Lr=Cr*vr-Ar*wn)*Lr+(Lr=Ar*tn-ln*vr)*Lr+(Lr=ln*wn-Cr*tn)*Lr),ln*tn+Cr*wn+Ar*vr);Vt+=Lr,xe+=Lr*(ln+(ln=tn)),$e+=Lr*(Cr+(Cr=wn)),Fn+=Lr*(Ar+(Ar=vr)),Ye(ln,Cr,Ar)}function bn(){je.point=We}function Ln(){je.point=Yn}function nr(){Mn(Er,Pr),je.point=We}function Yn(we,Te){Er=we,Pr=Te,we*=b,Te*=b,je.point=Mn;var dn=M(Te);ln=dn*M(we),Cr=dn*A(we),Ar=A(Te),Ye(ln,Cr,Ar)}function Mn(we,Te){we*=b,Te*=b;var dn=M(Te),tn=dn*M(we),wn=dn*A(we),vr=A(Te),Lr=Cr*vr-Ar*wn,Kr=Ar*tn-ln*vr,ti=ln*wn-Cr*tn,Fr=R(Lr*Lr+Kr*Kr+ti*ti),ui=Z(Fr),br=Fr&&-ui/Fr;rr+=br*Lr,En+=br*Kr,Pn+=br*ti,Vt+=ui,xe+=ui*(ln+(ln=tn)),$e+=ui*(Cr+(Cr=wn)),Fn+=ui*(Ar+(Ar=vr)),Ye(ln,Cr,Ar)}var Rr=function(Te){ve=Vt=ie=Ce=ue=xe=$e=Fn=rr=En=Pn=0,ut(Te,je);var dn=rr,tn=En,wn=Pn,vr=dn*dn+tn*tn+wn*wn;return vr<i&&(dn=xe,tn=$e,wn=Fn,Vt<n&&(dn=ie,tn=Ce,wn=ue),vr=dn*dn+tn*tn+wn*wn,vr<i)?[NaN,NaN]:[_(tn,dn)*v,Z(wn/R(vr))*v]},pr=function(Te){return function(){return Te}},zr=function(Te,dn){function tn(wn,vr){return wn=Te(wn,vr),dn(wn[0],wn[1])}return Te.invert&&dn.invert&&(tn.invert=function(wn,vr){return wn=dn.invert(wn,vr),wn&&Te.invert(wn[0],wn[1])}),tn};function Pi(we,Te){return[we>a?we-f:we<-a?we+f:we,Te]}Pi.invert=Pi;function Oa(we,Te,dn){return(we%=f)?Te||dn?zr(ro(we),Ko(Te,dn)):ro(we):Te||dn?Ko(Te,dn):Pi}function Ua(we){return function(Te,dn){return Te+=we,[Te>a?Te-f:Te<-a?Te+f:Te,dn]}}function ro(we){var Te=Ua(we);return Te.invert=Ua(-we),Te}function Ko(we,Te){var dn=M(we),tn=A(we),wn=M(Te),vr=A(Te);function Lr(Kr,ti){var Fr=M(ti),ui=M(Kr)*Fr,br=A(Kr)*Fr,Zt=A(ti),te=Zt*dn+ui*tn;return[_(br*wn-te*vr,ui*dn-Zt*tn),Z(te*wn+br*vr)]}return Lr.invert=function(Kr,ti){var Fr=M(ti),ui=M(Kr)*Fr,br=A(Kr)*Fr,Zt=A(ti),te=Zt*wn-br*vr;return[_(br*wn+Zt*vr,ui*dn+te*tn),Z(te*dn-ui*tn)]},Lr}var _a=function(Te){Te=Oa(Te[0]*b,Te[1]*b,Te.length>2?Te[2]*b:0);function dn(tn){return tn=Te(tn[0]*b,tn[1]*b),tn[0]*=v,tn[1]*=v,tn}return dn.invert=function(tn){return tn=Te.invert(tn[0]*b,tn[1]*b),tn[0]*=v,tn[1]*=v,tn},dn};function co(we,Te,dn,tn,wn,vr){if(!!dn){var Lr=M(Te),Kr=A(Te),ti=tn*dn;wn==null?(wn=Te+tn*f,vr=Te-ti/2):(wn=Xo(Lr,wn),vr=Xo(Lr,vr),(tn>0?wn<vr:wn>vr)&&(wn+=tn*f));for(var Fr,ui=wn;tn>0?ui>vr:ui<vr;ui-=ti)Fr=pt([Lr,-Kr*M(ui),-Kr*A(ui)]),we.point(Fr[0],Fr[1])}}function Xo(we,Te){Te=H(Te),Te[0]-=we,vt(Te);var dn=F(-Te[1]);return((-Te[2]<0?-dn:dn)+f-n)%f}var io=function(){var Te=pr([0,0]),dn=pr(90),tn=pr(6),wn,vr,Lr={point:Kr};function Kr(Fr,ui){wn.push(Fr=vr(Fr,ui)),Fr[0]*=v,Fr[1]*=v}function ti(){var Fr=Te.apply(this,arguments),ui=dn.apply(this,arguments)*b,br=tn.apply(this,arguments)*b;return wn=[],vr=Oa(-Fr[0]*b,-Fr[1]*b,0).invert,co(Lr,ui,br,1),Fr={type:"Polygon",coordinates:[wn]},wn=vr=null,Fr}return ti.center=function(Fr){return arguments.length?(Te=typeof Fr=="function"?Fr:pr([+Fr[0],+Fr[1]]),ti):Te},ti.radius=function(Fr){return arguments.length?(dn=typeof Fr=="function"?Fr:pr(+Fr),ti):dn},ti.precision=function(Fr){return arguments.length?(tn=typeof Fr=="function"?Fr:pr(+Fr),ti):tn},ti},To=function(){var Te=[],dn;return{point:function(wn,vr){dn.push([wn,vr])},lineStart:function(){Te.push(dn=[])},lineEnd:k,rejoin:function(){Te.length>1&&Te.push(Te.pop().concat(Te.shift()))},result:function(){var wn=Te;return Te=[],dn=null,wn}}},ds=function(Te,dn,tn,wn,vr,Lr){var Kr=Te[0],ti=Te[1],Fr=dn[0],ui=dn[1],br=0,Zt=1,te=Fr-Kr,Le=ui-ti,_e;if(_e=tn-Kr,!(!te&&_e>0)){if(_e/=te,te<0){if(_e<br)return;_e<Zt&&(Zt=_e)}else if(te>0){if(_e>Zt)return;_e>br&&(br=_e)}if(_e=vr-Kr,!(!te&&_e<0)){if(_e/=te,te<0){if(_e>Zt)return;_e>br&&(br=_e)}else if(te>0){if(_e<br)return;_e<Zt&&(Zt=_e)}if(_e=wn-ti,!(!Le&&_e>0)){if(_e/=Le,Le<0){if(_e<br)return;_e<Zt&&(Zt=_e)}else if(Le>0){if(_e>Zt)return;_e>br&&(br=_e)}if(_e=Lr-ti,!(!Le&&_e<0)){if(_e/=Le,Le<0){if(_e>Zt)return;_e>br&&(br=_e)}else if(Le>0){if(_e<br)return;_e<Zt&&(Zt=_e)}return br>0&&(Te[0]=Kr+br*te,Te[1]=ti+br*Le),Zt<1&&(dn[0]=Kr+Zt*te,dn[1]=ti+Zt*Le),!0}}}}},La=function(Te,dn){return y(Te[0]-dn[0])<n&&y(Te[1]-dn[1])<n};function Vo(we,Te,dn,tn){this.x=we,this.z=Te,this.o=dn,this.e=tn,this.v=!1,this.n=this.p=null}var Bo=function(Te,dn,tn,wn,vr){var Lr=[],Kr=[],ti,Fr;if(Te.forEach(function(_e){if(!((Rt=_e.length-1)<=0)){var Rt,zt=_e[0],se=_e[Rt],re;if(La(zt,se)){for(vr.lineStart(),ti=0;ti<Rt;++ti)vr.point((zt=_e[ti])[0],zt[1]);vr.lineEnd();return}Lr.push(re=new Vo(zt,_e,null,!0)),Kr.push(re.o=new Vo(zt,null,re,!1)),Lr.push(re=new Vo(se,_e,null,!1)),Kr.push(re.o=new Vo(se,null,re,!0))}}),!!Lr.length){for(Kr.sort(dn),lu(Lr),lu(Kr),ti=0,Fr=Kr.length;ti<Fr;++ti)Kr[ti].e=tn=!tn;for(var ui=Lr[0],br,Zt;;){for(var te=ui,Le=!0;te.v;)if((te=te.n)===ui)return;br=te.z,vr.lineStart();do{if(te.v=te.o.v=!0,te.e){if(Le)for(ti=0,Fr=br.length;ti<Fr;++ti)vr.point((Zt=br[ti])[0],Zt[1]);else wn(te.x,te.n.x,1,vr);te=te.n}else{if(Le)for(br=te.p.z,ti=br.length-1;ti>=0;--ti)vr.point((Zt=br[ti])[0],Zt[1]);else wn(te.x,te.p.x,-1,vr);te=te.p}te=te.o,br=te.z,Le=!Le}while(!te.v);vr.lineEnd()}}};function lu(we){if(!!(Te=we.length)){for(var Te,dn=0,tn=we[0],wn;++dn<Te;)tn.n=wn=we[dn],wn.p=tn,tn=wn;tn.n=wn=we[0],wn.p=tn}}var Jo=1e9,iu=-Jo;function $s(we,Te,dn,tn){function wn(Fr,ui){return we<=Fr&&Fr<=dn&&Te<=ui&&ui<=tn}function vr(Fr,ui,br,Zt){var te=0,Le=0;if(Fr==null||(te=Lr(Fr,br))!==(Le=Lr(ui,br))||ti(Fr,ui)<0^br>0)do Zt.point(te===0||te===3?we:dn,te>1?tn:Te);while((te=(te+br+4)%4)!==Le);else Zt.point(ui[0],ui[1])}function Lr(Fr,ui){return y(Fr[0]-we)<n?ui>0?0:3:y(Fr[0]-dn)<n?ui>0?2:1:y(Fr[1]-Te)<n?ui>0?1:0:ui>0?3:2}function Kr(Fr,ui){return ti(Fr.x,ui.x)}function ti(Fr,ui){var br=Lr(Fr,1),Zt=Lr(ui,1);return br!==Zt?br-Zt:br===0?ui[1]-Fr[1]:br===1?Fr[0]-ui[0]:br===2?Fr[1]-ui[1]:ui[0]-Fr[0]}return function(Fr){var ui=Fr,br=To(),Zt,te,Le,_e,Rt,zt,se,re,ce,Fe,Ke,rn={point:Je,lineStart:Vn,lineEnd:Zn,polygonStart:hn,polygonEnd:Jn};function Je(lr,xr){wn(lr,xr)&&ui.point(lr,xr)}function vn(){for(var lr=0,xr=0,Vr=te.length;xr<Vr;++xr)for(var yi=te[xr],Br=1,si=yi.length,gi=yi[0],Zi,Li,Ma=gi[0],ma=gi[1];Br<si;++Br)Zi=Ma,Li=ma,gi=yi[Br],Ma=gi[0],ma=gi[1],Li<=tn?ma>tn&&(Ma-Zi)*(tn-Li)>(ma-Li)*(we-Zi)&&++lr:ma<=tn&&(Ma-Zi)*(tn-Li)<(ma-Li)*(we-Zi)&&--lr;return lr}function hn(){ui=br,Zt=[],te=[],Ke=!0}function Jn(){var lr=vn(),xr=Ke&&lr,Vr=(Zt=l.merge(Zt)).length;(xr||Vr)&&(Fr.polygonStart(),xr&&(Fr.lineStart(),vr(null,null,1,Fr),Fr.lineEnd()),Vr&&Bo(Zt,Kr,lr,vr,Fr),Fr.polygonEnd()),ui=Fr,Zt=te=Le=null}function Vn(){rn.point=Wn,te&&te.push(Le=[]),Fe=!0,ce=!1,se=re=NaN}function Zn(){Zt&&(Wn(_e,Rt),zt&&ce&&br.rejoin(),Zt.push(br.result())),rn.point=Je,ce&&ui.lineEnd()}function Wn(lr,xr){var Vr=wn(lr,xr);if(te&&Le.push([lr,xr]),Fe)_e=lr,Rt=xr,zt=Vr,Fe=!1,Vr&&(ui.lineStart(),ui.point(lr,xr));else if(Vr&&ce)ui.point(lr,xr);else{var yi=[se=Math.max(iu,Math.min(Jo,se)),re=Math.max(iu,Math.min(Jo,re))],Br=[lr=Math.max(iu,Math.min(Jo,lr)),xr=Math.max(iu,Math.min(Jo,xr))];ds(yi,Br,we,Te,dn,tn)?(ce||(ui.lineStart(),ui.point(yi[0],yi[1])),ui.point(Br[0],Br[1]),Vr||ui.lineEnd(),Ke=!1):Vr&&(ui.lineStart(),ui.point(lr,xr),Ke=!1)}se=lr,re=xr,ce=Vr}return rn}}var Ne=function(){var Te=0,dn=0,tn=960,wn=500,vr,Lr,Kr;return Kr={stream:function(Fr){return vr&&Lr===Fr?vr:vr=$s(Te,dn,tn,wn)(Lr=Fr)},extent:function(Fr){return arguments.length?(Te=+Fr[0][0],dn=+Fr[0][1],tn=+Fr[1][0],wn=+Fr[1][1],vr=Lr=null,Kr):[[Te,dn],[tn,wn]]}}},oe=s(),Wt=function(Te,dn){var tn=dn[0],wn=dn[1],vr=[A(tn),-M(tn),0],Lr=0,Kr=0;oe.reset();for(var ti=0,Fr=Te.length;ti<Fr;++ti)if(!!(br=(ui=Te[ti]).length))for(var ui,br,Zt=ui[br-1],te=Zt[0],Le=Zt[1]/2+u,_e=A(Le),Rt=M(Le),zt=0;zt<br;++zt,te=re,_e=Fe,Rt=Ke,Zt=se){var se=ui[zt],re=se[0],ce=se[1]/2+u,Fe=A(ce),Ke=M(ce),rn=re-te,Je=rn>=0?1:-1,vn=Je*rn,hn=vn>a,Jn=_e*Fe;if(oe.add(_(Jn*Je*A(vn),Rt*Ke+Jn*M(vn))),Lr+=hn?rn+Je*f:rn,hn^te>=tn^re>=tn){var Vn=at(H(Zt),H(se));vt(Vn);var Zn=at(vr,Vn);vt(Zn);var Wn=(hn^rn>=0?-1:1)*Z(Zn[2]);(wn>Wn||wn===Wn&&(Vn[0]||Vn[1]))&&(Kr+=hn^rn>=0?1:-1)}}return(Lr<-n||Lr<n&&oe<-n)^Kr&1},Ee=s(),an,Un,qn,kn={sphere:k,point:k,lineStart:Xr,lineEnd:k,polygonStart:k,polygonEnd:k};function Xr(){kn.point=Ti,kn.lineEnd=Si}function Si(){kn.point=kn.lineEnd=k}function Ti(we,Te){we*=b,Te*=b,an=we,Un=A(Te),qn=M(Te),kn.point=ki}function ki(we,Te){we*=b,Te*=b;var dn=A(Te),tn=M(Te),wn=y(we-an),vr=M(wn),Lr=A(wn),Kr=tn*Lr,ti=qn*dn-Un*tn*vr,Fr=Un*dn+qn*tn*vr;Ee.add(_(R(Kr*Kr+ti*ti),Fr)),an=we,Un=dn,qn=tn}var sa=function(Te){return Ee.reset(),ut(Te,kn),+Ee},$a=[null,null],ba={type:"LineString",coordinates:$a},bo=function(Te,dn){return $a[0]=Te,$a[1]=dn,sa(ba)},Fa={Feature:function(Te,dn){return Eo(Te.geometry,dn)},FeatureCollection:function(Te,dn){for(var tn=Te.features,wn=-1,vr=tn.length;++wn<vr;)if(Eo(tn[wn].geometry,dn))return!0;return!1}},oo={Sphere:function(){return!0},Point:function(Te,dn){return Qa(Te.coordinates,dn)},MultiPoint:function(Te,dn){for(var tn=Te.coordinates,wn=-1,vr=tn.length;++wn<vr;)if(Qa(tn[wn],dn))return!0;return!1},LineString:function(Te,dn){return Ao(Te.coordinates,dn)},MultiLineString:function(Te,dn){for(var tn=Te.coordinates,wn=-1,vr=tn.length;++wn<vr;)if(Ao(tn[wn],dn))return!0;return!1},Polygon:function(Te,dn){return as(Te.coordinates,dn)},MultiPolygon:function(Te,dn){for(var tn=Te.coordinates,wn=-1,vr=tn.length;++wn<vr;)if(as(tn[wn],dn))return!0;return!1},GeometryCollection:function(Te,dn){for(var tn=Te.geometries,wn=-1,vr=tn.length;++wn<vr;)if(Eo(tn[wn],dn))return!0;return!1}};function Eo(we,Te){return we&&oo.hasOwnProperty(we.type)?oo[we.type](we,Te):!1}function Qa(we,Te){return bo(we,Te)===0}function Ao(we,Te){var dn=bo(we[0],we[1]),tn=bo(we[0],Te),wn=bo(Te,we[1]);return tn+wn<=dn+n}function as(we,Te){return!!Wt(we.map(No),xs(Te))}function No(we){return we=we.map(xs),we.pop(),we}function xs(we){return[we[0]*b,we[1]*b]}var Co=function(Te,dn){return(Te&&Fa.hasOwnProperty(Te.type)?Fa[Te.type]:Eo)(Te,dn)};function qa(we,Te,dn){var tn=l.range(we,Te-n,dn).concat(Te);return function(wn){return tn.map(function(vr){return[wn,vr]})}}function Ts(we,Te,dn){var tn=l.range(we,Te-n,dn).concat(Te);return function(wn){return tn.map(function(vr){return[vr,wn]})}}function ls(){var we,Te,dn,tn,wn,vr,Lr,Kr,ti=10,Fr=ti,ui=90,br=360,Zt,te,Le,_e,Rt=2.5;function zt(){return{type:"MultiLineString",coordinates:se()}}function se(){return l.range(x(tn/ui)*ui,dn,ui).map(Le).concat(l.range(x(Kr/br)*br,Lr,br).map(_e)).concat(l.range(x(Te/ti)*ti,we,ti).filter(function(re){return y(re%ui)>n}).map(Zt)).concat(l.range(x(vr/Fr)*Fr,wn,Fr).filter(function(re){return y(re%br)>n}).map(te))}return zt.lines=function(){return se().map(function(re){return{type:"LineString",coordinates:re}})},zt.outline=function(){return{type:"Polygon",coordinates:[Le(tn).concat(_e(Lr).slice(1),Le(dn).reverse().slice(1),_e(Kr).reverse().slice(1))]}},zt.extent=function(re){return arguments.length?zt.extentMajor(re).extentMinor(re):zt.extentMinor()},zt.extentMajor=function(re){return arguments.length?(tn=+re[0][0],dn=+re[1][0],Kr=+re[0][1],Lr=+re[1][1],tn>dn&&(re=tn,tn=dn,dn=re),Kr>Lr&&(re=Kr,Kr=Lr,Lr=re),zt.precision(Rt)):[[tn,Kr],[dn,Lr]]},zt.extentMinor=function(re){return arguments.length?(Te=+re[0][0],we=+re[1][0],vr=+re[0][1],wn=+re[1][1],Te>we&&(re=Te,Te=we,we=re),vr>wn&&(re=vr,vr=wn,wn=re),zt.precision(Rt)):[[Te,vr],[we,wn]]},zt.step=function(re){return arguments.length?zt.stepMajor(re).stepMinor(re):zt.stepMinor()},zt.stepMajor=function(re){return arguments.length?(ui=+re[0],br=+re[1],zt):[ui,br]},zt.stepMinor=function(re){return arguments.length?(ti=+re[0],Fr=+re[1],zt):[ti,Fr]},zt.precision=function(re){return arguments.length?(Rt=+re,Zt=qa(vr,wn,90),te=Ts(Te,we,Rt),Le=qa(Kr,Lr,90),_e=Ts(tn,dn,Rt),zt):Rt},zt.extentMajor([[-180,-90+n],[180,90-n]]).extentMinor([[-180,-80-n],[180,80+n]])}function wa(){return ls()()}var yn=function(Te,dn){var tn=Te[0]*b,wn=Te[1]*b,vr=dn[0]*b,Lr=dn[1]*b,Kr=M(wn),ti=A(wn),Fr=M(Lr),ui=A(Lr),br=Kr*M(tn),Zt=Kr*A(tn),te=Fr*M(vr),Le=Fr*A(vr),_e=2*Z(R(V(Lr-wn)+Kr*Fr*V(vr-tn))),Rt=A(_e),zt=_e?function(se){var re=A(se*=_e)/Rt,ce=A(_e-se)/Rt,Fe=ce*br+re*te,Ke=ce*Zt+re*Le,rn=ce*ti+re*ui;return[_(Ke,Fe)*v,_(rn,R(Fe*Fe+Ke*Ke))*v]}:function(){return[tn*v,wn*v]};return zt.distance=_e,zt},dr=function(Te){return Te},kr=s(),Ui=s(),Ja,So,po,ea,to={point:k,lineStart:k,lineEnd:k,polygonStart:function(){to.lineStart=bs,to.lineEnd=bu},polygonEnd:function(){to.lineStart=to.lineEnd=to.point=k,kr.add(y(Ui)),Ui.reset()},result:function(){var Te=kr/2;return kr.reset(),Te}};function bs(){to.point=Es}function Es(we,Te){to.point=ka,Ja=po=we,So=ea=Te}function ka(we,Te){Ui.add(ea*we-po*Te),po=we,ea=Te}function bu(){ka(Ja,So)}var Wo=Infinity,As=Wo,Qs=-Wo,vs=Qs,ps={point:cs,lineStart:k,lineEnd:k,polygonStart:k,polygonEnd:k,result:function(){var Te=[[Wo,As],[Qs,vs]];return Qs=vs=-(As=Wo=Infinity),Te}};function cs(we,Te){we<Wo&&(Wo=we),we>Qs&&(Qs=we),Te<As&&(As=Te),Te>vs&&(vs=Te)}var gs=0,Cs=0,Pu=0,ju=0,fo=0,Ns=0,Bu=0,ll=0,cl=0,Xu,Io,Ra,Ea,Ro={point:pu,lineStart:Ml,lineEnd:au,polygonStart:function(){Ro.lineStart=qs,Ro.lineEnd=Ds},polygonEnd:function(){Ro.point=pu,Ro.lineStart=Ml,Ro.lineEnd=au},result:function(){var Te=cl?[Bu/cl,ll/cl]:Ns?[ju/Ns,fo/Ns]:Pu?[gs/Pu,Cs/Pu]:[NaN,NaN];return gs=Cs=Pu=ju=fo=Ns=Bu=ll=cl=0,Te}};function pu(we,Te){gs+=we,Cs+=Te,++Pu}function Ml(){Ro.point=Fs}function Fs(we,Te){Ro.point=Ss,pu(Ra=we,Ea=Te)}function Ss(we,Te){var dn=we-Ra,tn=Te-Ea,wn=R(dn*dn+tn*tn);ju+=wn*(Ra+we)/2,fo+=wn*(Ea+Te)/2,Ns+=wn,pu(Ra=we,Ea=Te)}function au(){Ro.point=pu}function qs(){Ro.point=Ju}function Ds(){ou(Xu,Io)}function Ju(we,Te){Ro.point=ou,pu(Xu=Ra=we,Io=Ea=Te)}function ou(we,Te){var dn=we-Ra,tn=Te-Ea,wn=R(dn*dn+tn*tn);ju+=wn*(Ra+we)/2,fo+=wn*(Ea+Te)/2,Ns+=wn,wn=Ea*we-Ra*Te,Bu+=wn*(Ra+we),ll+=wn*(Ea+Te),cl+=wn*3,pu(Ra=we,Ea=Te)}function Wa(we){this._context=we}Wa.prototype={_radius:4.5,pointRadius:function(Te){return this._radius=Te,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(Te,dn){switch(this._point){case 0:{this._context.moveTo(Te,dn),this._point=1;break}case 1:{this._context.lineTo(Te,dn);break}default:{this._context.moveTo(Te+this._radius,dn),this._context.arc(Te,dn,this._radius,0,f);break}}},result:k};var Pl=s(),$l,Tl,Ql,Nu,Ha,su={point:k,lineStart:function(){su.point=Al},lineEnd:function(){$l&&ms(Tl,Ql),su.point=k},polygonStart:function(){$l=!0},polygonEnd:function(){$l=null},result:function(){var Te=+Pl;return Pl.reset(),Te}};function Al(we,Te){su.point=ms,Tl=Nu=we,Ql=Ha=Te}function ms(we,Te){Nu-=we,Ha-=Te,Pl.add(R(Nu*Nu+Ha*Ha)),Nu=we,Ha=Te}function Tu(){this._string=[]}Tu.prototype={_radius:4.5,_circle:gu(4.5),pointRadius:function(Te){return(Te=+Te)!==this._radius&&(this._radius=Te,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(Te,dn){switch(this._point){case 0:{this._string.push("M",Te,",",dn),this._point=1;break}case 1:{this._string.push("L",Te,",",dn);break}default:{this._circle==null&&(this._circle=gu(this._radius)),this._string.push("M",Te,",",dn,this._circle);break}}},result:function(){if(this._string.length){var Te=this._string.join("");return this._string=[],Te}else return null}};function gu(we){return"m0,"+we+"a"+we+","+we+" 0 1,1 0,"+-2*we+"a"+we+","+we+" 0 1,1 0,"+2*we+"z"}var Fu=function(Te,dn){var tn=4.5,wn,vr;function Lr(Kr){return Kr&&(typeof tn=="function"&&vr.pointRadius(+tn.apply(this,arguments)),ut(Kr,wn(vr))),vr.result()}return Lr.area=function(Kr){return ut(Kr,wn(to)),to.result()},Lr.measure=function(Kr){return ut(Kr,wn(su)),su.result()},Lr.bounds=function(Kr){return ut(Kr,wn(ps)),ps.result()},Lr.centroid=function(Kr){return ut(Kr,wn(Ro)),Ro.result()},Lr.projection=function(Kr){return arguments.length?(wn=Kr==null?(Te=null,dr):(Te=Kr).stream,Lr):Te},Lr.context=function(Kr){return arguments.length?(vr=Kr==null?(dn=null,new Tu):new Wa(dn=Kr),typeof tn!="function"&&vr.pointRadius(tn),Lr):dn},Lr.pointRadius=function(Kr){return arguments.length?(tn=typeof Kr=="function"?Kr:(vr.pointRadius(+Kr),+Kr),Lr):tn},Lr.projection(Te).context(dn)},Hs=function(Te,dn,tn,wn){return function(vr,Lr){var Kr=dn(Lr),ti=vr.invert(wn[0],wn[1]),Fr=To(),ui=dn(Fr),br=!1,Zt,te,Le,_e={point:Rt,lineStart:se,lineEnd:re,polygonStart:function(){_e.point=ce,_e.lineStart=Fe,_e.lineEnd=Ke,te=[],Zt=[]},polygonEnd:function(){_e.point=Rt,_e.lineStart=se,_e.lineEnd=re,te=l.merge(te);var Je=Wt(Zt,ti);te.length?(br||(Lr.polygonStart(),br=!0),Bo(te,fs,Je,tn,Lr)):Je&&(br||(Lr.polygonStart(),br=!0),Lr.lineStart(),tn(null,null,1,Lr),Lr.lineEnd()),br&&(Lr.polygonEnd(),br=!1),te=Zt=null},sphere:function(){Lr.polygonStart(),Lr.lineStart(),tn(null,null,1,Lr),Lr.lineEnd(),Lr.polygonEnd()}};function Rt(rn,Je){var vn=vr(rn,Je);Te(rn=vn[0],Je=vn[1])&&Lr.point(rn,Je)}function zt(rn,Je){var vn=vr(rn,Je);Kr.point(vn[0],vn[1])}function se(){_e.point=zt,Kr.lineStart()}function re(){_e.point=Rt,Kr.lineEnd()}function ce(rn,Je){Le.push([rn,Je]);var vn=vr(rn,Je);ui.point(vn[0],vn[1])}function Fe(){ui.lineStart(),Le=[]}function Ke(){ce(Le[0][0],Le[0][1]),ui.lineEnd();var rn=ui.clean(),Je=Fr.result(),vn,hn=Je.length,Jn,Vn,Zn;if(Le.pop(),Zt.push(Le),Le=null,!!hn){if(rn&1){if(Vn=Je[0],(Jn=Vn.length-1)>0){for(br||(Lr.polygonStart(),br=!0),Lr.lineStart(),vn=0;vn<Jn;++vn)Lr.point((Zn=Vn[vn])[0],Zn[1]);Lr.lineEnd()}return}hn>1&&rn&2&&Je.push(Je.pop().concat(Je.shift())),te.push(Je.filter($o))}}return _e}};function $o(we){return we.length>1}function fs(we,Te){return((we=we.x)[0]<0?we[1]-o-n:o-we[1])-((Te=Te.x)[0]<0?Te[1]-o-n:o-Te[1])}var fl=Hs(function(){return!0},zl,zu,[-a,-o]);function zl(we){var Te=NaN,dn=NaN,tn=NaN,wn;return{lineStart:function(){we.lineStart(),wn=1},point:function(Lr,Kr){var ti=Lr>0?a:-a,Fr=y(Lr-Te);y(Fr-a)<n?(we.point(Te,dn=(dn+Kr)/2>0?o:-o),we.point(tn,dn),we.lineEnd(),we.lineStart(),we.point(ti,dn),we.point(Lr,dn),wn=0):tn!==ti&&Fr>=a&&(y(Te-tn)<n&&(Te-=tn*n),y(Lr-ti)<n&&(Lr-=ti*n),dn=ql(Te,dn,Lr,Kr),we.point(tn,dn),we.lineEnd(),we.lineStart(),we.point(ti,dn),wn=0),we.point(Te=Lr,dn=Kr),tn=ti},lineEnd:function(){we.lineEnd(),Te=dn=NaN},clean:function(){return 2-wn}}}function ql(we,Te,dn,tn){var wn,vr,Lr=A(we-dn);return y(Lr)>n?g((A(Te)*(vr=M(tn))*A(dn)-A(tn)*(wn=M(Te))*A(we))/(wn*vr*Lr)):(Te+tn)/2}function zu(we,Te,dn,tn){var wn;if(we==null)wn=dn*o,tn.point(-a,wn),tn.point(0,wn),tn.point(a,wn),tn.point(a,0),tn.point(a,-wn),tn.point(0,-wn),tn.point(-a,-wn),tn.point(-a,0),tn.point(-a,wn);else if(y(we[0]-Te[0])>n){var vr=we[0]<Te[0]?a:-a;wn=dn*vr/2,tn.point(-vr,wn),tn.point(0,wn),tn.point(vr,wn)}else tn.point(Te[0],Te[1])}var $u=function(Te,dn){var tn=M(Te),wn=tn>0,vr=y(tn)>n;function Lr(br,Zt,te,Le){co(Le,Te,dn,te,br,Zt)}function Kr(br,Zt){return M(br)*M(Zt)>tn}function ti(br){var Zt,te,Le,_e,Rt;return{lineStart:function(){_e=Le=!1,Rt=1},point:function(se,re){var ce=[se,re],Fe,Ke=Kr(se,re),rn=wn?Ke?0:ui(se,re):Ke?ui(se+(se<0?a:-a),re):0;if(!Zt&&(_e=Le=Ke)&&br.lineStart(),Ke!==Le&&(Fe=Fr(Zt,ce),(!Fe||La(Zt,Fe)||La(ce,Fe))&&(ce[0]+=n,ce[1]+=n,Ke=Kr(ce[0],ce[1]))),Ke!==Le)Rt=0,Ke?(br.lineStart(),Fe=Fr(ce,Zt),br.point(Fe[0],Fe[1])):(Fe=Fr(Zt,ce),br.point(Fe[0],Fe[1]),br.lineEnd()),Zt=Fe;else if(vr&&Zt&&wn^Ke){var Je;!(rn&te)&&(Je=Fr(ce,Zt,!0))&&(Rt=0,wn?(br.lineStart(),br.point(Je[0][0],Je[0][1]),br.point(Je[1][0],Je[1][1]),br.lineEnd()):(br.point(Je[1][0],Je[1][1]),br.lineEnd(),br.lineStart(),br.point(Je[0][0],Je[0][1])))}Ke&&(!Zt||!La(Zt,ce))&&br.point(ce[0],ce[1]),Zt=ce,Le=Ke,te=rn},lineEnd:function(){Le&&br.lineEnd(),Zt=null},clean:function(){return Rt|(_e&&Le)<<1}}}function Fr(br,Zt,te){var Le=H(br),_e=H(Zt),Rt=[1,0,0],zt=at(Le,_e),se=nt(zt,zt),re=zt[0],ce=se-re*re;if(!ce)return!te&&br;var Fe=tn*se/ce,Ke=-tn*re/ce,rn=at(Rt,zt),Je=Et(Rt,Fe),vn=Et(zt,Ke);q(Je,vn);var hn=rn,Jn=nt(Je,hn),Vn=nt(hn,hn),Zn=Jn*Jn-Vn*(nt(Je,Je)-1);if(!(Zn<0)){var Wn=R(Zn),lr=Et(hn,(-Jn-Wn)/Vn);if(q(lr,Je),lr=pt(lr),!te)return lr;var xr=br[0],Vr=Zt[0],yi=br[1],Br=Zt[1],si;Vr<xr&&(si=xr,xr=Vr,Vr=si);var gi=Vr-xr,Zi=y(gi-a)<n,Li=Zi||gi<n;if(!Zi&&Br<yi&&(si=yi,yi=Br,Br=si),Li?Zi?yi+Br>0^lr[1]<(y(lr[0]-xr)<n?yi:Br):yi<=lr[1]&&lr[1]<=Br:gi>a^(xr<=lr[0]&&lr[0]<=Vr)){var Ma=Et(hn,(-Jn+Wn)/Vn);return q(Ma,Je),[lr,pt(Ma)]}}}function ui(br,Zt){var te=wn?Te:a-Te,Le=0;return br<-te?Le|=1:br>te&&(Le|=2),Zt<-te?Le|=4:Zt>te&&(Le|=8),Le}return Hs(Kr,ti,Lr,wn?[0,-Te]:[-a,Te-a])},Au=function(Te){return{stream:Cu(Te)}};function Cu(we){return function(Te){var dn=new mu;for(var tn in we)dn[tn]=we[tn];return dn.stream=Te,dn}}function mu(){}mu.prototype={constructor:mu,point:function(Te,dn){this.stream.point(Te,dn)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Uu(we,Te,dn){var tn=Te[1][0]-Te[0][0],wn=Te[1][1]-Te[0][1],vr=we.clipExtent&&we.clipExtent();we.scale(150).translate([0,0]),vr!=null&&we.clipExtent(null),ut(dn,we.stream(ps));var Lr=ps.result(),Kr=Math.min(tn/(Lr[1][0]-Lr[0][0]),wn/(Lr[1][1]-Lr[0][1])),ti=+Te[0][0]+(tn-Kr*(Lr[1][0]+Lr[0][0]))/2,Fr=+Te[0][1]+(wn-Kr*(Lr[1][1]+Lr[0][1]))/2;return vr!=null&&we.clipExtent(vr),we.scale(Kr*150).translate([ti,Fr])}function zs(we,Te,dn){return Uu(we,[[0,0],Te],dn)}var Ul=16,gc=M(30*b),Cl=function(Te,dn){return+dn?Gl(Te,dn):kl(Te)};function kl(we){return Cu({point:function(dn,tn){dn=we(dn,tn),this.stream.point(dn[0],dn[1])}})}function Gl(we,Te){function dn(tn,wn,vr,Lr,Kr,ti,Fr,ui,br,Zt,te,Le,_e,Rt){var zt=Fr-tn,se=ui-wn,re=zt*zt+se*se;if(re>4*Te&&_e--){var ce=Lr+Zt,Fe=Kr+te,Ke=ti+Le,rn=R(ce*ce+Fe*Fe+Ke*Ke),Je=Z(Ke/=rn),vn=y(y(Ke)-1)<n||y(vr-br)<n?(vr+br)/2:_(Fe,ce),hn=we(vn,Je),Jn=hn[0],Vn=hn[1],Zn=Jn-tn,Wn=Vn-wn,lr=se*Zn-zt*Wn;(lr*lr/re>Te||y((zt*Zn+se*Wn)/re-.5)>.3||Lr*Zt+Kr*te+ti*Le<gc)&&(dn(tn,wn,vr,Lr,Kr,ti,Jn,Vn,vn,ce/=rn,Fe/=rn,Ke,_e,Rt),Rt.point(Jn,Vn),dn(Jn,Vn,vn,ce,Fe,Ke,Fr,ui,br,Zt,te,Le,_e,Rt))}}return function(tn){var wn,vr,Lr,Kr,ti,Fr,ui,br,Zt,te,Le,_e,Rt={point:zt,lineStart:se,lineEnd:ce,polygonStart:function(){tn.polygonStart(),Rt.lineStart=Fe},polygonEnd:function(){tn.polygonEnd(),Rt.lineStart=se}};function zt(Je,vn){Je=we(Je,vn),tn.point(Je[0],Je[1])}function se(){br=NaN,Rt.point=re,tn.lineStart()}function re(Je,vn){var hn=H([Je,vn]),Jn=we(Je,vn);dn(br,Zt,ui,te,Le,_e,br=Jn[0],Zt=Jn[1],ui=Je,te=hn[0],Le=hn[1],_e=hn[2],Ul,tn),tn.point(br,Zt)}function ce(){Rt.point=zt,tn.lineEnd()}function Fe(){se(),Rt.point=Ke,Rt.lineEnd=rn}function Ke(Je,vn){re(wn=Je,vn),vr=br,Lr=Zt,Kr=te,ti=Le,Fr=_e,Rt.point=re}function rn(){dn(br,Zt,ui,te,Le,_e,vr,Lr,wn,Kr,ti,Fr,Ul,tn),Rt.lineEnd=ce,ce()}return Rt}}var cc=Cu({point:function(Te,dn){this.stream.point(Te*b,dn*b)}});function Qu(we){return Ol(function(){return we})()}function Ol(we){var Te,dn=150,tn=480,wn=250,vr,Lr,Kr=0,ti=0,Fr=0,ui=0,br=0,Zt,te,Le=null,_e=fl,Rt=null,zt,se,re,ce=dr,Fe=.5,Ke=Cl(Jn,Fe),rn,Je;function vn(Wn){return Wn=te(Wn[0]*b,Wn[1]*b),[Wn[0]*dn+vr,Lr-Wn[1]*dn]}function hn(Wn){return Wn=te.invert((Wn[0]-vr)/dn,(Lr-Wn[1])/dn),Wn&&[Wn[0]*v,Wn[1]*v]}function Jn(Wn,lr){return Wn=Te(Wn,lr),[Wn[0]*dn+vr,Lr-Wn[1]*dn]}vn.stream=function(Wn){return rn&&Je===Wn?rn:rn=cc(_e(Zt,Ke(ce(Je=Wn))))},vn.clipAngle=function(Wn){return arguments.length?(_e=+Wn?$u(Le=Wn*b,6*b):(Le=null,fl),Zn()):Le*v},vn.clipExtent=function(Wn){return arguments.length?(ce=Wn==null?(Rt=zt=se=re=null,dr):$s(Rt=+Wn[0][0],zt=+Wn[0][1],se=+Wn[1][0],re=+Wn[1][1]),Zn()):Rt==null?null:[[Rt,zt],[se,re]]},vn.scale=function(Wn){return arguments.length?(dn=+Wn,Vn()):dn},vn.translate=function(Wn){return arguments.length?(tn=+Wn[0],wn=+Wn[1],Vn()):[tn,wn]},vn.center=function(Wn){return arguments.length?(Kr=Wn[0]%360*b,ti=Wn[1]%360*b,Vn()):[Kr*v,ti*v]},vn.rotate=function(Wn){return arguments.length?(Fr=Wn[0]%360*b,ui=Wn[1]%360*b,br=Wn.length>2?Wn[2]%360*b:0,Vn()):[Fr*v,ui*v,br*v]},vn.precision=function(Wn){return arguments.length?(Ke=Cl(Jn,Fe=Wn*Wn),Zn()):R(Fe)},vn.fitExtent=function(Wn,lr){return Uu(vn,Wn,lr)},vn.fitSize=function(Wn,lr){return zs(vn,Wn,lr)};function Vn(){te=zr(Zt=Oa(Fr,ui,br),Te);var Wn=Te(Kr,ti);return vr=tn-Wn[0]*dn,Lr=wn+Wn[1]*dn,Zn()}function Zn(){return rn=Je=null,vn}return function(){return Te=we.apply(this,arguments),vn.invert=Te.invert&&hn,Vn()}}function Vl(we){var Te=0,dn=a/3,tn=Ol(we),wn=tn(Te,dn);return wn.parallels=function(vr){return arguments.length?tn(Te=vr[0]*b,dn=vr[1]*b):[Te*v,dn*v]},wn}function tu(we){var Te=M(we);function dn(tn,wn){return[tn*Te,A(wn)/Te]}return dn.invert=function(tn,wn){return[tn/Te,Z(wn*Te)]},dn}function go(we,Te){var dn=A(we),tn=(dn+A(Te))/2;if(y(tn)<n)return tu(we);var wn=1+dn*(2*tn-dn),vr=R(wn)/tn;function Lr(Kr,ti){var Fr=R(wn-2*tn*A(ti))/tn;return[Fr*A(Kr*=tn),vr-Fr*M(Kr)]}return Lr.invert=function(Kr,ti){var Fr=vr-ti;return[_(Kr,y(Fr))/tn*O(Fr),Z((wn-(Kr*Kr+Fr*Fr)*tn*tn)/(2*tn))]},Lr}var gl=function(){return Vl(go).scale(155.424).center([0,33.6442])},hl=function(){return gl().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])};function Ys(we){var Te=we.length;return{point:function(tn,wn){for(var vr=-1;++vr<Te;)we[vr].point(tn,wn)},sphere:function(){for(var tn=-1;++tn<Te;)we[tn].sphere()},lineStart:function(){for(var tn=-1;++tn<Te;)we[tn].lineStart()},lineEnd:function(){for(var tn=-1;++tn<Te;)we[tn].lineEnd()},polygonStart:function(){for(var tn=-1;++tn<Te;)we[tn].polygonStart()},polygonEnd:function(){for(var tn=-1;++tn<Te;)we[tn].polygonEnd()}}}var Na=function(){var Te,dn,tn=hl(),wn,vr=gl().rotate([154,0]).center([-2,58.5]).parallels([55,65]),Lr,Kr=gl().rotate([157,0]).center([-3,19.9]).parallels([8,18]),ti,Fr,ui={point:function(Le,_e){Fr=[Le,_e]}};function br(te){var Le=te[0],_e=te[1];return Fr=null,wn.point(Le,_e),Fr||(Lr.point(Le,_e),Fr)||(ti.point(Le,_e),Fr)}br.invert=function(te){var Le=tn.scale(),_e=tn.translate(),Rt=(te[0]-_e[0])/Le,zt=(te[1]-_e[1])/Le;return(zt>=.12&&zt<.234&&Rt>=-.425&&Rt<-.214?vr:zt>=.166&&zt<.234&&Rt>=-.214&&Rt<-.115?Kr:tn).invert(te)},br.stream=function(te){return Te&&dn===te?Te:Te=Ys([tn.stream(dn=te),vr.stream(te),Kr.stream(te)])},br.precision=function(te){return arguments.length?(tn.precision(te),vr.precision(te),Kr.precision(te),Zt()):tn.precision()},br.scale=function(te){return arguments.length?(tn.scale(te),vr.scale(te*.35),Kr.scale(te),br.translate(tn.translate())):tn.scale()},br.translate=function(te){if(!arguments.length)return tn.translate();var Le=tn.scale(),_e=+te[0],Rt=+te[1];return wn=tn.translate(te).clipExtent([[_e-.455*Le,Rt-.238*Le],[_e+.455*Le,Rt+.238*Le]]).stream(ui),Lr=vr.translate([_e-.307*Le,Rt+.201*Le]).clipExtent([[_e-.425*Le+n,Rt+.12*Le+n],[_e-.214*Le-n,Rt+.234*Le-n]]).stream(ui),ti=Kr.translate([_e-.205*Le,Rt+.212*Le]).clipExtent([[_e-.214*Le+n,Rt+.166*Le+n],[_e-.115*Le-n,Rt+.234*Le-n]]).stream(ui),Zt()},br.fitExtent=function(te,Le){return Uu(br,te,Le)},br.fitSize=function(te,Le){return zs(br,te,Le)};function Zt(){return Te=dn=null,br}return br.scale(1070)};function _o(we){return function(Te,dn){var tn=M(Te),wn=M(dn),vr=we(tn*wn);return[vr*wn*A(Te),vr*A(dn)]}}function Us(we){return function(Te,dn){var tn=R(Te*Te+dn*dn),wn=we(tn),vr=A(wn),Lr=M(wn);return[_(Te*vr,tn*Lr),Z(tn&&dn*vr/tn)]}}var ml=_o(function(we){return R(2/(1+we))});ml.invert=Us(function(we){return 2*Z(we/2)});var qu=function(){return Qu(ml).scale(124.75).clipAngle(180-.001)},ku=_o(function(we){return(we=F(we))&&we/A(we)});ku.invert=Us(function(we){return we});var mc=function(){return Qu(ku).scale(79.4188).clipAngle(180-.001)};function Os(we,Te){return[we,S(W((o+Te)/2))]}Os.invert=function(we,Te){return[we,2*g(m(Te))-o]};var tl=function(){return uu(Os).scale(961/f)};function uu(we){var Te=Qu(we),dn=Te.center,tn=Te.scale,wn=Te.translate,vr=Te.clipExtent,Lr=null,Kr,ti,Fr;Te.scale=function(br){return arguments.length?(tn(br),ui()):tn()},Te.translate=function(br){return arguments.length?(wn(br),ui()):wn()},Te.center=function(br){return arguments.length?(dn(br),ui()):dn()},Te.clipExtent=function(br){return arguments.length?(br==null?Lr=Kr=ti=Fr=null:(Lr=+br[0][0],Kr=+br[0][1],ti=+br[1][0],Fr=+br[1][1]),ui()):Lr==null?null:[[Lr,Kr],[ti,Fr]]};function ui(){var br=a*tn(),Zt=Te(_a(Te.rotate()).invert([0,0]));return vr(Lr==null?[[Zt[0]-br,Zt[1]-br],[Zt[0]+br,Zt[1]+br]]:we===Os?[[Math.max(Zt[0]-br,Lr),Kr],[Math.min(Zt[0]+br,ti),Fr]]:[[Lr,Math.max(Zt[1]-br,Kr)],[ti,Math.min(Zt[1]+br,Fr)]])}return ui()}function Zs(we){return W((o+we)/2)}function Qo(we,Te){var dn=M(we),tn=we===Te?A(we):S(dn/M(Te))/S(Zs(Te)/Zs(we)),wn=dn*P(Zs(we),tn)/tn;if(!tn)return Os;function vr(Lr,Kr){wn>0?Kr<-o+n&&(Kr=-o+n):Kr>o-n&&(Kr=o-n);var ti=wn/P(Zs(Kr),tn);return[ti*A(tn*Lr),wn-ti*M(tn*Lr)]}return vr.invert=function(Lr,Kr){var ti=wn-Kr,Fr=O(tn)*R(Lr*Lr+ti*ti);return[_(Lr,y(ti))/tn*O(ti),2*g(P(wn/Fr,1/tn))-o]},vr}var eu=function(){return Vl(Qo).scale(109.5).parallels([30,30])};function Ou(we,Te){return[we,Te]}Ou.invert=Ou;var qo=function(){return Qu(Ou).scale(152.63)};function Wi(we,Te){var dn=M(we),tn=we===Te?A(we):(dn-M(Te))/(Te-we),wn=dn/tn+we;if(y(tn)<n)return Ou;function vr(Lr,Kr){var ti=wn-Kr,Fr=tn*Lr;return[ti*A(Fr),wn-ti*M(Fr)]}return vr.invert=function(Lr,Kr){var ti=wn-Kr;return[_(Lr,y(ti))/tn*O(ti),wn-O(tn)*R(Lr*Lr+ti*ti)]},vr}var ws=function(){return Vl(Wi).scale(131.154).center([0,13.9389])};function Gu(we,Te){var dn=M(Te),tn=M(we)*dn;return[dn*A(we)/tn,A(Te)/tn]}Gu.invert=Us(g);var wu=function(){return Qu(Gu).scale(144.049).clipAngle(60)};function Fo(we,Te,dn,tn){return we===1&&Te===1&&dn===0&&tn===0?dr:Cu({point:function(vr,Lr){this.stream.point(vr*we+dn,Lr*Te+tn)}})}var ko=function(){var Te=1,dn=0,tn=0,wn=1,vr=1,Lr=dr,Kr=null,ti,Fr,ui,br=dr,Zt,te,Le;function _e(){return Zt=te=null,Le}return Le={stream:function(zt){return Zt&&te===zt?Zt:Zt=Lr(br(te=zt))},clipExtent:function(zt){return arguments.length?(br=zt==null?(Kr=ti=Fr=ui=null,dr):$s(Kr=+zt[0][0],ti=+zt[0][1],Fr=+zt[1][0],ui=+zt[1][1]),_e()):Kr==null?null:[[Kr,ti],[Fr,ui]]},scale:function(zt){return arguments.length?(Lr=Fo((Te=+zt)*wn,Te*vr,dn,tn),_e()):Te},translate:function(zt){return arguments.length?(Lr=Fo(Te*wn,Te*vr,dn=+zt[0],tn=+zt[1]),_e()):[dn,tn]},reflectX:function(zt){return arguments.length?(Lr=Fo(Te*(wn=zt?-1:1),Te*vr,dn,tn),_e()):wn<0},reflectY:function(zt){return arguments.length?(Lr=Fo(Te*wn,Te*(vr=zt?-1:1),dn,tn),_e()):vr<0},fitExtent:function(zt,se){return Uu(Le,zt,se)},fitSize:function(zt,se){return zs(Le,zt,se)}}};function Eu(we,Te){return[M(Te)*A(we),A(Te)]}Eu.invert=Us(Z);var Mi=function(){return Qu(Eu).scale(249.5).clipAngle(90+n)};function el(we,Te){var dn=M(Te),tn=1+M(we)*dn;return[dn*A(we)/tn,A(Te)/tn]}el.invert=Us(function(we){return 2*g(we)});var Iu=function(){return Qu(el).scale(250).clipAngle(142)};function Lu(we,Te){return[S(W((o+Te)/2)),-we]}Lu.invert=function(we,Te){return[-Te,2*g(m(we))-o]};var nu=function(){var Te=uu(Lu),dn=Te.center,tn=Te.rotate;return Te.center=function(wn){return arguments.length?dn([-wn[1],wn[0]]):(wn=dn(),[wn[1],-wn[0]])},Te.rotate=function(wn){return arguments.length?tn([wn[0],wn[1],wn.length>2?wn[2]+90:90]):(wn=tn(),[wn[0],wn[1],wn[2]-90])},tn([0,0,90]).scale(159.155)};t.geoArea=ot,t.geoBounds=Jt,t.geoCentroid=Rr,t.geoCircle=io,t.geoClipExtent=Ne,t.geoContains=Co,t.geoDistance=bo,t.geoGraticule=ls,t.geoGraticule10=wa,t.geoInterpolate=yn,t.geoLength=sa,t.geoPath=Fu,t.geoAlbers=hl,t.geoAlbersUsa=Na,t.geoAzimuthalEqualArea=qu,t.geoAzimuthalEqualAreaRaw=ml,t.geoAzimuthalEquidistant=mc,t.geoAzimuthalEquidistantRaw=ku,t.geoConicConformal=eu,t.geoConicConformalRaw=Qo,t.geoConicEqualArea=gl,t.geoConicEqualAreaRaw=go,t.geoConicEquidistant=ws,t.geoConicEquidistantRaw=Wi,t.geoEquirectangular=qo,t.geoEquirectangularRaw=Ou,t.geoGnomonic=wu,t.geoGnomonicRaw=Gu,t.geoIdentity=ko,t.geoProjection=Qu,t.geoProjectionMutator=Ol,t.geoMercator=tl,t.geoMercatorRaw=Os,t.geoOrthographic=Mi,t.geoOrthographicRaw=Eu,t.geoStereographic=Iu,t.geoStereographicRaw=el,t.geoTransverseMercator=nu,t.geoTransverseMercatorRaw=Lu,t.geoRotation=_a,t.geoStream=ut,t.geoTransform=Au,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-geo@2.0.1@d3-geo/dist/d3-geo.js":function(E,T,e){(function(t,l){l(T,e("./node_modules/_d3-array@2.11.0@d3-array/dist/d3-array.js"))})(this,function(t,l){"use strict";var s=1e-6,c=1e-12,r=Math.PI,h=r/2,n=r/4,i=r*2,a=180/r,o=r/180,u=Math.abs,f=Math.atan,v=Math.atan2,b=Math.cos,y=Math.ceil,g=Math.exp,_=Math.hypot,M=Math.log,x=Math.pow,m=Math.sin,S=Math.sign||function(Zt){return Zt>0?1:Zt<0?-1:0},P=Math.sqrt,A=Math.tan;function O(Zt){return Zt>1?0:Zt<-1?r:Math.acos(Zt)}function R(Zt){return Zt>1?h:Zt<-1?-h:Math.asin(Zt)}function W(Zt){return(Zt=m(Zt/2))*Zt}function F(){}function Z(Zt,te){Zt&&k.hasOwnProperty(Zt.type)&&k[Zt.type](Zt,te)}var V={Feature:function(te,Le){Z(te.geometry,Le)},FeatureCollection:function(te,Le){for(var _e=te.features,Rt=-1,zt=_e.length;++Rt<zt;)Z(_e[Rt].geometry,Le)}},k={Sphere:function(te,Le){Le.sphere()},Point:function(te,Le){te=te.coordinates,Le.point(te[0],te[1],te[2])},MultiPoint:function(te,Le){for(var _e=te.coordinates,Rt=-1,zt=_e.length;++Rt<zt;)te=_e[Rt],Le.point(te[0],te[1],te[2])},LineString:function(te,Le){Y(te.coordinates,Le,0)},MultiLineString:function(te,Le){for(var _e=te.coordinates,Rt=-1,zt=_e.length;++Rt<zt;)Y(_e[Rt],Le,0)},Polygon:function(te,Le){K(te.coordinates,Le)},MultiPolygon:function(te,Le){for(var _e=te.coordinates,Rt=-1,zt=_e.length;++Rt<zt;)K(_e[Rt],Le)},GeometryCollection:function(te,Le){for(var _e=te.geometries,Rt=-1,zt=_e.length;++Rt<zt;)Z(_e[Rt],Le)}};function Y(Zt,te,Le){var _e=-1,Rt=Zt.length-Le,zt;for(te.lineStart();++_e<Rt;)zt=Zt[_e],te.point(zt[0],zt[1],zt[2]);te.lineEnd()}function K(Zt,te){var Le=-1,_e=Zt.length;for(te.polygonStart();++Le<_e;)Y(Zt[Le],te,1);te.polygonEnd()}function it(Zt,te){Zt&&V.hasOwnProperty(Zt.type)?V[Zt.type](Zt,te):Z(Zt,te)}var ct=new l.Adder,ht=new l.Adder,ut,It,Nt,Lt,_t,mt={point:F,lineStart:F,lineEnd:F,polygonStart:function(){ct=new l.Adder,mt.lineStart=At,mt.lineEnd=rt},polygonEnd:function(){var te=+ct;ht.add(te<0?i+te:te),this.lineStart=this.lineEnd=this.point=F},sphere:function(){ht.add(i)}};function At(){mt.point=Mt}function rt(){z(ut,It)}function Mt(Zt,te){mt.point=z,ut=Zt,It=te,Zt*=o,te*=o,Nt=Zt,Lt=b(te=te/2+n),_t=m(te)}function z(Zt,te){Zt*=o,te*=o,te=te/2+n;var Le=Zt-Nt,_e=Le>=0?1:-1,Rt=_e*Le,zt=b(te),se=m(te),re=_t*se,ce=Lt*zt+re*b(Rt),Fe=re*_e*m(Rt);ct.add(v(Fe,ce)),Nt=Zt,Lt=zt,_t=se}function $(Zt){return ht=new l.Adder,it(Zt,mt),ht*2}function dt(Zt){return[v(Zt[1],Zt[0]),R(Zt[2])]}function et(Zt){var te=Zt[0],Le=Zt[1],_e=b(Le);return[_e*b(te),_e*m(te),m(Le)]}function ot(Zt,te){return Zt[0]*te[0]+Zt[1]*te[1]+Zt[2]*te[2]}function pt(Zt,te){return[Zt[1]*te[2]-Zt[2]*te[1],Zt[2]*te[0]-Zt[0]*te[2],Zt[0]*te[1]-Zt[1]*te[0]]}function H(Zt,te){Zt[0]+=te[0],Zt[1]+=te[1],Zt[2]+=te[2]}function nt(Zt,te){return[Zt[0]*te,Zt[1]*te,Zt[2]*te]}function at(Zt){var te=P(Zt[0]*Zt[0]+Zt[1]*Zt[1]+Zt[2]*Zt[2]);Zt[0]/=te,Zt[1]/=te,Zt[2]/=te}var q,Et,vt,Ft,Qt,ee,Gt,$t,Pe,me,le,be={point:ze,lineStart:_n,lineEnd:Kn,polygonStart:function(){be.point=Hn,be.lineStart=nn,be.lineEnd=en,Pe=new l.Adder,mt.polygonStart()},polygonEnd:function(){mt.polygonEnd(),be.point=ze,be.lineStart=_n,be.lineEnd=Kn,ct<0?(q=-(vt=180),Et=-(Ft=90)):Pe>s?Ft=90:Pe<-s&&(Et=-90),le[0]=q,le[1]=vt},sphere:function(){q=-(vt=180),Et=-(Ft=90)}};function ze(Zt,te){me.push(le=[q=Zt,vt=Zt]),te<Et&&(Et=te),te>Ft&&(Ft=te)}function Xe(Zt,te){var Le=et([Zt*o,te*o]);if($t){var _e=pt($t,Le),Rt=[_e[1],-_e[0],0],zt=pt(Rt,_e);at(zt),zt=dt(zt);var se=Zt-Qt,re=se>0?1:-1,ce=zt[0]*a*re,Fe,Ke=u(se)>180;Ke^(re*Qt<ce&&ce<re*Zt)?(Fe=zt[1]*a,Fe>Ft&&(Ft=Fe)):(ce=(ce+360)%360-180,Ke^(re*Qt<ce&&ce<re*Zt)?(Fe=-zt[1]*a,Fe<Et&&(Et=Fe)):(te<Et&&(Et=te),te>Ft&&(Ft=te))),Ke?Zt<Qt?An(q,Zt)>An(q,vt)&&(vt=Zt):An(Zt,vt)>An(q,vt)&&(q=Zt):vt>=q?(Zt<q&&(q=Zt),Zt>vt&&(vt=Zt)):Zt>Qt?An(q,Zt)>An(q,vt)&&(vt=Zt):An(Zt,vt)>An(q,vt)&&(q=Zt)}else me.push(le=[q=Zt,vt=Zt]);te<Et&&(Et=te),te>Ft&&(Ft=te),$t=Le,Qt=Zt}function _n(){be.point=Xe}function Kn(){le[0]=q,le[1]=vt,be.point=ze,$t=null}function Hn(Zt,te){if($t){var Le=Zt-Qt;Pe.add(u(Le)>180?Le+(Le>0?360:-360):Le)}else ee=Zt,Gt=te;mt.point(Zt,te),Xe(Zt,te)}function nn(){mt.lineStart()}function en(){Hn(ee,Gt),mt.lineEnd(),u(Pe)>s&&(q=-(vt=180)),le[0]=q,le[1]=vt,$t=null}function An(Zt,te){return(te-=Zt)<0?te+360:te}function Nn(Zt,te){return Zt[0]-te[0]}function hr(Zt,te){return Zt[0]<=Zt[1]?Zt[0]<=te&&te<=Zt[1]:te<Zt[0]||Zt[1]<te}function fi(Zt){var te,Le,_e,Rt,zt,se,re;if(Ft=vt=-(q=Et=Infinity),me=[],it(Zt,be),Le=me.length){for(me.sort(Nn),te=1,_e=me[0],zt=[_e];te<Le;++te)Rt=me[te],hr(_e,Rt[0])||hr(_e,Rt[1])?(An(_e[0],Rt[1])>An(_e[0],_e[1])&&(_e[1]=Rt[1]),An(Rt[0],_e[1])>An(_e[0],_e[1])&&(_e[0]=Rt[0])):zt.push(_e=Rt);for(se=-Infinity,Le=zt.length-1,te=0,_e=zt[Le];te<=Le;_e=Rt,++te)Rt=zt[te],(re=An(_e[1],Rt[0]))>se&&(se=re,q=Rt[0],vt=_e[1])}return me=le=null,q===Infinity||Et===Infinity?[[NaN,NaN],[NaN,NaN]]:[[q,Et],[vt,Ft]]}var Oe,Ae,Jt,ve,Vt,ie,Ce,ue,xe,$e,Fn,rr,En,Pn,Er,Pr,ln={sphere:F,point:Cr,lineStart:je,lineEnd:fn,polygonStart:function(){ln.lineStart=mn,ln.lineEnd=jn},polygonEnd:function(){ln.lineStart=je,ln.lineEnd=fn}};function Cr(Zt,te){Zt*=o,te*=o;var Le=b(te);Ar(Le*b(Zt),Le*m(Zt),m(te))}function Ar(Zt,te,Le){++Oe,Jt+=(Zt-Jt)/Oe,ve+=(te-ve)/Oe,Vt+=(Le-Vt)/Oe}function je(){ln.point=We}function We(Zt,te){Zt*=o,te*=o;var Le=b(te);Pn=Le*b(Zt),Er=Le*m(Zt),Pr=m(te),ln.point=Ye,Ar(Pn,Er,Pr)}function Ye(Zt,te){Zt*=o,te*=o;var Le=b(te),_e=Le*b(Zt),Rt=Le*m(Zt),zt=m(te),se=v(P((se=Er*zt-Pr*Rt)*se+(se=Pr*_e-Pn*zt)*se+(se=Pn*Rt-Er*_e)*se),Pn*_e+Er*Rt+Pr*zt);Ae+=se,ie+=se*(Pn+(Pn=_e)),Ce+=se*(Er+(Er=Rt)),ue+=se*(Pr+(Pr=zt)),Ar(Pn,Er,Pr)}function fn(){ln.point=Cr}function mn(){ln.point=bn}function jn(){Ln(rr,En),ln.point=Cr}function bn(Zt,te){rr=Zt,En=te,Zt*=o,te*=o,ln.point=Ln;var Le=b(te);Pn=Le*b(Zt),Er=Le*m(Zt),Pr=m(te),Ar(Pn,Er,Pr)}function Ln(Zt,te){Zt*=o,te*=o;var Le=b(te),_e=Le*b(Zt),Rt=Le*m(Zt),zt=m(te),se=Er*zt-Pr*Rt,re=Pr*_e-Pn*zt,ce=Pn*Rt-Er*_e,Fe=_(se,re,ce),Ke=R(Fe),rn=Fe&&-Ke/Fe;xe.add(rn*se),$e.add(rn*re),Fn.add(rn*ce),Ae+=Ke,ie+=Ke*(Pn+(Pn=_e)),Ce+=Ke*(Er+(Er=Rt)),ue+=Ke*(Pr+(Pr=zt)),Ar(Pn,Er,Pr)}function nr(Zt){Oe=Ae=Jt=ve=Vt=ie=Ce=ue=0,xe=new l.Adder,$e=new l.Adder,Fn=new l.Adder,it(Zt,ln);var te=+xe,Le=+$e,_e=+Fn,Rt=_(te,Le,_e);return Rt<c&&(te=ie,Le=Ce,_e=ue,Ae<s&&(te=Jt,Le=ve,_e=Vt),Rt=_(te,Le,_e),Rt<c)?[NaN,NaN]:[v(Le,te)*a,R(_e/Rt)*a]}function Yn(Zt){return function(){return Zt}}function Mn(Zt,te){function Le(_e,Rt){return _e=Zt(_e,Rt),te(_e[0],_e[1])}return Zt.invert&&te.invert&&(Le.invert=function(_e,Rt){return _e=te.invert(_e,Rt),_e&&Zt.invert(_e[0],_e[1])}),Le}function Rr(Zt,te){return[u(Zt)>r?Zt+Math.round(-Zt/i)*i:Zt,te]}Rr.invert=Rr;function pr(Zt,te,Le){return(Zt%=i)?te||Le?Mn(Pi(Zt),Oa(te,Le)):Pi(Zt):te||Le?Oa(te,Le):Rr}function zr(Zt){return function(te,Le){return te+=Zt,[te>r?te-i:te<-r?te+i:te,Le]}}function Pi(Zt){var te=zr(Zt);return te.invert=zr(-Zt),te}function Oa(Zt,te){var Le=b(Zt),_e=m(Zt),Rt=b(te),zt=m(te);function se(re,ce){var Fe=b(ce),Ke=b(re)*Fe,rn=m(re)*Fe,Je=m(ce),vn=Je*Le+Ke*_e;return[v(rn*Rt-vn*zt,Ke*Le-Je*_e),R(vn*Rt+rn*zt)]}return se.invert=function(re,ce){var Fe=b(ce),Ke=b(re)*Fe,rn=m(re)*Fe,Je=m(ce),vn=Je*Rt-rn*zt;return[v(rn*Rt+Je*zt,Ke*Le+vn*_e),R(vn*Le-Ke*_e)]},se}function Ua(Zt){Zt=pr(Zt[0]*o,Zt[1]*o,Zt.length>2?Zt[2]*o:0);function te(Le){return Le=Zt(Le[0]*o,Le[1]*o),Le[0]*=a,Le[1]*=a,Le}return te.invert=function(Le){return Le=Zt.invert(Le[0]*o,Le[1]*o),Le[0]*=a,Le[1]*=a,Le},te}function ro(Zt,te,Le,_e,Rt,zt){if(!!Le){var se=b(te),re=m(te),ce=_e*Le;Rt==null?(Rt=te+_e*i,zt=te-ce/2):(Rt=Ko(se,Rt),zt=Ko(se,zt),(_e>0?Rt<zt:Rt>zt)&&(Rt+=_e*i));for(var Fe,Ke=Rt;_e>0?Ke>zt:Ke<zt;Ke-=ce)Fe=dt([se,-re*b(Ke),-re*m(Ke)]),Zt.point(Fe[0],Fe[1])}}function Ko(Zt,te){te=et(te),te[0]-=Zt,at(te);var Le=O(-te[1]);return((-te[2]<0?-Le:Le)+i-s)%i}function _a(){var Zt=Yn([0,0]),te=Yn(90),Le=Yn(6),_e,Rt,zt={point:se};function se(ce,Fe){_e.push(ce=Rt(ce,Fe)),ce[0]*=a,ce[1]*=a}function re(){var ce=Zt.apply(this,arguments),Fe=te.apply(this,arguments)*o,Ke=Le.apply(this,arguments)*o;return _e=[],Rt=pr(-ce[0]*o,-ce[1]*o,0).invert,ro(zt,Fe,Ke,1),ce={type:"Polygon",coordinates:[_e]},_e=Rt=null,ce}return re.center=function(ce){return arguments.length?(Zt=typeof ce=="function"?ce:Yn([+ce[0],+ce[1]]),re):Zt},re.radius=function(ce){return arguments.length?(te=typeof ce=="function"?ce:Yn(+ce),re):te},re.precision=function(ce){return arguments.length?(Le=typeof ce=="function"?ce:Yn(+ce),re):Le},re}function co(){var Zt=[],te;return{point:function(_e,Rt,zt){te.push([_e,Rt,zt])},lineStart:function(){Zt.push(te=[])},lineEnd:F,rejoin:function(){Zt.length>1&&Zt.push(Zt.pop().concat(Zt.shift()))},result:function(){var _e=Zt;return Zt=[],te=null,_e}}}function Xo(Zt,te){return u(Zt[0]-te[0])<s&&u(Zt[1]-te[1])<s}function io(Zt,te,Le,_e){this.x=Zt,this.z=te,this.o=Le,this.e=_e,this.v=!1,this.n=this.p=null}function To(Zt,te,Le,_e,Rt){var zt=[],se=[],re,ce;if(Zt.forEach(function(hn){if(!((Jn=hn.length-1)<=0)){var Jn,Vn=hn[0],Zn=hn[Jn],Wn;if(Xo(Vn,Zn)){if(!Vn[2]&&!Zn[2]){for(Rt.lineStart(),re=0;re<Jn;++re)Rt.point((Vn=hn[re])[0],Vn[1]);Rt.lineEnd();return}Zn[0]+=2*s}zt.push(Wn=new io(Vn,hn,null,!0)),se.push(Wn.o=new io(Vn,null,Wn,!1)),zt.push(Wn=new io(Zn,hn,null,!1)),se.push(Wn.o=new io(Zn,null,Wn,!0))}}),!!zt.length){for(se.sort(te),ds(zt),ds(se),re=0,ce=se.length;re<ce;++re)se[re].e=Le=!Le;for(var Fe=zt[0],Ke,rn;;){for(var Je=Fe,vn=!0;Je.v;)if((Je=Je.n)===Fe)return;Ke=Je.z,Rt.lineStart();do{if(Je.v=Je.o.v=!0,Je.e){if(vn)for(re=0,ce=Ke.length;re<ce;++re)Rt.point((rn=Ke[re])[0],rn[1]);else _e(Je.x,Je.n.x,1,Rt);Je=Je.n}else{if(vn)for(Ke=Je.p.z,re=Ke.length-1;re>=0;--re)Rt.point((rn=Ke[re])[0],rn[1]);else _e(Je.x,Je.p.x,-1,Rt);Je=Je.p}Je=Je.o,Ke=Je.z,vn=!vn}while(!Je.v);Rt.lineEnd()}}}function ds(Zt){if(!!(te=Zt.length)){for(var te,Le=0,_e=Zt[0],Rt;++Le<te;)_e.n=Rt=Zt[Le],Rt.p=_e,_e=Rt;_e.n=Rt=Zt[0],Rt.p=_e}}function La(Zt){return u(Zt[0])<=r?Zt[0]:S(Zt[0])*((u(Zt[0])+r)%i-r)}function Vo(Zt,te){var Le=La(te),_e=te[1],Rt=m(_e),zt=[m(Le),-b(Le),0],se=0,re=0,ce=new l.Adder;Rt===1?_e=h+s:Rt===-1&&(_e=-h-s);for(var Fe=0,Ke=Zt.length;Fe<Ke;++Fe)if(!!(Je=(rn=Zt[Fe]).length))for(var rn,Je,vn=rn[Je-1],hn=La(vn),Jn=vn[1]/2+n,Vn=m(Jn),Zn=b(Jn),Wn=0;Wn<Je;++Wn,hn=xr,Vn=yi,Zn=Br,vn=lr){var lr=rn[Wn],xr=La(lr),Vr=lr[1]/2+n,yi=m(Vr),Br=b(Vr),si=xr-hn,gi=si>=0?1:-1,Zi=gi*si,Li=Zi>r,Ma=Vn*yi;if(ce.add(v(Ma*gi*m(Zi),Zn*Br+Ma*b(Zi))),se+=Li?si+gi*i:si,Li^hn>=Le^xr>=Le){var ma=pt(et(vn),et(lr));at(ma);var la=pt(zt,ma);at(la);var ri=(Li^si>=0?-1:1)*R(la[2]);(_e>ri||_e===ri&&(ma[0]||ma[1]))&&(re+=Li^si>=0?1:-1)}}return(se<-s||se<s&&ce<-c)^re&1}function Bo(Zt,te,Le,_e){return function(Rt){var zt=te(Rt),se=co(),re=te(se),ce=!1,Fe,Ke,rn,Je={point:vn,lineStart:Jn,lineEnd:Vn,polygonStart:function(){Je.point=Zn,Je.lineStart=Wn,Je.lineEnd=lr,Ke=[],Fe=[]},polygonEnd:function(){Je.point=vn,Je.lineStart=Jn,Je.lineEnd=Vn,Ke=l.merge(Ke);var Vr=Vo(Fe,_e);Ke.length?(ce||(Rt.polygonStart(),ce=!0),To(Ke,Jo,Vr,Le,Rt)):Vr&&(ce||(Rt.polygonStart(),ce=!0),Rt.lineStart(),Le(null,null,1,Rt),Rt.lineEnd()),ce&&(Rt.polygonEnd(),ce=!1),Ke=Fe=null},sphere:function(){Rt.polygonStart(),Rt.lineStart(),Le(null,null,1,Rt),Rt.lineEnd(),Rt.polygonEnd()}};function vn(xr,Vr){Zt(xr,Vr)&&Rt.point(xr,Vr)}function hn(xr,Vr){zt.point(xr,Vr)}function Jn(){Je.point=hn,zt.lineStart()}function Vn(){Je.point=vn,zt.lineEnd()}function Zn(xr,Vr){rn.push([xr,Vr]),re.point(xr,Vr)}function Wn(){re.lineStart(),rn=[]}function lr(){Zn(rn[0][0],rn[0][1]),re.lineEnd();var xr=re.clean(),Vr=se.result(),yi,Br=Vr.length,si,gi,Zi;if(rn.pop(),Fe.push(rn),rn=null,!!Br){if(xr&1){if(gi=Vr[0],(si=gi.length-1)>0){for(ce||(Rt.polygonStart(),ce=!0),Rt.lineStart(),yi=0;yi<si;++yi)Rt.point((Zi=gi[yi])[0],Zi[1]);Rt.lineEnd()}return}Br>1&&xr&2&&Vr.push(Vr.pop().concat(Vr.shift())),Ke.push(Vr.filter(lu))}}return Je}}function lu(Zt){return Zt.length>1}function Jo(Zt,te){return((Zt=Zt.x)[0]<0?Zt[1]-h-s:h-Zt[1])-((te=te.x)[0]<0?te[1]-h-s:h-te[1])}var iu=Bo(function(){return!0},$s,oe,[-r,-h]);function $s(Zt){var te=NaN,Le=NaN,_e=NaN,Rt;return{lineStart:function(){Zt.lineStart(),Rt=1},point:function(se,re){var ce=se>0?r:-r,Fe=u(se-te);u(Fe-r)<s?(Zt.point(te,Le=(Le+re)/2>0?h:-h),Zt.point(_e,Le),Zt.lineEnd(),Zt.lineStart(),Zt.point(ce,Le),Zt.point(se,Le),Rt=0):_e!==ce&&Fe>=r&&(u(te-_e)<s&&(te-=_e*s),u(se-ce)<s&&(se-=ce*s),Le=Ne(te,Le,se,re),Zt.point(_e,Le),Zt.lineEnd(),Zt.lineStart(),Zt.point(ce,Le),Rt=0),Zt.point(te=se,Le=re),_e=ce},lineEnd:function(){Zt.lineEnd(),te=Le=NaN},clean:function(){return 2-Rt}}}function Ne(Zt,te,Le,_e){var Rt,zt,se=m(Zt-Le);return u(se)>s?f((m(te)*(zt=b(_e))*m(Le)-m(_e)*(Rt=b(te))*m(Zt))/(Rt*zt*se)):(te+_e)/2}function oe(Zt,te,Le,_e){var Rt;if(Zt==null)Rt=Le*h,_e.point(-r,Rt),_e.point(0,Rt),_e.point(r,Rt),_e.point(r,0),_e.point(r,-Rt),_e.point(0,-Rt),_e.point(-r,-Rt),_e.point(-r,0),_e.point(-r,Rt);else if(u(Zt[0]-te[0])>s){var zt=Zt[0]<te[0]?r:-r;Rt=Le*zt/2,_e.point(-zt,Rt),_e.point(0,Rt),_e.point(zt,Rt)}else _e.point(te[0],te[1])}function Wt(Zt){var te=b(Zt),Le=6*o,_e=te>0,Rt=u(te)>s;function zt(Ke,rn,Je,vn){ro(vn,Zt,Le,Je,Ke,rn)}function se(Ke,rn){return b(Ke)*b(rn)>te}function re(Ke){var rn,Je,vn,hn,Jn;return{lineStart:function(){hn=vn=!1,Jn=1},point:function(Zn,Wn){var lr=[Zn,Wn],xr,Vr=se(Zn,Wn),yi=_e?Vr?0:Fe(Zn,Wn):Vr?Fe(Zn+(Zn<0?r:-r),Wn):0;if(!rn&&(hn=vn=Vr)&&Ke.lineStart(),Vr!==vn&&(xr=ce(rn,lr),(!xr||Xo(rn,xr)||Xo(lr,xr))&&(lr[2]=1)),Vr!==vn)Jn=0,Vr?(Ke.lineStart(),xr=ce(lr,rn),Ke.point(xr[0],xr[1])):(xr=ce(rn,lr),Ke.point(xr[0],xr[1],2),Ke.lineEnd()),rn=xr;else if(Rt&&rn&&_e^Vr){var Br;!(yi&Je)&&(Br=ce(lr,rn,!0))&&(Jn=0,_e?(Ke.lineStart(),Ke.point(Br[0][0],Br[0][1]),Ke.point(Br[1][0],Br[1][1]),Ke.lineEnd()):(Ke.point(Br[1][0],Br[1][1]),Ke.lineEnd(),Ke.lineStart(),Ke.point(Br[0][0],Br[0][1],3)))}Vr&&(!rn||!Xo(rn,lr))&&Ke.point(lr[0],lr[1]),rn=lr,vn=Vr,Je=yi},lineEnd:function(){vn&&Ke.lineEnd(),rn=null},clean:function(){return Jn|(hn&&vn)<<1}}}function ce(Ke,rn,Je){var vn=et(Ke),hn=et(rn),Jn=[1,0,0],Vn=pt(vn,hn),Zn=ot(Vn,Vn),Wn=Vn[0],lr=Zn-Wn*Wn;if(!lr)return!Je&&Ke;var xr=te*Zn/lr,Vr=-te*Wn/lr,yi=pt(Jn,Vn),Br=nt(Jn,xr),si=nt(Vn,Vr);H(Br,si);var gi=yi,Zi=ot(Br,gi),Li=ot(gi,gi),Ma=Zi*Zi-Li*(ot(Br,Br)-1);if(!(Ma<0)){var ma=P(Ma),la=nt(gi,(-Zi-ma)/Li);if(H(la,Br),la=dt(la),!Je)return la;var ri=Ke[0],Ta=rn[0],Ga=Ke[1],Ya=rn[1],Ii;Ta<ri&&(Ii=ri,ri=Ta,Ta=Ii);var Da=Ta-ri,ho=u(Da-r)<s,js=ho||Da<s;if(!ho&&Ya<Ga&&(Ii=Ga,Ga=Ya,Ya=Ii),js?ho?Ga+Ya>0^la[1]<(u(la[0]-ri)<s?Ga:Ya):Ga<=la[1]&&la[1]<=Ya:Da>r^(ri<=la[0]&&la[0]<=Ta)){var Is=nt(gi,(-Zi+ma)/Li);return H(Is,Br),[la,dt(Is)]}}}function Fe(Ke,rn){var Je=_e?Zt:r-Zt,vn=0;return Ke<-Je?vn|=1:Ke>Je&&(vn|=2),rn<-Je?vn|=4:rn>Je&&(vn|=8),vn}return Bo(se,re,zt,_e?[0,-Zt]:[-r,Zt-r])}function Ee(Zt,te,Le,_e,Rt,zt){var se=Zt[0],re=Zt[1],ce=te[0],Fe=te[1],Ke=0,rn=1,Je=ce-se,vn=Fe-re,hn;if(hn=Le-se,!(!Je&&hn>0)){if(hn/=Je,Je<0){if(hn<Ke)return;hn<rn&&(rn=hn)}else if(Je>0){if(hn>rn)return;hn>Ke&&(Ke=hn)}if(hn=Rt-se,!(!Je&&hn<0)){if(hn/=Je,Je<0){if(hn>rn)return;hn>Ke&&(Ke=hn)}else if(Je>0){if(hn<Ke)return;hn<rn&&(rn=hn)}if(hn=_e-re,!(!vn&&hn>0)){if(hn/=vn,vn<0){if(hn<Ke)return;hn<rn&&(rn=hn)}else if(vn>0){if(hn>rn)return;hn>Ke&&(Ke=hn)}if(hn=zt-re,!(!vn&&hn<0)){if(hn/=vn,vn<0){if(hn>rn)return;hn>Ke&&(Ke=hn)}else if(vn>0){if(hn<Ke)return;hn<rn&&(rn=hn)}return Ke>0&&(Zt[0]=se+Ke*Je,Zt[1]=re+Ke*vn),rn<1&&(te[0]=se+rn*Je,te[1]=re+rn*vn),!0}}}}}var an=1e9,Un=-an;function qn(Zt,te,Le,_e){function Rt(Fe,Ke){return Zt<=Fe&&Fe<=Le&&te<=Ke&&Ke<=_e}function zt(Fe,Ke,rn,Je){var vn=0,hn=0;if(Fe==null||(vn=se(Fe,rn))!==(hn=se(Ke,rn))||ce(Fe,Ke)<0^rn>0)do Je.point(vn===0||vn===3?Zt:Le,vn>1?_e:te);while((vn=(vn+rn+4)%4)!==hn);else Je.point(Ke[0],Ke[1])}function se(Fe,Ke){return u(Fe[0]-Zt)<s?Ke>0?0:3:u(Fe[0]-Le)<s?Ke>0?2:1:u(Fe[1]-te)<s?Ke>0?1:0:Ke>0?3:2}function re(Fe,Ke){return ce(Fe.x,Ke.x)}function ce(Fe,Ke){var rn=se(Fe,1),Je=se(Ke,1);return rn!==Je?rn-Je:rn===0?Ke[1]-Fe[1]:rn===1?Fe[0]-Ke[0]:rn===2?Fe[1]-Ke[1]:Ke[0]-Fe[0]}return function(Fe){var Ke=Fe,rn=co(),Je,vn,hn,Jn,Vn,Zn,Wn,lr,xr,Vr,yi,Br={point:si,lineStart:Ma,lineEnd:ma,polygonStart:Zi,polygonEnd:Li};function si(ri,Ta){Rt(ri,Ta)&&Ke.point(ri,Ta)}function gi(){for(var ri=0,Ta=0,Ga=vn.length;Ta<Ga;++Ta)for(var Ya=vn[Ta],Ii=1,Da=Ya.length,ho=Ya[0],js,Is,Vu=ho[0],cu=ho[1];Ii<Da;++Ii)js=Vu,Is=cu,ho=Ya[Ii],Vu=ho[0],cu=ho[1],Is<=_e?cu>_e&&(Vu-js)*(_e-Is)>(cu-Is)*(Zt-js)&&++ri:cu<=_e&&(Vu-js)*(_e-Is)<(cu-Is)*(Zt-js)&&--ri;return ri}function Zi(){Ke=rn,Je=[],vn=[],yi=!0}function Li(){var ri=gi(),Ta=yi&&ri,Ga=(Je=l.merge(Je)).length;(Ta||Ga)&&(Fe.polygonStart(),Ta&&(Fe.lineStart(),zt(null,null,1,Fe),Fe.lineEnd()),Ga&&To(Je,re,ri,zt,Fe),Fe.polygonEnd()),Ke=Fe,Je=vn=hn=null}function Ma(){Br.point=la,vn&&vn.push(hn=[]),Vr=!0,xr=!1,Wn=lr=NaN}function ma(){Je&&(la(Jn,Vn),Zn&&xr&&rn.rejoin(),Je.push(rn.result())),Br.point=si,xr&&Ke.lineEnd()}function la(ri,Ta){var Ga=Rt(ri,Ta);if(vn&&hn.push([ri,Ta]),Vr)Jn=ri,Vn=Ta,Zn=Ga,Vr=!1,Ga&&(Ke.lineStart(),Ke.point(ri,Ta));else if(Ga&&xr)Ke.point(ri,Ta);else{var Ya=[Wn=Math.max(Un,Math.min(an,Wn)),lr=Math.max(Un,Math.min(an,lr))],Ii=[ri=Math.max(Un,Math.min(an,ri)),Ta=Math.max(Un,Math.min(an,Ta))];Ee(Ya,Ii,Zt,te,Le,_e)?(xr||(Ke.lineStart(),Ke.point(Ya[0],Ya[1])),Ke.point(Ii[0],Ii[1]),Ga||Ke.lineEnd(),yi=!1):Ga&&(Ke.lineStart(),Ke.point(ri,Ta),yi=!1)}Wn=ri,lr=Ta,xr=Ga}return Br}}function kn(){var Zt=0,te=0,Le=960,_e=500,Rt,zt,se;return se={stream:function(ce){return Rt&&zt===ce?Rt:Rt=qn(Zt,te,Le,_e)(zt=ce)},extent:function(ce){return arguments.length?(Zt=+ce[0][0],te=+ce[0][1],Le=+ce[1][0],_e=+ce[1][1],Rt=zt=null,se):[[Zt,te],[Le,_e]]}}}var Xr,Si,Ti,ki,sa={sphere:F,point:F,lineStart:$a,lineEnd:F,polygonStart:F,polygonEnd:F};function $a(){sa.point=bo,sa.lineEnd=ba}function ba(){sa.point=sa.lineEnd=F}function bo(Zt,te){Zt*=o,te*=o,Si=Zt,Ti=m(te),ki=b(te),sa.point=Fa}function Fa(Zt,te){Zt*=o,te*=o;var Le=m(te),_e=b(te),Rt=u(Zt-Si),zt=b(Rt),se=m(Rt),re=_e*se,ce=ki*Le-Ti*_e*zt,Fe=Ti*Le+ki*_e*zt;Xr.add(v(P(re*re+ce*ce),Fe)),Si=Zt,Ti=Le,ki=_e}function oo(Zt){return Xr=new l.Adder,it(Zt,sa),+Xr}var Eo=[null,null],Qa={type:"LineString",coordinates:Eo};function Ao(Zt,te){return Eo[0]=Zt,Eo[1]=te,oo(Qa)}var as={Feature:function(te,Le){return xs(te.geometry,Le)},FeatureCollection:function(te,Le){for(var _e=te.features,Rt=-1,zt=_e.length;++Rt<zt;)if(xs(_e[Rt].geometry,Le))return!0;return!1}},No={Sphere:function(){return!0},Point:function(te,Le){return Co(te.coordinates,Le)},MultiPoint:function(te,Le){for(var _e=te.coordinates,Rt=-1,zt=_e.length;++Rt<zt;)if(Co(_e[Rt],Le))return!0;return!1},LineString:function(te,Le){return qa(te.coordinates,Le)},MultiLineString:function(te,Le){for(var _e=te.coordinates,Rt=-1,zt=_e.length;++Rt<zt;)if(qa(_e[Rt],Le))return!0;return!1},Polygon:function(te,Le){return Ts(te.coordinates,Le)},MultiPolygon:function(te,Le){for(var _e=te.coordinates,Rt=-1,zt=_e.length;++Rt<zt;)if(Ts(_e[Rt],Le))return!0;return!1},GeometryCollection:function(te,Le){for(var _e=te.geometries,Rt=-1,zt=_e.length;++Rt<zt;)if(xs(_e[Rt],Le))return!0;return!1}};function xs(Zt,te){return Zt&&No.hasOwnProperty(Zt.type)?No[Zt.type](Zt,te):!1}function Co(Zt,te){return Ao(Zt,te)===0}function qa(Zt,te){for(var Le,_e,Rt,zt=0,se=Zt.length;zt<se;zt++){if(_e=Ao(Zt[zt],te),_e===0||zt>0&&(Rt=Ao(Zt[zt],Zt[zt-1]),Rt>0&&Le<=Rt&&_e<=Rt&&(Le+_e-Rt)*(1-Math.pow((Le-_e)/Rt,2))<c*Rt))return!0;Le=_e}return!1}function Ts(Zt,te){return!!Vo(Zt.map(ls),wa(te))}function ls(Zt){return Zt=Zt.map(wa),Zt.pop(),Zt}function wa(Zt){return[Zt[0]*o,Zt[1]*o]}function yn(Zt,te){return(Zt&&as.hasOwnProperty(Zt.type)?as[Zt.type]:xs)(Zt,te)}function dr(Zt,te,Le){var _e=l.range(Zt,te-s,Le).concat(te);return function(Rt){return _e.map(function(zt){return[Rt,zt]})}}function kr(Zt,te,Le){var _e=l.range(Zt,te-s,Le).concat(te);return function(Rt){return _e.map(function(zt){return[zt,Rt]})}}function Ui(){var Zt,te,Le,_e,Rt,zt,se,re,ce=10,Fe=ce,Ke=90,rn=360,Je,vn,hn,Jn,Vn=2.5;function Zn(){return{type:"MultiLineString",coordinates:Wn()}}function Wn(){return l.range(y(_e/Ke)*Ke,Le,Ke).map(hn).concat(l.range(y(re/rn)*rn,se,rn).map(Jn)).concat(l.range(y(te/ce)*ce,Zt,ce).filter(function(lr){return u(lr%Ke)>s}).map(Je)).concat(l.range(y(zt/Fe)*Fe,Rt,Fe).filter(function(lr){return u(lr%rn)>s}).map(vn))}return Zn.lines=function(){return Wn().map(function(lr){return{type:"LineString",coordinates:lr}})},Zn.outline=function(){return{type:"Polygon",coordinates:[hn(_e).concat(Jn(se).slice(1),hn(Le).reverse().slice(1),Jn(re).reverse().slice(1))]}},Zn.extent=function(lr){return arguments.length?Zn.extentMajor(lr).extentMinor(lr):Zn.extentMinor()},Zn.extentMajor=function(lr){return arguments.length?(_e=+lr[0][0],Le=+lr[1][0],re=+lr[0][1],se=+lr[1][1],_e>Le&&(lr=_e,_e=Le,Le=lr),re>se&&(lr=re,re=se,se=lr),Zn.precision(Vn)):[[_e,re],[Le,se]]},Zn.extentMinor=function(lr){return arguments.length?(te=+lr[0][0],Zt=+lr[1][0],zt=+lr[0][1],Rt=+lr[1][1],te>Zt&&(lr=te,te=Zt,Zt=lr),zt>Rt&&(lr=zt,zt=Rt,Rt=lr),Zn.precision(Vn)):[[te,zt],[Zt,Rt]]},Zn.step=function(lr){return arguments.length?Zn.stepMajor(lr).stepMinor(lr):Zn.stepMinor()},Zn.stepMajor=function(lr){return arguments.length?(Ke=+lr[0],rn=+lr[1],Zn):[Ke,rn]},Zn.stepMinor=function(lr){return arguments.length?(ce=+lr[0],Fe=+lr[1],Zn):[ce,Fe]},Zn.precision=function(lr){return arguments.length?(Vn=+lr,Je=dr(zt,Rt,90),vn=kr(te,Zt,Vn),hn=dr(re,se,90),Jn=kr(_e,Le,Vn),Zn):Vn},Zn.extentMajor([[-180,-90+s],[180,90-s]]).extentMinor([[-180,-80-s],[180,80+s]])}function Ja(){return Ui()()}function So(Zt,te){var Le=Zt[0]*o,_e=Zt[1]*o,Rt=te[0]*o,zt=te[1]*o,se=b(_e),re=m(_e),ce=b(zt),Fe=m(zt),Ke=se*b(Le),rn=se*m(Le),Je=ce*b(Rt),vn=ce*m(Rt),hn=2*R(P(W(zt-_e)+se*ce*W(Rt-Le))),Jn=m(hn),Vn=hn?function(Zn){var Wn=m(Zn*=hn)/Jn,lr=m(hn-Zn)/Jn,xr=lr*Ke+Wn*Je,Vr=lr*rn+Wn*vn,yi=lr*re+Wn*Fe;return[v(Vr,xr)*a,v(yi,P(xr*xr+Vr*Vr))*a]}:function(){return[Le*a,_e*a]};return Vn.distance=hn,Vn}var po=function(te){return te},ea=new l.Adder,to=new l.Adder,bs,Es,ka,bu,Wo={point:F,lineStart:F,lineEnd:F,polygonStart:function(){Wo.lineStart=As,Wo.lineEnd=ps},polygonEnd:function(){Wo.lineStart=Wo.lineEnd=Wo.point=F,ea.add(u(to)),to=new l.Adder},result:function(){var te=ea/2;return ea=new l.Adder,te}};function As(){Wo.point=Qs}function Qs(Zt,te){Wo.point=vs,bs=ka=Zt,Es=bu=te}function vs(Zt,te){to.add(bu*Zt-ka*te),ka=Zt,bu=te}function ps(){vs(bs,Es)}var cs=Infinity,gs=cs,Cs=-cs,Pu=Cs,ju={point:fo,lineStart:F,lineEnd:F,polygonStart:F,polygonEnd:F,result:function(){var te=[[cs,gs],[Cs,Pu]];return Cs=Pu=-(gs=cs=Infinity),te}};function fo(Zt,te){Zt<cs&&(cs=Zt),Zt>Cs&&(Cs=Zt),te<gs&&(gs=te),te>Pu&&(Pu=te)}var Ns=0,Bu=0,ll=0,cl=0,Xu=0,Io=0,Ra=0,Ea=0,Ro=0,pu,Ml,Fs,Ss,au={point:qs,lineStart:Ds,lineEnd:Wa,polygonStart:function(){au.lineStart=Pl,au.lineEnd=$l},polygonEnd:function(){au.point=qs,au.lineStart=Ds,au.lineEnd=Wa},result:function(){var te=Ro?[Ra/Ro,Ea/Ro]:Io?[cl/Io,Xu/Io]:ll?[Ns/ll,Bu/ll]:[NaN,NaN];return Ns=Bu=ll=cl=Xu=Io=Ra=Ea=Ro=0,te}};function qs(Zt,te){Ns+=Zt,Bu+=te,++ll}function Ds(){au.point=Ju}function Ju(Zt,te){au.point=ou,qs(Fs=Zt,Ss=te)}function ou(Zt,te){var Le=Zt-Fs,_e=te-Ss,Rt=P(Le*Le+_e*_e);cl+=Rt*(Fs+Zt)/2,Xu+=Rt*(Ss+te)/2,Io+=Rt,qs(Fs=Zt,Ss=te)}function Wa(){au.point=qs}function Pl(){au.point=Tl}function $l(){Ql(pu,Ml)}function Tl(Zt,te){au.point=Ql,qs(pu=Fs=Zt,Ml=Ss=te)}function Ql(Zt,te){var Le=Zt-Fs,_e=te-Ss,Rt=P(Le*Le+_e*_e);cl+=Rt*(Fs+Zt)/2,Xu+=Rt*(Ss+te)/2,Io+=Rt,Rt=Ss*Zt-Fs*te,Ra+=Rt*(Fs+Zt),Ea+=Rt*(Ss+te),Ro+=Rt*3,qs(Fs=Zt,Ss=te)}function Nu(Zt){this._context=Zt}Nu.prototype={_radius:4.5,pointRadius:function(te){return this._radius=te,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(te,Le){switch(this._point){case 0:{this._context.moveTo(te,Le),this._point=1;break}case 1:{this._context.lineTo(te,Le);break}default:{this._context.moveTo(te+this._radius,Le),this._context.arc(te,Le,this._radius,0,i);break}}},result:F};var Ha=new l.Adder,su,Al,ms,Tu,gu,Fu={point:F,lineStart:function(){Fu.point=Hs},lineEnd:function(){su&&$o(Al,ms),Fu.point=F},polygonStart:function(){su=!0},polygonEnd:function(){su=null},result:function(){var te=+Ha;return Ha=new l.Adder,te}};function Hs(Zt,te){Fu.point=$o,Al=Tu=Zt,ms=gu=te}function $o(Zt,te){Tu-=Zt,gu-=te,Ha.add(P(Tu*Tu+gu*gu)),Tu=Zt,gu=te}function fs(){this._string=[]}fs.prototype={_radius:4.5,_circle:fl(4.5),pointRadius:function(te){return(te=+te)!==this._radius&&(this._radius=te,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(te,Le){switch(this._point){case 0:{this._string.push("M",te,",",Le),this._point=1;break}case 1:{this._string.push("L",te,",",Le);break}default:{this._circle==null&&(this._circle=fl(this._radius)),this._string.push("M",te,",",Le,this._circle);break}}},result:function(){if(this._string.length){var te=this._string.join("");return this._string=[],te}else return null}};function fl(Zt){return"m0,"+Zt+"a"+Zt+","+Zt+" 0 1,1 0,"+-2*Zt+"a"+Zt+","+Zt+" 0 1,1 0,"+2*Zt+"z"}function zl(Zt,te){var Le=4.5,_e,Rt;function zt(se){return se&&(typeof Le=="function"&&Rt.pointRadius(+Le.apply(this,arguments)),it(se,_e(Rt))),Rt.result()}return zt.area=function(se){return it(se,_e(Wo)),Wo.result()},zt.measure=function(se){return it(se,_e(Fu)),Fu.result()},zt.bounds=function(se){return it(se,_e(ju)),ju.result()},zt.centroid=function(se){return it(se,_e(au)),au.result()},zt.projection=function(se){return arguments.length?(_e=se==null?(Zt=null,po):(Zt=se).stream,zt):Zt},zt.context=function(se){return arguments.length?(Rt=se==null?(te=null,new fs):new Nu(te=se),typeof Le!="function"&&Rt.pointRadius(Le),zt):te},zt.pointRadius=function(se){return arguments.length?(Le=typeof se=="function"?se:(Rt.pointRadius(+se),+se),zt):Le},zt.projection(Zt).context(te)}function ql(Zt){return{stream:zu(Zt)}}function zu(Zt){return function(te){var Le=new $u;for(var _e in Zt)Le[_e]=Zt[_e];return Le.stream=te,Le}}function $u(){}$u.prototype={constructor:$u,point:function(te,Le){this.stream.point(te,Le)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Au(Zt,te,Le){var _e=Zt.clipExtent&&Zt.clipExtent();return Zt.scale(150).translate([0,0]),_e!=null&&Zt.clipExtent(null),it(Le,Zt.stream(ju)),te(ju.result()),_e!=null&&Zt.clipExtent(_e),Zt}function Cu(Zt,te,Le){return Au(Zt,function(_e){var Rt=te[1][0]-te[0][0],zt=te[1][1]-te[0][1],se=Math.min(Rt/(_e[1][0]-_e[0][0]),zt/(_e[1][1]-_e[0][1])),re=+te[0][0]+(Rt-se*(_e[1][0]+_e[0][0]))/2,ce=+te[0][1]+(zt-se*(_e[1][1]+_e[0][1]))/2;Zt.scale(150*se).translate([re,ce])},Le)}function mu(Zt,te,Le){return Cu(Zt,[[0,0],te],Le)}function Uu(Zt,te,Le){return Au(Zt,function(_e){var Rt=+te,zt=Rt/(_e[1][0]-_e[0][0]),se=(Rt-zt*(_e[1][0]+_e[0][0]))/2,re=-zt*_e[0][1];Zt.scale(150*zt).translate([se,re])},Le)}function zs(Zt,te,Le){return Au(Zt,function(_e){var Rt=+te,zt=Rt/(_e[1][1]-_e[0][1]),se=-zt*_e[0][0],re=(Rt-zt*(_e[1][1]+_e[0][1]))/2;Zt.scale(150*zt).translate([se,re])},Le)}var Ul=16,gc=b(30*o);function Cl(Zt,te){return+te?Gl(Zt,te):kl(Zt)}function kl(Zt){return zu({point:function(Le,_e){Le=Zt(Le,_e),this.stream.point(Le[0],Le[1])}})}function Gl(Zt,te){function Le(_e,Rt,zt,se,re,ce,Fe,Ke,rn,Je,vn,hn,Jn,Vn){var Zn=Fe-_e,Wn=Ke-Rt,lr=Zn*Zn+Wn*Wn;if(lr>4*te&&Jn--){var xr=se+Je,Vr=re+vn,yi=ce+hn,Br=P(xr*xr+Vr*Vr+yi*yi),si=R(yi/=Br),gi=u(u(yi)-1)<s||u(zt-rn)<s?(zt+rn)/2:v(Vr,xr),Zi=Zt(gi,si),Li=Zi[0],Ma=Zi[1],ma=Li-_e,la=Ma-Rt,ri=Wn*ma-Zn*la;(ri*ri/lr>te||u((Zn*ma+Wn*la)/lr-.5)>.3||se*Je+re*vn+ce*hn<gc)&&(Le(_e,Rt,zt,se,re,ce,Li,Ma,gi,xr/=Br,Vr/=Br,yi,Jn,Vn),Vn.point(Li,Ma),Le(Li,Ma,gi,xr,Vr,yi,Fe,Ke,rn,Je,vn,hn,Jn,Vn))}}return function(_e){var Rt,zt,se,re,ce,Fe,Ke,rn,Je,vn,hn,Jn,Vn={point:Zn,lineStart:Wn,lineEnd:xr,polygonStart:function(){_e.polygonStart(),Vn.lineStart=Vr},polygonEnd:function(){_e.polygonEnd(),Vn.lineStart=Wn}};function Zn(si,gi){si=Zt(si,gi),_e.point(si[0],si[1])}function Wn(){rn=NaN,Vn.point=lr,_e.lineStart()}function lr(si,gi){var Zi=et([si,gi]),Li=Zt(si,gi);Le(rn,Je,Ke,vn,hn,Jn,rn=Li[0],Je=Li[1],Ke=si,vn=Zi[0],hn=Zi[1],Jn=Zi[2],Ul,_e),_e.point(rn,Je)}function xr(){Vn.point=Zn,_e.lineEnd()}function Vr(){Wn(),Vn.point=yi,Vn.lineEnd=Br}function yi(si,gi){lr(Rt=si,gi),zt=rn,se=Je,re=vn,ce=hn,Fe=Jn,Vn.point=lr}function Br(){Le(rn,Je,Ke,vn,hn,Jn,zt,se,Rt,re,ce,Fe,Ul,_e),Vn.lineEnd=xr,xr()}return Vn}}var cc=zu({point:function(te,Le){this.stream.point(te*o,Le*o)}});function Qu(Zt){return zu({point:function(Le,_e){var Rt=Zt(Le,_e);return this.stream.point(Rt[0],Rt[1])}})}function Ol(Zt,te,Le,_e,Rt){function zt(se,re){return se*=_e,re*=Rt,[te+Zt*se,Le-Zt*re]}return zt.invert=function(se,re){return[(se-te)/Zt*_e,(Le-re)/Zt*Rt]},zt}function Vl(Zt,te,Le,_e,Rt,zt){if(!zt)return Ol(Zt,te,Le,_e,Rt);var se=b(zt),re=m(zt),ce=se*Zt,Fe=re*Zt,Ke=se/Zt,rn=re/Zt,Je=(re*Le-se*te)/Zt,vn=(re*te+se*Le)/Zt;function hn(Jn,Vn){return Jn*=_e,Vn*=Rt,[ce*Jn-Fe*Vn+te,Le-Fe*Jn-ce*Vn]}return hn.invert=function(Jn,Vn){return[_e*(Ke*Jn-rn*Vn+Je),Rt*(vn-rn*Jn-Ke*Vn)]},hn}function tu(Zt){return go(function(){return Zt})()}function go(Zt){var te,Le=150,_e=480,Rt=250,zt=0,se=0,re=0,ce=0,Fe=0,Ke,rn=0,Je=1,vn=1,hn=null,Jn=iu,Vn=null,Zn,Wn,lr,xr=po,Vr=.5,yi,Br,si,gi,Zi;function Li(ri){return si(ri[0]*o,ri[1]*o)}function Ma(ri){return ri=si.invert(ri[0],ri[1]),ri&&[ri[0]*a,ri[1]*a]}Li.stream=function(ri){return gi&&Zi===ri?gi:gi=cc(Qu(Ke)(Jn(yi(xr(Zi=ri)))))},Li.preclip=function(ri){return arguments.length?(Jn=ri,hn=void 0,la()):Jn},Li.postclip=function(ri){return arguments.length?(xr=ri,Vn=Zn=Wn=lr=null,la()):xr},Li.clipAngle=function(ri){return arguments.length?(Jn=+ri?Wt(hn=ri*o):(hn=null,iu),la()):hn*a},Li.clipExtent=function(ri){return arguments.length?(xr=ri==null?(Vn=Zn=Wn=lr=null,po):qn(Vn=+ri[0][0],Zn=+ri[0][1],Wn=+ri[1][0],lr=+ri[1][1]),la()):Vn==null?null:[[Vn,Zn],[Wn,lr]]},Li.scale=function(ri){return arguments.length?(Le=+ri,ma()):Le},Li.translate=function(ri){return arguments.length?(_e=+ri[0],Rt=+ri[1],ma()):[_e,Rt]},Li.center=function(ri){return arguments.length?(zt=ri[0]%360*o,se=ri[1]%360*o,ma()):[zt*a,se*a]},Li.rotate=function(ri){return arguments.length?(re=ri[0]%360*o,ce=ri[1]%360*o,Fe=ri.length>2?ri[2]%360*o:0,ma()):[re*a,ce*a,Fe*a]},Li.angle=function(ri){return arguments.length?(rn=ri%360*o,ma()):rn*a},Li.reflectX=function(ri){return arguments.length?(Je=ri?-1:1,ma()):Je<0},Li.reflectY=function(ri){return arguments.length?(vn=ri?-1:1,ma()):vn<0},Li.precision=function(ri){return arguments.length?(yi=Cl(Br,Vr=ri*ri),la()):P(Vr)},Li.fitExtent=function(ri,Ta){return Cu(Li,ri,Ta)},Li.fitSize=function(ri,Ta){return mu(Li,ri,Ta)},Li.fitWidth=function(ri,Ta){return Uu(Li,ri,Ta)},Li.fitHeight=function(ri,Ta){return zs(Li,ri,Ta)};function ma(){var ri=Vl(Le,0,0,Je,vn,rn).apply(null,te(zt,se)),Ta=Vl(Le,_e-ri[0],Rt-ri[1],Je,vn,rn);return Ke=pr(re,ce,Fe),Br=Mn(te,Ta),si=Mn(Ke,Br),yi=Cl(Br,Vr),la()}function la(){return gi=Zi=null,Li}return function(){return te=Zt.apply(this,arguments),Li.invert=te.invert&&Ma,ma()}}function gl(Zt){var te=0,Le=r/3,_e=go(Zt),Rt=_e(te,Le);return Rt.parallels=function(zt){return arguments.length?_e(te=zt[0]*o,Le=zt[1]*o):[te*a,Le*a]},Rt}function hl(Zt){var te=b(Zt);function Le(_e,Rt){return[_e*te,m(Rt)/te]}return Le.invert=function(_e,Rt){return[_e/te,R(Rt*te)]},Le}function Ys(Zt,te){var Le=m(Zt),_e=(Le+m(te))/2;if(u(_e)<s)return hl(Zt);var Rt=1+Le*(2*_e-Le),zt=P(Rt)/_e;function se(re,ce){var Fe=P(Rt-2*_e*m(ce))/_e;return[Fe*m(re*=_e),zt-Fe*b(re)]}return se.invert=function(re,ce){var Fe=zt-ce,Ke=v(re,u(Fe))*S(Fe);return Fe*_e<0&&(Ke-=r*S(re)*S(Fe)),[Ke/_e,R((Rt-(re*re+Fe*Fe)*_e*_e)/(2*_e))]},se}function Na(){return gl(Ys).scale(155.424).center([0,33.6442])}function _o(){return Na().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Us(Zt){var te=Zt.length;return{point:function(_e,Rt){for(var zt=-1;++zt<te;)Zt[zt].point(_e,Rt)},sphere:function(){for(var _e=-1;++_e<te;)Zt[_e].sphere()},lineStart:function(){for(var _e=-1;++_e<te;)Zt[_e].lineStart()},lineEnd:function(){for(var _e=-1;++_e<te;)Zt[_e].lineEnd()},polygonStart:function(){for(var _e=-1;++_e<te;)Zt[_e].polygonStart()},polygonEnd:function(){for(var _e=-1;++_e<te;)Zt[_e].polygonEnd()}}}function ml(){var Zt,te,Le=_o(),_e,Rt=Na().rotate([154,0]).center([-2,58.5]).parallels([55,65]),zt,se=Na().rotate([157,0]).center([-3,19.9]).parallels([8,18]),re,ce,Fe={point:function(vn,hn){ce=[vn,hn]}};function Ke(Je){var vn=Je[0],hn=Je[1];return ce=null,_e.point(vn,hn),ce||(zt.point(vn,hn),ce)||(re.point(vn,hn),ce)}Ke.invert=function(Je){var vn=Le.scale(),hn=Le.translate(),Jn=(Je[0]-hn[0])/vn,Vn=(Je[1]-hn[1])/vn;return(Vn>=.12&&Vn<.234&&Jn>=-.425&&Jn<-.214?Rt:Vn>=.166&&Vn<.234&&Jn>=-.214&&Jn<-.115?se:Le).invert(Je)},Ke.stream=function(Je){return Zt&&te===Je?Zt:Zt=Us([Le.stream(te=Je),Rt.stream(Je),se.stream(Je)])},Ke.precision=function(Je){return arguments.length?(Le.precision(Je),Rt.precision(Je),se.precision(Je),rn()):Le.precision()},Ke.scale=function(Je){return arguments.length?(Le.scale(Je),Rt.scale(Je*.35),se.scale(Je),Ke.translate(Le.translate())):Le.scale()},Ke.translate=function(Je){if(!arguments.length)return Le.translate();var vn=Le.scale(),hn=+Je[0],Jn=+Je[1];return _e=Le.translate(Je).clipExtent([[hn-.455*vn,Jn-.238*vn],[hn+.455*vn,Jn+.238*vn]]).stream(Fe),zt=Rt.translate([hn-.307*vn,Jn+.201*vn]).clipExtent([[hn-.425*vn+s,Jn+.12*vn+s],[hn-.214*vn-s,Jn+.234*vn-s]]).stream(Fe),re=se.translate([hn-.205*vn,Jn+.212*vn]).clipExtent([[hn-.214*vn+s,Jn+.166*vn+s],[hn-.115*vn-s,Jn+.234*vn-s]]).stream(Fe),rn()},Ke.fitExtent=function(Je,vn){return Cu(Ke,Je,vn)},Ke.fitSize=function(Je,vn){return mu(Ke,Je,vn)},Ke.fitWidth=function(Je,vn){return Uu(Ke,Je,vn)},Ke.fitHeight=function(Je,vn){return zs(Ke,Je,vn)};function rn(){return Zt=te=null,Ke}return Ke.scale(1070)}function qu(Zt){return function(te,Le){var _e=b(te),Rt=b(Le),zt=Zt(_e*Rt);return zt===Infinity?[2,0]:[zt*Rt*m(te),zt*m(Le)]}}function ku(Zt){return function(te,Le){var _e=P(te*te+Le*Le),Rt=Zt(_e),zt=m(Rt),se=b(Rt);return[v(te*zt,_e*se),R(_e&&Le*zt/_e)]}}var mc=qu(function(Zt){return P(2/(1+Zt))});mc.invert=ku(function(Zt){return 2*R(Zt/2)});function Os(){return tu(mc).scale(124.75).clipAngle(180-.001)}var tl=qu(function(Zt){return(Zt=O(Zt))&&Zt/m(Zt)});tl.invert=ku(function(Zt){return Zt});function uu(){return tu(tl).scale(79.4188).clipAngle(180-.001)}function Zs(Zt,te){return[Zt,M(A((h+te)/2))]}Zs.invert=function(Zt,te){return[Zt,2*f(g(te))-h]};function Qo(){return eu(Zs).scale(961/i)}function eu(Zt){var te=tu(Zt),Le=te.center,_e=te.scale,Rt=te.translate,zt=te.clipExtent,se=null,re,ce,Fe;te.scale=function(rn){return arguments.length?(_e(rn),Ke()):_e()},te.translate=function(rn){return arguments.length?(Rt(rn),Ke()):Rt()},te.center=function(rn){return arguments.length?(Le(rn),Ke()):Le()},te.clipExtent=function(rn){return arguments.length?(rn==null?se=re=ce=Fe=null:(se=+rn[0][0],re=+rn[0][1],ce=+rn[1][0],Fe=+rn[1][1]),Ke()):se==null?null:[[se,re],[ce,Fe]]};function Ke(){var rn=r*_e(),Je=te(Ua(te.rotate()).invert([0,0]));return zt(se==null?[[Je[0]-rn,Je[1]-rn],[Je[0]+rn,Je[1]+rn]]:Zt===Zs?[[Math.max(Je[0]-rn,se),re],[Math.min(Je[0]+rn,ce),Fe]]:[[se,Math.max(Je[1]-rn,re)],[ce,Math.min(Je[1]+rn,Fe)]])}return Ke()}function Ou(Zt){return A((h+Zt)/2)}function qo(Zt,te){var Le=b(Zt),_e=Zt===te?m(Zt):M(Le/b(te))/M(Ou(te)/Ou(Zt)),Rt=Le*x(Ou(Zt),_e)/_e;if(!_e)return Zs;function zt(se,re){Rt>0?re<-h+s&&(re=-h+s):re>h-s&&(re=h-s);var ce=Rt/x(Ou(re),_e);return[ce*m(_e*se),Rt-ce*b(_e*se)]}return zt.invert=function(se,re){var ce=Rt-re,Fe=S(_e)*P(se*se+ce*ce),Ke=v(se,u(ce))*S(ce);return ce*_e<0&&(Ke-=r*S(se)*S(ce)),[Ke/_e,2*f(x(Rt/Fe,1/_e))-h]},zt}function Wi(){return gl(qo).scale(109.5).parallels([30,30])}function ws(Zt,te){return[Zt,te]}ws.invert=ws;function Gu(){return tu(ws).scale(152.63)}function wu(Zt,te){var Le=b(Zt),_e=Zt===te?m(Zt):(Le-b(te))/(te-Zt),Rt=Le/_e+Zt;if(u(_e)<s)return ws;function zt(se,re){var ce=Rt-re,Fe=_e*se;return[ce*m(Fe),Rt-ce*b(Fe)]}return zt.invert=function(se,re){var ce=Rt-re,Fe=v(se,u(ce))*S(ce);return ce*_e<0&&(Fe-=r*S(se)*S(ce)),[Fe/_e,Rt-S(_e)*P(se*se+ce*ce)]},zt}function Fo(){return gl(wu).scale(131.154).center([0,13.9389])}var ko=1.340264,Eu=-.081106,Mi=893e-6,el=.003796,Iu=P(3)/2,Lu=12;function nu(Zt,te){var Le=R(Iu*m(te)),_e=Le*Le,Rt=_e*_e*_e;return[Zt*b(Le)/(Iu*(ko+3*Eu*_e+Rt*(7*Mi+9*el*_e))),Le*(ko+Eu*_e+Rt*(Mi+el*_e))]}nu.invert=function(Zt,te){for(var Le=te,_e=Le*Le,Rt=_e*_e*_e,zt=0,se,re,ce;zt<Lu&&(re=Le*(ko+Eu*_e+Rt*(Mi+el*_e))-te,ce=ko+3*Eu*_e+Rt*(7*Mi+9*el*_e),Le-=se=re/ce,_e=Le*Le,Rt=_e*_e*_e,!(u(se)<c));++zt);return[Iu*Zt*(ko+3*Eu*_e+Rt*(7*Mi+9*el*_e))/b(Le),R(m(Le)/Iu)]};function we(){return tu(nu).scale(177.158)}function Te(Zt,te){var Le=b(te),_e=b(Zt)*Le;return[Le*m(Zt)/_e,m(te)/_e]}Te.invert=ku(f);function dn(){return tu(Te).scale(144.049).clipAngle(60)}function tn(){var Zt=1,te=0,Le=0,_e=1,Rt=1,zt=0,se,re,ce=null,Fe,Ke,rn,Je=1,vn=1,hn=zu({point:function(Vr,yi){var Br=lr([Vr,yi]);this.stream.point(Br[0],Br[1])}}),Jn=po,Vn,Zn;function Wn(){return Je=Zt*_e,vn=Zt*Rt,Vn=Zn=null,lr}function lr(xr){var Vr=xr[0]*Je,yi=xr[1]*vn;if(zt){var Br=yi*se-Vr*re;Vr=Vr*se+yi*re,yi=Br}return[Vr+te,yi+Le]}return lr.invert=function(xr){var Vr=xr[0]-te,yi=xr[1]-Le;if(zt){var Br=yi*se+Vr*re;Vr=Vr*se-yi*re,yi=Br}return[Vr/Je,yi/vn]},lr.stream=function(xr){return Vn&&Zn===xr?Vn:Vn=hn(Jn(Zn=xr))},lr.postclip=function(xr){return arguments.length?(Jn=xr,ce=Fe=Ke=rn=null,Wn()):Jn},lr.clipExtent=function(xr){return arguments.length?(Jn=xr==null?(ce=Fe=Ke=rn=null,po):qn(ce=+xr[0][0],Fe=+xr[0][1],Ke=+xr[1][0],rn=+xr[1][1]),Wn()):ce==null?null:[[ce,Fe],[Ke,rn]]},lr.scale=function(xr){return arguments.length?(Zt=+xr,Wn()):Zt},lr.translate=function(xr){return arguments.length?(te=+xr[0],Le=+xr[1],Wn()):[te,Le]},lr.angle=function(xr){return arguments.length?(zt=xr%360*o,re=m(zt),se=b(zt),Wn()):zt*a},lr.reflectX=function(xr){return arguments.length?(_e=xr?-1:1,Wn()):_e<0},lr.reflectY=function(xr){return arguments.length?(Rt=xr?-1:1,Wn()):Rt<0},lr.fitExtent=function(xr,Vr){return Cu(lr,xr,Vr)},lr.fitSize=function(xr,Vr){return mu(lr,xr,Vr)},lr.fitWidth=function(xr,Vr){return Uu(lr,xr,Vr)},lr.fitHeight=function(xr,Vr){return zs(lr,xr,Vr)},lr}function wn(Zt,te){var Le=te*te,_e=Le*Le;return[Zt*(.8707-.131979*Le+_e*(-.013791+_e*(.003971*Le-.001529*_e))),te*(1.007226+Le*(.015085+_e*(-.044475+.028874*Le-.005916*_e)))]}wn.invert=function(Zt,te){var Le=te,_e=25,Rt;do{var zt=Le*Le,se=zt*zt;Le-=Rt=(Le*(1.007226+zt*(.015085+se*(-.044475+.028874*zt-.005916*se)))-te)/(1.007226+zt*(.015085*3+se*(-.044475*7+.028874*9*zt-.005916*11*se)))}while(u(Rt)>s&&--_e>0);return[Zt/(.8707+(zt=Le*Le)*(-.131979+zt*(-.013791+zt*zt*zt*(.003971-.001529*zt)))),Le]};function vr(){return tu(wn).scale(175.295)}function Lr(Zt,te){return[b(te)*m(Zt),m(te)]}Lr.invert=ku(R);function Kr(){return tu(Lr).scale(249.5).clipAngle(90+s)}function ti(Zt,te){var Le=b(te),_e=1+b(Zt)*Le;return[Le*m(Zt)/_e,m(te)/_e]}ti.invert=ku(function(Zt){return 2*f(Zt)});function Fr(){return tu(ti).scale(250).clipAngle(142)}function ui(Zt,te){return[M(A((h+te)/2)),-Zt]}ui.invert=function(Zt,te){return[-te,2*f(g(Zt))-h]};function br(){var Zt=eu(ui),te=Zt.center,Le=Zt.rotate;return Zt.center=function(_e){return arguments.length?te([-_e[1],_e[0]]):(_e=te(),[_e[1],-_e[0]])},Zt.rotate=function(_e){return arguments.length?Le([_e[0],_e[1],_e.length>2?_e[2]+90:90]):(_e=Le(),[_e[0],_e[1],_e[2]-90])},Le([0,0,90]).scale(159.155)}t.geoAlbers=_o,t.geoAlbersUsa=ml,t.geoArea=$,t.geoAzimuthalEqualArea=Os,t.geoAzimuthalEqualAreaRaw=mc,t.geoAzimuthalEquidistant=uu,t.geoAzimuthalEquidistantRaw=tl,t.geoBounds=fi,t.geoCentroid=nr,t.geoCircle=_a,t.geoClipAntimeridian=iu,t.geoClipCircle=Wt,t.geoClipExtent=kn,t.geoClipRectangle=qn,t.geoConicConformal=Wi,t.geoConicConformalRaw=qo,t.geoConicEqualArea=Na,t.geoConicEqualAreaRaw=Ys,t.geoConicEquidistant=Fo,t.geoConicEquidistantRaw=wu,t.geoContains=yn,t.geoDistance=Ao,t.geoEqualEarth=we,t.geoEqualEarthRaw=nu,t.geoEquirectangular=Gu,t.geoEquirectangularRaw=ws,t.geoGnomonic=dn,t.geoGnomonicRaw=Te,t.geoGraticule=Ui,t.geoGraticule10=Ja,t.geoIdentity=tn,t.geoInterpolate=So,t.geoLength=oo,t.geoMercator=Qo,t.geoMercatorRaw=Zs,t.geoNaturalEarth1=vr,t.geoNaturalEarth1Raw=wn,t.geoOrthographic=Kr,t.geoOrthographicRaw=Lr,t.geoPath=zl,t.geoProjection=tu,t.geoProjectionMutator=go,t.geoRotation=Ua,t.geoStereographic=Fr,t.geoStereographicRaw=ti,t.geoStream=it,t.geoTransform=ql,t.geoTransverseMercator=br,t.geoTransverseMercatorRaw=ui,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-hexjson@1.1.1@d3-hexjson/build/d3-hexjson.js":function(E,T,e){(function(t,l){l(T,e("./node_modules/_d3-array@1.2.4@d3-array/dist/d3-array.js"))})(this,function(t,l){"use strict";function s(u,f,v){var b=u.layout,y=[],g=0;Object.keys(u.hexes).forEach(function(W){u.hexes[W].key=W,y.push(u.hexes[W])});var _=l.max(y,function(W){return+W.q}),M=l.min(y,function(W){return+W.q}),x=l.max(y,function(W){return+W.r}),m=l.min(y,function(W){return+W.r}),S=_-M+1,P=x-m+1;b==="odd-r"||b==="even-r"?g=l.min([f/((S+.5)*Math.sqrt(3)),v/((P+1/3)*1.5)]):g=l.min([v/((P+.5)*Math.sqrt(3)),f/((S+1/3)*1.5)]);var A=g*Math.sqrt(3),O=h(b,A,g),R=n(O);return y.forEach(function(W){W.qc=W.q-M,W.rc=x-W.r,W.x=c(W,b,A,g),W.y=r(W,b,A,g),W.vertices=O,W.points=R}),y}function c(u,f,v,b){var y=0,g=0;switch(f){case"odd-r":g=u.rc%2==1?v:v/2,y=u.qc*v+g;break;case"even-r":g=u.rc%2==0?v:v/2,y=u.qc*v+g;break;case"odd-q":case"even-q":y=u.qc*b*1.5+b;break}return y}function r(u,f,v,b){var y=0,g=0;switch(f){case"odd-r":case"even-r":y=u.rc*b*1.5+b;break;case"odd-q":g=u.qc%2==1?v:v/2,y=u.rc*v+g;break;case"even-q":g=u.qc%2==0?v:v/2,y=u.rc*v+g;break}return y}function h(u,f,v){var b=[];switch(u){case"odd-r":case"even-r":b.push({x:0,y:0-v}),b.push({x:0+f*.5,y:0-.5*v}),b.push({x:0+f*.5,y:0+.5*v}),b.push({x:0,y:0+v}),b.push({x:0-f*.5,y:0+.5*v}),b.push({x:0-f*.5,y:0-.5*v});break;case"odd-q":case"even-q":b.push({x:0-v,y:0}),b.push({x:0-.5*v,y:0-f*.5}),b.push({x:0+.5*v,y:0-f*.5}),b.push({x:0+v,y:0}),b.push({x:0+.5*v,y:0+f*.5}),b.push({x:0-.5*v,y:0+f*.5});break}return b}function n(u){var f="";return u.forEach(function(v){f+=v.x+","+v.y+" "}),f.substring(0,f.length-1)}function i(u){var f={};f.layout=u.layout,f.hexes={};var v=[];Object.keys(u.hexes).forEach(function(S){v.push(u.hexes[S])});var b=l.max(v,function(S){return+S.q}),y=l.min(v,function(S){return+S.q}),g=l.max(v,function(S){return+S.r}),_=l.min(v,function(S){return+S.r}),M,x,m;for(M=y;M<=b;M++)for(x=_;x<=g;x++)m="Q"+M+"R"+x,f.hexes[m]={q:M,r:x};return f}function a(u,f,v,b){var y=[],g=u.layout;Object.keys(u.hexes).forEach(function(ht){y.push(u.hexes[ht])});var _=l.max(y,function(ht){return+ht.q}),M=l.min(y,function(ht){return+ht.q}),x=l.max(y,function(ht){return+ht.r}),m=l.min(y,function(ht){return+ht.r}),S=_-M+1,P=x-m+1,A;g==="odd-r"||g==="even-r"?A=l.min([f/((S+.5)*Math.sqrt(3)),v/((P+1/3)*1.5)]):A=l.min([v/((P+.5)*Math.sqrt(3)),f/((S+1/3)*1.5)]);var O=A*Math.sqrt(3),R=[],W=A*A*4,F=y.length;if(F>1){y.forEach(function(ht){ht.qc=ht.q-M,ht.rc=x-ht.r,ht.x=c(ht,g,O,A),ht.y=r(ht,g,O,A)});for(var Z=0;Z<F-1;Z++)for(var V=Z+1;V<F;V++){var k=y[Z],Y=y[V];if(k[b]!==Y[b]&&Math.abs(k.q-Y.q)<=1&&Math.abs(k.r-Y.r)<=1&&(k.x-Y.x)*(k.x-Y.x)+(k.y-Y.y)*(k.y-Y.y)<W){var K={};K.x=Y.x+(k.x-Y.x)/2,K.y=Y.y+(k.y-Y.y)/2;var it={},ct=Math.sqrt(3)*4;it.dx=(k.y-Y.y)/ct,it.dy=-(k.x-Y.x)/ct,R.push({x:K.x-2*it.dx,y:K.y-2*it.dy}),R.push({x:K.x-it.dx,y:K.y-it.dy}),R.push({x:K.x,y:K.y}),R.push({x:K.x+it.dx,y:K.y+it.dy}),R.push({x:K.x+2*it.dx,y:K.y+2*it.dy})}}}return R}function o(u,f,v,b){var y=[],g=u.layout;Object.keys(u.hexes).forEach(function(ut){y.push(u.hexes[ut])});var _=l.max(y,function(ut){return+ut.q}),M=l.min(y,function(ut){return+ut.q}),x=l.max(y,function(ut){return+ut.r}),m=l.min(y,function(ut){return+ut.r}),S=_-M+1,P=x-m+1,A;g==="odd-r"||g==="even-r"?A=l.min([f/((S+.5)*Math.sqrt(3)),v/((P+1/3)*1.5)]):A=l.min([v/((P+.5)*Math.sqrt(3)),f/((S+1/3)*1.5)]);var O=A*Math.sqrt(3),R=[],W=A*A*4,F=y.length;if(F>1){y.forEach(function(ut){ut.qc=ut.q-M,ut.rc=x-ut.r,ut.x=c(ut,g,O,A),ut.y=r(ut,g,O,A)});for(var Z=0;Z<F-1;Z++)for(var V=Z+1;V<F;V++){var k=y[Z],Y=y[V];if(k[b]!==Y[b]&&Math.abs(k.q-Y.q)<=1&&Math.abs(k.r-Y.r)<=1&&(k.x-Y.x)*(k.x-Y.x)+(k.y-Y.y)*(k.y-Y.y)<W){var K={};K.x=Y.x+(k.x-Y.x)/2,K.y=Y.y+(k.y-Y.y)/2;var it={},ct=1;k[b]<Y[b]&&(ct=-1);var ht=Math.sqrt(3)*2*ct;it.dx=(k.y-Y.y)/ht,it.dy=-(k.x-Y.x)/ht,R.push({x1:K.x-it.dx,y1:K.y-it.dy,x2:K.x+it.dx,y2:K.y+it.dy})}}}return R}t.renderHexJSON=s,t.getGridForHexJSON=i,t.getBoundaryDotsForHexJSON=a,t.getBoundarySegmentsForHexJSON=o,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-hierarchy@1.1.9@d3-hierarchy/dist/d3-hierarchy.js":function(E,T,e){(function(t,l){l(T)})(this,function(t){"use strict";function l(Vt,ie){return Vt.parent===ie.parent?1:2}function s(Vt){return Vt.reduce(c,0)/Vt.length}function c(Vt,ie){return Vt+ie.x}function r(Vt){return 1+Vt.reduce(h,0)}function h(Vt,ie){return Math.max(Vt,ie.y)}function n(Vt){for(var ie;ie=Vt.children;)Vt=ie[0];return Vt}function i(Vt){for(var ie;ie=Vt.children;)Vt=ie[ie.length-1];return Vt}function a(){var Vt=l,ie=1,Ce=1,ue=!1;function xe($e){var Fn,rr=0;$e.eachAfter(function(ln){var Cr=ln.children;Cr?(ln.x=s(Cr),ln.y=r(Cr)):(ln.x=Fn?rr+=Vt(ln,Fn):0,ln.y=0,Fn=ln)});var En=n($e),Pn=i($e),Er=En.x-Vt(En,Pn)/2,Pr=Pn.x+Vt(Pn,En)/2;return $e.eachAfter(ue?function(ln){ln.x=(ln.x-$e.x)*ie,ln.y=($e.y-ln.y)*Ce}:function(ln){ln.x=(ln.x-Er)/(Pr-Er)*ie,ln.y=(1-($e.y?ln.y/$e.y:1))*Ce})}return xe.separation=function($e){return arguments.length?(Vt=$e,xe):Vt},xe.size=function($e){return arguments.length?(ue=!1,ie=+$e[0],Ce=+$e[1],xe):ue?null:[ie,Ce]},xe.nodeSize=function($e){return arguments.length?(ue=!0,ie=+$e[0],Ce=+$e[1],xe):ue?[ie,Ce]:null},xe}function o(Vt){var ie=0,Ce=Vt.children,ue=Ce&&Ce.length;if(!ue)ie=1;else for(;--ue>=0;)ie+=Ce[ue].value;Vt.value=ie}function u(){return this.eachAfter(o)}function f(Vt){var ie=this,Ce,ue=[ie],xe,$e,Fn;do for(Ce=ue.reverse(),ue=[];ie=Ce.pop();)if(Vt(ie),xe=ie.children,xe)for($e=0,Fn=xe.length;$e<Fn;++$e)ue.push(xe[$e]);while(ue.length);return this}function v(Vt){for(var ie=this,Ce=[ie],ue,xe;ie=Ce.pop();)if(Vt(ie),ue=ie.children,ue)for(xe=ue.length-1;xe>=0;--xe)Ce.push(ue[xe]);return this}function b(Vt){for(var ie=this,Ce=[ie],ue=[],xe,$e,Fn;ie=Ce.pop();)if(ue.push(ie),xe=ie.children,xe)for($e=0,Fn=xe.length;$e<Fn;++$e)Ce.push(xe[$e]);for(;ie=ue.pop();)Vt(ie);return this}function y(Vt){return this.eachAfter(function(ie){for(var Ce=+Vt(ie.data)||0,ue=ie.children,xe=ue&&ue.length;--xe>=0;)Ce+=ue[xe].value;ie.value=Ce})}function g(Vt){return this.eachBefore(function(ie){ie.children&&ie.children.sort(Vt)})}function _(Vt){for(var ie=this,Ce=M(ie,Vt),ue=[ie];ie!==Ce;)ie=ie.parent,ue.push(ie);for(var xe=ue.length;Vt!==Ce;)ue.splice(xe,0,Vt),Vt=Vt.parent;return ue}function M(Vt,ie){if(Vt===ie)return Vt;var Ce=Vt.ancestors(),ue=ie.ancestors(),xe=null;for(Vt=Ce.pop(),ie=ue.pop();Vt===ie;)xe=Vt,Vt=Ce.pop(),ie=ue.pop();return xe}function x(){for(var Vt=this,ie=[Vt];Vt=Vt.parent;)ie.push(Vt);return ie}function m(){var Vt=[];return this.each(function(ie){Vt.push(ie)}),Vt}function S(){var Vt=[];return this.eachBefore(function(ie){ie.children||Vt.push(ie)}),Vt}function P(){var Vt=this,ie=[];return Vt.each(function(Ce){Ce!==Vt&&ie.push({source:Ce.parent,target:Ce})}),ie}function A(Vt,ie){var Ce=new Z(Vt),ue=+Vt.value&&(Ce.value=Vt.value),xe,$e=[Ce],Fn,rr,En,Pn;for(ie==null&&(ie=R);xe=$e.pop();)if(ue&&(xe.value=+xe.data.value),(rr=ie(xe.data))&&(Pn=rr.length))for(xe.children=new Array(Pn),En=Pn-1;En>=0;--En)$e.push(Fn=xe.children[En]=new Z(rr[En])),Fn.parent=xe,Fn.depth=xe.depth+1;return Ce.eachBefore(F)}function O(){return A(this).eachBefore(W)}function R(Vt){return Vt.children}function W(Vt){Vt.data=Vt.data.data}function F(Vt){var ie=0;do Vt.height=ie;while((Vt=Vt.parent)&&Vt.height<++ie)}function Z(Vt){this.data=Vt,this.depth=this.height=0,this.parent=null}Z.prototype=A.prototype={constructor:Z,count:u,each:f,eachAfter:b,eachBefore:v,sum:y,sort:g,path:_,ancestors:x,descendants:m,leaves:S,links:P,copy:O};var V=Array.prototype.slice;function k(Vt){for(var ie=Vt.length,Ce,ue;ie;)ue=Math.random()*ie--|0,Ce=Vt[ie],Vt[ie]=Vt[ue],Vt[ue]=Ce;return Vt}function Y(Vt){for(var ie=0,Ce=(Vt=k(V.call(Vt))).length,ue=[],xe,$e;ie<Ce;)xe=Vt[ie],$e&&ct($e,xe)?++ie:($e=ut(ue=K(ue,xe)),ie=0);return $e}function K(Vt,ie){var Ce,ue;if(ht(ie,Vt))return[ie];for(Ce=0;Ce<Vt.length;++Ce)if(it(ie,Vt[Ce])&&ht(Nt(Vt[Ce],ie),Vt))return[Vt[Ce],ie];for(Ce=0;Ce<Vt.length-1;++Ce)for(ue=Ce+1;ue<Vt.length;++ue)if(it(Nt(Vt[Ce],Vt[ue]),ie)&&it(Nt(Vt[Ce],ie),Vt[ue])&&it(Nt(Vt[ue],ie),Vt[Ce])&&ht(Lt(Vt[Ce],Vt[ue],ie),Vt))return[Vt[Ce],Vt[ue],ie];throw new Error}function it(Vt,ie){var Ce=Vt.r-ie.r,ue=ie.x-Vt.x,xe=ie.y-Vt.y;return Ce<0||Ce*Ce<ue*ue+xe*xe}function ct(Vt,ie){var Ce=Vt.r-ie.r+1e-6,ue=ie.x-Vt.x,xe=ie.y-Vt.y;return Ce>0&&Ce*Ce>ue*ue+xe*xe}function ht(Vt,ie){for(var Ce=0;Ce<ie.length;++Ce)if(!ct(Vt,ie[Ce]))return!1;return!0}function ut(Vt){switch(Vt.length){case 1:return It(Vt[0]);case 2:return Nt(Vt[0],Vt[1]);case 3:return Lt(Vt[0],Vt[1],Vt[2])}}function It(Vt){return{x:Vt.x,y:Vt.y,r:Vt.r}}function Nt(Vt,ie){var Ce=Vt.x,ue=Vt.y,xe=Vt.r,$e=ie.x,Fn=ie.y,rr=ie.r,En=$e-Ce,Pn=Fn-ue,Er=rr-xe,Pr=Math.sqrt(En*En+Pn*Pn);return{x:(Ce+$e+En/Pr*Er)/2,y:(ue+Fn+Pn/Pr*Er)/2,r:(Pr+xe+rr)/2}}function Lt(Vt,ie,Ce){var ue=Vt.x,xe=Vt.y,$e=Vt.r,Fn=ie.x,rr=ie.y,En=ie.r,Pn=Ce.x,Er=Ce.y,Pr=Ce.r,ln=ue-Fn,Cr=ue-Pn,Ar=xe-rr,je=xe-Er,We=En-$e,Ye=Pr-$e,fn=ue*ue+xe*xe-$e*$e,mn=fn-Fn*Fn-rr*rr+En*En,jn=fn-Pn*Pn-Er*Er+Pr*Pr,bn=Cr*Ar-ln*je,Ln=(Ar*jn-je*mn)/(bn*2)-ue,nr=(je*We-Ar*Ye)/bn,Yn=(Cr*mn-ln*jn)/(bn*2)-xe,Mn=(ln*Ye-Cr*We)/bn,Rr=nr*nr+Mn*Mn-1,pr=2*($e+Ln*nr+Yn*Mn),zr=Ln*Ln+Yn*Yn-$e*$e,Pi=-(Rr?(pr+Math.sqrt(pr*pr-4*Rr*zr))/(2*Rr):zr/pr);return{x:ue+Ln+nr*Pi,y:xe+Yn+Mn*Pi,r:Pi}}function _t(Vt,ie,Ce){var ue=Vt.x-ie.x,xe,$e,Fn=Vt.y-ie.y,rr,En,Pn=ue*ue+Fn*Fn;Pn?($e=ie.r+Ce.r,$e*=$e,En=Vt.r+Ce.r,En*=En,$e>En?(xe=(Pn+En-$e)/(2*Pn),rr=Math.sqrt(Math.max(0,En/Pn-xe*xe)),Ce.x=Vt.x-xe*ue-rr*Fn,Ce.y=Vt.y-xe*Fn+rr*ue):(xe=(Pn+$e-En)/(2*Pn),rr=Math.sqrt(Math.max(0,$e/Pn-xe*xe)),Ce.x=ie.x+xe*ue-rr*Fn,Ce.y=ie.y+xe*Fn+rr*ue)):(Ce.x=ie.x+Ce.r,Ce.y=ie.y)}function mt(Vt,ie){var Ce=Vt.r+ie.r-1e-6,ue=ie.x-Vt.x,xe=ie.y-Vt.y;return Ce>0&&Ce*Ce>ue*ue+xe*xe}function At(Vt){var ie=Vt._,Ce=Vt.next._,ue=ie.r+Ce.r,xe=(ie.x*Ce.r+Ce.x*ie.r)/ue,$e=(ie.y*Ce.r+Ce.y*ie.r)/ue;return xe*xe+$e*$e}function rt(Vt){this._=Vt,this.next=null,this.previous=null}function Mt(Vt){if(!(xe=Vt.length))return 0;var ie,Ce,ue,xe,$e,Fn,rr,En,Pn,Er,Pr;if(ie=Vt[0],ie.x=0,ie.y=0,!(xe>1))return ie.r;if(Ce=Vt[1],ie.x=-Ce.r,Ce.x=ie.r,Ce.y=0,!(xe>2))return ie.r+Ce.r;_t(Ce,ie,ue=Vt[2]),ie=new rt(ie),Ce=new rt(Ce),ue=new rt(ue),ie.next=ue.previous=Ce,Ce.next=ie.previous=ue,ue.next=Ce.previous=ie;t:for(rr=3;rr<xe;++rr){_t(ie._,Ce._,ue=Vt[rr]),ue=new rt(ue),En=Ce.next,Pn=ie.previous,Er=Ce._.r,Pr=ie._.r;do if(Er<=Pr){if(mt(En._,ue._)){Ce=En,ie.next=Ce,Ce.previous=ie,--rr;continue t}Er+=En._.r,En=En.next}else{if(mt(Pn._,ue._)){ie=Pn,ie.next=Ce,Ce.previous=ie,--rr;continue t}Pr+=Pn._.r,Pn=Pn.previous}while(En!==Pn.next);for(ue.previous=ie,ue.next=Ce,ie.next=Ce.previous=Ce=ue,$e=At(ie);(ue=ue.next)!==Ce;)(Fn=At(ue))<$e&&(ie=ue,$e=Fn);Ce=ie.next}for(ie=[Ce._],ue=Ce;(ue=ue.next)!==Ce;)ie.push(ue._);for(ue=Y(ie),rr=0;rr<xe;++rr)ie=Vt[rr],ie.x-=ue.x,ie.y-=ue.y;return ue.r}function z(Vt){return Mt(Vt),Vt}function $(Vt){return Vt==null?null:dt(Vt)}function dt(Vt){if(typeof Vt!="function")throw new Error;return Vt}function et(){return 0}function ot(Vt){return function(){return Vt}}function pt(Vt){return Math.sqrt(Vt.value)}function H(){var Vt=null,ie=1,Ce=1,ue=et;function xe($e){return $e.x=ie/2,$e.y=Ce/2,Vt?$e.eachBefore(nt(Vt)).eachAfter(at(ue,.5)).eachBefore(q(1)):$e.eachBefore(nt(pt)).eachAfter(at(et,1)).eachAfter(at(ue,$e.r/Math.min(ie,Ce))).eachBefore(q(Math.min(ie,Ce)/(2*$e.r))),$e}return xe.radius=function($e){return arguments.length?(Vt=$($e),xe):Vt},xe.size=function($e){return arguments.length?(ie=+$e[0],Ce=+$e[1],xe):[ie,Ce]},xe.padding=function($e){return arguments.length?(ue=typeof $e=="function"?$e:ot(+$e),xe):ue},xe}function nt(Vt){return function(ie){ie.children||(ie.r=Math.max(0,+Vt(ie)||0))}}function at(Vt,ie){return function(Ce){if(ue=Ce.children){var ue,xe,$e=ue.length,Fn=Vt(Ce)*ie||0,rr;if(Fn)for(xe=0;xe<$e;++xe)ue[xe].r+=Fn;if(rr=Mt(ue),Fn)for(xe=0;xe<$e;++xe)ue[xe].r-=Fn;Ce.r=rr+Fn}}}function q(Vt){return function(ie){var Ce=ie.parent;ie.r*=Vt,Ce&&(ie.x=Ce.x+Vt*ie.x,ie.y=Ce.y+Vt*ie.y)}}function Et(Vt){Vt.x0=Math.round(Vt.x0),Vt.y0=Math.round(Vt.y0),Vt.x1=Math.round(Vt.x1),Vt.y1=Math.round(Vt.y1)}function vt(Vt,ie,Ce,ue,xe){for(var $e=Vt.children,Fn,rr=-1,En=$e.length,Pn=Vt.value&&(ue-ie)/Vt.value;++rr<En;)Fn=$e[rr],Fn.y0=Ce,Fn.y1=xe,Fn.x0=ie,Fn.x1=ie+=Fn.value*Pn}function Ft(){var Vt=1,ie=1,Ce=0,ue=!1;function xe(Fn){var rr=Fn.height+1;return Fn.x0=Fn.y0=Ce,Fn.x1=Vt,Fn.y1=ie/rr,Fn.eachBefore($e(ie,rr)),ue&&Fn.eachBefore(Et),Fn}function $e(Fn,rr){return function(En){En.children&&vt(En,En.x0,Fn*(En.depth+1)/rr,En.x1,Fn*(En.depth+2)/rr);var Pn=En.x0,Er=En.y0,Pr=En.x1-Ce,ln=En.y1-Ce;Pr<Pn&&(Pn=Pr=(Pn+Pr)/2),ln<Er&&(Er=ln=(Er+ln)/2),En.x0=Pn,En.y0=Er,En.x1=Pr,En.y1=ln}}return xe.round=function(Fn){return arguments.length?(ue=!!Fn,xe):ue},xe.size=function(Fn){return arguments.length?(Vt=+Fn[0],ie=+Fn[1],xe):[Vt,ie]},xe.padding=function(Fn){return arguments.length?(Ce=+Fn,xe):Ce},xe}var Qt="$",ee={depth:-1},Gt={};function $t(Vt){return Vt.id}function Pe(Vt){return Vt.parentId}function me(){var Vt=$t,ie=Pe;function Ce(ue){var xe,$e,Fn=ue.length,rr,En,Pn,Er=new Array(Fn),Pr,ln,Cr={};for($e=0;$e<Fn;++$e)xe=ue[$e],Pn=Er[$e]=new Z(xe),(Pr=Vt(xe,$e,ue))!=null&&(Pr+="")&&(ln=Qt+(Pn.id=Pr),Cr[ln]=ln in Cr?Gt:Pn);for($e=0;$e<Fn;++$e)if(Pn=Er[$e],Pr=ie(ue[$e],$e,ue),Pr==null||!(Pr+="")){if(rr)throw new Error("multiple roots");rr=Pn}else{if(En=Cr[Qt+Pr],!En)throw new Error("missing: "+Pr);if(En===Gt)throw new Error("ambiguous: "+Pr);En.children?En.children.push(Pn):En.children=[Pn],Pn.parent=En}if(!rr)throw new Error("no root");if(rr.parent=ee,rr.eachBefore(function(Ar){Ar.depth=Ar.parent.depth+1,--Fn}).eachBefore(F),rr.parent=null,Fn>0)throw new Error("cycle");return rr}return Ce.id=function(ue){return arguments.length?(Vt=dt(ue),Ce):Vt},Ce.parentId=function(ue){return arguments.length?(ie=dt(ue),Ce):ie},Ce}function le(Vt,ie){return Vt.parent===ie.parent?1:2}function be(Vt){var ie=Vt.children;return ie?ie[0]:Vt.t}function ze(Vt){var ie=Vt.children;return ie?ie[ie.length-1]:Vt.t}function Xe(Vt,ie,Ce){var ue=Ce/(ie.i-Vt.i);ie.c-=ue,ie.s+=Ce,Vt.c+=ue,ie.z+=Ce,ie.m+=Ce}function _n(Vt){for(var ie=0,Ce=0,ue=Vt.children,xe=ue.length,$e;--xe>=0;)$e=ue[xe],$e.z+=ie,$e.m+=ie,ie+=$e.s+(Ce+=$e.c)}function Kn(Vt,ie,Ce){return Vt.a.parent===ie.parent?Vt.a:Ce}function Hn(Vt,ie){this._=Vt,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=ie}Hn.prototype=Object.create(Z.prototype);function nn(Vt){for(var ie=new Hn(Vt,0),Ce,ue=[ie],xe,$e,Fn,rr;Ce=ue.pop();)if($e=Ce._.children)for(Ce.children=new Array(rr=$e.length),Fn=rr-1;Fn>=0;--Fn)ue.push(xe=Ce.children[Fn]=new Hn($e[Fn],Fn)),xe.parent=Ce;return(ie.parent=new Hn(null,0)).children=[ie],ie}function en(){var Vt=le,ie=1,Ce=1,ue=null;function xe(Pn){var Er=nn(Pn);if(Er.eachAfter($e),Er.parent.m=-Er.z,Er.eachBefore(Fn),ue)Pn.eachBefore(En);else{var Pr=Pn,ln=Pn,Cr=Pn;Pn.eachBefore(function(fn){fn.x<Pr.x&&(Pr=fn),fn.x>ln.x&&(ln=fn),fn.depth>Cr.depth&&(Cr=fn)});var Ar=Pr===ln?1:Vt(Pr,ln)/2,je=Ar-Pr.x,We=ie/(ln.x+Ar+je),Ye=Ce/(Cr.depth||1);Pn.eachBefore(function(fn){fn.x=(fn.x+je)*We,fn.y=fn.depth*Ye})}return Pn}function $e(Pn){var Er=Pn.children,Pr=Pn.parent.children,ln=Pn.i?Pr[Pn.i-1]:null;if(Er){_n(Pn);var Cr=(Er[0].z+Er[Er.length-1].z)/2;ln?(Pn.z=ln.z+Vt(Pn._,ln._),Pn.m=Pn.z-Cr):Pn.z=Cr}else ln&&(Pn.z=ln.z+Vt(Pn._,ln._));Pn.parent.A=rr(Pn,ln,Pn.parent.A||Pr[0])}function Fn(Pn){Pn._.x=Pn.z+Pn.parent.m,Pn.m+=Pn.parent.m}function rr(Pn,Er,Pr){if(Er){for(var ln=Pn,Cr=Pn,Ar=Er,je=ln.parent.children[0],We=ln.m,Ye=Cr.m,fn=Ar.m,mn=je.m,jn;Ar=ze(Ar),ln=be(ln),Ar&&ln;)je=be(je),Cr=ze(Cr),Cr.a=Pn,jn=Ar.z+fn-ln.z-We+Vt(Ar._,ln._),jn>0&&(Xe(Kn(Ar,Pn,Pr),Pn,jn),We+=jn,Ye+=jn),fn+=Ar.m,We+=ln.m,mn+=je.m,Ye+=Cr.m;Ar&&!ze(Cr)&&(Cr.t=Ar,Cr.m+=fn-Ye),ln&&!be(je)&&(je.t=ln,je.m+=We-mn,Pr=Pn)}return Pr}function En(Pn){Pn.x*=ie,Pn.y=Pn.depth*Ce}return xe.separation=function(Pn){return arguments.length?(Vt=Pn,xe):Vt},xe.size=function(Pn){return arguments.length?(ue=!1,ie=+Pn[0],Ce=+Pn[1],xe):ue?null:[ie,Ce]},xe.nodeSize=function(Pn){return arguments.length?(ue=!0,ie=+Pn[0],Ce=+Pn[1],xe):ue?[ie,Ce]:null},xe}function An(Vt,ie,Ce,ue,xe){for(var $e=Vt.children,Fn,rr=-1,En=$e.length,Pn=Vt.value&&(xe-Ce)/Vt.value;++rr<En;)Fn=$e[rr],Fn.x0=ie,Fn.x1=ue,Fn.y0=Ce,Fn.y1=Ce+=Fn.value*Pn}var Nn=(1+Math.sqrt(5))/2;function hr(Vt,ie,Ce,ue,xe,$e){for(var Fn=[],rr=ie.children,En,Pn,Er=0,Pr=0,ln=rr.length,Cr,Ar,je=ie.value,We,Ye,fn,mn,jn,bn,Ln;Er<ln;){Cr=xe-Ce,Ar=$e-ue;do We=rr[Pr++].value;while(!We&&Pr<ln);for(Ye=fn=We,bn=Math.max(Ar/Cr,Cr/Ar)/(je*Vt),Ln=We*We*bn,jn=Math.max(fn/Ln,Ln/Ye);Pr<ln;++Pr){if(We+=Pn=rr[Pr].value,Pn<Ye&&(Ye=Pn),Pn>fn&&(fn=Pn),Ln=We*We*bn,mn=Math.max(fn/Ln,Ln/Ye),mn>jn){We-=Pn;break}jn=mn}Fn.push(En={value:We,dice:Cr<Ar,children:rr.slice(Er,Pr)}),En.dice?vt(En,Ce,ue,xe,je?ue+=Ar*We/je:$e):An(En,Ce,ue,je?Ce+=Cr*We/je:xe,$e),je-=We,Er=Pr}return Fn}var fi=function Vt(ie){function Ce(ue,xe,$e,Fn,rr){hr(ie,ue,xe,$e,Fn,rr)}return Ce.ratio=function(ue){return Vt((ue=+ue)>1?ue:1)},Ce}(Nn);function Oe(){var Vt=fi,ie=!1,Ce=1,ue=1,xe=[0],$e=et,Fn=et,rr=et,En=et,Pn=et;function Er(ln){return ln.x0=ln.y0=0,ln.x1=Ce,ln.y1=ue,ln.eachBefore(Pr),xe=[0],ie&&ln.eachBefore(Et),ln}function Pr(ln){var Cr=xe[ln.depth],Ar=ln.x0+Cr,je=ln.y0+Cr,We=ln.x1-Cr,Ye=ln.y1-Cr;We<Ar&&(Ar=We=(Ar+We)/2),Ye<je&&(je=Ye=(je+Ye)/2),ln.x0=Ar,ln.y0=je,ln.x1=We,ln.y1=Ye,ln.children&&(Cr=xe[ln.depth+1]=$e(ln)/2,Ar+=Pn(ln)-Cr,je+=Fn(ln)-Cr,We-=rr(ln)-Cr,Ye-=En(ln)-Cr,We<Ar&&(Ar=We=(Ar+We)/2),Ye<je&&(je=Ye=(je+Ye)/2),Vt(ln,Ar,je,We,Ye))}return Er.round=function(ln){return arguments.length?(ie=!!ln,Er):ie},Er.size=function(ln){return arguments.length?(Ce=+ln[0],ue=+ln[1],Er):[Ce,ue]},Er.tile=function(ln){return arguments.length?(Vt=dt(ln),Er):Vt},Er.padding=function(ln){return arguments.length?Er.paddingInner(ln).paddingOuter(ln):Er.paddingInner()},Er.paddingInner=function(ln){return arguments.length?($e=typeof ln=="function"?ln:ot(+ln),Er):$e},Er.paddingOuter=function(ln){return arguments.length?Er.paddingTop(ln).paddingRight(ln).paddingBottom(ln).paddingLeft(ln):Er.paddingTop()},Er.paddingTop=function(ln){return arguments.length?(Fn=typeof ln=="function"?ln:ot(+ln),Er):Fn},Er.paddingRight=function(ln){return arguments.length?(rr=typeof ln=="function"?ln:ot(+ln),Er):rr},Er.paddingBottom=function(ln){return arguments.length?(En=typeof ln=="function"?ln:ot(+ln),Er):En},Er.paddingLeft=function(ln){return arguments.length?(Pn=typeof ln=="function"?ln:ot(+ln),Er):Pn},Er}function Ae(Vt,ie,Ce,ue,xe){var $e=Vt.children,Fn,rr=$e.length,En,Pn=new Array(rr+1);for(Pn[0]=En=Fn=0;Fn<rr;++Fn)Pn[Fn+1]=En+=$e[Fn].value;Er(0,rr,Vt.value,ie,Ce,ue,xe);function Er(Pr,ln,Cr,Ar,je,We,Ye){if(Pr>=ln-1){var fn=$e[Pr];fn.x0=Ar,fn.y0=je,fn.x1=We,fn.y1=Ye;return}for(var mn=Pn[Pr],jn=Cr/2+mn,bn=Pr+1,Ln=ln-1;bn<Ln;){var nr=bn+Ln>>>1;Pn[nr]<jn?bn=nr+1:Ln=nr}jn-Pn[bn-1]<Pn[bn]-jn&&Pr+1<bn&&--bn;var Yn=Pn[bn]-mn,Mn=Cr-Yn;if(We-Ar>Ye-je){var Rr=(Ar*Mn+We*Yn)/Cr;Er(Pr,bn,Yn,Ar,je,Rr,Ye),Er(bn,ln,Mn,Rr,je,We,Ye)}else{var pr=(je*Mn+Ye*Yn)/Cr;Er(Pr,bn,Yn,Ar,je,We,pr),Er(bn,ln,Mn,Ar,pr,We,Ye)}}}function Jt(Vt,ie,Ce,ue,xe){(Vt.depth&1?An:vt)(Vt,ie,Ce,ue,xe)}var ve=function Vt(ie){function Ce(ue,xe,$e,Fn,rr){if((En=ue._squarify)&&En.ratio===ie)for(var En,Pn,Er,Pr,ln=-1,Cr,Ar=En.length,je=ue.value;++ln<Ar;){for(Pn=En[ln],Er=Pn.children,Pr=Pn.value=0,Cr=Er.length;Pr<Cr;++Pr)Pn.value+=Er[Pr].value;Pn.dice?vt(Pn,xe,$e,Fn,$e+=(rr-$e)*Pn.value/je):An(Pn,xe,$e,xe+=(Fn-xe)*Pn.value/je,rr),je-=Pn.value}else ue._squarify=En=hr(ie,ue,xe,$e,Fn,rr),En.ratio=ie}return Ce.ratio=function(ue){return Vt((ue=+ue)>1?ue:1)},Ce}(Nn);t.cluster=a,t.hierarchy=A,t.pack=H,t.packEnclose=Y,t.packSiblings=z,t.partition=Ft,t.stratify=me,t.tree=en,t.treemap=Oe,t.treemapBinary=Ae,t.treemapDice=vt,t.treemapResquarify=ve,t.treemapSlice=An,t.treemapSliceDice=Jt,t.treemapSquarify=fi,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-path@1.0.9@d3-path/dist/d3-path.js":function(E,T,e){(function(t,l){l(T)})(this,function(t){"use strict";var l=Math.PI,s=2*l,c=1e-6,r=s-c;function h(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function n(){return new h}h.prototype=n.prototype={constructor:h,moveTo:function(a,o){this._+="M"+(this._x0=this._x1=+a)+","+(this._y0=this._y1=+o)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(a,o){this._+="L"+(this._x1=+a)+","+(this._y1=+o)},quadraticCurveTo:function(a,o,u,f){this._+="Q"+ +a+","+ +o+","+(this._x1=+u)+","+(this._y1=+f)},bezierCurveTo:function(a,o,u,f,v,b){this._+="C"+ +a+","+ +o+","+ +u+","+ +f+","+(this._x1=+v)+","+(this._y1=+b)},arcTo:function(a,o,u,f,v){a=+a,o=+o,u=+u,f=+f,v=+v;var b=this._x1,y=this._y1,g=u-a,_=f-o,M=b-a,x=y-o,m=M*M+x*x;if(v<0)throw new Error("negative radius: "+v);if(this._x1===null)this._+="M"+(this._x1=a)+","+(this._y1=o);else if(m>c)if(!(Math.abs(x*g-_*M)>c)||!v)this._+="L"+(this._x1=a)+","+(this._y1=o);else{var S=u-b,P=f-y,A=g*g+_*_,O=S*S+P*P,R=Math.sqrt(A),W=Math.sqrt(m),F=v*Math.tan((l-Math.acos((A+m-O)/(2*R*W)))/2),Z=F/W,V=F/R;Math.abs(Z-1)>c&&(this._+="L"+(a+Z*M)+","+(o+Z*x)),this._+="A"+v+","+v+",0,0,"+ +(x*S>M*P)+","+(this._x1=a+V*g)+","+(this._y1=o+V*_)}},arc:function(a,o,u,f,v,b){a=+a,o=+o,u=+u,b=!!b;var y=u*Math.cos(f),g=u*Math.sin(f),_=a+y,M=o+g,x=1^b,m=b?f-v:v-f;if(u<0)throw new Error("negative radius: "+u);this._x1===null?this._+="M"+_+","+M:(Math.abs(this._x1-_)>c||Math.abs(this._y1-M)>c)&&(this._+="L"+_+","+M),!!u&&(m<0&&(m=m%s+s),m>r?this._+="A"+u+","+u+",0,1,"+x+","+(a-y)+","+(o-g)+"A"+u+","+u+",0,1,"+x+","+(this._x1=_)+","+(this._y1=M):m>c&&(this._+="A"+u+","+u+",0,"+ +(m>=l)+","+x+","+(this._x1=a+u*Math.cos(v))+","+(this._y1=o+u*Math.sin(v))))},rect:function(a,o,u,f){this._+="M"+(this._x0=this._x1=+a)+","+(this._y0=this._y1=+o)+"h"+ +u+"v"+ +f+"h"+-u+"Z"},toString:function(){return this._}},t.path=n,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-path@2.0.0@d3-path/dist/d3-path.js":function(E,T,e){(function(t,l){l(T)})(this,function(t){"use strict";var l=Math.PI,s=2*l,c=1e-6,r=s-c;function h(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function n(){return new h}h.prototype=n.prototype={constructor:h,moveTo:function(a,o){this._+="M"+(this._x0=this._x1=+a)+","+(this._y0=this._y1=+o)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(a,o){this._+="L"+(this._x1=+a)+","+(this._y1=+o)},quadraticCurveTo:function(a,o,u,f){this._+="Q"+ +a+","+ +o+","+(this._x1=+u)+","+(this._y1=+f)},bezierCurveTo:function(a,o,u,f,v,b){this._+="C"+ +a+","+ +o+","+ +u+","+ +f+","+(this._x1=+v)+","+(this._y1=+b)},arcTo:function(a,o,u,f,v){a=+a,o=+o,u=+u,f=+f,v=+v;var b=this._x1,y=this._y1,g=u-a,_=f-o,M=b-a,x=y-o,m=M*M+x*x;if(v<0)throw new Error("negative radius: "+v);if(this._x1===null)this._+="M"+(this._x1=a)+","+(this._y1=o);else if(m>c)if(!(Math.abs(x*g-_*M)>c)||!v)this._+="L"+(this._x1=a)+","+(this._y1=o);else{var S=u-b,P=f-y,A=g*g+_*_,O=S*S+P*P,R=Math.sqrt(A),W=Math.sqrt(m),F=v*Math.tan((l-Math.acos((A+m-O)/(2*R*W)))/2),Z=F/W,V=F/R;Math.abs(Z-1)>c&&(this._+="L"+(a+Z*M)+","+(o+Z*x)),this._+="A"+v+","+v+",0,0,"+ +(x*S>M*P)+","+(this._x1=a+V*g)+","+(this._y1=o+V*_)}},arc:function(a,o,u,f,v,b){a=+a,o=+o,u=+u,b=!!b;var y=u*Math.cos(f),g=u*Math.sin(f),_=a+y,M=o+g,x=1^b,m=b?f-v:v-f;if(u<0)throw new Error("negative radius: "+u);this._x1===null?this._+="M"+_+","+M:(Math.abs(this._x1-_)>c||Math.abs(this._y1-M)>c)&&(this._+="L"+_+","+M),!!u&&(m<0&&(m=m%s+s),m>r?this._+="A"+u+","+u+",0,1,"+x+","+(a-y)+","+(o-g)+"A"+u+","+u+",0,1,"+x+","+(this._x1=_)+","+(this._y1=M):m>c&&(this._+="A"+u+","+u+",0,"+ +(m>=l)+","+x+","+(this._x1=a+u*Math.cos(v))+","+(this._y1=o+u*Math.sin(v))))},rect:function(a,o,u,f){this._+="M"+(this._x0=this._x1=+a)+","+(this._y0=this._y1=+o)+"h"+ +u+"v"+ +f+"h"+-u+"Z"},toString:function(){return this._}},t.path=n,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-sankey@0.9.1@d3-sankey/dist/d3-sankey.js":function(E,T,e){var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js");(function(l,s){s(T,e("./node_modules/_d3-array@1.2.4@d3-array/dist/d3-array.js"),e("./node_modules/_d3-collection@1.0.7@d3-collection/dist/d3-collection.js"),e("./node_modules/_d3-shape@1.3.7@d3-shape/dist/d3-shape.js"))})(this,function(l,s,c,r){"use strict";function h(O){return O.target.depth}function n(O){return O.depth}function i(O,R){return R-1-O.height}function a(O,R){return O.sourceLinks.length?O.depth:R-1}function o(O){return O.targetLinks.length?O.depth:O.sourceLinks.length?s.min(O.sourceLinks,h)-1:0}function u(O){return function(){return O}}function f(O,R){return b(O.source,R.source)||O.index-R.index}function v(O,R){return b(O.target,R.target)||O.index-R.index}function b(O,R){return O.y0-R.y0}function y(O){return O.value}function g(O){return O.index}function _(O){return O.nodes}function M(O){return O.links}function x(O,R){var W=O.get(R);if(!W)throw new Error("missing: "+R);return W}function m(){var O=0,R=0,W=1,F=1,Z=24,V=8,k=g,Y=a,K,it=_,ct=M,ht=6;function ut(){var At={nodes:it.apply(null,arguments),links:ct.apply(null,arguments)};return It(At),Nt(At),Lt(At),_t(At),mt(At),At}ut.update=function(At){return mt(At),At},ut.nodeId=function(At){return arguments.length?(k=typeof At=="function"?At:u(At),ut):k},ut.nodeAlign=function(At){return arguments.length?(Y=typeof At=="function"?At:u(At),ut):Y},ut.nodeSort=function(At){return arguments.length?(K=At,ut):K},ut.nodeWidth=function(At){return arguments.length?(Z=+At,ut):Z},ut.nodePadding=function(At){return arguments.length?(V=+At,ut):V},ut.nodes=function(At){return arguments.length?(it=typeof At=="function"?At:u(At),ut):it},ut.links=function(At){return arguments.length?(ct=typeof At=="function"?At:u(At),ut):ct},ut.size=function(At){return arguments.length?(O=R=0,W=+At[0],F=+At[1],ut):[W-O,F-R]},ut.extent=function(At){return arguments.length?(O=+At[0][0],W=+At[1][0],R=+At[0][1],F=+At[1][1],ut):[[O,R],[W,F]]},ut.iterations=function(At){return arguments.length?(ht=+At,ut):ht};function It(At){At.nodes.forEach(function(Mt,z){Mt.index=z,Mt.sourceLinks=[],Mt.targetLinks=[]});var rt=c.map(At.nodes,k);At.links.forEach(function(Mt,z){Mt.index=z;var $=Mt.source,dt=Mt.target;typeof $!="object"&&($=Mt.source=x(rt,$)),typeof dt!="object"&&(dt=Mt.target=x(rt,dt)),$.sourceLinks.push(Mt),dt.targetLinks.push(Mt)})}function Nt(At){At.nodes.forEach(function(rt){rt.value=Math.max(s.sum(rt.sourceLinks,y),s.sum(rt.targetLinks,y))})}function Lt(At){var rt,Mt,z,$=At.nodes.length;for(rt=At.nodes,Mt=[],z=0;rt.length;++z,rt=Mt,Mt=[]){if(z>$)throw new Error("circular link");rt.forEach(function(et){et.depth=z,et.sourceLinks.forEach(function(ot){Mt.indexOf(ot.target)<0&&Mt.push(ot.target)})})}for(rt=At.nodes,Mt=[],z=0;rt.length;++z,rt=Mt,Mt=[]){if(z>$)throw new Error("circular link");rt.forEach(function(et){et.height=z,et.targetLinks.forEach(function(ot){Mt.indexOf(ot.source)<0&&Mt.push(ot.source)})})}var dt=(W-O-Z)/(z-1);At.nodes.forEach(function(et){et.x1=(et.x0=O+Math.max(0,Math.min(z-1,Math.floor(Y.call(null,et,z))))*dt)+Z})}function _t(At){var rt=c.nest().key(function(pt){return pt.x0}).sortKeys(s.ascending).entries(At.nodes).map(function(pt){return pt.values});$(),ot();for(var Mt=.9,z=ht;z>0;--z,Mt*=.9)et(Mt),ot(),dt(Mt),ot();function $(){var pt=s.min(rt,function(H){return(F-R-(H.length-1)*V)/s.sum(H,y)});rt.forEach(function(H){K!=null&&H.sort(K),H.forEach(function(nt,at){nt.y1=(nt.y0=at)+nt.value*pt})}),At.links.forEach(function(H){H.width=H.value*pt})}function dt(pt){rt.forEach(function(H){H.forEach(function(nt){var at,q,Et,vt,Ft=nt.y0;try{for(var Qt=t.__values(nt.sourceLinks.sort(v)),ee=Qt.next();!ee.done;ee=Qt.next()){var Gt=ee.value,$t=Gt.target,Pe=Gt.width,me=Gt.value;if(me>0){var le=0;try{for(var be=(Et=void 0,t.__values($t.targetLinks)),ze=be.next();!ze.done;ze=be.next()){var Xe=ze.value,_n=Xe.source,Kn=Xe.width;if(_n===nt)break;le+=Kn+V/2}}catch(Hn){Et={error:Hn}}finally{try{ze&&!ze.done&&(vt=be.return)&&vt.call(be)}finally{if(Et)throw Et.error}}le=(Ft-le-$t.y0)*pt*(me/Math.min(nt.value,$t.value)),$t.y0+=le,$t.y1+=le}Ft+=Pe+V/2}}catch(Hn){at={error:Hn}}finally{try{ee&&!ee.done&&(q=Qt.return)&&q.call(Qt)}finally{if(at)throw at.error}}})})}function et(pt){rt.slice().reverse().forEach(function(H){H.forEach(function(nt){var at,q,Et,vt,Ft=nt.y0;try{for(var Qt=t.__values(nt.targetLinks.sort(f)),ee=Qt.next();!ee.done;ee=Qt.next()){var Gt=ee.value,$t=Gt.source,Pe=Gt.width,me=Gt.value;if(me>0){var le=0;try{for(var be=(Et=void 0,t.__values($t.sourceLinks)),ze=be.next();!ze.done;ze=be.next()){var Xe=ze.value,_n=Xe.target,Kn=Xe.width;if(_n===nt)break;le+=Kn+V/2}}catch(Hn){Et={error:Hn}}finally{try{ze&&!ze.done&&(vt=be.return)&&vt.call(be)}finally{if(Et)throw Et.error}}le=(Ft-le-$t.y0)*pt*(me/Math.min(nt.value,$t.value)),$t.y0+=le,$t.y1+=le}Ft+=Pe+V/2}}catch(Hn){at={error:Hn}}finally{try{ee&&!ee.done&&(q=Qt.return)&&q.call(Qt)}finally{if(at)throw at.error}}})})}function ot(){rt.forEach(function(pt){var H,nt,at=R,q=pt.length,Et;for(K===void 0&&pt.sort(b),Et=0;Et<q;++Et)H=pt[Et],nt=at-H.y0,nt>0&&(H.y0+=nt,H.y1+=nt),at=H.y1+V;if(nt=at-V-F,nt>0)for(at=H.y0-=nt,H.y1-=nt,Et=q-2;Et>=0;--Et)H=pt[Et],nt=H.y1+V-at,nt>0&&(H.y0-=nt,H.y1-=nt),at=H.y0})}}function mt(At){At.nodes.forEach(function(rt){rt.sourceLinks.sort(v),rt.targetLinks.sort(f)}),At.nodes.forEach(function(rt){var Mt=rt.y0,z=Mt;rt.sourceLinks.forEach(function($){$.y0=Mt+$.width/2,Mt+=$.width}),rt.targetLinks.forEach(function($){$.y1=z+$.width/2,z+=$.width})})}return ut}function S(O){return[O.source.x1,O.y0]}function P(O){return[O.target.x0,O.y1]}function A(){return r.linkHorizontal().source(S).target(P)}l.sankey=m,l.sankeyCenter=o,l.sankeyLeft=n,l.sankeyRight=i,l.sankeyJustify=a,l.sankeyLinkHorizontal=A,Object.defineProperty(l,"__esModule",{value:!0})})},"./node_modules/_d3-shape@1.3.7@d3-shape/dist/d3-shape.js":function(E,T,e){(function(t,l){l(T,e("./node_modules/_d3-path@1.0.9@d3-path/dist/d3-path.js"))})(this,function(t,l){"use strict";function s(Ne){return function(){return Ne}}var c=Math.abs,r=Math.atan2,h=Math.cos,n=Math.max,i=Math.min,a=Math.sin,o=Math.sqrt,u=1e-12,f=Math.PI,v=f/2,b=2*f;function y(Ne){return Ne>1?0:Ne<-1?f:Math.acos(Ne)}function g(Ne){return Ne>=1?v:Ne<=-1?-v:Math.asin(Ne)}function _(Ne){return Ne.innerRadius}function M(Ne){return Ne.outerRadius}function x(Ne){return Ne.startAngle}function m(Ne){return Ne.endAngle}function S(Ne){return Ne&&Ne.padAngle}function P(Ne,oe,Wt,Ee,an,Un,qn,kn){var Xr=Wt-Ne,Si=Ee-oe,Ti=qn-an,ki=kn-Un,sa=ki*Xr-Ti*Si;if(!(sa*sa<u))return sa=(Ti*(oe-Un)-ki*(Ne-an))/sa,[Ne+sa*Xr,oe+sa*Si]}function A(Ne,oe,Wt,Ee,an,Un,qn){var kn=Ne-Wt,Xr=oe-Ee,Si=(qn?Un:-Un)/o(kn*kn+Xr*Xr),Ti=Si*Xr,ki=-Si*kn,sa=Ne+Ti,$a=oe+ki,ba=Wt+Ti,bo=Ee+ki,Fa=(sa+ba)/2,oo=($a+bo)/2,Eo=ba-sa,Qa=bo-$a,Ao=Eo*Eo+Qa*Qa,as=an-Un,No=sa*bo-ba*$a,xs=(Qa<0?-1:1)*o(n(0,as*as*Ao-No*No)),Co=(No*Qa-Eo*xs)/Ao,qa=(-No*Eo-Qa*xs)/Ao,Ts=(No*Qa+Eo*xs)/Ao,ls=(-No*Eo+Qa*xs)/Ao,wa=Co-Fa,yn=qa-oo,dr=Ts-Fa,kr=ls-oo;return wa*wa+yn*yn>dr*dr+kr*kr&&(Co=Ts,qa=ls),{cx:Co,cy:qa,x01:-Ti,y01:-ki,x11:Co*(an/as-1),y11:qa*(an/as-1)}}function O(){var Ne=_,oe=M,Wt=s(0),Ee=null,an=x,Un=m,qn=S,kn=null;function Xr(){var Si,Ti,ki=+Ne.apply(this,arguments),sa=+oe.apply(this,arguments),$a=an.apply(this,arguments)-v,ba=Un.apply(this,arguments)-v,bo=c(ba-$a),Fa=ba>$a;if(kn||(kn=Si=l.path()),sa<ki&&(Ti=sa,sa=ki,ki=Ti),!(sa>u))kn.moveTo(0,0);else if(bo>b-u)kn.moveTo(sa*h($a),sa*a($a)),kn.arc(0,0,sa,$a,ba,!Fa),ki>u&&(kn.moveTo(ki*h(ba),ki*a(ba)),kn.arc(0,0,ki,ba,$a,Fa));else{var oo=$a,Eo=ba,Qa=$a,Ao=ba,as=bo,No=bo,xs=qn.apply(this,arguments)/2,Co=xs>u&&(Ee?+Ee.apply(this,arguments):o(ki*ki+sa*sa)),qa=i(c(sa-ki)/2,+Wt.apply(this,arguments)),Ts=qa,ls=qa,wa,yn;if(Co>u){var dr=g(Co/ki*a(xs)),kr=g(Co/sa*a(xs));(as-=dr*2)>u?(dr*=Fa?1:-1,Qa+=dr,Ao-=dr):(as=0,Qa=Ao=($a+ba)/2),(No-=kr*2)>u?(kr*=Fa?1:-1,oo+=kr,Eo-=kr):(No=0,oo=Eo=($a+ba)/2)}var Ui=sa*h(oo),Ja=sa*a(oo),So=ki*h(Ao),po=ki*a(Ao);if(qa>u){var ea=sa*h(Eo),to=sa*a(Eo),bs=ki*h(Qa),Es=ki*a(Qa),ka;if(bo<f&&(ka=P(Ui,Ja,bs,Es,ea,to,So,po))){var bu=Ui-ka[0],Wo=Ja-ka[1],As=ea-ka[0],Qs=to-ka[1],vs=1/a(y((bu*As+Wo*Qs)/(o(bu*bu+Wo*Wo)*o(As*As+Qs*Qs)))/2),ps=o(ka[0]*ka[0]+ka[1]*ka[1]);Ts=i(qa,(ki-ps)/(vs-1)),ls=i(qa,(sa-ps)/(vs+1))}}No>u?ls>u?(wa=A(bs,Es,Ui,Ja,sa,ls,Fa),yn=A(ea,to,So,po,sa,ls,Fa),kn.moveTo(wa.cx+wa.x01,wa.cy+wa.y01),ls<qa?kn.arc(wa.cx,wa.cy,ls,r(wa.y01,wa.x01),r(yn.y01,yn.x01),!Fa):(kn.arc(wa.cx,wa.cy,ls,r(wa.y01,wa.x01),r(wa.y11,wa.x11),!Fa),kn.arc(0,0,sa,r(wa.cy+wa.y11,wa.cx+wa.x11),r(yn.cy+yn.y11,yn.cx+yn.x11),!Fa),kn.arc(yn.cx,yn.cy,ls,r(yn.y11,yn.x11),r(yn.y01,yn.x01),!Fa))):(kn.moveTo(Ui,Ja),kn.arc(0,0,sa,oo,Eo,!Fa)):kn.moveTo(Ui,Ja),!(ki>u)||!(as>u)?kn.lineTo(So,po):Ts>u?(wa=A(So,po,ea,to,ki,-Ts,Fa),yn=A(Ui,Ja,bs,Es,ki,-Ts,Fa),kn.lineTo(wa.cx+wa.x01,wa.cy+wa.y01),Ts<qa?kn.arc(wa.cx,wa.cy,Ts,r(wa.y01,wa.x01),r(yn.y01,yn.x01),!Fa):(kn.arc(wa.cx,wa.cy,Ts,r(wa.y01,wa.x01),r(wa.y11,wa.x11),!Fa),kn.arc(0,0,ki,r(wa.cy+wa.y11,wa.cx+wa.x11),r(yn.cy+yn.y11,yn.cx+yn.x11),Fa),kn.arc(yn.cx,yn.cy,Ts,r(yn.y11,yn.x11),r(yn.y01,yn.x01),!Fa))):kn.arc(0,0,ki,Ao,Qa,Fa)}if(kn.closePath(),Si)return kn=null,Si+""||null}return Xr.centroid=function(){var Si=(+Ne.apply(this,arguments)+ +oe.apply(this,arguments))/2,Ti=(+an.apply(this,arguments)+ +Un.apply(this,arguments))/2-f/2;return[h(Ti)*Si,a(Ti)*Si]},Xr.innerRadius=function(Si){return arguments.length?(Ne=typeof Si=="function"?Si:s(+Si),Xr):Ne},Xr.outerRadius=function(Si){return arguments.length?(oe=typeof Si=="function"?Si:s(+Si),Xr):oe},Xr.cornerRadius=function(Si){return arguments.length?(Wt=typeof Si=="function"?Si:s(+Si),Xr):Wt},Xr.padRadius=function(Si){return arguments.length?(Ee=Si==null?null:typeof Si=="function"?Si:s(+Si),Xr):Ee},Xr.startAngle=function(Si){return arguments.length?(an=typeof Si=="function"?Si:s(+Si),Xr):an},Xr.endAngle=function(Si){return arguments.length?(Un=typeof Si=="function"?Si:s(+Si),Xr):Un},Xr.padAngle=function(Si){return arguments.length?(qn=typeof Si=="function"?Si:s(+Si),Xr):qn},Xr.context=function(Si){return arguments.length?(kn=Si==null?null:Si,Xr):kn},Xr}function R(Ne){this._context=Ne}R.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(oe,Wt){switch(oe=+oe,Wt=+Wt,this._point){case 0:this._point=1,this._line?this._context.lineTo(oe,Wt):this._context.moveTo(oe,Wt);break;case 1:this._point=2;default:this._context.lineTo(oe,Wt);break}}};function W(Ne){return new R(Ne)}function F(Ne){return Ne[0]}function Z(Ne){return Ne[1]}function V(){var Ne=F,oe=Z,Wt=s(!0),Ee=null,an=W,Un=null;function qn(kn){var Xr,Si=kn.length,Ti,ki=!1,sa;for(Ee==null&&(Un=an(sa=l.path())),Xr=0;Xr<=Si;++Xr)!(Xr<Si&&Wt(Ti=kn[Xr],Xr,kn))===ki&&((ki=!ki)?Un.lineStart():Un.lineEnd()),ki&&Un.point(+Ne(Ti,Xr,kn),+oe(Ti,Xr,kn));if(sa)return Un=null,sa+""||null}return qn.x=function(kn){return arguments.length?(Ne=typeof kn=="function"?kn:s(+kn),qn):Ne},qn.y=function(kn){return arguments.length?(oe=typeof kn=="function"?kn:s(+kn),qn):oe},qn.defined=function(kn){return arguments.length?(Wt=typeof kn=="function"?kn:s(!!kn),qn):Wt},qn.curve=function(kn){return arguments.length?(an=kn,Ee!=null&&(Un=an(Ee)),qn):an},qn.context=function(kn){return arguments.length?(kn==null?Ee=Un=null:Un=an(Ee=kn),qn):Ee},qn}function k(){var Ne=F,oe=null,Wt=s(0),Ee=Z,an=s(!0),Un=null,qn=W,kn=null;function Xr(Ti){var ki,sa,$a,ba=Ti.length,bo,Fa=!1,oo,Eo=new Array(ba),Qa=new Array(ba);for(Un==null&&(kn=qn(oo=l.path())),ki=0;ki<=ba;++ki){if(!(ki<ba&&an(bo=Ti[ki],ki,Ti))===Fa)if(Fa=!Fa)sa=ki,kn.areaStart(),kn.lineStart();else{for(kn.lineEnd(),kn.lineStart(),$a=ki-1;$a>=sa;--$a)kn.point(Eo[$a],Qa[$a]);kn.lineEnd(),kn.areaEnd()}Fa&&(Eo[ki]=+Ne(bo,ki,Ti),Qa[ki]=+Wt(bo,ki,Ti),kn.point(oe?+oe(bo,ki,Ti):Eo[ki],Ee?+Ee(bo,ki,Ti):Qa[ki]))}if(oo)return kn=null,oo+""||null}function Si(){return V().defined(an).curve(qn).context(Un)}return Xr.x=function(Ti){return arguments.length?(Ne=typeof Ti=="function"?Ti:s(+Ti),oe=null,Xr):Ne},Xr.x0=function(Ti){return arguments.length?(Ne=typeof Ti=="function"?Ti:s(+Ti),Xr):Ne},Xr.x1=function(Ti){return arguments.length?(oe=Ti==null?null:typeof Ti=="function"?Ti:s(+Ti),Xr):oe},Xr.y=function(Ti){return arguments.length?(Wt=typeof Ti=="function"?Ti:s(+Ti),Ee=null,Xr):Wt},Xr.y0=function(Ti){return arguments.length?(Wt=typeof Ti=="function"?Ti:s(+Ti),Xr):Wt},Xr.y1=function(Ti){return arguments.length?(Ee=Ti==null?null:typeof Ti=="function"?Ti:s(+Ti),Xr):Ee},Xr.lineX0=Xr.lineY0=function(){return Si().x(Ne).y(Wt)},Xr.lineY1=function(){return Si().x(Ne).y(Ee)},Xr.lineX1=function(){return Si().x(oe).y(Wt)},Xr.defined=function(Ti){return arguments.length?(an=typeof Ti=="function"?Ti:s(!!Ti),Xr):an},Xr.curve=function(Ti){return arguments.length?(qn=Ti,Un!=null&&(kn=qn(Un)),Xr):qn},Xr.context=function(Ti){return arguments.length?(Ti==null?Un=kn=null:kn=qn(Un=Ti),Xr):Un},Xr}function Y(Ne,oe){return oe<Ne?-1:oe>Ne?1:oe>=Ne?0:NaN}function K(Ne){return Ne}function it(){var Ne=K,oe=Y,Wt=null,Ee=s(0),an=s(b),Un=s(0);function qn(kn){var Xr,Si=kn.length,Ti,ki,sa=0,$a=new Array(Si),ba=new Array(Si),bo=+Ee.apply(this,arguments),Fa=Math.min(b,Math.max(-b,an.apply(this,arguments)-bo)),oo,Eo=Math.min(Math.abs(Fa)/Si,Un.apply(this,arguments)),Qa=Eo*(Fa<0?-1:1),Ao;for(Xr=0;Xr<Si;++Xr)(Ao=ba[$a[Xr]=Xr]=+Ne(kn[Xr],Xr,kn))>0&&(sa+=Ao);for(oe!=null?$a.sort(function(as,No){return oe(ba[as],ba[No])}):Wt!=null&&$a.sort(function(as,No){return Wt(kn[as],kn[No])}),Xr=0,ki=sa?(Fa-Si*Qa)/sa:0;Xr<Si;++Xr,bo=oo)Ti=$a[Xr],Ao=ba[Ti],oo=bo+(Ao>0?Ao*ki:0)+Qa,ba[Ti]={data:kn[Ti],index:Xr,value:Ao,startAngle:bo,endAngle:oo,padAngle:Eo};return ba}return qn.value=function(kn){return arguments.length?(Ne=typeof kn=="function"?kn:s(+kn),qn):Ne},qn.sortValues=function(kn){return arguments.length?(oe=kn,Wt=null,qn):oe},qn.sort=function(kn){return arguments.length?(Wt=kn,oe=null,qn):Wt},qn.startAngle=function(kn){return arguments.length?(Ee=typeof kn=="function"?kn:s(+kn),qn):Ee},qn.endAngle=function(kn){return arguments.length?(an=typeof kn=="function"?kn:s(+kn),qn):an},qn.padAngle=function(kn){return arguments.length?(Un=typeof kn=="function"?kn:s(+kn),qn):Un},qn}var ct=ut(W);function ht(Ne){this._curve=Ne}ht.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(oe,Wt){this._curve.point(Wt*Math.sin(oe),Wt*-Math.cos(oe))}};function ut(Ne){function oe(Wt){return new ht(Ne(Wt))}return oe._curve=Ne,oe}function It(Ne){var oe=Ne.curve;return Ne.angle=Ne.x,delete Ne.x,Ne.radius=Ne.y,delete Ne.y,Ne.curve=function(Wt){return arguments.length?oe(ut(Wt)):oe()._curve},Ne}function Nt(){return It(V().curve(ct))}function Lt(){var Ne=k().curve(ct),oe=Ne.curve,Wt=Ne.lineX0,Ee=Ne.lineX1,an=Ne.lineY0,Un=Ne.lineY1;return Ne.angle=Ne.x,delete Ne.x,Ne.startAngle=Ne.x0,delete Ne.x0,Ne.endAngle=Ne.x1,delete Ne.x1,Ne.radius=Ne.y,delete Ne.y,Ne.innerRadius=Ne.y0,delete Ne.y0,Ne.outerRadius=Ne.y1,delete Ne.y1,Ne.lineStartAngle=function(){return It(Wt())},delete Ne.lineX0,Ne.lineEndAngle=function(){return It(Ee())},delete Ne.lineX1,Ne.lineInnerRadius=function(){return It(an())},delete Ne.lineY0,Ne.lineOuterRadius=function(){return It(Un())},delete Ne.lineY1,Ne.curve=function(qn){return arguments.length?oe(ut(qn)):oe()._curve},Ne}function _t(Ne,oe){return[(oe=+oe)*Math.cos(Ne-=Math.PI/2),oe*Math.sin(Ne)]}var mt=Array.prototype.slice;function At(Ne){return Ne.source}function rt(Ne){return Ne.target}function Mt(Ne){var oe=At,Wt=rt,Ee=F,an=Z,Un=null;function qn(){var kn,Xr=mt.call(arguments),Si=oe.apply(this,Xr),Ti=Wt.apply(this,Xr);if(Un||(Un=kn=l.path()),Ne(Un,+Ee.apply(this,(Xr[0]=Si,Xr)),+an.apply(this,Xr),+Ee.apply(this,(Xr[0]=Ti,Xr)),+an.apply(this,Xr)),kn)return Un=null,kn+""||null}return qn.source=function(kn){return arguments.length?(oe=kn,qn):oe},qn.target=function(kn){return arguments.length?(Wt=kn,qn):Wt},qn.x=function(kn){return arguments.length?(Ee=typeof kn=="function"?kn:s(+kn),qn):Ee},qn.y=function(kn){return arguments.length?(an=typeof kn=="function"?kn:s(+kn),qn):an},qn.context=function(kn){return arguments.length?(Un=kn==null?null:kn,qn):Un},qn}function z(Ne,oe,Wt,Ee,an){Ne.moveTo(oe,Wt),Ne.bezierCurveTo(oe=(oe+Ee)/2,Wt,oe,an,Ee,an)}function $(Ne,oe,Wt,Ee,an){Ne.moveTo(oe,Wt),Ne.bezierCurveTo(oe,Wt=(Wt+an)/2,Ee,Wt,Ee,an)}function dt(Ne,oe,Wt,Ee,an){var Un=_t(oe,Wt),qn=_t(oe,Wt=(Wt+an)/2),kn=_t(Ee,Wt),Xr=_t(Ee,an);Ne.moveTo(Un[0],Un[1]),Ne.bezierCurveTo(qn[0],qn[1],kn[0],kn[1],Xr[0],Xr[1])}function et(){return Mt(z)}function ot(){return Mt($)}function pt(){var Ne=Mt(dt);return Ne.angle=Ne.x,delete Ne.x,Ne.radius=Ne.y,delete Ne.y,Ne}var H={draw:function(oe,Wt){var Ee=Math.sqrt(Wt/f);oe.moveTo(Ee,0),oe.arc(0,0,Ee,0,b)}},nt={draw:function(oe,Wt){var Ee=Math.sqrt(Wt/5)/2;oe.moveTo(-3*Ee,-Ee),oe.lineTo(-Ee,-Ee),oe.lineTo(-Ee,-3*Ee),oe.lineTo(Ee,-3*Ee),oe.lineTo(Ee,-Ee),oe.lineTo(3*Ee,-Ee),oe.lineTo(3*Ee,Ee),oe.lineTo(Ee,Ee),oe.lineTo(Ee,3*Ee),oe.lineTo(-Ee,3*Ee),oe.lineTo(-Ee,Ee),oe.lineTo(-3*Ee,Ee),oe.closePath()}},at=Math.sqrt(1/3),q=at*2,Et={draw:function(oe,Wt){var Ee=Math.sqrt(Wt/q),an=Ee*at;oe.moveTo(0,-Ee),oe.lineTo(an,0),oe.lineTo(0,Ee),oe.lineTo(-an,0),oe.closePath()}},vt=.8908130915292852,Ft=Math.sin(f/10)/Math.sin(7*f/10),Qt=Math.sin(b/10)*Ft,ee=-Math.cos(b/10)*Ft,Gt={draw:function(oe,Wt){var Ee=Math.sqrt(Wt*vt),an=Qt*Ee,Un=ee*Ee;oe.moveTo(0,-Ee),oe.lineTo(an,Un);for(var qn=1;qn<5;++qn){var kn=b*qn/5,Xr=Math.cos(kn),Si=Math.sin(kn);oe.lineTo(Si*Ee,-Xr*Ee),oe.lineTo(Xr*an-Si*Un,Si*an+Xr*Un)}oe.closePath()}},$t={draw:function(oe,Wt){var Ee=Math.sqrt(Wt),an=-Ee/2;oe.rect(an,an,Ee,Ee)}},Pe=Math.sqrt(3),me={draw:function(oe,Wt){var Ee=-Math.sqrt(Wt/(Pe*3));oe.moveTo(0,Ee*2),oe.lineTo(-Pe*Ee,-Ee),oe.lineTo(Pe*Ee,-Ee),oe.closePath()}},le=-.5,be=Math.sqrt(3)/2,ze=1/Math.sqrt(12),Xe=(ze/2+1)*3,_n={draw:function(oe,Wt){var Ee=Math.sqrt(Wt/Xe),an=Ee/2,Un=Ee*ze,qn=an,kn=Ee*ze+Ee,Xr=-qn,Si=kn;oe.moveTo(an,Un),oe.lineTo(qn,kn),oe.lineTo(Xr,Si),oe.lineTo(le*an-be*Un,be*an+le*Un),oe.lineTo(le*qn-be*kn,be*qn+le*kn),oe.lineTo(le*Xr-be*Si,be*Xr+le*Si),oe.lineTo(le*an+be*Un,le*Un-be*an),oe.lineTo(le*qn+be*kn,le*kn-be*qn),oe.lineTo(le*Xr+be*Si,le*Si-be*Xr),oe.closePath()}},Kn=[H,nt,Et,$t,Gt,me,_n];function Hn(){var Ne=s(H),oe=s(64),Wt=null;function Ee(){var an;if(Wt||(Wt=an=l.path()),Ne.apply(this,arguments).draw(Wt,+oe.apply(this,arguments)),an)return Wt=null,an+""||null}return Ee.type=function(an){return arguments.length?(Ne=typeof an=="function"?an:s(an),Ee):Ne},Ee.size=function(an){return arguments.length?(oe=typeof an=="function"?an:s(+an),Ee):oe},Ee.context=function(an){return arguments.length?(Wt=an==null?null:an,Ee):Wt},Ee}function nn(){}function en(Ne,oe,Wt){Ne._context.bezierCurveTo((2*Ne._x0+Ne._x1)/3,(2*Ne._y0+Ne._y1)/3,(Ne._x0+2*Ne._x1)/3,(Ne._y0+2*Ne._y1)/3,(Ne._x0+4*Ne._x1+oe)/6,(Ne._y0+4*Ne._y1+Wt)/6)}function An(Ne){this._context=Ne}An.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:en(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(oe,Wt){switch(oe=+oe,Wt=+Wt,this._point){case 0:this._point=1,this._line?this._context.lineTo(oe,Wt):this._context.moveTo(oe,Wt);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:en(this,oe,Wt);break}this._x0=this._x1,this._x1=oe,this._y0=this._y1,this._y1=Wt}};function Nn(Ne){return new An(Ne)}function hr(Ne){this._context=Ne}hr.prototype={areaStart:nn,areaEnd:nn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(oe,Wt){switch(oe=+oe,Wt=+Wt,this._point){case 0:this._point=1,this._x2=oe,this._y2=Wt;break;case 1:this._point=2,this._x3=oe,this._y3=Wt;break;case 2:this._point=3,this._x4=oe,this._y4=Wt,this._context.moveTo((this._x0+4*this._x1+oe)/6,(this._y0+4*this._y1+Wt)/6);break;default:en(this,oe,Wt);break}this._x0=this._x1,this._x1=oe,this._y0=this._y1,this._y1=Wt}};function fi(Ne){return new hr(Ne)}function Oe(Ne){this._context=Ne}Oe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(oe,Wt){switch(oe=+oe,Wt=+Wt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var Ee=(this._x0+4*this._x1+oe)/6,an=(this._y0+4*this._y1+Wt)/6;this._line?this._context.lineTo(Ee,an):this._context.moveTo(Ee,an);break;case 3:this._point=4;default:en(this,oe,Wt);break}this._x0=this._x1,this._x1=oe,this._y0=this._y1,this._y1=Wt}};function Ae(Ne){return new Oe(Ne)}function Jt(Ne,oe){this._basis=new An(Ne),this._beta=oe}Jt.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var oe=this._x,Wt=this._y,Ee=oe.length-1;if(Ee>0)for(var an=oe[0],Un=Wt[0],qn=oe[Ee]-an,kn=Wt[Ee]-Un,Xr=-1,Si;++Xr<=Ee;)Si=Xr/Ee,this._basis.point(this._beta*oe[Xr]+(1-this._beta)*(an+Si*qn),this._beta*Wt[Xr]+(1-this._beta)*(Un+Si*kn));this._x=this._y=null,this._basis.lineEnd()},point:function(oe,Wt){this._x.push(+oe),this._y.push(+Wt)}};var ve=function Ne(oe){function Wt(Ee){return oe===1?new An(Ee):new Jt(Ee,oe)}return Wt.beta=function(Ee){return Ne(+Ee)},Wt}(.85);function Vt(Ne,oe,Wt){Ne._context.bezierCurveTo(Ne._x1+Ne._k*(Ne._x2-Ne._x0),Ne._y1+Ne._k*(Ne._y2-Ne._y0),Ne._x2+Ne._k*(Ne._x1-oe),Ne._y2+Ne._k*(Ne._y1-Wt),Ne._x2,Ne._y2)}function ie(Ne,oe){this._context=Ne,this._k=(1-oe)/6}ie.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Vt(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(oe,Wt){switch(oe=+oe,Wt=+Wt,this._point){case 0:this._point=1,this._line?this._context.lineTo(oe,Wt):this._context.moveTo(oe,Wt);break;case 1:this._point=2,this._x1=oe,this._y1=Wt;break;case 2:this._point=3;default:Vt(this,oe,Wt);break}this._x0=this._x1,this._x1=this._x2,this._x2=oe,this._y0=this._y1,this._y1=this._y2,this._y2=Wt}};var Ce=function Ne(oe){function Wt(Ee){return new ie(Ee,oe)}return Wt.tension=function(Ee){return Ne(+Ee)},Wt}(0);function ue(Ne,oe){this._context=Ne,this._k=(1-oe)/6}ue.prototype={areaStart:nn,areaEnd:nn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(oe,Wt){switch(oe=+oe,Wt=+Wt,this._point){case 0:this._point=1,this._x3=oe,this._y3=Wt;break;case 1:this._point=2,this._context.moveTo(this._x4=oe,this._y4=Wt);break;case 2:this._point=3,this._x5=oe,this._y5=Wt;break;default:Vt(this,oe,Wt);break}this._x0=this._x1,this._x1=this._x2,this._x2=oe,this._y0=this._y1,this._y1=this._y2,this._y2=Wt}};var xe=function Ne(oe){function Wt(Ee){return new ue(Ee,oe)}return Wt.tension=function(Ee){return Ne(+Ee)},Wt}(0);function $e(Ne,oe){this._context=Ne,this._k=(1-oe)/6}$e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(oe,Wt){switch(oe=+oe,Wt=+Wt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Vt(this,oe,Wt);break}this._x0=this._x1,this._x1=this._x2,this._x2=oe,this._y0=this._y1,this._y1=this._y2,this._y2=Wt}};var Fn=function Ne(oe){function Wt(Ee){return new $e(Ee,oe)}return Wt.tension=function(Ee){return Ne(+Ee)},Wt}(0);function rr(Ne,oe,Wt){var Ee=Ne._x1,an=Ne._y1,Un=Ne._x2,qn=Ne._y2;if(Ne._l01_a>u){var kn=2*Ne._l01_2a+3*Ne._l01_a*Ne._l12_a+Ne._l12_2a,Xr=3*Ne._l01_a*(Ne._l01_a+Ne._l12_a);Ee=(Ee*kn-Ne._x0*Ne._l12_2a+Ne._x2*Ne._l01_2a)/Xr,an=(an*kn-Ne._y0*Ne._l12_2a+Ne._y2*Ne._l01_2a)/Xr}if(Ne._l23_a>u){var Si=2*Ne._l23_2a+3*Ne._l23_a*Ne._l12_a+Ne._l12_2a,Ti=3*Ne._l23_a*(Ne._l23_a+Ne._l12_a);Un=(Un*Si+Ne._x1*Ne._l23_2a-oe*Ne._l12_2a)/Ti,qn=(qn*Si+Ne._y1*Ne._l23_2a-Wt*Ne._l12_2a)/Ti}Ne._context.bezierCurveTo(Ee,an,Un,qn,Ne._x2,Ne._y2)}function En(Ne,oe){this._context=Ne,this._alpha=oe}En.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(oe,Wt){if(oe=+oe,Wt=+Wt,this._point){var Ee=this._x2-oe,an=this._y2-Wt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Ee*Ee+an*an,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(oe,Wt):this._context.moveTo(oe,Wt);break;case 1:this._point=2;break;case 2:this._point=3;default:rr(this,oe,Wt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=oe,this._y0=this._y1,this._y1=this._y2,this._y2=Wt}};var Pn=function Ne(oe){function Wt(Ee){return oe?new En(Ee,oe):new ie(Ee,0)}return Wt.alpha=function(Ee){return Ne(+Ee)},Wt}(.5);function Er(Ne,oe){this._context=Ne,this._alpha=oe}Er.prototype={areaStart:nn,areaEnd:nn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(oe,Wt){if(oe=+oe,Wt=+Wt,this._point){var Ee=this._x2-oe,an=this._y2-Wt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Ee*Ee+an*an,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=oe,this._y3=Wt;break;case 1:this._point=2,this._context.moveTo(this._x4=oe,this._y4=Wt);break;case 2:this._point=3,this._x5=oe,this._y5=Wt;break;default:rr(this,oe,Wt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=oe,this._y0=this._y1,this._y1=this._y2,this._y2=Wt}};var Pr=function Ne(oe){function Wt(Ee){return oe?new Er(Ee,oe):new ue(Ee,0)}return Wt.alpha=function(Ee){return Ne(+Ee)},Wt}(.5);function ln(Ne,oe){this._context=Ne,this._alpha=oe}ln.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(oe,Wt){if(oe=+oe,Wt=+Wt,this._point){var Ee=this._x2-oe,an=this._y2-Wt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Ee*Ee+an*an,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:rr(this,oe,Wt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=oe,this._y0=this._y1,this._y1=this._y2,this._y2=Wt}};var Cr=function Ne(oe){function Wt(Ee){return oe?new ln(Ee,oe):new $e(Ee,0)}return Wt.alpha=function(Ee){return Ne(+Ee)},Wt}(.5);function Ar(Ne){this._context=Ne}Ar.prototype={areaStart:nn,areaEnd:nn,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(oe,Wt){oe=+oe,Wt=+Wt,this._point?this._context.lineTo(oe,Wt):(this._point=1,this._context.moveTo(oe,Wt))}};function je(Ne){return new Ar(Ne)}function We(Ne){return Ne<0?-1:1}function Ye(Ne,oe,Wt){var Ee=Ne._x1-Ne._x0,an=oe-Ne._x1,Un=(Ne._y1-Ne._y0)/(Ee||an<0&&-0),qn=(Wt-Ne._y1)/(an||Ee<0&&-0),kn=(Un*an+qn*Ee)/(Ee+an);return(We(Un)+We(qn))*Math.min(Math.abs(Un),Math.abs(qn),.5*Math.abs(kn))||0}function fn(Ne,oe){var Wt=Ne._x1-Ne._x0;return Wt?(3*(Ne._y1-Ne._y0)/Wt-oe)/2:oe}function mn(Ne,oe,Wt){var Ee=Ne._x0,an=Ne._y0,Un=Ne._x1,qn=Ne._y1,kn=(Un-Ee)/3;Ne._context.bezierCurveTo(Ee+kn,an+kn*oe,Un-kn,qn-kn*Wt,Un,qn)}function jn(Ne){this._context=Ne}jn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:mn(this,this._t0,fn(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(oe,Wt){var Ee=NaN;if(oe=+oe,Wt=+Wt,!(oe===this._x1&&Wt===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(oe,Wt):this._context.moveTo(oe,Wt);break;case 1:this._point=2;break;case 2:this._point=3,mn(this,fn(this,Ee=Ye(this,oe,Wt)),Ee);break;default:mn(this,this._t0,Ee=Ye(this,oe,Wt));break}this._x0=this._x1,this._x1=oe,this._y0=this._y1,this._y1=Wt,this._t0=Ee}}};function bn(Ne){this._context=new Ln(Ne)}(bn.prototype=Object.create(jn.prototype)).point=function(Ne,oe){jn.prototype.point.call(this,oe,Ne)};function Ln(Ne){this._context=Ne}Ln.prototype={moveTo:function(oe,Wt){this._context.moveTo(Wt,oe)},closePath:function(){this._context.closePath()},lineTo:function(oe,Wt){this._context.lineTo(Wt,oe)},bezierCurveTo:function(oe,Wt,Ee,an,Un,qn){this._context.bezierCurveTo(Wt,oe,an,Ee,qn,Un)}};function nr(Ne){return new jn(Ne)}function Yn(Ne){return new bn(Ne)}function Mn(Ne){this._context=Ne}Mn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var oe=this._x,Wt=this._y,Ee=oe.length;if(Ee)if(this._line?this._context.lineTo(oe[0],Wt[0]):this._context.moveTo(oe[0],Wt[0]),Ee===2)this._context.lineTo(oe[1],Wt[1]);else for(var an=Rr(oe),Un=Rr(Wt),qn=0,kn=1;kn<Ee;++qn,++kn)this._context.bezierCurveTo(an[0][qn],Un[0][qn],an[1][qn],Un[1][qn],oe[kn],Wt[kn]);(this._line||this._line!==0&&Ee===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(oe,Wt){this._x.push(+oe),this._y.push(+Wt)}};function Rr(Ne){var oe,Wt=Ne.length-1,Ee,an=new Array(Wt),Un=new Array(Wt),qn=new Array(Wt);for(an[0]=0,Un[0]=2,qn[0]=Ne[0]+2*Ne[1],oe=1;oe<Wt-1;++oe)an[oe]=1,Un[oe]=4,qn[oe]=4*Ne[oe]+2*Ne[oe+1];for(an[Wt-1]=2,Un[Wt-1]=7,qn[Wt-1]=8*Ne[Wt-1]+Ne[Wt],oe=1;oe<Wt;++oe)Ee=an[oe]/Un[oe-1],Un[oe]-=Ee,qn[oe]-=Ee*qn[oe-1];for(an[Wt-1]=qn[Wt-1]/Un[Wt-1],oe=Wt-2;oe>=0;--oe)an[oe]=(qn[oe]-an[oe+1])/Un[oe];for(Un[Wt-1]=(Ne[Wt]+an[Wt-1])/2,oe=0;oe<Wt-1;++oe)Un[oe]=2*Ne[oe+1]-an[oe+1];return[an,Un]}function pr(Ne){return new Mn(Ne)}function zr(Ne,oe){this._context=Ne,this._t=oe}zr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(oe,Wt){switch(oe=+oe,Wt=+Wt,this._point){case 0:this._point=1,this._line?this._context.lineTo(oe,Wt):this._context.moveTo(oe,Wt);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,Wt),this._context.lineTo(oe,Wt);else{var Ee=this._x*(1-this._t)+oe*this._t;this._context.lineTo(Ee,this._y),this._context.lineTo(Ee,Wt)}break}}this._x=oe,this._y=Wt}};function Pi(Ne){return new zr(Ne,.5)}function Oa(Ne){return new zr(Ne,0)}function Ua(Ne){return new zr(Ne,1)}function ro(Ne,oe){if((qn=Ne.length)>1)for(var Wt=1,Ee,an,Un=Ne[oe[0]],qn,kn=Un.length;Wt<qn;++Wt)for(an=Un,Un=Ne[oe[Wt]],Ee=0;Ee<kn;++Ee)Un[Ee][1]+=Un[Ee][0]=isNaN(an[Ee][1])?an[Ee][0]:an[Ee][1]}function Ko(Ne){for(var oe=Ne.length,Wt=new Array(oe);--oe>=0;)Wt[oe]=oe;return Wt}function _a(Ne,oe){return Ne[oe]}function co(){var Ne=s([]),oe=Ko,Wt=ro,Ee=_a;function an(Un){var qn=Ne.apply(this,arguments),kn,Xr=Un.length,Si=qn.length,Ti=new Array(Si),ki;for(kn=0;kn<Si;++kn){for(var sa=qn[kn],$a=Ti[kn]=new Array(Xr),ba=0,bo;ba<Xr;++ba)$a[ba]=bo=[0,+Ee(Un[ba],sa,ba,Un)],bo.data=Un[ba];$a.key=sa}for(kn=0,ki=oe(Ti);kn<Si;++kn)Ti[ki[kn]].index=kn;return Wt(Ti,ki),Ti}return an.keys=function(Un){return arguments.length?(Ne=typeof Un=="function"?Un:s(mt.call(Un)),an):Ne},an.value=function(Un){return arguments.length?(Ee=typeof Un=="function"?Un:s(+Un),an):Ee},an.order=function(Un){return arguments.length?(oe=Un==null?Ko:typeof Un=="function"?Un:s(mt.call(Un)),an):oe},an.offset=function(Un){return arguments.length?(Wt=Un==null?ro:Un,an):Wt},an}function Xo(Ne,oe){if((Ee=Ne.length)>0){for(var Wt,Ee,an=0,Un=Ne[0].length,qn;an<Un;++an){for(qn=Wt=0;Wt<Ee;++Wt)qn+=Ne[Wt][an][1]||0;if(qn)for(Wt=0;Wt<Ee;++Wt)Ne[Wt][an][1]/=qn}ro(Ne,oe)}}function io(Ne,oe){if((Xr=Ne.length)>0)for(var Wt,Ee=0,an,Un,qn,kn,Xr,Si=Ne[oe[0]].length;Ee<Si;++Ee)for(qn=kn=0,Wt=0;Wt<Xr;++Wt)(Un=(an=Ne[oe[Wt]][Ee])[1]-an[0])>0?(an[0]=qn,an[1]=qn+=Un):Un<0?(an[1]=kn,an[0]=kn+=Un):(an[0]=0,an[1]=Un)}function To(Ne,oe){if((an=Ne.length)>0){for(var Wt=0,Ee=Ne[oe[0]],an,Un=Ee.length;Wt<Un;++Wt){for(var qn=0,kn=0;qn<an;++qn)kn+=Ne[qn][Wt][1]||0;Ee[Wt][1]+=Ee[Wt][0]=-kn/2}ro(Ne,oe)}}function ds(Ne,oe){if(!(!((qn=Ne.length)>0)||!((Un=(an=Ne[oe[0]]).length)>0))){for(var Wt=0,Ee=1,an,Un,qn;Ee<Un;++Ee){for(var kn=0,Xr=0,Si=0;kn<qn;++kn){for(var Ti=Ne[oe[kn]],ki=Ti[Ee][1]||0,sa=Ti[Ee-1][1]||0,$a=(ki-sa)/2,ba=0;ba<kn;++ba){var bo=Ne[oe[ba]],Fa=bo[Ee][1]||0,oo=bo[Ee-1][1]||0;$a+=Fa-oo}Xr+=ki,Si+=$a*ki}an[Ee-1][1]+=an[Ee-1][0]=Wt,Xr&&(Wt-=Si/Xr)}an[Ee-1][1]+=an[Ee-1][0]=Wt,ro(Ne,oe)}}function La(Ne){var oe=Ne.map(Vo);return Ko(Ne).sort(function(Wt,Ee){return oe[Wt]-oe[Ee]})}function Vo(Ne){for(var oe=-1,Wt=0,Ee=Ne.length,an,Un=-Infinity;++oe<Ee;)(an=+Ne[oe][1])>Un&&(Un=an,Wt=oe);return Wt}function Bo(Ne){var oe=Ne.map(lu);return Ko(Ne).sort(function(Wt,Ee){return oe[Wt]-oe[Ee]})}function lu(Ne){for(var oe=0,Wt=-1,Ee=Ne.length,an;++Wt<Ee;)(an=+Ne[Wt][1])&&(oe+=an);return oe}function Jo(Ne){return Bo(Ne).reverse()}function iu(Ne){var oe=Ne.length,Wt,Ee,an=Ne.map(lu),Un=La(Ne),qn=0,kn=0,Xr=[],Si=[];for(Wt=0;Wt<oe;++Wt)Ee=Un[Wt],qn<kn?(qn+=an[Ee],Xr.push(Ee)):(kn+=an[Ee],Si.push(Ee));return Si.reverse().concat(Xr)}function $s(Ne){return Ko(Ne).reverse()}t.arc=O,t.area=k,t.areaRadial=Lt,t.curveBasis=Nn,t.curveBasisClosed=fi,t.curveBasisOpen=Ae,t.curveBundle=ve,t.curveCardinal=Ce,t.curveCardinalClosed=xe,t.curveCardinalOpen=Fn,t.curveCatmullRom=Pn,t.curveCatmullRomClosed=Pr,t.curveCatmullRomOpen=Cr,t.curveLinear=W,t.curveLinearClosed=je,t.curveMonotoneX=nr,t.curveMonotoneY=Yn,t.curveNatural=pr,t.curveStep=Pi,t.curveStepAfter=Ua,t.curveStepBefore=Oa,t.line=V,t.lineRadial=Nt,t.linkHorizontal=et,t.linkRadial=pt,t.linkVertical=ot,t.pie=it,t.pointRadial=_t,t.radialArea=Lt,t.radialLine=Nt,t.stack=co,t.stackOffsetDiverging=io,t.stackOffsetExpand=Xo,t.stackOffsetNone=ro,t.stackOffsetSilhouette=To,t.stackOffsetWiggle=ds,t.stackOrderAppearance=La,t.stackOrderAscending=Bo,t.stackOrderDescending=Jo,t.stackOrderInsideOut=iu,t.stackOrderNone=Ko,t.stackOrderReverse=$s,t.symbol=Hn,t.symbolCircle=H,t.symbolCross=nt,t.symbolDiamond=Et,t.symbolSquare=$t,t.symbolStar=Gt,t.symbolTriangle=me,t.symbolWye=_n,t.symbols=Kn,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-voronoi@1.1.4@d3-voronoi/dist/d3-voronoi.js":function(E,T,e){(function(t,l){l(T)})(this,function(t){"use strict";function l(z){return function(){return z}}function s(z){return z[0]}function c(z){return z[1]}function r(){this._=null}function h(z){z.U=z.C=z.L=z.R=z.P=z.N=null}r.prototype={constructor:r,insert:function($,dt){var et,ot,pt;if($){if(dt.P=$,dt.N=$.N,$.N&&($.N.P=dt),$.N=dt,$.R){for($=$.R;$.L;)$=$.L;$.L=dt}else $.R=dt;et=$}else this._?($=a(this._),dt.P=null,dt.N=$,$.P=$.L=dt,et=$):(dt.P=dt.N=null,this._=dt,et=null);for(dt.L=dt.R=null,dt.U=et,dt.C=!0,$=dt;et&&et.C;)ot=et.U,et===ot.L?(pt=ot.R,pt&&pt.C?(et.C=pt.C=!1,ot.C=!0,$=ot):($===et.R&&(n(this,et),$=et,et=$.U),et.C=!1,ot.C=!0,i(this,ot))):(pt=ot.L,pt&&pt.C?(et.C=pt.C=!1,ot.C=!0,$=ot):($===et.L&&(i(this,et),$=et,et=$.U),et.C=!1,ot.C=!0,n(this,ot))),et=$.U;this._.C=!1},remove:function($){$.N&&($.N.P=$.P),$.P&&($.P.N=$.N),$.N=$.P=null;var dt=$.U,et,ot=$.L,pt=$.R,H,nt;if(ot?pt?H=a(pt):H=ot:H=pt,dt?dt.L===$?dt.L=H:dt.R=H:this._=H,ot&&pt?(nt=H.C,H.C=$.C,H.L=ot,ot.U=H,H!==pt?(dt=H.U,H.U=$.U,$=H.R,dt.L=$,H.R=pt,pt.U=H):(H.U=dt,dt=H,$=H.R)):(nt=$.C,$=H),$&&($.U=dt),!nt){if($&&$.C){$.C=!1;return}do{if($===this._)break;if($===dt.L){if(et=dt.R,et.C&&(et.C=!1,dt.C=!0,n(this,dt),et=dt.R),et.L&&et.L.C||et.R&&et.R.C){(!et.R||!et.R.C)&&(et.L.C=!1,et.C=!0,i(this,et),et=dt.R),et.C=dt.C,dt.C=et.R.C=!1,n(this,dt),$=this._;break}}else if(et=dt.L,et.C&&(et.C=!1,dt.C=!0,i(this,dt),et=dt.L),et.L&&et.L.C||et.R&&et.R.C){(!et.L||!et.L.C)&&(et.R.C=!1,et.C=!0,n(this,et),et=dt.L),et.C=dt.C,dt.C=et.L.C=!1,i(this,dt),$=this._;break}et.C=!0,$=dt,dt=dt.U}while(!$.C);$&&($.C=!1)}}};function n(z,$){var dt=$,et=$.R,ot=dt.U;ot?ot.L===dt?ot.L=et:ot.R=et:z._=et,et.U=ot,dt.U=et,dt.R=et.L,dt.R&&(dt.R.U=dt),et.L=dt}function i(z,$){var dt=$,et=$.L,ot=dt.U;ot?ot.L===dt?ot.L=et:ot.R=et:z._=et,et.U=ot,dt.U=et,dt.L=et.R,dt.L&&(dt.L.U=dt),et.R=dt}function a(z){for(;z.L;)z=z.L;return z}function o(z,$,dt,et){var ot=[null,null],pt=_t.push(ot)-1;return ot.left=z,ot.right=$,dt&&f(ot,z,$,dt),et&&f(ot,$,z,et),Nt[z.index].halfedges.push(pt),Nt[$.index].halfedges.push(pt),ot}function u(z,$,dt){var et=[$,dt];return et.left=z,et}function f(z,$,dt,et){!z[0]&&!z[1]?(z[0]=et,z.left=$,z.right=dt):z.left===dt?z[1]=et:z[0]=et}function v(z,$,dt,et,ot){var pt=z[0],H=z[1],nt=pt[0],at=pt[1],q=H[0],Et=H[1],vt=0,Ft=1,Qt=q-nt,ee=Et-at,Gt;if(Gt=$-nt,!(!Qt&&Gt>0)){if(Gt/=Qt,Qt<0){if(Gt<vt)return;Gt<Ft&&(Ft=Gt)}else if(Qt>0){if(Gt>Ft)return;Gt>vt&&(vt=Gt)}if(Gt=et-nt,!(!Qt&&Gt<0)){if(Gt/=Qt,Qt<0){if(Gt>Ft)return;Gt>vt&&(vt=Gt)}else if(Qt>0){if(Gt<vt)return;Gt<Ft&&(Ft=Gt)}if(Gt=dt-at,!(!ee&&Gt>0)){if(Gt/=ee,ee<0){if(Gt<vt)return;Gt<Ft&&(Ft=Gt)}else if(ee>0){if(Gt>Ft)return;Gt>vt&&(vt=Gt)}if(Gt=ot-at,!(!ee&&Gt<0)){if(Gt/=ee,ee<0){if(Gt>Ft)return;Gt>vt&&(vt=Gt)}else if(ee>0){if(Gt<vt)return;Gt<Ft&&(Ft=Gt)}return!(vt>0)&&!(Ft<1)||(vt>0&&(z[0]=[nt+vt*Qt,at+vt*ee]),Ft<1&&(z[1]=[nt+Ft*Qt,at+Ft*ee])),!0}}}}}function b(z,$,dt,et,ot){var pt=z[1];if(pt)return!0;var H=z[0],nt=z.left,at=z.right,q=nt[0],Et=nt[1],vt=at[0],Ft=at[1],Qt=(q+vt)/2,ee=(Et+Ft)/2,Gt,$t;if(Ft===Et){if(Qt<$||Qt>=et)return;if(q>vt){if(!H)H=[Qt,dt];else if(H[1]>=ot)return;pt=[Qt,ot]}else{if(!H)H=[Qt,ot];else if(H[1]<dt)return;pt=[Qt,dt]}}else if(Gt=(q-vt)/(Ft-Et),$t=ee-Gt*Qt,Gt<-1||Gt>1)if(q>vt){if(!H)H=[(dt-$t)/Gt,dt];else if(H[1]>=ot)return;pt=[(ot-$t)/Gt,ot]}else{if(!H)H=[(ot-$t)/Gt,ot];else if(H[1]<dt)return;pt=[(dt-$t)/Gt,dt]}else if(Et<Ft){if(!H)H=[$,Gt*$+$t];else if(H[0]>=et)return;pt=[et,Gt*et+$t]}else{if(!H)H=[et,Gt*et+$t];else if(H[0]<$)return;pt=[$,Gt*$+$t]}return z[0]=H,z[1]=pt,!0}function y(z,$,dt,et){for(var ot=_t.length,pt;ot--;)(!b(pt=_t[ot],z,$,dt,et)||!v(pt,z,$,dt,et)||!(Math.abs(pt[0][0]-pt[1][0])>ht||Math.abs(pt[0][1]-pt[1][1])>ht))&&delete _t[ot]}function g(z){return Nt[z.index]={site:z,halfedges:[]}}function _(z,$){var dt=z.site,et=$.left,ot=$.right;return dt===ot&&(ot=et,et=dt),ot?Math.atan2(ot[1]-et[1],ot[0]-et[0]):(dt===et?(et=$[1],ot=$[0]):(et=$[0],ot=$[1]),Math.atan2(et[0]-ot[0],ot[1]-et[1]))}function M(z,$){return $[+($.left!==z.site)]}function x(z,$){return $[+($.left===z.site)]}function m(){for(var z=0,$=Nt.length,dt,et,ot,pt;z<$;++z)if((dt=Nt[z])&&(pt=(et=dt.halfedges).length)){var H=new Array(pt),nt=new Array(pt);for(ot=0;ot<pt;++ot)H[ot]=ot,nt[ot]=_(dt,_t[et[ot]]);for(H.sort(function(at,q){return nt[q]-nt[at]}),ot=0;ot<pt;++ot)nt[ot]=et[H[ot]];for(ot=0;ot<pt;++ot)et[ot]=nt[ot]}}function S(z,$,dt,et){var ot=Nt.length,pt,H,nt,at,q,Et,vt,Ft,Qt,ee,Gt,$t,Pe=!0;for(pt=0;pt<ot;++pt)if(H=Nt[pt]){for(nt=H.site,q=H.halfedges,at=q.length;at--;)_t[q[at]]||q.splice(at,1);for(at=0,Et=q.length;at<Et;)ee=x(H,_t[q[at]]),Gt=ee[0],$t=ee[1],vt=M(H,_t[q[++at%Et]]),Ft=vt[0],Qt=vt[1],(Math.abs(Gt-Ft)>ht||Math.abs($t-Qt)>ht)&&(q.splice(at,0,_t.push(u(nt,ee,Math.abs(Gt-z)<ht&&et-$t>ht?[z,Math.abs(Ft-z)<ht?Qt:et]:Math.abs($t-et)<ht&&dt-Gt>ht?[Math.abs(Qt-et)<ht?Ft:dt,et]:Math.abs(Gt-dt)<ht&&$t-$>ht?[dt,Math.abs(Ft-dt)<ht?Qt:$]:Math.abs($t-$)<ht&&Gt-z>ht?[Math.abs(Qt-$)<ht?Ft:z,$]:null))-1),++Et);Et&&(Pe=!1)}if(Pe){var me,le,be,ze=Infinity;for(pt=0,Pe=null;pt<ot;++pt)(H=Nt[pt])&&(nt=H.site,me=nt[0]-z,le=nt[1]-$,be=me*me+le*le,be<ze&&(ze=be,Pe=H));if(Pe){var Xe=[z,$],_n=[z,et],Kn=[dt,et],Hn=[dt,$];Pe.halfedges.push(_t.push(u(nt=Pe.site,Xe,_n))-1,_t.push(u(nt,_n,Kn))-1,_t.push(u(nt,Kn,Hn))-1,_t.push(u(nt,Hn,Xe))-1)}}for(pt=0;pt<ot;++pt)(H=Nt[pt])&&(H.halfedges.length||delete Nt[pt])}var P=[],A;function O(){h(this),this.x=this.y=this.arc=this.site=this.cy=null}function R(z){var $=z.P,dt=z.N;if(!(!$||!dt)){var et=$.site,ot=z.site,pt=dt.site;if(et!==pt){var H=ot[0],nt=ot[1],at=et[0]-H,q=et[1]-nt,Et=pt[0]-H,vt=pt[1]-nt,Ft=2*(at*vt-q*Et);if(!(Ft>=-ut)){var Qt=at*at+q*q,ee=Et*Et+vt*vt,Gt=(vt*Qt-q*ee)/Ft,$t=(at*ee-Et*Qt)/Ft,Pe=P.pop()||new O;Pe.arc=z,Pe.site=ot,Pe.x=Gt+H,Pe.y=(Pe.cy=$t+nt)+Math.sqrt(Gt*Gt+$t*$t),z.circle=Pe;for(var me=null,le=Lt._;le;)if(Pe.y<le.y||Pe.y===le.y&&Pe.x<=le.x)if(le.L)le=le.L;else{me=le.P;break}else if(le.R)le=le.R;else{me=le;break}Lt.insert(me,Pe),me||(A=Pe)}}}}function W(z){var $=z.circle;$&&($.P||(A=$.N),Lt.remove($),P.push($),h($),z.circle=null)}var F=[];function Z(){h(this),this.edge=this.site=this.circle=null}function V(z){var $=F.pop()||new Z;return $.site=z,$}function k(z){W(z),It.remove(z),F.push(z),h(z)}function Y(z){var $=z.circle,dt=$.x,et=$.cy,ot=[dt,et],pt=z.P,H=z.N,nt=[z];k(z);for(var at=pt;at.circle&&Math.abs(dt-at.circle.x)<ht&&Math.abs(et-at.circle.cy)<ht;)pt=at.P,nt.unshift(at),k(at),at=pt;nt.unshift(at),W(at);for(var q=H;q.circle&&Math.abs(dt-q.circle.x)<ht&&Math.abs(et-q.circle.cy)<ht;)H=q.N,nt.push(q),k(q),q=H;nt.push(q),W(q);var Et=nt.length,vt;for(vt=1;vt<Et;++vt)q=nt[vt],at=nt[vt-1],f(q.edge,at.site,q.site,ot);at=nt[0],q=nt[Et-1],q.edge=o(at.site,q.site,null,ot),R(at),R(q)}function K(z){for(var $=z[0],dt=z[1],et,ot,pt,H,nt=It._;nt;)if(pt=it(nt,dt)-$,pt>ht)nt=nt.L;else if(H=$-ct(nt,dt),H>ht){if(!nt.R){et=nt;break}nt=nt.R}else{pt>-ht?(et=nt.P,ot=nt):H>-ht?(et=nt,ot=nt.N):et=ot=nt;break}g(z);var at=V(z);if(It.insert(et,at),!(!et&&!ot)){if(et===ot){W(et),ot=V(et.site),It.insert(at,ot),at.edge=ot.edge=o(et.site,at.site),R(et),R(ot);return}if(!ot){at.edge=o(et.site,at.site);return}W(et),W(ot);var q=et.site,Et=q[0],vt=q[1],Ft=z[0]-Et,Qt=z[1]-vt,ee=ot.site,Gt=ee[0]-Et,$t=ee[1]-vt,Pe=2*(Ft*$t-Qt*Gt),me=Ft*Ft+Qt*Qt,le=Gt*Gt+$t*$t,be=[($t*me-Qt*le)/Pe+Et,(Ft*le-Gt*me)/Pe+vt];f(ot.edge,q,ee,be),at.edge=o(q,z,null,be),ot.edge=o(z,ee,null,be),R(et),R(ot)}}function it(z,$){var dt=z.site,et=dt[0],ot=dt[1],pt=ot-$;if(!pt)return et;var H=z.P;if(!H)return-Infinity;dt=H.site;var nt=dt[0],at=dt[1],q=at-$;if(!q)return nt;var Et=nt-et,vt=1/pt-1/q,Ft=Et/q;return vt?(-Ft+Math.sqrt(Ft*Ft-2*vt*(Et*Et/(-2*q)-at+q/2+ot-pt/2)))/vt+et:(et+nt)/2}function ct(z,$){var dt=z.N;if(dt)return it(dt,$);var et=z.site;return et[1]===$?et[0]:Infinity}var ht=1e-6,ut=1e-12,It,Nt,Lt,_t;function mt(z,$,dt){return(z[0]-dt[0])*($[1]-z[1])-(z[0]-$[0])*(dt[1]-z[1])}function At(z,$){return $[1]-z[1]||$[0]-z[0]}function rt(z,$){var dt=z.sort(At).pop(),et,ot,pt;for(_t=[],Nt=new Array(z.length),It=new r,Lt=new r;;)if(pt=A,dt&&(!pt||dt[1]<pt.y||dt[1]===pt.y&&dt[0]<pt.x))(dt[0]!==et||dt[1]!==ot)&&(K(dt),et=dt[0],ot=dt[1]),dt=z.pop();else if(pt)Y(pt.arc);else break;if(m(),$){var H=+$[0][0],nt=+$[0][1],at=+$[1][0],q=+$[1][1];y(H,nt,at,q),S(H,nt,at,q)}this.edges=_t,this.cells=Nt,It=Lt=_t=Nt=null}rt.prototype={constructor:rt,polygons:function(){var $=this.edges;return this.cells.map(function(dt){var et=dt.halfedges.map(function(ot){return M(dt,$[ot])});return et.data=dt.site.data,et})},triangles:function(){var $=[],dt=this.edges;return this.cells.forEach(function(et,ot){if(!!(at=(H=et.halfedges).length))for(var pt=et.site,H,nt=-1,at,q,Et=dt[H[at-1]],vt=Et.left===pt?Et.right:Et.left;++nt<at;)q=vt,Et=dt[H[nt]],vt=Et.left===pt?Et.right:Et.left,q&&vt&&ot<q.index&&ot<vt.index&&mt(pt,q,vt)<0&&$.push([pt.data,q.data,vt.data])}),$},links:function(){return this.edges.filter(function($){return $.right}).map(function($){return{source:$.left.data,target:$.right.data}})},find:function($,dt,et){for(var ot=this,pt,H=ot._found||0,nt=ot.cells.length,at;!(at=ot.cells[H]);)if(++H>=nt)return null;var q=$-at.site[0],Et=dt-at.site[1],vt=q*q+Et*Et;do at=ot.cells[pt=H],H=null,at.halfedges.forEach(function(Ft){var Qt=ot.edges[Ft],ee=Qt.left;if(!((ee===at.site||!ee)&&!(ee=Qt.right))){var Gt=$-ee[0],$t=dt-ee[1],Pe=Gt*Gt+$t*$t;Pe<vt&&(vt=Pe,H=ee.index)}});while(H!==null);return ot._found=pt,et==null||vt<=et*et?at.site:null}};function Mt(){var z=s,$=c,dt=null;function et(ot){return new rt(ot.map(function(pt,H){var nt=[Math.round(z(pt,H,ot)/ht)*ht,Math.round($(pt,H,ot)/ht)*ht];return nt.index=H,nt.data=pt,nt}),dt)}return et.polygons=function(ot){return et(ot).polygons()},et.links=function(ot){return et(ot).links()},et.triangles=function(ot){return et(ot).triangles()},et.x=function(ot){return arguments.length?(z=typeof ot=="function"?ot:l(+ot),et):z},et.y=function(ot){return arguments.length?($=typeof ot=="function"?ot:l(+ot),et):$},et.extent=function(ot){return arguments.length?(dt=ot==null?null:[[+ot[0][0],+ot[0][1]],[+ot[1][0],+ot[1][1]]],et):dt&&[[dt[0][0],dt[0][1]],[dt[1][0],dt[1][1]]]},et.size=function(ot){return arguments.length?(dt=ot==null?null:[[0,0],[+ot[0],+ot[1]]],et):dt&&[dt[1][0]-dt[0][0],dt[1][1]-dt[0][1]]},et}t.voronoi=Mt,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_dagre@0.8.5@dagre/index.js":function(E,T,e){E.exports={graphlib:e("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js"),layout:e("./node_modules/_dagre@0.8.5@dagre/lib/layout.js"),debug:e("./node_modules/_dagre@0.8.5@dagre/lib/debug.js"),util:{time:e("./node_modules/_dagre@0.8.5@dagre/lib/util.js").time,notime:e("./node_modules/_dagre@0.8.5@dagre/lib/util.js").notime},version:e("./node_modules/_dagre@0.8.5@dagre/lib/version.js")}},"./node_modules/_dagre@0.8.5@dagre/lib/acyclic.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),l=e("./node_modules/_dagre@0.8.5@dagre/lib/greedy-fas.js");E.exports={run:s,undo:r};function s(h){var n=h.graph().acyclicer==="greedy"?l(h,i(h)):c(h);t.forEach(n,function(a){var o=h.edge(a);h.removeEdge(a),o.forwardName=a.name,o.reversed=!0,h.setEdge(a.w,a.v,o,t.uniqueId("rev"))});function i(a){return function(o){return a.edge(o).weight}}}function c(h){var n=[],i={},a={};function o(u){t.has(a,u)||(a[u]=!0,i[u]=!0,t.forEach(h.outEdges(u),function(f){t.has(i,f.w)?n.push(f):o(f.w)}),delete i[u])}return t.forEach(h.nodes(),o),n}function r(h){t.forEach(h.edges(),function(n){var i=h.edge(n);if(i.reversed){h.removeEdge(n);var a=i.forwardName;delete i.reversed,delete i.forwardName,h.setEdge(n.w,n.v,i,a)}})}},"./node_modules/_dagre@0.8.5@dagre/lib/add-border-segments.js":function(E,T,e){var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),l=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js");E.exports=s;function s(r){function h(n){var i=r.children(n),a=r.node(n);if(i.length&&t.forEach(i,h),t.has(a,"minRank")){a.borderLeft=[],a.borderRight=[];for(var o=a.minRank,u=a.maxRank+1;o<u;++o)c(r,"borderLeft","_bl",n,a,o),c(r,"borderRight","_br",n,a,o)}}t.forEach(r.children(),h)}function c(r,h,n,i,a,o){var u={width:0,height:0,rank:o,borderType:h},f=a[h][o-1],v=l.addDummyNode(r,"border",u,n);a[h][o]=v,r.setParent(v,i),f&&r.setEdge(f,v,{weight:1})}},"./node_modules/_dagre@0.8.5@dagre/lib/coordinate-system.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js");E.exports={adjust:l,undo:s};function l(o){var u=o.graph().rankdir.toLowerCase();(u==="lr"||u==="rl")&&c(o)}function s(o){var u=o.graph().rankdir.toLowerCase();(u==="bt"||u==="rl")&&h(o),(u==="lr"||u==="rl")&&(i(o),c(o))}function c(o){t.forEach(o.nodes(),function(u){r(o.node(u))}),t.forEach(o.edges(),function(u){r(o.edge(u))})}function r(o){var u=o.width;o.width=o.height,o.height=u}function h(o){t.forEach(o.nodes(),function(u){n(o.node(u))}),t.forEach(o.edges(),function(u){var f=o.edge(u);t.forEach(f.points,n),t.has(f,"y")&&n(f)})}function n(o){o.y=-o.y}function i(o){t.forEach(o.nodes(),function(u){a(o.node(u))}),t.forEach(o.edges(),function(u){var f=o.edge(u);t.forEach(f.points,a),t.has(f,"x")&&a(f)})}function a(o){var u=o.x;o.x=o.y,o.y=u}},"./node_modules/_dagre@0.8.5@dagre/lib/data/list.js":function(E,T){E.exports=e;function e(){var s={};s._next=s._prev=s,this._sentinel=s}e.prototype.dequeue=function(){var s=this._sentinel,c=s._prev;if(c!==s)return t(c),c},e.prototype.enqueue=function(s){var c=this._sentinel;s._prev&&s._next&&t(s),s._next=c._next,c._next._prev=s,c._next=s,s._prev=c},e.prototype.toString=function(){for(var s=[],c=this._sentinel,r=c._prev;r!==c;)s.push(JSON.stringify(r,l)),r=r._prev;return"["+s.join(", ")+"]"};function t(s){s._prev._next=s._next,s._next._prev=s._prev,delete s._next,delete s._prev}function l(s,c){if(s!=="_next"&&s!=="_prev")return c}},"./node_modules/_dagre@0.8.5@dagre/lib/debug.js":function(E,T,e){var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),l=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js"),s=e("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").Graph;E.exports={debugOrdering:c};function c(r){var h=l.buildLayerMatrix(r),n=new s({compound:!0,multigraph:!0}).setGraph({});return t.forEach(r.nodes(),function(i){n.setNode(i,{label:i}),n.setParent(i,"layer"+r.node(i).rank)}),t.forEach(r.edges(),function(i){n.setEdge(i.v,i.w,{},i.name)}),t.forEach(h,function(i,a){var o="layer"+a;n.setNode(o,{rank:"same"}),t.reduce(i,function(u,f){return n.setEdge(u,f,{style:"invis"}),f})}),n}},"./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js":function(E,T,e){var t;try{t=e("./node_modules/_graphlib@2.1.8@graphlib/index.js")}catch(l){}t||(t=window.graphlib),E.exports=t},"./node_modules/_dagre@0.8.5@dagre/lib/greedy-fas.js":function(E,T,e){var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),l=e("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").Graph,s=e("./node_modules/_dagre@0.8.5@dagre/lib/data/list.js");E.exports=r;var c=t.constant(1);function r(o,u){if(o.nodeCount()<=1)return[];var f=i(o,u||c),v=h(f.graph,f.buckets,f.zeroIdx);return t.flatten(t.map(v,function(b){return o.outEdges(b.v,b.w)}),!0)}function h(o,u,f){for(var v=[],b=u[u.length-1],y=u[0],g;o.nodeCount();){for(;g=y.dequeue();)n(o,u,f,g);for(;g=b.dequeue();)n(o,u,f,g);if(o.nodeCount()){for(var _=u.length-2;_>0;--_)if(g=u[_].dequeue(),g){v=v.concat(n(o,u,f,g,!0));break}}}return v}function n(o,u,f,v,b){var y=b?[]:void 0;return t.forEach(o.inEdges(v.v),function(g){var _=o.edge(g),M=o.node(g.v);b&&y.push({v:g.v,w:g.w}),M.out-=_,a(u,f,M)}),t.forEach(o.outEdges(v.v),function(g){var _=o.edge(g),M=g.w,x=o.node(M);x.in-=_,a(u,f,x)}),o.removeNode(v.v),y}function i(o,u){var f=new l,v=0,b=0;t.forEach(o.nodes(),function(_){f.setNode(_,{v:_,in:0,out:0})}),t.forEach(o.edges(),function(_){var M=f.edge(_.v,_.w)||0,x=u(_),m=M+x;f.setEdge(_.v,_.w,m),b=Math.max(b,f.node(_.v).out+=x),v=Math.max(v,f.node(_.w).in+=x)});var y=t.range(b+v+3).map(function(){return new s}),g=v+1;return t.forEach(f.nodes(),function(_){a(y,g,f.node(_))}),{graph:f,buckets:y,zeroIdx:g}}function a(o,u,f){f.out?f.in?o[f.out-f.in+u].enqueue(f):o[o.length-1].enqueue(f):o[0].enqueue(f)}},"./node_modules/_dagre@0.8.5@dagre/lib/layout.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),l=e("./node_modules/_dagre@0.8.5@dagre/lib/acyclic.js"),s=e("./node_modules/_dagre@0.8.5@dagre/lib/normalize.js"),c=e("./node_modules/_dagre@0.8.5@dagre/lib/rank/index.js"),r=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js").normalizeRanks,h=e("./node_modules/_dagre@0.8.5@dagre/lib/parent-dummy-chains.js"),n=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js").removeEmptyRanks,i=e("./node_modules/_dagre@0.8.5@dagre/lib/nesting-graph.js"),a=e("./node_modules/_dagre@0.8.5@dagre/lib/add-border-segments.js"),o=e("./node_modules/_dagre@0.8.5@dagre/lib/coordinate-system.js"),u=e("./node_modules/_dagre@0.8.5@dagre/lib/order/index.js"),f=e("./node_modules/_dagre@0.8.5@dagre/lib/position/index.js"),v=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js"),b=e("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").Graph;E.exports=y;function y(mt,At){var rt=At&&At.debugTiming?v.time:v.notime;rt("layout",function(){var Mt=rt("  buildLayoutGraph",function(){return W(mt)});rt("  runLayout",function(){g(Mt,rt)}),rt("  updateInputGraph",function(){_(mt,Mt)})})}function g(mt,At){At("    makeSpaceForEdgeLabels",function(){F(mt)}),At("    removeSelfEdges",function(){ut(mt)}),At("    acyclic",function(){l.run(mt)}),At("    nestingGraph.run",function(){i.run(mt)}),At("    rank",function(){c(v.asNonCompoundGraph(mt))}),At("    injectEdgeLabelProxies",function(){Z(mt)}),At("    removeEmptyRanks",function(){n(mt)}),At("    nestingGraph.cleanup",function(){i.cleanup(mt)}),At("    normalizeRanks",function(){r(mt)}),At("    assignRankMinMax",function(){V(mt)}),At("    removeEdgeLabelProxies",function(){k(mt)}),At("    normalize.run",function(){s.run(mt)}),At("    parentDummyChains",function(){h(mt)}),At("    addBorderSegments",function(){a(mt)}),At("    order",function(){u(mt)}),At("    insertSelfEdges",function(){It(mt)}),At("    adjustCoordinateSystem",function(){o.adjust(mt)}),At("    position",function(){f(mt)}),At("    positionSelfEdges",function(){Nt(mt)}),At("    removeBorderNodes",function(){ht(mt)}),At("    normalize.undo",function(){s.undo(mt)}),At("    fixupEdgeLabelCoords",function(){it(mt)}),At("    undoCoordinateSystem",function(){o.undo(mt)}),At("    translateGraph",function(){Y(mt)}),At("    assignNodeIntersects",function(){K(mt)}),At("    reversePoints",function(){ct(mt)}),At("    acyclic.undo",function(){l.undo(mt)})}function _(mt,At){t.forEach(mt.nodes(),function(rt){var Mt=mt.node(rt),z=At.node(rt);Mt&&(Mt.x=z.x,Mt.y=z.y,At.children(rt).length&&(Mt.width=z.width,Mt.height=z.height))}),t.forEach(mt.edges(),function(rt){var Mt=mt.edge(rt),z=At.edge(rt);Mt.points=z.points,t.has(z,"x")&&(Mt.x=z.x,Mt.y=z.y)}),mt.graph().width=At.graph().width,mt.graph().height=At.graph().height}var M=["nodesep","edgesep","ranksep","marginx","marginy"],x={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},m=["acyclicer","ranker","rankdir","align"],S=["width","height"],P={width:0,height:0},A=["minlen","weight","width","height","labeloffset"],O={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},R=["labelpos"];function W(mt){var At=new b({multigraph:!0,compound:!0}),rt=_t(mt.graph());return At.setGraph(t.merge({},x,Lt(rt,M),t.pick(rt,m))),t.forEach(mt.nodes(),function(Mt){var z=_t(mt.node(Mt));At.setNode(Mt,t.defaults(Lt(z,S),P)),At.setParent(Mt,mt.parent(Mt))}),t.forEach(mt.edges(),function(Mt){var z=_t(mt.edge(Mt));At.setEdge(Mt,t.merge({},O,Lt(z,A),t.pick(z,R)))}),At}function F(mt){var At=mt.graph();At.ranksep/=2,t.forEach(mt.edges(),function(rt){var Mt=mt.edge(rt);Mt.minlen*=2,Mt.labelpos.toLowerCase()!=="c"&&(At.rankdir==="TB"||At.rankdir==="BT"?Mt.width+=Mt.labeloffset:Mt.height+=Mt.labeloffset)})}function Z(mt){t.forEach(mt.edges(),function(At){var rt=mt.edge(At);if(rt.width&&rt.height){var Mt=mt.node(At.v),z=mt.node(At.w),$={rank:(z.rank-Mt.rank)/2+Mt.rank,e:At};v.addDummyNode(mt,"edge-proxy",$,"_ep")}})}function V(mt){var At=0;t.forEach(mt.nodes(),function(rt){var Mt=mt.node(rt);Mt.borderTop&&(Mt.minRank=mt.node(Mt.borderTop).rank,Mt.maxRank=mt.node(Mt.borderBottom).rank,At=t.max(At,Mt.maxRank))}),mt.graph().maxRank=At}function k(mt){t.forEach(mt.nodes(),function(At){var rt=mt.node(At);rt.dummy==="edge-proxy"&&(mt.edge(rt.e).labelRank=rt.rank,mt.removeNode(At))})}function Y(mt){var At=Number.POSITIVE_INFINITY,rt=0,Mt=Number.POSITIVE_INFINITY,z=0,$=mt.graph(),dt=$.marginx||0,et=$.marginy||0;function ot(pt){var H=pt.x,nt=pt.y,at=pt.width,q=pt.height;At=Math.min(At,H-at/2),rt=Math.max(rt,H+at/2),Mt=Math.min(Mt,nt-q/2),z=Math.max(z,nt+q/2)}t.forEach(mt.nodes(),function(pt){ot(mt.node(pt))}),t.forEach(mt.edges(),function(pt){var H=mt.edge(pt);t.has(H,"x")&&ot(H)}),At-=dt,Mt-=et,t.forEach(mt.nodes(),function(pt){var H=mt.node(pt);H.x-=At,H.y-=Mt}),t.forEach(mt.edges(),function(pt){var H=mt.edge(pt);t.forEach(H.points,function(nt){nt.x-=At,nt.y-=Mt}),t.has(H,"x")&&(H.x-=At),t.has(H,"y")&&(H.y-=Mt)}),$.width=rt-At+dt,$.height=z-Mt+et}function K(mt){t.forEach(mt.edges(),function(At){var rt=mt.edge(At),Mt=mt.node(At.v),z=mt.node(At.w),$,dt;rt.points?($=rt.points[0],dt=rt.points[rt.points.length-1]):(rt.points=[],$=z,dt=Mt),rt.points.unshift(v.intersectRect(Mt,$)),rt.points.push(v.intersectRect(z,dt))})}function it(mt){t.forEach(mt.edges(),function(At){var rt=mt.edge(At);if(t.has(rt,"x"))switch((rt.labelpos==="l"||rt.labelpos==="r")&&(rt.width-=rt.labeloffset),rt.labelpos){case"l":rt.x-=rt.width/2+rt.labeloffset;break;case"r":rt.x+=rt.width/2+rt.labeloffset;break}})}function ct(mt){t.forEach(mt.edges(),function(At){var rt=mt.edge(At);rt.reversed&&rt.points.reverse()})}function ht(mt){t.forEach(mt.nodes(),function(At){if(mt.children(At).length){var rt=mt.node(At),Mt=mt.node(rt.borderTop),z=mt.node(rt.borderBottom),$=mt.node(t.last(rt.borderLeft)),dt=mt.node(t.last(rt.borderRight));rt.width=Math.abs(dt.x-$.x),rt.height=Math.abs(z.y-Mt.y),rt.x=$.x+rt.width/2,rt.y=Mt.y+rt.height/2}}),t.forEach(mt.nodes(),function(At){mt.node(At).dummy==="border"&&mt.removeNode(At)})}function ut(mt){t.forEach(mt.edges(),function(At){if(At.v===At.w){var rt=mt.node(At.v);rt.selfEdges||(rt.selfEdges=[]),rt.selfEdges.push({e:At,label:mt.edge(At)}),mt.removeEdge(At)}})}function It(mt){var At=v.buildLayerMatrix(mt);t.forEach(At,function(rt){var Mt=0;t.forEach(rt,function(z,$){var dt=mt.node(z);dt.order=$+Mt,t.forEach(dt.selfEdges,function(et){v.addDummyNode(mt,"selfedge",{width:et.label.width,height:et.label.height,rank:dt.rank,order:$+ ++Mt,e:et.e,label:et.label},"_se")}),delete dt.selfEdges})})}function Nt(mt){t.forEach(mt.nodes(),function(At){var rt=mt.node(At);if(rt.dummy==="selfedge"){var Mt=mt.node(rt.e.v),z=Mt.x+Mt.width/2,$=Mt.y,dt=rt.x-z,et=Mt.height/2;mt.setEdge(rt.e,rt.label),mt.removeNode(At),rt.label.points=[{x:z+2*dt/3,y:$-et},{x:z+5*dt/6,y:$-et},{x:z+dt,y:$},{x:z+5*dt/6,y:$+et},{x:z+2*dt/3,y:$+et}],rt.label.x=rt.x,rt.label.y=rt.y}})}function Lt(mt,At){return t.mapValues(t.pick(mt,At),Number)}function _t(mt){var At={};return t.forEach(mt,function(rt,Mt){At[Mt.toLowerCase()]=rt}),At}},"./node_modules/_dagre@0.8.5@dagre/lib/lodash.js":function(E,T,e){var t;try{t={cloneDeep:e("./node_modules/_lodash@4.17.20@lodash/cloneDeep.js"),constant:e("./node_modules/_lodash@4.17.20@lodash/constant.js"),defaults:e("./node_modules/_lodash@4.17.20@lodash/defaults.js"),each:e("./node_modules/_lodash@4.17.20@lodash/each.js"),filter:e("./node_modules/_lodash@4.17.20@lodash/filter.js"),find:e("./node_modules/_lodash@4.17.20@lodash/find.js"),flatten:e("./node_modules/_lodash@4.17.20@lodash/flatten.js"),forEach:e("./node_modules/_lodash@4.17.20@lodash/forEach.js"),forIn:e("./node_modules/_lodash@4.17.20@lodash/forIn.js"),has:e("./node_modules/_lodash@4.17.20@lodash/has.js"),isUndefined:e("./node_modules/_lodash@4.17.20@lodash/isUndefined.js"),last:e("./node_modules/_lodash@4.17.20@lodash/last.js"),map:e("./node_modules/_lodash@4.17.20@lodash/map.js"),mapValues:e("./node_modules/_lodash@4.17.20@lodash/mapValues.js"),max:e("./node_modules/_lodash@4.17.20@lodash/max.js"),merge:e("./node_modules/_lodash@4.17.20@lodash/merge.js"),min:e("./node_modules/_lodash@4.17.20@lodash/min.js"),minBy:e("./node_modules/_lodash@4.17.20@lodash/minBy.js"),now:e("./node_modules/_lodash@4.17.20@lodash/now.js"),pick:e("./node_modules/_lodash@4.17.20@lodash/pick.js"),range:e("./node_modules/_lodash@4.17.20@lodash/range.js"),reduce:e("./node_modules/_lodash@4.17.20@lodash/reduce.js"),sortBy:e("./node_modules/_lodash@4.17.20@lodash/sortBy.js"),uniqueId:e("./node_modules/_lodash@4.17.20@lodash/uniqueId.js"),values:e("./node_modules/_lodash@4.17.20@lodash/values.js"),zipObject:e("./node_modules/_lodash@4.17.20@lodash/zipObject.js")}}catch(l){}t||(t=window._),E.exports=t},"./node_modules/_dagre@0.8.5@dagre/lib/nesting-graph.js":function(E,T,e){var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),l=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js");E.exports={run:s,cleanup:n};function s(i){var a=l.addDummyNode(i,"root",{},"_root"),o=r(i),u=t.max(t.values(o))-1,f=2*u+1;i.graph().nestingRoot=a,t.forEach(i.edges(),function(b){i.edge(b).minlen*=f});var v=h(i)+1;t.forEach(i.children(),function(b){c(i,a,f,v,u,o,b)}),i.graph().nodeRankFactor=f}function c(i,a,o,u,f,v,b){var y=i.children(b);if(!y.length){b!==a&&i.setEdge(a,b,{weight:0,minlen:o});return}var g=l.addBorderNode(i,"_bt"),_=l.addBorderNode(i,"_bb"),M=i.node(b);i.setParent(g,b),M.borderTop=g,i.setParent(_,b),M.borderBottom=_,t.forEach(y,function(x){c(i,a,o,u,f,v,x);var m=i.node(x),S=m.borderTop?m.borderTop:x,P=m.borderBottom?m.borderBottom:x,A=m.borderTop?u:2*u,O=S!==P?1:f-v[b]+1;i.setEdge(g,S,{weight:A,minlen:O,nestingEdge:!0}),i.setEdge(P,_,{weight:A,minlen:O,nestingEdge:!0})}),i.parent(b)||i.setEdge(a,g,{weight:0,minlen:f+v[b]})}function r(i){var a={};function o(u,f){var v=i.children(u);v&&v.length&&t.forEach(v,function(b){o(b,f+1)}),a[u]=f}return t.forEach(i.children(),function(u){o(u,1)}),a}function h(i){return t.reduce(i.edges(),function(a,o){return a+i.edge(o).weight},0)}function n(i){var a=i.graph();i.removeNode(a.nestingRoot),delete a.nestingRoot,t.forEach(i.edges(),function(o){var u=i.edge(o);u.nestingEdge&&i.removeEdge(o)})}},"./node_modules/_dagre@0.8.5@dagre/lib/normalize.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),l=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js");E.exports={run:s,undo:r};function s(h){h.graph().dummyChains=[],t.forEach(h.edges(),function(n){c(h,n)})}function c(h,n){var i=n.v,a=h.node(i).rank,o=n.w,u=h.node(o).rank,f=n.name,v=h.edge(n),b=v.labelRank;if(u!==a+1){h.removeEdge(n);var y,g,_;for(_=0,++a;a<u;++_,++a)v.points=[],g={width:0,height:0,edgeLabel:v,edgeObj:n,rank:a},y=l.addDummyNode(h,"edge",g,"_d"),a===b&&(g.width=v.width,g.height=v.height,g.dummy="edge-label",g.labelpos=v.labelpos),h.setEdge(i,y,{weight:v.weight},f),_===0&&h.graph().dummyChains.push(y),i=y;h.setEdge(i,o,{weight:v.weight},f)}}function r(h){t.forEach(h.graph().dummyChains,function(n){var i=h.node(n),a=i.edgeLabel,o;for(h.setEdge(i.edgeObj,a);i.dummy;)o=h.successors(n)[0],h.removeNode(n),a.points.push({x:i.x,y:i.y}),i.dummy==="edge-label"&&(a.x=i.x,a.y=i.y,a.width=i.width,a.height=i.height),n=o,i=h.node(n)})}},"./node_modules/_dagre@0.8.5@dagre/lib/order/add-subgraph-constraints.js":function(E,T,e){var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js");E.exports=l;function l(s,c,r){var h={},n;t.forEach(r,function(i){for(var a=s.parent(i),o,u;a;){if(o=s.parent(a),o?(u=h[o],h[o]=a):(u=n,n=a),u&&u!==a){c.setEdge(u,a);return}a=o}})}},"./node_modules/_dagre@0.8.5@dagre/lib/order/barycenter.js":function(E,T,e){var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js");E.exports=l;function l(s,c){return t.map(c,function(r){var h=s.inEdges(r);if(h.length){var n=t.reduce(h,function(i,a){var o=s.edge(a),u=s.node(a.v);return{sum:i.sum+o.weight*u.order,weight:i.weight+o.weight}},{sum:0,weight:0});return{v:r,barycenter:n.sum/n.weight,weight:n.weight}}else return{v:r}})}},"./node_modules/_dagre@0.8.5@dagre/lib/order/build-layer-graph.js":function(E,T,e){var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),l=e("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").Graph;E.exports=s;function s(r,h,n){var i=c(r),a=new l({compound:!0}).setGraph({root:i}).setDefaultNodeLabel(function(o){return r.node(o)});return t.forEach(r.nodes(),function(o){var u=r.node(o),f=r.parent(o);(u.rank===h||u.minRank<=h&&h<=u.maxRank)&&(a.setNode(o),a.setParent(o,f||i),t.forEach(r[n](o),function(v){var b=v.v===o?v.w:v.v,y=a.edge(b,o),g=t.isUndefined(y)?0:y.weight;a.setEdge(b,o,{weight:r.edge(v).weight+g})}),t.has(u,"minRank")&&a.setNode(o,{borderLeft:u.borderLeft[h],borderRight:u.borderRight[h]}))}),a}function c(r){for(var h;r.hasNode(h=t.uniqueId("_root")););return h}},"./node_modules/_dagre@0.8.5@dagre/lib/order/cross-count.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js");E.exports=l;function l(c,r){for(var h=0,n=1;n<r.length;++n)h+=s(c,r[n-1],r[n]);return h}function s(c,r,h){for(var n=t.zipObject(h,t.map(h,function(v,b){return b})),i=t.flatten(t.map(r,function(v){return t.sortBy(t.map(c.outEdges(v),function(b){return{pos:n[b.w],weight:c.edge(b).weight}}),"pos")}),!0),a=1;a<h.length;)a<<=1;var o=2*a-1;a-=1;var u=t.map(new Array(o),function(){return 0}),f=0;return t.forEach(i.forEach(function(v){var b=v.pos+a;u[b]+=v.weight;for(var y=0;b>0;)b%2&&(y+=u[b+1]),b=b-1>>1,u[b]+=v.weight;f+=v.weight*y})),f}},"./node_modules/_dagre@0.8.5@dagre/lib/order/index.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),l=e("./node_modules/_dagre@0.8.5@dagre/lib/order/init-order.js"),s=e("./node_modules/_dagre@0.8.5@dagre/lib/order/cross-count.js"),c=e("./node_modules/_dagre@0.8.5@dagre/lib/order/sort-subgraph.js"),r=e("./node_modules/_dagre@0.8.5@dagre/lib/order/build-layer-graph.js"),h=e("./node_modules/_dagre@0.8.5@dagre/lib/order/add-subgraph-constraints.js"),n=e("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").Graph,i=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js");E.exports=a;function a(v){var b=i.maxRank(v),y=o(v,t.range(1,b+1),"inEdges"),g=o(v,t.range(b-1,-1,-1),"outEdges"),_=l(v);f(v,_);for(var M=Number.POSITIVE_INFINITY,x,m=0,S=0;S<4;++m,++S){u(m%2?y:g,m%4>=2),_=i.buildLayerMatrix(v);var P=s(v,_);P<M&&(S=0,x=t.cloneDeep(_),M=P)}f(v,x)}function o(v,b,y){return t.map(b,function(g){return r(v,g,y)})}function u(v,b){var y=new n;t.forEach(v,function(g){var _=g.graph().root,M=c(g,_,y,b);t.forEach(M.vs,function(x,m){g.node(x).order=m}),h(g,y,M.vs)})}function f(v,b){t.forEach(b,function(y){t.forEach(y,function(g,_){v.node(g).order=_})})}},"./node_modules/_dagre@0.8.5@dagre/lib/order/init-order.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js");E.exports=l;function l(s){var c={},r=t.filter(s.nodes(),function(o){return!s.children(o).length}),h=t.max(t.map(r,function(o){return s.node(o).rank})),n=t.map(t.range(h+1),function(){return[]});function i(o){if(!t.has(c,o)){c[o]=!0;var u=s.node(o);n[u.rank].push(o),t.forEach(s.successors(o),i)}}var a=t.sortBy(r,function(o){return s.node(o).rank});return t.forEach(a,i),n}},"./node_modules/_dagre@0.8.5@dagre/lib/order/resolve-conflicts.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js");E.exports=l;function l(r,h){var n={};t.forEach(r,function(a,o){var u=n[a.v]={indegree:0,in:[],out:[],vs:[a.v],i:o};t.isUndefined(a.barycenter)||(u.barycenter=a.barycenter,u.weight=a.weight)}),t.forEach(h.edges(),function(a){var o=n[a.v],u=n[a.w];!t.isUndefined(o)&&!t.isUndefined(u)&&(u.indegree++,o.out.push(n[a.w]))});var i=t.filter(n,function(a){return!a.indegree});return s(i)}function s(r){var h=[];function n(o){return function(u){u.merged||(t.isUndefined(u.barycenter)||t.isUndefined(o.barycenter)||u.barycenter>=o.barycenter)&&c(o,u)}}function i(o){return function(u){u.in.push(o),--u.indegree==0&&r.push(u)}}for(;r.length;){var a=r.pop();h.push(a),t.forEach(a.in.reverse(),n(a)),t.forEach(a.out,i(a))}return t.map(t.filter(h,function(o){return!o.merged}),function(o){return t.pick(o,["vs","i","barycenter","weight"])})}function c(r,h){var n=0,i=0;r.weight&&(n+=r.barycenter*r.weight,i+=r.weight),h.weight&&(n+=h.barycenter*h.weight,i+=h.weight),r.vs=h.vs.concat(r.vs),r.barycenter=n/i,r.weight=i,r.i=Math.min(h.i,r.i),h.merged=!0}},"./node_modules/_dagre@0.8.5@dagre/lib/order/sort-subgraph.js":function(E,T,e){var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),l=e("./node_modules/_dagre@0.8.5@dagre/lib/order/barycenter.js"),s=e("./node_modules/_dagre@0.8.5@dagre/lib/order/resolve-conflicts.js"),c=e("./node_modules/_dagre@0.8.5@dagre/lib/order/sort.js");E.exports=r;function r(i,a,o,u){var f=i.children(a),v=i.node(a),b=v?v.borderLeft:void 0,y=v?v.borderRight:void 0,g={};b&&(f=t.filter(f,function(P){return P!==b&&P!==y}));var _=l(i,f);t.forEach(_,function(P){if(i.children(P.v).length){var A=r(i,P.v,o,u);g[P.v]=A,t.has(A,"barycenter")&&n(P,A)}});var M=s(_,o);h(M,g);var x=c(M,u);if(b&&(x.vs=t.flatten([b,x.vs,y],!0),i.predecessors(b).length)){var m=i.node(i.predecessors(b)[0]),S=i.node(i.predecessors(y)[0]);t.has(x,"barycenter")||(x.barycenter=0,x.weight=0),x.barycenter=(x.barycenter*x.weight+m.order+S.order)/(x.weight+2),x.weight+=2}return x}function h(i,a){t.forEach(i,function(o){o.vs=t.flatten(o.vs.map(function(u){return a[u]?a[u].vs:u}),!0)})}function n(i,a){t.isUndefined(i.barycenter)?(i.barycenter=a.barycenter,i.weight=a.weight):(i.barycenter=(i.barycenter*i.weight+a.barycenter*a.weight)/(i.weight+a.weight),i.weight+=a.weight)}},"./node_modules/_dagre@0.8.5@dagre/lib/order/sort.js":function(E,T,e){var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),l=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js");E.exports=s;function s(h,n){var i=l.partition(h,function(g){return t.has(g,"barycenter")}),a=i.lhs,o=t.sortBy(i.rhs,function(g){return-g.i}),u=[],f=0,v=0,b=0;a.sort(r(!!n)),b=c(u,o,b),t.forEach(a,function(g){b+=g.vs.length,u.push(g.vs),f+=g.barycenter*g.weight,v+=g.weight,b=c(u,o,b)});var y={vs:t.flatten(u,!0)};return v&&(y.barycenter=f/v,y.weight=v),y}function c(h,n,i){for(var a;n.length&&(a=t.last(n)).i<=i;)n.pop(),h.push(a.vs),i++;return i}function r(h){return function(n,i){return n.barycenter<i.barycenter?-1:n.barycenter>i.barycenter?1:h?i.i-n.i:n.i-i.i}}},"./node_modules/_dagre@0.8.5@dagre/lib/parent-dummy-chains.js":function(E,T,e){var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js");E.exports=l;function l(r){var h=c(r);t.forEach(r.graph().dummyChains,function(n){for(var i=r.node(n),a=i.edgeObj,o=s(r,h,a.v,a.w),u=o.path,f=o.lca,v=0,b=u[v],y=!0;n!==a.w;){if(i=r.node(n),y){for(;(b=u[v])!==f&&r.node(b).maxRank<i.rank;)v++;b===f&&(y=!1)}if(!y){for(;v<u.length-1&&r.node(b=u[v+1]).minRank<=i.rank;)v++;b=u[v]}r.setParent(n,b),n=r.successors(n)[0]}})}function s(r,h,n,i){var a=[],o=[],u=Math.min(h[n].low,h[i].low),f=Math.max(h[n].lim,h[i].lim),v,b;v=n;do v=r.parent(v),a.push(v);while(v&&(h[v].low>u||f>h[v].lim));for(b=v,v=i;(v=r.parent(v))!==b;)o.push(v);return{path:a.concat(o.reverse()),lca:b}}function c(r){var h={},n=0;function i(a){var o=n;t.forEach(r.children(a),i),h[a]={low:o,lim:n++}}return t.forEach(r.children(),i),h}},"./node_modules/_dagre@0.8.5@dagre/lib/position/bk.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),l=e("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").Graph,s=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js");E.exports={positionX:y,findType1Conflicts:c,findType2Conflicts:r,addConflict:n,hasConflict:i,verticalAlignment:a,horizontalCompaction:o,alignCoordinates:v,findSmallestWidthAlignment:f,balance:b};function c(M,x){var m={};function S(P,A){var O=0,R=0,W=P.length,F=t.last(A);return t.forEach(A,function(Z,V){var k=h(M,Z),Y=k?M.node(k).order:W;(k||Z===F)&&(t.forEach(A.slice(R,V+1),function(K){t.forEach(M.predecessors(K),function(it){var ct=M.node(it),ht=ct.order;(ht<O||Y<ht)&&!(ct.dummy&&M.node(K).dummy)&&n(m,it,K)})}),R=V+1,O=Y)}),A}return t.reduce(x,S),m}function r(M,x){var m={};function S(A,O,R,W,F){var Z;t.forEach(t.range(O,R),function(V){Z=A[V],M.node(Z).dummy&&t.forEach(M.predecessors(Z),function(k){var Y=M.node(k);Y.dummy&&(Y.order<W||Y.order>F)&&n(m,k,Z)})})}function P(A,O){var R=-1,W,F=0;return t.forEach(O,function(Z,V){if(M.node(Z).dummy==="border"){var k=M.predecessors(Z);k.length&&(W=M.node(k[0]).order,S(O,F,V,R,W),F=V,R=W)}S(O,F,O.length,W,A.length)}),O}return t.reduce(x,P),m}function h(M,x){if(M.node(x).dummy)return t.find(M.predecessors(x),function(m){return M.node(m).dummy})}function n(M,x,m){if(x>m){var S=x;x=m,m=S}var P=M[x];P||(M[x]=P={}),P[m]=!0}function i(M,x,m){if(x>m){var S=x;x=m,m=S}return t.has(M[x],m)}function a(M,x,m,S){var P={},A={},O={};return t.forEach(x,function(R){t.forEach(R,function(W,F){P[W]=W,A[W]=W,O[W]=F})}),t.forEach(x,function(R){var W=-1;t.forEach(R,function(F){var Z=S(F);if(Z.length){Z=t.sortBy(Z,function(it){return O[it]});for(var V=(Z.length-1)/2,k=Math.floor(V),Y=Math.ceil(V);k<=Y;++k){var K=Z[k];A[F]===F&&W<O[K]&&!i(m,F,K)&&(A[K]=F,A[F]=P[F]=P[K],W=O[K])}}})}),{root:P,align:A}}function o(M,x,m,S,P){var A={},O=u(M,x,m,P),R=P?"borderLeft":"borderRight";function W(V,k){for(var Y=O.nodes(),K=Y.pop(),it={};K;)it[K]?V(K):(it[K]=!0,Y.push(K),Y=Y.concat(k(K))),K=Y.pop()}function F(V){A[V]=O.inEdges(V).reduce(function(k,Y){return Math.max(k,A[Y.v]+O.edge(Y))},0)}function Z(V){var k=O.outEdges(V).reduce(function(K,it){return Math.min(K,A[it.w]-O.edge(it))},Number.POSITIVE_INFINITY),Y=M.node(V);k!==Number.POSITIVE_INFINITY&&Y.borderType!==R&&(A[V]=Math.max(A[V],k))}return W(F,O.predecessors.bind(O)),W(Z,O.successors.bind(O)),t.forEach(S,function(V){A[V]=A[m[V]]}),A}function u(M,x,m,S){var P=new l,A=M.graph(),O=g(A.nodesep,A.edgesep,S);return t.forEach(x,function(R){var W;t.forEach(R,function(F){var Z=m[F];if(P.setNode(Z),W){var V=m[W],k=P.edge(V,Z);P.setEdge(V,Z,Math.max(O(M,F,W),k||0))}W=F})}),P}function f(M,x){return t.minBy(t.values(x),function(m){var S=Number.NEGATIVE_INFINITY,P=Number.POSITIVE_INFINITY;return t.forIn(m,function(A,O){var R=_(M,O)/2;S=Math.max(A+R,S),P=Math.min(A-R,P)}),S-P})}function v(M,x){var m=t.values(x),S=t.min(m),P=t.max(m);t.forEach(["u","d"],function(A){t.forEach(["l","r"],function(O){var R=A+O,W=M[R],F;if(W!==x){var Z=t.values(W);F=O==="l"?S-t.min(Z):P-t.max(Z),F&&(M[R]=t.mapValues(W,function(V){return V+F}))}})})}function b(M,x){return t.mapValues(M.ul,function(m,S){if(x)return M[x.toLowerCase()][S];var P=t.sortBy(t.map(M,S));return(P[1]+P[2])/2})}function y(M){var x=s.buildLayerMatrix(M),m=t.merge(c(M,x),r(M,x)),S={},P;t.forEach(["u","d"],function(O){P=O==="u"?x:t.values(x).reverse(),t.forEach(["l","r"],function(R){R==="r"&&(P=t.map(P,function(V){return t.values(V).reverse()}));var W=(O==="u"?M.predecessors:M.successors).bind(M),F=a(M,P,m,W),Z=o(M,P,F.root,F.align,R==="r");R==="r"&&(Z=t.mapValues(Z,function(V){return-V})),S[O+R]=Z})});var A=f(M,S);return v(S,A),b(S,M.graph().align)}function g(M,x,m){return function(S,P,A){var O=S.node(P),R=S.node(A),W=0,F;if(W+=O.width/2,t.has(O,"labelpos"))switch(O.labelpos.toLowerCase()){case"l":F=-O.width/2;break;case"r":F=O.width/2;break}if(F&&(W+=m?F:-F),F=0,W+=(O.dummy?x:M)/2,W+=(R.dummy?x:M)/2,W+=R.width/2,t.has(R,"labelpos"))switch(R.labelpos.toLowerCase()){case"l":F=R.width/2;break;case"r":F=-R.width/2;break}return F&&(W+=m?F:-F),F=0,W}}function _(M,x){return M.node(x).width}},"./node_modules/_dagre@0.8.5@dagre/lib/position/index.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),l=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js"),s=e("./node_modules/_dagre@0.8.5@dagre/lib/position/bk.js").positionX;E.exports=c;function c(h){h=l.asNonCompoundGraph(h),r(h),t.forEach(s(h),function(n,i){h.node(i).x=n})}function r(h){var n=l.buildLayerMatrix(h),i=h.graph().ranksep,a=0;t.forEach(n,function(o){var u=t.max(t.map(o,function(f){return h.node(f).height}));t.forEach(o,function(f){h.node(f).y=a+u/2}),a+=u+i})}},"./node_modules/_dagre@0.8.5@dagre/lib/rank/feasible-tree.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),l=e("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").Graph,s=e("./node_modules/_dagre@0.8.5@dagre/lib/rank/util.js").slack;E.exports=c;function c(i){var a=new l({directed:!1}),o=i.nodes()[0],u=i.nodeCount();a.setNode(o,{});for(var f,v;r(a,i)<u;)f=h(a,i),v=a.hasNode(f.v)?s(i,f):-s(i,f),n(a,i,v);return a}function r(i,a){function o(u){t.forEach(a.nodeEdges(u),function(f){var v=f.v,b=u===v?f.w:v;!i.hasNode(b)&&!s(a,f)&&(i.setNode(b,{}),i.setEdge(u,b,{}),o(b))})}return t.forEach(i.nodes(),o),i.nodeCount()}function h(i,a){return t.minBy(a.edges(),function(o){if(i.hasNode(o.v)!==i.hasNode(o.w))return s(a,o)})}function n(i,a,o){t.forEach(i.nodes(),function(u){a.node(u).rank+=o})}},"./node_modules/_dagre@0.8.5@dagre/lib/rank/index.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/rank/util.js"),l=t.longestPath,s=e("./node_modules/_dagre@0.8.5@dagre/lib/rank/feasible-tree.js"),c=e("./node_modules/_dagre@0.8.5@dagre/lib/rank/network-simplex.js");E.exports=r;function r(a){switch(a.graph().ranker){case"network-simplex":i(a);break;case"tight-tree":n(a);break;case"longest-path":h(a);break;default:i(a)}}var h=l;function n(a){l(a),s(a)}function i(a){c(a)}},"./node_modules/_dagre@0.8.5@dagre/lib/rank/network-simplex.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),l=e("./node_modules/_dagre@0.8.5@dagre/lib/rank/feasible-tree.js"),s=e("./node_modules/_dagre@0.8.5@dagre/lib/rank/util.js").slack,c=e("./node_modules/_dagre@0.8.5@dagre/lib/rank/util.js").longestPath,r=e("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").alg.preorder,h=e("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").alg.postorder,n=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js").simplify;E.exports=i,i.initLowLimValues=f,i.initCutValues=a,i.calcCutValue=u,i.leaveEdge=b,i.enterEdge=y,i.exchangeEdges=g;function i(m){m=n(m),c(m);var S=l(m);f(S),a(S,m);for(var P,A;P=b(S);)A=y(S,m,P),g(S,m,P,A)}function a(m,S){var P=h(m,m.nodes());P=P.slice(0,P.length-1),t.forEach(P,function(A){o(m,S,A)})}function o(m,S,P){var A=m.node(P),O=A.parent;m.edge(P,O).cutvalue=u(m,S,P)}function u(m,S,P){var A=m.node(P),O=A.parent,R=!0,W=S.edge(P,O),F=0;return W||(R=!1,W=S.edge(O,P)),F=W.weight,t.forEach(S.nodeEdges(P),function(Z){var V=Z.v===P,k=V?Z.w:Z.v;if(k!==O){var Y=V===R,K=S.edge(Z).weight;if(F+=Y?K:-K,M(m,P,k)){var it=m.edge(P,k).cutvalue;F+=Y?-it:it}}}),F}function f(m,S){arguments.length<2&&(S=m.nodes()[0]),v(m,{},1,S)}function v(m,S,P,A,O){var R=P,W=m.node(A);return S[A]=!0,t.forEach(m.neighbors(A),function(F){t.has(S,F)||(P=v(m,S,P,F,A))}),W.low=R,W.lim=P++,O?W.parent=O:delete W.parent,P}function b(m){return t.find(m.edges(),function(S){return m.edge(S).cutvalue<0})}function y(m,S,P){var A=P.v,O=P.w;S.hasEdge(A,O)||(A=P.w,O=P.v);var R=m.node(A),W=m.node(O),F=R,Z=!1;R.lim>W.lim&&(F=W,Z=!0);var V=t.filter(S.edges(),function(k){return Z===x(m,m.node(k.v),F)&&Z!==x(m,m.node(k.w),F)});return t.minBy(V,function(k){return s(S,k)})}function g(m,S,P,A){var O=P.v,R=P.w;m.removeEdge(O,R),m.setEdge(A.v,A.w,{}),f(m),a(m,S),_(m,S)}function _(m,S){var P=t.find(m.nodes(),function(O){return!S.node(O).parent}),A=r(m,P);A=A.slice(1),t.forEach(A,function(O){var R=m.node(O).parent,W=S.edge(O,R),F=!1;W||(W=S.edge(R,O),F=!0),S.node(O).rank=S.node(R).rank+(F?W.minlen:-W.minlen)})}function M(m,S,P){return m.hasEdge(S,P)}function x(m,S,P){return P.low<=S.lim&&S.lim<=P.lim}},"./node_modules/_dagre@0.8.5@dagre/lib/rank/util.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js");E.exports={longestPath:l,slack:s};function l(c){var r={};function h(n){var i=c.node(n);if(t.has(r,n))return i.rank;r[n]=!0;var a=t.min(t.map(c.outEdges(n),function(o){return h(o.w)-c.edge(o).minlen}));return(a===Number.POSITIVE_INFINITY||a===void 0||a===null)&&(a=0),i.rank=a}t.forEach(c.sources(),h)}function s(c,r){return c.node(r.w).rank-c.node(r.v).rank-c.edge(r).minlen}},"./node_modules/_dagre@0.8.5@dagre/lib/util.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),l=e("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").Graph;E.exports={addDummyNode:s,simplify:c,asNonCompoundGraph:r,successorWeights:h,predecessorWeights:n,intersectRect:i,buildLayerMatrix:a,normalizeRanks:o,removeEmptyRanks:u,addBorderNode:f,maxRank:v,partition:b,time:y,notime:g};function s(_,M,x,m){var S;do S=t.uniqueId(m);while(_.hasNode(S));return x.dummy=M,_.setNode(S,x),S}function c(_){var M=new l().setGraph(_.graph());return t.forEach(_.nodes(),function(x){M.setNode(x,_.node(x))}),t.forEach(_.edges(),function(x){var m=M.edge(x.v,x.w)||{weight:0,minlen:1},S=_.edge(x);M.setEdge(x.v,x.w,{weight:m.weight+S.weight,minlen:Math.max(m.minlen,S.minlen)})}),M}function r(_){var M=new l({multigraph:_.isMultigraph()}).setGraph(_.graph());return t.forEach(_.nodes(),function(x){_.children(x).length||M.setNode(x,_.node(x))}),t.forEach(_.edges(),function(x){M.setEdge(x,_.edge(x))}),M}function h(_){var M=t.map(_.nodes(),function(x){var m={};return t.forEach(_.outEdges(x),function(S){m[S.w]=(m[S.w]||0)+_.edge(S).weight}),m});return t.zipObject(_.nodes(),M)}function n(_){var M=t.map(_.nodes(),function(x){var m={};return t.forEach(_.inEdges(x),function(S){m[S.v]=(m[S.v]||0)+_.edge(S).weight}),m});return t.zipObject(_.nodes(),M)}function i(_,M){var x=_.x,m=_.y,S=M.x-x,P=M.y-m,A=_.width/2,O=_.height/2;if(!S&&!P)throw new Error("Not possible to find intersection inside of the rectangle");var R,W;return Math.abs(P)*A>Math.abs(S)*O?(P<0&&(O=-O),R=O*S/P,W=O):(S<0&&(A=-A),R=A,W=A*P/S),{x:x+R,y:m+W}}function a(_){var M=t.map(t.range(v(_)+1),function(){return[]});return t.forEach(_.nodes(),function(x){var m=_.node(x),S=m.rank;t.isUndefined(S)||(M[S][m.order]=x)}),M}function o(_){var M=t.min(t.map(_.nodes(),function(x){return _.node(x).rank}));t.forEach(_.nodes(),function(x){var m=_.node(x);t.has(m,"rank")&&(m.rank-=M)})}function u(_){var M=t.min(t.map(_.nodes(),function(P){return _.node(P).rank})),x=[];t.forEach(_.nodes(),function(P){var A=_.node(P).rank-M;x[A]||(x[A]=[]),x[A].push(P)});var m=0,S=_.graph().nodeRankFactor;t.forEach(x,function(P,A){t.isUndefined(P)&&A%S!=0?--m:m&&t.forEach(P,function(O){_.node(O).rank+=m})})}function f(_,M,x,m){var S={width:0,height:0};return arguments.length>=4&&(S.rank=x,S.order=m),s(_,"border",S,M)}function v(_){return t.max(t.map(_.nodes(),function(M){var x=_.node(M).rank;if(!t.isUndefined(x))return x}))}function b(_,M){var x={lhs:[],rhs:[]};return t.forEach(_,function(m){M(m)?x.lhs.push(m):x.rhs.push(m)}),x}function y(_,M){var x=t.now();try{return M()}finally{console.log(_+" time: "+(t.now()-x)+"ms")}}function g(_,M){return M()}},"./node_modules/_dagre@0.8.5@dagre/lib/version.js":function(E,T){E.exports="0.8.5"},"./node_modules/_graphlib@2.1.8@graphlib/index.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/index.js");E.exports={Graph:t.Graph,json:e("./node_modules/_graphlib@2.1.8@graphlib/lib/json.js"),alg:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/index.js"),version:t.version}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/components.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js");E.exports=l;function l(s){var c={},r=[],h;function n(i){t.has(c,i)||(c[i]=!0,h.push(i),t.each(s.successors(i),n),t.each(s.predecessors(i),n))}return t.each(s.nodes(),function(i){h=[],n(i),h.length&&r.push(h)}),r}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/dfs.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js");E.exports=l;function l(c,r,h){t.isArray(r)||(r=[r]);var n=(c.isDirected()?c.successors:c.neighbors).bind(c),i=[],a={};return t.each(r,function(o){if(!c.hasNode(o))throw new Error("Graph does not have node: "+o);s(c,o,h==="post",a,n,i)}),i}function s(c,r,h,n,i,a){t.has(n,r)||(n[r]=!0,h||a.push(r),t.each(i(r),function(o){s(c,o,h,n,i,a)}),h&&a.push(r))}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/dijkstra-all.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/dijkstra.js"),l=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js");E.exports=s;function s(c,r,h){return l.transform(c.nodes(),function(n,i){n[i]=t(c,i,r,h)},{})}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/dijkstra.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js"),l=e("./node_modules/_graphlib@2.1.8@graphlib/lib/data/priority-queue.js");E.exports=c;var s=t.constant(1);function c(h,n,i,a){return r(h,String(n),i||s,a||function(o){return h.outEdges(o)})}function r(h,n,i,a){var o={},u=new l,f,v,b=function(g){var _=g.v!==f?g.v:g.w,M=o[_],x=i(g),m=v.distance+x;if(x<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+g+" Weight: "+x);m<M.distance&&(M.distance=m,M.predecessor=f,u.decrease(_,m))};for(h.nodes().forEach(function(y){var g=y===n?0:Number.POSITIVE_INFINITY;o[y]={distance:g},u.add(y,g)});u.size()>0&&(f=u.removeMin(),v=o[f],v.distance!==Number.POSITIVE_INFINITY);)a(f).forEach(b);return o}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/find-cycles.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js"),l=e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/tarjan.js");E.exports=s;function s(c){return t.filter(l(c),function(r){return r.length>1||r.length===1&&c.hasEdge(r[0],r[0])})}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/floyd-warshall.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js");E.exports=s;var l=t.constant(1);function s(r,h,n){return c(r,h||l,n||function(i){return r.outEdges(i)})}function c(r,h,n){var i={},a=r.nodes();return a.forEach(function(o){i[o]={},i[o][o]={distance:0},a.forEach(function(u){o!==u&&(i[o][u]={distance:Number.POSITIVE_INFINITY})}),n(o).forEach(function(u){var f=u.v===o?u.w:u.v,v=h(u);i[o][f]={distance:v,predecessor:o}})}),a.forEach(function(o){var u=i[o];a.forEach(function(f){var v=i[f];a.forEach(function(b){var y=v[o],g=u[b],_=v[b],M=y.distance+g.distance;M<_.distance&&(_.distance=M,_.predecessor=g.predecessor)})})}),i}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/index.js":function(E,T,e){E.exports={components:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/components.js"),dijkstra:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/dijkstra.js"),dijkstraAll:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/dijkstra-all.js"),findCycles:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/find-cycles.js"),floydWarshall:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/floyd-warshall.js"),isAcyclic:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/is-acyclic.js"),postorder:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/postorder.js"),preorder:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/preorder.js"),prim:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/prim.js"),tarjan:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/tarjan.js"),topsort:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/topsort.js")}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/is-acyclic.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/topsort.js");E.exports=l;function l(s){try{t(s)}catch(c){if(c instanceof t.CycleException)return!1;throw c}return!0}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/postorder.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/dfs.js");E.exports=l;function l(s,c){return t(s,c,"post")}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/preorder.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/dfs.js");E.exports=l;function l(s,c){return t(s,c,"pre")}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/prim.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js"),l=e("./node_modules/_graphlib@2.1.8@graphlib/lib/graph.js"),s=e("./node_modules/_graphlib@2.1.8@graphlib/lib/data/priority-queue.js");E.exports=c;function c(r,h){var n=new l,i={},a=new s,o;function u(v){var b=v.v===o?v.w:v.v,y=a.priority(b);if(y!==void 0){var g=h(v);g<y&&(i[b]=o,a.decrease(b,g))}}if(r.nodeCount()===0)return n;t.each(r.nodes(),function(v){a.add(v,Number.POSITIVE_INFINITY),n.setNode(v)}),a.decrease(r.nodes()[0],0);for(var f=!1;a.size()>0;){if(o=a.removeMin(),t.has(i,o))n.setEdge(o,i[o]);else{if(f)throw new Error("Input graph is not connected: "+r);f=!0}r.nodeEdges(o).forEach(u)}return n}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/tarjan.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js");E.exports=l;function l(s){var c=0,r=[],h={},n=[];function i(a){var o=h[a]={onStack:!0,lowlink:c,index:c++};if(r.push(a),s.successors(a).forEach(function(v){t.has(h,v)?h[v].onStack&&(o.lowlink=Math.min(o.lowlink,h[v].index)):(i(v),o.lowlink=Math.min(o.lowlink,h[v].lowlink))}),o.lowlink===o.index){var u=[],f;do f=r.pop(),h[f].onStack=!1,u.push(f);while(a!==f);n.push(u)}}return s.nodes().forEach(function(a){t.has(h,a)||i(a)}),n}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/topsort.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js");E.exports=l,l.CycleException=s;function l(c){var r={},h={},n=[];function i(a){if(t.has(h,a))throw new s;t.has(r,a)||(h[a]=!0,r[a]=!0,t.each(c.predecessors(a),i),delete h[a],n.push(a))}if(t.each(c.sinks(),i),t.size(r)!==c.nodeCount())throw new s;return n}function s(){}s.prototype=new Error},"./node_modules/_graphlib@2.1.8@graphlib/lib/data/priority-queue.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js");E.exports=l;function l(){this._arr=[],this._keyIndices={}}l.prototype.size=function(){return this._arr.length},l.prototype.keys=function(){return this._arr.map(function(s){return s.key})},l.prototype.has=function(s){return t.has(this._keyIndices,s)},l.prototype.priority=function(s){var c=this._keyIndices[s];if(c!==void 0)return this._arr[c].priority},l.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},l.prototype.add=function(s,c){var r=this._keyIndices;if(s=String(s),!t.has(r,s)){var h=this._arr,n=h.length;return r[s]=n,h.push({key:s,priority:c}),this._decrease(n),!0}return!1},l.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var s=this._arr.pop();return delete this._keyIndices[s.key],this._heapify(0),s.key},l.prototype.decrease=function(s,c){var r=this._keyIndices[s];if(c>this._arr[r].priority)throw new Error("New priority is greater than current priority. Key: "+s+" Old: "+this._arr[r].priority+" New: "+c);this._arr[r].priority=c,this._decrease(r)},l.prototype._heapify=function(s){var c=this._arr,r=2*s,h=r+1,n=s;r<c.length&&(n=c[r].priority<c[n].priority?r:n,h<c.length&&(n=c[h].priority<c[n].priority?h:n),n!==s&&(this._swap(s,n),this._heapify(n)))},l.prototype._decrease=function(s){for(var c=this._arr,r=c[s].priority,h;s!==0&&(h=s>>1,!(c[h].priority<r));)this._swap(s,h),s=h},l.prototype._swap=function(s,c){var r=this._arr,h=this._keyIndices,n=r[s],i=r[c];r[s]=i,r[c]=n,h[i.key]=s,h[n.key]=c}},"./node_modules/_graphlib@2.1.8@graphlib/lib/graph.js":function(E,T,e){"use strict";var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js");E.exports=r;var l="\0",s="\0",c="";function r(u){this._isDirected=t.has(u,"directed")?u.directed:!0,this._isMultigraph=t.has(u,"multigraph")?u.multigraph:!1,this._isCompound=t.has(u,"compound")?u.compound:!1,this._label=void 0,this._defaultNodeLabelFn=t.constant(void 0),this._defaultEdgeLabelFn=t.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[s]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}r.prototype._nodeCount=0,r.prototype._edgeCount=0,r.prototype.isDirected=function(){return this._isDirected},r.prototype.isMultigraph=function(){return this._isMultigraph},r.prototype.isCompound=function(){return this._isCompound},r.prototype.setGraph=function(u){return this._label=u,this},r.prototype.graph=function(){return this._label},r.prototype.setDefaultNodeLabel=function(u){return t.isFunction(u)||(u=t.constant(u)),this._defaultNodeLabelFn=u,this},r.prototype.nodeCount=function(){return this._nodeCount},r.prototype.nodes=function(){return t.keys(this._nodes)},r.prototype.sources=function(){var u=this;return t.filter(this.nodes(),function(f){return t.isEmpty(u._in[f])})},r.prototype.sinks=function(){var u=this;return t.filter(this.nodes(),function(f){return t.isEmpty(u._out[f])})},r.prototype.setNodes=function(u,f){var v=arguments,b=this;return t.each(u,function(y){v.length>1?b.setNode(y,f):b.setNode(y)}),this},r.prototype.setNode=function(u,f){return t.has(this._nodes,u)?(arguments.length>1&&(this._nodes[u]=f),this):(this._nodes[u]=arguments.length>1?f:this._defaultNodeLabelFn(u),this._isCompound&&(this._parent[u]=s,this._children[u]={},this._children[s][u]=!0),this._in[u]={},this._preds[u]={},this._out[u]={},this._sucs[u]={},++this._nodeCount,this)},r.prototype.node=function(u){return this._nodes[u]},r.prototype.hasNode=function(u){return t.has(this._nodes,u)},r.prototype.removeNode=function(u){var f=this;if(t.has(this._nodes,u)){var v=function(y){f.removeEdge(f._edgeObjs[y])};delete this._nodes[u],this._isCompound&&(this._removeFromParentsChildList(u),delete this._parent[u],t.each(this.children(u),function(b){f.setParent(b)}),delete this._children[u]),t.each(t.keys(this._in[u]),v),delete this._in[u],delete this._preds[u],t.each(t.keys(this._out[u]),v),delete this._out[u],delete this._sucs[u],--this._nodeCount}return this},r.prototype.setParent=function(u,f){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(t.isUndefined(f))f=s;else{f+="";for(var v=f;!t.isUndefined(v);v=this.parent(v))if(v===u)throw new Error("Setting "+f+" as parent of "+u+" would create a cycle");this.setNode(f)}return this.setNode(u),this._removeFromParentsChildList(u),this._parent[u]=f,this._children[f][u]=!0,this},r.prototype._removeFromParentsChildList=function(u){delete this._children[this._parent[u]][u]},r.prototype.parent=function(u){if(this._isCompound){var f=this._parent[u];if(f!==s)return f}},r.prototype.children=function(u){if(t.isUndefined(u)&&(u=s),this._isCompound){var f=this._children[u];if(f)return t.keys(f)}else{if(u===s)return this.nodes();if(this.hasNode(u))return[]}},r.prototype.predecessors=function(u){var f=this._preds[u];if(f)return t.keys(f)},r.prototype.successors=function(u){var f=this._sucs[u];if(f)return t.keys(f)},r.prototype.neighbors=function(u){var f=this.predecessors(u);if(f)return t.union(f,this.successors(u))},r.prototype.isLeaf=function(u){var f;return this.isDirected()?f=this.successors(u):f=this.neighbors(u),f.length===0},r.prototype.filterNodes=function(u){var f=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});f.setGraph(this.graph());var v=this;t.each(this._nodes,function(g,_){u(_)&&f.setNode(_,g)}),t.each(this._edgeObjs,function(g){f.hasNode(g.v)&&f.hasNode(g.w)&&f.setEdge(g,v.edge(g))});var b={};function y(g){var _=v.parent(g);return _===void 0||f.hasNode(_)?(b[g]=_,_):_ in b?b[_]:y(_)}return this._isCompound&&t.each(f.nodes(),function(g){f.setParent(g,y(g))}),f},r.prototype.setDefaultEdgeLabel=function(u){return t.isFunction(u)||(u=t.constant(u)),this._defaultEdgeLabelFn=u,this},r.prototype.edgeCount=function(){return this._edgeCount},r.prototype.edges=function(){return t.values(this._edgeObjs)},r.prototype.setPath=function(u,f){var v=this,b=arguments;return t.reduce(u,function(y,g){return b.length>1?v.setEdge(y,g,f):v.setEdge(y,g),g}),this},r.prototype.setEdge=function(){var u,f,v,b,y=!1,g=arguments[0];typeof g=="object"&&g!==null&&"v"in g?(u=g.v,f=g.w,v=g.name,arguments.length===2&&(b=arguments[1],y=!0)):(u=g,f=arguments[1],v=arguments[3],arguments.length>2&&(b=arguments[2],y=!0)),u=""+u,f=""+f,t.isUndefined(v)||(v=""+v);var _=i(this._isDirected,u,f,v);if(t.has(this._edgeLabels,_))return y&&(this._edgeLabels[_]=b),this;if(!t.isUndefined(v)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(u),this.setNode(f),this._edgeLabels[_]=y?b:this._defaultEdgeLabelFn(u,f,v);var M=a(this._isDirected,u,f,v);return u=M.v,f=M.w,Object.freeze(M),this._edgeObjs[_]=M,h(this._preds[f],u),h(this._sucs[u],f),this._in[f][_]=M,this._out[u][_]=M,this._edgeCount++,this},r.prototype.edge=function(u,f,v){var b=arguments.length===1?o(this._isDirected,arguments[0]):i(this._isDirected,u,f,v);return this._edgeLabels[b]},r.prototype.hasEdge=function(u,f,v){var b=arguments.length===1?o(this._isDirected,arguments[0]):i(this._isDirected,u,f,v);return t.has(this._edgeLabels,b)},r.prototype.removeEdge=function(u,f,v){var b=arguments.length===1?o(this._isDirected,arguments[0]):i(this._isDirected,u,f,v),y=this._edgeObjs[b];return y&&(u=y.v,f=y.w,delete this._edgeLabels[b],delete this._edgeObjs[b],n(this._preds[f],u),n(this._sucs[u],f),delete this._in[f][b],delete this._out[u][b],this._edgeCount--),this},r.prototype.inEdges=function(u,f){var v=this._in[u];if(v){var b=t.values(v);return f?t.filter(b,function(y){return y.v===f}):b}},r.prototype.outEdges=function(u,f){var v=this._out[u];if(v){var b=t.values(v);return f?t.filter(b,function(y){return y.w===f}):b}},r.prototype.nodeEdges=function(u,f){var v=this.inEdges(u,f);if(v)return v.concat(this.outEdges(u,f))};function h(u,f){u[f]?u[f]++:u[f]=1}function n(u,f){--u[f]||delete u[f]}function i(u,f,v,b){var y=""+f,g=""+v;if(!u&&y>g){var _=y;y=g,g=_}return y+c+g+c+(t.isUndefined(b)?l:b)}function a(u,f,v,b){var y=""+f,g=""+v;if(!u&&y>g){var _=y;y=g,g=_}var M={v:y,w:g};return b&&(M.name=b),M}function o(u,f){return i(u,f.v,f.w,f.name)}},"./node_modules/_graphlib@2.1.8@graphlib/lib/index.js":function(E,T,e){E.exports={Graph:e("./node_modules/_graphlib@2.1.8@graphlib/lib/graph.js"),version:e("./node_modules/_graphlib@2.1.8@graphlib/lib/version.js")}},"./node_modules/_graphlib@2.1.8@graphlib/lib/json.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js"),l=e("./node_modules/_graphlib@2.1.8@graphlib/lib/graph.js");E.exports={write:s,read:h};function s(n){var i={options:{directed:n.isDirected(),multigraph:n.isMultigraph(),compound:n.isCompound()},nodes:c(n),edges:r(n)};return t.isUndefined(n.graph())||(i.value=t.clone(n.graph())),i}function c(n){return t.map(n.nodes(),function(i){var a=n.node(i),o=n.parent(i),u={v:i};return t.isUndefined(a)||(u.value=a),t.isUndefined(o)||(u.parent=o),u})}function r(n){return t.map(n.edges(),function(i){var a=n.edge(i),o={v:i.v,w:i.w};return t.isUndefined(i.name)||(o.name=i.name),t.isUndefined(a)||(o.value=a),o})}function h(n){var i=new l(n.options).setGraph(n.value);return t.each(n.nodes,function(a){i.setNode(a.v,a.value),a.parent&&i.setParent(a.v,a.parent)}),t.each(n.edges,function(a){i.setEdge({v:a.v,w:a.w,name:a.name},a.value)}),i}},"./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js":function(E,T,e){var t;try{t={clone:e("./node_modules/_lodash@4.17.20@lodash/clone.js"),constant:e("./node_modules/_lodash@4.17.20@lodash/constant.js"),each:e("./node_modules/_lodash@4.17.20@lodash/each.js"),filter:e("./node_modules/_lodash@4.17.20@lodash/filter.js"),has:e("./node_modules/_lodash@4.17.20@lodash/has.js"),isArray:e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),isEmpty:e("./node_modules/_lodash@4.17.20@lodash/isEmpty.js"),isFunction:e("./node_modules/_lodash@4.17.20@lodash/isFunction.js"),isUndefined:e("./node_modules/_lodash@4.17.20@lodash/isUndefined.js"),keys:e("./node_modules/_lodash@4.17.20@lodash/keys.js"),map:e("./node_modules/_lodash@4.17.20@lodash/map.js"),reduce:e("./node_modules/_lodash@4.17.20@lodash/reduce.js"),size:e("./node_modules/_lodash@4.17.20@lodash/size.js"),transform:e("./node_modules/_lodash@4.17.20@lodash/transform.js"),union:e("./node_modules/_lodash@4.17.20@lodash/union.js"),values:e("./node_modules/_lodash@4.17.20@lodash/values.js")}}catch(l){}t||(t=window._),E.exports=t},"./node_modules/_graphlib@2.1.8@graphlib/lib/version.js":function(E,T){E.exports="2.1.8"},"./node_modules/_isarray@0.0.1@isarray/index.js":function(E,T){E.exports=Array.isArray||function(e){return Object.prototype.toString.call(e)=="[object Array]"}},"./node_modules/_lodash@4.17.20@lodash/_DataView.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getNative.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_root.js"),s=t(l,"DataView");E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_Hash.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_hashClear.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_hashDelete.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_hashGet.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_hashHas.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_hashSet.js");function h(n){var i=-1,a=n==null?0:n.length;for(this.clear();++i<a;){var o=n[i];this.set(o[0],o[1])}}h.prototype.clear=t,h.prototype.delete=l,h.prototype.get=s,h.prototype.has=c,h.prototype.set=r,E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_ListCache.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_listCacheClear.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_listCacheDelete.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_listCacheGet.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_listCacheHas.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_listCacheSet.js");function h(n){var i=-1,a=n==null?0:n.length;for(this.clear();++i<a;){var o=n[i];this.set(o[0],o[1])}}h.prototype.clear=t,h.prototype.delete=l,h.prototype.get=s,h.prototype.has=c,h.prototype.set=r,E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_Map.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getNative.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_root.js"),s=t(l,"Map");E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_MapCache.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_mapCacheClear.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_mapCacheDelete.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_mapCacheGet.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_mapCacheHas.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_mapCacheSet.js");function h(n){var i=-1,a=n==null?0:n.length;for(this.clear();++i<a;){var o=n[i];this.set(o[0],o[1])}}h.prototype.clear=t,h.prototype.delete=l,h.prototype.get=s,h.prototype.has=c,h.prototype.set=r,E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_Promise.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getNative.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_root.js"),s=t(l,"Promise");E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_Set.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getNative.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_root.js"),s=t(l,"Set");E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_SetCache.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_MapCache.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_setCacheAdd.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_setCacheHas.js");function c(r){var h=-1,n=r==null?0:r.length;for(this.__data__=new t;++h<n;)this.add(r[h])}c.prototype.add=c.prototype.push=l,c.prototype.has=s,E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_Stack.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_ListCache.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_stackClear.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_stackDelete.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_stackGet.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_stackHas.js"),h=e("./node_modules/_lodash@4.17.20@lodash/_stackSet.js");function n(i){var a=this.__data__=new t(i);this.size=a.size}n.prototype.clear=l,n.prototype.delete=s,n.prototype.get=c,n.prototype.has=r,n.prototype.set=h,E.exports=n},"./node_modules/_lodash@4.17.20@lodash/_Symbol.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_root.js"),l=t.Symbol;E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_Uint8Array.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_root.js"),l=t.Uint8Array;E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_WeakMap.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getNative.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_root.js"),s=t(l,"WeakMap");E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_apply.js":function(E,T){function e(t,l,s){switch(s.length){case 0:return t.call(l);case 1:return t.call(l,s[0]);case 2:return t.call(l,s[0],s[1]);case 3:return t.call(l,s[0],s[1],s[2])}return t.apply(l,s)}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_arrayEach.js":function(E,T){function e(t,l){for(var s=-1,c=t==null?0:t.length;++s<c&&l(t[s],s,t)!==!1;);return t}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_arrayFilter.js":function(E,T){function e(t,l){for(var s=-1,c=t==null?0:t.length,r=0,h=[];++s<c;){var n=t[s];l(n,s,t)&&(h[r++]=n)}return h}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_arrayIncludes.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseIndexOf.js");function l(s,c){var r=s==null?0:s.length;return!!r&&t(s,c,0)>-1}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_arrayIncludesWith.js":function(E,T){function e(t,l,s){for(var c=-1,r=t==null?0:t.length;++c<r;)if(s(l,t[c]))return!0;return!1}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_arrayLikeKeys.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseTimes.js"),l=e("./node_modules/_lodash@4.17.20@lodash/isArguments.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),c=e("./node_modules/_lodash@4.17.20@lodash/isBuffer.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_isIndex.js"),h=e("./node_modules/_lodash@4.17.20@lodash/isTypedArray.js"),n=Object.prototype,i=n.hasOwnProperty;function a(o,u){var f=s(o),v=!f&&l(o),b=!f&&!v&&c(o),y=!f&&!v&&!b&&h(o),g=f||v||b||y,_=g?t(o.length,String):[],M=_.length;for(var x in o)(u||i.call(o,x))&&!(g&&(x=="length"||b&&(x=="offset"||x=="parent")||y&&(x=="buffer"||x=="byteLength"||x=="byteOffset")||r(x,M)))&&_.push(x);return _}E.exports=a},"./node_modules/_lodash@4.17.20@lodash/_arrayMap.js":function(E,T){function e(t,l){for(var s=-1,c=t==null?0:t.length,r=Array(c);++s<c;)r[s]=l(t[s],s,t);return r}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_arrayPush.js":function(E,T){function e(t,l){for(var s=-1,c=l.length,r=t.length;++s<c;)t[r+s]=l[s];return t}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_arrayReduce.js":function(E,T){function e(t,l,s,c){var r=-1,h=t==null?0:t.length;for(c&&h&&(s=t[++r]);++r<h;)s=l(s,t[r],r,t);return s}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_arraySome.js":function(E,T){function e(t,l){for(var s=-1,c=t==null?0:t.length;++s<c;)if(l(t[s],s,t))return!0;return!1}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_asciiSize.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseProperty.js"),l=t("length");E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_assignMergeValue.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseAssignValue.js"),l=e("./node_modules/_lodash@4.17.20@lodash/eq.js");function s(c,r,h){(h!==void 0&&!l(c[r],h)||h===void 0&&!(r in c))&&t(c,r,h)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_assignValue.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseAssignValue.js"),l=e("./node_modules/_lodash@4.17.20@lodash/eq.js"),s=Object.prototype,c=s.hasOwnProperty;function r(h,n,i){var a=h[n];(!(c.call(h,n)&&l(a,i))||i===void 0&&!(n in h))&&t(h,n,i)}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/_assocIndexOf.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/eq.js");function l(s,c){for(var r=s.length;r--;)if(t(s[r][0],c))return r;return-1}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_baseAssign.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_copyObject.js"),l=e("./node_modules/_lodash@4.17.20@lodash/keys.js");function s(c,r){return c&&t(r,l(r),c)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_baseAssignIn.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_copyObject.js"),l=e("./node_modules/_lodash@4.17.20@lodash/keysIn.js");function s(c,r){return c&&t(r,l(r),c)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_baseAssignValue.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_defineProperty.js");function l(s,c,r){c=="__proto__"&&t?t(s,c,{configurable:!0,enumerable:!0,value:r,writable:!0}):s[c]=r}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_baseClone.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Stack.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_arrayEach.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_assignValue.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_baseAssign.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_baseAssignIn.js"),h=e("./node_modules/_lodash@4.17.20@lodash/_cloneBuffer.js"),n=e("./node_modules/_lodash@4.17.20@lodash/_copyArray.js"),i=e("./node_modules/_lodash@4.17.20@lodash/_copySymbols.js"),a=e("./node_modules/_lodash@4.17.20@lodash/_copySymbolsIn.js"),o=e("./node_modules/_lodash@4.17.20@lodash/_getAllKeys.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_getAllKeysIn.js"),f=e("./node_modules/_lodash@4.17.20@lodash/_getTag.js"),v=e("./node_modules/_lodash@4.17.20@lodash/_initCloneArray.js"),b=e("./node_modules/_lodash@4.17.20@lodash/_initCloneByTag.js"),y=e("./node_modules/_lodash@4.17.20@lodash/_initCloneObject.js"),g=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),_=e("./node_modules/_lodash@4.17.20@lodash/isBuffer.js"),M=e("./node_modules/_lodash@4.17.20@lodash/isMap.js"),x=e("./node_modules/_lodash@4.17.20@lodash/isObject.js"),m=e("./node_modules/_lodash@4.17.20@lodash/isSet.js"),S=e("./node_modules/_lodash@4.17.20@lodash/keys.js"),P=e("./node_modules/_lodash@4.17.20@lodash/keysIn.js"),A=1,O=2,R=4,W="[object Arguments]",F="[object Array]",Z="[object Boolean]",V="[object Date]",k="[object Error]",Y="[object Function]",K="[object GeneratorFunction]",it="[object Map]",ct="[object Number]",ht="[object Object]",ut="[object RegExp]",It="[object Set]",Nt="[object String]",Lt="[object Symbol]",_t="[object WeakMap]",mt="[object ArrayBuffer]",At="[object DataView]",rt="[object Float32Array]",Mt="[object Float64Array]",z="[object Int8Array]",$="[object Int16Array]",dt="[object Int32Array]",et="[object Uint8Array]",ot="[object Uint8ClampedArray]",pt="[object Uint16Array]",H="[object Uint32Array]",nt={};nt[W]=nt[F]=nt[mt]=nt[At]=nt[Z]=nt[V]=nt[rt]=nt[Mt]=nt[z]=nt[$]=nt[dt]=nt[it]=nt[ct]=nt[ht]=nt[ut]=nt[It]=nt[Nt]=nt[Lt]=nt[et]=nt[ot]=nt[pt]=nt[H]=!0,nt[k]=nt[Y]=nt[_t]=!1;function at(q,Et,vt,Ft,Qt,ee){var Gt,$t=Et&A,Pe=Et&O,me=Et&R;if(vt&&(Gt=Qt?vt(q,Ft,Qt,ee):vt(q)),Gt!==void 0)return Gt;if(!x(q))return q;var le=g(q);if(le){if(Gt=v(q),!$t)return n(q,Gt)}else{var be=f(q),ze=be==Y||be==K;if(_(q))return h(q,$t);if(be==ht||be==W||ze&&!Qt){if(Gt=Pe||ze?{}:y(q),!$t)return Pe?a(q,r(Gt,q)):i(q,c(Gt,q))}else{if(!nt[be])return Qt?q:{};Gt=b(q,be,$t)}}ee||(ee=new t);var Xe=ee.get(q);if(Xe)return Xe;ee.set(q,Gt),m(q)?q.forEach(function(Hn){Gt.add(at(Hn,Et,vt,Hn,q,ee))}):M(q)&&q.forEach(function(Hn,nn){Gt.set(nn,at(Hn,Et,vt,nn,q,ee))});var _n=me?Pe?u:o:Pe?P:S,Kn=le?void 0:_n(q);return l(Kn||q,function(Hn,nn){Kn&&(nn=Hn,Hn=q[nn]),s(Gt,nn,at(Hn,Et,vt,nn,q,ee))}),Gt}E.exports=at},"./node_modules/_lodash@4.17.20@lodash/_baseCreate.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isObject.js"),l=Object.create,s=function(){function c(){}return function(r){if(!t(r))return{};if(l)return l(r);c.prototype=r;var h=new c;return c.prototype=void 0,h}}();E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_baseEach.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseForOwn.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_createBaseEach.js"),s=l(t);E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_baseExtremum.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isSymbol.js");function l(s,c,r){for(var h=-1,n=s.length;++h<n;){var i=s[h],a=c(i);if(a!=null&&(o===void 0?a===a&&!t(a):r(a,o)))var o=a,u=i}return u}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_baseFilter.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseEach.js");function l(s,c){var r=[];return t(s,function(h,n,i){c(h,n,i)&&r.push(h)}),r}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_baseFindIndex.js":function(E,T){function e(t,l,s,c){for(var r=t.length,h=s+(c?1:-1);c?h--:++h<r;)if(l(t[h],h,t))return h;return-1}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_baseFlatten.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayPush.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_isFlattenable.js");function s(c,r,h,n,i){var a=-1,o=c.length;for(h||(h=l),i||(i=[]);++a<o;){var u=c[a];r>0&&h(u)?r>1?s(u,r-1,h,n,i):t(i,u):n||(i[i.length]=u)}return i}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_baseFor.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_createBaseFor.js"),l=t();E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_baseForOwn.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseFor.js"),l=e("./node_modules/_lodash@4.17.20@lodash/keys.js");function s(c,r){return c&&t(c,r,l)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_baseGet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_castPath.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_toKey.js");function s(c,r){r=t(r,c);for(var h=0,n=r.length;c!=null&&h<n;)c=c[l(r[h++])];return h&&h==n?c:void 0}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_baseGetAllKeys.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayPush.js"),l=e("./node_modules/_lodash@4.17.20@lodash/isArray.js");function s(c,r,h){var n=r(c);return l(c)?n:t(n,h(c))}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_baseGetTag.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Symbol.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_getRawTag.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_objectToString.js"),c="[object Null]",r="[object Undefined]",h=t?t.toStringTag:void 0;function n(i){return i==null?i===void 0?r:c:h&&h in Object(i)?l(i):s(i)}E.exports=n},"./node_modules/_lodash@4.17.20@lodash/_baseGt.js":function(E,T){function e(t,l){return t>l}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_baseHas.js":function(E,T){var e=Object.prototype,t=e.hasOwnProperty;function l(s,c){return s!=null&&t.call(s,c)}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_baseHasIn.js":function(E,T){function e(t,l){return t!=null&&l in Object(t)}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_baseIndexOf.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseFindIndex.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_baseIsNaN.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_strictIndexOf.js");function c(r,h,n){return h===h?s(r,h,n):t(r,l,n)}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_baseIsArguments.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseGetTag.js"),l=e("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js"),s="[object Arguments]";function c(r){return l(r)&&t(r)==s}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_baseIsEqual.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseIsEqualDeep.js"),l=e("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js");function s(c,r,h,n,i){return c===r?!0:c==null||r==null||!l(c)&&!l(r)?c!==c&&r!==r:t(c,r,h,n,s,i)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_baseIsEqualDeep.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Stack.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_equalArrays.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_equalByTag.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_equalObjects.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_getTag.js"),h=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),n=e("./node_modules/_lodash@4.17.20@lodash/isBuffer.js"),i=e("./node_modules/_lodash@4.17.20@lodash/isTypedArray.js"),a=1,o="[object Arguments]",u="[object Array]",f="[object Object]",v=Object.prototype,b=v.hasOwnProperty;function y(g,_,M,x,m,S){var P=h(g),A=h(_),O=P?u:r(g),R=A?u:r(_);O=O==o?f:O,R=R==o?f:R;var W=O==f,F=R==f,Z=O==R;if(Z&&n(g)){if(!n(_))return!1;P=!0,W=!1}if(Z&&!W)return S||(S=new t),P||i(g)?l(g,_,M,x,m,S):s(g,_,O,M,x,m,S);if(!(M&a)){var V=W&&b.call(g,"__wrapped__"),k=F&&b.call(_,"__wrapped__");if(V||k){var Y=V?g.value():g,K=k?_.value():_;return S||(S=new t),m(Y,K,M,x,S)}}return Z?(S||(S=new t),c(g,_,M,x,m,S)):!1}E.exports=y},"./node_modules/_lodash@4.17.20@lodash/_baseIsMap.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getTag.js"),l=e("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js"),s="[object Map]";function c(r){return l(r)&&t(r)==s}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_baseIsMatch.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Stack.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_baseIsEqual.js"),s=1,c=2;function r(h,n,i,a){var o=i.length,u=o,f=!a;if(h==null)return!u;for(h=Object(h);o--;){var v=i[o];if(f&&v[2]?v[1]!==h[v[0]]:!(v[0]in h))return!1}for(;++o<u;){v=i[o];var b=v[0],y=h[b],g=v[1];if(f&&v[2]){if(y===void 0&&!(b in h))return!1}else{var _=new t;if(a)var M=a(y,g,b,h,n,_);if(!(M===void 0?l(g,y,s|c,a,_):M))return!1}}return!0}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/_baseIsNaN.js":function(E,T){function e(t){return t!==t}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_baseIsNative.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isFunction.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_isMasked.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isObject.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_toSource.js"),r=/[\\^$.*+?()[\]{}|]/g,h=/^\[object .+?Constructor\]$/,n=Function.prototype,i=Object.prototype,a=n.toString,o=i.hasOwnProperty,u=RegExp("^"+a.call(o).replace(r,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(v){if(!s(v)||l(v))return!1;var b=t(v)?u:h;return b.test(c(v))}E.exports=f},"./node_modules/_lodash@4.17.20@lodash/_baseIsSet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getTag.js"),l=e("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js"),s="[object Set]";function c(r){return l(r)&&t(r)==s}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_baseIsTypedArray.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseGetTag.js"),l=e("./node_modules/_lodash@4.17.20@lodash/isLength.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js"),c="[object Arguments]",r="[object Array]",h="[object Boolean]",n="[object Date]",i="[object Error]",a="[object Function]",o="[object Map]",u="[object Number]",f="[object Object]",v="[object RegExp]",b="[object Set]",y="[object String]",g="[object WeakMap]",_="[object ArrayBuffer]",M="[object DataView]",x="[object Float32Array]",m="[object Float64Array]",S="[object Int8Array]",P="[object Int16Array]",A="[object Int32Array]",O="[object Uint8Array]",R="[object Uint8ClampedArray]",W="[object Uint16Array]",F="[object Uint32Array]",Z={};Z[x]=Z[m]=Z[S]=Z[P]=Z[A]=Z[O]=Z[R]=Z[W]=Z[F]=!0,Z[c]=Z[r]=Z[_]=Z[h]=Z[M]=Z[n]=Z[i]=Z[a]=Z[o]=Z[u]=Z[f]=Z[v]=Z[b]=Z[y]=Z[g]=!1;function V(k){return s(k)&&l(k.length)&&!!Z[t(k)]}E.exports=V},"./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseMatches.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_baseMatchesProperty.js"),s=e("./node_modules/_lodash@4.17.20@lodash/identity.js"),c=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),r=e("./node_modules/_lodash@4.17.20@lodash/property.js");function h(n){return typeof n=="function"?n:n==null?s:typeof n=="object"?c(n)?l(n[0],n[1]):t(n):r(n)}E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_baseKeys.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_isPrototype.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_nativeKeys.js"),s=Object.prototype,c=s.hasOwnProperty;function r(h){if(!t(h))return l(h);var n=[];for(var i in Object(h))c.call(h,i)&&i!="constructor"&&n.push(i);return n}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/_baseKeysIn.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isObject.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_isPrototype.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_nativeKeysIn.js"),c=Object.prototype,r=c.hasOwnProperty;function h(n){if(!t(n))return s(n);var i=l(n),a=[];for(var o in n)o=="constructor"&&(i||!r.call(n,o))||a.push(o);return a}E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_baseLt.js":function(E,T){function e(t,l){return t<l}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_baseMap.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseEach.js"),l=e("./node_modules/_lodash@4.17.20@lodash/isArrayLike.js");function s(c,r){var h=-1,n=l(c)?Array(c.length):[];return t(c,function(i,a,o){n[++h]=r(i,a,o)}),n}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_baseMatches.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseIsMatch.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_getMatchData.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_matchesStrictComparable.js");function c(r){var h=l(r);return h.length==1&&h[0][2]?s(h[0][0],h[0][1]):function(n){return n===r||t(n,r,h)}}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_baseMatchesProperty.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseIsEqual.js"),l=e("./node_modules/_lodash@4.17.20@lodash/get.js"),s=e("./node_modules/_lodash@4.17.20@lodash/hasIn.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_isKey.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_isStrictComparable.js"),h=e("./node_modules/_lodash@4.17.20@lodash/_matchesStrictComparable.js"),n=e("./node_modules/_lodash@4.17.20@lodash/_toKey.js"),i=1,a=2;function o(u,f){return c(u)&&r(f)?h(n(u),f):function(v){var b=l(v,u);return b===void 0&&b===f?s(v,u):t(f,b,i|a)}}E.exports=o},"./node_modules/_lodash@4.17.20@lodash/_baseMerge.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Stack.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_assignMergeValue.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_baseFor.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_baseMergeDeep.js"),r=e("./node_modules/_lodash@4.17.20@lodash/isObject.js"),h=e("./node_modules/_lodash@4.17.20@lodash/keysIn.js"),n=e("./node_modules/_lodash@4.17.20@lodash/_safeGet.js");function i(a,o,u,f,v){a!==o&&s(o,function(b,y){if(v||(v=new t),r(b))c(a,o,y,u,i,f,v);else{var g=f?f(n(a,y),b,y+"",a,o,v):void 0;g===void 0&&(g=b),l(a,y,g)}},h)}E.exports=i},"./node_modules/_lodash@4.17.20@lodash/_baseMergeDeep.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_assignMergeValue.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_cloneBuffer.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_cloneTypedArray.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_copyArray.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_initCloneObject.js"),h=e("./node_modules/_lodash@4.17.20@lodash/isArguments.js"),n=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),i=e("./node_modules/_lodash@4.17.20@lodash/isArrayLikeObject.js"),a=e("./node_modules/_lodash@4.17.20@lodash/isBuffer.js"),o=e("./node_modules/_lodash@4.17.20@lodash/isFunction.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isObject.js"),f=e("./node_modules/_lodash@4.17.20@lodash/isPlainObject.js"),v=e("./node_modules/_lodash@4.17.20@lodash/isTypedArray.js"),b=e("./node_modules/_lodash@4.17.20@lodash/_safeGet.js"),y=e("./node_modules/_lodash@4.17.20@lodash/toPlainObject.js");function g(_,M,x,m,S,P,A){var O=b(_,x),R=b(M,x),W=A.get(R);if(W){t(_,x,W);return}var F=P?P(O,R,x+"",_,M,A):void 0,Z=F===void 0;if(Z){var V=n(R),k=!V&&a(R),Y=!V&&!k&&v(R);F=R,V||k||Y?n(O)?F=O:i(O)?F=c(O):k?(Z=!1,F=l(R,!0)):Y?(Z=!1,F=s(R,!0)):F=[]:f(R)||h(R)?(F=O,h(O)?F=y(O):(!u(O)||o(O))&&(F=r(R))):Z=!1}Z&&(A.set(R,F),S(F,R,m,P,A),A.delete(R)),t(_,x,F)}E.exports=g},"./node_modules/_lodash@4.17.20@lodash/_baseOrderBy.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayMap.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_baseGet.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_baseMap.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_baseSortBy.js"),h=e("./node_modules/_lodash@4.17.20@lodash/_baseUnary.js"),n=e("./node_modules/_lodash@4.17.20@lodash/_compareMultiple.js"),i=e("./node_modules/_lodash@4.17.20@lodash/identity.js"),a=e("./node_modules/_lodash@4.17.20@lodash/isArray.js");function o(u,f,v){f.length?f=t(f,function(g){return a(g)?function(_){return l(_,g.length===1?g[0]:g)}:g}):f=[i];var b=-1;f=t(f,h(s));var y=c(u,function(g,_,M){var x=t(f,function(m){return m(g)});return{criteria:x,index:++b,value:g}});return r(y,function(g,_){return n(g,_,v)})}E.exports=o},"./node_modules/_lodash@4.17.20@lodash/_basePick.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_basePickBy.js"),l=e("./node_modules/_lodash@4.17.20@lodash/hasIn.js");function s(c,r){return t(c,r,function(h,n){return l(c,n)})}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_basePickBy.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseGet.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_baseSet.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_castPath.js");function c(r,h,n){for(var i=-1,a=h.length,o={};++i<a;){var u=h[i],f=t(r,u);n(f,u)&&l(o,s(u,r),f)}return o}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_baseProperty.js":function(E,T){function e(t){return function(l){return l==null?void 0:l[t]}}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_basePropertyDeep.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseGet.js");function l(s){return function(c){return t(c,s)}}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_baseRange.js":function(E,T){var e=Math.ceil,t=Math.max;function l(s,c,r,h){for(var n=-1,i=t(e((c-s)/(r||1)),0),a=Array(i);i--;)a[h?i:++n]=s,s+=r;return a}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_baseReduce.js":function(E,T){function e(t,l,s,c,r){return r(t,function(h,n,i){s=c?(c=!1,h):l(s,h,n,i)}),s}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_baseRest.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/identity.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_overRest.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_setToString.js");function c(r,h){return s(l(r,h,t),r+"")}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_baseSet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_assignValue.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_castPath.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_isIndex.js"),c=e("./node_modules/_lodash@4.17.20@lodash/isObject.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_toKey.js");function h(n,i,a,o){if(!c(n))return n;i=l(i,n);for(var u=-1,f=i.length,v=f-1,b=n;b!=null&&++u<f;){var y=r(i[u]),g=a;if(y==="__proto__"||y==="constructor"||y==="prototype")return n;if(u!=v){var _=b[y];g=o?o(_,y,b):void 0,g===void 0&&(g=c(_)?_:s(i[u+1])?[]:{})}t(b,y,g),b=b[y]}return n}E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_baseSetToString.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/constant.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_defineProperty.js"),s=e("./node_modules/_lodash@4.17.20@lodash/identity.js"),c=l?function(r,h){return l(r,"toString",{configurable:!0,enumerable:!1,value:t(h),writable:!0})}:s;E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_baseSortBy.js":function(E,T){function e(t,l){var s=t.length;for(t.sort(l);s--;)t[s]=t[s].value;return t}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_baseTimes.js":function(E,T){function e(t,l){for(var s=-1,c=Array(t);++s<t;)c[s]=l(s);return c}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_baseToString.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Symbol.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_arrayMap.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),c=e("./node_modules/_lodash@4.17.20@lodash/isSymbol.js"),r=1/0,h=t?t.prototype:void 0,n=h?h.toString:void 0;function i(a){if(typeof a=="string")return a;if(s(a))return l(a,i)+"";if(c(a))return n?n.call(a):"";var o=a+"";return o=="0"&&1/a==-r?"-0":o}E.exports=i},"./node_modules/_lodash@4.17.20@lodash/_baseUnary.js":function(E,T){function e(t){return function(l){return t(l)}}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_baseUniq.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_SetCache.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_arrayIncludes.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_arrayIncludesWith.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_cacheHas.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_createSet.js"),h=e("./node_modules/_lodash@4.17.20@lodash/_setToArray.js"),n=200;function i(a,o,u){var f=-1,v=l,b=a.length,y=!0,g=[],_=g;if(u)y=!1,v=s;else if(b>=n){var M=o?null:r(a);if(M)return h(M);y=!1,v=c,_=new t}else _=o?[]:g;t:for(;++f<b;){var x=a[f],m=o?o(x):x;if(x=u||x!==0?x:0,y&&m===m){for(var S=_.length;S--;)if(_[S]===m)continue t;o&&_.push(m),g.push(x)}else v(_,m,u)||(_!==g&&_.push(m),g.push(x))}return g}E.exports=i},"./node_modules/_lodash@4.17.20@lodash/_baseValues.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayMap.js");function l(s,c){return t(c,function(r){return s[r]})}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_baseZipObject.js":function(E,T){function e(t,l,s){for(var c=-1,r=t.length,h=l.length,n={};++c<r;){var i=c<h?l[c]:void 0;s(n,t[c],i)}return n}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_cacheHas.js":function(E,T){function e(t,l){return t.has(l)}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_castFunction.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/identity.js");function l(s){return typeof s=="function"?s:t}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_castPath.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_isKey.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_stringToPath.js"),c=e("./node_modules/_lodash@4.17.20@lodash/toString.js");function r(h,n){return t(h)?h:l(h,n)?[h]:s(c(h))}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/_cloneArrayBuffer.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Uint8Array.js");function l(s){var c=new s.constructor(s.byteLength);return new t(c).set(new t(s)),c}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_cloneBuffer.js":function(E,T,e){(function(t){var l=e("./node_modules/_lodash@4.17.20@lodash/_root.js"),s=T&&!T.nodeType&&T,c=s&&typeof t=="object"&&t&&!t.nodeType&&t,r=c&&c.exports===s,h=r?l.Buffer:void 0,n=h?h.allocUnsafe:void 0;function i(a,o){if(o)return a.slice();var u=a.length,f=n?n(u):new a.constructor(u);return a.copy(f),f}t.exports=i}).call(this,e("./node_modules/_webpack@4.46.0@webpack/buildin/module.js")(E))},"./node_modules/_lodash@4.17.20@lodash/_cloneDataView.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_cloneArrayBuffer.js");function l(s,c){var r=c?t(s.buffer):s.buffer;return new s.constructor(r,s.byteOffset,s.byteLength)}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_cloneRegExp.js":function(E,T){var e=/\w*$/;function t(l){var s=new l.constructor(l.source,e.exec(l));return s.lastIndex=l.lastIndex,s}E.exports=t},"./node_modules/_lodash@4.17.20@lodash/_cloneSymbol.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Symbol.js"),l=t?t.prototype:void 0,s=l?l.valueOf:void 0;function c(r){return s?Object(s.call(r)):{}}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_cloneTypedArray.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_cloneArrayBuffer.js");function l(s,c){var r=c?t(s.buffer):s.buffer;return new s.constructor(r,s.byteOffset,s.length)}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_compareAscending.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isSymbol.js");function l(s,c){if(s!==c){var r=s!==void 0,h=s===null,n=s===s,i=t(s),a=c!==void 0,o=c===null,u=c===c,f=t(c);if(!o&&!f&&!i&&s>c||i&&a&&u&&!o&&!f||h&&a&&u||!r&&u||!n)return 1;if(!h&&!i&&!f&&s<c||f&&r&&n&&!h&&!i||o&&r&&n||!a&&n||!u)return-1}return 0}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_compareMultiple.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_compareAscending.js");function l(s,c,r){for(var h=-1,n=s.criteria,i=c.criteria,a=n.length,o=r.length;++h<a;){var u=t(n[h],i[h]);if(u){if(h>=o)return u;var f=r[h];return u*(f=="desc"?-1:1)}}return s.index-c.index}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_copyArray.js":function(E,T){function e(t,l){var s=-1,c=t.length;for(l||(l=Array(c));++s<c;)l[s]=t[s];return l}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_copyObject.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_assignValue.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_baseAssignValue.js");function s(c,r,h,n){var i=!h;h||(h={});for(var a=-1,o=r.length;++a<o;){var u=r[a],f=n?n(h[u],c[u],u,h,c):void 0;f===void 0&&(f=c[u]),i?l(h,u,f):t(h,u,f)}return h}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_copySymbols.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_copyObject.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_getSymbols.js");function s(c,r){return t(c,l(c),r)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_copySymbolsIn.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_copyObject.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_getSymbolsIn.js");function s(c,r){return t(c,l(c),r)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_coreJsData.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_root.js"),l=t["__core-js_shared__"];E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_createAssigner.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseRest.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_isIterateeCall.js");function s(c){return t(function(r,h){var n=-1,i=h.length,a=i>1?h[i-1]:void 0,o=i>2?h[2]:void 0;for(a=c.length>3&&typeof a=="function"?(i--,a):void 0,o&&l(h[0],h[1],o)&&(a=i<3?void 0:a,i=1),r=Object(r);++n<i;){var u=h[n];u&&c(r,u,n,a)}return r})}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_createBaseEach.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isArrayLike.js");function l(s,c){return function(r,h){if(r==null)return r;if(!t(r))return s(r,h);for(var n=r.length,i=c?n:-1,a=Object(r);(c?i--:++i<n)&&h(a[i],i,a)!==!1;);return r}}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_createBaseFor.js":function(E,T){function e(t){return function(l,s,c){for(var r=-1,h=Object(l),n=c(l),i=n.length;i--;){var a=n[t?i:++r];if(s(h[a],a,h)===!1)break}return l}}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_createFind.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js"),l=e("./node_modules/_lodash@4.17.20@lodash/isArrayLike.js"),s=e("./node_modules/_lodash@4.17.20@lodash/keys.js");function c(r){return function(h,n,i){var a=Object(h);if(!l(h)){var o=t(n,3);h=s(h),n=function(v){return o(a[v],v,a)}}var u=r(h,n,i);return u>-1?a[o?h[u]:u]:void 0}}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_createRange.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseRange.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_isIterateeCall.js"),s=e("./node_modules/_lodash@4.17.20@lodash/toFinite.js");function c(r){return function(h,n,i){return i&&typeof i!="number"&&l(h,n,i)&&(n=i=void 0),h=s(h),n===void 0?(n=h,h=0):n=s(n),i=i===void 0?h<n?1:-1:s(i),t(h,n,i,r)}}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_createSet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Set.js"),l=e("./node_modules/_lodash@4.17.20@lodash/noop.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_setToArray.js"),c=1/0,r=t&&1/s(new t([,-0]))[1]==c?function(h){return new t(h)}:l;E.exports=r},"./node_modules/_lodash@4.17.20@lodash/_defineProperty.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getNative.js"),l=function(){try{var s=t(Object,"defineProperty");return s({},"",{}),s}catch(c){}}();E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_equalArrays.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_SetCache.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_arraySome.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_cacheHas.js"),c=1,r=2;function h(n,i,a,o,u,f){var v=a&c,b=n.length,y=i.length;if(b!=y&&!(v&&y>b))return!1;var g=f.get(n),_=f.get(i);if(g&&_)return g==i&&_==n;var M=-1,x=!0,m=a&r?new t:void 0;for(f.set(n,i),f.set(i,n);++M<b;){var S=n[M],P=i[M];if(o)var A=v?o(P,S,M,i,n,f):o(S,P,M,n,i,f);if(A!==void 0){if(A)continue;x=!1;break}if(m){if(!l(i,function(O,R){if(!s(m,R)&&(S===O||u(S,O,a,o,f)))return m.push(R)})){x=!1;break}}else if(!(S===P||u(S,P,a,o,f))){x=!1;break}}return f.delete(n),f.delete(i),x}E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_equalByTag.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Symbol.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_Uint8Array.js"),s=e("./node_modules/_lodash@4.17.20@lodash/eq.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_equalArrays.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_mapToArray.js"),h=e("./node_modules/_lodash@4.17.20@lodash/_setToArray.js"),n=1,i=2,a="[object Boolean]",o="[object Date]",u="[object Error]",f="[object Map]",v="[object Number]",b="[object RegExp]",y="[object Set]",g="[object String]",_="[object Symbol]",M="[object ArrayBuffer]",x="[object DataView]",m=t?t.prototype:void 0,S=m?m.valueOf:void 0;function P(A,O,R,W,F,Z,V){switch(R){case x:if(A.byteLength!=O.byteLength||A.byteOffset!=O.byteOffset)return!1;A=A.buffer,O=O.buffer;case M:return!(A.byteLength!=O.byteLength||!Z(new l(A),new l(O)));case a:case o:case v:return s(+A,+O);case u:return A.name==O.name&&A.message==O.message;case b:case g:return A==O+"";case f:var k=r;case y:var Y=W&n;if(k||(k=h),A.size!=O.size&&!Y)return!1;var K=V.get(A);if(K)return K==O;W|=i,V.set(A,O);var it=c(k(A),k(O),W,F,Z,V);return V.delete(A),it;case _:if(S)return S.call(A)==S.call(O)}return!1}E.exports=P},"./node_modules/_lodash@4.17.20@lodash/_equalObjects.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getAllKeys.js"),l=1,s=Object.prototype,c=s.hasOwnProperty;function r(h,n,i,a,o,u){var f=i&l,v=t(h),b=v.length,y=t(n),g=y.length;if(b!=g&&!f)return!1;for(var _=b;_--;){var M=v[_];if(!(f?M in n:c.call(n,M)))return!1}var x=u.get(h),m=u.get(n);if(x&&m)return x==n&&m==h;var S=!0;u.set(h,n),u.set(n,h);for(var P=f;++_<b;){M=v[_];var A=h[M],O=n[M];if(a)var R=f?a(O,A,M,n,h,u):a(A,O,M,h,n,u);if(!(R===void 0?A===O||o(A,O,i,a,u):R)){S=!1;break}P||(P=M=="constructor")}if(S&&!P){var W=h.constructor,F=n.constructor;W!=F&&"constructor"in h&&"constructor"in n&&!(typeof W=="function"&&W instanceof W&&typeof F=="function"&&F instanceof F)&&(S=!1)}return u.delete(h),u.delete(n),S}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/_flatRest.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/flatten.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_overRest.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_setToString.js");function c(r){return s(l(r,void 0,t),r+"")}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_freeGlobal.js":function(E,T,e){(function(t){var l=typeof t=="object"&&t&&t.Object===Object&&t;E.exports=l}).call(this,e("./node_modules/_webpack@4.46.0@webpack/buildin/global.js"))},"./node_modules/_lodash@4.17.20@lodash/_getAllKeys.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseGetAllKeys.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_getSymbols.js"),s=e("./node_modules/_lodash@4.17.20@lodash/keys.js");function c(r){return t(r,s,l)}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_getAllKeysIn.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseGetAllKeys.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_getSymbolsIn.js"),s=e("./node_modules/_lodash@4.17.20@lodash/keysIn.js");function c(r){return t(r,s,l)}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_getMapData.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_isKeyable.js");function l(s,c){var r=s.__data__;return t(c)?r[typeof c=="string"?"string":"hash"]:r.map}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_getMatchData.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_isStrictComparable.js"),l=e("./node_modules/_lodash@4.17.20@lodash/keys.js");function s(c){for(var r=l(c),h=r.length;h--;){var n=r[h],i=c[n];r[h]=[n,i,t(i)]}return r}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_getNative.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseIsNative.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_getValue.js");function s(c,r){var h=l(c,r);return t(h)?h:void 0}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_getPrototype.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_overArg.js"),l=t(Object.getPrototypeOf,Object);E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_getRawTag.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Symbol.js"),l=Object.prototype,s=l.hasOwnProperty,c=l.toString,r=t?t.toStringTag:void 0;function h(n){var i=s.call(n,r),a=n[r];try{n[r]=void 0;var o=!0}catch(f){}var u=c.call(n);return o&&(i?n[r]=a:delete n[r]),u}E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_getSymbols.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayFilter.js"),l=e("./node_modules/_lodash@4.17.20@lodash/stubArray.js"),s=Object.prototype,c=s.propertyIsEnumerable,r=Object.getOwnPropertySymbols,h=r?function(n){return n==null?[]:(n=Object(n),t(r(n),function(i){return c.call(n,i)}))}:l;E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_getSymbolsIn.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayPush.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_getPrototype.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_getSymbols.js"),c=e("./node_modules/_lodash@4.17.20@lodash/stubArray.js"),r=Object.getOwnPropertySymbols,h=r?function(n){for(var i=[];n;)t(i,s(n)),n=l(n);return i}:c;E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_getTag.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_DataView.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_Map.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_Promise.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_Set.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_WeakMap.js"),h=e("./node_modules/_lodash@4.17.20@lodash/_baseGetTag.js"),n=e("./node_modules/_lodash@4.17.20@lodash/_toSource.js"),i="[object Map]",a="[object Object]",o="[object Promise]",u="[object Set]",f="[object WeakMap]",v="[object DataView]",b=n(t),y=n(l),g=n(s),_=n(c),M=n(r),x=h;(t&&x(new t(new ArrayBuffer(1)))!=v||l&&x(new l)!=i||s&&x(s.resolve())!=o||c&&x(new c)!=u||r&&x(new r)!=f)&&(x=function(S){var P=h(S),A=P==a?S.constructor:void 0,O=A?n(A):"";if(O)switch(O){case b:return v;case y:return i;case g:return o;case _:return u;case M:return f}return P}),E.exports=x},"./node_modules/_lodash@4.17.20@lodash/_getValue.js":function(E,T){function e(t,l){return t==null?void 0:t[l]}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_hasPath.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_castPath.js"),l=e("./node_modules/_lodash@4.17.20@lodash/isArguments.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_isIndex.js"),r=e("./node_modules/_lodash@4.17.20@lodash/isLength.js"),h=e("./node_modules/_lodash@4.17.20@lodash/_toKey.js");function n(i,a,o){a=t(a,i);for(var u=-1,f=a.length,v=!1;++u<f;){var b=h(a[u]);if(!(v=i!=null&&o(i,b)))break;i=i[b]}return v||++u!=f?v:(f=i==null?0:i.length,!!f&&r(f)&&c(b,f)&&(s(i)||l(i)))}E.exports=n},"./node_modules/_lodash@4.17.20@lodash/_hasUnicode.js":function(E,T){var e="\\ud800-\\udfff",t="\\u0300-\\u036f",l="\\ufe20-\\ufe2f",s="\\u20d0-\\u20ff",c=t+l+s,r="\\ufe0e\\ufe0f",h="\\u200d",n=RegExp("["+h+e+c+r+"]");function i(a){return n.test(a)}E.exports=i},"./node_modules/_lodash@4.17.20@lodash/_hashClear.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_nativeCreate.js");function l(){this.__data__=t?t(null):{},this.size=0}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_hashDelete.js":function(E,T){function e(t){var l=this.has(t)&&delete this.__data__[t];return this.size-=l?1:0,l}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_hashGet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_nativeCreate.js"),l="__lodash_hash_undefined__",s=Object.prototype,c=s.hasOwnProperty;function r(h){var n=this.__data__;if(t){var i=n[h];return i===l?void 0:i}return c.call(n,h)?n[h]:void 0}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/_hashHas.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_nativeCreate.js"),l=Object.prototype,s=l.hasOwnProperty;function c(r){var h=this.__data__;return t?h[r]!==void 0:s.call(h,r)}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_hashSet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_nativeCreate.js"),l="__lodash_hash_undefined__";function s(c,r){var h=this.__data__;return this.size+=this.has(c)?0:1,h[c]=t&&r===void 0?l:r,this}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_initCloneArray.js":function(E,T){var e=Object.prototype,t=e.hasOwnProperty;function l(s){var c=s.length,r=new s.constructor(c);return c&&typeof s[0]=="string"&&t.call(s,"index")&&(r.index=s.index,r.input=s.input),r}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_initCloneByTag.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_cloneArrayBuffer.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_cloneDataView.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_cloneRegExp.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_cloneSymbol.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_cloneTypedArray.js"),h="[object Boolean]",n="[object Date]",i="[object Map]",a="[object Number]",o="[object RegExp]",u="[object Set]",f="[object String]",v="[object Symbol]",b="[object ArrayBuffer]",y="[object DataView]",g="[object Float32Array]",_="[object Float64Array]",M="[object Int8Array]",x="[object Int16Array]",m="[object Int32Array]",S="[object Uint8Array]",P="[object Uint8ClampedArray]",A="[object Uint16Array]",O="[object Uint32Array]";function R(W,F,Z){var V=W.constructor;switch(F){case b:return t(W);case h:case n:return new V(+W);case y:return l(W,Z);case g:case _:case M:case x:case m:case S:case P:case A:case O:return r(W,Z);case i:return new V;case a:case f:return new V(W);case o:return s(W);case u:return new V;case v:return c(W)}}E.exports=R},"./node_modules/_lodash@4.17.20@lodash/_initCloneObject.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseCreate.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_getPrototype.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_isPrototype.js");function c(r){return typeof r.constructor=="function"&&!s(r)?t(l(r)):{}}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_isFlattenable.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Symbol.js"),l=e("./node_modules/_lodash@4.17.20@lodash/isArguments.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),c=t?t.isConcatSpreadable:void 0;function r(h){return s(h)||l(h)||!!(c&&h&&h[c])}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/_isIndex.js":function(E,T){var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function l(s,c){var r=typeof s;return c=c==null?e:c,!!c&&(r=="number"||r!="symbol"&&t.test(s))&&s>-1&&s%1==0&&s<c}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_isIterateeCall.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/eq.js"),l=e("./node_modules/_lodash@4.17.20@lodash/isArrayLike.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_isIndex.js"),c=e("./node_modules/_lodash@4.17.20@lodash/isObject.js");function r(h,n,i){if(!c(i))return!1;var a=typeof n;return(a=="number"?l(i)&&s(n,i.length):a=="string"&&n in i)?t(i[n],h):!1}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/_isKey.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),l=e("./node_modules/_lodash@4.17.20@lodash/isSymbol.js"),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,c=/^\w*$/;function r(h,n){if(t(h))return!1;var i=typeof h;return i=="number"||i=="symbol"||i=="boolean"||h==null||l(h)?!0:c.test(h)||!s.test(h)||n!=null&&h in Object(n)}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/_isKeyable.js":function(E,T){function e(t){var l=typeof t;return l=="string"||l=="number"||l=="symbol"||l=="boolean"?t!=="__proto__":t===null}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_isMasked.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_coreJsData.js"),l=function(){var c=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}();function s(c){return!!l&&l in c}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_isPrototype.js":function(E,T){var e=Object.prototype;function t(l){var s=l&&l.constructor,c=typeof s=="function"&&s.prototype||e;return l===c}E.exports=t},"./node_modules/_lodash@4.17.20@lodash/_isStrictComparable.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isObject.js");function l(s){return s===s&&!t(s)}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_listCacheClear.js":function(E,T){function e(){this.__data__=[],this.size=0}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_listCacheDelete.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_assocIndexOf.js"),l=Array.prototype,s=l.splice;function c(r){var h=this.__data__,n=t(h,r);if(n<0)return!1;var i=h.length-1;return n==i?h.pop():s.call(h,n,1),--this.size,!0}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_listCacheGet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_assocIndexOf.js");function l(s){var c=this.__data__,r=t(c,s);return r<0?void 0:c[r][1]}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_listCacheHas.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_assocIndexOf.js");function l(s){return t(this.__data__,s)>-1}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_listCacheSet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_assocIndexOf.js");function l(s,c){var r=this.__data__,h=t(r,s);return h<0?(++this.size,r.push([s,c])):r[h][1]=c,this}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_mapCacheClear.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Hash.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_ListCache.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_Map.js");function c(){this.size=0,this.__data__={hash:new t,map:new(s||l),string:new t}}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_mapCacheDelete.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getMapData.js");function l(s){var c=t(this,s).delete(s);return this.size-=c?1:0,c}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_mapCacheGet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getMapData.js");function l(s){return t(this,s).get(s)}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_mapCacheHas.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getMapData.js");function l(s){return t(this,s).has(s)}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_mapCacheSet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getMapData.js");function l(s,c){var r=t(this,s),h=r.size;return r.set(s,c),this.size+=r.size==h?0:1,this}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_mapToArray.js":function(E,T){function e(t){var l=-1,s=Array(t.size);return t.forEach(function(c,r){s[++l]=[r,c]}),s}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_matchesStrictComparable.js":function(E,T){function e(t,l){return function(s){return s==null?!1:s[t]===l&&(l!==void 0||t in Object(s))}}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_memoizeCapped.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/memoize.js"),l=500;function s(c){var r=t(c,function(n){return h.size===l&&h.clear(),n}),h=r.cache;return r}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_nativeCreate.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getNative.js"),l=t(Object,"create");E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_nativeKeys.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_overArg.js"),l=t(Object.keys,Object);E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_nativeKeysIn.js":function(E,T){function e(t){var l=[];if(t!=null)for(var s in Object(t))l.push(s);return l}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_nodeUtil.js":function(E,T,e){(function(t){var l=e("./node_modules/_lodash@4.17.20@lodash/_freeGlobal.js"),s=T&&!T.nodeType&&T,c=s&&typeof t=="object"&&t&&!t.nodeType&&t,r=c&&c.exports===s,h=r&&l.process,n=function(){try{var i=c&&c.require&&c.require("util").types;return i||h&&h.binding&&h.binding("util")}catch(a){}}();t.exports=n}).call(this,e("./node_modules/_webpack@4.46.0@webpack/buildin/module.js")(E))},"./node_modules/_lodash@4.17.20@lodash/_objectToString.js":function(E,T){var e=Object.prototype,t=e.toString;function l(s){return t.call(s)}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_overArg.js":function(E,T){function e(t,l){return function(s){return t(l(s))}}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_overRest.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_apply.js"),l=Math.max;function s(c,r,h){return r=l(r===void 0?c.length-1:r,0),function(){for(var n=arguments,i=-1,a=l(n.length-r,0),o=Array(a);++i<a;)o[i]=n[r+i];i=-1;for(var u=Array(r+1);++i<r;)u[i]=n[i];return u[r]=h(o),t(c,this,u)}}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_root.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_freeGlobal.js"),l=typeof self=="object"&&self&&self.Object===Object&&self,s=t||l||Function("return this")();E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_safeGet.js":function(E,T){function e(t,l){if(!(l==="constructor"&&typeof t[l]=="function")&&l!="__proto__")return t[l]}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_setCacheAdd.js":function(E,T){var e="__lodash_hash_undefined__";function t(l){return this.__data__.set(l,e),this}E.exports=t},"./node_modules/_lodash@4.17.20@lodash/_setCacheHas.js":function(E,T){function e(t){return this.__data__.has(t)}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_setToArray.js":function(E,T){function e(t){var l=-1,s=Array(t.size);return t.forEach(function(c){s[++l]=c}),s}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_setToString.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseSetToString.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_shortOut.js"),s=l(t);E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_shortOut.js":function(E,T){var e=800,t=16,l=Date.now;function s(c){var r=0,h=0;return function(){var n=l(),i=t-(n-h);if(h=n,i>0){if(++r>=e)return arguments[0]}else r=0;return c.apply(void 0,arguments)}}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_stackClear.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_ListCache.js");function l(){this.__data__=new t,this.size=0}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_stackDelete.js":function(E,T){function e(t){var l=this.__data__,s=l.delete(t);return this.size=l.size,s}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_stackGet.js":function(E,T){function e(t){return this.__data__.get(t)}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_stackHas.js":function(E,T){function e(t){return this.__data__.has(t)}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_stackSet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_ListCache.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_Map.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_MapCache.js"),c=200;function r(h,n){var i=this.__data__;if(i instanceof t){var a=i.__data__;if(!l||a.length<c-1)return a.push([h,n]),this.size=++i.size,this;i=this.__data__=new s(a)}return i.set(h,n),this.size=i.size,this}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/_strictIndexOf.js":function(E,T){function e(t,l,s){for(var c=s-1,r=t.length;++c<r;)if(t[c]===l)return c;return-1}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_stringSize.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_asciiSize.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_hasUnicode.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_unicodeSize.js");function c(r){return l(r)?s(r):t(r)}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_stringToPath.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_memoizeCapped.js"),l=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g,c=t(function(r){var h=[];return r.charCodeAt(0)===46&&h.push(""),r.replace(l,function(n,i,a,o){h.push(a?o.replace(s,"$1"):i||n)}),h});E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_toKey.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isSymbol.js"),l=1/0;function s(c){if(typeof c=="string"||t(c))return c;var r=c+"";return r=="0"&&1/c==-l?"-0":r}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_toSource.js":function(E,T){var e=Function.prototype,t=e.toString;function l(s){if(s!=null){try{return t.call(s)}catch(c){}try{return s+""}catch(c){}}return""}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/_unicodeSize.js":function(E,T){var e="\\ud800-\\udfff",t="\\u0300-\\u036f",l="\\ufe20-\\ufe2f",s="\\u20d0-\\u20ff",c=t+l+s,r="\\ufe0e\\ufe0f",h="["+e+"]",n="["+c+"]",i="\\ud83c[\\udffb-\\udfff]",a="(?:"+n+"|"+i+")",o="[^"+e+"]",u="(?:\\ud83c[\\udde6-\\uddff]){2}",f="[\\ud800-\\udbff][\\udc00-\\udfff]",v="\\u200d",b=a+"?",y="["+r+"]?",g="(?:"+v+"(?:"+[o,u,f].join("|")+")"+y+b+")*",_=y+b+g,M="(?:"+[o+n+"?",n,u,f,h].join("|")+")",x=RegExp(i+"(?="+i+")|"+M+_,"g");function m(S){for(var P=x.lastIndex=0;x.test(S);)++P;return P}E.exports=m},"./node_modules/_lodash@4.17.20@lodash/clone.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseClone.js"),l=4;function s(c){return t(c,l)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/cloneDeep.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseClone.js"),l=1,s=4;function c(r){return t(r,l|s)}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/constant.js":function(E,T){function e(t){return function(){return t}}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/defaults.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseRest.js"),l=e("./node_modules/_lodash@4.17.20@lodash/eq.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_isIterateeCall.js"),c=e("./node_modules/_lodash@4.17.20@lodash/keysIn.js"),r=Object.prototype,h=r.hasOwnProperty,n=t(function(i,a){i=Object(i);var o=-1,u=a.length,f=u>2?a[2]:void 0;for(f&&s(a[0],a[1],f)&&(u=1);++o<u;)for(var v=a[o],b=c(v),y=-1,g=b.length;++y<g;){var _=b[y],M=i[_];(M===void 0||l(M,r[_])&&!h.call(i,_))&&(i[_]=v[_])}return i});E.exports=n},"./node_modules/_lodash@4.17.20@lodash/each.js":function(E,T,e){E.exports=e("./node_modules/_lodash@4.17.20@lodash/forEach.js")},"./node_modules/_lodash@4.17.20@lodash/eq.js":function(E,T){function e(t,l){return t===l||t!==t&&l!==l}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/filter.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayFilter.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_baseFilter.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js"),c=e("./node_modules/_lodash@4.17.20@lodash/isArray.js");function r(h,n){var i=c(h)?t:l;return i(h,s(n,3))}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/find.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_createFind.js"),l=e("./node_modules/_lodash@4.17.20@lodash/findIndex.js"),s=t(l);E.exports=s},"./node_modules/_lodash@4.17.20@lodash/findIndex.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseFindIndex.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js"),s=e("./node_modules/_lodash@4.17.20@lodash/toInteger.js"),c=Math.max;function r(h,n,i){var a=h==null?0:h.length;if(!a)return-1;var o=i==null?0:s(i);return o<0&&(o=c(a+o,0)),t(h,l(n,3),o)}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/flatten.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseFlatten.js");function l(s){var c=s==null?0:s.length;return c?t(s,1):[]}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/forEach.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayEach.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_baseEach.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_castFunction.js"),c=e("./node_modules/_lodash@4.17.20@lodash/isArray.js");function r(h,n){var i=c(h)?t:l;return i(h,s(n))}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/forIn.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseFor.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_castFunction.js"),s=e("./node_modules/_lodash@4.17.20@lodash/keysIn.js");function c(r,h){return r==null?r:t(r,l(h),s)}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/get.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseGet.js");function l(s,c,r){var h=s==null?void 0:t(s,c);return h===void 0?r:h}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/has.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseHas.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_hasPath.js");function s(c,r){return c!=null&&l(c,r,t)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/hasIn.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseHasIn.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_hasPath.js");function s(c,r){return c!=null&&l(c,r,t)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/identity.js":function(E,T){function e(t){return t}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/isArguments.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseIsArguments.js"),l=e("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js"),s=Object.prototype,c=s.hasOwnProperty,r=s.propertyIsEnumerable,h=t(function(){return arguments}())?t:function(n){return l(n)&&c.call(n,"callee")&&!r.call(n,"callee")};E.exports=h},"./node_modules/_lodash@4.17.20@lodash/isArray.js":function(E,T){var e=Array.isArray;E.exports=e},"./node_modules/_lodash@4.17.20@lodash/isArrayLike.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isFunction.js"),l=e("./node_modules/_lodash@4.17.20@lodash/isLength.js");function s(c){return c!=null&&l(c.length)&&!t(c)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/isArrayLikeObject.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isArrayLike.js"),l=e("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js");function s(c){return l(c)&&t(c)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/isBuffer.js":function(E,T,e){(function(t){var l=e("./node_modules/_lodash@4.17.20@lodash/_root.js"),s=e("./node_modules/_lodash@4.17.20@lodash/stubFalse.js"),c=T&&!T.nodeType&&T,r=c&&typeof t=="object"&&t&&!t.nodeType&&t,h=r&&r.exports===c,n=h?l.Buffer:void 0,i=n?n.isBuffer:void 0,a=i||s;t.exports=a}).call(this,e("./node_modules/_webpack@4.46.0@webpack/buildin/module.js")(E))},"./node_modules/_lodash@4.17.20@lodash/isEmpty.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseKeys.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_getTag.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isArguments.js"),c=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),r=e("./node_modules/_lodash@4.17.20@lodash/isArrayLike.js"),h=e("./node_modules/_lodash@4.17.20@lodash/isBuffer.js"),n=e("./node_modules/_lodash@4.17.20@lodash/_isPrototype.js"),i=e("./node_modules/_lodash@4.17.20@lodash/isTypedArray.js"),a="[object Map]",o="[object Set]",u=Object.prototype,f=u.hasOwnProperty;function v(b){if(b==null)return!0;if(r(b)&&(c(b)||typeof b=="string"||typeof b.splice=="function"||h(b)||i(b)||s(b)))return!b.length;var y=l(b);if(y==a||y==o)return!b.size;if(n(b))return!t(b).length;for(var g in b)if(f.call(b,g))return!1;return!0}E.exports=v},"./node_modules/_lodash@4.17.20@lodash/isFunction.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseGetTag.js"),l=e("./node_modules/_lodash@4.17.20@lodash/isObject.js"),s="[object AsyncFunction]",c="[object Function]",r="[object GeneratorFunction]",h="[object Proxy]";function n(i){if(!l(i))return!1;var a=t(i);return a==c||a==r||a==s||a==h}E.exports=n},"./node_modules/_lodash@4.17.20@lodash/isLength.js":function(E,T){var e=9007199254740991;function t(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=e}E.exports=t},"./node_modules/_lodash@4.17.20@lodash/isMap.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseIsMap.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_baseUnary.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_nodeUtil.js"),c=s&&s.isMap,r=c?l(c):t;E.exports=r},"./node_modules/_lodash@4.17.20@lodash/isObject.js":function(E,T){function e(t){var l=typeof t;return t!=null&&(l=="object"||l=="function")}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/isObjectLike.js":function(E,T){function e(t){return t!=null&&typeof t=="object"}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/isPlainObject.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseGetTag.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_getPrototype.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js"),c="[object Object]",r=Function.prototype,h=Object.prototype,n=r.toString,i=h.hasOwnProperty,a=n.call(Object);function o(u){if(!s(u)||t(u)!=c)return!1;var f=l(u);if(f===null)return!0;var v=i.call(f,"constructor")&&f.constructor;return typeof v=="function"&&v instanceof v&&n.call(v)==a}E.exports=o},"./node_modules/_lodash@4.17.20@lodash/isSet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseIsSet.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_baseUnary.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_nodeUtil.js"),c=s&&s.isSet,r=c?l(c):t;E.exports=r},"./node_modules/_lodash@4.17.20@lodash/isString.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseGetTag.js"),l=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js"),c="[object String]";function r(h){return typeof h=="string"||!l(h)&&s(h)&&t(h)==c}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/isSymbol.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseGetTag.js"),l=e("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js"),s="[object Symbol]";function c(r){return typeof r=="symbol"||l(r)&&t(r)==s}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/isTypedArray.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseIsTypedArray.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_baseUnary.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_nodeUtil.js"),c=s&&s.isTypedArray,r=c?l(c):t;E.exports=r},"./node_modules/_lodash@4.17.20@lodash/isUndefined.js":function(E,T){function e(t){return t===void 0}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/keys.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayLikeKeys.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_baseKeys.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isArrayLike.js");function c(r){return s(r)?t(r):l(r)}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/keysIn.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayLikeKeys.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_baseKeysIn.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isArrayLike.js");function c(r){return s(r)?t(r,!0):l(r)}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/last.js":function(E,T){function e(t){var l=t==null?0:t.length;return l?t[l-1]:void 0}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/map.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayMap.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_baseMap.js"),c=e("./node_modules/_lodash@4.17.20@lodash/isArray.js");function r(h,n){var i=c(h)?t:s;return i(h,l(n,3))}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/mapValues.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseAssignValue.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_baseForOwn.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js");function c(r,h){var n={};return h=s(h,3),l(r,function(i,a,o){t(n,a,h(i,a,o))}),n}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/max.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseExtremum.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_baseGt.js"),s=e("./node_modules/_lodash@4.17.20@lodash/identity.js");function c(r){return r&&r.length?t(r,s,l):void 0}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/memoize.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_MapCache.js"),l="Expected a function";function s(c,r){if(typeof c!="function"||r!=null&&typeof r!="function")throw new TypeError(l);var h=function n(){var i=arguments,a=r?r.apply(this,i):i[0],o=n.cache;if(o.has(a))return o.get(a);var u=c.apply(this,i);return n.cache=o.set(a,u)||o,u};return h.cache=new(s.Cache||t),h}s.Cache=t,E.exports=s},"./node_modules/_lodash@4.17.20@lodash/merge.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseMerge.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_createAssigner.js"),s=l(function(c,r,h){t(c,r,h)});E.exports=s},"./node_modules/_lodash@4.17.20@lodash/min.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseExtremum.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_baseLt.js"),s=e("./node_modules/_lodash@4.17.20@lodash/identity.js");function c(r){return r&&r.length?t(r,s,l):void 0}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/minBy.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseExtremum.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_baseLt.js");function c(r,h){return r&&r.length?t(r,l(h,2),s):void 0}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/noop.js":function(E,T){function e(){}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/now.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_root.js"),l=function(){return t.Date.now()};E.exports=l},"./node_modules/_lodash@4.17.20@lodash/pick.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_basePick.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_flatRest.js"),s=l(function(c,r){return c==null?{}:t(c,r)});E.exports=s},"./node_modules/_lodash@4.17.20@lodash/property.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseProperty.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_basePropertyDeep.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_isKey.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_toKey.js");function r(h){return s(h)?t(c(h)):l(h)}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/range.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_createRange.js"),l=t();E.exports=l},"./node_modules/_lodash@4.17.20@lodash/reduce.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayReduce.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_baseEach.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_baseReduce.js"),r=e("./node_modules/_lodash@4.17.20@lodash/isArray.js");function h(n,i,a){var o=r(n)?t:c,u=arguments.length<3;return o(n,s(i,4),a,u,l)}E.exports=h},"./node_modules/_lodash@4.17.20@lodash/size.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseKeys.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_getTag.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isArrayLike.js"),c=e("./node_modules/_lodash@4.17.20@lodash/isString.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_stringSize.js"),h="[object Map]",n="[object Set]";function i(a){if(a==null)return 0;if(s(a))return c(a)?r(a):a.length;var o=l(a);return o==h||o==n?a.size:t(a).length}E.exports=i},"./node_modules/_lodash@4.17.20@lodash/sortBy.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseFlatten.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_baseOrderBy.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_baseRest.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_isIterateeCall.js"),r=s(function(h,n){if(h==null)return[];var i=n.length;return i>1&&c(h,n[0],n[1])?n=[]:i>2&&c(n[0],n[1],n[2])&&(n=[n[0]]),l(h,t(n,1),[])});E.exports=r},"./node_modules/_lodash@4.17.20@lodash/stubArray.js":function(E,T){function e(){return[]}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/stubFalse.js":function(E,T){function e(){return!1}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/toFinite.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/toNumber.js"),l=1/0,s=17976931348623157e292;function c(r){if(!r)return r===0?r:0;if(r=t(r),r===l||r===-l){var h=r<0?-1:1;return h*s}return r===r?r:0}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/toInteger.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/toFinite.js");function l(s){var c=t(s),r=c%1;return c===c?r?c-r:c:0}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/toNumber.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isObject.js"),l=e("./node_modules/_lodash@4.17.20@lodash/isSymbol.js"),s=0/0,c=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,h=/^0b[01]+$/i,n=/^0o[0-7]+$/i,i=parseInt;function a(o){if(typeof o=="number")return o;if(l(o))return s;if(t(o)){var u=typeof o.valueOf=="function"?o.valueOf():o;o=t(u)?u+"":u}if(typeof o!="string")return o===0?o:+o;o=o.replace(c,"");var f=h.test(o);return f||n.test(o)?i(o.slice(2),f?2:8):r.test(o)?s:+o}E.exports=a},"./node_modules/_lodash@4.17.20@lodash/toPlainObject.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_copyObject.js"),l=e("./node_modules/_lodash@4.17.20@lodash/keysIn.js");function s(c){return t(c,l(c))}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/toString.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseToString.js");function l(s){return s==null?"":t(s)}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/transform.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayEach.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_baseCreate.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_baseForOwn.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_getPrototype.js"),h=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),n=e("./node_modules/_lodash@4.17.20@lodash/isBuffer.js"),i=e("./node_modules/_lodash@4.17.20@lodash/isFunction.js"),a=e("./node_modules/_lodash@4.17.20@lodash/isObject.js"),o=e("./node_modules/_lodash@4.17.20@lodash/isTypedArray.js");function u(f,v,b){var y=h(f),g=y||n(f)||o(f);if(v=c(v,4),b==null){var _=f&&f.constructor;g?b=y?new _:[]:a(f)?b=i(_)?l(r(f)):{}:b={}}return(g?t:s)(f,function(M,x,m){return v(b,M,x,m)}),b}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/union.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseFlatten.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_baseRest.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_baseUniq.js"),c=e("./node_modules/_lodash@4.17.20@lodash/isArrayLikeObject.js"),r=l(function(h){return s(t(h,1,c,!0))});E.exports=r},"./node_modules/_lodash@4.17.20@lodash/uniqueId.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/toString.js"),l=0;function s(c){var r=++l;return t(c)+r}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/values.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseValues.js"),l=e("./node_modules/_lodash@4.17.20@lodash/keys.js");function s(c){return c==null?[]:t(c,l(c))}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/zipObject.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_assignValue.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_baseZipObject.js");function s(c,r){return l(c||[],r||[],t)}E.exports=s},"./node_modules/_parse-svg-path@0.1.2@parse-svg-path/index.js":function(E,T){E.exports=l;var e={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},t=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function l(r){var h=[];return r.replace(t,function(n,i,a){var o=i.toLowerCase();for(a=c(a),o=="m"&&a.length>2&&(h.push([i].concat(a.splice(0,2))),o="l",i=i=="m"?"l":"L");;){if(a.length==e[o])return a.unshift(i),h.push(a);if(a.length<e[o])throw new Error("malformed path data");h.push([i].concat(a.splice(0,e[o])))}}),h}var s=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function c(r){var h=r.match(s);return h?h.map(Number):[]}},"./node_modules/_point-at-length@1.1.0@point-at-length/index.js":function(E,T,e){var t=e("./node_modules/_parse-svg-path@0.1.2@parse-svg-path/index.js"),l=e("./node_modules/_isarray@0.0.1@isarray/index.js"),s=e("./node_modules/_abs-svg-path@0.1.1@abs-svg-path/index.js");E.exports=c;function c(i){if(!(this instanceof c))return new c(i);this._path=l(i)?i:t(i),this._path=s(this._path),this._path=n(this._path),this._path=h(this._path)}c.prototype.at=function(i,a){return this._walk(i,a).pos},c.prototype.length=function(){return this._walk(null).length},c.prototype._walk=function(i,a){for(var o=[0,0],u=[0,0,0],f=[0,0],v=0,b=0;b<this._path.length;b++){var y=this._path[b];if(y[0]==="M"){if(o[0]=y[1],o[1]=y[2],i===0)return{length:v,pos:o}}else if(y[0]==="C"){u[0]=f[0]=o[0],u[1]=f[1]=o[1],u[2]=v;for(var g=100,_=0;_<=g;_++){var M=_/g,x=A(y,M),m=O(y,M);if(v+=r(o[0],o[1],x,m),o[0]=x,o[1]=m,typeof i=="number"&&v>=i){var S=(v-i)/(v-u[2]),P=[o[0]*(1-S)+u[0]*S,o[1]*(1-S)+u[1]*S];return{length:v,pos:P}}u[0]=o[0],u[1]=o[1],u[2]=v}}else if(y[0]==="Q"){u[0]=f[0]=o[0],u[1]=f[1]=o[1],u[2]=v;for(var g=100,_=0;_<=g;_++){var M=_/g,x=R(y,M),m=W(y,M);if(v+=r(o[0],o[1],x,m),o[0]=x,o[1]=m,typeof i=="number"&&v>=i){var S=(v-i)/(v-u[2]),P=[o[0]*(1-S)+u[0]*S,o[1]*(1-S)+u[1]*S];return{length:v,pos:P}}u[0]=o[0],u[1]=o[1],u[2]=v}}else if(y[0]==="L"){if(u[0]=o[0],u[1]=o[1],u[2]=v,v+=r(o[0],o[1],y[1],y[2]),o[0]=y[1],o[1]=y[2],typeof i=="number"&&v>=i){var S=(v-i)/(v-u[2]),P=[o[0]*(1-S)+u[0]*S,o[1]*(1-S)+u[1]*S];return{length:v,pos:P}}u[0]=o[0],u[1]=o[1],u[2]=v}}return{length:v,pos:o};function A(F,Z){return Math.pow(1-Z,3)*f[0]+3*Math.pow(1-Z,2)*Z*F[1]+3*(1-Z)*Math.pow(Z,2)*F[3]+Math.pow(Z,3)*F[5]}function O(F,Z){return Math.pow(1-Z,3)*f[1]+3*Math.pow(1-Z,2)*Z*F[2]+3*(1-Z)*Math.pow(Z,2)*F[4]+Math.pow(Z,3)*F[6]}function R(F,Z){return Math.pow(1-Z,2)*f[0]+2*(1-Z)*Z*F[1]+Math.pow(Z,2)*F[3]}function W(F,Z){return Math.pow(1-Z,2)*f[1]+2*(1-Z)*Z*F[2]+Math.pow(Z,2)*F[4]}};function r(i,a,o,u){var f=i-o,v=a-u;return Math.sqrt(f*f+v*v)}function h(i){for(var a,o=0,u=0,f={S:{to:"C",x:3},T:{to:"Q",x:1}},v=0,b=i.length;v<b;v++){var y=i[v],g=f[y[0]];g&&(y[0]=g.to,a&&(a[0]===g.to?(o=2*a[g.x+2]-a[g.x],u=2*a[g.x+3]-a[g.x+1]):(o=a[a.length-2],u=a[a.length-1])),y.splice(1,0,o,u)),a=y}return i}function n(i){for(var a=[],o=["L",0,0],u,f=0,v=i.length;f<v;f++){var b=i[f];switch(b[0]){case"M":o=["L",b[1],b[2]],a.push(b);break;case"Z":a.push(o);break;case"H":u=a[a.length-1]||["L",0,0],a.push(["L",b[1],u[u.length-1]]);break;case"V":u=a[a.length-1]||["L",0,0],a.push(["L",u[u.length-2],b[1]]);break;default:a.push(b)}}return a}},"./node_modules/_regression@2.0.1@regression/dist/regression.js":function(E,T,e){var t,l,s;(function(c,r){if(!0)l=[E],t=r,s=typeof t=="function"?t.apply(T,l):t,s!==void 0&&(E.exports=s);else var h})(this,function(c){"use strict";function r(b,y,g){return y in b?Object.defineProperty(b,y,{value:g,enumerable:!0,configurable:!0,writable:!0}):b[y]=g,b}var h=Object.assign||function(b){for(var y=1;y<arguments.length;y++){var g=arguments[y];for(var _ in g)Object.prototype.hasOwnProperty.call(g,_)&&(b[_]=g[_])}return b};function n(b){if(Array.isArray(b)){for(var y=0,g=Array(b.length);y<b.length;y++)g[y]=b[y];return g}else return Array.from(b)}var i={order:2,precision:2,period:null};function a(b,y){var g=[],_=[];b.forEach(function(P,A){P[1]!==null&&(_.push(P),g.push(y[A]))});var M=_.reduce(function(P,A){return P+A[1]},0),x=M/_.length,m=_.reduce(function(P,A){var O=A[1]-x;return P+O*O},0),S=_.reduce(function(P,A,O){var R=g[O],W=A[1]-R[1];return P+W*W},0);return 1-S/m}function o(b,y){for(var g=b,_=b.length-1,M=[y],x=0;x<_;x++){for(var m=x,S=x+1;S<_;S++)Math.abs(g[x][S])>Math.abs(g[x][m])&&(m=S);for(var P=x;P<_+1;P++){var A=g[P][x];g[P][x]=g[P][m],g[P][m]=A}for(var O=x+1;O<_;O++)for(var R=_;R>=x;R--)g[R][O]-=g[R][x]*g[x][O]/g[x][x]}for(var W=_-1;W>=0;W--){for(var F=0,Z=W+1;Z<_;Z++)F+=g[Z][W]*M[Z];M[W]=(g[_][W]-F)/g[W][W]}return M}function u(b,y){var g=Math.pow(10,y);return Math.round(b*g)/g}var f={linear:function(y,g){for(var _=[0,0,0,0,0],M=0,x=0;x<y.length;x++)y[x][1]!==null&&(M++,_[0]+=y[x][0],_[1]+=y[x][1],_[2]+=y[x][0]*y[x][0],_[3]+=y[x][0]*y[x][1],_[4]+=y[x][1]*y[x][1]);var m=M*_[2]-_[0]*_[0],S=M*_[3]-_[0]*_[1],P=m===0?0:u(S/m,g.precision),A=u(_[1]/M-P*_[0]/M,g.precision),O=function(F){return[u(F,g.precision),u(P*F+A,g.precision)]},R=y.map(function(W){return O(W[0])});return{points:R,predict:O,equation:[P,A],r2:u(a(y,R),g.precision),string:A===0?"y = "+P+"x":"y = "+P+"x + "+A}},exponential:function(y,g){for(var _=[0,0,0,0,0,0],M=0;M<y.length;M++)y[M][1]!==null&&(_[0]+=y[M][0],_[1]+=y[M][1],_[2]+=y[M][0]*y[M][0]*y[M][1],_[3]+=y[M][1]*Math.log(y[M][1]),_[4]+=y[M][0]*y[M][1]*Math.log(y[M][1]),_[5]+=y[M][0]*y[M][1]);var x=_[1]*_[2]-_[5]*_[5],m=Math.exp((_[2]*_[3]-_[5]*_[4])/x),S=(_[1]*_[4]-_[5]*_[3])/x,P=u(m,g.precision),A=u(S,g.precision),O=function(F){return[u(F,g.precision),u(P*Math.exp(A*F),g.precision)]},R=y.map(function(W){return O(W[0])});return{points:R,predict:O,equation:[P,A],string:"y = "+P+"e^("+A+"x)",r2:u(a(y,R),g.precision)}},logarithmic:function(y,g){for(var _=[0,0,0,0],M=y.length,x=0;x<M;x++)y[x][1]!==null&&(_[0]+=Math.log(y[x][0]),_[1]+=y[x][1]*Math.log(y[x][0]),_[2]+=y[x][1],_[3]+=Math.pow(Math.log(y[x][0]),2));var m=(M*_[1]-_[2]*_[0])/(M*_[3]-_[0]*_[0]),S=u(m,g.precision),P=u((_[2]-S*_[0])/M,g.precision),A=function(W){return[u(W,g.precision),u(u(P+S*Math.log(W),g.precision),g.precision)]},O=y.map(function(R){return A(R[0])});return{points:O,predict:A,equation:[P,S],string:"y = "+P+" + "+S+" ln(x)",r2:u(a(y,O),g.precision)}},power:function(y,g){for(var _=[0,0,0,0,0],M=y.length,x=0;x<M;x++)y[x][1]!==null&&(_[0]+=Math.log(y[x][0]),_[1]+=Math.log(y[x][1])*Math.log(y[x][0]),_[2]+=Math.log(y[x][1]),_[3]+=Math.pow(Math.log(y[x][0]),2));var m=(M*_[1]-_[0]*_[2])/(M*_[3]-Math.pow(_[0],2)),S=(_[2]-m*_[0])/M,P=u(Math.exp(S),g.precision),A=u(m,g.precision),O=function(F){return[u(F,g.precision),u(u(P*Math.pow(F,A),g.precision),g.precision)]},R=y.map(function(W){return O(W[0])});return{points:R,predict:O,equation:[P,A],string:"y = "+P+"x^"+A,r2:u(a(y,R),g.precision)}},polynomial:function(y,g){for(var _=[],M=[],x=0,m=0,S=y.length,P=g.order+1,A=0;A<P;A++){for(var O=0;O<S;O++)y[O][1]!==null&&(x+=Math.pow(y[O][0],A)*y[O][1]);_.push(x),x=0;for(var R=[],W=0;W<P;W++){for(var F=0;F<S;F++)y[F][1]!==null&&(m+=Math.pow(y[F][0],A+W));R.push(m),m=0}M.push(R)}M.push(_);for(var Z=o(M,P).map(function(it){return u(it,g.precision)}),V=function(ct){return[u(ct,g.precision),u(Z.reduce(function(ht,ut,It){return ht+ut*Math.pow(ct,It)},0),g.precision)]},k=y.map(function(it){return V(it[0])}),Y="y = ",K=Z.length-1;K>=0;K--)K>1?Y+=Z[K]+"x^"+K+" + ":K===1?Y+=Z[K]+"x + ":Y+=Z[K];return{string:Y,points:k,predict:V,equation:[].concat(n(Z)).reverse(),r2:u(a(y,k),g.precision)}}};function v(){var b=function(g,_){return h({_round:u},g,r({},_,function(M,x){return f[_](M,h({},i,x))}))};return Object.keys(f).reduce(b,{})}c.exports=v()})},"./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js":function(E,T,e){(function(t,l){l(T)})(this,function(t){"use strict";function l(H){if(H.length===0)return 0;for(var nt,at=H[0],q=0,Et=1;Et<H.length;Et++)nt=at+H[Et],Math.abs(at)>=Math.abs(H[Et])?q+=at-nt+H[Et]:q+=H[Et]-nt+at,at=nt;return at+q}function s(H){if(H.length===0)throw new Error("mean requires at least one data point");return l(H)/H.length}function c(H,nt){var at,q,Et=s(H),vt=0;if(nt===2)for(q=0;q<H.length;q++)vt+=(at=H[q]-Et)*at;else for(q=0;q<H.length;q++)vt+=Math.pow(H[q]-Et,nt);return vt}function r(H){if(H.length===0)throw new Error("variance requires at least one data point");return c(H,2)/H.length}function h(H){if(H.length===1)return 0;var nt=r(H);return Math.sqrt(nt)}function n(H){if(H.length===0)throw new Error("mode requires at least one data point");if(H.length===1)return H[0];for(var nt=H[0],at=NaN,q=0,Et=1,vt=1;vt<H.length+1;vt++)H[vt]!==nt?(q<Et&&(q=Et,at=nt),Et=1,nt=H[vt]):Et++;return at}function i(H){return H.slice().sort(function(nt,at){return nt-at})}function a(H){if(H.length===0)throw new Error("min requires at least one data point");for(var nt=H[0],at=1;at<H.length;at++)H[at]<nt&&(nt=H[at]);return nt}function o(H){if(H.length===0)throw new Error("max requires at least one data point");for(var nt=H[0],at=1;at<H.length;at++)H[at]>nt&&(nt=H[at]);return nt}function u(H,nt){var at=H.length*nt;if(H.length===0)throw new Error("quantile requires at least one data point.");if(nt<0||1<nt)throw new Error("quantiles must be between 0 and 1");return nt===1?H[H.length-1]:nt===0?H[0]:at%1!=0?H[Math.ceil(at)-1]:H.length%2==0?(H[at-1]+H[at])/2:H[at]}function f(H,nt,at,q){for(at=at||0,q=q||H.length-1;at<q;){if(600<q-at){var Et=q-at+1,vt=nt-at+1,Ft=Math.log(Et),Qt=.5*Math.exp(2*Ft/3),ee=.5*Math.sqrt(Ft*Qt*(Et-Qt)/Et);vt-Et/2<0&&(ee*=-1),f(H,nt,Math.max(at,Math.floor(nt-vt*Qt/Et+ee)),Math.min(q,Math.floor(nt+(Et-vt)*Qt/Et+ee)))}var Gt=H[nt],$t=at,Pe=q;for(v(H,at,nt),H[q]>Gt&&v(H,at,q);$t<Pe;){for(v(H,$t,Pe),$t++,Pe--;H[$t]<Gt;)$t++;for(;H[Pe]>Gt;)Pe--}H[at]===Gt?v(H,at,Pe):v(H,++Pe,q),Pe<=nt&&(at=Pe+1),nt<=Pe&&(q=Pe-1)}}function v(H,nt,at){var q=H[nt];H[nt]=H[at],H[at]=q}function b(H,nt){var at=H.slice();if(Array.isArray(nt)){(function(vt,Ft){for(var Qt=[0],ee=0;ee<Ft.length;ee++)Qt.push(_(vt.length,Ft[ee]));Qt.push(vt.length-1),Qt.sort(g);for(var Gt=[0,Qt.length-1];Gt.length;){var $t=Math.ceil(Gt.pop()),Pe=Math.floor(Gt.pop());if(!($t-Pe<=1)){var me=Math.floor((Pe+$t)/2);y(vt,Qt[me],Qt[Pe],Qt[$t]),Gt.push(Pe,me,me,$t)}}})(at,nt);for(var q=[],Et=0;Et<nt.length;Et++)q[Et]=u(at,nt[Et]);return q}return y(at,_(at.length,nt),0,at.length-1),u(at,nt)}function y(H,nt,at,q){nt%1==0?f(H,nt,at,q):(f(H,nt=Math.floor(nt),at,q),f(H,nt+1,nt+1,q))}function g(H,nt){return H-nt}function _(H,nt){var at=H*nt;return nt===1?H-1:nt===0?0:at%1!=0?Math.ceil(at)-1:H%2==0?at-.5:at}function M(H,nt){if(nt<H[0])return 0;if(nt>H[H.length-1])return 1;var at=function(vt,Ft){for(var Qt=0,ee=0,Gt=vt.length;ee<Gt;)Ft<=vt[Qt=ee+Gt>>>1]?Gt=Qt:ee=-~Qt;return ee}(H,nt);if(H[at]!==nt)return at/H.length;at++;var q=function(vt,Ft){for(var Qt=0,ee=0,Gt=vt.length;ee<Gt;)Ft>=vt[Qt=ee+Gt>>>1]?ee=-~Qt:Gt=Qt;return ee}(H,nt);if(q===at)return at/H.length;var Et=q-at+1;return Et*(q+at)/2/Et/H.length}function x(H){var nt=b(H,.75),at=b(H,.25);if(typeof nt=="number"&&typeof at=="number")return nt-at}function m(H){return+b(H,.5)}function S(H){for(var nt=m(H),at=[],q=0;q<H.length;q++)at.push(Math.abs(H[q]-nt));return m(at)}function P(H,nt){nt=nt||Math.random;for(var at,q,Et=H.length;0<Et;)q=Math.floor(nt()*Et--),at=H[Et],H[Et]=H[q],H[q]=at;return H}function A(H,nt){return P(H.slice().slice(),nt)}function O(H){for(var nt,at=0,q=0;q<H.length;q++)q!==0&&H[q]===nt||(nt=H[q],at++);return at}function R(H,nt){for(var at=[],q=0;q<H;q++){for(var Et=[],vt=0;vt<nt;vt++)Et.push(0);at.push(Et)}return at}function W(H,nt,at,q){var Et;if(0<H){var vt=(at[nt]-at[H-1])/(nt-H+1);Et=q[nt]-q[H-1]-(nt-H+1)*vt*vt}else Et=q[nt]-at[nt]*at[nt]/(nt+1);return Et<0?0:Et}function F(H,nt,at,q,Et,vt,Ft){if(!(nt<H)){var Qt=Math.floor((H+nt)/2);q[at][Qt]=q[at-1][Qt-1],Et[at][Qt]=Qt;var ee=at;at<H&&(ee=Math.max(ee,Et[at][H-1]||0)),ee=Math.max(ee,Et[at-1][Qt]||0);var Gt,$t,Pe,me=Qt-1;nt<q.length-1&&(me=Math.min(me,Et[at][nt+1]||0));for(var le=me;ee<=le&&!((Gt=W(le,Qt,vt,Ft))+q[at-1][ee-1]>=q[at][Qt]);--le)($t=W(ee,Qt,vt,Ft)+q[at-1][ee-1])<q[at][Qt]&&(q[at][Qt]=$t,Et[at][Qt]=ee),ee++,(Pe=Gt+q[at-1][le-1])<q[at][Qt]&&(q[at][Qt]=Pe,Et[at][Qt]=le);F(H,Qt-1,at,q,Et,vt,Ft),F(Qt+1,nt,at,q,Et,vt,Ft)}}function Z(H,nt){if(H.length!==nt.length)throw new Error("sampleCovariance requires samples with equal lengths");if(H.length<2)throw new Error("sampleCovariance requires at least two data points in each sample");for(var at=s(H),q=s(nt),Et=0,vt=0;vt<H.length;vt++)Et+=(H[vt]-at)*(nt[vt]-q);return Et/(H.length-1)}function V(H){if(H.length<2)throw new Error("sampleVariance requires at least two data points");return c(H,2)/(H.length-1)}function k(H){var nt=V(H);return Math.sqrt(nt)}function Y(H,nt,at,q){return(H*nt+at*q)/(nt+q)}function K(H){if(H.length===0)throw new Error("rootMeanSquare requires at least one data point");for(var nt=0,at=0;at<H.length;at++)nt+=Math.pow(H[at],2);return Math.sqrt(nt/H.length)}function it(){this.totalCount=0,this.data={}}function ct(){this.weights=[],this.bias=0}it.prototype.train=function(H,nt){for(var at in this.data[nt]||(this.data[nt]={}),H){var q=H[at];this.data[nt][at]===void 0&&(this.data[nt][at]={}),this.data[nt][at][q]===void 0&&(this.data[nt][at][q]=0),this.data[nt][at][q]++}this.totalCount++},it.prototype.score=function(H){var nt,at={};for(var q in H){var Et=H[q];for(nt in this.data)at[nt]={},this.data[nt][q]?at[nt][q+"_"+Et]=(this.data[nt][q][Et]||0)/this.totalCount:at[nt][q+"_"+Et]=0}var vt={};for(nt in at)for(var Ft in vt[nt]=0,at[nt])vt[nt]+=at[nt][Ft];return vt},ct.prototype.predict=function(H){if(H.length!==this.weights.length)return null;for(var nt=0,at=0;at<this.weights.length;at++)nt+=this.weights[at]*H[at];return 0<(nt+=this.bias)?1:0},ct.prototype.train=function(H,nt){if(nt!==0&&nt!==1)return null;H.length!==this.weights.length&&(this.weights=H,this.bias=1);var at=this.predict(H);if(at!==nt){for(var q=nt-at,Et=0;Et<this.weights.length;Et++)this.weights[Et]+=q*H[Et];this.bias+=q}return this};var ht=1e-4;function ut(H){if(H<0)throw new Error("factorial requires a non-negative value");if(Math.floor(H)!==H)throw new Error("factorial requires an integer input");for(var nt=1,at=2;at<=H;at++)nt*=at;return nt}var It=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],Nt=Math.log(Math.sqrt(2*Math.PI)),Lt={1:{.995:0,.99:0,.975:0,.95:0,.9:.02,.5:.45,.1:2.71,.05:3.84,.025:5.02,.01:6.63,.005:7.88},2:{.995:.01,.99:.02,.975:.05,.95:.1,.9:.21,.5:1.39,.1:4.61,.05:5.99,.025:7.38,.01:9.21,.005:10.6},3:{.995:.07,.99:.11,.975:.22,.95:.35,.9:.58,.5:2.37,.1:6.25,.05:7.81,.025:9.35,.01:11.34,.005:12.84},4:{.995:.21,.99:.3,.975:.48,.95:.71,.9:1.06,.5:3.36,.1:7.78,.05:9.49,.025:11.14,.01:13.28,.005:14.86},5:{.995:.41,.99:.55,.975:.83,.95:1.15,.9:1.61,.5:4.35,.1:9.24,.05:11.07,.025:12.83,.01:15.09,.005:16.75},6:{.995:.68,.99:.87,.975:1.24,.95:1.64,.9:2.2,.5:5.35,.1:10.65,.05:12.59,.025:14.45,.01:16.81,.005:18.55},7:{.995:.99,.99:1.25,.975:1.69,.95:2.17,.9:2.83,.5:6.35,.1:12.02,.05:14.07,.025:16.01,.01:18.48,.005:20.28},8:{.995:1.34,.99:1.65,.975:2.18,.95:2.73,.9:3.49,.5:7.34,.1:13.36,.05:15.51,.025:17.53,.01:20.09,.005:21.96},9:{.995:1.73,.99:2.09,.975:2.7,.95:3.33,.9:4.17,.5:8.34,.1:14.68,.05:16.92,.025:19.02,.01:21.67,.005:23.59},10:{.995:2.16,.99:2.56,.975:3.25,.95:3.94,.9:4.87,.5:9.34,.1:15.99,.05:18.31,.025:20.48,.01:23.21,.005:25.19},11:{.995:2.6,.99:3.05,.975:3.82,.95:4.57,.9:5.58,.5:10.34,.1:17.28,.05:19.68,.025:21.92,.01:24.72,.005:26.76},12:{.995:3.07,.99:3.57,.975:4.4,.95:5.23,.9:6.3,.5:11.34,.1:18.55,.05:21.03,.025:23.34,.01:26.22,.005:28.3},13:{.995:3.57,.99:4.11,.975:5.01,.95:5.89,.9:7.04,.5:12.34,.1:19.81,.05:22.36,.025:24.74,.01:27.69,.005:29.82},14:{.995:4.07,.99:4.66,.975:5.63,.95:6.57,.9:7.79,.5:13.34,.1:21.06,.05:23.68,.025:26.12,.01:29.14,.005:31.32},15:{.995:4.6,.99:5.23,.975:6.27,.95:7.26,.9:8.55,.5:14.34,.1:22.31,.05:25,.025:27.49,.01:30.58,.005:32.8},16:{.995:5.14,.99:5.81,.975:6.91,.95:7.96,.9:9.31,.5:15.34,.1:23.54,.05:26.3,.025:28.85,.01:32,.005:34.27},17:{.995:5.7,.99:6.41,.975:7.56,.95:8.67,.9:10.09,.5:16.34,.1:24.77,.05:27.59,.025:30.19,.01:33.41,.005:35.72},18:{.995:6.26,.99:7.01,.975:8.23,.95:9.39,.9:10.87,.5:17.34,.1:25.99,.05:28.87,.025:31.53,.01:34.81,.005:37.16},19:{.995:6.84,.99:7.63,.975:8.91,.95:10.12,.9:11.65,.5:18.34,.1:27.2,.05:30.14,.025:32.85,.01:36.19,.005:38.58},20:{.995:7.43,.99:8.26,.975:9.59,.95:10.85,.9:12.44,.5:19.34,.1:28.41,.05:31.41,.025:34.17,.01:37.57,.005:40},21:{.995:8.03,.99:8.9,.975:10.28,.95:11.59,.9:13.24,.5:20.34,.1:29.62,.05:32.67,.025:35.48,.01:38.93,.005:41.4},22:{.995:8.64,.99:9.54,.975:10.98,.95:12.34,.9:14.04,.5:21.34,.1:30.81,.05:33.92,.025:36.78,.01:40.29,.005:42.8},23:{.995:9.26,.99:10.2,.975:11.69,.95:13.09,.9:14.85,.5:22.34,.1:32.01,.05:35.17,.025:38.08,.01:41.64,.005:44.18},24:{.995:9.89,.99:10.86,.975:12.4,.95:13.85,.9:15.66,.5:23.34,.1:33.2,.05:36.42,.025:39.36,.01:42.98,.005:45.56},25:{.995:10.52,.99:11.52,.975:13.12,.95:14.61,.9:16.47,.5:24.34,.1:34.28,.05:37.65,.025:40.65,.01:44.31,.005:46.93},26:{.995:11.16,.99:12.2,.975:13.84,.95:15.38,.9:17.29,.5:25.34,.1:35.56,.05:38.89,.025:41.92,.01:45.64,.005:48.29},27:{.995:11.81,.99:12.88,.975:14.57,.95:16.15,.9:18.11,.5:26.34,.1:36.74,.05:40.11,.025:43.19,.01:46.96,.005:49.65},28:{.995:12.46,.99:13.57,.975:15.31,.95:16.93,.9:18.94,.5:27.34,.1:37.92,.05:41.34,.025:44.46,.01:48.28,.005:50.99},29:{.995:13.12,.99:14.26,.975:16.05,.95:17.71,.9:19.77,.5:28.34,.1:39.09,.05:42.56,.025:45.72,.01:49.59,.005:52.34},30:{.995:13.79,.99:14.95,.975:16.79,.95:18.49,.9:20.6,.5:29.34,.1:40.26,.05:43.77,.025:46.98,.01:50.89,.005:53.67},40:{.995:20.71,.99:22.16,.975:24.43,.95:26.51,.9:29.05,.5:39.34,.1:51.81,.05:55.76,.025:59.34,.01:63.69,.005:66.77},50:{.995:27.99,.99:29.71,.975:32.36,.95:34.76,.9:37.69,.5:49.33,.1:63.17,.05:67.5,.025:71.42,.01:76.15,.005:79.49},60:{.995:35.53,.99:37.48,.975:40.48,.95:43.19,.9:46.46,.5:59.33,.1:74.4,.05:79.08,.025:83.3,.01:88.38,.005:91.95},70:{.995:43.28,.99:45.44,.975:48.76,.95:51.74,.9:55.33,.5:69.33,.1:85.53,.05:90.53,.025:95.02,.01:100.42,.005:104.22},80:{.995:51.17,.99:53.54,.975:57.15,.95:60.39,.9:64.28,.5:79.33,.1:96.58,.05:101.88,.025:106.63,.01:112.33,.005:116.32},90:{.995:59.2,.99:61.75,.975:65.65,.95:69.13,.9:73.29,.5:89.33,.1:107.57,.05:113.14,.025:118.14,.01:124.12,.005:128.3},100:{.995:67.33,.99:70.06,.975:74.22,.95:77.93,.9:82.36,.5:99.33,.1:118.5,.05:124.34,.025:129.56,.01:135.81,.005:140.17}},_t=Math.sqrt(2*Math.PI),mt={gaussian:function(nt){return Math.exp(-.5*nt*nt)/_t}},At={nrd:function(nt){var at=k(nt),q=x(nt);return typeof q=="number"&&(at=Math.min(at,q/1.34)),1.06*at*Math.pow(nt.length,-.2)}};function rt(H,nt,at){var q,Et;if(nt===void 0)q=mt.gaussian;else if(typeof nt=="string"){if(!mt[nt])throw new Error('Unknown kernel "'+nt+'"');q=mt[nt]}else q=nt;if(at===void 0)Et=At.nrd(H);else if(typeof at=="string"){if(!At[at])throw new Error('Unknown bandwidth method "'+at+'"');Et=At[at](H)}else Et=at;return function(vt){var Ft=0,Qt=0;for(Ft=0;Ft<H.length;Ft++)Qt+=q((vt-H[Ft])/Et);return Qt/Et/H.length}}var Mt=Math.sqrt(2*Math.PI);function z(H){for(var nt=H,at=H,q=1;q<15;q++)nt+=at*=H*H/(2*q+1);return Math.round(1e4*(.5+nt/Mt*Math.exp(-H*H/2)))/1e4}for(var $=[],dt=0;dt<=3.09;dt+=.01)$.push(z(dt));function et(H){var nt=1/(1+.5*Math.abs(H)),at=nt*Math.exp(-Math.pow(H,2)-1.26551223+1.00002368*nt+.37409196*Math.pow(nt,2)+.09678418*Math.pow(nt,3)-.18628806*Math.pow(nt,4)+.27886807*Math.pow(nt,5)-1.13520398*Math.pow(nt,6)+1.48851587*Math.pow(nt,7)-.82215223*Math.pow(nt,8)+.17087277*Math.pow(nt,9));return 0<=H?1-at:at-1}function ot(H){var nt=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),at=Math.sqrt(Math.sqrt(Math.pow(2/(Math.PI*nt)+Math.log(1-H*H)/2,2)-Math.log(1-H*H)/nt)-(2/(Math.PI*nt)+Math.log(1-H*H)/2));return 0<=H?at:-at}function pt(H){if(typeof H=="number")return H<0?-1:H===0?0:1;throw new TypeError("not a number")}t.linearRegression=function(H){var nt,at,q=H.length;if(q===1)at=H[nt=0][1];else{for(var Et,vt,Ft,Qt=0,ee=0,Gt=0,$t=0,Pe=0;Pe<q;Pe++)Qt+=vt=(Et=H[Pe])[0],ee+=Ft=Et[1],Gt+=vt*vt,$t+=vt*Ft;at=ee/q-(nt=(q*$t-Qt*ee)/(q*Gt-Qt*Qt))*Qt/q}return{m:nt,b:at}},t.linearRegressionLine=function(H){return function(nt){return H.b+H.m*nt}},t.standardDeviation=h,t.rSquared=function(H,nt){if(H.length<2)return 1;for(var at,q=0,Et=0;Et<H.length;Et++)q+=H[Et][1];at=q/H.length;for(var vt=0,Ft=0;Ft<H.length;Ft++)vt+=Math.pow(at-H[Ft][1],2);for(var Qt=0,ee=0;ee<H.length;ee++)Qt+=Math.pow(H[ee][1]-nt(H[ee][0]),2);return 1-Qt/vt},t.mode=function(H){return n(i(H))},t.modeFast=function(H){for(var nt,at=new Map,q=0,Et=0;Et<H.length;Et++){var vt=at.get(H[Et]);vt===void 0?vt=1:vt++,q<vt&&(nt=H[Et],q=vt),at.set(H[Et],vt)}if(q===0)throw new Error("mode requires at last one data point");return nt},t.modeSorted=n,t.min=a,t.max=o,t.extent=function(H){if(H.length===0)throw new Error("extent requires at least one data point");for(var nt=H[0],at=H[0],q=1;q<H.length;q++)H[q]>at&&(at=H[q]),H[q]<nt&&(nt=H[q]);return[nt,at]},t.minSorted=function(H){return H[0]},t.maxSorted=function(H){return H[H.length-1]},t.extentSorted=function(H){return[H[0],H[H.length-1]]},t.sum=l,t.sumSimple=function(H){for(var nt=0,at=0;at<H.length;at++)nt+=H[at];return nt},t.product=function(H){for(var nt=1,at=0;at<H.length;at++)nt*=H[at];return nt},t.quantile=b,t.quantileSorted=u,t.quantileRank=function(H,nt){return M(i(H),nt)},t.quantileRankSorted=M,t.interquartileRange=x,t.iqr=x,t.medianAbsoluteDeviation=S,t.mad=S,t.chunk=function(H,nt){var at=[];if(nt<1)throw new Error("chunk size must be a positive number");if(Math.floor(nt)!==nt)throw new Error("chunk size must be an integer");for(var q=0;q<H.length;q+=nt)at.push(H.slice(q,q+nt));return at},t.sampleWithReplacement=function(H,nt,at){if(H.length===0)return[];at=at||Math.random;for(var q=H.length,Et=[],vt=0;vt<nt;vt++){var Ft=Math.floor(at()*q);Et.push(H[Ft])}return Et},t.shuffle=A,t.shuffleInPlace=P,t.sample=function(H,nt,at){return A(H,at).slice(0,nt)},t.ckmeans=function(H,nt){if(nt>H.length)throw new Error("cannot generate more classes than there are data values");var at=i(H);if(O(at)===1)return[at];var q=R(nt,at.length),Et=R(nt,at.length);(function(Gt,$t,Pe){for(var me,le=$t[0].length,be=Gt[Math.floor(le/2)],ze=[],Xe=[],_n=0;_n<le;++_n)me=Gt[_n]-be,_n===0?(ze.push(me),Xe.push(me*me)):(ze.push(ze[_n-1]+me),Xe.push(Xe[_n-1]+me*me)),$t[0][_n]=W(0,_n,ze,Xe),Pe[0][_n]=0;for(var Kn=1;Kn<$t.length;++Kn)F(Kn<$t.length-1?Kn:le-1,le-1,Kn,$t,Pe,ze,Xe)})(at,q,Et);for(var vt=[],Ft=Et[0].length-1,Qt=Et.length-1;0<=Qt;Qt--){var ee=Et[Qt][Ft];vt[Qt]=at.slice(ee,Ft+1),0<Qt&&(Ft=ee-1)}return vt},t.uniqueCountSorted=O,t.sumNthPowerDeviations=c,t.equalIntervalBreaks=function(H,nt){if(H.length<2)return H;for(var at=a(H),q=o(H),Et=[at],vt=(q-at)/nt,Ft=1;Ft<nt;Ft++)Et.push(Et[0]+vt*Ft);return Et.push(q),Et},t.sampleCovariance=Z,t.sampleCorrelation=function(H,nt){return Z(H,nt)/k(H)/k(nt)},t.sampleVariance=V,t.sampleStandardDeviation=k,t.sampleSkewness=function(H){if(H.length<3)throw new Error("sampleSkewness requires at least three data points");for(var nt,at=s(H),q=0,Et=0,vt=0;vt<H.length;vt++)q+=(nt=H[vt]-at)*nt,Et+=nt*nt*nt;var Ft=H.length-1,Qt=Math.sqrt(q/Ft),ee=H.length;return ee*Et/((ee-1)*(ee-2)*Math.pow(Qt,3))},t.sampleKurtosis=function(H){var nt=H.length;if(nt<4)throw new Error("sampleKurtosis requires at least four data points");for(var at,q=s(H),Et=0,vt=0,Ft=0;Ft<nt;Ft++)Et+=(at=H[Ft]-q)*at,vt+=at*at*at*at;return(nt-1)/((nt-2)*(nt-3))*(nt*(nt+1)*vt/(Et*Et)-3*(nt-1))},t.permutationsHeap=function(H){for(var nt=new Array(H.length),at=[H.slice()],q=0;q<H.length;q++)nt[q]=0;for(q=0;q<H.length;)if(nt[q]<q){var Et=0;q%2!=0&&(Et=nt[q]);var vt=H[Et];H[Et]=H[q],H[q]=vt,at.push(H.slice()),nt[q]++,q=0}else nt[q]=0,q++;return at},t.combinations=function H(nt,at){var q,Et,vt,Ft,Qt=[];for(q=0;q<nt.length;q++)if(at===1)Qt.push([nt[q]]);else for(vt=H(nt.slice(q+1,nt.length),at-1),Et=0;Et<vt.length;Et++)(Ft=vt[Et]).unshift(nt[q]),Qt.push(Ft);return Qt},t.combinationsReplacement=function H(nt,at){for(var q=[],Et=0;Et<nt.length;Et++)if(at===1)q.push([nt[Et]]);else for(var vt=H(nt.slice(Et,nt.length),at-1),Ft=0;Ft<vt.length;Ft++)q.push([nt[Et]].concat(vt[Ft]));return q},t.addToMean=function(H,nt,at){return H+(at-H)/(nt+1)},t.combineMeans=Y,t.combineVariances=function(H,nt,at,q,Et,vt){var Ft=Y(nt,at,Et,vt);return(at*(H+Math.pow(nt-Ft,2))+vt*(q+Math.pow(Et-Ft,2)))/(at+vt)},t.geometricMean=function(H){if(H.length===0)throw new Error("geometricMean requires at least one data point");for(var nt=1,at=0;at<H.length;at++){if(H[at]<=0)throw new Error("geometricMean requires only positive numbers as input");nt*=H[at]}return Math.pow(nt,1/H.length)},t.harmonicMean=function(H){if(H.length===0)throw new Error("harmonicMean requires at least one data point");for(var nt=0,at=0;at<H.length;at++){if(H[at]<=0)throw new Error("harmonicMean requires only positive numbers as input");nt+=1/H[at]}return H.length/nt},t.average=s,t.mean=s,t.median=m,t.medianSorted=function(H){return u(H,.5)},t.subtractFromMean=function(H,nt,at){return(H*nt-at)/(nt-1)},t.rootMeanSquare=K,t.rms=K,t.variance=r,t.tTest=function(H,nt){return(s(H)-nt)/(h(H)/Math.sqrt(H.length))},t.tTestTwoSample=function(H,nt,at){var q=H.length,Et=nt.length;if(!q||!Et)return null;at||(at=0);var vt=s(H),Ft=s(nt),Qt=V(H),ee=V(nt);if(typeof vt=="number"&&typeof Ft=="number"&&typeof Qt=="number"&&typeof ee=="number"){var Gt=((q-1)*Qt+(Et-1)*ee)/(q+Et-2);return(vt-Ft-at)/Math.sqrt(Gt*(1/q+1/Et))}},t.BayesianClassifier=it,t.bayesian=it,t.PerceptronModel=ct,t.perceptron=ct,t.epsilon=ht,t.factorial=ut,t.gamma=function H(nt){if(typeof(at=nt)=="number"&&isFinite(at)&&Math.floor(at)===at)return nt<=0?NaN:ut(nt-1);var at;if(--nt<0)return Math.PI/(Math.sin(Math.PI*-nt)*H(-nt));var q=nt+.25;return Math.pow(nt/Math.E,nt)*Math.sqrt(2*Math.PI*(nt+1/6))*(1+1/144/Math.pow(q,2)-1/12960/Math.pow(q,3)-257/207360/Math.pow(q,4)-52/2612736/Math.pow(q,5)+5741173/9405849600/Math.pow(q,6)+37529/18811699200/Math.pow(q,7))},t.gammaln=function(H){if(H<=0)return 1/0;H--;for(var nt=It[0],at=1;at<15;at++)nt+=It[at]/(H+at);var q=5.2421875+H;return Nt+Math.log(nt)-q+(H+.5)*Math.log(q)},t.bernoulliDistribution=function(H){if(H<0||1<H)throw new Error("bernoulliDistribution requires probability to be between 0 and 1 inclusive");return[1-H,H]},t.binomialDistribution=function(H,nt){if(!(nt<0||1<nt||H<=0||H%1!=0)){for(var at=0,q=0,Et=[],vt=1;Et[at]=vt*Math.pow(nt,at)*Math.pow(1-nt,H-at),q+=Et[at],vt=vt*(H-++at+1)/at,q<1-ht;);return Et}},t.poissonDistribution=function(H){if(!(H<=0)){for(var nt=0,at=0,q=[],Et=1;q[nt]=Math.exp(-H)*Math.pow(H,nt)/Et,at+=q[nt],Et*=++nt,at<1-ht;);return q}},t.chiSquaredDistributionTable=Lt,t.chiSquaredGoodnessOfFit=function(H,nt,at){for(var q,Et,vt=0,Ft=nt(s(H)),Qt=[],ee=[],Gt=0;Gt<H.length;Gt++)Qt[H[Gt]]===void 0&&(Qt[H[Gt]]=0),Qt[H[Gt]]++;for(Gt=0;Gt<Qt.length;Gt++)Qt[Gt]===void 0&&(Qt[Gt]=0);for(Et in Ft)Et in Qt&&(ee[+Et]=Ft[Et]*H.length);for(Et=ee.length-1;0<=Et;Et--)ee[Et]<3&&(ee[Et-1]+=ee[Et],ee.pop(),Qt[Et-1]+=Qt[Et],Qt.pop());for(Et=0;Et<Qt.length;Et++)vt+=Math.pow(Qt[Et]-ee[Et],2)/ee[Et];return q=Qt.length-1-1,Lt[q][at]<vt},t.kernelDensityEstimation=rt,t.kde=rt,t.zScore=function(H,nt,at){return(H-nt)/at},t.cumulativeStdNormalProbability=function(H){var nt=Math.abs(H),at=Math.min(Math.round(100*nt),$.length-1);return 0<=H?$[at]:+(1-$[at]).toFixed(4)},t.standardNormalTable=$,t.errorFunction=et,t.erf=et,t.inverseErrorFunction=ot,t.probit=function(H){return H===0?H=ht:1<=H&&(H=1-ht),Math.sqrt(2)*ot(2*H-1)},t.permutationTest=function(H,nt,at,q){if(q===void 0&&(q=1e4),at===void 0&&(at="two_side"),at!=="two_side"&&at!=="greater"&&at!=="less")throw new Error("`alternative` must be either 'two_side', 'greater', or 'less'");for(var Et=s(H)-s(nt),vt=new Array(q),Ft=H.concat(nt),Qt=Math.floor(Ft.length/2),ee=0;ee<q;ee++){P(Ft);var Gt=Ft.slice(0,Qt),$t=Ft.slice(Qt,Ft.length),Pe=s(Gt)-s($t);vt[ee]=Pe}var me=0;if(at==="two_side")for(ee=0;ee<=q;ee++)Math.abs(vt[ee])>=Math.abs(Et)&&(me+=1);else if(at==="greater")for(ee=0;ee<=q;ee++)vt[ee]>=Et&&(me+=1);else for(ee=0;ee<=q;ee++)vt[ee]<=Et&&(me+=1);return me/q},t.bisect=function(H,nt,at,q,Et){if(typeof H!="function")throw new TypeError("func must be a function");for(var vt=0;vt<q;vt++){var Ft=(nt+at)/2;if(H(Ft)===0||Math.abs((at-nt)/2)<Et)return Ft;pt(H(Ft))===pt(H(nt))?nt=Ft:at=Ft}throw new Error("maximum number of iterations exceeded")},t.quickselect=f,t.sign=pt,t.numericSort=i,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_topojson-client@3.1.0@topojson-client/dist/topojson-client.js":function(E,T,e){(function(t,l){l(T)})(this,function(t){"use strict";function l(m){return m}function s(m){if(m==null)return l;var S,P,A=m.scale[0],O=m.scale[1],R=m.translate[0],W=m.translate[1];return function(F,Z){Z||(S=P=0);var V=2,k=F.length,Y=new Array(k);for(Y[0]=(S+=F[0])*A+R,Y[1]=(P+=F[1])*O+W;V<k;)Y[V]=F[V],++V;return Y}}function c(m){var S=s(m.transform),P,A=Infinity,O=A,R=-A,W=-A;function F(V){V=S(V),V[0]<A&&(A=V[0]),V[0]>R&&(R=V[0]),V[1]<O&&(O=V[1]),V[1]>W&&(W=V[1])}function Z(V){switch(V.type){case"GeometryCollection":V.geometries.forEach(Z);break;case"Point":F(V.coordinates);break;case"MultiPoint":V.coordinates.forEach(F);break}}m.arcs.forEach(function(V){for(var k=-1,Y=V.length,K;++k<Y;)K=S(V[k],k),K[0]<A&&(A=K[0]),K[0]>R&&(R=K[0]),K[1]<O&&(O=K[1]),K[1]>W&&(W=K[1])});for(P in m.objects)Z(m.objects[P]);return[A,O,R,W]}function r(m,S){for(var P,A=m.length,O=A-S;O<--A;)P=m[O],m[O++]=m[A],m[A]=P}function h(m,S){return typeof S=="string"&&(S=m.objects[S]),S.type==="GeometryCollection"?{type:"FeatureCollection",features:S.geometries.map(function(P){return n(m,P)})}:n(m,S)}function n(m,S){var P=S.id,A=S.bbox,O=S.properties==null?{}:S.properties,R=i(m,S);return P==null&&A==null?{type:"Feature",properties:O,geometry:R}:A==null?{type:"Feature",id:P,properties:O,geometry:R}:{type:"Feature",id:P,bbox:A,properties:O,geometry:R}}function i(m,S){var P=s(m.transform),A=m.arcs;function O(k,Y){Y.length&&Y.pop();for(var K=A[k<0?~k:k],it=0,ct=K.length;it<ct;++it)Y.push(P(K[it],it));k<0&&r(Y,ct)}function R(k){return P(k)}function W(k){for(var Y=[],K=0,it=k.length;K<it;++K)O(k[K],Y);return Y.length<2&&Y.push(Y[0]),Y}function F(k){for(var Y=W(k);Y.length<4;)Y.push(Y[0]);return Y}function Z(k){return k.map(F)}function V(k){var Y=k.type,K;switch(Y){case"GeometryCollection":return{type:Y,geometries:k.geometries.map(V)};case"Point":K=R(k.coordinates);break;case"MultiPoint":K=k.coordinates.map(R);break;case"LineString":K=W(k.arcs);break;case"MultiLineString":K=k.arcs.map(W);break;case"Polygon":K=Z(k.arcs);break;case"MultiPolygon":K=k.arcs.map(Z);break;default:return null}return{type:Y,coordinates:K}}return V(S)}function a(m,S){var P={},A={},O={},R=[],W=-1;S.forEach(function(V,k){var Y=m.arcs[V<0?~V:V],K;Y.length<3&&!Y[1][0]&&!Y[1][1]&&(K=S[++W],S[W]=V,S[k]=K)}),S.forEach(function(V){var k=F(V),Y=k[0],K=k[1],it,ct;if(it=O[Y])if(delete O[it.end],it.push(V),it.end=K,ct=A[K]){delete A[ct.start];var ht=ct===it?it:it.concat(ct);A[ht.start=it.start]=O[ht.end=ct.end]=ht}else A[it.start]=O[it.end]=it;else if(it=A[K])if(delete A[it.start],it.unshift(V),it.start=Y,ct=O[Y]){delete O[ct.end];var ut=ct===it?it:ct.concat(it);A[ut.start=ct.start]=O[ut.end=it.end]=ut}else A[it.start]=O[it.end]=it;else it=[V],A[it.start=Y]=O[it.end=K]=it});function F(V){var k=m.arcs[V<0?~V:V],Y=k[0],K;return m.transform?(K=[0,0],k.forEach(function(it){K[0]+=it[0],K[1]+=it[1]})):K=k[k.length-1],V<0?[K,Y]:[Y,K]}function Z(V,k){for(var Y in V){var K=V[Y];delete k[K.start],delete K.start,delete K.end,K.forEach(function(it){P[it<0?~it:it]=1}),R.push(K)}}return Z(O,A),Z(A,O),S.forEach(function(V){P[V<0?~V:V]||R.push([V])}),R}function o(m){return i(m,u.apply(this,arguments))}function u(m,S,P){var A,O,R;if(arguments.length>1)A=f(m,S,P);else for(O=0,A=new Array(R=m.arcs.length);O<R;++O)A[O]=O;return{type:"MultiLineString",arcs:a(m,A)}}function f(m,S,P){var A=[],O=[],R;function W(Y){var K=Y<0?~Y:Y;(O[K]||(O[K]=[])).push({i:Y,g:R})}function F(Y){Y.forEach(W)}function Z(Y){Y.forEach(F)}function V(Y){Y.forEach(Z)}function k(Y){switch(R=Y,Y.type){case"GeometryCollection":Y.geometries.forEach(k);break;case"LineString":F(Y.arcs);break;case"MultiLineString":case"Polygon":Z(Y.arcs);break;case"MultiPolygon":V(Y.arcs);break}}return k(S),O.forEach(P==null?function(Y){A.push(Y[0].i)}:function(Y){P(Y[0].g,Y[Y.length-1].g)&&A.push(Y[0].i)}),A}function v(m){for(var S=-1,P=m.length,A,O=m[P-1],R=0;++S<P;)A=O,O=m[S],R+=A[0]*O[1]-A[1]*O[0];return Math.abs(R)}function b(m){return i(m,y.apply(this,arguments))}function y(m,S){var P={},A=[],O=[];S.forEach(R);function R(Z){switch(Z.type){case"GeometryCollection":Z.geometries.forEach(R);break;case"Polygon":W(Z.arcs);break;case"MultiPolygon":Z.arcs.forEach(W);break}}function W(Z){Z.forEach(function(V){V.forEach(function(k){(P[k=k<0?~k:k]||(P[k]=[])).push(Z)})}),A.push(Z)}function F(Z){return v(i(m,{type:"Polygon",arcs:[Z]}).coordinates[0])}return A.forEach(function(Z){if(!Z._){var V=[],k=[Z];for(Z._=1,O.push(V);Z=k.pop();)V.push(Z),Z.forEach(function(Y){Y.forEach(function(K){P[K<0?~K:K].forEach(function(it){it._||(it._=1,k.push(it))})})})}}),A.forEach(function(Z){delete Z._}),{type:"MultiPolygon",arcs:O.map(function(Z){var V=[],k;if(Z.forEach(function(ht){ht.forEach(function(ut){ut.forEach(function(It){P[It<0?~It:It].length<2&&V.push(It)})})}),V=a(m,V),(k=V.length)>1)for(var Y=1,K=F(V[0]),it,ct;Y<k;++Y)(it=F(V[Y]))>K&&(ct=V[0],V[0]=V[Y],V[Y]=ct,K=it);return V}).filter(function(Z){return Z.length>0})}}function g(m,S){for(var P=0,A=m.length;P<A;){var O=P+A>>>1;m[O]<S?P=O+1:A=O}return P}function _(m){var S={},P=m.map(function(){return[]});function A(ht,ut){ht.forEach(function(It){It<0&&(It=~It);var Nt=S[It];Nt?Nt.push(ut):S[It]=[ut]})}function O(ht,ut){ht.forEach(function(It){A(It,ut)})}function R(ht,ut){ht.type==="GeometryCollection"?ht.geometries.forEach(function(It){R(It,ut)}):ht.type in W&&W[ht.type](ht.arcs,ut)}var W={LineString:A,MultiLineString:O,Polygon:O,MultiPolygon:function(ut,It){ut.forEach(function(Nt){O(Nt,It)})}};m.forEach(R);for(var F in S)for(var Z=S[F],V=Z.length,k=0;k<V;++k)for(var Y=k+1;Y<V;++Y){var K=Z[k],it=Z[Y],ct;(ct=P[K])[F=g(ct,it)]!==it&&ct.splice(F,0,it),(ct=P[it])[F=g(ct,K)]!==K&&ct.splice(F,0,K)}return P}function M(m){if(m==null)return l;var S,P,A=m.scale[0],O=m.scale[1],R=m.translate[0],W=m.translate[1];return function(F,Z){Z||(S=P=0);var V=2,k=F.length,Y=new Array(k),K=Math.round((F[0]-R)/A),it=Math.round((F[1]-W)/O);for(Y[0]=K-S,S=K,Y[1]=it-P,P=it;V<k;)Y[V]=F[V],++V;return Y}}function x(m,S){if(m.transform)throw new Error("already quantized");if(!S||!S.scale){if(!((W=Math.floor(S))>=2))throw new Error("n must be \u22652");Z=m.bbox||c(m);var P=Z[0],A=Z[1],O=Z[2],R=Z[3],W;S={scale:[O-P?(O-P)/(W-1):1,R-A?(R-A)/(W-1):1],translate:[P,A]}}else Z=m.bbox;var F=M(S),Z,V,k=m.objects,Y={};function K(ht){return F(ht)}function it(ht){var ut;switch(ht.type){case"GeometryCollection":ut={type:"GeometryCollection",geometries:ht.geometries.map(it)};break;case"Point":ut={type:"Point",coordinates:K(ht.coordinates)};break;case"MultiPoint":ut={type:"MultiPoint",coordinates:ht.coordinates.map(K)};break;default:return ht}return ht.id!=null&&(ut.id=ht.id),ht.bbox!=null&&(ut.bbox=ht.bbox),ht.properties!=null&&(ut.properties=ht.properties),ut}function ct(ht){var ut=0,It=1,Nt=ht.length,Lt,_t=new Array(Nt);for(_t[0]=F(ht[0],0);++ut<Nt;)((Lt=F(ht[ut],ut))[0]||Lt[1])&&(_t[It++]=Lt);return It===1&&(_t[It++]=[0,0]),_t.length=It,_t}for(V in k)Y[V]=it(k[V]);return{type:"Topology",bbox:Z,transform:S,objects:Y,arcs:m.arcs.map(ct)}}t.bbox=c,t.feature=h,t.merge=b,t.mergeArcs=y,t.mesh=o,t.meshArcs=u,t.neighbors=_,t.quantize=x,t.transform=s,t.untransform=M,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_tslib@2.1.0@tslib/tslib.js":function(E,T,e){(function(t){var l,s;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var c,r,h,n,i,a,o,u,f,v,b,y,g,_,M,x,m,S,P,A,O,R,W,F;(function(Z){var V=typeof t=="object"?t:typeof self=="object"?self:typeof this=="object"?this:{};l=[T],s=function(Y){Z(k(V,k(Y)))}.apply(T,l),s!==void 0&&(E.exports=s);function k(Y,K){return Y!==V&&(typeof Object.create=="function"?Object.defineProperty(Y,"__esModule",{value:!0}):Y.__esModule=!0),function(it,ct){return Y[it]=K?K(it,ct):ct}}})(function(Z){var V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,K){Y.__proto__=K}||function(Y,K){for(var it in K)Object.prototype.hasOwnProperty.call(K,it)&&(Y[it]=K[it])};c=function(K,it){if(typeof it!="function"&&it!==null)throw new TypeError("Class extends value "+String(it)+" is not a constructor or null");V(K,it);function ct(){this.constructor=K}K.prototype=it===null?Object.create(it):(ct.prototype=it.prototype,new ct)},r=Object.assign||function(Y){for(var K,it=1,ct=arguments.length;it<ct;it++){K=arguments[it];for(var ht in K)Object.prototype.hasOwnProperty.call(K,ht)&&(Y[ht]=K[ht])}return Y},h=function(K,it){var ct={};for(var ht in K)Object.prototype.hasOwnProperty.call(K,ht)&&it.indexOf(ht)<0&&(ct[ht]=K[ht]);if(K!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ut=0,ht=Object.getOwnPropertySymbols(K);ut<ht.length;ut++)it.indexOf(ht[ut])<0&&Object.prototype.propertyIsEnumerable.call(K,ht[ut])&&(ct[ht[ut]]=K[ht[ut]]);return ct},n=function(K,it,ct,ht){var ut=arguments.length,It=ut<3?it:ht===null?ht=Object.getOwnPropertyDescriptor(it,ct):ht,Nt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")It=Reflect.decorate(K,it,ct,ht);else for(var Lt=K.length-1;Lt>=0;Lt--)(Nt=K[Lt])&&(It=(ut<3?Nt(It):ut>3?Nt(it,ct,It):Nt(it,ct))||It);return ut>3&&It&&Object.defineProperty(it,ct,It),It},i=function(K,it){return function(ct,ht){it(ct,ht,K)}},a=function(K,it){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(K,it)},o=function(K,it,ct,ht){function ut(It){return It instanceof ct?It:new ct(function(Nt){Nt(It)})}return new(ct||(ct=Promise))(function(It,Nt){function Lt(At){try{mt(ht.next(At))}catch(rt){Nt(rt)}}function _t(At){try{mt(ht.throw(At))}catch(rt){Nt(rt)}}function mt(At){At.done?It(At.value):ut(At.value).then(Lt,_t)}mt((ht=ht.apply(K,it||[])).next())})},u=function(K,it){var ct={label:0,sent:function(){if(It[0]&1)throw It[1];return It[1]},trys:[],ops:[]},ht,ut,It,Nt;return Nt={next:Lt(0),throw:Lt(1),return:Lt(2)},typeof Symbol=="function"&&(Nt[Symbol.iterator]=function(){return this}),Nt;function Lt(mt){return function(At){return _t([mt,At])}}function _t(mt){if(ht)throw new TypeError("Generator is already executing.");for(;ct;)try{if(ht=1,ut&&(It=mt[0]&2?ut.return:mt[0]?ut.throw||((It=ut.return)&&It.call(ut),0):ut.next)&&!(It=It.call(ut,mt[1])).done)return It;switch(ut=0,It&&(mt=[mt[0]&2,It.value]),mt[0]){case 0:case 1:It=mt;break;case 4:return ct.label++,{value:mt[1],done:!1};case 5:ct.label++,ut=mt[1],mt=[0];continue;case 7:mt=ct.ops.pop(),ct.trys.pop();continue;default:if(It=ct.trys,!(It=It.length>0&&It[It.length-1])&&(mt[0]===6||mt[0]===2)){ct=0;continue}if(mt[0]===3&&(!It||mt[1]>It[0]&&mt[1]<It[3])){ct.label=mt[1];break}if(mt[0]===6&&ct.label<It[1]){ct.label=It[1],It=mt;break}if(It&&ct.label<It[2]){ct.label=It[2],ct.ops.push(mt);break}It[2]&&ct.ops.pop(),ct.trys.pop();continue}mt=it.call(K,ct)}catch(At){mt=[6,At],ut=0}finally{ht=It=0}if(mt[0]&5)throw mt[1];return{value:mt[0]?mt[1]:void 0,done:!0}}},f=function(K,it){for(var ct in K)ct!=="default"&&!Object.prototype.hasOwnProperty.call(it,ct)&&F(it,K,ct)},F=Object.create?function(Y,K,it,ct){ct===void 0&&(ct=it),Object.defineProperty(Y,ct,{enumerable:!0,get:function(){return K[it]}})}:function(Y,K,it,ct){ct===void 0&&(ct=it),Y[ct]=K[it]},v=function(K){var it=typeof Symbol=="function"&&Symbol.iterator,ct=it&&K[it],ht=0;if(ct)return ct.call(K);if(K&&typeof K.length=="number")return{next:function(){return K&&ht>=K.length&&(K=void 0),{value:K&&K[ht++],done:!K}}};throw new TypeError(it?"Object is not iterable.":"Symbol.iterator is not defined.")},b=function(K,it){var ct=typeof Symbol=="function"&&K[Symbol.iterator];if(!ct)return K;var ht=ct.call(K),ut,It=[],Nt;try{for(;(it===void 0||it-- >0)&&!(ut=ht.next()).done;)It.push(ut.value)}catch(Lt){Nt={error:Lt}}finally{try{ut&&!ut.done&&(ct=ht.return)&&ct.call(ht)}finally{if(Nt)throw Nt.error}}return It},y=function(){for(var K=[],it=0;it<arguments.length;it++)K=K.concat(b(arguments[it]));return K},g=function(){for(var K=0,it=0,ct=arguments.length;it<ct;it++)K+=arguments[it].length;for(var ht=Array(K),ut=0,it=0;it<ct;it++)for(var It=arguments[it],Nt=0,Lt=It.length;Nt<Lt;Nt++,ut++)ht[ut]=It[Nt];return ht},_=function(K,it){for(var ct=0,ht=it.length,ut=K.length;ct<ht;ct++,ut++)K[ut]=it[ct];return K},M=function(K){return this instanceof M?(this.v=K,this):new M(K)},x=function(K,it,ct){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ht=ct.apply(K,it||[]),ut,It=[];return ut={},Nt("next"),Nt("throw"),Nt("return"),ut[Symbol.asyncIterator]=function(){return this},ut;function Nt(Mt){ht[Mt]&&(ut[Mt]=function(z){return new Promise(function($,dt){It.push([Mt,z,$,dt])>1||Lt(Mt,z)})})}function Lt(Mt,z){try{_t(ht[Mt](z))}catch($){rt(It[0][3],$)}}function _t(Mt){Mt.value instanceof M?Promise.resolve(Mt.value.v).then(mt,At):rt(It[0][2],Mt)}function mt(Mt){Lt("next",Mt)}function At(Mt){Lt("throw",Mt)}function rt(Mt,z){Mt(z),It.shift(),It.length&&Lt(It[0][0],It[0][1])}},m=function(K){var it,ct;return it={},ht("next"),ht("throw",function(ut){throw ut}),ht("return"),it[Symbol.iterator]=function(){return this},it;function ht(ut,It){it[ut]=K[ut]?function(Nt){return(ct=!ct)?{value:M(K[ut](Nt)),done:ut==="return"}:It?It(Nt):Nt}:It}},S=function(K){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var it=K[Symbol.asyncIterator],ct;return it?it.call(K):(K=typeof v=="function"?v(K):K[Symbol.iterator](),ct={},ht("next"),ht("throw"),ht("return"),ct[Symbol.asyncIterator]=function(){return this},ct);function ht(It){ct[It]=K[It]&&function(Nt){return new Promise(function(Lt,_t){Nt=K[It](Nt),ut(Lt,_t,Nt.done,Nt.value)})}}function ut(It,Nt,Lt,_t){Promise.resolve(_t).then(function(mt){It({value:mt,done:Lt})},Nt)}},P=function(K,it){return Object.defineProperty?Object.defineProperty(K,"raw",{value:it}):K.raw=it,K};var k=Object.create?function(Y,K){Object.defineProperty(Y,"default",{enumerable:!0,value:K})}:function(Y,K){Y.default=K};A=function(K){if(K&&K.__esModule)return K;var it={};if(K!=null)for(var ct in K)ct!=="default"&&Object.prototype.hasOwnProperty.call(K,ct)&&F(it,K,ct);return k(it,K),it},O=function(K){return K&&K.__esModule?K:{default:K}},R=function(K,it){if(!it.has(K))throw new TypeError("attempted to get private field on non-instance");return it.get(K)},W=function(K,it,ct){if(!it.has(K))throw new TypeError("attempted to set private field on non-instance");return it.set(K,ct),ct},Z("__extends",c),Z("__assign",r),Z("__rest",h),Z("__decorate",n),Z("__param",i),Z("__metadata",a),Z("__awaiter",o),Z("__generator",u),Z("__exportStar",f),Z("__createBinding",F),Z("__values",v),Z("__read",b),Z("__spread",y),Z("__spreadArrays",g),Z("__spreadArray",_),Z("__await",M),Z("__asyncGenerator",x),Z("__asyncDelegator",m),Z("__asyncValues",S),Z("__makeTemplateObject",P),Z("__importStar",A),Z("__importDefault",O),Z("__classPrivateFieldGet",R),Z("__classPrivateFieldSet",W)})}).call(this,e("./node_modules/_webpack@4.46.0@webpack/buildin/global.js"))},"./node_modules/_webpack@4.46.0@webpack/buildin/global.js":function(E,T){var e;e=function(){return this}();try{e=e||new Function("return this")()}catch(t){typeof window=="object"&&(e=window)}E.exports=e},"./node_modules/_webpack@4.46.0@webpack/buildin/module.js":function(E,T){E.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},"./node_modules/_wolfy87-eventemitter@5.2.9@wolfy87-eventemitter/EventEmitter.js":function(E,T,e){var t;/*!
* EventEmitter v5.2.9 - git.io/ee
* Unlicense - http://unlicense.org/
* Oliver Caldwell - https://oli.me.uk/
* @preserve
*/(function(l){"use strict";function s(){}var c=s.prototype,r=l.EventEmitter;function h(a,o){for(var u=a.length;u--;)if(a[u].listener===o)return u;return-1}function n(a){return function(){return this[a].apply(this,arguments)}}c.getListeners=function(o){var u=this._getEvents(),f,v;if(o instanceof RegExp){f={};for(v in u)u.hasOwnProperty(v)&&o.test(v)&&(f[v]=u[v])}else f=u[o]||(u[o]=[]);return f},c.flattenListeners=function(o){var u=[],f;for(f=0;f<o.length;f+=1)u.push(o[f].listener);return u},c.getListenersAsObject=function(o){var u=this.getListeners(o),f;return u instanceof Array&&(f={},f[o]=u),f||u};function i(a){return typeof a=="function"||a instanceof RegExp?!0:a&&typeof a=="object"?i(a.listener):!1}c.addListener=function(o,u){if(!i(u))throw new TypeError("listener must be a function");var f=this.getListenersAsObject(o),v=typeof u=="object",b;for(b in f)f.hasOwnProperty(b)&&h(f[b],u)===-1&&f[b].push(v?u:{listener:u,once:!1});return this},c.on=n("addListener"),c.addOnceListener=function(o,u){return this.addListener(o,{listener:u,once:!0})},c.once=n("addOnceListener"),c.defineEvent=function(o){return this.getListeners(o),this},c.defineEvents=function(o){for(var u=0;u<o.length;u+=1)this.defineEvent(o[u]);return this},c.removeListener=function(o,u){var f=this.getListenersAsObject(o),v,b;for(b in f)f.hasOwnProperty(b)&&(v=h(f[b],u),v!==-1&&f[b].splice(v,1));return this},c.off=n("removeListener"),c.addListeners=function(o,u){return this.manipulateListeners(!1,o,u)},c.removeListeners=function(o,u){return this.manipulateListeners(!0,o,u)},c.manipulateListeners=function(o,u,f){var v,b,y=o?this.removeListener:this.addListener,g=o?this.removeListeners:this.addListeners;if(typeof u=="object"&&!(u instanceof RegExp))for(v in u)u.hasOwnProperty(v)&&(b=u[v])&&(typeof b=="function"?y.call(this,v,b):g.call(this,v,b));else for(v=f.length;v--;)y.call(this,u,f[v]);return this},c.removeEvent=function(o){var u=typeof o,f=this._getEvents(),v;if(u==="string")delete f[o];else if(o instanceof RegExp)for(v in f)f.hasOwnProperty(v)&&o.test(v)&&delete f[v];else delete this._events;return this},c.removeAllListeners=n("removeEvent"),c.emitEvent=function(o,u){var f=this.getListenersAsObject(o),v,b,y,g,_;for(g in f)if(f.hasOwnProperty(g))for(v=f[g].slice(0),y=0;y<v.length;y++)b=v[y],b.once===!0&&this.removeListener(o,b.listener),_=b.listener.apply(this,u||[]),_===this._getOnceReturnValue()&&this.removeListener(o,b.listener);return this},c.trigger=n("emitEvent"),c.emit=function(o){var u=Array.prototype.slice.call(arguments,1);return this.emitEvent(o,u)},c.setOnceReturnValue=function(o){return this._onceReturnValue=o,this},c._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},c._getEvents=function(){return this._events||(this._events={})},s.noConflict=function(){return l.EventEmitter=r,s},t=function(){return s}.call(l,e,l,E),t!==void 0&&(E.exports=t)})(typeof window!="undefined"?window:this||{})},"./src/api/geo.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=e("./node_modules/_d3-geo@1.6.4@d3-geo/build/d3-geo.js"),c=e("./node_modules/_d3-geo-projection@2.1.2@d3-geo-projection/build/d3-geo-projection.js"),r=e("./src/view.ts"),h=t.__importDefault(e("./src/util/get-geo-projection.ts")),n={geoArea:function(a){return s.geoArea(a)},geoAreaByName:function(a){return s.geoArea(this.geoFeatureByName(a))},geoCentroid:function(a){return s.geoCentroid(a)},geoCentroidByName:function(a){return s.geoCentroid(this.geoFeatureByName(a))},geoDistance:function(a,o){return s.geoDistance(a,o)},geoLength:function(a){return s.geoLength(a)},geoLengthByName:function(a){return s.geoLength(this.geoFeatureByName(a))},geoContains:function(a,o){return s.geoContains(a,o)},geoFeatureByName:function(a){var o=this.rows,u;return o.some(function(f){return f.name===a?(u=f,!0):!1}),u},geoFeatureByPosition:function(a){var o=this.rows,u;return o.some(function(f){return s.geoContains(f,a)?(u=f,!0):!1}),u},geoNameByPosition:function(a){var o=this.geoFeatureByPosition(a);if(o)return o.name},getGeoProjection:h.default,geoProject:function(a,o,u){return o=h.default(o,u),c.geoProject(a,o)},geoProjectByName:function(a,o,u){return o=h.default(o,u),c.geoProject(this.geoFeatureByName(a),o)},geoProjectPosition:function(a,o,u){var f=h.default(o,u);return f(a)},geoProjectInvert:function(a,o,u){var f=h.default(o,u);return f.invert(a)}};l.assign(r.View.prototype,n)},"./src/api/hierarchy.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),l=e("./src/view.ts");t.assign(l.View.prototype,{getAllNodes:function(){var c=[],r=this.root;return r&&r.each?r.each(function(h){c.push(h)}):r&&r.eachNode&&r.eachNode(function(h){c.push(h)}),c},getAllLinks:function(){for(var c=[],r=[this.root],h;h=r.pop();){var n=h.children;n&&n.forEach(function(i){c.push({source:h,target:i}),r.push(i)})}return c}}),t.assign(l.View.prototype,{getAllEdges:l.View.prototype.getAllLinks})},"./src/api/partition.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importDefault(e("./src/util/partition.ts")),c=e("./src/view.ts");l.assign(c.View.prototype,{partition:function(h,n){return n===void 0&&(n=[]),s.default(this.rows,h,n)},group:function(h,n){n===void 0&&(n=[]);var i=this.partition(h,n);return l.values(i)},groups:function(h,n){return n===void 0&&(n=[]),this.group(h,n)}})},"./src/api/statistics.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=t.__importStar(e("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js")),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),c=e("./src/view.ts"),r=t.__importDefault(e("./src/util/p-by-fraction.ts")),h=t.__importDefault(e("./src/constants.ts")),n=h.default.STATISTICS_METHODS;function i(o,u){var f=o.getColumn(u);return s.isArray(f)&&s.isArray(f[0])&&(f=s.flattenDeep(f)),f}n.forEach(function(o){c.View.prototype[o]=function(u){return l[o](i(this,u))}});var a=l.quantile;s.assign(c.View.prototype,{average:c.View.prototype.mean,quantile:function(u,f){return a(i(this,u),f)},quantiles:function(u,f){var v=i(this,u);return f.map(function(b){return a(v,b)})},quantilesByFraction:function(u,f){return this.quantiles(u,r.default(f))},range:function(u){return[this.min(u),this.max(u)]},extent:function(u){return this.range(u)}})},"./src/connector/default.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),l=e("./src/data-set.ts");l.DataSet.registerConnector("default",function(s,c){var r;if(t.isString(s)?r=c.getView(s):r=s,!r)throw new TypeError("Invalid dataView");return t.deepMix([],r.rows)})},"./src/connector/dsv.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),l=e("./node_modules/_d3-dsv@1.2.0@d3-dsv/dist/d3-dsv.js"),s=e("./src/data-set.ts");s.DataSet.registerConnector("dsv",function(c,r){r===void 0&&(r={});var h=r.delimiter||",";if(!t.isString(h))throw new TypeError("Invalid delimiter: must be a string!");return l.dsvFormat(h).parse(c)}),s.DataSet.registerConnector("csv",function(c){return l.csvParse(c)}),s.DataSet.registerConnector("tsv",function(c){return l.tsvParse(c)})},"./src/connector/geo-graticule.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_d3-geo@1.6.4@d3-geo/build/d3-geo.js"),l=e("./src/data-set.ts");function s(c,r){r.dataType="geo-graticule";var h=t.geoGraticule().lines();return h.map(function(n,i){return n.index=""+i,n}),r.rows=h,h}T.default=s,l.DataSet.registerConnector("geo-graticule",s)},"./src/connector/geojson.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=t.__importDefault(e("./node_modules/_point-at-length@1.1.0@point-at-length/index.js")),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),c=e("./node_modules/_d3-geo@1.6.4@d3-geo/build/d3-geo.js"),r=e("./src/data-set.ts"),h=c.geoPath();function n(i,a,o){o.dataType=r.DataSet.CONSTANTS.GEO;var u=s.deepMix([],i.features);return u.forEach(function(f){f.name=f.properties.name,f.longitude=[],f.latitude=[];var v=f.pathData=h(f),b=l.default(v);b._path.forEach(function(g){f.longitude.push(g[1]),f.latitude.push(g[2])});var y=h.centroid(f);f.centroidX=y[0],f.centroidY=y[1]}),u}r.DataSet.registerConnector("geo",n),r.DataSet.registerConnector("geojson",n),r.DataSet.registerConnector("GeoJSON",n),T.default=n},"./src/connector/graph.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),l=e("./src/data-set.ts"),s={nodes:function(h){return h.nodes},edges:function(h){return h.edges}};function c(r,h,n){h=t.assign({},s,h),n.dataType=l.DataSet.CONSTANTS.GRAPH;var i=h.nodes,a=h.edges;if(i&&!t.isFunction(i))throw new TypeError("Invalid nodes: must be a function!");if(a&&!t.isFunction(a))throw new TypeError("Invalid edges: must be a function!");return n.rows=n.graph={nodes:i(r),edges:a(r)},t.assign(n,n.graph),n.rows}l.DataSet.registerConnector("graph",c),l.DataSet.registerConnector("diagram",c)},"./src/connector/hexjson.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),l=e("./node_modules/_d3-hexjson@1.1.1@d3-hexjson/build/d3-hexjson.js"),s=e("./src/data-set.ts"),c={width:1,height:1};function r(n){return n.cx=n.x,n.cy=n.y,n.x=[],n.y=[],n.vertices.forEach(function(i){n.x.push(i.x+n.cx),n.y.push(i.y+n.cy)}),n}function h(n,i,a){a.dataType=s.DataSet.CONSTANTS.HEX,i=t.assign({},c,i);var o=i.width,u=i.height,f=t.deepMix([],n);a._HexJSON=f;var v=a._GridHexJSON=l.getGridForHexJSON(f),b=a.rows=l.renderHexJSON(f,o,u).map(r);return a._gridRows=l.renderHexJSON(v,o,u).map(r),b}s.DataSet.registerConnector("hex",h),s.DataSet.registerConnector("hexjson",h),s.DataSet.registerConnector("hex-json",h),s.DataSet.registerConnector("HexJSON",h),T.default=h},"./src/connector/hierarchy.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),l=e("./node_modules/_d3-hierarchy@1.1.9@d3-hierarchy/dist/d3-hierarchy.js"),s=e("./src/data-set.ts");function c(r,h,n){n.dataType=s.DataSet.CONSTANTS.HIERARCHY;var i=h&&h.children?h.children:null;if(i&&!t.isFunction(i))throw new TypeError("Invalid children: must be a function!");return h.pureData?n.rows=n.root=r:n.rows=n.root=l.hierarchy(r,i),r}s.DataSet.registerConnector("hierarchy",c),s.DataSet.registerConnector("tree",c)},"./src/connector/topojson.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=e("./node_modules/_topojson-client@3.1.0@topojson-client/dist/topojson-client.js"),c=t.__importDefault(e("./src/connector/geojson.ts")),r=e("./src/data-set.ts");function h(n,i,a){var o=i.object;if(!l.isString(o))throw new TypeError("Invalid object: must be a string!");var u=s.feature(n,n.objects[o]);return c.default(u,void 0,a)}r.DataSet.registerConnector("topojson",h),r.DataSet.registerConnector("TopoJSON",h)},"./src/constants.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default={HIERARCHY:"hierarchy",GEO:"geo",HEX:"hex",GRAPH:"graph",TABLE:"table",GEO_GRATICULE:"geo-graticule",STATISTICS_METHODS:["max","mean","median","min","mode","product","standardDeviation","sum","sumSimple","variance"]}},"./src/data-set.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.DataSet=void 0;var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importDefault(e("./node_modules/_wolfy87-eventemitter@5.2.9@wolfy87-eventemitter/EventEmitter.js")),c=e("./src/view.ts"),r=t.__importDefault(e("./src/constants.ts")),h=function(n){t.__extends(i,n);function i(a){a===void 0&&(a={state:{}});var o=n.call(this)||this;return o.isDataSet=!0,o._onChangeTimer=null,o.views={},o.state={},o.state=a.state,o}return i.registerConnector=function(a,o){i.connectors[a]=o},i.getConnector=function(a){return i.connectors[a]||i.connectors.default},i.registerTransform=function(a,o){i.transforms[a]=o},i.getTransform=function(a){return i.transforms[a]||i.transforms.default},i.prototype._getUniqueViewName=function(){for(var a=l.uniqueId("view_");this.views[a];)a=l.uniqueId("view_");return a},i.prototype.createView=function(a,o){if(l.isNil(a)&&(a=this._getUniqueViewName()),l.isObject(a)&&(o=a,a=this._getUniqueViewName()),this.views[a])throw new Error("data view exists: "+a);var u=new c.View(this,o);return this.views[a]=u,u},i.prototype.getView=function(a){return this.views[a]},i.prototype.setView=function(a,o){this.views[a]=o},i.prototype.setState=function(a,o){var u=this;this.state[a]=o,this._onChangeTimer&&(window.clearTimeout(this._onChangeTimer),this._onChangeTimer=null),this._onChangeTimer=window.setTimeout(function(){u.emit("statechange",a,o)},16)},i.CONSTANTS=r.default,i.connectors={},i.transforms={},i.DataSet=i,i.DataView=c.View,i.View=c.View,i.version="____DATASET_VERSION____",i}(s.default);T.DataSet=h,l.assign(h,r.default),l.assign(h.prototype,{view:h.prototype.createView}),c.View.DataSet=h},"./src/index.ts":function(E,T,e){"use strict";e("./src/api/geo.ts"),e("./src/api/hierarchy.ts"),e("./src/api/partition.ts"),e("./src/api/statistics.ts"),e("./src/connector/default.ts"),e("./src/connector/dsv.ts"),e("./src/connector/geo-graticule.ts"),e("./src/connector/geojson.ts"),e("./src/connector/graph.ts"),e("./src/connector/hexjson.ts"),e("./src/connector/hierarchy.ts"),e("./src/connector/topojson.ts"),e("./src/transform/default.ts"),e("./src/transform/filter.ts"),e("./src/transform/fold.ts"),e("./src/transform/map.ts"),e("./src/transform/partition.ts"),e("./src/transform/percent.ts"),e("./src/transform/pick.ts"),e("./src/transform/proportion.ts"),e("./src/transform/rename.ts"),e("./src/transform/reverse.ts"),e("./src/transform/sort.ts"),e("./src/transform/sort-by.ts"),e("./src/transform/subset.ts"),e("./src/transform/fill-rows.ts"),e("./src/transform/impute.ts"),e("./src/transform/aggregate.ts"),e("./src/transform/regression.ts"),e("./src/transform/kde.ts"),e("./src/transform/bin/hexagon.ts"),e("./src/transform/bin/histogram.ts"),e("./src/transform/bin/quantile.ts"),e("./src/transform/bin/rectangle.ts"),e("./src/transform/geo/centroid.ts"),e("./src/transform/geo/projection.ts"),e("./src/transform/geo/region.ts"),e("./src/transform/diagram/arc.ts"),e("./src/transform/diagram/dagre.ts"),e("./src/transform/diagram/sankey.ts"),e("./src/transform/diagram/voronoi.ts"),e("./src/transform/hierarchy/cluster.ts"),e("./src/transform/hierarchy/compact-box.ts"),e("./src/transform/hierarchy/dendrogram.ts"),e("./src/transform/hierarchy/indented.ts"),e("./src/transform/hierarchy/pack.ts"),e("./src/transform/hierarchy/partition.ts"),e("./src/transform/hierarchy/tree.ts"),e("./src/transform/hierarchy/treemap.ts"),e("./src/transform/tag-cloud.ts"),e("./src/transform/waffle.ts"),e("./src/transform/kernel-smooth/density.ts"),e("./src/transform/kernel-smooth/regression.ts");var t=e("./src/data-set.ts");E.exports=t.DataSet},"./src/transform/aggregate.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importStar(e("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js")),c=t.__importDefault(e("./src/util/partition.ts")),r=e("./src/data-set.ts"),h=r.DataSet.registerTransform,n=e("./src/util/option-parser.ts"),i={as:[],fields:[],groupBy:[],operations:[]},a="count",o={count:function(v){return v.length},distinct:function(v,b){var y=l.uniq(v.map(function(g){return g[b]}));return y.length}};r.DataSet.CONSTANTS.STATISTICS_METHODS.forEach(function(f){o[f]=function(v,b){var y=v.map(function(g){return g[b]});return l.isArray(y)&&l.isArray(y[0])&&(y=l.flattenDeep(y)),s[f](y)}}),o.average=o.mean;function u(f,v){v=l.assign({},i,v);var b=n.getFields(v);if(!l.isArray(b))throw new TypeError("Invalid fields: it must be an array with one or more strings!");var y=v.as||[];l.isString(y)&&(y=[y]);var g=v.operations;l.isString(g)&&(g=[g]);var _=[a];if((!l.isArray(g)||!g.length)&&(console.warn('operations is not defined, will use [ "count" ] directly.'),g=_,y=g),!(g.length===1&&g[0]===a)){if(g.length!==b.length)throw new TypeError("Invalid operations: it's length must be the same as fields!");if(y.length!==b.length)throw new TypeError("Invalid as: it's length must be the same as fields!")}var M=c.default(f.rows,v.groupBy),x=[];l.forIn(M,function(m){var S=m[0];g.forEach(function(P,A){var O=y[A],R=b[A];S[O]=o[P](m,R)}),x.push(S)}),f.rows=x}h("aggregate",u),h("summary",u),T.default={VALID_AGGREGATES:l.keys(o)}},"./src/transform/bin/hexagon.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=e("./src/data-set.ts"),c=e("./src/util/option-parser.ts"),r={as:["x","y","count"],bins:[30,30],offset:[0,0],sizeByCount:!1},h=Math.sqrt(3),n=Math.PI/3,i=[0,n,2*n,3*n,4*n,5*n];function a(v,b,y,g){return Math.sqrt((v-y)*(v-y)+(b-g)*(b-g))}function o(v,b,y){var g=v-y;b=b/2;var _=Math.floor(g/b),M=b*(_+(Math.abs(_%2)===1?1:0)),x=b*(_+(Math.abs(_%2)===1?0:1));return[M+y,x+y]}function u(v,b,y){b===void 0&&(b=[1,1]),y===void 0&&(y=[0,0]);var g={},_=t.__read(b,2),M=_[0],x=_[1],m=t.__read(y,2),S=m[0],P=m[1];return v.forEach(function(A){var O,R,W=t.__read(A,2),F=W[0],Z=W[1],V=t.__read(o(F,M,S),2),k=V[0],Y=V[1],K=t.__read(o(Z,x,P),2),it=K[0],ct=K[1],ht=a(F,Z,k,it),ut=a(F,Z,Y,ct),It,Nt,Lt;ht<ut?(It="x"+k+"y"+it,O=t.__read([k,it],2),Nt=O[0],Lt=O[1]):(It="x"+Y+"y"+ct,R=t.__read([Y,ct],2),Nt=R[0],Lt=R[1]),g[It]=g[It]||{x:Nt,y:Lt,count:0},g[It].count++}),g}function f(v,b){b=l.assign({},r,b);var y=c.getFields(b);if(!l.isArray(y)||y.length!==2)throw new TypeError("Invalid fields: it must be an array with 2 strings!");var g=t.__read(y,2),_=g[0],M=g[1],x=v.range(_),m=v.range(M),S=x[1]-x[0],P=m[1]-m[0],A=b.binWidth||[];if(A.length!==2){var O=t.__read(b.bins,2),R=O[0],W=O[1];if(R<=0||W<=0)throw new TypeError("Invalid bins: must be an array with two positive numbers (e.g. [ 30, 30 ])!");A=[S/R,P/W]}var F=t.__read(b.offset,2),Z=F[0],V=F[1],k=3*A[0]/(h*A[1]),Y=v.rows.map(function(mt){return[mt[_],k*mt[M]]}),K=u(Y,[A[0],k*A[1]],[Z,k*V]),it=t.__read(b.as,3),ct=it[0],ht=it[1],ut=it[2];if(!ct||!ht||!ut)throw new TypeError('Invalid as: it must be an array with three elements (e.g. [ "x", "y", "count" ])!');var It=A[0]/h,Nt=i.map(function(mt){return[Math.sin(mt)*It,-Math.cos(mt)*It]}),Lt=[],_t=0;b.sizeByCount&&l.forIn(K,function(mt){mt.count>_t&&(_t=mt.count)}),l.forIn(K,function(mt){var At=mt.x,rt=mt.y,Mt=mt.count,z={};z[ut]=Mt,b.sizeByCount?(z[ct]=Nt.map(function($){return At+mt.count/_t*$[0]}),z[ht]=Nt.map(function($){return(rt+mt.count/_t*$[1])/k})):(z[ct]=Nt.map(function($){return At+$[0]}),z[ht]=Nt.map(function($){return(rt+$[1])/k})),Lt.push(z)}),v.rows=Lt}s.DataSet.registerTransform("bin.hexagon",f),s.DataSet.registerTransform("bin.hex",f),s.DataSet.registerTransform("hexbin",f)},"./src/transform/bin/histogram.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importDefault(e("./src/util/partition.ts")),c=e("./src/data-set.ts"),r=e("./src/util/option-parser.ts"),h={as:["x","count"],bins:void 0,offset:0,groupBy:[]};function n(o,u,f){var v=o-f,b=Math.floor(v/u);return[b*u+f,(b+1)*u+f]}function i(o){return Math.ceil(Math.log(o)/Math.LN2)+1}function a(o,u){u=l.assign({},h,u);var f=r.getField(u);if(o.rows.length!==0){var v=o.range(f),b=v[1]-v[0],y=u.binWidth,g=u.bins;if(!y&&g){if(g<=0)throw new TypeError("Invalid bins: it must be a positive number!");y=b/g}if(!y&&!g){var _=i(o.rows.length);y=b/_}var M=u.offset%y,x=[],m=u.groupBy,S=s.default(o.rows,m);l.forIn(S,function(P){var A={},O=P.map(function(V){return V[f]});O.forEach(function(V){var k=t.__read(n(V,y,M),2),Y=k[0],K=k[1],it=Y+"-"+K;A[it]=A[it]||{x0:Y,x1:K,count:0},A[it].count++});var R=t.__read(u.as,2),W=R[0],F=R[1];if(!W||!F)throw new TypeError('Invalid as: it must be an array with 2 elements (e.g. [ "x", "count" ])!');var Z=l.pick(P[0],m);l.forIn(A,function(V){var k=l.assign({},Z);k[W]=[V.x0,V.x1],k[F]=V.count,x.push(k)})}),o.rows=x}}c.DataSet.registerTransform("bin.histogram",a),c.DataSet.registerTransform("bin.dot",a)},"./src/transform/bin/quantile.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=e("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js"),c=t.__importDefault(e("./src/util/partition.ts")),r=t.__importDefault(e("./src/util/p-by-fraction.ts")),h=e("./src/data-set.ts"),n=h.DataSet.registerTransform,i=e("./src/util/option-parser.ts"),a={as:"_bin",groupBy:[],fraction:4};function o(u,f){f=l.assign({},a,f);var v=i.getField(f),b=f.as;if(!l.isString(b))throw new TypeError('Invalid as: it must be a string (e.g. "_bin")!');var y=f.p,g=f.fraction;(!l.isArray(y)||y.length===0)&&(y=r.default(g));var _=u.rows,M=f.groupBy,x=c.default(_,M),m=[];l.forIn(x,function(S){var P=S[0],A=S.map(function(R){return R[v]}),O=y.map(function(R){return s.quantile(A,R)});P[b]=O,m.push(P)}),u.rows=m}n("bin.quantile",o)},"./src/transform/bin/rectangle.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=e("./src/data-set.ts"),c=s.DataSet.registerTransform,r=e("./src/util/option-parser.ts"),h={as:["x","y","count"],bins:[30,30],offset:[0,0],sizeByCount:!1};function n(a,o,u){var f=a-u,v=Math.floor(f/o);return[v*o+u,(v+1)*o+u]}function i(a,o){o=l.assign({},h,o);var u=t.__read(r.getFields(o),2),f=u[0],v=u[1];if(!f||!v)throw new TypeError("Invalid fields: must be an array with 2 strings!");var b=a.range(f),y=a.range(v),g=b[1]-b[0],_=y[1]-y[0],M=o.binWidth||[];if(M.length!==2){var x=t.__read(o.bins,2),m=x[0],S=x[1];if(m<=0||S<=0)throw new TypeError("Invalid bins: must be an array with 2 positive numbers (e.g. [ 30, 30 ])!");M=[g/m,_/S]}var P=a.rows.map(function(it){return[it[f],it[v]]}),A={},O=t.__read(o.offset,2),R=O[0],W=O[1];P.forEach(function(it){var ct=t.__read(n(it[0],M[0],R),2),ht=ct[0],ut=ct[1],It=t.__read(n(it[1],M[1],W),2),Nt=It[0],Lt=It[1],_t=ht+"-"+ut+"-"+Nt+"-"+Lt;A[_t]=A[_t]||{x0:ht,x1:ut,y0:Nt,y1:Lt,count:0},A[_t].count++});var F=[],Z=t.__read(o.as,3),V=Z[0],k=Z[1],Y=Z[2];if(!V||!k||!Y)throw new TypeError('Invalid as: it must be an array with 3 strings (e.g. [ "x", "y", "count" ])!');if(!o.sizeByCount)l.forIn(A,function(it){var ct={};ct[V]=[it.x0,it.x1,it.x1,it.x0],ct[k]=[it.y0,it.y0,it.y1,it.y1],ct[Y]=it.count,F.push(ct)});else{var K=0;l.forIn(A,function(it){it.count>K&&(K=it.count)}),l.forIn(A,function(it){var ct=it.x0,ht=it.x1,ut=it.y0,It=it.y1,Nt=it.count,Lt=Nt/K,_t=t.__read([(ct+ht)/2,(ut+It)/2],2),mt=_t[0],At=_t[1],rt=(ht-ct)*Lt/2,Mt=(It-ut)*Lt/2,z=mt-rt,$=mt+rt,dt=At-Mt,et=At+Mt,ot={};ot[V]=[z,$,$,z],ot[k]=[dt,dt,et,et],ot[Y]=Nt,F.push(ot)})}a.rows=F}c("bin.rectangle",i),c("bin.rect",i)},"./src/transform/default.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./src/data-set.ts");t.DataSet.registerTransform("default",function(l){return l})},"./src/transform/diagram/arc.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),l=e("./src/data-set.ts"),s={y:0,thickness:.05,weight:!1,marginRatio:.1,id:function(u){return u.id},source:function(u){return u.source},target:function(u){return u.target},sourceWeight:function(u){return u.value||1},targetWeight:function(u){return u.value||1},sortBy:null};function c(o,u,f){return f===void 0&&(f={}),o.forEach(function(v){var b=u.edgeSource(v),y=u.edgeTarget(v);f[b]||(f[b]={id:b}),f[y]||(f[y]={id:y})}),t.values(f)}function r(o,u,f){t.forIn(o,function(v,b){v.inEdges=u.filter(function(y){return""+f.target(y)==""+b}),v.outEdges=u.filter(function(y){return""+f.source(y)==""+b}),v.edges=v.outEdges.concat(v.inEdges),v.frequency=v.edges.length,v.value=0,v.inEdges.forEach(function(y){v.value+=f.targetWeight(y)}),v.outEdges.forEach(function(y){v.value+=f.sourceWeight(y)})})}function h(o,u){var f={weight:function(y,g){return g.value-y.value},frequency:function(y,g){return g.frequency-y.frequency},id:function(y,g){return(""+u.id(y)).localeCompare(""+u.id(g))}},v=f[u.sortBy];!v&&t.isFunction(u.sortBy)&&(v=u.sortBy),v&&o.sort(v)}function n(o,u){var f=o.length;if(!f)throw new TypeError("Invalid nodes: it's empty!");if(u.weight){var v=u.marginRatio;if(v<0||v>=1)throw new TypeError("Invalid marginRatio: it must be in range [0, 1)!");var b=v/(2*f),y=u.thickness;if(y<=0||y>=1)throw new TypeError("Invalid thickness: it must be in range (0, 1)!");var g=0;o.forEach(function(M){g+=M.value}),o.forEach(function(M){M.weight=M.value/g,M.width=M.weight*(1-v),M.height=y}),o.forEach(function(M,x){for(var m=0,S=x-1;S>=0;S--)m+=o[S].width+2*b;var P=M.minX=b+m,A=M.maxX=M.minX+M.width,O=M.minY=u.y-y/2,R=M.maxY=O+y;M.x=[P,A,A,P],M.y=[O,O,R,R]})}else{var _=1/f;o.forEach(function(M,x){M.x=(x+.5)*_,M.y=u.y})}}function i(o,u,f){if(f.weight){var v={};t.forIn(o,function(b,y){v[y]=b.value}),u.forEach(function(b){var y=f.source(b),g=f.target(b),_=o[y],M=o[g];if(_&&M){var x=v[y],m=f.sourceWeight(b),S=_.minX+(_.value-x)/_.value*_.width,P=S+m/_.value*_.width;v[y]-=m;var A=v[g],O=f.targetWeight(b),R=M.minX+(M.value-A)/M.value*M.width,W=R+O/M.value*M.width;v[g]-=O;var F=f.y;b.x=[S,P,R,W],b.y=[F,F,F,F]}})}else u.forEach(function(b){var y=o[f.source(b)],g=o[f.target(b)];y&&g&&(b.x=[y.x,g.x],b.y=[y.y,g.y])})}function a(o,u){u=t.assign({},s,u);var f={},v=o.nodes,b=o.edges;(!t.isArray(v)||v.length===0)&&(v=c(b,u,f)),v.forEach(function(y){var g=u.id(y);f[g]=y}),r(f,b,u),h(v,u),n(v,u),i(f,b,u),o.nodes=v,o.edges=b}l.DataSet.registerTransform("diagram.arc",a),l.DataSet.registerTransform("arc",a)},"./src/transform/diagram/dagre.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importDefault(e("./node_modules/_dagre@0.8.5@dagre/index.js")),c=e("./src/data-set.ts"),r={rankdir:"TB",align:"TB",nodesep:50,edgesep:10,ranksep:50,source:function(i){return i.source},target:function(i){return i.target}};function h(n,i){i=l.assign({},r,i);var a=new s.default.graphlib.Graph;a.setGraph({}),a.setDefaultEdgeLabel(function(){return{}}),n.nodes.forEach(function(f){var v=i.nodeId?i.nodeId(f):f.id;!f.height&&!f.width&&(f.height=f.width=i.edgesep),a.setNode(v,f)}),n.edges.forEach(function(f){a.setEdge(i.source(f),i.target(f))}),s.default.layout(a);var o=[],u=[];a.nodes().forEach(function(f){var v=a.node(f),b=v.x,y=v.y,g=v.height,_=v.width;v.x=[b-_/2,b+_/2,b+_/2,b-_/2],v.y=[y+g/2,y+g/2,y-g/2,y-g/2],o.push(v)}),a.edges().forEach(function(f){var v=a.edge(f).points,b={};b.x=v.map(function(y){return y.x}),b.y=v.map(function(y){return y.y}),u.push(b)}),n.nodes=o,n.edges=u}c.DataSet.registerTransform("diagram.dagre",h),c.DataSet.registerTransform("dagre",h)},"./src/transform/diagram/sankey.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),l=e("./node_modules/_d3-sankey@0.9.1@d3-sankey/dist/d3-sankey.js"),s=e("./src/data-set.ts"),c={sankeyLeft:l.sankeyLeft,sankeyRight:l.sankeyRight,sankeyCenter:l.sankeyCenter,sankeyJustify:l.sankeyJustify},r={value:function(i){return i.value},source:function(i){return i.source},target:function(i){return i.target},nodeAlign:"sankeyJustify",nodeWidth:.02,nodePadding:.02,sort:void 0};function h(n,i){i=t.assign({},r,i);var a=null;t.isString(i.nodeAlign)?a=c[i.nodeAlign]:t.isFunction(i.nodeAlign)&&(a=i.nodeAlign);var o=l.sankey().nodeSort(i.sort).links(function(u){return u.edges}).nodeWidth(i.nodeWidth).nodePadding(i.nodePadding).extent([[0,0],[1,1]]);t.isFunction(i.nodeId)&&o.nodeId(i.nodeId),a&&o.nodeAlign(a),o(n),n.nodes.forEach(function(u){var f=u.x0,v=u.x1,b=u.y0,y=u.y1;u.x=[f,v,v,f],u.y=[b,b,y,y]}),n.edges.forEach(function(u){var f=u.source,v=u.target,b=f.x1,y=v.x0;u.x=[b,b,y,y];var g=u.width/2;u.y=[u.y0+g,u.y0-g,u.y1+g,u.y1-g]})}s.DataSet.registerTransform("diagram.sankey",h),s.DataSet.registerTransform("sankey",h)},"./src/transform/diagram/voronoi.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=t.__importStar(e("./node_modules/_d3-voronoi@1.1.4@d3-voronoi/dist/d3-voronoi.js")),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),c=e("./src/data-set.ts"),r=c.DataSet.registerTransform,h=e("./src/util/option-parser.ts"),n={as:["_x","_y"]};function i(a,o){o=s.assign({},n,o);var u=o.as;if(!s.isArray(u)||u.length!==2)throw new TypeError("Invalid as: must be an array with two strings!");var f=u[0],v=u[1],b=h.getFields(o);if(!s.isArray(b)||b.length!==2)throw new TypeError("Invalid fields: must be an array with two strings!");var y=b[0],g=b[1],_=a.rows,M=_.map(function(S){return[S[y],S[g]]}),x=l.voronoi();o.extend&&x.extent(o.extend),o.size&&x.size(o.size);var m=x(M).polygons();_.forEach(function(S,P){var A=m[P].filter(function(O){return!!O});S[f]=A.map(function(O){return O[0]}),S[v]=A.map(function(O){return O[1]})})}r("diagram.voronoi",i),r("voronoi",i)},"./src/transform/fill-rows.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importDefault(e("./src/util/partition.ts")),c=e("./src/data-set.ts"),r={fillBy:"group",groupBy:[],orderBy:[]};function h(i,a){var o=i.map(function(u){return u});return a.forEach(function(u){var f=o.indexOf(u);f>-1&&o.splice(f,1)}),o}function n(i,a){a=l.assign({},r,a);var o=i.rows,u=a.groupBy,f=a.orderBy,v=s.default(o,u,f),b=0,y=[];l.forIn(v,function(P){P.length>b&&(b=P.length,y=P)});var g=[],_={};if(y.forEach(function(P){var A=f.map(function(O){return P[O]}).join("-");g.push(A),_[A]=P}),a.fillBy==="order"){var M=y[0],x=[],m={};o.forEach(function(P){var A=f.map(function(O){return P[O]}).join("-");x.indexOf(A)===-1&&(x.push(A),m[A]=P)});var S=h(x,g);S.forEach(function(P){var A={};u.forEach(function(O){A[O]=M[O]}),f.forEach(function(O){A[O]=m[P][O]}),o.push(A),y.push(A),g.push(P),_[P]=A}),b=y.length}l.forIn(v,function(P){if(P!==y&&P.length<b){var A=P[0],O=[];P.forEach(function(W){O.push(f.map(function(F){return W[F]}).join("-"))});var R=h(g,O);R.some(function(W,F){if(F>=b-P.length)return!0;var Z=_[W],V={};return u.forEach(function(k){V[k]=A[k]}),f.forEach(function(k){V[k]=Z[k]}),o.push(V),!1})}})}c.DataSet.registerTransform("fill-rows",n),c.DataSet.registerTransform("fillRows",n)},"./src/transform/filter.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./src/data-set.ts");function l(s){return!!s}t.DataSet.registerTransform("filter",function(s,c){s.rows=s.rows.filter(c.callback||l)})},"./src/transform/fold.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),l=e("./src/data-set.ts"),s=e("./src/util/option-parser.ts"),c={fields:[],key:"key",retains:[],value:"value"};l.DataSet.registerTransform("fold",function(r,h){var n=r.getColumnNames();h=t.assign({},c,h);var i=s.getFields(h);i.length===0&&(console.warn("warning: option fields is not specified, will fold all columns."),i=n);var a=h.key,o=h.value,u=h.retains;(!u||u.length===0)&&(u=t.difference(n,i));var f=[];r.rows.forEach(function(v){i.forEach(function(b){var y=t.pick(v,u);y[a]=b,y[o]=v[b],f.push(y)})}),r.rows=f})},"./src/transform/geo/centroid.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),l=e("./src/data-set.ts"),s=l.DataSet.registerTransform,c=e("./src/util/option-parser.ts"),r={as:["_centroid_x","_centroid_y"]};function h(n,i){i=t.assign({},r,i);var a=c.getField(i),o=i.geoView||i.geoDataView;if(t.isString(o)&&n.dataSet&&(o=n.dataSet.getView(o)),!o||o.dataType!=="geo")throw new TypeError("Invalid geoView: must be a DataView of GEO dataType!");var u=i.as;if(!t.isArray(u)||u.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "cX", "cY" ])!');var f=u[0],v=u[1];n.rows.forEach(function(b){var y=o.geoFeatureByName(b[a]);y&&(o._projectedAs?(b[f]=y[o._projectedAs[2]],b[v]=y[o._projectedAs[3]]):(b[f]=y.centroidX,b[v]=y.centroidY))})}s("geo.centroid",h)},"./src/transform/geo/projection.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=e("./node_modules/_d3-geo@1.6.4@d3-geo/build/d3-geo.js"),c=t.__importDefault(e("./node_modules/_point-at-length@1.1.0@point-at-length/index.js")),r=e("./src/data-set.ts"),h=r.DataSet.registerTransform,n=t.__importDefault(e("./src/util/get-geo-projection.ts")),i={as:["_x","_y","_centroid_x","_centroid_y"]};function a(o,u){if(o.dataType!=="geo"&&o.dataType!=="geo-graticule")throw new TypeError("Invalid dataView: this transform is for Geo data only!");u=l.assign({},i,u);var f=u.projection;if(!f)throw new TypeError("Invalid projection!");f=n.default(f);var v=s.geoPath(f),b=u.as;if(!l.isArray(b)||b.length!==4)throw new TypeError('Invalid as: it must be an array with 4 strings (e.g. [ "x", "y", "cX", "cY" ])!');o._projectedAs=b;var y=t.__read(b,4),g=y[0],_=y[1],M=y[2],x=y[3];o.rows.forEach(function(m){m[g]=[],m[_]=[];var S=v(m);if(S){var P=c.default(S);P._path.forEach(function(O){m[g].push(O[1]),m[_].push(O[2])});var A=v.centroid(m);m[M]=A[0],m[x]=A[1]}}),o.rows=o.rows.filter(function(m){return m[g].length!==0})}h("geo.projection",a)},"./src/transform/geo/region.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),l=e("./src/data-set.ts"),s=l.DataSet.registerTransform,c=e("./src/util/option-parser.ts"),r={as:["_x","_y"]};function h(n,i){i=t.assign({},r,i);var a=c.getField(i),o=i.geoView||i.geoDataView;if(t.isString(o)&&(o=n.dataSet.getView(o)),!o||o.dataType!=="geo")throw new TypeError("Invalid geoView: must be a DataView of GEO dataType!");var u=i.as;if(!t.isArray(u)||u.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var f=u[0],v=u[1];n.rows.forEach(function(b){var y=o.geoFeatureByName(b[a]);y&&(o._projectedAs?(b[f]=y[o._projectedAs[0]],b[v]=y[o._projectedAs[1]]):(b[f]=y.longitude,b[v]=y.latitude))})}s("geo.region",h)},"./src/transform/hierarchy/cluster.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=t.__importStar(e("./node_modules/_d3-hierarchy@1.1.9@d3-hierarchy/dist/d3-hierarchy.js")),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),c=e("./src/data-set.ts"),r=e("./src/util/option-parser.ts"),h={field:"value",size:[1,1],nodeSize:null,separation:null,as:["x","y"]};function n(i,a){if(i.dataType!==c.DataSet.CONSTANTS.HIERARCHY||!i.root)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");var o=i.root;a=s.assign({},h,a);var u=a.as;if(!s.isArray(u)||u.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var f=void 0;try{f=r.getField(a)}catch(g){console.warn(g)}f&&o.sum(function(g){return g[f]});var v=l.cluster();v.size(a.size),a.nodeSize&&v.nodeSize(a.nodeSize),a.separation&&v.separation(a.separation),v(o);var b=u[0],y=u[1];o.each(function(g){g[b]=g.x,g[y]=g.y})}c.DataSet.registerTransform("hierarchy.cluster",n),c.DataSet.registerTransform("dendrogram",n)},"./src/transform/hierarchy/compact-box.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=t.__importDefault(e("./node_modules/_@antv_hierarchy@0.6.6@@antv/hierarchy/build/hierarchy.js")),s=e("./src/data-set.ts"),c={};function r(h,n){var i=h.root;if(n=Object.assign({},c,n),h.dataType!==s.DataSet.CONSTANTS.HIERARCHY)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");h.root=l.default.compactBox(i,n)}s.DataSet.registerTransform("hierarchy.compact-box",r),s.DataSet.registerTransform("compact-box-tree",r),s.DataSet.registerTransform("non-layered-tidy-tree",r),s.DataSet.registerTransform("mindmap-logical",r)},"./src/transform/hierarchy/dendrogram.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=t.__importDefault(e("./node_modules/_@antv_hierarchy@0.6.6@@antv/hierarchy/build/hierarchy.js")),s=e("./src/data-set.ts"),c={};function r(h,n){var i=h.root;if(n=Object.assign({},c,n),h.dataType!==s.DataSet.CONSTANTS.HIERARCHY)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");h.root=l.default.dendrogram(i,n)}s.DataSet.registerTransform("hierarchy.dendrogram",r),s.DataSet.registerTransform("dendrogram",r)},"./src/transform/hierarchy/indented.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=t.__importDefault(e("./node_modules/_@antv_hierarchy@0.6.6@@antv/hierarchy/build/hierarchy.js")),s=e("./src/data-set.ts"),c={};function r(h,n){var i=h.root;if(n=Object.assign({},c,n),h.dataType!==s.DataSet.CONSTANTS.HIERARCHY)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");h.root=l.default.indented(i,n)}s.DataSet.registerTransform("hierarchy.indented",r),s.DataSet.registerTransform("indented-tree",r)},"./src/transform/hierarchy/pack.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importStar(e("./node_modules/_d3-hierarchy@1.1.9@d3-hierarchy/dist/d3-hierarchy.js")),c=e("./src/data-set.ts"),r=e("./src/util/option-parser.ts"),h={field:"value",size:[1,1],padding:0,as:["x","y","r"]};function n(i,a){if(i.dataType!==c.DataSet.CONSTANTS.HIERARCHY)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");var o=i.root;a=l.assign({},h,a);var u=a.as;if(!l.isArray(u)||u.length!==3)throw new TypeError('Invalid as: it must be an array with 3 strings (e.g. [ "x", "y", "r" ])!');var f;try{f=r.getField(a)}catch(_){console.warn(_)}f&&o.sum(function(_){return _[f]}).sort(function(_,M){return M[f]-_[f]});var v=s.pack();v.size(a.size),a.padding&&v.padding(a.padding),v(o);var b=u[0],y=u[1],g=u[2];o.each(function(_){_[b]=_.x,_[y]=_.y,_[g]=_.r})}c.DataSet.registerTransform("hierarchy.pack",n),c.DataSet.registerTransform("hierarchy.circle-packing",n),c.DataSet.registerTransform("circle-packing",n)},"./src/transform/hierarchy/partition.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=t.__importStar(e("./node_modules/_d3-hierarchy@1.1.9@d3-hierarchy/dist/d3-hierarchy.js")),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),c=e("./src/data-set.ts"),r=e("./src/util/option-parser.ts"),h={field:"value",size:[1,1],round:!1,padding:0,sort:!0,as:["x","y"]};function n(i,a){if(i.dataType!==c.DataSet.CONSTANTS.HIERARCHY)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");var o=i.root;a=s.assign({},h,a);var u=a.as;if(!s.isArray(u)||u.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var f;try{f=r.getField(a)}catch(g){console.warn(g)}f&&o.sum(function(g){return g[f]});var v=l.partition();v.size(a.size).round(a.round).padding(a.padding),v(o);var b=u[0],y=u[1];o.each(function(g){g[b]=[g.x0,g.x1,g.x1,g.x0],g[y]=[g.y1,g.y1,g.y0,g.y0],["x0","x1","y0","y1"].forEach(function(_){u.indexOf(_)===-1&&delete g[_]})})}c.DataSet.registerTransform("hierarchy.partition",n),c.DataSet.registerTransform("adjacency",n)},"./src/transform/hierarchy/tree.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=t.__importStar(e("./node_modules/_d3-hierarchy@1.1.9@d3-hierarchy/dist/d3-hierarchy.js")),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),c=e("./src/data-set.ts"),r=e("./src/util/option-parser.ts"),h={field:"value",size:[1,1],nodeSize:null,separation:null,as:["x","y"]};function n(i,a){if(i.dataType!==c.DataSet.CONSTANTS.HIERARCHY)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");var o=i.root;a=s.assign({},h,a);var u=a.as;if(!s.isArray(u)||u.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var f;try{f=r.getField(a)}catch(g){console.warn(g)}f&&o.sum(function(g){return g[f]});var v=l.tree();v.size(a.size),a.nodeSize&&v.nodeSize(a.nodeSize),a.separation&&v.separation(a.separation),v(o);var b=u[0],y=u[1];o.each(function(g){g[b]=g.x,g[y]=g.y})}c.DataSet.registerTransform("hierarchy.tree",n),c.DataSet.registerTransform("tree",n)},"./src/transform/hierarchy/treemap.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=t.__importStar(e("./node_modules/_d3-hierarchy@1.1.9@d3-hierarchy/dist/d3-hierarchy.js")),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),c=e("./src/data-set.ts"),r=e("./src/util/option-parser.ts"),h={field:"value",tile:"treemapSquarify",size:[1,1],round:!1,padding:0,paddingInner:0,paddingOuter:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,as:["x","y"]};function n(i,a){if(i.dataType!==c.DataSet.CONSTANTS.HIERARCHY)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");var o=i.root;a=s.assign({},h,a);var u=a.as;if(!s.isArray(u)||u.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var f;try{f=r.getField(a)}catch(g){console.warn(g)}f&&o.sum(function(g){return g[f]});var v=l.treemap();v.tile(l[a.tile]).size(a.size).round(a.round).padding(a.padding).paddingInner(a.paddingInner).paddingOuter(a.paddingOuter).paddingTop(a.paddingTop).paddingRight(a.paddingRight).paddingBottom(a.paddingBottom).paddingLeft(a.paddingLeft),v(o);var b=u[0],y=u[1];o.each(function(g){g[b]=[g.x0,g.x1,g.x1,g.x0],g[y]=[g.y1,g.y1,g.y0,g.y0],["x0","x1","y0","y1"].forEach(function(_){u.indexOf(_)===-1&&delete g[_]})})}c.DataSet.registerTransform("hierarchy.treemap",n),c.DataSet.registerTransform("treemap",n)},"./src/transform/impute.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importStar(e("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js")),c=t.__importDefault(e("./src/util/partition.ts")),r=e("./src/data-set.ts"),h=e("./src/util/option-parser.ts"),n={groupBy:[]};function i(f){return f.filter(function(v){return!l.isUndefined(v)})}var a=["mean","median","max","min"],o={};a.forEach(function(f){o[f]=function(v,b){return s[f](b)}}),o.value=function(f,v,b){return b};function u(f,v){v=l.assign({},n,v);var b=h.getField(v),y=v.method;if(!y)throw new TypeError("Invalid method!");if(y==="value"&&!l.has(v,"value"))throw new TypeError("Invalid value: it is nil.");var g=i(f.getColumn(b)),_=c.default(f.rows,v.groupBy);l.forIn(_,function(M){var x=i(M.map(function(m){return m[b]}));x.length===0&&(x=g),M.forEach(function(m){if(l.isUndefined(m[b]))if(l.isFunction(y))m[b]=y(m,x,v.value,M);else if(l.isString(y))m[b]=o[y](m,x,v.value);else throw new TypeError("Invalid method: must be a function or one of "+a.join(", "))})})}r.DataSet.registerTransform("impute",u)},"./src/transform/kde.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importDefault(e("./src/util/get-series-values.ts")),c=t.__importDefault(e("./src/util/kernel.ts")),r=t.__importStar(e("./src/util/bandwidth.ts")),h=t.__importDefault(e("./src/util/partition.ts")),n=e("./src/data-set.ts"),i=e("./src/util/option-parser.ts"),a=e("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js"),o={minSize:.01,as:["key","y","size"],extent:[],method:"gaussian",bandwidth:"nrd",step:0,groupBy:[]},u=l.keys(c.default),f=l.keys(r);function v(b,y){y=l.assign({},o,y);var g=i.getFields(y);if(!l.isArray(g)||g.length<1)throw new TypeError("invalid fields: must be an array of at least 1 strings!");var _=y.as;if(!l.isArray(_)||_.length!==3)throw new TypeError("invalid as: must be an array of 3 strings!");var M=y.method;if(l.isString(M)){if(u.indexOf(M)===-1)throw new TypeError("invalid method: "+M+". Must be one of "+u.join(", "));M=c.default[M]}if(!l.isFunction(M))throw new TypeError("invalid method: kernel method must be a function!");var x=y.extent;if(!l.isArray(x)||x.length===0){var m=[];l.each(g,function(W){var F=b.range(W);m=m.concat(F)}),x=[Math.min.apply(Math,t.__spread(m)),Math.max.apply(Math,t.__spread(m))]}var S=y.bandwidth;l.isString(S)&&r[S]?S=r[S](b.getColumn(g[0])):l.isFunction(S)?S=S(b.getColumn(g[0])):(!l.isNumber(S)||S<=0)&&(S=r.nrd(b.getColumn(g[0])));var P=s.default(x,y.step?y.step:S),A=[],O=y.groupBy,R=h.default(b.rows,O);l.forIn(R,function(W){var F={};l.each(g,function(Z){var V=l.pick(W[0],O);F[Z]=a.kernelDensityEstimation(W.map(function(ct){return ct[Z]}),M,S);var k=t.__read(_,3),Y=k[0],K=k[1],it=k[2];V[Y]=Z,V[K]=[],V[it]=[],l.each(P,function(ct){var ht=F[Z](ct);ht>=y.minSize&&(V[K].push(ct),V[it].push(ht))}),A.push(V)})}),b.rows=A}n.DataSet.registerTransform("kernel-density-estimation",v),n.DataSet.registerTransform("kde",v),n.DataSet.registerTransform("KDE",v),T.default={KERNEL_METHODS:u,BANDWIDTH_METHODS:f}},"./src/transform/kernel-smooth/density.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importDefault(e("./src/util/get-series-values.ts")),c=t.__importDefault(e("./src/util/kernel.ts")),r=e("./src/data-set.ts"),h=e("./src/util/option-parser.ts"),n=e("./src/util/bandwidth.ts"),i={as:["x","y","z"],method:"gaussian"},a=l.keys(c.default);function o(u,f){var v,b;f=l.assign({},i,f);var y=h.getFields(f);if(!l.isArray(y)||y.length!==2)throw new TypeError("invalid fields: must be an array of 2 strings!");var g=t.__read(f.as,3),_=g[0],M=g[1],x=g[2];if(!l.isString(_)||!l.isString(M)||!l.isString(x))throw new TypeError("invalid as: must be an array of 3 strings!");var m;if(l.isString(f.method)){if(a.indexOf(f.method)===-1)throw new TypeError("invalid method: "+f.method+". Must be one of "+a.join(", "));m=c.default[f.method]}var S=t.__read(y,2),P=S[0],A=S[1],O=f.extent,R=f.bandwidth,W,F;O&&Array.isArray(O)&&Array.isArray(O[0])&&Array.isArray(O[1])?(v=t.__read(O,2),W=v[0],F=v[1]):(W=u.range(P),F=u.range(A));var Z,V;R&&Array.isArray(R)&&R.slice(0,2).every(l.isNumber)&&R.slice(0,2).every(function(At){return At>0})?(b=t.__read(R,2),Z=b[0],V=b[1]):(Z=n.silverman(u.getColumn(P)),V=n.silverman(u.getColumn(A)));for(var k=s.default(W,Z),Y=s.default(F,V),K=u.rows.length,it=[],ct=0;ct<k.length;ct++)for(var ht=0;ht<Y.length;ht++){for(var ut=0,It=k[ct],Nt=Y[ht],Lt=0;Lt<K;Lt++)ut+=m((It-u.rows[Lt][P])/Z)*m((Nt-u.rows[Lt][A])/V);var _t=1/(K*Z*V)*ut,mt={};mt[_]=It,mt[M]=Nt,mt[x]=_t,it.push(mt)}u.rows=it}r.DataSet.registerTransform("kernel-smooth.density",o),r.DataSet.registerTransform("kernel.density",o),T.default={KERNEL_METHODS:a}},"./src/transform/kernel-smooth/regression.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importDefault(e("./src/util/get-series-values.ts")),c=t.__importDefault(e("./src/util/kernel.ts")),r=e("./src/data-set.ts"),h=e("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js"),n=e("./src/util/option-parser.ts"),i=e("./src/util/bandwidth.ts"),a={as:["x","y"],method:"gaussian"},o=l.keys(c.default);function u(b,y,g,_){var M=(_-g)/y;return b(M)}function f(b){return function(y){return l.isArray(y)?y.map(function(g){return b(g)}):b(y)}}function v(b,y){y=l.assign({},a,y);var g=n.getFields(y);if(!l.isArray(g)||!(g.length===1||g.length===2))throw new TypeError("invalid fields: must be an array of 1 or 2 strings!");var _=t.__read(y.as,2),M=_[0],x=_[1];if(!l.isString(M)||!l.isString(x))throw new TypeError("invalid as: must be an array of 2 strings!");var m,S=y.method;if(l.isString(S)){if(o.indexOf(S)===-1)throw new TypeError("invalid method: "+S+". Must be one of "+o.join(", "));m=c.default[S]}var P=t.__read(g,2),A=P[0],O=P[1],R=b.getColumn(A),W=y.extent;(W||!l.isArray(W))&&(W=b.range(A));var F=y.bandwidth;(!F||!l.isNumber(F)||F<=0)&&(F=i.silverman(R));var Z=s.default(W,F),V=R.length,k=u.bind(null,m,F),Y;if(l.isNil(O))Y=f(function(ct){var ht=R.map(function(Nt){return k(ct,Nt)}),ut=h.sum(ht),It=V*F;return!ut||!It?0:ut/It});else{var K=b.getColumn(O);Y=f(function(ct){var ht=R.map(function(Nt){return k(ct,Nt)}),ut=h.sum(ht.map(function(Nt,Lt){return Nt*K[Lt]})),It=h.sum(ht);return!ut||!It?0:ut/It})}var it=Z.map(function(ct){var ht={};return ht[M]=ct,ht[x]=Y(ct),ht});b.rows=it}r.DataSet.registerTransform("kernel-smooth.regression",v),r.DataSet.registerTransform("kernel.regression",v),T.default={KERNEL_METHODS:o}},"./src/transform/map.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./src/data-set.ts");function l(s){return s}t.DataSet.registerTransform("map",function(s,c){s.rows=s.rows.map(c.callback||l)})},"./src/transform/partition.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importDefault(e("./src/util/partition.ts")),c=e("./src/data-set.ts"),r={groupBy:[],orderBy:[]};c.DataSet.registerTransform("partition",function(n,i){i=l.assign({},r,i),n.rows=s.default(n.rows,i.groupBy,i.orderBy)});function h(n,i){i=l.assign({},r,i),n.rows=l.values(s.default(n.rows,i.groupBy,i.orderBy))}c.DataSet.registerTransform("group",h),c.DataSet.registerTransform("groups",h)},"./src/transform/percent.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=e("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js"),c=t.__importDefault(e("./src/util/partition.ts")),r=e("./src/data-set.ts"),h=e("./src/util/option-parser.ts"),n={groupBy:[],as:"_percent"};function i(a,o){o=l.assign({},n,o);var u=h.getField(o),f=o.dimension,v=o.groupBy,b=o.as;if(!l.isString(f))throw new TypeError("Invalid dimension: must be a string!");if(l.isArray(b)&&(console.warn("Invalid as: must be a string, will use the first element of the array specified."),b=b[0]),!l.isString(b))throw new TypeError("Invalid as: must be a string!");var y=a.rows,g=[],_=c.default(y,v);l.forIn(_,function(M){var x=s.sum(M.map(function(S){return S[u]})),m=c.default(M,[f]);l.forIn(m,function(S){var P=s.sum(S.map(function(R){return R[u]})),A=S[0],O=A[f];A[u]=P,A[f]=O,x===0?A[b]=0:A[b]=P/x,g.push(A)})}),a.rows=g}r.DataSet.registerTransform("percent",i)},"./src/transform/pick.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),l=e("./src/data-set.ts"),s=e("./src/util/option-parser.ts");l.DataSet.registerTransform("pick",function(c,r){var h=s.getFields(r,c.getColumnNames());c.rows=c.rows.map(function(n){return t.pick(n,h)})})},"./src/transform/proportion.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importDefault(e("./src/util/partition.ts")),c=e("./src/data-set.ts"),r=e("./src/util/option-parser.ts"),h={groupBy:[],as:"_proportion"};function n(i,a){a=l.assign({},h,a);var o=r.getField(a),u=a.dimension,f=a.groupBy,v=a.as;if(!l.isString(u))throw new TypeError("Invalid dimension: must be a string!");if(l.isArray(v)&&(console.warn("Invalid as: must be a string, will use the first element of the array specified."),v=v[0]),!l.isString(v))throw new TypeError("Invalid as: must be a string!");var b=i.rows,y=[],g=s.default(b,f);l.forIn(g,function(_){var M=_.length,x=s.default(_,[u]);l.forIn(x,function(m){var S=m.length,P=m[0],A=P[u];P[o]=S,P[u]=A,P[v]=S/M,y.push(P)})}),i.rows=y}c.DataSet.registerTransform("proportion",n)},"./src/transform/regression.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=t.__importDefault(e("./node_modules/_regression@2.0.1@regression/dist/regression.js")),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),c=t.__importDefault(e("./src/util/get-series-values.ts")),r=e("./src/data-set.ts"),h=e("./src/util/option-parser.ts"),n=e("./src/util/bandwidth.ts"),i={as:["x","y"],method:"linear",order:2,precision:2},a=["linear","exponential","logarithmic","power","polynomial"];function o(u,f){f=s.assign({},i,f);var v=h.getFields(f);if(!s.isArray(v)||v.length!==2)throw new TypeError("invalid fields: must be an array of 2 strings.");var b=t.__read(v,2),y=b[0],g=b[1],_=f.method;if(a.indexOf(_)===-1)throw new TypeError("invalid method: "+_+". Must be one of "+a.join(", "));var M=u.rows.map(function(F){return[F[y],F[g]]}),x=l.default[_](M,f),m=f.extent;(!s.isArray(m)||m.length!==2)&&(m=u.range(y));var S=f.bandwidth;(!s.isNumber(S)||S<=0)&&(S=n.silverman(u.getColumn(y)));var P=c.default(m,S),A=[],O=t.__read(f.as,2),R=O[0],W=O[1];P.forEach(function(F){var Z={},V=t.__read(x.predict(F),2),k=V[0],Y=V[1];Z[R]=k,Z[W]=Y,isFinite(Y)&&A.push(Z)}),u.rows=A}r.DataSet.registerTransform("regression",o),T.default={REGRESSION_METHODS:a}},"./src/transform/rename.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),l=e("./src/data-set.ts");function s(c,r){var h=r.map||{},n={};t.isPlainObject(h)&&t.forIn(h,function(i,a){t.isString(i)&&t.isString(a)&&(n[a]=i)}),c.rows.forEach(function(i){t.forIn(n,function(a,o){var u=i[o];delete i[o],i[a]=u})})}l.DataSet.registerTransform("rename",s),l.DataSet.registerTransform("rename-fields",s)},"./src/transform/reverse.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./src/data-set.ts");t.DataSet.registerTransform("reverse",function(l){l.rows.reverse()})},"./src/transform/sort-by.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),l=e("./src/data-set.ts"),s=e("./src/util/option-parser.ts"),c=["ASC","DESC"];function r(h,n){var i=s.getFields(n,[h.getColumnName(0)]);if(!t.isArray(i))throw new TypeError("Invalid fields: must be an array with strings!");h.rows=t.sortBy(h.rows,i);var a=n.order;if(a&&c.indexOf(a)===-1)throw new TypeError("Invalid order: "+a+" must be one of "+c.join(", "));a==="DESC"&&h.rows.reverse()}l.DataSet.registerTransform("sort-by",r),l.DataSet.registerTransform("sortBy",r)},"./src/transform/sort.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./src/data-set.ts");t.DataSet.registerTransform("sort",function(l,s){var c=l.getColumnName(0);l.rows.sort(s.callback||function(r,h){return r[c]-h[c]})})},"./src/transform/subset.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./src/data-set.ts"),l=e("./src/util/option-parser.ts");t.DataSet.registerTransform("subset",function(s,c){var r=c.startRowIndex||0,h=c.endRowIndex||s.rows.length-1,n=l.getFields(c,s.getColumnNames());s.rows=s.getSubset(r,h,n)})},"./src/transform/tag-cloud.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=e("./src/data-set.ts"),c=t.__importDefault(e("./src/util/tag-cloud.ts")),r=e("./src/util/option-parser.ts"),h={fields:["text","value"],font:function(){return"serif"},padding:1,size:[500,500],spiral:"archimedean",timeInterval:500};function n(i,a){a=l.assign({},h,a);var o=c.default();if(!a.size[0]||!a.size[1]){i.rows=[],i._tagCloud=o;return}["font","fontSize","fontWeight","padding","rotate","size","spiral","timeInterval"].forEach(function(A){a[A]&&o[A](a[A])});var u=r.getFields(a),f=t.__read(u,2),v=f[0],b=f[1];if(!l.isString(v)||!l.isString(b))throw new TypeError('Invalid fields: must be an array with 2 strings (e.g. [ "text", "value" ])!');var y=i.rows.map(function(A){return A.text=A[v],A.value=A[b],A});o.words(y),a.imageMask&&o.createMask(a.imageMask);var g=o.start(),_=g._tags,M=g._bounds||[{x:0,y:0},{x:a.size[0],y:a.size[1]}];_.forEach(function(A){A.x+=a.size[0]/2,A.y+=a.size[1]/2});var x=t.__read(a.size,2),m=x[0],S=x[1],P=g.hasImage;_.push({text:"",value:0,x:P?0:M[0].x,y:P?0:M[0].y,opacity:0}),_.push({text:"",value:0,x:P?m:M[1].x,y:P?S:M[1].y,opacity:0}),i.rows=_,i._tagCloud=g}s.DataSet.registerTransform("tag-cloud",n),s.DataSet.registerTransform("word-cloud",n)},"./src/transform/waffle.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=e("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js"),c=t.__importDefault(e("./src/util/partition.ts")),r=e("./src/data-set.ts"),h=e("./src/util/option-parser.ts"),n={fields:["name","value"],rows:5,size:[1,1],scale:1,groupBy:[],maxCount:1e3,gapRatio:.1,as:["x","y"]};function i(a,o){o=l.assign({},n,o);var u=h.getFields(o),f=t.__read(u,2),v=f[0],b=f[1],y=t.__read(o.as,2),g=y[0],_=y[1],M=o.groupBy,x=c.default(a.rows,M),m=l.keys(x),S=t.__read(o.size,2),P=S[0],A=S[1],O=o.maxCount,R=m.length,W=A/R,F=o.rows,Z=o.gapRatio,V=[],k=o.scale,Y=0,K=0;l.forIn(x,function(it){var ct=s.sum(l.map(it,function(ut){return ut[b]})),ht=Math.ceil(ct*k/F);ct*k>O&&(k=O/ct,ht=Math.ceil(ct*k/F)),K=P/ht}),l.forIn(x,function(it){var ct=[Y*W,(Y+1)*W],ht=ct[1]-ct[0],ut=ht*(1-Z)/F,It=0,Nt=0;l.each(it,function(Lt){for(var _t=Lt[b],mt=Math.round(_t*k),At=0;At<mt;At++){Nt===F&&(Nt=0,It++);var rt=l.pick(Lt,[v,b].concat(M));rt[g]=It*K+K/2,rt[_]=Nt*ut+ut/2+ct[0],rt._wStep=K,rt._hStep=ut,Nt++,V.push(rt)}}),Y+=1}),a.rows=V}r.DataSet.registerTransform("waffle",i)},"./src/util/bandwidth.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.nrd=T.silverman=void 0;var t=e("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js");function l(c){var r=t.standardDeviation(c),h=4*Math.pow(r,5),n=3*c.length;return Math.pow(h/n,.2)}T.silverman=l;function s(c){var r=t.standardDeviation(c),h=t.interquartileRange(c);return typeof h=="number"&&(r=Math.min(r,h/1.34)),1.06*r*Math.pow(c.length,-.2)}T.nrd=s},"./src/util/get-geo-projection.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importStar(e("./node_modules/_d3-geo@1.6.4@d3-geo/build/d3-geo.js")),c=t.__importStar(e("./node_modules/_d3-geo-projection@2.1.2@d3-geo-projection/build/d3-geo-projection.js")),r=t.__importStar(e("./node_modules/_d3-composite-projections@1.4.0@d3-composite-projections/d3-composite-projections.js"));T.default=function(h,n){if(n===void 0&&(n=!1),l.isFunction(h))return n?h:h();if(l.isString(h)){if(s[h])return n?s[h]:s[h]();if(c[h])return n?c[h]:c[h]();if(r[h])return n?r[h]:r[h]()}return null}},"./src/util/get-series-values.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js");T.default=function(l,s){for(var c=s||1,r=t.__read(l,2),h=r[0],n=r[1],i=[],a=h;a<n;)i.push(a),a+=c;return i.push(n),i}},"./src/util/kernel.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function t(s){return Math.abs(s)<=1?.5:0}function l(s){var c=1-Math.pow(Math.abs(s),3);return Math.pow(c,3)}T.default={boxcar:t,cosine:function(c){return Math.abs(c)<=1?Math.PI/4*Math.cos(Math.PI/2*c):0},epanechnikov:function(c){return Math.abs(c)<1?.75*(1-c*c):0},gaussian:function(c){return .3989422804*Math.exp(-.5*c*c)},quartic:function(c){if(Math.abs(c)<1){var r=1-c*c;return 15/16*r*r}return 0},triangular:function(c){var r=Math.abs(c);return r<1?1-r:0},tricube:function(c){return Math.abs(c)<1?70/81*l(c):0},triweight:function(c){if(Math.abs(c)<1){var r=1-c*c;return 35/32*r*r*r}return 0},uniform:t}},"./src/util/option-parser.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.getFields=T.getField=void 0;var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),l="Invalid field: it must be a string!",s="Invalid fields: it must be an array!";function c(h,n){var i=h.field,a=h.fields;if(t.isString(i))return i;if(t.isArray(i))return console.warn(l),i[0];if(console.warn(l+" will try to get fields instead."),t.isString(a))return a;if(t.isArray(a)&&a.length)return a[0];if(n)return n;throw new TypeError(l)}T.getField=c;function r(h,n){var i=h.field,a=h.fields;if(t.isArray(a))return a;if(t.isString(a))return console.warn(s),[a];if(console.warn(s+" will try to get field instead."),t.isString(i))return console.warn(s),[i];if(t.isArray(i)&&i.length)return console.warn(s),i;if(n)return n;throw new TypeError(s)}T.getFields=r},"./src/util/p-by-fraction.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(t){for(var l=1/t,s=[],c=0;c<=1;c=c+l)s.push(c);return s}},"./src/util/partition.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importDefault(e("./src/util/simple-sort-by.ts"));T.default=function(c,r,h){h===void 0&&(h=[]);var n=c;h&&h.length&&(n=s.default(c,h));var i;l.isFunction(r)?i=r:l.isArray(r)?i=function(u){return"_"+r.map(function(f){return u[f]}).join("-")}:l.isString(r)&&(i=function(u){return"_"+u[r]});var a=l.groupBy(n,i);return a}},"./src/util/simple-sort-by.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js");function l(s,c){c===void 0&&(c=[]);var r=void 0;return t.isFunction(c)?r=c:t.isArray(c)?r=function(n,i){for(var a=0;a<c.length;a++){var o=c[a];if(n[o]<i[o])return-1;if(n[o]>i[o])return 1}return 0}:t.isString(c)&&(r=function(n,i){return n[c]<i[c]?-1:n[c]>i[c]?1:0}),s.sort(r)}T.default=l},"./src/util/tag-cloud.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=Math.PI/180,s=1<<11>>5,c=1<<11;function r(P){return P.text}function h(){return"serif"}function n(){return"normal"}function i(P){return P.value}function a(){return~~(Math.random()*2)*90}function o(){return 1}function u(P,A,O,R){if(!A.sprite){var W=P.context,F=P.ratio;W.clearRect(0,0,(s<<5)/F,c/F);var Z=0,V=0,k=0,Y=O.length;for(--R;++R<Y;){A=O[R],W.save(),W.font=A.style+" "+A.weight+" "+~~((A.size+1)/F)+"px "+A.font;var K=W.measureText(A.text+"m").width*F,it=A.size<<1;if(A.rotate){var ct=Math.sin(A.rotate*l),ht=Math.cos(A.rotate*l),ut=K*ht,It=K*ct,Nt=it*ht,Lt=it*ct;K=Math.max(Math.abs(ut+Lt),Math.abs(ut-Lt))+31>>5<<5,it=~~Math.max(Math.abs(It+Nt),Math.abs(It-Nt))}else K=K+31>>5<<5;if(it>k&&(k=it),Z+K>=s<<5&&(Z=0,V+=k,k=0),V+it>=c)break;W.translate((Z+(K>>1))/F,(V+(it>>1))/F),A.rotate&&W.rotate(A.rotate*l),W.fillText(A.text,0,0),A.padding&&(W.lineWidth=2*A.padding,W.strokeText(A.text,0,0)),W.restore(),A.width=K,A.height=it,A.xoff=Z,A.yoff=V,A.x1=K>>1,A.y1=it>>1,A.x0=-A.x1,A.y0=-A.y1,A.hasText=!0,Z+=K}for(var _t=W.getImageData(0,0,(s<<5)/F,c/F).data,mt=[];--R>=0;)if(A=O[R],!!A.hasText){for(var K=A.width,At=K>>5,it=A.y1-A.y0,rt=0;rt<it*At;rt++)mt[rt]=0;if(Z=A.xoff,Z==null)return;V=A.yoff;for(var Mt=0,z=-1,$=0;$<it;$++){for(var rt=0;rt<K;rt++){var dt=At*$+(rt>>5),et=_t[(V+$)*(s<<5)+(Z+rt)<<2]?1<<31-rt%32:0;mt[dt]|=et,Mt|=et}Mt?z=$:(A.y0++,it--,$--,V++)}A.y1=A.y0+z,A.sprite=mt.slice(0,(A.y1-A.y0)*At)}}}function f(P,A,O){O>>=5;for(var R=P.sprite,W=P.width>>5,F=P.x-(W<<4),Z=F&127,V=32-Z,k=P.y1-P.y0,Y=(P.y+P.y0)*O+(F>>5),K,it=0;it<k;it++){K=0;for(var ct=0;ct<=W;ct++)if((K<<V|(ct<W?(K=R[it*W+ct])>>>Z:0))&A[Y+ct])return!0;Y+=O}return!1}function v(P,A){var O=P[0],R=P[1];A.x+A.x0<O.x&&(O.x=A.x+A.x0),A.y+A.y0<O.y&&(O.y=A.y+A.y0),A.x+A.x1>R.x&&(R.x=A.x+A.x1),A.y+A.y1>R.y&&(R.y=A.y+A.y1)}function b(P,A){return P.x+P.x1>A[0].x&&P.x+P.x0<A[1].x&&P.y+P.y1>A[0].y&&P.y+P.y0<A[1].y}function y(P){var A=P[0]/P[1];return function(O){return[A*(O*=.1)*Math.cos(O),O*Math.sin(O)]}}function g(P){var A=4,O=A*P[0]/P[1],R=0,W=0;return function(F){var Z=F<0?-1:1;switch(Math.sqrt(1+4*Z*F)-Z&3){case 0:R+=O;break;case 1:W+=A;break;case 2:R-=O;break;default:W-=A;break}return[R,W]}}function _(P){for(var A=[],O=-1;++O<P;)A[O]=0;return A}function M(){return document.createElement("canvas")}function x(P){return typeof P=="function"?P:function(){return P}}var m={archimedean:y,rectangular:g};function S(){var P=[256,256],A=r,O=h,R=i,W=n,F=n,Z=a,V=o,k=y,Y=[],K=Infinity,it=Math.random,ct=M,ht={};ht.canvas=function(Nt){return arguments.length?(ct=x(Nt),ht):ct},ht.start=function(){var Nt=t.__read(P,2),Lt=Nt[0],_t=Nt[1],mt=ut(ct()),At=ht.board?ht.board:_((P[0]>>5)*P[1]),rt=Y.length,Mt=[],z=Y.map(function(ot,pt){return ot.text=A.call(this,ot,pt),ot.font=O.call(this,ot,pt),ot.style=W.call(this,ot,pt),ot.weight=F.call(this,ot,pt),ot.rotate=Z.call(this,ot,pt),ot.size=~~R.call(this,ot,pt),ot.padding=V.call(this,ot,pt),ot}).sort(function(ot,pt){return pt.size-ot.size}),$=-1,dt=ht.board?[{x:0,y:0},{x:Lt,y:_t}]:null;et();function et(){for(var ot=Date.now();Date.now()-ot<K&&++$<rt;){var pt=z[$];pt.x=Lt*(it()+.5)>>1,pt.y=_t*(it()+.5)>>1,u(mt,pt,z,$),pt.hasText&&It(At,pt,dt)&&(Mt.push(pt),dt?ht.hasImage||v(dt,pt):dt=[{x:pt.x+pt.x0,y:pt.y+pt.y0},{x:pt.x+pt.x1,y:pt.y+pt.y1}],pt.x-=P[0]>>1,pt.y-=P[1]>>1)}ht._tags=Mt,ht._bounds=dt}return ht};function ut(Nt){Nt.width=Nt.height=1;var Lt=Math.sqrt(Nt.getContext("2d").getImageData(0,0,1,1).data.length>>2);Nt.width=(s<<5)/Lt,Nt.height=c/Lt;var _t=Nt.getContext("2d");return _t.fillStyle=_t.strokeStyle="red",_t.textAlign="center",{context:_t,ratio:Lt}}function It(Nt,Lt,_t){for(var mt=Lt.x,At=Lt.y,rt=Math.sqrt(P[0]*P[0]+P[1]*P[1]),Mt=k(P),z=it()<.5?1:-1,$,dt=-z,et,ot;($=Mt(dt+=z))&&(et=~~$[0],ot=~~$[1],!(Math.min(Math.abs(et),Math.abs(ot))>=rt));)if(Lt.x=mt+et,Lt.y=At+ot,!(Lt.x+Lt.x0<0||Lt.y+Lt.y0<0||Lt.x+Lt.x1>P[0]||Lt.y+Lt.y1>P[1])&&(!_t||!f(Lt,Nt,P[0]))&&(!_t||b(Lt,_t))){for(var pt=Lt.sprite,H=Lt.width>>5,nt=P[0]>>5,at=Lt.x-(H<<4),q=at&127,Et=32-q,vt=Lt.y1-Lt.y0,Ft=void 0,Qt=(Lt.y+Lt.y0)*nt+(at>>5),ee=0;ee<vt;ee++){Ft=0;for(var Gt=0;Gt<=H;Gt++)Nt[Qt+Gt]|=Ft<<Et|(Gt<H?(Ft=pt[ee*H+Gt])>>>q:0);Qt+=nt}return delete Lt.sprite,!0}return!1}return ht.createMask=function(Nt){var Lt=document.createElement("canvas"),_t=t.__read(P,2),mt=_t[0],At=_t[1];if(!(!mt||!At)){var rt=mt>>5,Mt=_((mt>>5)*At);Lt.width=mt,Lt.height=At;var z=Lt.getContext("2d");z.drawImage(Nt,0,0,Nt.width,Nt.height,0,0,mt,At);for(var $=z.getImageData(0,0,mt,At).data,dt=0;dt<At;dt++)for(var et=0;et<mt;et++){var ot=rt*dt+(et>>5),pt=dt*mt+et<<2,H=$[pt]>=250&&$[pt+1]>=250&&$[pt+2]>=250,nt=H?1<<31-et%32:0;Mt[ot]|=nt}ht.board=Mt,ht.hasImage=!0}},ht.timeInterval=function(Nt){return arguments.length?(K=Nt==null?Infinity:Nt,ht):K},ht.words=function(Nt){return arguments.length?(Y=Nt,ht):Y},ht.size=function(Nt){return arguments.length?(P=[+Nt[0],+Nt[1]],ht):P},ht.font=function(Nt){return arguments.length?(O=x(Nt),ht):O},ht.fontStyle=function(Nt){return arguments.length?(W=x(Nt),ht):W},ht.fontWeight=function(Nt){return arguments.length?(F=x(Nt),ht):F},ht.rotate=function(Nt){return arguments.length?(Z=x(Nt),ht):Z},ht.text=function(Nt){return arguments.length?(A=x(Nt),ht):A},ht.spiral=function(Nt){return arguments.length?(k=m[Nt]||Nt,ht):k},ht.fontSize=function(Nt){return arguments.length?(R=x(Nt),ht):R},ht.padding=function(Nt){return arguments.length?(V=x(Nt),ht):V},ht.random=function(Nt){return arguments.length?(it=Nt,ht):it},ht}T.default=S},"./src/view.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.View=void 0;var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),l=t.__importDefault(e("./node_modules/_wolfy87-eventemitter@5.2.9@wolfy87-eventemitter/EventEmitter.js")),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js");function c(h){var n={};return s.forIn(h,function(i,a){s.isObject(i)&&i.isView?n[a]=i:s.isArray(i)?n[a]=i.concat([]):s.isPlainObject(i)?n[a]=s.clone(i):n[a]=i}),n}var r=function(h){t.__extends(n,h);function n(i,a){var o=h.call(this)||this;if(o.isView=!0,o.isDataView=!0,o.watchingStates=null,o.dataType="table",o.transforms=[],o.origin=[],o.rows=[],i&&i.isDataSet?o.dataSet=i:(o.dataSet=null,a=i),o.loose=!o.dataSet,a&&(o.watchingStates=a.watchingStates),!o.loose){var u=o.watchingStates;i.on("statechange",function(f){s.isArray(u)?u.indexOf(f)>-1&&o._reExecute():o._reExecute()})}return o}return n.prototype._parseStateExpression=function(i){var a=this.dataSet;if(a!==null){var o=/^\$state\.(\w+)/.exec(i);return o?a.state[o[1]]:i}},n.prototype._preparseOptions=function(i){var a=this,o=c(i);return this.loose||s.forIn(o,function(u,f){s.isString(u)&&/^\$state\./.test(u)&&(o[f]=a._parseStateExpression(u))}),o},n.prototype._prepareSource=function(i,a){if(this._source={source:i,options:a},a){var o=this._preparseOptions(a);this.origin=n.DataSet.getConnector(o.type)(i,o,this)}else if(i instanceof n||s.isString(i))this.origin=n.DataSet.getConnector("default")(i,this.dataSet);else if(s.isArray(i))this.origin=i;else if(s.isObject(i)&&i.type){var o=this._preparseOptions(i);this.origin=n.DataSet.getConnector(o.type)(o,this)}else throw new TypeError("Invalid source");return this.rows=s.deepMix([],this.origin),this},n.prototype.source=function(i,a){return this._prepareSource(i,a)._reExecuteTransforms(),this.trigger("change",[]),this},n.prototype.transform=function(i){return i&&i.type&&(this.transforms.push(i),this._executeTransform(i)),this},n.prototype._executeTransform=function(i){i=this._preparseOptions(i);var a=n.DataSet.getTransform(i.type);a(this,i)},n.prototype._reExecuteTransforms=function(){var i=this;this.transforms.forEach(function(a){i._executeTransform(a)})},n.prototype.addRow=function(i){this.rows.push(i)},n.prototype.removeRow=function(i){this.rows.splice(i,1)},n.prototype.updateRow=function(i,a){s.assign(this.rows[i],a)},n.prototype.findRows=function(i){return this.rows.filter(function(a){return s.isMatch(a,i)})},n.prototype.findRow=function(i){return s.find(this.rows,i)},n.prototype.getColumnNames=function(){var i=this.rows[0];return i?s.keys(i):[]},n.prototype.getColumnName=function(i){return this.getColumnNames()[i]},n.prototype.getColumnIndex=function(i){var a=this.getColumnNames();return a.indexOf(i)},n.prototype.getColumn=function(i){return this.rows.map(function(a){return a[i]})},n.prototype.getColumnData=function(i){return this.getColumn(i)},n.prototype.getSubset=function(i,a,o){for(var u=[],f=i;f<=a;f++)u.push(s.pick(this.rows[f],o));return u},n.prototype.toString=function(i){return i===void 0&&(i=!1),i?JSON.stringify(this.rows,null,2):JSON.stringify(this.rows)},n.prototype._reExecute=function(){var i=this._source,a=i.source,o=i.options;this._prepareSource(a,o),this._reExecuteTransforms(),this.trigger("change",[])},n}(l.default);T.View=r}})})},cSJO:function(Se,ft,L){"use strict";var U=this&&this.__spreadArrays||function(){for(var r=0,h=0,n=arguments.length;h<n;h++)r+=arguments[h].length;for(var i=Array(r),a=0,h=0;h<n;h++)for(var o=arguments[h],u=0,f=o.length;u<f;u++,a++)i[a]=o[u];return i};Object.defineProperty(ft,"__esModule",{value:!0}),ft.resolveInstance=void 0;var E=L("MON2"),T=L("FV85"),e=L("xfSm");function t(r,h,n){var i=h.filter(function(o){return o.target!==null&&o.target.type===T.TargetTypeEnum.ClassProperty}),a=i.map(n);return i.forEach(function(o,u){var f="";f=o.target.name.value();var v=a[u];r[f]=v}),r}function l(r,h){return new(r.bind.apply(r,U([void 0],h)))}function s(r,h){if(Reflect.hasMetadata(e.POST_CONSTRUCT,r)){var n=Reflect.getMetadata(e.POST_CONSTRUCT,r);try{h[n.value]()}catch(i){throw new Error(E.POST_CONSTRUCT_ERROR(r.name,i.message))}}}function c(r,h,n){var i=null;if(h.length>0){var a=h.filter(function(u){return u.target!==null&&u.target.type===T.TargetTypeEnum.ConstructorArgument}),o=a.map(n);i=l(r,o),i=t(i,h,n)}else i=new r;return s(r,i),i}ft.resolveInstance=c},cWXX:function(Se,ft,L){"use strict";var U=L("cIOH"),E=L.n(U),T=L("oIFs"),e=L.n(T)},cZ5Q:function(Se,ft,L){"use strict";Object.defineProperty(ft,"__esModule",{value:!0}),ft.injectable=void 0;var U=L("MON2"),E=L("xfSm");function T(){return function(e){if(Reflect.hasOwnMetadata(E.PARAM_TYPES,e))throw new Error(U.DUPLICATED_INJECTABLE_DECORATOR);var t=Reflect.getMetadata(E.DESIGN_PARAM_TYPES,e)||[];return Reflect.defineMetadata(E.PARAM_TYPES,t,e),e}}ft.injectable=T},cZlC:function(Se,ft,L){"use strict";L.d(ft,"b",function(){return U}),L.d(ft,"c",function(){return E}),L.d(ft,"a",function(){return T});var U;(function(e){e.LINEAR="linear",e.POWER="power",e.LOG="log",e.IDENTITY="identity",e.TIME="time",e.QUANTILE="quantile",e.QUANTIZE="quantize",e.THRESHOLD="threshold",e.CAT="cat"})(U||(U={}));var E;(function(e){e.CONSTANT="constant",e.VARIABLE="variable"})(E||(E={}));var T;(function(e){e[e.Attribute=0]="Attribute",e[e.InstancedAttribute=1]="InstancedAttribute",e[e.Uniform=2]="Uniform"})(T||(T={}))},"cq/+":function(Se,ft,L){var U=L("mc0g"),E=U();Se.exports=E},cvCv:function(Se,ft){function L(U){return function(){return U}}Se.exports=L},d9O0:function(Se,ft,L){"use strict";Object.defineProperty(ft,"__esModule",{value:!0}),ft.id=void 0;var U=0;function E(){return U++}ft.id=E},dQpi:function(Se,ft,L){var U=L("yGk4"),E=L("vN+2"),T=L("rEGp"),e=1/0,t=U&&1/T(new U([,-0]))[1]==e?function(l){return new U(l)}:E;Se.exports=t},dTAl:function(Se,ft,L){var U=L("GoyQ"),E=Object.create,T=function(){function e(){}return function(t){if(!U(t))return{};if(E)return E(t);e.prototype=t;var l=new e;return e.prototype=void 0,l}}();Se.exports=T},dVn5:function(Se,ft){var L=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function U(E){return E.match(L)||[]}Se.exports=U},dX1H:function(Se,ft,L){"use strict";Object.defineProperty(ft,"__esModule",{value:!0}),ft.Target=void 0;var U=L("xfSm"),E=L("d9O0"),T=L("GXnB"),e=L("zxMA"),t=function(){function l(s,c,r,h){this.id=E.id(),this.type=s,this.serviceIdentifier=r,this.name=new e.QueryableString(c||""),this.metadata=new Array;var n=null;typeof h=="string"?n=new T.Metadata(U.NAMED_TAG,h):h instanceof T.Metadata&&(n=h),n!==null&&this.metadata.push(n)}return l.prototype.hasTag=function(s){for(var c=0,r=this.metadata;c<r.length;c++){var h=r[c];if(h.key===s)return!0}return!1},l.prototype.isArray=function(){return this.hasTag(U.MULTI_INJECT_TAG)},l.prototype.matchesArray=function(s){return this.matchesTag(U.MULTI_INJECT_TAG)(s)},l.prototype.isNamed=function(){return this.hasTag(U.NAMED_TAG)},l.prototype.isTagged=function(){return this.metadata.some(function(s){return s.key!==U.INJECT_TAG&&s.key!==U.MULTI_INJECT_TAG&&s.key!==U.NAME_TAG&&s.key!==U.UNMANAGED_TAG&&s.key!==U.NAMED_TAG})},l.prototype.isOptional=function(){return this.matchesTag(U.OPTIONAL_TAG)(!0)},l.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(s){return s.key===U.NAMED_TAG})[0]:null},l.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(s){return s.key!==U.INJECT_TAG&&s.key!==U.MULTI_INJECT_TAG&&s.key!==U.NAME_TAG&&s.key!==U.UNMANAGED_TAG&&s.key!==U.NAMED_TAG}):null},l.prototype.matchesNamedTag=function(s){return this.matchesTag(U.NAMED_TAG)(s)},l.prototype.matchesTag=function(s){var c=this;return function(r){for(var h=0,n=c.metadata;h<n.length;h++){var i=n[h];if(i.key===s&&i.value===r)return!0}return!1}},l}();ft.Target=t},doU7:function(Se,ft,L){"use strict";Object.defineProperty(ft,"__esModule",{value:!0}),ft.BindingCount=void 0;var U={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};ft.BindingCount=U},dt0z:function(Se,ft,L){var U=L("zoYe");function E(T){return T==null?"":U(T)}Se.exports=E},dxzI:function(Se,ft,L){"use strict";Object.defineProperty(ft,"__esModule",{value:!0}),ft.AsyncContainerModule=ft.ContainerModule=void 0;var U=L("d9O0"),E=function(){function e(t){this.id=U.id(),this.registry=t}return e}();ft.ContainerModule=E;var T=function(){function e(t){this.id=U.id(),this.registry=t}return e}();ft.AsyncContainerModule=T},eUgh:function(Se,ft){function L(U,E){for(var T=-1,e=U==null?0:U.length,t=Array(e);++T<e;)t[T]=E(U[T],T,U);return t}Se.exports=L},"eg+a":function(Se,ft,L){"use strict";L.d(ft,"a",function(){return U});var U=["loaded","maploaded","resize","destroy","dragstart","dragging","dragend","dragcancel"]},fX6N:function(Se,ft,L){"use strict";L.d(ft,"d",function(){return Sf}),L.d(ft,"b",function(){return of}),L.d(ft,"a",function(){return jc});var U=L("mNvP"),E=L("uhBA"),T=L.n(E),e=L("4cb6"),t=L("APxj"),l=L.n(t),s=L("bB6j"),c=L("lSNA"),r=L.n(c),h=L("lwsE"),n=L.n(h),i=L("W8MJ"),a=L.n(i),o=L("Hel2"),u=L("rxlC"),f=L.n(u);function v(de,ge){var kt=Object.keys(de);if(Object.getOwnPropertySymbols){var Kt=Object.getOwnPropertySymbols(de);ge&&(Kt=Kt.filter(function(Ue){return Object.getOwnPropertyDescriptor(de,Ue).enumerable})),kt.push.apply(kt,Kt)}return kt}function b(de){for(var ge=1;ge<arguments.length;ge++){var kt=arguments[ge]!=null?arguments[ge]:{};ge%2?v(Object(kt),!0).forEach(function(Kt){r()(de,Kt,kt[Kt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(de,Object.getOwnPropertyDescriptors(kt)):v(Object(kt)).forEach(function(Kt){Object.defineProperty(de,Kt,Object.getOwnPropertyDescriptor(kt,Kt))})}return de}function y(de,ge){var kt;if(typeof Symbol=="undefined"||de[Symbol.iterator]==null){if(Array.isArray(de)||(kt=g(de))||ge&&de&&typeof de.length=="number"){kt&&(de=kt);var Kt=0,Ue=function(){};return{s:Ue,n:function(){return Kt>=de.length?{done:!0}:{done:!1,value:de[Kt++]}},e:function(Qr){throw Qr},f:Ue}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var un=!0,Gn=!1,mr;return{s:function(){kt=de[Symbol.iterator]()},n:function(){var Qr=kt.next();return un=Qr.done,Qr},e:function(Qr){Gn=!0,mr=Qr},f:function(){try{!un&&kt.return!=null&&kt.return()}finally{if(Gn)throw mr}}}}function g(de,ge){if(!!de){if(typeof de=="string")return _(de,ge);var kt=Object.prototype.toString.call(de).slice(8,-1);if(kt==="Object"&&de.constructor&&(kt=de.constructor.name),kt==="Map"||kt==="Set")return Array.from(de);if(kt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(kt))return _(de,ge)}}function _(de,ge){(ge==null||ge>de.length)&&(ge=de.length);for(var kt=0,Kt=new Array(ge);kt<ge;kt++)Kt[kt]=de[kt];return Kt}var M=30;function x(de){var ge=de.characterSet,kt=de.getFontWidth,Kt=de.fontHeight,Ue=de.buffer,un=de.maxCanvasWidth,Gn=de.mapping,mr=Gn===void 0?{}:Gn,gr=de.xOffset,Qr=gr===void 0?0:gr,wi=de.yOffset,$i=wi===void 0?0:wi,ha=0,xa=Qr;Array.from(ge).forEach(function(vo,ts){if(!mr[vo]){var Ho=kt(vo,ts);xa+M>un&&(xa=0,ha++),mr[vo]={x:xa,y:$i+ha*M,width:M,height:M,advance:Ho},xa+=M}});var ao=Kt+Ue*2;return{mapping:mr,xOffset:xa,yOffset:$i+ha*ao,canvasHeight:P($i+(ha+1)*ao)}}function m(de,ge,kt){var Kt=0,Ue=0,un=0,Gn=[],mr={},gr=y(de),Qr;try{for(gr.s();!(Qr=gr.n()).done;){var wi=Qr.value;if(!mr[wi.id]){var $i=wi.size;Kt+$i+ge>kt&&(S(mr,Gn,Ue),Kt=0,Ue=un+Ue+ge,un=0,Gn=[]),Gn.push({icon:wi,xOffset:Kt}),Kt=Kt+$i+ge,un=Math.max(un,$i)}}}catch(xa){gr.e(xa)}finally{gr.f()}Gn.length>0&&S(mr,Gn,Ue);var ha=P(un+Ue+ge);return{mapping:mr,canvasHeight:ha}}function S(de,ge,kt){var Kt=y(ge),Ue;try{for(Kt.s();!(Ue=Kt.n()).done;){var un=Ue.value,Gn=un.icon,mr=un.xOffset;de[Gn.id]=b(b({},Gn),{},{x:mr,y:kt,image:Gn.image,width:Gn.width,height:Gn.height})}}catch(gr){Kt.e(gr)}finally{Kt.f()}}function P(de){return Math.pow(2,Math.ceil(Math.log2(de)))}var A,O,R;function W(de,ge){var kt;if(typeof Symbol=="undefined"||de[Symbol.iterator]==null){if(Array.isArray(de)||(kt=F(de))||ge&&de&&typeof de.length=="number"){kt&&(de=kt);var Kt=0,Ue=function(){};return{s:Ue,n:function(){return Kt>=de.length?{done:!0}:{done:!1,value:de[Kt++]}},e:function(Qr){throw Qr},f:Ue}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var un=!0,Gn=!1,mr;return{s:function(){kt=de[Symbol.iterator]()},n:function(){var Qr=kt.next();return un=Qr.done,Qr},e:function(Qr){Gn=!0,mr=Qr},f:function(){try{!un&&kt.return!=null&&kt.return()}finally{if(Gn)throw mr}}}}function F(de,ge){if(!!de){if(typeof de=="string")return Z(de,ge);var kt=Object.prototype.toString.call(de).slice(8,-1);if(kt==="Object"&&de.constructor&&(kt=de.constructor.name),kt==="Map"||kt==="Set")return Array.from(de);if(kt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(kt))return Z(de,ge)}}function Z(de,ge){(ge==null||ge>de.length)&&(ge=de.length);for(var kt=0,Kt=new Array(ge);kt<ge;kt++)Kt[kt]=de[kt];return Kt}function V(de,ge){var kt=Object.keys(de);if(Object.getOwnPropertySymbols){var Kt=Object.getOwnPropertySymbols(de);ge&&(Kt=Kt.filter(function(Ue){return Object.getOwnPropertyDescriptor(de,Ue).enumerable})),kt.push.apply(kt,Kt)}return kt}function k(de){for(var ge=1;ge<arguments.length;ge++){var kt=arguments[ge]!=null?arguments[ge]:{};ge%2?V(Object(kt),!0).forEach(function(Kt){r()(de,Kt,kt[Kt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(de,Object.getOwnPropertyDescriptors(kt)):V(Object(kt)).forEach(function(Kt){Object.defineProperty(de,Kt,Object.getOwnPropertyDescriptor(kt,Kt))})}return de}var Y=rt(),K="sans-serif",it="normal",ct=24,ht=3,ut=.25,It=8,Nt=1024,Lt=1,_t=1,mt=3,At=["fontFamily","fontWeight","characterSet","fontSize","sdf","buffer","cutoff","radius"];function rt(){for(var de=[],ge=32;ge<128;ge++)de.push(String.fromCharCode(ge));return de}function Mt(de,ge,kt,Kt){de.font="".concat(Kt," ").concat(kt,"px ").concat(ge),de.fillStyle="black",de.textBaseline="middle"}function z(de,ge){for(var kt=0;kt<de.length;kt++)ge.data[4*kt+3]=de[kt]}var $=(A=Object(e.injectable)(),A(O=(R=function(){function de(){n()(this,de),this.fontAtlas=void 0,this.iconFontGlyphs={},this.fontOptions=void 0,this.key=void 0,this.cache=new o.b(mt)}return a()(de,[{key:"init",value:function(){this.cache.clear(),this.fontOptions={fontFamily:K,fontWeight:it,characterSet:Y,fontSize:ct,buffer:ht,sdf:!0,cutoff:ut,radius:It},this.key=""}},{key:"addIconGlyphs",value:function(kt){var Kt=this;kt.forEach(function(Ue){Kt.iconFontGlyphs[Ue.name]=Ue.unicode})}},{key:"getGlyph",value:function(kt){return this.iconFontGlyphs[kt]?String.fromCharCode(parseInt(this.iconFontGlyphs[kt],16)):""}},{key:"scale",get:function(){return _t}},{key:"canvas",get:function(){var kt=this.cache.get(this.key);return kt&&kt.data}},{key:"mapping",get:function(){var kt=this.cache.get(this.key);return kt&&kt.mapping}},{key:"setFontOptions",value:function(kt){this.fontOptions=k(k({},this.fontOptions),kt),this.key=this.getKey();var Kt=this.getNewChars(this.key,this.fontOptions.characterSet),Ue=this.cache.get(this.key);if(!(Ue&&Kt.length===0)){var un=this.generateFontAtlas(this.key,Kt,Ue);this.fontAtlas=un,this.cache.set(this.key,un)}}},{key:"destroy",value:function(){this.cache.clear()}},{key:"generateFontAtlas",value:function(kt,Kt,Ue){var un=this.fontOptions,Gn=un.fontFamily,mr=un.fontWeight,gr=un.fontSize,Qr=un.buffer,wi=un.sdf,$i=un.radius,ha=un.cutoff,xa=Ue&&Ue.data;xa||(xa=document.createElement("canvas"),xa.width=Nt);var ao=xa.getContext("2d");Mt(ao,Gn,gr,mr);var vo=x(k({getFontWidth:function(Yc){return ao.measureText(Yc).width},fontHeight:gr*_t,buffer:Qr,characterSet:Kt,maxCanvasWidth:Nt},Ue&&{mapping:Ue.mapping,xOffset:Ue.xOffset,yOffset:Ue.yOffset})),ts=vo.mapping,Ho=vo.canvasHeight,Gs=vo.xOffset,ru=vo.yOffset,xu=ao.getImageData(0,0,xa.width,xa.height);if(xa.height=Ho,ao.putImageData(xu,0,0),Mt(ao,Gn,gr,mr),wi){var _s=new f.a(gr,Qr,$i,ha,Gn,mr),_u=ao.getImageData(0,0,_s.size,_s.size),mo=W(Kt),fu;try{for(mo.s();!(fu=mo.n()).done;){var xl=fu.value;z(_s.draw(xl),_u),ao.putImageData(_u,ts[xl].x,ts[xl].y)}}catch(Zu){mo.e(Zu)}finally{mo.f()}}else{var ss=W(Kt),Ls;try{for(ss.s();!(Ls=ss.n()).done;){var Ka=Ls.value;ao.fillText(Ka,ts[Ka].x,ts[Ka].y+gr*Lt)}}catch(Zu){ss.e(Zu)}finally{ss.f()}}return{xOffset:Gs,yOffset:ru,mapping:ts,data:xa,width:xa.width,height:xa.height}}},{key:"getKey",value:function(){var kt=this.fontOptions,Kt=kt.fontFamily,Ue=kt.fontWeight,un=kt.fontSize,Gn=kt.buffer,mr=kt.sdf,gr=kt.radius,Qr=kt.cutoff;return mr?"".concat(Kt," ").concat(Ue," ").concat(un," ").concat(Gn," ").concat(gr," ").concat(Qr):"".concat(Kt," ").concat(Ue," ").concat(un," ").concat(Gn)}},{key:"getNewChars",value:function(kt,Kt){var Ue=this.cache.get(kt);if(!Ue)return Kt;var un=[],Gn=Ue.mapping,mr=new Set(Object.keys(Gn)),gr=new Set(Kt);return gr.forEach(function(Qr){mr.has(Qr)||un.push(Qr)}),un}}]),de}(),R))||O),dt=L("7W2i"),et=L.n(dt),ot=L("a1gu"),pt=L.n(ot),H=L("Nsbk"),nt=L.n(H),at,q,Et;function vt(de){var ge=Ft();return function(){var Kt=nt()(de),Ue;if(ge){var un=nt()(this).constructor;Ue=Reflect.construct(Kt,arguments,un)}else Ue=Kt.apply(this,arguments);return pt()(this,Ue)}}function Ft(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(de){return!1}}var Qt=3,ee=1024,Gt=64,$t=(at=Object(e.injectable)(),at(q=(Et=function(de){et()(kt,de);var ge=vt(kt);function kt(){var Kt;n()(this,kt);for(var Ue=arguments.length,un=new Array(Ue),Gn=0;Gn<Ue;Gn++)un[Gn]=arguments[Gn];return Kt=ge.call.apply(ge,[this].concat(un)),Kt.canvasHeight=128,Kt.texture=void 0,Kt.canvas=void 0,Kt.iconData=void 0,Kt.iconMap=void 0,Kt.ctx=void 0,Kt.loadingImageCount=0,Kt}return a()(kt,[{key:"isLoading",value:function(){return this.loadingImageCount===0}},{key:"init",value:function(){this.iconData=[],this.iconMap={},this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d")}},{key:"addImage",value:function(Ue,un){var Gn=this,mr=new Image;if(this.loadingImageCount++,this.hasImage(Ue))throw new Error("Image Id already exists");this.iconData.push({id:Ue,size:Gt}),this.updateIconMap(),this.loadImage(un).then(function(gr){mr=gr;var Qr=Gn.iconData.find(function(wi){return wi.id===Ue});Qr&&(Qr.image=mr,Qr.width=mr.width,Qr.height=mr.height),Gn.update()})}},{key:"getTexture",value:function(){return this.texture}},{key:"getIconMap",value:function(){return this.iconMap}},{key:"getCanvas",value:function(){return this.canvas}},{key:"hasImage",value:function(Ue){return this.iconMap.hasOwnProperty(Ue)}},{key:"removeImage",value:function(Ue){this.hasImage(Ue)&&(this.iconData=this.iconData.filter(function(un){return un.id!==Ue}),delete this.iconMap[Ue],this.update())}},{key:"destroy",value:function(){this.iconData=[],this.iconMap={}}},{key:"update",value:function(){this.updateIconMap(),this.updateIconAtlas(),this.loadingImageCount--,this.loadingImageCount===0&&this.emit("imageUpdate")}},{key:"updateIconAtlas",value:function(){var Ue=this;this.canvas.width=ee,this.canvas.height=this.canvasHeight,Object.keys(this.iconMap).forEach(function(un){var Gn=Ue.iconMap[un],mr=Gn.x,gr=Gn.y,Qr=Gn.image,wi=Gn.width,$i=wi===void 0?64:wi,ha=Gn.height,xa=ha===void 0?64:ha,ao=Math.max($i,xa),vo=ao/Gt,ts=xa/vo,Ho=$i/vo;Qr&&Ue.ctx.drawImage(Qr,mr+(Gt-Ho)/2,gr+(Gt-ts)/2,Ho,ts)})}},{key:"updateIconMap",value:function(){var Ue=m(this.iconData,Qt,ee),un=Ue.mapping,Gn=Ue.canvasHeight;this.iconMap=un,this.canvasHeight=Gn}},{key:"loadImage",value:function(Ue){return new Promise(function(un,Gn){if(Ue instanceof HTMLImageElement){un(Ue);return}var mr=new Image;mr.crossOrigin="anonymous",mr.onload=function(){un(mr)},mr.onerror=function(){Gn(new Error("Could not load image at "+Ue))},mr.src=Ue instanceof File?URL.createObjectURL(Ue):Ue})}}]),kt}(E.EventEmitter),Et))||q),Pe=L("J4zp"),me=L.n(Pe),le=L("IOcx"),be,ze,Xe,_n=(be=Object(e.injectable)(),be(ze=(Xe=function(){function de(){n()(this,de),this.viewport=void 0,this.overridedViewProjectionMatrix=void 0,this.jitteredViewProjectionMatrix=void 0,this.jitteredProjectionMatrix=void 0,this.viewMatrixInverse=void 0,this.cameraPosition=void 0}return a()(de,[{key:"init",value:function(){}},{key:"update",value:function(kt){this.viewport=kt,this.viewMatrixInverse=le.b.invert(le.b.create(),this.getViewMatrix()),this.cameraPosition=[this.viewMatrixInverse[12],this.viewMatrixInverse[13],this.viewMatrixInverse[14]]}},{key:"getProjectionMatrix",value:function(){return this.jitteredProjectionMatrix||this.viewport.getProjectionMatrix()}},{key:"getViewMatrix",value:function(){return this.viewport.getViewMatrix()}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.getViewMatrixUncentered()}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.getViewProjectionMatrixUncentered()}},{key:"getViewProjectionMatrix",value:function(){return this.overridedViewProjectionMatrix||this.jitteredViewProjectionMatrix||this.viewport.getViewProjectionMatrix()}},{key:"getZoom",value:function(){return this.viewport.getZoom()}},{key:"getZoomScale",value:function(){return this.viewport.getZoomScale()}},{key:"getCenter",value:function(){var kt=this.viewport.getCenter(),Kt=me()(kt,2),Ue=Kt[0],un=Kt[1];return[Ue,un]}},{key:"getFocalDistance",value:function(){return this.viewport.getFocalDistance()}},{key:"getCameraPosition",value:function(){return this.cameraPosition}},{key:"projectFlat",value:function(kt,Kt){return this.viewport.projectFlat(kt,Kt)}},{key:"setViewProjectionMatrix",value:function(kt){this.overridedViewProjectionMatrix=kt}},{key:"jitterProjectionMatrix",value:function(kt,Kt){var Ue=le.b.fromTranslation(le.b.create(),[kt,Kt,0]);this.jitteredProjectionMatrix=le.b.multiply(le.b.create(),Ue,this.viewport.getProjectionMatrix()),this.jitteredViewProjectionMatrix=le.b.multiply(le.b.create(),this.jitteredProjectionMatrix,this.viewport.getViewMatrix())}},{key:"clearJitterProjectionMatrix",value:function(){this.jitteredProjectionMatrix=void 0,this.jitteredViewProjectionMatrix=void 0}}]),de}(),Xe))||ze),Kn,Hn,nn;function en(de,ge){var kt;if(typeof Symbol=="undefined"||de[Symbol.iterator]==null){if(Array.isArray(de)||(kt=An(de))||ge&&de&&typeof de.length=="number"){kt&&(de=kt);var Kt=0,Ue=function(){};return{s:Ue,n:function(){return Kt>=de.length?{done:!0}:{done:!1,value:de[Kt++]}},e:function(Qr){throw Qr},f:Ue}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var un=!0,Gn=!1,mr;return{s:function(){kt=de[Symbol.iterator]()},n:function(){var Qr=kt.next();return un=Qr.done,Qr},e:function(Qr){Gn=!0,mr=Qr},f:function(){try{!un&&kt.return!=null&&kt.return()}finally{if(Gn)throw mr}}}}function An(de,ge){if(!!de){if(typeof de=="string")return Nn(de,ge);var kt=Object.prototype.toString.call(de).slice(8,-1);if(kt==="Object"&&de.constructor&&(kt=de.constructor.name),kt==="Map"||kt==="Set")return Array.from(de);if(kt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(kt))return Nn(de,ge)}}function Nn(de,ge){(ge==null||ge>de.length)&&(ge=de.length);for(var kt=0,Kt=new Array(ge);kt<ge;kt++)Kt[kt]=de[kt];return Kt}var hr=(Kn=Object(e.injectable)(),Kn(Hn=(nn=function(){function de(){n()(this,de),this.container=void 0,this.controlCorners=void 0,this.controlContainer=void 0,this.scene=void 0,this.mapsService=void 0,this.controls=[],this.unAddControls=[]}return a()(de,[{key:"init",value:function(kt,Kt){this.container=kt.container,this.scene=Kt,this.mapsService=Kt.get(s.a.IMapService),this.initControlPos()}},{key:"addControl",value:function(kt,Kt){var Ue=Kt.get(s.a.IMapService);Ue.map?(kt.addTo(this.scene),this.controls.push(kt)):this.unAddControls.push(kt)}},{key:"getControlByName",value:function(kt){return this.controls.find(function(Kt){return Kt.controlOption.name===kt})}},{key:"removeControl",value:function(kt){var Kt=this.controls.indexOf(kt);return Kt>-1&&this.controls.splice(Kt,1),kt.remove(),this}},{key:"addControls",value:function(){var kt=this;this.unAddControls.forEach(function(Kt){Kt.addTo(kt.scene),kt.controls.push(Kt)}),this.unAddControls=[]}},{key:"destroy",value:function(){var kt=en(this.controls),Kt;try{for(kt.s();!(Kt=kt.n()).done;){var Ue=Kt.value;Ue.remove()}}catch(un){kt.e(un)}finally{kt.f()}this.controls=[],this.clearControlPos()}},{key:"initControlPos",value:function(){var kt=this.controlCorners={},Kt="l7-",Ue=this.controlContainer=o.a.create("div",Kt+"control-container",this.container);function un(Gn,mr){var gr=Kt+Gn+" "+Kt+mr;kt[Gn+mr]=o.a.create("div",gr,Ue)}un("top","left"),un("top","right"),un("bottom","left"),un("bottom","right")}},{key:"clearControlPos",value:function(){for(var kt in this.controlCorners)this.controlCorners[kt]&&o.a.remove(this.controlCorners[kt]);this.controlContainer&&o.a.remove(this.controlContainer),delete this.controlCorners,delete this.controlContainer}}]),de}(),nn))||Hn),fi,Oe,Ae,Jt=(fi=Object(e.injectable)(),fi(Oe=(Ae=function(){function de(){n()(this,de),this.container=void 0,this.scene=void 0,this.mapsService=void 0,this.markers=[],this.markerLayers=[],this.unAddMarkers=[],this.unAddMarkerLayers=[]}return a()(de,[{key:"addMarkerLayer",value:function(kt){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markerLayers.push(kt),kt.addTo(this.scene)):this.unAddMarkerLayers.push(kt)}},{key:"removeMarkerLayer",value:function(kt){kt.destroy(),this.markerLayers.indexOf(kt);var Kt=this.markerLayers.indexOf(kt);Kt>-1&&this.markerLayers.splice(Kt,1)}},{key:"addMarker",value:function(kt){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markers.push(kt),kt.addTo(this.scene)):this.unAddMarkers.push(kt)}},{key:"addMarkers",value:function(){var kt=this;this.unAddMarkers.forEach(function(Kt){Kt.addTo(kt.scene),kt.markers.push(Kt)}),this.unAddMarkers=[]}},{key:"addMarkerLayers",value:function(){var kt=this;this.unAddMarkerLayers.forEach(function(Kt){kt.markerLayers.push(Kt),Kt.addTo(kt.scene)}),this.unAddMarkers=[]}},{key:"removeMarker",value:function(kt){kt.remove(),this.markers.indexOf(kt);var Kt=this.markers.indexOf(kt);Kt>-1&&this.markers.splice(Kt,1)}},{key:"removeAllMarkers",value:function(){this.destroy()}},{key:"init",value:function(kt){this.scene=kt,this.mapsService=kt.get(s.a.IMapService)}},{key:"destroy",value:function(){this.markers.forEach(function(kt){kt.remove()}),this.markers=[],this.markerLayers.forEach(function(kt){kt.destroy()}),this.markerLayers=[]}},{key:"removeMakerLayerMarker",value:function(kt){kt.destroy()}}]),de}(),Ae))||Oe),ve,Vt,ie,Ce=(ve=Object(e.injectable)(),ve(Vt=(ie=function(){function de(){n()(this,de),this.scene=void 0,this.popup=void 0,this.mapsService=void 0,this.unAddPopup=void 0}return a()(de,[{key:"removePopup",value:function(kt){kt.remove()}},{key:"destroy",value:function(){this.popup.remove()}},{key:"addPopup",value:function(kt){this.popup&&this.popup.remove(),this.mapsService.map&&this.mapsService.getMarkerContainer()?(kt.addTo(this.scene),this.popup=kt):this.unAddPopup=kt}},{key:"initPopup",value:function(){this.unAddPopup&&(this.addPopup(this.unAddPopup),this.unAddPopup=null)}},{key:"init",value:function(kt){this.scene=kt,this.mapsService=kt.get(s.a.IMapService)}}]),de}(),ie))||Vt),ue=L("QkVN"),xe=L.n(ue),$e={MapToken:"\u60A8\u6B63\u5728\u4F7F\u7528 Demo\u6D4B\u8BD5\u5730\u56FEtoken\uFF0C\u5982\u679C\u751F\u4EA7\u73AF\u5883\u4E2D\u4F7F\u7528\u53BB\u5BF9\u5E94\u5730\u56FE\u8BF7\u6CE8\u518CToken",SDK:"\u8BF7\u786E\u8BA4\u5F15\u5165\u4E86mapbox-gl api\u4E14\u5728L7\u4E4B\u524D\u5F15\u5165"},Fn=$e,rr,En,Pn;function Er(de,ge){var kt=Object.keys(de);if(Object.getOwnPropertySymbols){var Kt=Object.getOwnPropertySymbols(de);ge&&(Kt=Kt.filter(function(Ue){return Object.getOwnPropertyDescriptor(de,Ue).enumerable})),kt.push.apply(kt,Kt)}return kt}function Pr(de){for(var ge=1;ge<arguments.length;ge++){var kt=arguments[ge]!=null?arguments[ge]:{};ge%2?Er(Object(kt),!0).forEach(function(Kt){r()(de,Kt,kt[Kt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(de,Object.getOwnPropertyDescriptors(kt)):Er(Object(kt)).forEach(function(Kt){Object.defineProperty(de,Kt,Object.getOwnPropertyDescriptor(kt,Kt))})}return de}var ln={id:"map",logoPosition:"bottomleft",logoVisible:!0,antialias:!0,preserveDrawingBuffer:!1,pickBufferScale:1,fitBoundsOptions:{animate:!1}},Cr={colors:["rgb(103,0,31)","rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(247,247,247)","rgb(209,229,240)","rgb(146,197,222)","rgb(67,147,195)","rgb(33,102,172)","rgb(5,48,97)"],size:10,shape:"circle",scales:{},shape2d:["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],shape3d:["cylinder","triangleColumn","hexagonColumn","squareColumn"],minZoom:-1,maxZoom:24,visible:!0,autoFit:!1,pickingBuffer:0,enablePropagation:!1,zIndex:0,blend:"normal",pickedFeatureID:-1,enableMultiPassRenderer:!1,enablePicking:!0,active:!1,activeColor:"#2f54eb",enableHighlight:!1,enableSelect:!1,highlightColor:"#2f54eb",selectColor:"blue",enableTAA:!1,jitterScale:1,enableLighting:!1,animateOption:{enable:!1,interval:.2,duration:4,trailLength:.15}},Ar=(rr=Object(e.injectable)(),rr(En=(Pn=function(){function de(){n()(this,de),this.sceneConfigCache={},this.layerConfigCache={}}return a()(de,[{key:"getSceneConfig",value:function(kt){return this.sceneConfigCache[kt]}},{key:"getSceneWarninfo",value:function(kt){return Fn[kt]}},{key:"setSceneConfig",value:function(kt,Kt){this.sceneConfigCache[kt]=Pr(Pr({},ln),Kt)}},{key:"getLayerConfig",value:function(kt){return this.layerConfigCache[kt]}},{key:"setLayerConfig",value:function(kt,Kt,Ue){this.layerConfigCache[Kt]=Pr({},xe()({},this.sceneConfigCache[kt],Cr,Ue))}},{key:"clean",value:function(){this.sceneConfigCache={},this.layerConfigCache={}}}]),de}(),Pn))||En),je=L("yG8O"),We=L.n(je),Ye=L("U+yc"),fn=L.n(Ye),mn=L("1ABj"),jn=Math.PI/180,bn=512,Ln=4003e4;function nr(de){var ge=de.latitude,kt=ge===void 0?0:ge,Kt=de.zoom,Ue=Kt===void 0?0:Kt,un=de.scale,Gn=de.highPrecision,mr=Gn===void 0?!1:Gn,gr=de.flipY,Qr=gr===void 0?!1:gr;un=un!==void 0?un:Math.pow(2,Ue);var wi={},$i=bn*un,ha=Math.cos(kt*jn),xa=$i/360,ao=xa/ha,vo=$i/Ln/ha;if(wi.pixelsPerMeter=[vo,-vo,vo],wi.metersPerPixel=[1/vo,-1/vo,1/vo],wi.pixelsPerDegree=[xa,-ao,vo],wi.degreesPerPixel=[1/xa,-1/ao,1/vo],mr){var ts=jn*Math.tan(kt*jn)/ha,Ho=xa*ts/2,Gs=$i/Ln*ts,ru=Gs/ao*vo;wi.pixelsPerDegree2=[0,-Ho,Gs],wi.pixelsPerMeter2=[ru,0,ru],Qr&&(wi.pixelsPerDegree2[1]=-wi.pixelsPerDegree2[1],wi.pixelsPerMeter2[1]=-wi.pixelsPerMeter2[1])}return Qr&&(wi.pixelsPerMeter[1]=-wi.pixelsPerMeter[1],wi.metersPerPixel[1]=-wi.metersPerPixel[1],wi.pixelsPerDegree[1]=-wi.pixelsPerDegree[1],wi.degreesPerPixel[1]=-wi.degreesPerPixel[1]),wi}var Yn=L("HthE"),Mn,Rr,pr,zr,Pi,Oa,Ua=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],ro=(Mn=Object(e.injectable)(),Rr=Object(e.inject)(s.a.ICameraService),Mn(pr=(zr=(Oa=function(){function de(){n()(this,de),this.needRefresh=!0,We()(this,"cameraService",Pi,this),this.coordinateSystem=void 0,this.viewportCenter=void 0,this.viewportCenterProjection=void 0,this.pixelsPerDegree=void 0,this.pixelsPerDegree2=void 0,this.pixelsPerMeter=void 0}return a()(de,[{key:"refresh",value:function(){var kt=this.cameraService.getZoom(),Kt=this.cameraService.getZoomScale(),Ue=this.cameraService.getCenter(),un=nr({latitude:Ue[1],zoom:kt}),Gn=un.pixelsPerMeter,mr=un.pixelsPerDegree;this.viewportCenter=Ue,this.viewportCenterProjection=[0,0,0,0],this.pixelsPerMeter=Gn,this.pixelsPerDegree=mr,this.pixelsPerDegree2=[0,0,0],this.coordinateSystem===Yn.a.LNGLAT||this.coordinateSystem===Yn.a.P20?this.cameraService.setViewProjectionMatrix(void 0):this.coordinateSystem===Yn.a.LNGLAT_OFFSET?this.calculateLnglatOffset(Ue,kt):this.coordinateSystem===Yn.a.P20_OFFSET&&this.calculateLnglatOffset(Ue,kt,Kt,!0),this.needRefresh=!1}},{key:"getCoordinateSystem",value:function(){return this.coordinateSystem}},{key:"setCoordinateSystem",value:function(kt){this.coordinateSystem=kt}},{key:"getViewportCenter",value:function(){return this.viewportCenter}},{key:"getViewportCenterProjection",value:function(){return this.viewportCenterProjection}},{key:"getPixelsPerDegree",value:function(){return this.pixelsPerDegree}},{key:"getPixelsPerDegree2",value:function(){return this.pixelsPerDegree2}},{key:"getPixelsPerMeter",value:function(){return this.pixelsPerMeter}},{key:"calculateLnglatOffset",value:function(kt,Kt,Ue,un){var Gn=nr({latitude:kt[1],zoom:Kt,scale:Ue,flipY:un,highPrecision:!0}),mr=Gn.pixelsPerMeter,gr=Gn.pixelsPerDegree,Qr=Gn.pixelsPerDegree2,wi=this.cameraService.getViewMatrix(),$i=this.cameraService.getProjectionMatrix(),ha=le.b.multiply([],$i,wi),xa=this.cameraService.projectFlat([Math.fround(kt[0]),Math.fround(kt[1])],Math.pow(2,Kt));this.viewportCenterProjection=le.e.transformMat4([],[xa[0],xa[1],0,1],ha),wi=this.cameraService.getViewMatrixUncentered()||wi,ha=le.b.multiply([],$i,wi),ha=le.b.multiply([],ha,Ua),this.cameraService.setViewProjectionMatrix(ha),this.pixelsPerMeter=mr,this.pixelsPerDegree=gr,this.pixelsPerDegree2=Qr}}]),de}(),Oa),Pi=fn()(zr.prototype,"cameraService",[Rr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zr))||pr),Ko=L("PJYZ"),_a=L.n(Ko),co=L("yLV6"),Xo=L.n(co),io=L("V1cb"),To,ds,La,Vo,Bo,lu,Jo,iu;function $s(de){var ge=Ne();return function(){var Kt=nt()(de),Ue;if(ge){var un=nt()(this).constructor;Ue=Reflect.construct(Kt,arguments,un)}else Ue=Kt.apply(this,arguments);return pt()(this,Ue)}}function Ne(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(de){return!1}}var oe={panstart:"dragstart",panmove:"dragging",panend:"dragend",pancancel:"dragcancle"},Wt=(To=Object(e.injectable)(),ds=Object(e.inject)(s.a.IMapService),La=Object(e.inject)(s.a.ILogService),To(Vo=(Bo=(iu=function(de){et()(kt,de);var ge=$s(kt);function kt(){var Kt;n()(this,kt);for(var Ue=arguments.length,un=new Array(Ue),Gn=0;Gn<Ue;Gn++)un[Gn]=arguments[Gn];return Kt=ge.call.apply(ge,[this].concat(un)),We()(Kt,"mapService",lu,_a()(Kt)),We()(Kt,"logger",Jo,_a()(Kt)),Kt.hammertime=void 0,Kt.lastClickTime=0,Kt.lastClickXY=[-1,-1],Kt.clickTimer=void 0,Kt.$containter=void 0,Kt.onDrag=function(mr){var gr=Kt.interactionEvent(mr);gr.type=oe[gr.type],Kt.emit(io.a.Drag,gr)},Kt.onHammer=function(mr){mr.srcEvent.stopPropagation();var gr=Kt.interactionEvent(mr);Kt.emit(io.a.Hover,gr)},Kt.onTouch=function(mr){var gr=mr.touches[0];Kt.onHover({x:gr.pageX,y:gr.pageY,type:"touch"})},Kt.onHover=function(mr){var gr=mr.clientX,Qr=mr.clientY,wi=gr,$i=Qr,ha=mr.type,xa=Kt.mapService.getMapContainer();if(xa){var ao=xa.getBoundingClientRect(),vo=ao.top,ts=ao.left;wi=wi-ts-xa.clientLeft,$i=$i-vo-xa.clientTop}var Ho=Kt.mapService.containerToLngLat([wi,$i]);if(ha==="click"){if("ontouchstart"in document.documentElement)return;Kt.isDoubleTap(wi,$i,Ho);return}if(ha==="touch"){Kt.isDoubleTap(wi,$i,Ho);return}ha!=="click"&&ha!=="dblclick"&&Kt.emit(io.a.Hover,{x:wi,y:$i,lngLat:Ho,type:ha,target:mr})},Kt}return a()(kt,[{key:"init",value:function(){this.addEventListenerOnMap(),this.$containter=this.mapService.getMapContainer()}},{key:"destroy",value:function(){this.hammertime&&this.hammertime.destroy(),this.removeEventListenerOnMap(),this.off(io.a.Hover)}},{key:"triggerHover",value:function(Ue){var un=Ue.x,Gn=Ue.y;this.emit(io.a.Hover,{x:un,y:Gn})}},{key:"triggerSelect",value:function(Ue){this.emit(io.a.Select,{featureId:Ue})}},{key:"triggerActive",value:function(Ue){this.emit(io.a.Active,{featureId:Ue})}},{key:"addEventListenerOnMap",value:function(){var Ue=this.mapService.getMapContainer();if(Ue){var un=new Xo.a.Manager(Ue);un.add(new Xo.a.Tap({event:"dblclick",taps:2})),un.add(new Xo.a.Tap({event:"click"})),un.add(new Xo.a.Pan({threshold:0,pointers:0})),un.add(new Xo.a.Press({})),un.on("dblclick click",this.onHammer),un.on("panstart panmove panend pancancel",this.onDrag),Ue.addEventListener("mousemove",this.onHover),Ue.addEventListener("mousedown",this.onHover,!0),Ue.addEventListener("mouseup",this.onHover),Ue.addEventListener("contextmenu",this.onHover),this.hammertime=un,this.logger.debug("add event listeners on canvas")}}},{key:"removeEventListenerOnMap",value:function(){var Ue=this.mapService.getMapContainer();Ue&&(Ue.removeEventListener("mousemove",this.onHover),this.hammertime.off("panstart panmove panend pancancel",this.onDrag),Ue.removeEventListener("mousedown",this.onHover),Ue.removeEventListener("mouseup",this.onHover),Ue.removeEventListener("contextmenu",this.onHover))}},{key:"interactionEvent",value:function(Ue){var un=Ue.type,Gn=Ue.pointerType,mr,gr;Gn==="touch"?(gr=Math.floor(Ue.pointers[0].clientY),mr=Math.floor(Ue.pointers[0].clientX)):(gr=Math.floor(Ue.srcEvent.y),mr=Math.floor(Ue.srcEvent.x));var Qr=this.mapService.getMapContainer();if(Qr){var wi=Qr.getBoundingClientRect(),$i=wi.top,ha=wi.left;mr-=ha,gr-=$i}var xa=this.mapService.containerToLngLat([mr,gr]);return{x:mr,y:gr,lngLat:xa,type:un,target:Ue.srcEvent}}},{key:"isDoubleTap",value:function(Ue,un,Gn){var mr=this,gr=new Date().getTime(),Qr="click";gr-this.lastClickTime<400&&Math.abs(this.lastClickXY[0]-Ue)<10&&Math.abs(this.lastClickXY[1]-un)<10?(this.lastClickTime=0,this.lastClickXY=[-1,-1],this.clickTimer&&clearTimeout(this.clickTimer),Qr="dblclick",this.emit(io.a.Hover,{x:Ue,y:un,lngLat:Gn,type:Qr})):(this.lastClickTime=gr,this.lastClickXY=[Ue,un],this.clickTimer=setTimeout(function(){Qr="click",mr.emit(io.a.Hover,{x:Ue,y:un,lngLat:Gn,type:Qr})},400))}}]),kt}(T.a),iu),lu=fn()(Bo.prototype,"mapService",[ds],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jo=fn()(Bo.prototype,"logger",[La],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bo))||Vo),Ee=L("yXPU"),an=L.n(Ee),Un=L("o0o1"),qn=L.n(Un),kn=L("o+pz"),Xr,Si,Ti,ki,sa,$a,ba,bo,Fa,oo,Eo,Qa;function Ao(de,ge){var kt=Object.keys(de);if(Object.getOwnPropertySymbols){var Kt=Object.getOwnPropertySymbols(de);ge&&(Kt=Kt.filter(function(Ue){return Object.getOwnPropertyDescriptor(de,Ue).enumerable})),kt.push.apply(kt,Kt)}return kt}function as(de){for(var ge=1;ge<arguments.length;ge++){var kt=arguments[ge]!=null?arguments[ge]:{};ge%2?Ao(Object(kt),!0).forEach(function(Kt){r()(de,Kt,kt[Kt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(de,Object.getOwnPropertyDescriptors(kt)):Ao(Object(kt)).forEach(function(Kt){Object.defineProperty(de,Kt,Object.getOwnPropertyDescriptor(kt,Kt))})}return de}var No=(Xr=Object(e.injectable)(),Si=Object(e.inject)(s.a.IRendererService),Ti=Object(e.inject)(s.a.IGlobalConfigService),ki=Object(e.inject)(s.a.IInteractionService),sa=Object(e.inject)(s.a.ILayerService),Xr($a=(ba=(Qa=function(){function de(){var ge=this;n()(this,de),We()(this,"rendererService",bo,this),We()(this,"configService",Fa,this),We()(this,"interactionService",oo,this),We()(this,"layerService",Eo,this),this.pickingFBO=void 0,this.width=0,this.height=0,this.alreadyInPicking=!1,this.pickBufferScale=1,this.pickFromPickingFBO=function(kt,Kt){var Ue,un=Kt.x,Gn=Kt.y,mr=Kt.lngLat,gr=Kt.type,Qr=Kt.target,wi=!1,$i=ge.rendererService,ha=$i.getViewportSize,xa=$i.readPixels,ao=$i.getContainer,vo=ao().getBoundingClientRect(),ts=vo.width,Ho=vo.height;ts*=o.a.DPR,Ho*=o.a.DPR;var Gs=kt.getLayerConfig(),ru=Gs.enableHighlight,xu=Gs.enableSelect,_s=un*o.a.DPR,_u=Gn*o.a.DPR;if(_s>ts-1*o.a.DPR||_s<0||_u>Ho-1*o.a.DPR||_u<0)return!1;var mo;if(mo=xa({x:Math.floor(_s/ge.pickBufferScale),y:Math.floor((Ho-(Gn+1)*o.a.DPR)/ge.pickBufferScale),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:ge.pickingFBO}),mo[0]!==0||mo[1]!==0||mo[2]!==0){var fu=Object(o.k)(mo),xl=kt.getSource().getFeatureById(fu);fu!==kt.getCurrentPickId()&&gr==="mousemove"&&(gr="mouseenter");var ss={x:un,y:Gn,type:gr,lngLat:mr,featureId:fu,feature:xl,target:Qr};xl&&(wi=!0,kt.setCurrentPickId(fu),ge.triggerHoverOnLayer(kt,ss))}else{var Ls={x:un,y:Gn,lngLat:mr,type:kt.getCurrentPickId()!==null&&gr==="mousemove"?"mouseout":"un"+gr,featureId:null,target:Qr,feature:null};ge.triggerHoverOnLayer(kt,as(as({},Ls),{},{type:"unpick"})),ge.triggerHoverOnLayer(kt,Ls),kt.setCurrentPickId(null)}if(ru&&ge.highlightPickedFeature(kt,mo),xu&&gr==="click"&&((Ue=mo)===null||Ue===void 0?void 0:Ue.toString())!==[0,0,0,0].toString()){var Ka=Object(o.k)(mo);kt.getCurrentSelectedId()===null||Ka!==kt.getCurrentSelectedId()?(ge.selectFeature(kt,mo),kt.setCurrentSelectedId(Ka)):(ge.selectFeature(kt,new Uint8Array([0,0,0,0])),kt.setCurrentSelectedId(null))}return wi}}return a()(de,[{key:"init",value:function(kt){var Kt=this.rendererService,Ue=Kt.createTexture2D,un=Kt.createFramebuffer,Gn=Kt.getViewportSize,mr=Kt.getContainer,gr=mr().getBoundingClientRect(),Qr=gr.width,wi=gr.height;Qr*=o.a.DPR,wi*=o.a.DPR,this.pickBufferScale=this.configService.getSceneConfig(kt).pickBufferScale||1,this.pickingFBO=un({color:Ue({width:Math.round(Qr/this.pickBufferScale),height:Math.round(wi/this.pickBufferScale),wrapS:kn.a.CLAMP_TO_EDGE,wrapT:kn.a.CLAMP_TO_EDGE})}),this.interactionService.on(io.a.Hover,this.pickingAllLayer.bind(this))}},{key:"boxPickLayer",value:function(){var ge=an()(qn.a.mark(function Kt(Ue,un,Gn){var mr=this,gr,Qr,wi,$i;return qn.a.wrap(function(xa){for(;;)switch(xa.prev=xa.next){case 0:gr=this.rendererService,Qr=gr.useFramebuffer,wi=gr.clear,$i=gr.getContainer,this.resizePickingFBO(),Qr(this.pickingFBO,function(){wi({framebuffer:mr.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),Ue.hooks.beforePickingEncode.call(),Ue.renderModels(),Ue.hooks.afterPickingEncode.call();var ao=mr.pickBox(Ue,un);Gn(ao)});case 3:case"end":return xa.stop()}},Kt,this)}));function kt(Kt,Ue,un){return ge.apply(this,arguments)}return kt}()},{key:"pickBox",value:function(kt,Kt){var Ue=this,un=Kt.map(function(Ls){var Ka=Ls<0?0:Ls;return Math.floor(Ka*o.a.DPR/Ue.pickBufferScale)}),Gn=me()(un,4),mr=Gn[0],gr=Gn[1],Qr=Gn[2],wi=Gn[3],$i=this.rendererService,ha=$i.getViewportSize,xa=$i.readPixels,ao=$i.getContainer,vo=ao().getBoundingClientRect(),ts=vo.width,Ho=vo.height;if(ts*=o.a.DPR,Ho*=o.a.DPR,mr>(ts-1)*o.a.DPR/this.pickBufferScale||Qr<0||gr>(Ho-1)*o.a.DPR/this.pickBufferScale||wi<0)return[];var Gs,ru=Math.min(ts/this.pickBufferScale,Qr)-mr,xu=Math.min(Ho/this.pickBufferScale,wi)-gr;Gs=xa({x:mr,y:Math.floor(Ho/this.pickBufferScale-(wi+1)),width:ru,height:xu,data:new Uint8Array(ru*xu*4),framebuffer:this.pickingFBO});for(var _s=[],_u={},mo=0;mo<Gs.length/4;mo=mo+1){var fu=Gs.slice(mo*4,mo*4+4),xl=Object(o.k)(fu);if(xl!==-1&&!_u[xl]){var ss=kt.getSource().getFeatureById(xl);_s.push(ss),_u[xl]=!0}}return _s}},{key:"pickingAllLayer",value:function(){var ge=an()(qn.a.mark(function Kt(Ue){return qn.a.wrap(function(Gn){for(;;)switch(Gn.prev=Gn.next){case 0:if(!(this.alreadyInPicking||this.layerService.alreadyInRendering)){Gn.next=2;break}return Gn.abrupt("return");case 2:return this.alreadyInPicking=!0,Gn.next=5,this.pickingLayers(Ue);case 5:this.layerService.renderLayers(),this.alreadyInPicking=!1;case 7:case"end":return Gn.stop()}},Kt,this)}));function kt(Kt){return ge.apply(this,arguments)}return kt}()},{key:"resizePickingFBO",value:function(){var kt=this.rendererService.getContainer,Kt=kt().getBoundingClientRect(),Ue=Kt.width,un=Kt.height;Ue*=o.a.DPR,un*=o.a.DPR,(this.width!==Ue||this.height!==un)&&(this.pickingFBO.resize({width:Math.round(Ue/this.pickBufferScale),height:Math.round(un/this.pickBufferScale)}),this.width=Ue,this.height=un)}},{key:"pickingLayers",value:function(){var ge=an()(qn.a.mark(function Kt(Ue){var un=this,Gn,mr,gr,Qr,wi;return qn.a.wrap(function(ha){for(;;)switch(ha.prev=ha.next){case 0:Gn=this.rendererService,mr=Gn.getViewportSize,gr=Gn.useFramebuffer,Qr=Gn.clear,wi=Gn.getContainer,this.resizePickingFBO(),gr(this.pickingFBO,function(){var xa=un.layerService.getLayers();xa.filter(function(ao){return ao.needPick(Ue.type)}).reverse().some(function(ao){Qr({framebuffer:un.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),ao.hooks.beforePickingEncode.call(),ao.renderModels(),ao.hooks.afterPickingEncode.call();var vo=un.pickFromPickingFBO(ao,Ue);return vo&&!ao.getLayerConfig().enablePropagation})});case 3:case"end":return ha.stop()}},Kt,this)}));function kt(Kt){return ge.apply(this,arguments)}return kt}()},{key:"triggerHoverOnLayer",value:function(kt,Kt){kt.emit(Kt.type,Kt)}},{key:"highlightPickedFeature",value:function(kt,Kt){var Ue=me()(Kt,3),un=Ue[0],Gn=Ue[1],mr=Ue[2];kt.hooks.beforeHighlight.call([un,Gn,mr])}},{key:"selectFeature",value:function(kt,Kt){var Ue=me()(Kt,3),un=Ue[0],Gn=Ue[1],mr=Ue[2];kt.hooks.beforeSelect.call([un,Gn,mr])}}]),de}(),Qa),bo=fn()(ba.prototype,"rendererService",[Si],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fa=fn()(ba.prototype,"configService",[Ti],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oo=fn()(ba.prototype,"interactionService",[ki],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Eo=fn()(ba.prototype,"layerService",[sa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ba))||$a),xs=function(){function de(){var ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;n()(this,de),this.autoStart=void 0,this.startTime=0,this.oldTime=0,this.running=!1,this.elapsedTime=0,this.autoStart=ge}return a()(de,[{key:"start",value:function(){this.startTime=(typeof performance=="undefined"?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var kt=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var Kt=(typeof performance=="undefined"?Date:performance).now();kt=(Kt-this.oldTime)/1e3,this.oldTime=Kt,this.elapsedTime+=kt}return kt}}]),de}(),Co,qa,Ts,ls,wa,yn,dr,kr,Ui=(Co=Object(e.injectable)(),qa=Object(e.inject)(s.a.IRendererService),Ts=Object(e.inject)(s.a.IGlobalConfigService),Co(ls=(wa=(kr=function(){function de(){n()(this,de),this.clock=new xs,this.alreadyInRendering=!1,this.layers=[],this.layerRenderID=void 0,this.sceneInited=!1,this.animateInstanceCount=0,We()(this,"renderService",yn,this),We()(this,"configService",dr,this)}return a()(de,[{key:"add",value:function(kt){this.sceneInited&&kt.init(),this.layers.push(kt)}},{key:"initLayers",value:function(){this.sceneInited=!0,this.layers.forEach(function(kt){kt.inited||kt.init()})}},{key:"getLayers",value:function(){return this.layers}},{key:"getLayer",value:function(kt){return this.layers.find(function(Kt){return Kt.id===kt})}},{key:"getLayerByName",value:function(kt){return this.layers.find(function(Kt){return Kt.name===kt})}},{key:"remove",value:function(kt){var Kt=this.layers.indexOf(kt);Kt>-1&&this.layers.splice(Kt,1),kt.emit("remove",null),kt.destroy(),this.renderLayers()}},{key:"removeAllLayers",value:function(){this.destroy()}},{key:"renderLayers",value:function(){this.alreadyInRendering||(this.alreadyInRendering=!0,this.clear(),this.updateRenderOrder(),this.layers.filter(function(kt){return kt.inited}).filter(function(kt){return kt.isVisible()}).forEach(function(kt){kt.hooks.beforeRenderData.call(),kt.hooks.beforeRender.call(),kt.render(),kt.hooks.afterRender.call()}),this.alreadyInRendering=!1)}},{key:"updateRenderOrder",value:function(){this.layers.sort(function(kt,Kt){return kt.zIndex-Kt.zIndex})}},{key:"destroy",value:function(){this.layers.forEach(function(kt){return kt.destroy()}),this.layers=[],this.renderLayers()}},{key:"startAnimate",value:function(){this.animateInstanceCount++==0&&(this.clock.start(),this.runRender())}},{key:"stopAnimate",value:function(){--this.animateInstanceCount==0&&(this.stopRender(),this.clock.stop())}},{key:"clear",value:function(){this.renderService.clear({color:[0,0,0,0],depth:1,stencil:0,framebuffer:null})}},{key:"runRender",value:function(){this.renderLayers(),this.layerRenderID=requestAnimationFrame(this.runRender.bind(this))}},{key:"stopRender",value:function(){cancelAnimationFrame(this.layerRenderID)}}]),de}(),kr),yn=fn()(wa.prototype,"renderService",[qa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dr=fn()(wa.prototype,"configService",[Ts],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wa))||ls),Ja=L("QILm"),So=L.n(Ja),po=L("RIqP"),ea=L.n(po),to=L("J2iB"),bs=L.n(to),Es=function(){function de(ge){var kt=this;n()(this,de),this.name=void 0,this.type=void 0,this.scale=void 0,this.descriptor=void 0,this.featureBufferLayout=[],this.needRescale=!1,this.needRemapping=!1,this.needRegenerateVertices=!1,this.featureRange={startIndex:0,endIndex:Infinity},this.vertexAttribute=void 0,this.defaultCallback=function(Kt){if(Kt.length===0){var Ue;return((Ue=kt.scale)===null||Ue===void 0?void 0:Ue.defaultValues)||[]}return Kt.map(function(un,Gn){var mr,gr=(mr=kt.scale)===null||mr===void 0?void 0:mr.scalers[Gn].func,Qr=gr(un);return Qr})},this.setProps(ge)}return a()(de,[{key:"setProps",value:function(kt){Object.assign(this,kt)}},{key:"mapping",value:function(kt){var Kt;if((Kt=this.scale)!==null&&Kt!==void 0&&Kt.callback){var Ue,un=(Ue=this.scale)===null||Ue===void 0?void 0:Ue.callback.apply(Ue,ea()(kt));if(!bs()(un))return[un]}return this.defaultCallback(kt)}},{key:"resetDescriptor",value:function(){this.descriptor&&(this.descriptor.buffer.data=[])}}]),de}(),ka,bu,Wo,As,Qs,vs,ps;function cs(de,ge){var kt=Object.keys(de);if(Object.getOwnPropertySymbols){var Kt=Object.getOwnPropertySymbols(de);ge&&(Kt=Kt.filter(function(Ue){return Object.getOwnPropertyDescriptor(de,Ue).enumerable})),kt.push.apply(kt,Kt)}return kt}function gs(de){for(var ge=1;ge<arguments.length;ge++){var kt=arguments[ge]!=null?arguments[ge]:{};ge%2?cs(Object(kt),!0).forEach(function(Kt){r()(de,Kt,kt[Kt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(de,Object.getOwnPropertyDescriptors(kt)):cs(Object(kt)).forEach(function(Kt){Object.defineProperty(de,Kt,Object.getOwnPropertyDescriptor(kt,Kt))})}return de}function Cs(de){return new Promise(function(ge){return setTimeout(ge,de)})}var Pu=(ka={},r()(ka,kn.a.FLOAT,4),r()(ka,kn.a.UNSIGNED_BYTE,1),r()(ka,kn.a.UNSIGNED_SHORT,2),ka),ju=(bu=Object(e.injectable)(),Wo=Object(e.inject)(s.a.IRendererService),bu(As=(Qs=(ps=function(){function de(){n()(this,de),this.attributesAndIndices=void 0,We()(this,"rendererService",vs,this),this.attributes=[],this.triangulation=void 0,this.featureLayout={sizePerElement:0,elements:[]}}return a()(de,[{key:"registerStyleAttribute",value:function(kt){var Kt=this.getLayerStyleAttribute(kt.name||"");return Kt?Kt.setProps(kt):(Kt=new Es(kt),this.attributes.push(Kt)),Kt}},{key:"updateStyleAttribute",value:function(kt,Kt,Ue){var un=this.getLayerStyleAttribute(kt);un||(un=this.registerStyleAttribute(gs(gs({},Kt),{},{name:kt})));var Gn=Kt.scale;Gn&&un&&(un.scale=Gn,un.needRescale=!0,un.needRemapping=!0,un.needRegenerateVertices=!0,Ue&&Ue.featureRange&&(un.featureRange=Ue.featureRange))}},{key:"getLayerStyleAttributes",value:function(){return this.attributes}},{key:"getLayerStyleAttribute",value:function(kt){return this.attributes.find(function(Kt){return Kt.name===kt})}},{key:"getLayerAttributeScale",value:function(kt){var Kt,Ue=this.getLayerStyleAttribute(kt),un=Ue==null||(Kt=Ue.scale)===null||Kt===void 0?void 0:Kt.scalers;return un&&un[0]?un[0].func:null}},{key:"updateAttributeByFeatureRange",value:function(kt,Kt){var Ue=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,un=arguments.length>3?arguments[3]:void 0,Gn=this.attributes.find(function(xu){return xu.name===kt});if(Gn&&Gn.descriptor){var mr=Gn.descriptor,gr=mr.update,Qr=mr.buffer,wi=mr.size,$i=wi===void 0?0:wi,ha=Pu[Qr.type||kn.a.FLOAT];if(gr){var xa=this.featureLayout,ao=xa.elements,vo=xa.sizePerElement,ts=ao.slice(Ue,un);if(!ts.length)return;var Ho=ts[0].offset,Gs=Ho*$i*ha,ru=ts.map(function(xu,_s){for(var _u=xu.featureIdx,mo=xu.vertices,fu=xu.normals,xl=mo.length/vo,ss=[],Ls=0;Ls<xl;Ls++){var Ka=fu?fu.slice(Ls*3,Ls*3+3):[];ss.push.apply(ss,ea()(gr(Kt[_u],_u,mo.slice(Ls*vo,Ls*vo+vo),_s,Ka)))}return ss}).reduce(function(xu,_s){return xu.push.apply(xu,ea()(_s)),xu},[]);Gn.vertexAttribute.updateBuffer({data:ru,offset:Gs})}}}},{key:"createAttributesAndIndices",value:function(kt,Kt){var Ue=this;this.featureLayout={sizePerElement:0,elements:[]},Kt&&(this.triangulation=Kt);var un=this.attributes.map(function(Ho){return Ho.resetDescriptor(),Ho.descriptor}),Gn=0,mr=[],gr=[],Qr=[],wi=3;kt.forEach(function(Ho,Gs){var ru=Ue.triangulation(Ho),xu=ru.indices,_s=ru.vertices,_u=ru.normals,mo=ru.size;xu.forEach(function(Ls){gr.push(Ls+Gn)}),wi=mo;var fu=_s.length/mo;Ue.featureLayout.sizePerElement=wi,Ue.featureLayout.elements.push({featureIdx:Gs,vertices:_s,normals:_u,offset:Gn}),Gn+=fu;for(var xl=function(Ka){var Zu=(_u==null?void 0:_u.slice(Ka*3,Ka*3+3))||[],Yc=_s.slice(Ka*mo,Ka*mo+mo);un.forEach(function(pf,dh){if(pf&&pf.update){var Rf;(Rf=pf.buffer.data).push.apply(Rf,ea()(pf.update(Ho,Gs,Yc,Ka,Zu)))}})},ss=0;ss<fu;ss++)xl(ss)});var $i=this.rendererService,ha=$i.createAttribute,xa=$i.createBuffer,ao=$i.createElements,vo={};un.forEach(function(Ho,Gs){if(Ho){var ru=Ho.buffer,xu=Ho.update,_s=Ho.name,_u=So()(Ho,["buffer","update","name"]),mo=ha(gs({buffer:xa(ru)},_u));vo[Ho.name||""]=mo,Ue.attributes[Gs].vertexAttribute=mo}});var ts=ao({data:gr,type:kn.a.UNSIGNED_INT,count:gr.length});return this.attributesAndIndices={attributes:vo,elements:ts},this.attributesAndIndices}},{key:"clearAllAttributes",value:function(){var kt;this.attributes.forEach(function(Kt){Kt.vertexAttribute&&Kt.vertexAttribute.destroy()}),(kt=this.attributesAndIndices)===null||kt===void 0||kt.elements.destroy(),this.attributes=[]}}]),de}(),ps),vs=fn()(Qs.prototype,"rendererService",[Wo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qs))||As),fo=L("U8pU"),Ns=L("KQm4"),Bu=L("rePB"),ll=L("1OyB"),cl=L("vuIU"),Xu=L("5ku3"),Io=typeof __VERSION__!="undefined"?__VERSION__:"untranspiled source",Ra=Object(Xu.a)();function Ea(de){try{var ge=window[de],kt="__storage_test__";return ge.setItem(kt,kt),ge.removeItem(kt),ge}catch(Kt){return null}}var Ro=function(){function de(ge,kt){var Kt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";Object(ll.a)(this,de),this.storage=Ea(Kt),this.id=ge,this.config={},Object.assign(this.config,kt),this._loadConfiguration()}return Object(cl.a)(de,[{key:"getConfiguration",value:function(){return this.config}},{key:"setConfiguration",value:function(kt){return this.config={},this.updateConfiguration(kt)}},{key:"updateConfiguration",value:function(kt){if(Object.assign(this.config,kt),this.storage){var Kt=JSON.stringify(this.config);this.storage.setItem(this.id,Kt)}return this}},{key:"_loadConfiguration",value:function(){var kt={};if(this.storage){var Kt=this.storage.getItem(this.id);kt=Kt?JSON.parse(Kt):{}}return Object.assign(this.config,kt),this}}]),de}();function pu(de){var ge;return de<10?ge="".concat(de.toFixed(2),"ms"):de<100?ge="".concat(de.toFixed(1),"ms"):de<1e3?ge="".concat(de.toFixed(0),"ms"):ge="".concat((de/1e3).toFixed(2),"s"),ge}function Ml(de){var ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8,kt=Math.max(ge-de.length,0);return"".concat(" ".repeat(kt)).concat(de)}function Fs(de){var ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8,kt=Math.max(ge-de.length,0);return"".concat(de).concat(" ".repeat(kt))}function Ss(de){var ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},kt=1e-16,Kt=ge.isInteger,Ue=Kt===void 0?!1:Kt;if(Array.isArray(de)||ArrayBuffer.isView(de))return au(de,ge);if(!Number.isFinite(de))return String(de);if(Math.abs(de)<kt)return Ue?"0":"0.";if(Ue||Math.abs(de)>100&&Math.abs(de)<1e4)return de.toFixed(0);var un=de.toPrecision(2),Gn=un.indexOf(".0");return Gn===un.length-2?un.slice(0,-1):un}function au(de,ge){for(var kt=ge.maxElts,Kt=kt===void 0?16:kt,Ue=ge.size,un=Ue===void 0?1:Ue,Gn="[",mr=0;mr<de.length&&mr<Kt;++mr)mr>0&&(Gn+=",".concat(mr%un==0?" ":"")),Gn+=Ss(de[mr],ge);var gr=de.length>Kt?"...":"]";return"".concat(Gn).concat(gr)}function qs(de,ge,kt){var Kt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600,Ue=de.src.replace(/\(/g,"%28").replace(/\)/g,"%29");de.width>Kt&&(kt=Math.min(kt,Kt/de.width));var un=de.width*kt,Gn=de.height*kt,mr=["font-size:1px;","padding:".concat(Math.floor(Gn/2),"px ").concat(Math.floor(un/2),"px;"),"line-height:".concat(Gn,"px;"),"background:url(".concat(Ue,");"),"background-size:".concat(un,"px ").concat(Gn,"px;"),"color:transparent;"].join("");return["".concat(ge," %c+"),mr]}var Ds={BLACK:30,RED:31,GREEN:32,YELLOW:33,BLUE:34,MAGENTA:35,CYAN:36,WHITE:37,BRIGHT_BLACK:90,BRIGHT_RED:91,BRIGHT_GREEN:92,BRIGHT_YELLOW:93,BRIGHT_BLUE:94,BRIGHT_MAGENTA:95,BRIGHT_CYAN:96,BRIGHT_WHITE:97};function Ju(de){return typeof de=="string"?Ds[de.toUpperCase()]||Ds.WHITE:de}function ou(de,ge,kt){return!Ra&&typeof de=="string"&&(ge&&(ge=Ju(ge),de="[".concat(ge,"m").concat(de,"[39m")),kt&&(ge=Ju(kt),de="[".concat(kt+10,"m").concat(de,"[49m"))),de}function Wa(de){if(typeof Symbol=="undefined"||de[Symbol.iterator]==null){if(Array.isArray(de)||(de=Pl(de))){var ge=0,kt=function(){};return{s:kt,n:function(){return ge>=de.length?{done:!0}:{done:!1,value:de[ge++]}},e:function(gr){throw gr},f:kt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Kt,Ue=!0,un=!1,Gn;return{s:function(){Kt=de[Symbol.iterator]()},n:function(){var gr=Kt.next();return Ue=gr.done,gr},e:function(gr){un=!0,Gn=gr},f:function(){try{!Ue&&Kt.return!=null&&Kt.return()}finally{if(un)throw Gn}}}}function Pl(de,ge){if(!!de){if(typeof de=="string")return $l(de,ge);var kt=Object.prototype.toString.call(de).slice(8,-1);if(kt==="Object"&&de.constructor&&(kt=de.constructor.name),kt==="Map"||kt==="Set")return Array.from(kt);if(kt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(kt))return $l(de,ge)}}function $l(de,ge){(ge==null||ge>de.length)&&(ge=de.length);for(var kt=0,Kt=new Array(ge);kt<ge;kt++)Kt[kt]=de[kt];return Kt}function Tl(de){var ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"],kt=Object.getPrototypeOf(de),Kt=Object.getOwnPropertyNames(kt),Ue=Wa(Kt),un;try{var Gn=function(){var gr=un.value;typeof de[gr]=="function"&&(ge.find(function(Qr){return gr===Qr})||(de[gr]=de[gr].bind(de)))};for(Ue.s();!(un=Ue.n()).done;)Gn()}catch(mr){Ue.e(mr)}finally{Ue.f()}}function Ql(de,ge){if(!de)throw new Error(ge||"Assertion failed")}var Nu=L("K9nA");function Ha(){var de;if(Ra&&Nu.b.performance)de=Nu.b.performance.now();else if(Nu.a.hrtime){var ge=Nu.a.hrtime();de=ge[0]*1e3+ge[1]/1e6}else de=Date.now();return de}var su={debug:Ra&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},Al={enabled:!0,level:0};function ms(){}var Tu={},gu={once:!0};function Fu(de){for(var ge in de)for(var kt in de[ge])return kt||"untitled";return"empty"}var Hs=function(){function de(){var ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},kt=ge.id;Object(ll.a)(this,de),this.id=kt,this.VERSION=Io,this._startTs=Ha(),this._deltaTs=Ha(),this.LOG_THROTTLE_TIMEOUT=0,this._storage=new Ro("__probe-".concat(this.id,"__"),Al),this.userData={},this.timeStamp("".concat(this.id," started")),Tl(this),Object.seal(this)}return Object(cl.a)(de,[{key:"isEnabled",value:function(){return this._storage.config.enabled}},{key:"getLevel",value:function(){return this._storage.config.level}},{key:"getTotal",value:function(){return Number((Ha()-this._startTs).toPrecision(10))}},{key:"getDelta",value:function(){return Number((Ha()-this._deltaTs).toPrecision(10))}},{key:"getPriority",value:function(){return this.level}},{key:"enable",value:function(){var kt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.updateConfiguration({enabled:kt}),this}},{key:"setLevel",value:function(kt){return this._storage.updateConfiguration({level:kt}),this}},{key:"assert",value:function(kt,Kt){Ql(kt,Kt)}},{key:"warn",value:function(kt){return this._getLogFunction(0,kt,su.warn,arguments,gu)}},{key:"error",value:function(kt){return this._getLogFunction(0,kt,su.error,arguments)}},{key:"deprecated",value:function(kt,Kt){return this.warn("`".concat(kt,"` is deprecated and will be removed in a later version. Use `").concat(Kt,"` instead"))}},{key:"removed",value:function(kt,Kt){return this.error("`".concat(kt,"` has been removed. Use `").concat(Kt,"` instead"))}},{key:"probe",value:function(kt,Kt){return this._getLogFunction(kt,Kt,su.log,arguments,{time:!0,once:!0})}},{key:"log",value:function(kt,Kt){return this._getLogFunction(kt,Kt,su.debug,arguments)}},{key:"info",value:function(kt,Kt){return this._getLogFunction(kt,Kt,console.info,arguments)}},{key:"once",value:function(kt,Kt){return this._getLogFunction(kt,Kt,su.debug||su.info,arguments,gu)}},{key:"table",value:function(kt,Kt,Ue){return Kt?this._getLogFunction(kt,Kt,console.table||ms,Ue&&[Ue],{tag:Fu(Kt)}):ms}},{key:"image",value:function(kt){var Kt=kt.logLevel,Ue=kt.priority,un=kt.image,Gn=kt.message,mr=Gn===void 0?"":Gn,gr=kt.scale,Qr=gr===void 0?1:gr;return this._shouldLog(Kt||Ue)?Ra?ql({image:un,message:mr,scale:Qr}):zl({image:un,message:mr,scale:Qr}):ms}},{key:"settings",value:function(){console.table?console.table(this._storage.config):console.log(this._storage.config)}},{key:"get",value:function(kt){return this._storage.config[kt]}},{key:"set",value:function(kt,Kt){this._storage.updateConfiguration(Object(Bu.a)({},kt,Kt))}},{key:"time",value:function(kt,Kt){return this._getLogFunction(kt,Kt,console.time?console.time:console.info)}},{key:"timeEnd",value:function(kt,Kt){return this._getLogFunction(kt,Kt,console.timeEnd?console.timeEnd:console.info)}},{key:"timeStamp",value:function(kt,Kt){return this._getLogFunction(kt,Kt,console.timeStamp||ms)}},{key:"group",value:function(kt,Kt){var Ue=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1};Ue=fs({logLevel:kt,message:Kt,opts:Ue});var un=Ue,Gn=un.collapsed;return Ue.method=(Gn?console.groupCollapsed:console.group)||console.info,this._getLogFunction(Ue)}},{key:"groupCollapsed",value:function(kt,Kt){var Ue=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(kt,Kt,Object.assign({},Ue,{collapsed:!0}))}},{key:"groupEnd",value:function(kt){return this._getLogFunction(kt,"",console.groupEnd||ms)}},{key:"withGroup",value:function(kt,Kt,Ue){this.group(kt,Kt)();try{Ue()}finally{this.groupEnd(kt)()}}},{key:"trace",value:function(){console.trace&&console.trace()}},{key:"_shouldLog",value:function(kt){return this.isEnabled()&&this.getLevel()>=$o(kt)}},{key:"_getLogFunction",value:function(kt,Kt,Ue){var un=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],Gn=arguments.length>4?arguments[4]:void 0;if(this._shouldLog(kt)){var mr;Gn=fs({logLevel:kt,message:Kt,args:un,opts:Gn}),Ue=Ue||Gn.method,Ql(Ue),Gn.total=this.getTotal(),Gn.delta=this.getDelta(),this._deltaTs=Ha();var gr=Gn.tag||Gn.message;if(Gn.once)if(!Tu[gr])Tu[gr]=Ha();else return ms;return Kt=fl(this.id,Gn.message,Gn),(mr=Ue).bind.apply(mr,[console,Kt].concat(Object(Ns.a)(Gn.args)))}return ms}},{key:"level",set:function(kt){this.setLevel(kt)},get:function(){return this.getLevel()}},{key:"priority",set:function(kt){this.level=kt},get:function(){return this.level}}]),de}();Hs.VERSION=Io;function $o(de){if(!de)return 0;var ge;switch(Object(fo.a)(de)){case"number":ge=de;break;case"object":ge=de.logLevel||de.priority||0;break;default:return 0}return Ql(Number.isFinite(ge)&&ge>=0),ge}function fs(de){var ge=de.logLevel,kt=de.message;de.logLevel=$o(ge);for(var Kt=de.args?Array.from(de.args):[];Kt.length&&Kt.shift()!==kt;);switch(de.args=Kt,Object(fo.a)(ge)){case"string":case"function":kt!==void 0&&Kt.unshift(kt),de.message=ge;break;case"object":Object.assign(de,ge);break;default:}typeof de.message=="function"&&(de.message=de.message());var Ue=Object(fo.a)(de.message);return Ql(Ue==="string"||Ue==="object"),Object.assign(de,de.opts)}function fl(de,ge,kt){if(typeof ge=="string"){var Kt=kt.time?Ml(pu(kt.total)):"";ge=kt.time?"".concat(de,": ").concat(Kt,"  ").concat(ge):"".concat(de,": ").concat(ge),ge=ou(ge,kt.color,kt.background)}return ge}function zl(de){var ge=de.image,kt=de.message,Kt=kt===void 0?"":kt,Ue=de.scale,un=Ue===void 0?1:Ue,Gn=null;try{Gn=L(2)}catch(mr){}return Gn?function(){return Gn(ge,{fit:"box",width:"".concat(Math.round(80*un),"%")}).then(function(mr){return console.log(mr)})}:ms}function ql(de){var ge=de.image,kt=de.message,Kt=kt===void 0?"":kt,Ue=de.scale,un=Ue===void 0?1:Ue;if(typeof ge=="string"){var Gn=new Image;return Gn.onload=function(){var wi,$i=qs(Gn,Kt,un);(wi=console).log.apply(wi,Object(Ns.a)($i))},Gn.src=ge,ms}var mr=ge.nodeName||"";if(mr.toLowerCase()==="img"){var gr;return(gr=console).log.apply(gr,Object(Ns.a)(qs(ge,Kt,un))),ms}if(mr.toLowerCase()==="canvas"){var Qr=new Image;return Qr.onload=function(){var wi;return(wi=console).log.apply(wi,Object(Ns.a)(qs(Qr,Kt,un)))},Qr.src=ge.toDataURL(),ms}return ms}var zu,$u,Au=new Hs({id:"L7"}).enable(!1);Au.priority=5;var Cu=(zu=Object(e.injectable)(),zu($u=function(){function de(){n()(this,de)}return a()(de,[{key:"error",value:function(kt){Au.error(kt)()}},{key:"warn",value:function(kt){Au.probe(1,kt)()}},{key:"info",value:function(kt){Au.info(3,kt)()}},{key:"debug",value:function(kt){Au.probe(4,kt)()}}]),de}())||$u),mu=L("xp6e"),Uu=L("iegG"),zs=L.n(Uu),Ul=window.document.documentElement.style,gc=0;function Cl(de){var ge=de;if(typeof de=="string"&&(ge=document.getElementById(de)),ge){var kt=document.createElement("div");return kt.style.cssText+=`
      position: absolute;
      z-index:2;
      height: 100%;
      width: 100%;
      pointer-events: none;
    `,kt.id="l7-scene-".concat(gc++),kt.classList.add("l7-scene"),ge.appendChild(kt),kt}return null}var kl,Gl,cc,Qu,Ol,Vl,tu,go,gl,hl,Ys,Na,_o,Us,ml,qu,ku,mc,Os,tl,uu,Zs,Qo,eu,Ou,qo,Wi,ws,Gu,wu,Fo,ko,Eu,Mi,el,Iu;function Lu(de){var ge=nu();return function(){var Kt=nt()(de),Ue;if(ge){var un=nt()(this).constructor;Ue=Reflect.construct(Kt,arguments,un)}else Ue=Kt.apply(this,arguments);return pt()(this,Ue)}}function nu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(de){return!1}}var we=(kl=Object(e.injectable)(),Gl=Object(e.inject)(s.a.SceneID),cc=Object(e.inject)(s.a.IIconService),Qu=Object(e.inject)(s.a.IFontService),Ol=Object(e.inject)(s.a.IControlService),Vl=Object(e.inject)(s.a.ILogService),tu=Object(e.inject)(s.a.IGlobalConfigService),go=Object(e.inject)(s.a.IMapService),gl=Object(e.inject)(s.a.ICoordinateSystemService),hl=Object(e.inject)(s.a.IRendererService),Ys=Object(e.inject)(s.a.ILayerService),Na=Object(e.inject)(s.a.ICameraService),_o=Object(e.inject)(s.a.IInteractionService),Us=Object(e.inject)(s.a.IPickingService),ml=Object(e.inject)(s.a.IShaderModuleService),qu=Object(e.inject)(s.a.IMarkerService),ku=Object(e.inject)(s.a.IPopupService),kl(mc=(Os=(Iu=function(de){et()(kt,de);var ge=Lu(kt);function kt(){var Kt;return n()(this,kt),Kt=ge.call(this),Kt.destroyed=!1,Kt.loaded=!1,We()(Kt,"id",tl,_a()(Kt)),We()(Kt,"iconService",uu,_a()(Kt)),We()(Kt,"fontService",Zs,_a()(Kt)),We()(Kt,"controlService",Qo,_a()(Kt)),We()(Kt,"logger",eu,_a()(Kt)),We()(Kt,"configService",Ou,_a()(Kt)),We()(Kt,"map",qo,_a()(Kt)),We()(Kt,"coordinateSystemService",Wi,_a()(Kt)),We()(Kt,"rendererService",ws,_a()(Kt)),We()(Kt,"layerService",Gu,_a()(Kt)),We()(Kt,"cameraService",wu,_a()(Kt)),We()(Kt,"interactionService",Fo,_a()(Kt)),We()(Kt,"pickingService",ko,_a()(Kt)),We()(Kt,"shaderModuleService",Eu,_a()(Kt)),We()(Kt,"markerService",Mi,_a()(Kt)),We()(Kt,"popupService",el,_a()(Kt)),Kt.inited=!1,Kt.initPromise=void 0,Kt.rendering=!1,Kt.$container=void 0,Kt.canvas=void 0,Kt.markerContainer=void 0,Kt.hooks=void 0,Kt.handleWindowResized=function(){Kt.emit("resize"),Kt.$container&&(Kt.initContainer(),o.a.triggerResize(),Kt.coordinateSystemService.needRefresh=!0,Kt.render())},Kt.handleMapCameraChanged=function(Ue){Kt.cameraService.update(Ue),Kt.render()},Kt.hooks={init:new mu.a},Kt}return a()(kt,[{key:"init",value:function(Ue){var un=this;this.configService.setSceneConfig(this.id,Ue),this.shaderModuleService.registerBuiltinModules(),this.iconService.init(),this.fontService.init(),this.hooks.init.tapPromise("initMap",an()(qn.a.mark(function Gn(){return qn.a.wrap(function(gr){for(;;)switch(gr.prev=gr.next){case 0:return gr.next=2,new Promise(function(Qr){un.map.onCameraChanged(function(wi){un.cameraService.init(),un.cameraService.update(wi),Qr()}),un.map.init()});case 2:un.map.onCameraChanged(un.handleMapCameraChanged),un.map.addMarkerContainer(),un.markerService.addMarkers(),un.markerService.addMarkerLayers(),un.popupService.initPopup(),un.interactionService.init(),un.interactionService.on(io.a.Drag,un.addSceneEvent.bind(un)),un.logger.debug("map ".concat(un.id," loaded"));case 10:case"end":return gr.stop()}},Gn)}))),this.hooks.init.tapPromise("initRenderer",an()(qn.a.mark(function Gn(){var mr;return qn.a.wrap(function(Qr){for(;;)switch(Qr.prev=Qr.next){case 0:if(mr=Cl(un.configService.getSceneConfig(un.id).id||""),un.$container=mr,!mr){Qr.next=11;break}return un.canvas=o.a.create("canvas","",mr),un.setCanvas(),Qr.next=7,un.rendererService.init(un.canvas,un.configService.getSceneConfig(un.id));case 7:zs()(un.$container,un.handleWindowResized),window.matchMedia("screen and (-webkit-min-device-pixel-ratio: 1.5)").addListener(un.handleWindowResized),Qr.next=12;break;case 11:un.logger.error("\u5BB9\u5668 id \u4E0D\u5B58\u5728");case 12:un.pickingService.init(un.id),un.logger.debug("scene ".concat(un.id," renderer loaded"));case 14:case"end":return Qr.stop()}},Gn)}))),this.initPromise=this.hooks.init.promise(),this.render()}},{key:"addLayer",value:function(Ue){this.logger.debug("add layer ".concat(Ue.name," to scene ").concat(this.id)),this.layerService.add(Ue),this.render()}},{key:"render",value:function(){var Kt=an()(qn.a.mark(function un(){return qn.a.wrap(function(mr){for(;;)switch(mr.prev=mr.next){case 0:if(!(this.rendering||this.destroyed)){mr.next=2;break}return mr.abrupt("return");case 2:if(this.rendering=!0,this.inited){mr.next=13;break}return mr.next=6,this.initPromise;case 6:this.destroyed&&this.destroy(),this.logger.info(" render inited"),this.layerService.initLayers(),this.controlService.addControls(),this.loaded=!0,this.emit("loaded"),this.inited=!0;case 13:this.layerService.renderLayers(),this.logger.debug("scene ".concat(this.id," render")),this.rendering=!1;case 16:case"end":return mr.stop()}},un,this)}));function Ue(){return Kt.apply(this,arguments)}return Ue}()},{key:"getSceneContainer",value:function(){return this.$container}},{key:"exportPng",value:function(Ue){var un,Gn=(un=this.$container)===null||un===void 0?void 0:un.getElementsByTagName("canvas")[0];this.render();var mr=Ue==="jpg"?Gn==null?void 0:Gn.toDataURL("image/jpeg"):Gn==null?void 0:Gn.toDataURL("image/png");return mr}},{key:"getSceneConfig",value:function(){return this.configService.getSceneConfig(this.id)}},{key:"addMarkerContainer",value:function(){var Ue=this.$container.parentElement;Ue!==null&&(this.markerContainer=o.a.create("div","l7-marker-container",Ue))}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"destroy",value:function(){if(!this.inited){this.destroyed=!0;return}this.emit("destroy"),this.layerService.destroy(),this.rendererService.destroy(),this.map.destroy(),this.interactionService.destroy(),this.controlService.destroy(),this.markerService.destroy(),this.removeAllListeners(),this.inited=!1,Object(Uu.unbind)(this.$container,this.handleWindowResized),window.matchMedia("screen and (min-resolution: 2dppx)").removeListener(this.handleWindowResized)}},{key:"initContainer",value:function(){var Ue,un,Gn=o.a.DPR,mr=((Ue=this.$container)===null||Ue===void 0?void 0:Ue.clientWidth)||400,gr=((un=this.$container)===null||un===void 0?void 0:un.clientHeight)||300,Qr=this.canvas;Qr&&(Qr.width=mr*Gn,Qr.height=gr*Gn,Qr.style.width="".concat(mr,"px"),Qr.style.height="".concat(gr,"px")),this.rendererService.viewport({x:0,y:0,width:Gn*mr,height:Gn*gr})}},{key:"setCanvas",value:function(){var Ue,un,Gn=o.a.DPR,mr=((Ue=this.$container)===null||Ue===void 0?void 0:Ue.clientWidth)||400,gr=((un=this.$container)===null||un===void 0?void 0:un.clientHeight)||300,Qr=this.canvas;Qr.width=mr*Gn,Qr.height=gr*Gn,Qr.style.width="".concat(mr,"px"),Qr.style.height="".concat(gr,"px")}},{key:"addSceneEvent",value:function(Ue){this.emit(Ue.type,Ue)}}]),kt}(E.EventEmitter),Iu),tl=fn()(Os.prototype,"id",[Gl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uu=fn()(Os.prototype,"iconService",[cc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zs=fn()(Os.prototype,"fontService",[Qu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qo=fn()(Os.prototype,"controlService",[Ol],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),eu=fn()(Os.prototype,"logger",[Vl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ou=fn()(Os.prototype,"configService",[tu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qo=fn()(Os.prototype,"map",[go],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wi=fn()(Os.prototype,"coordinateSystemService",[gl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ws=fn()(Os.prototype,"rendererService",[hl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gu=fn()(Os.prototype,"layerService",[Ys],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wu=fn()(Os.prototype,"cameraService",[Na],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fo=fn()(Os.prototype,"interactionService",[_o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ko=fn()(Os.prototype,"pickingService",[Us],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Eu=fn()(Os.prototype,"shaderModuleService",[ml],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mi=fn()(Os.prototype,"markerService",[qu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),el=fn()(Os.prototype,"popupService",[ku],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Os))||mc),Te=L("7tbW"),dn=L.n(Te);function tn(de){var ge=0;switch(de){case"vec2":case"ivec2":ge=2;break;case"vec3":case"ivec3":ge=3;break;case"vec4":case"ivec4":case"mat2":ge=4;break;case"mat3":ge=9;break;case"mat4":ge=16;break;default:}return ge}var wn=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function vr(de){var ge={};return de=de.replace(wn,function(kt,Kt,Ue){var un=Ue.split(":"),Gn=un[0].trim(),mr="";switch(un.length>1&&(mr=un[1].trim()),Kt){case"bool":mr=mr==="true";break;case"float":case"int":mr=Number(mr);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":mr?mr=mr.replace("[","").replace("]","").split(",").reduce(function(gr,Qr){return gr.push(Number(Qr.trim())),gr},[]):mr=new Array(tn(Kt)).fill(0);break;default:}return ge[Gn]=mr,"uniform ".concat(Kt," ").concat(Gn,`;
`)}),{content:de,uniforms:ge}}var Lr,Kr,ti;function Fr(de,ge){var kt=Object.keys(de);if(Object.getOwnPropertySymbols){var Kt=Object.getOwnPropertySymbols(de);ge&&(Kt=Kt.filter(function(Ue){return Object.getOwnPropertyDescriptor(de,Ue).enumerable})),kt.push.apply(kt,Kt)}return kt}function ui(de){for(var ge=1;ge<arguments.length;ge++){var kt=arguments[ge]!=null?arguments[ge]:{};ge%2?Fr(Object(kt),!0).forEach(function(Kt){r()(de,Kt,kt[Kt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(de,Object.getOwnPropertyDescriptors(kt)):Fr(Object(kt)).forEach(function(Kt){Object.defineProperty(de,Kt,Object.getOwnPropertyDescriptor(kt,Kt))})}return de}var br="#define PI 3.14159265359",Zt=`#define SHIFT_RIGHT17 1.0 / 131072.0
#define SHIFT_RIGHT18 1.0 / 262144.0
#define SHIFT_RIGHT19 1.0 / 524288.0
#define SHIFT_RIGHT20 1.0 / 1048576.0
#define SHIFT_RIGHT21 1.0 / 2097152.0
#define SHIFT_RIGHT22 1.0 / 4194304.0
#define SHIFT_RIGHT23 1.0 / 8388608.0
#define SHIFT_RIGHT24 1.0 / 16777216.0

#define SHIFT_LEFT17 131072.0
#define SHIFT_LEFT18 262144.0
#define SHIFT_LEFT19 524288.0
#define SHIFT_LEFT20 1048576.0
#define SHIFT_LEFT21 2097152.0
#define SHIFT_LEFT22 4194304.0
#define SHIFT_LEFT23 8388608.0
#define SHIFT_LEFT24 16777216.0

vec2 unpack_float(float packedValue) {
  int packedIntValue = int(packedValue);
  int v0 = packedIntValue / 256;
  return vec2(v0, packedIntValue - v0 * 256);
}

vec4 decode_color(vec2 encodedColor) {
  return vec4(
    unpack_float(encodedColor[0]) / 255.0,
    unpack_float(encodedColor[1]) / 255.0
  );
}
`,te=`#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2


float calc_lighting(vec4 pos) {

    vec3 worldPos = vec3(pos * u_ModelMatrix);

    vec3 worldNormal = a_Normal;
      // //cal light weight
    vec3 viewDir = normalize(u_CameraPosition - worldPos);

    vec3 lightDir = normalize(vec3(1, -10.5, 12));

    vec3 halfDir = normalize(viewDir+lightDir);
      // //lambert
    float lambert = dot(worldNormal, lightDir);
        //specular
    float specular = pow(max(0.0, dot(worldNormal, halfDir)), 32.0);
        //sum to light weight
    float lightWeight = ambientRatio + diffuseRatio * lambert + specularRatio * specular;

    return lightWeight;
}
`,Le=`// Blinn-Phong model
// apply lighting in vertex shader instead of fragment shader
// @see https://learnopengl.com/Advanced-Lighting/Advanced-Lighting
uniform float u_Ambient : 1.0;
uniform float u_Diffuse : 1.0;
uniform float u_Specular : 1.0;
uniform int u_NumOfDirectionalLights : 1;
uniform int u_NumOfSpotLights : 0;

#define SHININESS 32.0
#define MAX_NUM_OF_DIRECTIONAL_LIGHTS 3
#define MAX_NUM_OF_SPOT_LIGHTS 3

struct DirectionalLight {
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
};

struct SpotLight {
  vec3 position;
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
  float constant;
  float linear;
  float quadratic;
  float angle;
  float blur;
  float exponent;
};

uniform DirectionalLight u_DirectionalLights[MAX_NUM_OF_DIRECTIONAL_LIGHTS];
uniform SpotLight u_SpotLights[MAX_NUM_OF_SPOT_LIGHTS];

vec3 calc_directional_light(DirectionalLight light, vec3 normal, vec3 viewDir) {
  vec3 lightDir = normalize(light.direction);
  // diffuse shading
  float diff = max(dot(normal, lightDir), 0.0);
  // Blinn-Phong specular shading
  vec3 halfwayDir = normalize(lightDir + viewDir);
  float spec = pow(max(dot(normal, halfwayDir), 0.0), SHININESS);

  vec3 ambient = light.ambient * u_Ambient;
  vec3 diffuse = light.diffuse * diff * u_Diffuse;
  vec3 specular = light.specular * spec * u_Specular;

  return ambient + diffuse + specular;
}

// vec3 calc_spot_light(SpotLight light, vec3 normal, vec3 fragPos, vec3 viewDir) {
//   vec3 lightDir = normalize(light.position - fragPos);
//   // diffuse shading
//   float diff = max(dot(normal, lightDir), 0.0);
//   // specular shading
//   vec3 reflectDir = reflect(-lightDir, normal);
//   float spec = pow(max(dot(viewDir, reflectDir), 0.0), SHININESS);
//   // attenuation
//   float distance = length(light.position - fragPos);
//   float attenuation = 1.0 / (light.constant + light.linear * distance +
//           light.quadratic * (distance * distance));

//   vec3 ambient = light.ambient * u_Ambient;
//   vec3 diffuse = light.diffuse * diff * u_Diffuse;
//   vec3 specular = light.specular * spec * u_Specular;

//   float spotEffect = dot(normalize(light.direction), -lightDir);
//   float spotCosCutoff = cos(light.angle / 180.0 * PI);
//   float spotCosOuterCutoff = cos((light.angle + light.blur) / 180.0 * PI);
//   float spotCosInnerCutoff = cos((light.angle - light.blur) / 180.0 * PI);
//   if (spotEffect > spotCosCutoff) {
//     spotEffect = pow(smoothstep(spotCosOuterCutoff, spotCosInnerCutoff, spotEffect), light.exponent);
//   } else {
//     spotEffect = 0.0;
//   }

//   return ambient + attenuation * (spotEffect * diffuse + specular);
// }

vec3 calc_lighting(vec3 position, vec3 normal, vec3 viewDir) {
  vec3 weight = vec3(0.0);
  for (int i = 0; i < MAX_NUM_OF_DIRECTIONAL_LIGHTS; i++) {
    if (i >= u_NumOfDirectionalLights) {
      break;
    }
    weight += calc_directional_light(u_DirectionalLights[i], normal, viewDir);
  }
  // for (int i = 0; i < MAX_NUM_OF_SPOT_LIGHTS; i++) {
  //   if (i >= u_NumOfSpotLights) {
  //     break;
  //   }
  //   weight += calc_spot_light(u_SpotLights[i], normal, position, viewDir);
  // }
  return weight;
}
`,_e=`varying vec4 v_PickingResult;
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

/*
 * Returns highlight color if this item is selected.
 */
vec4 filterHighlightColor(vec4 color) {
  bool selected = bool(v_PickingResult.a);

  if (selected) {
    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;

    float highLightAlpha = highLightColor.a;
    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));

    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);
    return vec4(resultRGB, color.a);
  } else {
    return color;
  }
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 filterPickingColor(vec4 color) {
  vec3 pickingColor = v_PickingResult.rgb;
  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {
    discard;
  }
  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 filterColor(vec4 color) {
  return filterPickingColor(filterHighlightColor(color));
}
`,Rt=`attribute vec3 a_PickingColor;
varying vec4 v_PickingResult;

uniform vec3 u_PickingColor : [0, 0, 0];
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;
uniform float u_PickingThreshold : 1.0;
uniform float u_PickingBuffer: 0.0;

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

bool isVertexPicked(vec3 vertexColor) {
  return
    abs(vertexColor.r - u_PickingColor.r) < u_PickingThreshold &&
    abs(vertexColor.g - u_PickingColor.g) < u_PickingThreshold &&
    abs(vertexColor.b - u_PickingColor.b) < u_PickingThreshold;
}

void setPickingColor(vec3 pickingColor) {
  // compares only in highlight stage
  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));

  // Stores the picking color so that the fragment shader can render it during picking
  v_PickingResult.rgb = pickingColor * COLOR_SCALE;
}

float setPickingSize(float x) {
   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;
}
`,zt=`
#define E 2.718281828459045
vec2 ProjectFlat(vec2 lnglat){
  float maxs=85.0511287798;
  float lat=max(min(maxs,lnglat.y),-maxs);
  float scale= 268435456.;
  float d=PI/180.;
  float x=lnglat.x*d;
  float y=lat*d;
  y=log(tan((PI/4.)+(y/2.)));

  float a=.5/PI,
  b=.5,
  c=-.5/PI;
  d=.5;
  x=scale*(a*x+b);
  y=scale*(c*y+d);
  return vec2(x,y);
}

vec2 unProjectFlat(vec2 px){
  float a=.5/PI;
  float b=.5;
  float c=-.5/PI;
  float d=.5;
  float scale = 268435456.;
  float x=(px.x/scale-b)/a;
  float y=(px.y/scale-d)/c;
  y=(atan(pow(E,y))-(PI/4.))*2.;
  d=PI/180.;
  float lat=y/d;
  float lng=x/d;
  return vec2(lng,lat);
}

float pixelDistance(vec2 from, vec2 to) {
 vec2 a1 = ProjectFlat(from);
 vec2 b1 = ProjectFlat(to);
 return distance(a1, b1);
}
`,se=`#define TILE_SIZE 512.0
#define PI 3.1415926536
#define WORLD_SCALE TILE_SIZE / (PI * 2.0)

#define COORDINATE_SYSTEM_LNGLAT 1.0
#define COORDINATE_SYSTEM_LNGLAT_OFFSET 2.0
#define COORDINATE_SYSTEM_VECTOR_TILE 3.0
#define COORDINATE_SYSTEM_IDENTITY 4.0
#define COORDINATE_SYSTEM_P20 5.0
#define COORDINATE_SYSTEM_P20_OFFSET 6.0
#define COORDINATE_SYSTEM_METER_OFFSET 7.0

uniform mat4 u_ViewMatrix;
uniform mat4 u_ProjectionMatrix;
uniform mat4 u_ViewProjectionMatrix;
uniform float u_Zoom : 1;
uniform float u_ZoomScale : 1;

uniform float u_CoordinateSystem;
uniform vec2 u_ViewportCenter;
uniform vec4 u_ViewportCenterProjection;
uniform vec3 u_PixelsPerDegree;
uniform vec3 u_PixelsPerDegree2;
uniform vec3 u_PixelsPerMeter;

uniform vec2 u_ViewportSize;
uniform float u_DevicePixelRatio;
uniform float u_FocalDistance;
uniform vec3 u_CameraPosition;

// web mercator coords -> world coords
vec2 project_mercator(vec2 lnglat) {
  float x = lnglat.x;
  return vec2(
    radians(x) + PI,
    PI - log(tan(PI * 0.25 + radians(lnglat.y) * 0.5))
  );
}

float project_scale(float meters) {
  return meters * u_PixelsPerMeter.z;
}


// offset coords -> world coords
vec4 project_offset(vec4 offset) {
  float dy = offset.y;
  dy = clamp(dy, -1., 1.);
  vec3 pixels_per_unit = u_PixelsPerDegree + u_PixelsPerDegree2 * dy;
  return vec4(offset.xyz * pixels_per_unit, offset.w);
}

vec3 project_normal(vec3 normal) {
  vec4 normal_modelspace = u_ModelMatrix * vec4(normal, 0.0);
  return normalize(normal_modelspace.xyz * u_PixelsPerMeter);
}

vec3 project_offset_normal(vec3 vector) {
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01
    || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // normals generated by the polygon tesselator are in lnglat offsets instead of meters
    return normalize(vector * u_PixelsPerDegree);
  }
  return project_normal(vector);
}
// || u_CoordinateSystem < COORDINATE_SYSTEM_P20_OFFSET + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_P20_OFFSET - 0.01
// reverse Y
vec3 reverse_offset_normal(vec3 vector) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 ||u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET ) {
    return vector * vec3(1.0, -1.0, 1.0);
  }
  return vector;
}

vec4 project_position(vec4 position) {
  float a = COORDINATE_SYSTEM_LNGLAT_OFFSET;
  float b = COORDINATE_SYSTEM_P20_OFFSET;
  float c = COORDINATE_SYSTEM_LNGLAT;
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    float X = position.x - u_ViewportCenter.x;
    float Y = position.y - u_ViewportCenter.y;
    return project_offset(vec4(X, Y, position.z, position.w));
  }
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01) {
    return vec4(
      project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale,
      project_scale(position.z),
      position.w
    );
  }

  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20) {
    return vec4(
      (project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale - vec2(215440491., 106744817.)) * vec2(1., -1.),
      project_scale(position.z),
      position.w
    );
  }
  return position;

  // TODO: \u74E6\u7247\u5750\u6807\u7CFB & \u5E38\u89C4\u4E16\u754C\u5750\u6807\u7CFB
}
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / u_ViewportSize * u_DevicePixelRatio * 2.0;
  return offset * u_FocalDistance;
}

float project_pixel(float pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom));
  }
  return pixel;
}
vec2 project_pixel(vec2 pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom));
  }
  return pixel * -1.;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // Needs to be divided with project_uCommonUnitsPerMeter
    position.w *= u_PixelsPerMeter.z;
  }
  return viewProjectionMatrix * position + center;
}

// Projects from common space coordinates to clip space
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(
    position,
    u_ViewProjectionMatrix,
    u_ViewportCenterProjection
  );
}

vec4 unproject_clipspace_to_position(vec4 clipspacePos, mat4 u_InverseViewProjectionMatrix) {
  vec4 pos = u_InverseViewProjectionMatrix * (clipspacePos - u_ViewportCenterProjection);

  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // Needs to be divided with project_uCommonUnitsPerMeter
     pos.w = pos.w / u_PixelsPerMeter.z;
  }
  return pos;
}


bool isEqual( float a,  float b) {
    return  a< b + 0.001 && a > b - 0.001;
}

`,re=`/**
 * 2D signed distance field functions
 * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
 */

float ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }

float sdCircle(vec2 p, float r) {
  return length(p) - r;
}

float sdEquilateralTriangle(vec2 p) {
  float k = sqrt(3.0);
  p.x = abs(p.x) - 1.0;
  p.y = p.y + 1.0/k;
  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;
  p.x -= clamp( p.x, -2.0, 0.0 );
  return -length(p)*sign(p.y);
}

float sdBox(vec2 p, vec2 b) {
  vec2 d = abs(p)-b;
  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);
}

float sdPentagon(vec2 p, float r) {
  vec3 k = vec3(0.809016994,0.587785252,0.726542528);
  p.x = abs(p.x);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);
  return length(p)*sign(p.y);
}

float sdHexagon(vec2 p, float r) {
  vec3 k = vec3(-0.866025404,0.5,0.577350269);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdOctogon(vec2 p, float r) {
  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );
  p = abs(p);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdHexagram(vec2 p, float r) {
  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;
  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);
  return length(p)*sign(p.y);
}

float sdRhombus(vec2 p, vec2 b) {
  vec2 q = abs(p);
  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);
  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );
  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );
}

float sdVesica(vec2 p, float r, float d) {
  p = abs(p);
  float b = sqrt(r*r-d*d); // can delay this sqrt
  return ((p.y-b)*d>p.x*b)
          ? length(p-vec2(0.0,b))
          : length(p-vec2(-d,0.0))-r;
}
`,ce=/precision\s+(high|low|medium)p\s+float/,Fe=`#ifdef GL_FRAGMENT_PRECISION_HIGH
 precision highp float;
 #else
 precision mediump float;
#endif
`,Ke=/#pragma include (["^+"]?["\ "[a-zA-Z_0-9](.*)"]*?)/g,rn=(Lr=Object(e.injectable)(),Lr(Kr=(ti=function(){function de(){n()(this,de),this.moduleCache={},this.rawContentCache={}}return a()(de,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("common",{vs:br,fs:br}),this.registerModule("decode",{vs:Zt,fs:""}),this.registerModule("projection",{vs:se,fs:""}),this.registerModule("project",{vs:zt,fs:""}),this.registerModule("sdf_2d",{vs:"",fs:re}),this.registerModule("lighting",{vs:Le,fs:""}),this.registerModule("light",{vs:te,fs:""}),this.registerModule("picking",{vs:Rt,fs:_e})}},{key:"registerModule",value:function(kt,Kt){if(!this.rawContentCache[kt]){var Ue=Kt.vs,un=Kt.fs,Gn=Kt.uniforms,mr=vr(Ue),gr=mr.content,Qr=mr.uniforms,wi=vr(un),$i=wi.content,ha=wi.uniforms;this.rawContentCache[kt]={fs:$i,uniforms:ui(ui(ui({},Qr),ha),Gn),vs:gr}}}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(kt){var Kt=this;if(this.moduleCache[kt])return this.moduleCache[kt];var Ue=this.rawContentCache[kt].vs,un=this.rawContentCache[kt].fs,Gn=this.processModule(Ue,[],"vs"),mr=Gn.content,gr=Gn.includeList,Qr=this.processModule(un,[],"fs"),wi=Qr.content,$i=Qr.includeList,ha=wi,xa=dn()(gr.concat($i).concat(kt)).reduce(function(ao,vo){return ui(ui({},ao),Kt.rawContentCache[vo].uniforms)},{});return ce.test(wi)||(ha=Fe+wi),this.moduleCache[kt]={fs:ha.trim(),uniforms:xa,vs:mr.trim()},this.moduleCache[kt]}},{key:"processModule",value:function(kt,Kt,Ue){var un=this,Gn=kt.replace(Ke,function(mr,gr){var Qr=gr.split(" "),wi=Qr[0].replace(/"/g,"");if(Kt.indexOf(wi)>-1)return"";var $i=un.rawContentCache[wi][Ue];Kt.push(wi);var ha=un.processModule($i,Kt,Ue),xa=ha.content;return xa});return{content:Gn,includeList:Kt}}}]),de}(),ti))||Kr),Je=L("iWIM"),vn=L.n(Je),hn=L("bPkA"),Jn,Vn,Zn,Wn,lr,xr,Vr=(Jn=Object(e.injectable)(),Vn=Object(e.inject)(s.a.IShaderModuleService),Jn(Zn=(Wn=(xr=function(){function de(){n()(this,de),We()(this,"shaderModuleService",lr,this),this.rendererService=void 0,this.cameraService=void 0,this.mapService=void 0,this.interactionService=void 0,this.layerService=void 0,this.config=void 0}return a()(de,[{key:"getName",value:function(){return""}},{key:"getType",value:function(){return hn.a.Normal}},{key:"init",value:function(kt,Kt){this.config=Kt,this.rendererService=kt.getContainer().get(s.a.IRendererService),this.cameraService=kt.getContainer().get(s.a.ICameraService),this.mapService=kt.getContainer().get(s.a.IMapService),this.interactionService=kt.getContainer().get(s.a.IInteractionService),this.layerService=kt.getContainer().get(s.a.ILayerService)}},{key:"render",value:function(kt){}}]),de}(),xr),lr=fn()(Wn.prototype,"shaderModuleService",[Vn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wn))||Zn),yi,Br;function si(de){var ge=gi();return function(){var Kt=nt()(de),Ue;if(ge){var un=nt()(this).constructor;Ue=Reflect.construct(Kt,arguments,un)}else Ue=Kt.apply(this,arguments);return pt()(this,Ue)}}function gi(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(de){return!1}}var Zi=(yi=Object(e.injectable)(),yi(Br=function(de){et()(kt,de);var ge=si(kt);function kt(){return n()(this,kt),ge.apply(this,arguments)}return a()(kt,[{key:"getName",value:function(){return"clear"}},{key:"init",value:function(Ue,un){vn()(nt()(kt.prototype),"init",this).call(this,Ue,un)}},{key:"render",value:function(){this.rendererService.clear({color:[0,0,0,0],depth:1,framebuffer:null})}}]),kt}(Vr))||Br),Li,Ma,ma,la,ri,Ta;function Ga(de,ge){var kt;if(typeof Symbol=="undefined"||de[Symbol.iterator]==null){if(Array.isArray(de)||(kt=Ya(de))||ge&&de&&typeof de.length=="number"){kt&&(de=kt);var Kt=0,Ue=function(){};return{s:Ue,n:function(){return Kt>=de.length?{done:!0}:{done:!1,value:de[Kt++]}},e:function(Qr){throw Qr},f:Ue}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var un=!0,Gn=!1,mr;return{s:function(){kt=de[Symbol.iterator]()},n:function(){var Qr=kt.next();return un=Qr.done,Qr},e:function(Qr){Gn=!0,mr=Qr},f:function(){try{!un&&kt.return!=null&&kt.return()}finally{if(Gn)throw mr}}}}function Ya(de,ge){if(!!de){if(typeof de=="string")return Ii(de,ge);var kt=Object.prototype.toString.call(de).slice(8,-1);if(kt==="Object"&&de.constructor&&(kt=de.constructor.name),kt==="Map"||kt==="Set")return Array.from(de);if(kt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(kt))return Ii(de,ge)}}function Ii(de,ge){(ge==null||ge>de.length)&&(ge=de.length);for(var kt=0,Kt=new Array(ge);kt<ge;kt++)Kt[kt]=de[kt];return Kt}var Da=(Li=Object(e.injectable)(),Ma=Object(e.inject)(s.a.IPostProcessor),Li(ma=(la=(Ta=function(){function de(){n()(this,de),this.passes=[],We()(this,"postProcessor",ri,this),this.layer=void 0,this.renderFlag=void 0,this.width=0,this.height=0}return a()(de,[{key:"setLayer",value:function(kt){this.layer=kt}},{key:"setRenderFlag",value:function(kt){this.renderFlag=kt}},{key:"getRenderFlag",value:function(){return this.renderFlag}},{key:"getPostProcessor",value:function(){return this.postProcessor}},{key:"render",value:function(){var ge=an()(qn.a.mark(function Kt(){var Ue,un,Gn;return qn.a.wrap(function(gr){for(;;)switch(gr.prev=gr.next){case 0:Ue=Ga(this.passes),gr.prev=1,Ue.s();case 3:if((un=Ue.n()).done){gr.next=9;break}return Gn=un.value,gr.next=7,Gn.render(this.layer);case 7:gr.next=3;break;case 9:gr.next=14;break;case 11:gr.prev=11,gr.t0=gr.catch(1),Ue.e(gr.t0);case 14:return gr.prev=14,Ue.f(),gr.finish(14);case 17:this.layer.renderModels();case 18:case"end":return gr.stop()}},Kt,this,[[1,11,14,17]])}));function kt(){return ge.apply(this,arguments)}return kt}()},{key:"resize",value:function(kt,Kt){(this.width!==kt||this.height!==Kt)&&(this.width=kt,this.height=Kt)}},{key:"add",value:function(kt,Kt){kt.getType()===hn.a.PostProcessing?this.postProcessor.add(kt,this.layer,Kt):(kt.init(this.layer,Kt),this.passes.push(kt))}},{key:"insert",value:function(kt,Kt,Ue){kt.init(this.layer,Kt),this.passes.splice(Ue,0,kt)}},{key:"destroy",value:function(){this.passes.length=0}}]),de}(),Ta),ri=fn()(la.prototype,"postProcessor",[Ma],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),la))||ma),ho,js,Is,Vu,cu,j;function I(de,ge){var kt=Object.keys(de);if(Object.getOwnPropertySymbols){var Kt=Object.getOwnPropertySymbols(de);ge&&(Kt=Kt.filter(function(Ue){return Object.getOwnPropertyDescriptor(de,Ue).enumerable})),kt.push.apply(kt,Kt)}return kt}function w(de){for(var ge=1;ge<arguments.length;ge++){var kt=arguments[ge]!=null?arguments[ge]:{};ge%2?I(Object(kt),!0).forEach(function(Kt){r()(de,Kt,kt[Kt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(de,Object.getOwnPropertyDescriptors(kt)):I(Object(kt)).forEach(function(Kt){Object.defineProperty(de,Kt,Object.getOwnPropertyDescriptor(kt,Kt))})}return de}function B(de){var ge=D();return function(){var Kt=nt()(de),Ue;if(ge){var un=nt()(this).constructor;Ue=Reflect.construct(Kt,arguments,un)}else Ue=Kt.apply(this,arguments);return pt()(this,Ue)}}function D(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(de){return!1}}var G=(ho=Object(e.injectable)(),js=Object(e.inject)(s.a.ILogService),ho(Is=(Vu=(j=function(de){et()(kt,de);var ge=B(kt);function kt(){var Kt;n()(this,kt);for(var Ue=arguments.length,un=new Array(Ue),Gn=0;Gn<Ue;Gn++)un[Gn]=arguments[Gn];return Kt=ge.call.apply(ge,[this].concat(un)),We()(Kt,"logger",cu,_a()(Kt)),Kt.pickingFBO=void 0,Kt.layer=void 0,Kt.width=0,Kt.height=0,Kt.alreadyInRendering=!1,Kt.pickFromPickingFBO=function(mr){var gr=mr.x,Qr=mr.y,wi=mr.lngLat,$i=mr.type;if(!(!Kt.layer.isVisible()||!Kt.layer.needPick($i))){var ha=Kt.rendererService,xa=ha.getViewportSize,ao=ha.readPixels,vo=ha.useFramebuffer,ts=xa(),Ho=ts.width,Gs=ts.height,ru=Kt.layer.getLayerConfig(),xu=ru.enableHighlight,_s=ru.enableSelect,_u=gr*o.a.DPR,mo=Qr*o.a.DPR;if(!(_u>Ho||_u<0||mo>Gs||mo<0)){var fu;vo(Kt.pickingFBO,function(){var xl;if(fu=ao({x:Math.round(_u),y:Math.round(Gs-(Qr+1)*o.a.DPR),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:Kt.pickingFBO}),fu[0]!==0||fu[1]!==0||fu[2]!==0){Kt.logger.debug("picked");var ss=Object(o.k)(fu),Ls=Kt.layer.getSource().getFeatureById(ss),Ka={x:gr,y:Qr,type:$i,lngLat:wi,featureId:ss,feature:Ls};Ls&&(Kt.layer.setCurrentPickId(ss),Kt.triggerHoverOnLayer(Ka))}else{var Zu={x:gr,y:Qr,lngLat:wi,type:Kt.layer.getCurrentPickId()===null?"un"+$i:"mouseout",featureId:null,feature:null};Kt.triggerHoverOnLayer(w(w({},Zu),{},{type:"unpick"})),Kt.triggerHoverOnLayer(Zu),Kt.layer.setCurrentPickId(null)}xu&&Kt.highlightPickedFeature(fu),_s&&$i==="click"&&((xl=fu)===null||xl===void 0?void 0:xl.toString())!==[0,0,0,0].toString()&&Kt.selectFeature(fu)})}}},Kt}return a()(kt,[{key:"getType",value:function(){return hn.a.Normal}},{key:"getName",value:function(){return"pixelPicking"}},{key:"init",value:function(Ue,un){vn()(nt()(kt.prototype),"init",this).call(this,Ue,un),this.layer=Ue;var Gn=this.rendererService,mr=Gn.createTexture2D,gr=Gn.createFramebuffer,Qr=Gn.getViewportSize,wi=Qr(),$i=wi.width,ha=wi.height;this.pickingFBO=gr({color:mr({width:$i,height:ha,wrapS:kn.a.CLAMP_TO_EDGE,wrapT:kn.a.CLAMP_TO_EDGE})}),this.interactionService.on(io.a.Hover,this.pickFromPickingFBO),this.interactionService.on(io.a.Select,this.selectFeatureHandle.bind(this)),this.interactionService.on(io.a.Active,this.highlightFeatureHandle.bind(this))}},{key:"render",value:function(Ue){var un=this;if(!this.alreadyInRendering){var Gn=this.rendererService,mr=Gn.getViewportSize,gr=Gn.useFramebuffer,Qr=Gn.clear,wi=mr(),$i=wi.width,ha=wi.height;this.alreadyInRendering=!0,(this.width!==$i||this.height!==ha)&&(this.pickingFBO.resize({width:$i,height:ha}),this.width=$i,this.height=ha),gr(this.pickingFBO,function(){Qr({framebuffer:un.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var xa=un.layer.multiPassRenderer.getRenderFlag();un.layer.multiPassRenderer.setRenderFlag(!1),Ue.hooks.beforePickingEncode.call(),Ue.render(),Ue.hooks.afterPickingEncode.call(),un.layer.multiPassRenderer.setRenderFlag(xa),un.alreadyInRendering=!1})}}},{key:"triggerHoverOnLayer",value:function(Ue){this.layer.emit(Ue.type,Ue)}},{key:"highlightPickedFeature",value:function(Ue){var un=me()(Ue,3),Gn=un[0],mr=un[1],gr=un[2];this.layer.hooks.beforeHighlight.call([Gn,mr,gr]),this.layerService.renderLayers()}},{key:"selectFeature",value:function(Ue){var un=me()(Ue,3),Gn=un[0],mr=un[1],gr=un[2];this.layer.hooks.beforeSelect.call([Gn,mr,gr]),this.layerService.renderLayers()}},{key:"selectFeatureHandle",value:function(Ue){var un=Ue.featureId,Gn=Object(o.l)(un);this.selectFeature(new Uint8Array(Gn))}},{key:"highlightFeatureHandle",value:function(Ue){var un=Ue.featureId,Gn=Object(o.l)(un);this.highlightPickedFeature(new Uint8Array(Gn))}}]),kt}(Vr),j),cu=fn()(Vu.prototype,"logger",[js],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vu))||Is),J=L("+em5"),st,Ct;function Ot(de,ge){var kt=Object.keys(de);if(Object.getOwnPropertySymbols){var Kt=Object.getOwnPropertySymbols(de);ge&&(Kt=Kt.filter(function(Ue){return Object.getOwnPropertyDescriptor(de,Ue).enumerable})),kt.push.apply(kt,Kt)}return kt}function Ut(de){for(var ge=1;ge<arguments.length;ge++){var kt=arguments[ge]!=null?arguments[ge]:{};ge%2?Ot(Object(kt),!0).forEach(function(Kt){r()(de,Kt,kt[Kt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(de,Object.getOwnPropertyDescriptors(kt)):Ot(Object(kt)).forEach(function(Kt){Object.defineProperty(de,Kt,Object.getOwnPropertyDescriptor(kt,Kt))})}return de}function Ht(de){var ge=qt();return function(){var Kt=nt()(de),Ue;if(ge){var un=nt()(this).constructor;Ue=Reflect.construct(Kt,arguments,un)}else Ue=Kt.apply(this,arguments);return pt()(this,Ue)}}function qt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(de){return!1}}var fe=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,ye=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,De=(st=Object(e.injectable)(),st(Ct=function(de){et()(kt,de);var ge=Ht(kt);function kt(){return n()(this,kt),ge.apply(this,arguments)}return a()(kt,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:ye,fs:fe});var Ue=this.shaderModuleService.getModule("blur-pass"),un=Ue.vs,Gn=Ue.fs,mr=Ue.uniforms,gr=this.rendererService.getViewportSize(),Qr=gr.width,wi=gr.height;return{vs:un,fs:Gn,uniforms:Ut(Ut({},mr),{},{u_ViewportSize:[Qr,wi]})}}},{key:"convertOptionsToUniforms",value:function(Ue){var un={};return bs()(Ue.blurRadius)||(un.u_BlurDir=[Ue.blurRadius,0]),un}}]),kt}(J.a))||Ct),Ie,Ve;function qe(de,ge){var kt=Object.keys(de);if(Object.getOwnPropertySymbols){var Kt=Object.getOwnPropertySymbols(de);ge&&(Kt=Kt.filter(function(Ue){return Object.getOwnPropertyDescriptor(de,Ue).enumerable})),kt.push.apply(kt,Kt)}return kt}function on(de){for(var ge=1;ge<arguments.length;ge++){var kt=arguments[ge]!=null?arguments[ge]:{};ge%2?qe(Object(kt),!0).forEach(function(Kt){r()(de,Kt,kt[Kt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(de,Object.getOwnPropertyDescriptors(kt)):qe(Object(kt)).forEach(function(Kt){Object.defineProperty(de,Kt,Object.getOwnPropertyDescriptor(kt,Kt))})}return de}function tr(de){var ge=zn();return function(){var Kt=nt()(de),Ue;if(ge){var un=nt()(this).constructor;Ue=Reflect.construct(Kt,arguments,un)}else Ue=Kt.apply(this,arguments);return pt()(this,Ue)}}function zn(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(de){return!1}}var cr=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,yr=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Jr=(Ie=Object(e.injectable)(),Ie(Ve=function(de){et()(kt,de);var ge=tr(kt);function kt(){return n()(this,kt),ge.apply(this,arguments)}return a()(kt,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:yr,fs:cr});var Ue=this.shaderModuleService.getModule("blur-pass"),un=Ue.vs,Gn=Ue.fs,mr=Ue.uniforms,gr=this.rendererService.getViewportSize(),Qr=gr.width,wi=gr.height;return{vs:un,fs:Gn,uniforms:on(on({},mr),{},{u_ViewportSize:[Qr,wi]})}}},{key:"convertOptionsToUniforms",value:function(Ue){var un={};return bs()(Ue.blurRadius)||(un.u_BlurDir=[0,Ue.blurRadius]),un}}]),kt}(J.a))||Ve),Wr,bi;function ji(de,ge){var kt=Object.keys(de);if(Object.getOwnPropertySymbols){var Kt=Object.getOwnPropertySymbols(de);ge&&(Kt=Kt.filter(function(Ue){return Object.getOwnPropertyDescriptor(de,Ue).enumerable})),kt.push.apply(kt,Kt)}return kt}function Hi(de){for(var ge=1;ge<arguments.length;ge++){var kt=arguments[ge]!=null?arguments[ge]:{};ge%2?ji(Object(kt),!0).forEach(function(Kt){r()(de,Kt,kt[Kt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(de,Object.getOwnPropertyDescriptors(kt)):ji(Object(kt)).forEach(function(Kt){Object.defineProperty(de,Kt,Object.getOwnPropertyDescriptor(kt,Kt))})}return de}function Ji(de){var ge=Pa();return function(){var Kt=nt()(de),Ue;if(ge){var un=nt()(this).constructor;Ue=Reflect.construct(Kt,arguments,un)}else Ue=Kt.apply(this,arguments);return pt()(this,Ue)}}function Pa(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(de){return!1}}var ja=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Angle : 0;
uniform float u_Size : 8;

#pragma include "common"

float scale = PI / u_Size;

float pattern(float u_Angle, vec2 texSize, vec2 texCoord) {
  float s = sin(u_Angle), c = cos(u_Angle);
  vec2 tex = texCoord * texSize - u_Center * texSize;
  vec2 point = vec2(
    c * tex.x - s * tex.y,
    s * tex.x + c * tex.y
  ) * scale;
  return (sin(point.x) * sin(point.y)) * 4.0;
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/colorhalftone.js
vec4 colorHalftone_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {
  vec3 cmy = 1.0 - color.rgb;
  float k = min(cmy.x, min(cmy.y, cmy.z));
  cmy = (cmy - k) / (1.0 - k);
  cmy = clamp(
    cmy * 10.0 - 3.0 + vec3(
      pattern(u_Angle + 0.26179, texSize, texCoord),
      pattern(u_Angle + 1.30899, texSize, texCoord),
      pattern(u_Angle, texSize, texCoord)
    ),
    0.0,
    1.0
  );
  k = clamp(k * 10.0 - 5.0 + pattern(u_Angle + 0.78539, texSize, texCoord), 0.0, 1.0);
  return vec4(1.0 - cmy - k, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = colorHalftone_filterColor(gl_FragColor, u_ViewportSize, v_UV);
}`,Fi=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,va=(Wr=Object(e.injectable)(),Wr(bi=function(de){et()(kt,de);var ge=Ji(kt);function kt(){return n()(this,kt),ge.apply(this,arguments)}return a()(kt,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("colorhalftone-pass",{vs:Fi,fs:ja});var Ue=this.shaderModuleService.getModule("colorhalftone-pass"),un=Ue.vs,Gn=Ue.fs,mr=Ue.uniforms,gr=this.rendererService.getViewportSize(),Qr=gr.width,wi=gr.height;return{vs:un,fs:Gn,uniforms:Hi(Hi({},mr),{},{u_ViewportSize:[Qr,wi]})}}}]),kt}(J.a))||bi),ya,Yi;function Aa(de){var ge=ua();return function(){var Kt=nt()(de),Ue;if(ge){var un=nt()(this).constructor;Ue=Reflect.construct(Kt,arguments,un)}else Ue=Kt.apply(this,arguments);return pt()(this,Ue)}}function ua(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(de){return!1}}var Ba=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,Za=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,os=(ya=Object(e.injectable)(),ya(Yi=function(de){et()(kt,de);var ge=Aa(kt);function kt(){return n()(this,kt),ge.apply(this,arguments)}return a()(kt,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("copy-pass",{vs:Za,fs:Ba}),this.shaderModuleService.getModule("copy-pass")}}]),kt}(J.a))||Yi),Go,Bs;function Yo(de,ge){var kt=Object.keys(de);if(Object.getOwnPropertySymbols){var Kt=Object.getOwnPropertySymbols(de);ge&&(Kt=Kt.filter(function(Ue){return Object.getOwnPropertyDescriptor(de,Ue).enumerable})),kt.push.apply(kt,Kt)}return kt}function ks(de){for(var ge=1;ge<arguments.length;ge++){var kt=arguments[ge]!=null?arguments[ge]:{};ge%2?Yo(Object(kt),!0).forEach(function(Kt){r()(de,Kt,kt[Kt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(de,Object.getOwnPropertyDescriptors(kt)):Yo(Object(kt)).forEach(function(Kt){Object.defineProperty(de,Kt,Object.getOwnPropertyDescriptor(kt,Kt))})}return de}function yl(de){var ge=nl();return function(){var Kt=nt()(de),Ue;if(ge){var un=nt()(this).constructor;Ue=Reflect.construct(Kt,arguments,un)}else Ue=Kt.apply(this,arguments);return pt()(this,Ue)}}function nl(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(de){return!1}}var wl=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Scale : 10;

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/hexagonalpixelate.js
vec4 hexagonalPixelate_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 tex = (texCoord * texSize - u_Center * texSize) / u_Scale;
  tex.y /= 0.866025404;
  tex.x -= tex.y * 0.5;
  vec2 a;
  if (tex.x + tex.y - floor(tex.x) - floor(tex.y) < 1.0) {
    a = vec2(floor(tex.x), floor(tex.y));
  }
  else a = vec2(ceil(tex.x), ceil(tex.y));
  vec2 b = vec2(ceil(tex.x), floor(tex.y));
  vec2 c = vec2(floor(tex.x), ceil(tex.y));
  vec3 TEX = vec3(tex.x, tex.y, 1.0 - tex.x - tex.y);
  vec3 A = vec3(a.x, a.y, 1.0 - a.x - a.y);
  vec3 B = vec3(b.x, b.y, 1.0 - b.x - b.y);
  vec3 C = vec3(c.x, c.y, 1.0 - c.x - c.y);
  float alen = length(TEX - A);
  float blen = length(TEX - B);
  float clen = length(TEX - C);
  vec2 choice;
  if (alen < blen) {
    if (alen < clen) choice = a;
    else choice = c;
  } else {
    if (blen < clen) choice = b;
    else choice = c;
  }
  choice.x += choice.y * 0.5;
  choice.y *= 0.866025404;
  choice *= u_Scale / texSize;
  return texture2D(texture, choice + u_Center);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = hexagonalPixelate_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,yc=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Il=(Go=Object(e.injectable)(),Go(Bs=function(de){et()(kt,de);var ge=yl(kt);function kt(){return n()(this,kt),ge.apply(this,arguments)}return a()(kt,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("hexagonalpixelate-pass",{vs:yc,fs:wl});var Ue=this.shaderModuleService.getModule("hexagonalpixelate-pass"),un=Ue.vs,Gn=Ue.fs,mr=Ue.uniforms,gr=this.rendererService.getViewportSize(),Qr=gr.width,wi=gr.height;return{vs:un,fs:Gn,uniforms:ks(ks({},mr),{},{u_ViewportSize:[Qr,wi]})}}}]),kt}(J.a))||Bs),tc,xc;function Bc(de,ge){var kt=Object.keys(de);if(Object.getOwnPropertySymbols){var Kt=Object.getOwnPropertySymbols(de);ge&&(Kt=Kt.filter(function(Ue){return Object.getOwnPropertyDescriptor(de,Ue).enumerable})),kt.push.apply(kt,Kt)}return kt}function Pc(de){for(var ge=1;ge<arguments.length;ge++){var kt=arguments[ge]!=null?arguments[ge]:{};ge%2?Bc(Object(kt),!0).forEach(function(Kt){r()(de,Kt,kt[Kt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(de,Object.getOwnPropertyDescriptors(kt)):Bc(Object(kt)).forEach(function(Kt){Object.defineProperty(de,Kt,Object.getOwnPropertyDescriptor(kt,Kt))})}return de}function Uc(de){var ge=kc();return function(){var Kt=nt()(de),Ue;if(ge){var un=nt()(this).constructor;Ue=Reflect.construct(Kt,arguments,un)}else Ue=Kt.apply(this,arguments);return pt()(this,Ue)}}function kc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(de){return!1}}var Tc=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform float u_Strength : 0.6;

vec4 ink_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 dx = vec2(1.0 / texSize.x, 0.0);
  vec2 dy = vec2(0.0, 1.0 / texSize.y);
  vec4 color = texture2D(texture, texCoord);
  float bigTotal = 0.0;
  float smallTotal = 0.0;
  vec3 bigAverage = vec3(0.0);
  vec3 smallAverage = vec3(0.0);
  for (float x = -2.0; x <= 2.0; x += 1.0) {
    for (float y = -2.0; y <= 2.0; y += 1.0) {
      vec3 sample = texture2D(texture, texCoord + dx * x + dy * y).rgb;
      bigAverage += sample;
      bigTotal += 1.0;
      if (abs(x) + abs(y) < 2.0) {
        smallAverage += sample;
        smallTotal += 1.0;
      }
    }
  }
  vec3 edge = max(vec3(0.0), bigAverage / bigTotal - smallAverage / smallTotal);
  float power = u_Strength * u_Strength * u_Strength * u_Strength * u_Strength;
  return vec4(color.rgb - dot(edge, edge) * power * 100000.0, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = ink_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,Gc=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,fc=(tc=Object(e.injectable)(),tc(xc=function(de){et()(kt,de);var ge=Uc(kt);function kt(){return n()(this,kt),ge.apply(this,arguments)}return a()(kt,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("ink-pass",{vs:Gc,fs:Tc});var Ue=this.shaderModuleService.getModule("ink-pass"),un=Ue.vs,Gn=Ue.fs,mr=Ue.uniforms,gr=this.rendererService.getViewportSize(),Qr=gr.width,wi=gr.height;return{vs:un,fs:Gn,uniforms:Pc(Pc({},mr),{},{u_ViewportSize:[Qr,wi]})}}}]),kt}(J.a))||xc),Su,Ac;function Nc(de){var ge=Wl();return function(){var Kt=nt()(de),Ue;if(ge){var un=nt()(this).constructor;Ue=Reflect.construct(Kt,arguments,un)}else Ue=Kt.apply(this,arguments);return pt()(this,Ue)}}function Wl(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(de){return!1}}var dl=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform float u_Amount : 0.5;

float rand(vec2 co) {
  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/noise.js
vec4 noise_filterColor(vec4 color, vec2 texCoord) {
  float diff = (rand(texCoord) - 0.5) * u_Amount;
  color.r += diff;
  color.g += diff;
  color.b += diff;
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = noise_filterColor(gl_FragColor, v_UV);
}`,vl=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Wu=(Su=Object(e.injectable)(),Su(Ac=function(de){et()(kt,de);var ge=Nc(kt);function kt(){return n()(this,kt),ge.apply(this,arguments)}return a()(kt,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("noise-pass",{vs:vl,fs:dl}),this.shaderModuleService.getModule("noise-pass")}}]),kt}(J.a))||Ac),Hu,rl;function ec(de){var ge=Ic();return function(){var Kt=nt()(de),Ue;if(ge){var un=nt()(this).constructor;Ue=Reflect.construct(Kt,arguments,un)}else Ue=Kt.apply(this,arguments);return pt()(this,Ue)}}function Ic(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(de){return!1}}var qc=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,tf=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform float u_Amount : 0.5;

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/sepia.js
vec4 sepia_filterColor(vec4 color) {
  float r = color.r;
  float g = color.g;
  float b = color.b;
  color.r =
    min(1.0, (r * (1.0 - (0.607 * u_Amount))) + (g * (0.769 * u_Amount)) + (b * (0.189 * u_Amount)));
  color.g = min(1.0, (r * 0.349 * u_Amount) + (g * (1.0 - (0.314 * u_Amount))) + (b * 0.168 * u_Amount));
  color.b = min(1.0, (r * 0.272 * u_Amount) + (g * 0.534 * u_Amount) + (b * (1.0 - (0.869 * u_Amount))));
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = sepia_filterColor(gl_FragColor);
}`,Lc=(Hu=Object(e.injectable)(),Hu(rl=function(de){et()(kt,de);var ge=ec(kt);function kt(){return n()(this,kt),ge.apply(this,arguments)}return a()(kt,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("sepia-pass",{vs:qc,fs:tf}),this.shaderModuleService.getModule("sepia-pass")}}]),kt}(J.a))||rl),Vc,Fc,Kl,Yu,ef,Hl,bf,wf=(Vc=Object(e.injectable)(),Fc=Object(e.inject)(s.a.IRendererService),Kl=Object(e.postConstruct)(),Vc(Yu=(ef=(bf=function(){function de(){n()(this,de),We()(this,"rendererService",Hl,this),this.passes=[],this.readFBO=void 0,this.writeFBO=void 0}return a()(de,[{key:"getReadFBO",value:function(){return this.readFBO}},{key:"getWriteFBO",value:function(){return this.writeFBO}},{key:"render",value:function(){var ge=an()(qn.a.mark(function Kt(Ue){var un,Gn;return qn.a.wrap(function(gr){for(;;)switch(gr.prev=gr.next){case 0:un=0;case 1:if(!(un<this.passes.length)){gr.next=10;break}return Gn=this.passes[un],Gn.setRenderToScreen(this.isLastEnabledPass(un)),gr.next=6,Gn.render(Ue);case 6:un!==this.passes.length-1&&this.swap();case 7:un++,gr.next=1;break;case 10:case"end":return gr.stop()}},Kt,this)}));function kt(Kt){return ge.apply(this,arguments)}return kt}()},{key:"resize",value:function(kt,Kt){this.readFBO.resize({width:kt,height:Kt}),this.writeFBO.resize({width:kt,height:Kt})}},{key:"add",value:function(kt,Kt,Ue){kt.init(Kt,Ue),this.passes.push(kt)}},{key:"insert",value:function(kt,Kt,Ue,un){kt.init(Ue,un),this.passes.splice(Kt,0,kt)}},{key:"getPostProcessingPassByName",value:function(kt){return this.passes.find(function(Kt){return Kt.getName()===kt})}},{key:"init",value:function(){}},{key:"isLastEnabledPass",value:function(kt){for(var Kt=kt+1;Kt<this.passes.length;Kt++)if(this.passes[Kt].isEnabled())return!1;return!0}},{key:"swap",value:function(){var kt=this.readFBO;this.readFBO=this.writeFBO,this.writeFBO=kt}}]),de}(),bf),Hl=fn()(ef.prototype,"rendererService",[Fc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fn()(ef.prototype,"init",[Kl],Object.getOwnPropertyDescriptor(ef.prototype,"init"),ef.prototype),ef))||Yu),If,Gf;function Rc(de){var ge=Pf();return function(){var Kt=nt()(de),Ue;if(ge){var un=nt()(this).constructor;Ue=Reflect.construct(Kt,arguments,un)}else Ue=Kt.apply(this,arguments);return pt()(this,Ue)}}function Pf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(de){return!1}}var Ef=(If=Object(e.injectable)(),If(Gf=function(de){et()(kt,de);var ge=Rc(kt);function kt(){return n()(this,kt),ge.apply(this,arguments)}return a()(kt,[{key:"getType",value:function(){return hn.a.Normal}},{key:"getName",value:function(){return"render"}},{key:"init",value:function(Ue,un){vn()(nt()(kt.prototype),"init",this).call(this,Ue,un)}},{key:"render",value:function(Ue){var un=this.rendererService,Gn=un.useFramebuffer,mr=un.clear;Gn(null,function(){mr({color:[0,0,0,0],depth:1,stencil:0}),Ue.multiPassRenderer.setRenderFlag(!1),Ue.render(),Ue.multiPassRenderer.setRenderFlag(!0)})}}]),kt}(Vr))||Gf),Lf,Cc,Xc,Vf,nf,rf,Wf,Hf;function Yf(de,ge){var kt=Object.keys(de);if(Object.getOwnPropertySymbols){var Kt=Object.getOwnPropertySymbols(de);ge&&(Kt=Kt.filter(function(Ue){return Object.getOwnPropertyDescriptor(de,Ue).enumerable})),kt.push.apply(kt,Kt)}return kt}function Zf(de){for(var ge=1;ge<arguments.length;ge++){var kt=arguments[ge]!=null?arguments[ge]:{};ge%2?Yf(Object(kt),!0).forEach(function(Kt){r()(de,Kt,kt[Kt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(de,Object.getOwnPropertyDescriptors(kt)):Yf(Object(kt)).forEach(function(Kt){Object.defineProperty(de,Kt,Object.getOwnPropertyDescriptor(kt,Kt))})}return de}function Tf(de){var ge=qf();return function(){var Kt=nt()(de),Ue;if(ge){var un=nt()(this).constructor;Ue=Reflect.construct(Kt,arguments,un)}else Ue=Kt.apply(this,arguments);return pt()(this,Ue)}}function qf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(de){return!1}}var Wc=`uniform float u_opacity : 1.0;
uniform float u_MixRatio : 0.5;

uniform sampler2D u_Diffuse1;
uniform sampler2D u_Diffuse2;

varying vec2 v_UV;

void main() {
  vec4 texel1 = texture2D(u_Diffuse1, v_UV);
  vec4 texel2 = texture2D(u_Diffuse2, v_UV);
  gl_FragColor = u_opacity * mix(texel1, texel2, u_MixRatio);
}
`,hf=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,yu=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;function Hc(de,ge){for(var kt=0,Kt=1/ge,Ue=de;Ue>0;)kt=kt+Kt*(Ue%ge),Ue=Math.floor(Ue/ge),Kt=Kt/ge;return kt}var df=1,af=(Lf=Object(e.injectable)(),Cc=Object(e.inject)(s.a.IShaderModuleService),Xc=Object(e.inject)(s.a.ILogService),Lf(Vf=(nf=(Hf=function(de){et()(kt,de);var ge=Tf(kt);function kt(){var Kt;n()(this,kt);for(var Ue=arguments.length,un=new Array(Ue),Gn=0;Gn<Ue;Gn++)un[Gn]=arguments[Gn];return Kt=ge.call.apply(ge,[this].concat(un)),We()(Kt,"shaderModuleService",rf,_a()(Kt)),We()(Kt,"logger",Wf,_a()(Kt)),Kt.haltonSequence=[],Kt.accumulatingId=0,Kt.frame=0,Kt.timer=void 0,Kt.sampleRenderTarget=void 0,Kt.prevRenderTarget=void 0,Kt.outputRenderTarget=void 0,Kt.copyRenderTarget=void 0,Kt.blendModel=void 0,Kt.outputModel=void 0,Kt.copyModel=void 0,Kt}return a()(kt,[{key:"getType",value:function(){return hn.a.Normal}},{key:"getName",value:function(){return"taa"}},{key:"init",value:function(Ue,un){vn()(nt()(kt.prototype),"init",this).call(this,Ue,un);var Gn=this.rendererService,mr=Gn.createFramebuffer,gr=Gn.createTexture2D;this.sampleRenderTarget=mr({color:gr({width:1,height:1,wrapS:kn.a.CLAMP_TO_EDGE,wrapT:kn.a.CLAMP_TO_EDGE})}),this.prevRenderTarget=mr({color:gr({width:1,height:1,wrapS:kn.a.CLAMP_TO_EDGE,wrapT:kn.a.CLAMP_TO_EDGE})}),this.outputRenderTarget=mr({color:gr({width:1,height:1,wrapS:kn.a.CLAMP_TO_EDGE,wrapT:kn.a.CLAMP_TO_EDGE})}),this.copyRenderTarget=mr({color:gr({width:1,height:1,wrapS:kn.a.CLAMP_TO_EDGE,wrapT:kn.a.CLAMP_TO_EDGE})});for(var Qr=0;Qr<30;Qr++)this.haltonSequence.push([Hc(Qr,2),Hc(Qr,3)]);this.blendModel=this.createTriangleModel("blend-pass",Wc),this.outputModel=this.createTriangleModel("copy-pass",hf,{blend:{enable:!0,func:{srcRGB:kn.a.ONE,dstRGB:kn.a.ONE_MINUS_SRC_ALPHA,srcAlpha:kn.a.ONE,dstAlpha:kn.a.ONE_MINUS_SRC_ALPHA},equation:{rgb:kn.a.FUNC_ADD,alpha:kn.a.FUNC_ADD}}}),this.copyModel=this.createTriangleModel("copy-pass",hf)}},{key:"render",value:function(Ue){var un=this,Gn=this.rendererService,mr=Gn.clear,gr=Gn.getViewportSize,Qr=Gn.useFramebuffer,wi=gr(),$i=wi.width,ha=wi.height;this.sampleRenderTarget.resize({width:$i,height:ha}),this.prevRenderTarget.resize({width:$i,height:ha}),this.outputRenderTarget.resize({width:$i,height:ha}),this.copyRenderTarget.resize({width:$i,height:ha}),this.resetFrame(),this.stopAccumulating();var xa=Ue.multiPassRenderer.getPostProcessor().getReadFBO();Qr(xa,function(){mr({color:[0,0,0,0],depth:1,stencil:0,framebuffer:xa}),Ue.multiPassRenderer.setRenderFlag(!1),Ue.render(),Ue.multiPassRenderer.setRenderFlag(!0)});var ao=function vo(ts){!un.accumulatingId||ts!==un.accumulatingId||un.isFinished()||(un.doRender(Ue),requestAnimationFrame(function(){vo(ts)}))};this.accumulatingId=df++,this.timer=window.setTimeout(function(){ao(un.accumulatingId)},50)}},{key:"doRender",value:function(Ue){var un=this;this.logger.debug("accumulatingId: ".concat(this.accumulatingId));var Gn=this.rendererService,mr=Gn.clear,gr=Gn.getViewportSize,Qr=Gn.useFramebuffer,wi=gr(),$i=wi.width,ha=wi.height,xa=Ue.getLayerConfig(),ao=xa.jitterScale,vo=ao===void 0?1:ao,ts=this.haltonSequence[this.frame%this.haltonSequence.length];this.cameraService.jitterProjectionMatrix((ts[0]*2-1)/$i*vo,(ts[1]*2-1)/ha*vo),Ue.multiPassRenderer.setRenderFlag(!1),Ue.hooks.beforeRender.call(),Qr(this.sampleRenderTarget,function(){mr({color:[0,0,0,0],depth:1,stencil:0,framebuffer:un.sampleRenderTarget}),Ue.render()}),Ue.hooks.afterRender.call(),Ue.multiPassRenderer.setRenderFlag(!0);var Ho=Ue.getLayerConfig();Qr(this.outputRenderTarget,function(){un.blendModel.draw({uniforms:{u_opacity:Ho.opacity||1,u_MixRatio:un.frame===0?1:.9,u_Diffuse1:un.sampleRenderTarget,u_Diffuse2:un.frame===0?Ue.multiPassRenderer.getPostProcessor().getReadFBO():un.prevRenderTarget}})}),this.frame===0&&mr({color:[0,0,0,0],depth:1,stencil:0,framebuffer:this.copyRenderTarget}),this.frame>=1&&(Qr(this.copyRenderTarget,function(){un.outputModel.draw({uniforms:{u_Texture:un.outputRenderTarget}})}),Qr(Ue.multiPassRenderer.getPostProcessor().getReadFBO(),function(){un.copyModel.draw({uniforms:{u_Texture:un.copyRenderTarget}})}),Ue.multiPassRenderer.getPostProcessor().render(Ue));var Gs=this.prevRenderTarget;this.prevRenderTarget=this.outputRenderTarget,this.outputRenderTarget=Gs,this.frame++,this.cameraService.clearJitterProjectionMatrix()}},{key:"isFinished",value:function(){return this.frame>=this.haltonSequence.length}},{key:"resetFrame",value:function(){this.frame=0}},{key:"stopAccumulating",value:function(){this.accumulatingId=0,window.clearTimeout(this.timer)}},{key:"createTriangleModel",value:function(Ue,un,Gn){this.shaderModuleService.registerModule(Ue,{vs:yu,fs:un});var mr=this.shaderModuleService.getModule(Ue),gr=mr.vs,Qr=mr.fs,wi=mr.uniforms,$i=this.rendererService,ha=$i.createAttribute,xa=$i.createBuffer,ao=$i.createModel;return ao(Zf({vs:gr,fs:Qr,attributes:{a_Position:ha({buffer:xa({data:[-4,-4,4,-4,0,4],type:kn.a.FLOAT}),size:2})},uniforms:Zf({},wi),depth:{enable:!1},count:3},Gn))}}]),kt}(Vr),Hf),rf=fn()(nf.prototype,"shaderModuleService",[Cc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wf=fn()(nf.prototype,"logger",[Xc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nf))||Vf),oc=new e.Container;oc.bind(s.a.IGlobalConfigService).to(Ar).inSingletonScope(),oc.bind(s.a.IShaderModuleService).to(rn).inSingletonScope(),oc.bind(s.a.ILogService).to(Cu).inSingletonScope(),Object(e.decorate)(Object(e.injectable)(),E.EventEmitter),oc.bind(s.a.IEventEmitter).to(E.EventEmitter);var hc=l()(oc,!1),Sf=function(ge){var kt=hc.lazyInject(ge);return function(Kt,Ue,un){kt.call(this,Kt,Ue),un&&(un.initializer=function(){return Kt[Ue]})}},zc=function(ge){var kt=hc.lazyMultiInject(ge);return function(Kt,Ue,un){kt.call(this,Kt,Ue),un&&(un.initializer=function(){return Kt[Ue]})}},vf=ft.c=oc,_f=0;function of(){var de=new e.Container;return de.parent=oc,de.bind(s.a.SceneID).toConstantValue("".concat(_f++)),de.bind(s.a.ILayerService).to(Ui).inSingletonScope(),de.bind(s.a.ISceneService).to(we).inSingletonScope(),de.bind(s.a.ICameraService).to(_n).inSingletonScope(),de.bind(s.a.ICoordinateSystemService).to(ro).inSingletonScope(),de.bind(s.a.IInteractionService).to(Wt).inSingletonScope(),de.bind(s.a.IPickingService).to(No).inSingletonScope(),de.bind(s.a.IControlService).to(hr).inSingletonScope(),de.bind(s.a.IMarkerService).to(Jt).inSingletonScope(),de.bind(s.a.IIconService).to($t).inSingletonScope(),de.bind(s.a.IFontService).to($).inSingletonScope(),de.bind(s.a.IPopupService).to(Ce).inSingletonScope(),de.bind(s.a.INormalPass).to(Zi).whenTargetNamed("clear"),de.bind(s.a.INormalPass).to(G).whenTargetNamed("pixelPicking"),de.bind(s.a.INormalPass).to(Ef).whenTargetNamed("render"),de.bind(s.a.INormalPass).to(af).whenTargetNamed("taa"),de.bind(s.a.IFactoryNormalPass).toFactory(function(ge){return function(kt){return ge.container.getNamed(s.a.INormalPass,kt)}}),de.bind(s.a.IPostProcessingPass).to(os).whenTargetNamed("copy"),de.bind(s.a.IPostProcessingPass).to(De).whenTargetNamed("blurH"),de.bind(s.a.IPostProcessingPass).to(Jr).whenTargetNamed("blurV"),de.bind(s.a.IPostProcessingPass).to(Wu).whenTargetNamed("noise"),de.bind(s.a.IPostProcessingPass).to(Lc).whenTargetNamed("sepia"),de.bind(s.a.IPostProcessingPass).to(va).whenTargetNamed("colorHalftone"),de.bind(s.a.IPostProcessingPass).to(Il).whenTargetNamed("hexagonalPixelate"),de.bind(s.a.IPostProcessingPass).to(fc).whenTargetNamed("ink"),de.bind(s.a.IFactoryPostProcessingPass).toFactory(function(ge){return function(kt){var Kt=ge.container.getNamed(s.a.IPostProcessingPass,kt);return Kt.setName(kt),Kt}}),de}function jc(de){var ge=new e.Container;return ge.parent=de,ge.bind(s.a.IStyleAttributeService).to(ju).inSingletonScope(),ge.bind(s.a.IMultiPassRenderer).to(Da).inSingletonScope(),ge.bind(s.a.IPostProcessor).to(wf).inSingletonScope(),ge}},fbrv:function(Se,ft,L){"use strict";var U=this&&this.__spreadArrays||function(){for(var u=0,f=0,v=arguments.length;f<v;f++)u+=arguments[f].length;for(var b=Array(u),y=0,f=0;f<v;f++)for(var g=arguments[f],_=0,M=g.length;_<M;_++,y++)b[y]=g[_];return b};Object.defineProperty(ft,"__esModule",{value:!0}),ft.getFunctionName=ft.getBaseClassDependencyCount=ft.getDependencies=void 0;var E=L("Yk9n"),T=L("MON2"),e=L("FV85"),t=L("xfSm"),l=L("ujMp");Object.defineProperty(ft,"getFunctionName",{enumerable:!0,get:function(){return l.getFunctionName}});var s=L("dX1H");function c(u,f){var v=l.getFunctionName(f),b=r(u,v,f,!1);return b}ft.getDependencies=c;function r(u,f,v,b){var y=u.getConstructorMetadata(v),g=y.compilerGeneratedMetadata;if(g===void 0){var _=T.MISSING_INJECTABLE_ANNOTATION+" "+f+".";throw new Error(_)}var M=y.userGeneratedMetadata,x=Object.keys(M),m=v.length===0&&x.length>0,S=m?x.length:v.length,P=n(b,f,g,M,S),A=i(u,v),O=U(P,A);return O}function h(u,f,v,b,y){var g=y[u.toString()]||[],_=o(g),M=_.unmanaged!==!0,x=b[u],m=_.inject||_.multiInject;if(x=m||x,x instanceof E.LazyServiceIdentifer&&(x=x.unwrap()),M){var S=x===Object,P=x===Function,A=x===void 0,O=S||P||A;if(!f&&O){var R=T.MISSING_INJECT_ANNOTATION+" argument "+u+" in class "+v+".";throw new Error(R)}var W=new s.Target(e.TargetTypeEnum.ConstructorArgument,_.targetName,x);return W.metadata=g,W}return null}function n(u,f,v,b,y){for(var g=[],_=0;_<y;_++){var M=_,x=h(M,u,f,v,b);x!==null&&g.push(x)}return g}function i(u,f){for(var v=u.getPropertiesMetadata(f),b=[],y=Object.keys(v),g=0,_=y;g<_.length;g++){var M=_[g],x=v[M],m=o(v[M]),S=m.targetName||M,P=m.inject||m.multiInject,A=new s.Target(e.TargetTypeEnum.ClassProperty,S,P);A.metadata=x,b.push(A)}var O=Object.getPrototypeOf(f.prototype).constructor;if(O!==Object){var R=i(u,O);b=U(b,R)}return b}function a(u,f){var v=Object.getPrototypeOf(f.prototype).constructor;if(v!==Object){var b=l.getFunctionName(v),y=r(u,b,v,!0),g=y.map(function(x){return x.metadata.filter(function(m){return m.key===t.UNMANAGED_TAG})}),_=[].concat.apply([],g).length,M=y.length-_;return M>0?M:a(u,v)}else return 0}ft.getBaseClassDependencyCount=a;function o(u){var f={};return u.forEach(function(v){f[v.key.toString()]=v.value}),{inject:f[t.INJECT_TAG],multiInject:f[t.MULTI_INJECT_TAG],targetName:f[t.NAME_TAG],unmanaged:f[t.UNMANAGED_TAG]}}},fbvF:function(Se,ft,L){(function(U,E){Se.exports=E()})(this,function(){"use strict";var U=function(Me){return Me instanceof Uint8Array||Me instanceof Uint16Array||Me instanceof Uint32Array||Me instanceof Int8Array||Me instanceof Int16Array||Me instanceof Int32Array||Me instanceof Float32Array||Me instanceof Float64Array||Me instanceof Uint8ClampedArray},E=function(Me,Ze){for(var In=Object.keys(Ze),ir=0;ir<In.length;++ir)Me[In[ir]]=Ze[In[ir]];return Me},T=`
`;function e(ne){return typeof atob!="undefined"?atob(ne):"base64:"+ne}function t(ne){var Me=new Error("(regl) "+ne);throw console.error(Me),Me}function l(ne,Me){ne||t(Me)}function s(ne){return ne?": "+ne:""}function c(ne,Me,Ze){ne in Me||t("unknown parameter ("+ne+")"+s(Ze)+". possible values: "+Object.keys(Me).join())}function r(ne,Me){U(ne)||t("invalid parameter type"+s(Me)+". must be a typed array")}function h(ne,Me){switch(Me){case"number":return typeof ne=="number";case"object":return typeof ne=="object";case"string":return typeof ne=="string";case"boolean":return typeof ne=="boolean";case"function":return typeof ne=="function";case"undefined":return typeof ne=="undefined";case"symbol":return typeof ne=="symbol"}}function n(ne,Me,Ze){h(ne,Me)||t("invalid parameter type"+s(Ze)+". expected "+Me+", got "+typeof ne)}function i(ne,Me){ne>=0&&(ne|0)===ne||t("invalid parameter type, ("+ne+")"+s(Me)+". must be a nonnegative integer")}function a(ne,Me,Ze){Me.indexOf(ne)<0&&t("invalid value"+s(Ze)+". must be one of: "+Me)}var o=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function u(ne){Object.keys(ne).forEach(function(Me){o.indexOf(Me)<0&&t('invalid regl constructor argument "'+Me+'". must be one of '+o)})}function f(ne,Me){for(ne=ne+"";ne.length<Me;)ne=" "+ne;return ne}function v(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function b(ne,Me){this.number=ne,this.line=Me,this.errors=[]}function y(ne,Me,Ze){this.file=ne,this.line=Me,this.message=Ze}function g(){var ne=new Error,Me=(ne.stack||ne).toString(),Ze=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(Me);if(Ze)return Ze[1];var In=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(Me);return In?In[1]:"unknown"}function _(){var ne=new Error,Me=(ne.stack||ne).toString(),Ze=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(Me);if(Ze)return Ze[1];var In=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(Me);return In?In[1]:"unknown"}function M(ne,Me){var Ze=ne.split(`
`),In=1,ir=0,or={unknown:new v,0:new v};or.unknown.name=or[0].name=Me||g(),or.unknown.lines.push(new b(0,""));for(var sr=0;sr<Ze.length;++sr){var wr=Ze[sr],ni=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(wr);if(ni)switch(ni[1]){case"line":var Yr=/(\d+)(\s+\d+)?/.exec(ni[2]);Yr&&(In=Yr[1]|0,Yr[2]&&(ir=Yr[2]|0,ir in or||(or[ir]=new v)));break;case"define":var ei=/SHADER_NAME(_B64)?\s+(.*)$/.exec(ni[2]);ei&&(or[ir].name=ei[1]?e(ei[2]):ei[2]);break}or[ir].lines.push(new b(In++,wr))}return Object.keys(or).forEach(function(hi){var Ai=or[hi];Ai.lines.forEach(function(di){Ai.index[di.number]=di})}),or}function x(ne){var Me=[];return ne.split(`
`).forEach(function(Ze){if(!(Ze.length<5)){var In=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(Ze);In?Me.push(new y(In[1]|0,In[2]|0,In[3].trim())):Ze.length>0&&Me.push(new y("unknown",0,Ze))}}),Me}function m(ne,Me){Me.forEach(function(Ze){var In=ne[Ze.file];if(In){var ir=In.index[Ze.line];if(ir){ir.errors.push(Ze),In.hasErrors=!0;return}}ne.unknown.hasErrors=!0,ne.unknown.lines[0].errors.push(Ze)})}function S(ne,Me,Ze,In,ir){if(!ne.getShaderParameter(Me,ne.COMPILE_STATUS)){var or=ne.getShaderInfoLog(Me),sr=In===ne.FRAGMENT_SHADER?"fragment":"vertex";Z(Ze,"string",sr+" shader source must be a string",ir);var wr=M(Ze,ir),ni=x(or);m(wr,ni),Object.keys(wr).forEach(function(Yr){var ei=wr[Yr];if(!ei.hasErrors)return;var hi=[""],Ai=[""];function di(ai,Ir){hi.push(ai),Ai.push(Ir||"")}di("file number "+Yr+": "+ei.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),ei.lines.forEach(function(ai){if(ai.errors.length>0){di(f(ai.number,4)+"|  ","background-color:yellow; font-weight:bold"),di(ai.line+T,"color:red; background-color:yellow; font-weight:bold");var Ir=0;ai.errors.forEach(function(Mr){var vi=Mr.message,Vi=/^\s*'(.*)'\s*:\s*(.*)$/.exec(vi);if(Vi){var $r=Vi[1];switch(vi=Vi[2],$r){case"assign":$r="=";break}Ir=Math.max(ai.line.indexOf($r,Ir),0)}else Ir=0;di(f("| ",6)),di(f("^^^",Ir+3)+T,"font-weight:bold"),di(f("| ",6)),di(vi+T,"font-weight:bold")}),di(f("| ",6)+T)}else di(f(ai.number,4)+"|  "),di(ai.line+T,"color:red")}),typeof document!="undefined"&&!window.chrome?(Ai[0]=hi.join("%c"),console.log.apply(console,Ai)):console.log(hi.join(""))}),l.raise("Error compiling "+sr+" shader, "+wr[0].name)}}function P(ne,Me,Ze,In,ir){if(!ne.getProgramParameter(Me,ne.LINK_STATUS)){var or=ne.getProgramInfoLog(Me),sr=M(Ze,ir),wr=M(In,ir),ni='Error linking program with vertex shader, "'+wr[0].name+'", and fragment shader "'+sr[0].name+'"';typeof document!="undefined"?console.log("%c"+ni+T+"%c"+or,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(ni+T+or),l.raise(ni)}}function A(ne){ne._commandRef=g()}function O(ne,Me,Ze,In){A(ne);function ir(ni){return ni?In.id(ni):0}ne._fragId=ir(ne.static.frag),ne._vertId=ir(ne.static.vert);function or(ni,Yr){Object.keys(Yr).forEach(function(ei){ni[In.id(ei)]=!0})}var sr=ne._uniformSet={};or(sr,Me.static),or(sr,Me.dynamic);var wr=ne._attributeSet={};or(wr,Ze.static),or(wr,Ze.dynamic),ne._hasCount="count"in ne.static||"count"in ne.dynamic||"elements"in ne.static||"elements"in ne.dynamic}function R(ne,Me){var Ze=_();t(ne+" in command "+(Me||g())+(Ze==="unknown"?"":" called from "+Ze))}function W(ne,Me,Ze){ne||R(Me,Ze||g())}function F(ne,Me,Ze,In){ne in Me||R("unknown parameter ("+ne+")"+s(Ze)+". possible values: "+Object.keys(Me).join(),In||g())}function Z(ne,Me,Ze,In){h(ne,Me)||R("invalid parameter type"+s(Ze)+". expected "+Me+", got "+typeof ne,In||g())}function V(ne){ne()}function k(ne,Me,Ze){ne.texture?a(ne.texture._texture.internalformat,Me,"unsupported texture format for attachment"):a(ne.renderbuffer._renderbuffer.format,Ze,"unsupported renderbuffer format for attachment")}var Y=33071,K=9728,it=9984,ct=9985,ht=9986,ut=9987,It=5120,Nt=5121,Lt=5122,_t=5123,mt=5124,At=5125,rt=5126,Mt=32819,z=32820,$=33635,dt=34042,et=36193,ot={};ot[It]=ot[Nt]=1,ot[Lt]=ot[_t]=ot[et]=ot[$]=ot[Mt]=ot[z]=2,ot[mt]=ot[At]=ot[rt]=ot[dt]=4;function pt(ne,Me){return ne===z||ne===Mt||ne===$?2:ne===dt?4:ot[ne]*Me}function H(ne){return!(ne&ne-1)&&!!ne}function nt(ne,Me,Ze){var In,ir=Me.width,or=Me.height,sr=Me.channels;l(ir>0&&ir<=Ze.maxTextureSize&&or>0&&or<=Ze.maxTextureSize,"invalid texture shape"),(ne.wrapS!==Y||ne.wrapT!==Y)&&l(H(ir)&&H(or),"incompatible wrap mode for texture, both width and height must be power of 2"),Me.mipmask===1?ir!==1&&or!==1&&l(ne.minFilter!==it&&ne.minFilter!==ht&&ne.minFilter!==ct&&ne.minFilter!==ut,"min filter requires mipmap"):(l(H(ir)&&H(or),"texture must be a square power of 2 to support mipmapping"),l(Me.mipmask===(ir<<1)-1,"missing or incomplete mipmap data")),Me.type===rt&&(Ze.extensions.indexOf("oes_texture_float_linear")<0&&l(ne.minFilter===K&&ne.magFilter===K,"filter not supported, must enable oes_texture_float_linear"),l(!ne.genMipmaps,"mipmap generation not supported with float textures"));var wr=Me.images;for(In=0;In<16;++In)if(wr[In]){var ni=ir>>In,Yr=or>>In;l(Me.mipmask&1<<In,"missing mipmap data");var ei=wr[In];if(l(ei.width===ni&&ei.height===Yr,"invalid shape for mip images"),l(ei.format===Me.format&&ei.internalformat===Me.internalformat&&ei.type===Me.type,"incompatible type for mip image"),!ei.compressed)if(ei.data){var hi=Math.ceil(pt(ei.type,sr)*ni/ei.unpackAlignment)*ei.unpackAlignment;l(ei.data.byteLength===hi*Yr,"invalid data for image, buffer size is inconsistent with image format")}else ei.element||ei.copy}else ne.genMipmaps||l((Me.mipmask&1<<In)==0,"extra mipmap data");Me.compressed&&l(!ne.genMipmaps,"mipmap generation for compressed images not supported")}function at(ne,Me,Ze,In){var ir=ne.width,or=ne.height,sr=ne.channels;l(ir>0&&ir<=In.maxTextureSize&&or>0&&or<=In.maxTextureSize,"invalid texture shape"),l(ir===or,"cube map must be square"),l(Me.wrapS===Y&&Me.wrapT===Y,"wrap mode not supported by cube map");for(var wr=0;wr<Ze.length;++wr){var ni=Ze[wr];l(ni.width===ir&&ni.height===or,"inconsistent cube map face shape"),Me.genMipmaps&&(l(!ni.compressed,"can not generate mipmap for compressed textures"),l(ni.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var Yr=ni.images,ei=0;ei<16;++ei){var hi=Yr[ei];if(hi){var Ai=ir>>ei,di=or>>ei;l(ni.mipmask&1<<ei,"missing mipmap data"),l(hi.width===Ai&&hi.height===di,"invalid shape for mip images"),l(hi.format===ne.format&&hi.internalformat===ne.internalformat&&hi.type===ne.type,"incompatible type for mip image"),hi.compressed||(hi.data?l(hi.data.byteLength===Ai*di*Math.max(pt(hi.type,sr),hi.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):hi.element||hi.copy)}}}}var q=E(l,{optional:V,raise:t,commandRaise:R,command:W,parameter:c,commandParameter:F,constructor:u,type:n,commandType:Z,isTypedArray:r,nni:i,oneOf:a,shaderError:S,linkError:P,callSite:_,saveCommandRef:A,saveDrawInfo:O,framebufferFormat:k,guessCommand:g,texture2D:nt,textureCube:at}),Et=0,vt=0,Ft=5,Qt=6;function ee(ne,Me){this.id=Et++,this.type=ne,this.data=Me}function Gt(ne){return ne.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function $t(ne){if(ne.length===0)return[];var Me=ne.charAt(0),Ze=ne.charAt(ne.length-1);if(ne.length>1&&Me===Ze&&(Me==='"'||Me==="'"))return['"'+Gt(ne.substr(1,ne.length-2))+'"'];var In=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(ne);if(In)return $t(ne.substr(0,In.index)).concat($t(In[1])).concat($t(ne.substr(In.index+In[0].length)));var ir=ne.split(".");if(ir.length===1)return['"'+Gt(ne)+'"'];for(var or=[],sr=0;sr<ir.length;++sr)or=or.concat($t(ir[sr]));return or}function Pe(ne){return"["+$t(ne).join("][")+"]"}function me(ne,Me){return new ee(ne,Pe(Me+""))}function le(ne){return typeof ne=="function"&&!ne._reglType||ne instanceof ee}function be(ne,Me){if(typeof ne=="function")return new ee(vt,ne);if(typeof ne=="number"||typeof ne=="boolean")return new ee(Ft,ne);if(Array.isArray(ne))return new ee(Qt,ne.map(function(Ze,In){return be(Ze,Me+"["+In+"]")}));if(ne instanceof ee)return ne;q(!1,"invalid option type in uniform "+Me)}var ze={DynamicVariable:ee,define:me,isDynamic:le,unbox:be,accessor:Pe},Xe={next:typeof requestAnimationFrame=="function"?function(ne){return requestAnimationFrame(ne)}:function(ne){return setTimeout(ne,16)},cancel:typeof cancelAnimationFrame=="function"?function(ne){return cancelAnimationFrame(ne)}:clearTimeout},_n=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function Kn(){var ne={"":0},Me=[""];return{id:function(In){var ir=ne[In];return ir||(ir=ne[In]=Me.length,Me.push(In),ir)},str:function(In){return Me[In]}}}function Hn(ne,Me,Ze){var In=document.createElement("canvas");E(In.style,{border:0,margin:0,padding:0,top:0,left:0}),ne.appendChild(In),ne===document.body&&(In.style.position="absolute",E(ne.style,{margin:0,padding:0}));function ir(){var wr=window.innerWidth,ni=window.innerHeight;if(ne!==document.body){var Yr=ne.getBoundingClientRect();wr=Yr.right-Yr.left,ni=Yr.bottom-Yr.top}In.width=Ze*wr,In.height=Ze*ni,E(In.style,{width:wr+"px",height:ni+"px"})}var or;ne!==document.body&&typeof ResizeObserver=="function"?(or=new ResizeObserver(function(){setTimeout(ir)}),or.observe(ne)):window.addEventListener("resize",ir,!1);function sr(){or?or.disconnect():window.removeEventListener("resize",ir),ne.removeChild(In)}return ir(),{canvas:In,onDestroy:sr}}function nn(ne,Me){function Ze(In){try{return ne.getContext(In,Me)}catch(ir){return null}}return Ze("webgl")||Ze("experimental-webgl")||Ze("webgl-experimental")}function en(ne){return typeof ne.nodeName=="string"&&typeof ne.appendChild=="function"&&typeof ne.getBoundingClientRect=="function"}function An(ne){return typeof ne.drawArrays=="function"||typeof ne.drawElements=="function"}function Nn(ne){return typeof ne=="string"?ne.split():(q(Array.isArray(ne),"invalid extension array"),ne)}function hr(ne){return typeof ne=="string"?(q(typeof document!="undefined","not supported outside of DOM"),document.querySelector(ne)):ne}function fi(ne){var Me=ne||{},Ze,In,ir,or,sr={},wr=[],ni=[],Yr=typeof window=="undefined"?1:window.devicePixelRatio,ei=!1,hi=function(Ir){Ir&&q.raise(Ir)},Ai=function(){};if(typeof Me=="string"?(q(typeof document!="undefined","selector queries only supported in DOM enviroments"),Ze=document.querySelector(Me),q(Ze,"invalid query string for element")):typeof Me=="object"?en(Me)?Ze=Me:An(Me)?(or=Me,ir=or.canvas):(q.constructor(Me),"gl"in Me?or=Me.gl:"canvas"in Me?ir=hr(Me.canvas):"container"in Me&&(In=hr(Me.container)),"attributes"in Me&&(sr=Me.attributes,q.type(sr,"object","invalid context attributes")),"extensions"in Me&&(wr=Nn(Me.extensions)),"optionalExtensions"in Me&&(ni=Nn(Me.optionalExtensions)),"onDone"in Me&&(q.type(Me.onDone,"function","invalid or missing onDone callback"),hi=Me.onDone),"profile"in Me&&(ei=!!Me.profile),"pixelRatio"in Me&&(Yr=+Me.pixelRatio,q(Yr>0,"invalid pixel ratio"))):q.raise("invalid arguments to regl"),Ze&&(Ze.nodeName.toLowerCase()==="canvas"?ir=Ze:In=Ze),!or){if(!ir){q(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var di=Hn(In||document.body,hi,Yr);if(!di)return null;ir=di.canvas,Ai=di.onDestroy}sr.premultipliedAlpha===void 0&&(sr.premultipliedAlpha=!0),or=nn(ir,sr)}return or?{gl:or,canvas:ir,container:In,extensions:wr,optionalExtensions:ni,pixelRatio:Yr,profile:ei,onDone:hi,onDestroy:Ai}:(Ai(),hi("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Oe(ne,Me){var Ze={};function In(sr){q.type(sr,"string","extension name must be string");var wr=sr.toLowerCase(),ni;try{ni=Ze[wr]=ne.getExtension(wr)}catch(Yr){}return!!ni}for(var ir=0;ir<Me.extensions.length;++ir){var or=Me.extensions[ir];if(!In(or))return Me.onDestroy(),Me.onDone('"'+or+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return Me.optionalExtensions.forEach(In),{extensions:Ze,restore:function(){Object.keys(Ze).forEach(function(wr){if(Ze[wr]&&!In(wr))throw new Error("(regl): error restoring extension "+wr)})}}}function Ae(ne,Me){for(var Ze=Array(ne),In=0;In<ne;++In)Ze[In]=Me(In);return Ze}var Jt=5120,ve=5121,Vt=5122,ie=5123,Ce=5124,ue=5125,xe=5126;function $e(ne){for(var Me=16;Me<=1<<28;Me*=16)if(ne<=Me)return Me;return 0}function Fn(ne){var Me,Ze;return Me=(ne>65535)<<4,ne>>>=Me,Ze=(ne>255)<<3,ne>>>=Ze,Me|=Ze,Ze=(ne>15)<<2,ne>>>=Ze,Me|=Ze,Ze=(ne>3)<<1,ne>>>=Ze,Me|=Ze,Me|ne>>1}function rr(){var ne=Ae(8,function(){return[]});function Me(or){var sr=$e(or),wr=ne[Fn(sr)>>2];return wr.length>0?wr.pop():new ArrayBuffer(sr)}function Ze(or){ne[Fn(or.byteLength)>>2].push(or)}function In(or,sr){var wr=null;switch(or){case Jt:wr=new Int8Array(Me(sr),0,sr);break;case ve:wr=new Uint8Array(Me(sr),0,sr);break;case Vt:wr=new Int16Array(Me(2*sr),0,sr);break;case ie:wr=new Uint16Array(Me(2*sr),0,sr);break;case Ce:wr=new Int32Array(Me(4*sr),0,sr);break;case ue:wr=new Uint32Array(Me(4*sr),0,sr);break;case xe:wr=new Float32Array(Me(4*sr),0,sr);break;default:return null}return wr.length!==sr?wr.subarray(0,sr):wr}function ir(or){Ze(or.buffer)}return{alloc:Me,free:Ze,allocType:In,freeType:ir}}var En=rr();En.zero=rr();var Pn=3408,Er=3410,Pr=3411,ln=3412,Cr=3413,Ar=3414,je=3415,We=33901,Ye=33902,fn=3379,mn=3386,jn=34921,bn=36347,Ln=36348,nr=35661,Yn=35660,Mn=34930,Rr=36349,pr=34076,zr=34024,Pi=7936,Oa=7937,Ua=7938,ro=35724,Ko=34047,_a=36063,co=34852,Xo=3553,io=34067,To=34069,ds=33984,La=6408,Vo=5126,Bo=5121,lu=36160,Jo=36053,iu=36064,$s=16384,Ne=function(Me,Ze){var In=1;Ze.ext_texture_filter_anisotropic&&(In=Me.getParameter(Ko));var ir=1,or=1;Ze.webgl_draw_buffers&&(ir=Me.getParameter(co),or=Me.getParameter(_a));var sr=!!Ze.oes_texture_float;if(sr){var wr=Me.createTexture();Me.bindTexture(Xo,wr),Me.texImage2D(Xo,0,La,1,1,0,La,Vo,null);var ni=Me.createFramebuffer();if(Me.bindFramebuffer(lu,ni),Me.framebufferTexture2D(lu,iu,Xo,wr,0),Me.bindTexture(Xo,null),Me.checkFramebufferStatus(lu)!==Jo)sr=!1;else{Me.viewport(0,0,1,1),Me.clearColor(1,0,0,1),Me.clear($s);var Yr=En.allocType(Vo,4);Me.readPixels(0,0,1,1,La,Vo,Yr),Me.getError()?sr=!1:(Me.deleteFramebuffer(ni),Me.deleteTexture(wr),sr=Yr[0]===1),En.freeType(Yr)}}var ei=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),hi=!0;if(!ei){var Ai=Me.createTexture(),di=En.allocType(Bo,36);Me.activeTexture(ds),Me.bindTexture(io,Ai),Me.texImage2D(To,0,La,3,3,0,La,Bo,di),En.freeType(di),Me.bindTexture(io,null),Me.deleteTexture(Ai),hi=!Me.getError()}return{colorBits:[Me.getParameter(Er),Me.getParameter(Pr),Me.getParameter(ln),Me.getParameter(Cr)],depthBits:Me.getParameter(Ar),stencilBits:Me.getParameter(je),subpixelBits:Me.getParameter(Pn),extensions:Object.keys(Ze).filter(function(ai){return!!Ze[ai]}),maxAnisotropic:In,maxDrawbuffers:ir,maxColorAttachments:or,pointSizeDims:Me.getParameter(We),lineWidthDims:Me.getParameter(Ye),maxViewportDims:Me.getParameter(mn),maxCombinedTextureUnits:Me.getParameter(nr),maxCubeMapSize:Me.getParameter(pr),maxRenderbufferSize:Me.getParameter(zr),maxTextureUnits:Me.getParameter(Mn),maxTextureSize:Me.getParameter(fn),maxAttributes:Me.getParameter(jn),maxVertexUniforms:Me.getParameter(bn),maxVertexTextureUnits:Me.getParameter(Yn),maxVaryingVectors:Me.getParameter(Ln),maxFragmentUniforms:Me.getParameter(Rr),glsl:Me.getParameter(ro),renderer:Me.getParameter(Oa),vendor:Me.getParameter(Pi),version:Me.getParameter(Ua),readFloat:sr,npotTextureCube:hi}};function oe(ne){return!!ne&&typeof ne=="object"&&Array.isArray(ne.shape)&&Array.isArray(ne.stride)&&typeof ne.offset=="number"&&ne.shape.length===ne.stride.length&&(Array.isArray(ne.data)||U(ne.data))}var Wt=function(Me){return Object.keys(Me).map(function(Ze){return Me[Ze]})},Ee={shape:Si,flatten:Xr};function an(ne,Me,Ze){for(var In=0;In<Me;++In)Ze[In]=ne[In]}function Un(ne,Me,Ze,In){for(var ir=0,or=0;or<Me;++or)for(var sr=ne[or],wr=0;wr<Ze;++wr)In[ir++]=sr[wr]}function qn(ne,Me,Ze,In,ir,or){for(var sr=or,wr=0;wr<Me;++wr)for(var ni=ne[wr],Yr=0;Yr<Ze;++Yr)for(var ei=ni[Yr],hi=0;hi<In;++hi)ir[sr++]=ei[hi]}function kn(ne,Me,Ze,In,ir){for(var or=1,sr=Ze+1;sr<Me.length;++sr)or*=Me[sr];var wr=Me[Ze];if(Me.length-Ze==4){var ni=Me[Ze+1],Yr=Me[Ze+2],ei=Me[Ze+3];for(sr=0;sr<wr;++sr)qn(ne[sr],ni,Yr,ei,In,ir),ir+=or}else for(sr=0;sr<wr;++sr)kn(ne[sr],Me,Ze+1,In,ir),ir+=or}function Xr(ne,Me,Ze,In){var ir=1;if(Me.length)for(var or=0;or<Me.length;++or)ir*=Me[or];else ir=0;var sr=In||En.allocType(Ze,ir);switch(Me.length){case 0:break;case 1:an(ne,Me[0],sr);break;case 2:Un(ne,Me[0],Me[1],sr);break;case 3:qn(ne,Me[0],Me[1],Me[2],sr,0);break;default:kn(ne,Me,0,sr,0)}return sr}function Si(ne){for(var Me=[],Ze=ne;Ze.length;Ze=Ze[0])Me.push(Ze.length);return Me}var Ti={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},ki=5120,sa=5122,$a=5124,ba=5121,bo=5123,Fa=5125,oo=5126,Eo=5126,Qa={int8:ki,int16:sa,int32:$a,uint8:ba,uint16:bo,uint32:Fa,float:oo,float32:Eo},Ao=35048,as=35040,No={dynamic:Ao,stream:as,static:35044},xs=Ee.flatten,Co=Ee.shape,qa=35044,Ts=35040,ls=5121,wa=5126,yn=[];yn[5120]=1,yn[5122]=2,yn[5124]=4,yn[5121]=1,yn[5123]=2,yn[5125]=4,yn[5126]=4;function dr(ne){return Ti[Object.prototype.toString.call(ne)]|0}function kr(ne,Me){for(var Ze=0;Ze<Me.length;++Ze)ne[Ze]=Me[Ze]}function Ui(ne,Me,Ze,In,ir,or,sr){for(var wr=0,ni=0;ni<Ze;++ni)for(var Yr=0;Yr<In;++Yr)ne[wr++]=Me[ir*ni+or*Yr+sr]}function Ja(ne,Me,Ze,In){var ir=0,or={};function sr(Ir){this.id=ir++,this.buffer=ne.createBuffer(),this.type=Ir,this.usage=qa,this.byteLength=0,this.dimension=1,this.dtype=ls,this.persistentData=null,Ze.profile&&(this.stats={size:0})}sr.prototype.bind=function(){ne.bindBuffer(this.type,this.buffer)},sr.prototype.destroy=function(){Ai(this)};var wr=[];function ni(Ir,Mr){var vi=wr.pop();return vi||(vi=new sr(Ir)),vi.bind(),hi(vi,Mr,Ts,0,1,!1),vi}function Yr(Ir){wr.push(Ir)}function ei(Ir,Mr,vi){Ir.byteLength=Mr.byteLength,ne.bufferData(Ir.type,Mr,vi)}function hi(Ir,Mr,vi,Vi,$r,ra){var Ci;if(Ir.usage=vi,Array.isArray(Mr)){if(Ir.dtype=Vi||wa,Mr.length>0){var Ei;if(Array.isArray(Mr[0])){Ci=Co(Mr);for(var xi=1,Oi=1;Oi<Ci.length;++Oi)xi*=Ci[Oi];Ir.dimension=xi,Ei=xs(Mr,Ci,Ir.dtype),ei(Ir,Ei,vi),ra?Ir.persistentData=Ei:En.freeType(Ei)}else if(typeof Mr[0]=="number"){Ir.dimension=$r;var oa=En.allocType(Ir.dtype,Mr.length);kr(oa,Mr),ei(Ir,oa,vi),ra?Ir.persistentData=oa:En.freeType(oa)}else U(Mr[0])?(Ir.dimension=Mr[0].length,Ir.dtype=Vi||dr(Mr[0])||wa,Ei=xs(Mr,[Mr.length,Mr[0].length],Ir.dtype),ei(Ir,Ei,vi),ra?Ir.persistentData=Ei:En.freeType(Ei)):q.raise("invalid buffer data")}}else if(U(Mr))Ir.dtype=Vi||dr(Mr),Ir.dimension=$r,ei(Ir,Mr,vi),ra&&(Ir.persistentData=new Uint8Array(new Uint8Array(Mr.buffer)));else if(oe(Mr)){Ci=Mr.shape;var Sa=Mr.stride,Di=Mr.offset,_i=0,mi=0,za=0,ia=0;Ci.length===1?(_i=Ci[0],mi=1,za=Sa[0],ia=0):Ci.length===2?(_i=Ci[0],mi=Ci[1],za=Sa[0],ia=Sa[1]):q.raise("invalid shape"),Ir.dtype=Vi||dr(Mr.data)||wa,Ir.dimension=mi;var Ki=En.allocType(Ir.dtype,_i*mi);Ui(Ki,Mr.data,_i,mi,za,ia,Di),ei(Ir,Ki,vi),ra?Ir.persistentData=Ki:En.freeType(Ki)}else Mr instanceof ArrayBuffer?(Ir.dtype=ls,Ir.dimension=$r,ei(Ir,Mr,vi),ra&&(Ir.persistentData=new Uint8Array(new Uint8Array(Mr)))):q.raise("invalid buffer data")}function Ai(Ir){Me.bufferCount--,In(Ir);var Mr=Ir.buffer;q(Mr,"buffer must not be deleted already"),ne.deleteBuffer(Mr),Ir.buffer=null,delete or[Ir.id]}function di(Ir,Mr,vi,Vi){Me.bufferCount++;var $r=new sr(Mr);or[$r.id]=$r;function ra(xi){var Oi=qa,oa=null,Sa=0,Di=0,_i=1;return Array.isArray(xi)||U(xi)||oe(xi)||xi instanceof ArrayBuffer?oa=xi:typeof xi=="number"?Sa=xi|0:xi&&(q.type(xi,"object","buffer arguments must be an object, a number or an array"),"data"in xi&&(q(oa===null||Array.isArray(oa)||U(oa)||oe(oa),"invalid data for buffer"),oa=xi.data),"usage"in xi&&(q.parameter(xi.usage,No,"invalid buffer usage"),Oi=No[xi.usage]),"type"in xi&&(q.parameter(xi.type,Qa,"invalid buffer type"),Di=Qa[xi.type]),"dimension"in xi&&(q.type(xi.dimension,"number","invalid dimension"),_i=xi.dimension|0),"length"in xi&&(q.nni(Sa,"buffer length must be a nonnegative integer"),Sa=xi.length|0)),$r.bind(),oa?hi($r,oa,Oi,Di,_i,Vi):(Sa&&ne.bufferData($r.type,Sa,Oi),$r.dtype=Di||ls,$r.usage=Oi,$r.dimension=_i,$r.byteLength=Sa),Ze.profile&&($r.stats.size=$r.byteLength*yn[$r.dtype]),ra}function Ci(xi,Oi){q(Oi+xi.byteLength<=$r.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+xi.byteLength+" starting from offset "+Oi+" to a buffer of size "+$r.byteLength),ne.bufferSubData($r.type,Oi,xi)}function Ei(xi,Oi){var oa=(Oi||0)|0,Sa;if($r.bind(),U(xi)||xi instanceof ArrayBuffer)Ci(xi,oa);else if(Array.isArray(xi)){if(xi.length>0)if(typeof xi[0]=="number"){var Di=En.allocType($r.dtype,xi.length);kr(Di,xi),Ci(Di,oa),En.freeType(Di)}else if(Array.isArray(xi[0])||U(xi[0])){Sa=Co(xi);var _i=xs(xi,Sa,$r.dtype);Ci(_i,oa),En.freeType(_i)}else q.raise("invalid buffer data")}else if(oe(xi)){Sa=xi.shape;var mi=xi.stride,za=0,ia=0,Ki=0,Oo=0;Sa.length===1?(za=Sa[0],ia=1,Ki=mi[0],Oo=0):Sa.length===2?(za=Sa[0],ia=Sa[1],Ki=mi[0],Oo=mi[1]):q.raise("invalid shape");var so=Array.isArray(xi.data)?$r.dtype:dr(xi.data),Do=En.allocType(so,za*ia);Ui(Do,xi.data,za,ia,Ki,Oo,xi.offset),Ci(Do,oa),En.freeType(Do)}else q.raise("invalid data for buffer subdata");return ra}return vi||ra(Ir),ra._reglType="buffer",ra._buffer=$r,ra.subdata=Ei,Ze.profile&&(ra.stats=$r.stats),ra.destroy=function(){Ai($r)},ra}function ai(){Wt(or).forEach(function(Ir){Ir.buffer=ne.createBuffer(),ne.bindBuffer(Ir.type,Ir.buffer),ne.bufferData(Ir.type,Ir.persistentData||Ir.byteLength,Ir.usage)})}return Ze.profile&&(Me.getTotalBufferSize=function(){var Ir=0;return Object.keys(or).forEach(function(Mr){Ir+=or[Mr].stats.size}),Ir}),{create:di,createStream:ni,destroyStream:Yr,clear:function(){Wt(or).forEach(Ai),wr.forEach(Ai)},getBuffer:function(Mr){return Mr&&Mr._buffer instanceof sr?Mr._buffer:null},restore:ai,_initBuffer:hi}}var So=0,po=0,ea=1,to=1,bs=4,Es=4,ka={points:So,point:po,lines:ea,line:to,triangles:bs,triangle:Es,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},bu=0,Wo=1,As=4,Qs=5120,vs=5121,ps=5122,cs=5123,gs=5124,Cs=5125,Pu=34963,ju=35040,fo=35044;function Ns(ne,Me,Ze,In){var ir={},or=0,sr={uint8:vs,uint16:cs};Me.oes_element_index_uint&&(sr.uint32=Cs);function wr(ai){this.id=or++,ir[this.id]=this,this.buffer=ai,this.primType=As,this.vertCount=0,this.type=0}wr.prototype.bind=function(){this.buffer.bind()};var ni=[];function Yr(ai){var Ir=ni.pop();return Ir||(Ir=new wr(Ze.create(null,Pu,!0,!1)._buffer)),hi(Ir,ai,ju,-1,-1,0,0),Ir}function ei(ai){ni.push(ai)}function hi(ai,Ir,Mr,vi,Vi,$r,ra){ai.buffer.bind();var Ci;if(Ir){var Ei=ra;!ra&&(!U(Ir)||oe(Ir)&&!U(Ir.data))&&(Ei=Me.oes_element_index_uint?Cs:cs),Ze._initBuffer(ai.buffer,Ir,Mr,Ei,3)}else ne.bufferData(Pu,$r,Mr),ai.buffer.dtype=Ci||vs,ai.buffer.usage=Mr,ai.buffer.dimension=3,ai.buffer.byteLength=$r;if(Ci=ra,!ra){switch(ai.buffer.dtype){case vs:case Qs:Ci=vs;break;case cs:case ps:Ci=cs;break;case Cs:case gs:Ci=Cs;break;default:q.raise("unsupported type for element array")}ai.buffer.dtype=Ci}ai.type=Ci,q(Ci!==Cs||!!Me.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var xi=Vi;xi<0&&(xi=ai.buffer.byteLength,Ci===cs?xi>>=1:Ci===Cs&&(xi>>=2)),ai.vertCount=xi;var Oi=vi;if(vi<0){Oi=As;var oa=ai.buffer.dimension;oa===1&&(Oi=bu),oa===2&&(Oi=Wo),oa===3&&(Oi=As)}ai.primType=Oi}function Ai(ai){In.elementsCount--,q(ai.buffer!==null,"must not double destroy elements"),delete ir[ai.id],ai.buffer.destroy(),ai.buffer=null}function di(ai,Ir){var Mr=Ze.create(null,Pu,!0),vi=new wr(Mr._buffer);In.elementsCount++;function Vi($r){if(!$r)Mr(),vi.primType=As,vi.vertCount=0,vi.type=vs;else if(typeof $r=="number")Mr($r),vi.primType=As,vi.vertCount=$r|0,vi.type=vs;else{var ra=null,Ci=fo,Ei=-1,xi=-1,Oi=0,oa=0;Array.isArray($r)||U($r)||oe($r)?ra=$r:(q.type($r,"object","invalid arguments for elements"),"data"in $r&&(ra=$r.data,q(Array.isArray(ra)||U(ra)||oe(ra),"invalid data for element buffer")),"usage"in $r&&(q.parameter($r.usage,No,"invalid element buffer usage"),Ci=No[$r.usage]),"primitive"in $r&&(q.parameter($r.primitive,ka,"invalid element buffer primitive"),Ei=ka[$r.primitive]),"count"in $r&&(q(typeof $r.count=="number"&&$r.count>=0,"invalid vertex count for elements"),xi=$r.count|0),"type"in $r&&(q.parameter($r.type,sr,"invalid buffer type"),oa=sr[$r.type]),"length"in $r?Oi=$r.length|0:(Oi=xi,oa===cs||oa===ps?Oi*=2:(oa===Cs||oa===gs)&&(Oi*=4))),hi(vi,ra,Ci,Ei,xi,Oi,oa)}return Vi}return Vi(ai),Vi._reglType="elements",Vi._elements=vi,Vi.subdata=function($r,ra){return Mr.subdata($r,ra),Vi},Vi.destroy=function(){Ai(vi)},Vi}return{create:di,createStream:Yr,destroyStream:ei,getElements:function(Ir){return typeof Ir=="function"&&Ir._elements instanceof wr?Ir._elements:null},clear:function(){Wt(ir).forEach(Ai)}}}var Bu=new Float32Array(1),ll=new Uint32Array(Bu.buffer),cl=5123;function Xu(ne){for(var Me=En.allocType(cl,ne.length),Ze=0;Ze<ne.length;++Ze)if(isNaN(ne[Ze]))Me[Ze]=65535;else if(ne[Ze]===Infinity)Me[Ze]=31744;else if(ne[Ze]===-Infinity)Me[Ze]=64512;else{Bu[0]=ne[Ze];var In=ll[0],ir=In>>>31<<15,or=(In<<1>>>24)-127,sr=In>>13&(1<<10)-1;if(or<-24)Me[Ze]=ir;else if(or<-14){var wr=-14-or;Me[Ze]=ir+(sr+(1<<10)>>wr)}else or>15?Me[Ze]=ir+31744:Me[Ze]=ir+(or+15<<10)+sr}return Me}function Io(ne){return Array.isArray(ne)||U(ne)}var Ra=function(Me){return!(Me&Me-1)&&!!Me},Ea=34467,Ro=3553,pu=34067,Ml=34069,Fs=6408,Ss=6406,au=6407,qs=6409,Ds=6410,Ju=32854,ou=32855,Wa=36194,Pl=32819,$l=32820,Tl=33635,Ql=34042,Nu=6402,Ha=34041,su=35904,Al=35906,ms=36193,Tu=33776,gu=33777,Fu=33778,Hs=33779,$o=35986,fs=35987,fl=34798,zl=35840,ql=35841,zu=35842,$u=35843,Au=36196,Cu=5121,mu=5123,Uu=5125,zs=5126,Ul=10242,gc=10243,Cl=10497,kl=33071,Gl=33648,cc=10240,Qu=10241,Ol=9728,Vl=9729,tu=9984,go=9985,gl=9986,hl=9987,Ys=33170,Na=4352,_o=4353,Us=4354,ml=34046,qu=3317,ku=37440,mc=37441,Os=37443,tl=37444,uu=33984,Zs=[tu,gl,go,hl],Qo=[0,qs,Ds,au,Fs],eu={};eu[qs]=eu[Ss]=eu[Nu]=1,eu[Ha]=eu[Ds]=2,eu[au]=eu[su]=3,eu[Fs]=eu[Al]=4;function Ou(ne){return"[object "+ne+"]"}var qo=Ou("HTMLCanvasElement"),Wi=Ou("OffscreenCanvas"),ws=Ou("CanvasRenderingContext2D"),Gu=Ou("ImageBitmap"),wu=Ou("HTMLImageElement"),Fo=Ou("HTMLVideoElement"),ko=Object.keys(Ti).concat([qo,Wi,ws,Gu,wu,Fo]),Eu=[];Eu[Cu]=1,Eu[zs]=4,Eu[ms]=2,Eu[mu]=2,Eu[Uu]=4;var Mi=[];Mi[Ju]=2,Mi[ou]=2,Mi[Wa]=2,Mi[Ha]=4,Mi[Tu]=.5,Mi[gu]=.5,Mi[Fu]=1,Mi[Hs]=1,Mi[$o]=.5,Mi[fs]=1,Mi[fl]=1,Mi[zl]=.5,Mi[ql]=.25,Mi[zu]=.5,Mi[$u]=.25,Mi[Au]=.5;function el(ne){return Array.isArray(ne)&&(ne.length===0||typeof ne[0]=="number")}function Iu(ne){if(!Array.isArray(ne))return!1;var Me=ne.length;return!(Me===0||!Io(ne[0]))}function Lu(ne){return Object.prototype.toString.call(ne)}function nu(ne){return Lu(ne)===qo}function we(ne){return Lu(ne)===Wi}function Te(ne){return Lu(ne)===ws}function dn(ne){return Lu(ne)===Gu}function tn(ne){return Lu(ne)===wu}function wn(ne){return Lu(ne)===Fo}function vr(ne){if(!ne)return!1;var Me=Lu(ne);return ko.indexOf(Me)>=0?!0:el(ne)||Iu(ne)||oe(ne)}function Lr(ne){return Ti[Object.prototype.toString.call(ne)]|0}function Kr(ne,Me){var Ze=Me.length;switch(ne.type){case Cu:case mu:case Uu:case zs:var In=En.allocType(ne.type,Ze);In.set(Me),ne.data=In;break;case ms:ne.data=Xu(Me);break;default:q.raise("unsupported texture type, must specify a typed array")}}function ti(ne,Me){return En.allocType(ne.type===ms?zs:ne.type,Me)}function Fr(ne,Me){ne.type===ms?(ne.data=Xu(Me),En.freeType(Me)):ne.data=Me}function ui(ne,Me,Ze,In,ir,or){for(var sr=ne.width,wr=ne.height,ni=ne.channels,Yr=sr*wr*ni,ei=ti(ne,Yr),hi=0,Ai=0;Ai<wr;++Ai)for(var di=0;di<sr;++di)for(var ai=0;ai<ni;++ai)ei[hi++]=Me[Ze*di+In*Ai+ir*ai+or];Fr(ne,ei)}function br(ne,Me,Ze,In,ir,or){var sr;if(typeof Mi[ne]!="undefined"?sr=Mi[ne]:sr=eu[ne]*Eu[Me],or&&(sr*=6),ir){for(var wr=0,ni=Ze;ni>=1;)wr+=sr*ni*ni,ni/=2;return wr}else return sr*Ze*In}function Zt(ne,Me,Ze,In,ir,or,sr){var wr={"don't care":Na,"dont care":Na,nice:Us,fast:_o},ni={repeat:Cl,clamp:kl,mirror:Gl},Yr={nearest:Ol,linear:Vl},ei=E({mipmap:hl,"nearest mipmap nearest":tu,"linear mipmap nearest":go,"nearest mipmap linear":gl,"linear mipmap linear":hl},Yr),hi={none:0,browser:tl},Ai={uint8:Cu,rgba4:Pl,rgb565:Tl,"rgb5 a1":$l},di={alpha:Ss,luminance:qs,"luminance alpha":Ds,rgb:au,rgba:Fs,rgba4:Ju,"rgb5 a1":ou,rgb565:Wa},ai={};Me.ext_srgb&&(di.srgb=su,di.srgba=Al),Me.oes_texture_float&&(Ai.float32=Ai.float=zs),Me.oes_texture_half_float&&(Ai.float16=Ai["half float"]=ms),Me.webgl_depth_texture&&(E(di,{depth:Nu,"depth stencil":Ha}),E(Ai,{uint16:mu,uint32:Uu,"depth stencil":Ql})),Me.webgl_compressed_texture_s3tc&&E(ai,{"rgb s3tc dxt1":Tu,"rgba s3tc dxt1":gu,"rgba s3tc dxt3":Fu,"rgba s3tc dxt5":Hs}),Me.webgl_compressed_texture_atc&&E(ai,{"rgb atc":$o,"rgba atc explicit alpha":fs,"rgba atc interpolated alpha":fl}),Me.webgl_compressed_texture_pvrtc&&E(ai,{"rgb pvrtc 4bppv1":zl,"rgb pvrtc 2bppv1":ql,"rgba pvrtc 4bppv1":zu,"rgba pvrtc 2bppv1":$u}),Me.webgl_compressed_texture_etc1&&(ai["rgb etc1"]=Au);var Ir=Array.prototype.slice.call(ne.getParameter(Ea));Object.keys(ai).forEach(function(Dn){var Zr=ai[Dn];Ir.indexOf(Zr)>=0&&(di[Dn]=Zr)});var Mr=Object.keys(di);Ze.textureFormats=Mr;var vi=[];Object.keys(di).forEach(function(Dn){var Zr=di[Dn];vi[Zr]=Dn});var Vi=[];Object.keys(Ai).forEach(function(Dn){var Zr=Ai[Dn];Vi[Zr]=Dn});var $r=[];Object.keys(Yr).forEach(function(Dn){var Zr=Yr[Dn];$r[Zr]=Dn});var ra=[];Object.keys(ei).forEach(function(Dn){var Zr=ei[Dn];ra[Zr]=Dn});var Ci=[];Object.keys(ni).forEach(function(Dn){var Zr=ni[Dn];Ci[Zr]=Dn});var Ei=Mr.reduce(function(Dn,Zr){var Ur=di[Zr];return Ur===qs||Ur===Ss||Ur===qs||Ur===Ds||Ur===Nu||Ur===Ha||Me.ext_srgb&&(Ur===su||Ur===Al)?Dn[Ur]=Ur:Ur===ou||Zr.indexOf("rgba")>=0?Dn[Ur]=Fs:Dn[Ur]=au,Dn},{});function xi(){this.internalformat=Fs,this.format=Fs,this.type=Cu,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=tl,this.width=0,this.height=0,this.channels=0}function Oi(Dn,Zr){Dn.internalformat=Zr.internalformat,Dn.format=Zr.format,Dn.type=Zr.type,Dn.compressed=Zr.compressed,Dn.premultiplyAlpha=Zr.premultiplyAlpha,Dn.flipY=Zr.flipY,Dn.unpackAlignment=Zr.unpackAlignment,Dn.colorSpace=Zr.colorSpace,Dn.width=Zr.width,Dn.height=Zr.height,Dn.channels=Zr.channels}function oa(Dn,Zr){if(!(typeof Zr!="object"||!Zr)){if("premultiplyAlpha"in Zr&&(q.type(Zr.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),Dn.premultiplyAlpha=Zr.premultiplyAlpha),"flipY"in Zr&&(q.type(Zr.flipY,"boolean","invalid texture flip"),Dn.flipY=Zr.flipY),"alignment"in Zr&&(q.oneOf(Zr.alignment,[1,2,4,8],"invalid texture unpack alignment"),Dn.unpackAlignment=Zr.alignment),"colorSpace"in Zr&&(q.parameter(Zr.colorSpace,hi,"invalid colorSpace"),Dn.colorSpace=hi[Zr.colorSpace]),"type"in Zr){var Ur=Zr.type;q(Me.oes_texture_float||!(Ur==="float"||Ur==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),q(Me.oes_texture_half_float||!(Ur==="half float"||Ur==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),q(Me.webgl_depth_texture||!(Ur==="uint16"||Ur==="uint32"||Ur==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),q.parameter(Ur,Ai,"invalid texture type"),Dn.type=Ai[Ur]}var ta=Dn.width,wo=Dn.height,Sn=Dn.channels,sn=!1;"shape"in Zr?(q(Array.isArray(Zr.shape)&&Zr.shape.length>=2,"shape must be an array"),ta=Zr.shape[0],wo=Zr.shape[1],Zr.shape.length===3&&(Sn=Zr.shape[2],q(Sn>0&&Sn<=4,"invalid number of channels"),sn=!0),q(ta>=0&&ta<=Ze.maxTextureSize,"invalid width"),q(wo>=0&&wo<=Ze.maxTextureSize,"invalid height")):("radius"in Zr&&(ta=wo=Zr.radius,q(ta>=0&&ta<=Ze.maxTextureSize,"invalid radius")),"width"in Zr&&(ta=Zr.width,q(ta>=0&&ta<=Ze.maxTextureSize,"invalid width")),"height"in Zr&&(wo=Zr.height,q(wo>=0&&wo<=Ze.maxTextureSize,"invalid height")),"channels"in Zr&&(Sn=Zr.channels,q(Sn>0&&Sn<=4,"invalid number of channels"),sn=!0)),Dn.width=ta|0,Dn.height=wo|0,Dn.channels=Sn|0;var er=!1;if("format"in Zr){var Or=Zr.format;q(Me.webgl_depth_texture||!(Or==="depth"||Or==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),q.parameter(Or,di,"invalid texture format");var Dr=Dn.internalformat=di[Or];Dn.format=Ei[Dr],Or in Ai&&("type"in Zr||(Dn.type=Ai[Or])),Or in ai&&(Dn.compressed=!0),er=!0}!sn&&er?Dn.channels=eu[Dn.format]:sn&&!er?Dn.channels!==Qo[Dn.format]&&(Dn.format=Dn.internalformat=Qo[Dn.channels]):er&&sn&&q(Dn.channels===eu[Dn.format],"number of channels inconsistent with specified format")}}function Sa(Dn){ne.pixelStorei(ku,Dn.flipY),ne.pixelStorei(mc,Dn.premultiplyAlpha),ne.pixelStorei(Os,Dn.colorSpace),ne.pixelStorei(qu,Dn.unpackAlignment)}function Di(){xi.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function _i(Dn,Zr){var Ur=null;if(vr(Zr)?Ur=Zr:Zr&&(q.type(Zr,"object","invalid pixel data type"),oa(Dn,Zr),"x"in Zr&&(Dn.xOffset=Zr.x|0),"y"in Zr&&(Dn.yOffset=Zr.y|0),vr(Zr.data)&&(Ur=Zr.data)),q(!Dn.compressed||Ur instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),Zr.copy){q(!Ur,"can not specify copy and data field for the same texture");var ta=ir.viewportWidth,wo=ir.viewportHeight;Dn.width=Dn.width||ta-Dn.xOffset,Dn.height=Dn.height||wo-Dn.yOffset,Dn.needsCopy=!0,q(Dn.xOffset>=0&&Dn.xOffset<ta&&Dn.yOffset>=0&&Dn.yOffset<wo&&Dn.width>0&&Dn.width<=ta&&Dn.height>0&&Dn.height<=wo,"copy texture read out of bounds")}else if(!Ur)Dn.width=Dn.width||1,Dn.height=Dn.height||1,Dn.channels=Dn.channels||4;else if(U(Ur))Dn.channels=Dn.channels||4,Dn.data=Ur,!("type"in Zr)&&Dn.type===Cu&&(Dn.type=Lr(Ur));else if(el(Ur))Dn.channels=Dn.channels||4,Kr(Dn,Ur),Dn.alignment=1,Dn.needsFree=!0;else if(oe(Ur)){var Sn=Ur.data;!Array.isArray(Sn)&&Dn.type===Cu&&(Dn.type=Lr(Sn));var sn=Ur.shape,er=Ur.stride,Or,Dr,ur,ar,Sr,Tn;sn.length===3?(ur=sn[2],Tn=er[2]):(q(sn.length===2,"invalid ndarray pixel data, must be 2 or 3D"),ur=1,Tn=1),Or=sn[0],Dr=sn[1],ar=er[0],Sr=er[1],Dn.alignment=1,Dn.width=Or,Dn.height=Dr,Dn.channels=ur,Dn.format=Dn.internalformat=Qo[ur],Dn.needsFree=!0,ui(Dn,Sn,ar,Sr,Tn,Ur.offset)}else if(nu(Ur)||we(Ur)||Te(Ur))nu(Ur)||we(Ur)?Dn.element=Ur:Dn.element=Ur.canvas,Dn.width=Dn.element.width,Dn.height=Dn.element.height,Dn.channels=4;else if(dn(Ur))Dn.element=Ur,Dn.width=Ur.width,Dn.height=Ur.height,Dn.channels=4;else if(tn(Ur))Dn.element=Ur,Dn.width=Ur.naturalWidth,Dn.height=Ur.naturalHeight,Dn.channels=4;else if(wn(Ur))Dn.element=Ur,Dn.width=Ur.videoWidth,Dn.height=Ur.videoHeight,Dn.channels=4;else if(Iu(Ur)){var Qn=Dn.width||Ur[0].length,xn=Dn.height||Ur.length,Tr=Dn.channels;Io(Ur[0][0])?Tr=Tr||Ur[0][0].length:Tr=Tr||1;for(var jr=Ee.shape(Ur),li=1,Hr=0;Hr<jr.length;++Hr)li*=jr[Hr];var ii=ti(Dn,li);Ee.flatten(Ur,jr,"",ii),Fr(Dn,ii),Dn.alignment=1,Dn.width=Qn,Dn.height=xn,Dn.channels=Tr,Dn.format=Dn.internalformat=Qo[Tr],Dn.needsFree=!0}Dn.type===zs?q(Ze.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):Dn.type===ms&&q(Ze.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function mi(Dn,Zr,Ur){var ta=Dn.element,wo=Dn.data,Sn=Dn.internalformat,sn=Dn.format,er=Dn.type,Or=Dn.width,Dr=Dn.height;Sa(Dn),ta?ne.texImage2D(Zr,Ur,sn,sn,er,ta):Dn.compressed?ne.compressedTexImage2D(Zr,Ur,Sn,Or,Dr,0,wo):Dn.needsCopy?(In(),ne.copyTexImage2D(Zr,Ur,sn,Dn.xOffset,Dn.yOffset,Or,Dr,0)):ne.texImage2D(Zr,Ur,sn,Or,Dr,0,sn,er,wo||null)}function za(Dn,Zr,Ur,ta,wo){var Sn=Dn.element,sn=Dn.data,er=Dn.internalformat,Or=Dn.format,Dr=Dn.type,ur=Dn.width,ar=Dn.height;Sa(Dn),Sn?ne.texSubImage2D(Zr,wo,Ur,ta,Or,Dr,Sn):Dn.compressed?ne.compressedTexSubImage2D(Zr,wo,Ur,ta,er,ur,ar,sn):Dn.needsCopy?(In(),ne.copyTexSubImage2D(Zr,wo,Ur,ta,Dn.xOffset,Dn.yOffset,ur,ar)):ne.texSubImage2D(Zr,wo,Ur,ta,ur,ar,Or,Dr,sn)}var ia=[];function Ki(){return ia.pop()||new Di}function Oo(Dn){Dn.needsFree&&En.freeType(Dn.data),Di.call(Dn),ia.push(Dn)}function so(){xi.call(this),this.genMipmaps=!1,this.mipmapHint=Na,this.mipmask=0,this.images=Array(16)}function Do(Dn,Zr,Ur){var ta=Dn.images[0]=Ki();Dn.mipmask=1,ta.width=Dn.width=Zr,ta.height=Dn.height=Ur,ta.channels=Dn.channels=4}function Ms(Dn,Zr){var Ur=null;if(vr(Zr))Ur=Dn.images[0]=Ki(),Oi(Ur,Dn),_i(Ur,Zr),Dn.mipmask=1;else if(oa(Dn,Zr),Array.isArray(Zr.mipmap))for(var ta=Zr.mipmap,wo=0;wo<ta.length;++wo)Ur=Dn.images[wo]=Ki(),Oi(Ur,Dn),Ur.width>>=wo,Ur.height>>=wo,_i(Ur,ta[wo]),Dn.mipmask|=1<<wo;else Ur=Dn.images[0]=Ki(),Oi(Ur,Dn),_i(Ur,Zr),Dn.mipmask=1;Oi(Dn,Dn.images[0]),Dn.compressed&&(Dn.internalformat===Tu||Dn.internalformat===gu||Dn.internalformat===Fu||Dn.internalformat===Hs)&&q(Dn.width%4==0&&Dn.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function bl(Dn,Zr){for(var Ur=Dn.images,ta=0;ta<Ur.length;++ta){if(!Ur[ta])return;mi(Ur[ta],Zr,ta)}}var Xl=[];function Zo(){var Dn=Xl.pop()||new so;xi.call(Dn),Dn.mipmask=0;for(var Zr=0;Zr<16;++Zr)Dn.images[Zr]=null;return Dn}function Ku(Dn){for(var Zr=Dn.images,Ur=0;Ur<Zr.length;++Ur)Zr[Ur]&&Oo(Zr[Ur]),Zr[Ur]=null;Xl.push(Dn)}function Ks(){this.minFilter=Ol,this.magFilter=Ol,this.wrapS=kl,this.wrapT=kl,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Na}function Jl(Dn,Zr){if("min"in Zr){var Ur=Zr.min;q.parameter(Ur,ei),Dn.minFilter=ei[Ur],Zs.indexOf(Dn.minFilter)>=0&&!("faces"in Zr)&&(Dn.genMipmaps=!0)}if("mag"in Zr){var ta=Zr.mag;q.parameter(ta,Yr),Dn.magFilter=Yr[ta]}var wo=Dn.wrapS,Sn=Dn.wrapT;if("wrap"in Zr){var sn=Zr.wrap;typeof sn=="string"?(q.parameter(sn,ni),wo=Sn=ni[sn]):Array.isArray(sn)&&(q.parameter(sn[0],ni),q.parameter(sn[1],ni),wo=ni[sn[0]],Sn=ni[sn[1]])}else{if("wrapS"in Zr){var er=Zr.wrapS;q.parameter(er,ni),wo=ni[er]}if("wrapT"in Zr){var Or=Zr.wrapT;q.parameter(Or,ni),Sn=ni[Or]}}if(Dn.wrapS=wo,Dn.wrapT=Sn,"anisotropic"in Zr){var Dr=Zr.anisotropic;q(typeof Dr=="number"&&Dr>=1&&Dr<=Ze.maxAnisotropic,"aniso samples must be between 1 and "),Dn.anisotropic=Zr.anisotropic}if("mipmap"in Zr){var ur=!1;switch(typeof Zr.mipmap){case"string":q.parameter(Zr.mipmap,wr,"invalid mipmap hint"),Dn.mipmapHint=wr[Zr.mipmap],Dn.genMipmaps=!0,ur=!0;break;case"boolean":ur=Dn.genMipmaps=Zr.mipmap;break;case"object":q(Array.isArray(Zr.mipmap),"invalid mipmap type"),Dn.genMipmaps=!1,ur=!0;break;default:q.raise("invalid mipmap type")}ur&&!("min"in Zr)&&(Dn.minFilter=tu)}}function Ll(Dn,Zr){ne.texParameteri(Zr,Qu,Dn.minFilter),ne.texParameteri(Zr,cc,Dn.magFilter),ne.texParameteri(Zr,Ul,Dn.wrapS),ne.texParameteri(Zr,gc,Dn.wrapT),Me.ext_texture_filter_anisotropic&&ne.texParameteri(Zr,ml,Dn.anisotropic),Dn.genMipmaps&&(ne.hint(Ys,Dn.mipmapHint),ne.generateMipmap(Zr))}var Yl=0,Rl={},dc=Ze.maxTextureUnits,El=Array(dc).map(function(){return null});function Ca(Dn){xi.call(this),this.mipmask=0,this.internalformat=Fs,this.id=Yl++,this.refCount=1,this.target=Dn,this.texture=ne.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Ks,sr.profile&&(this.stats={size:0})}function Ec(Dn){ne.activeTexture(uu),ne.bindTexture(Dn.target,Dn.texture)}function Vs(){var Dn=El[0];Dn?ne.bindTexture(Dn.target,Dn.texture):ne.bindTexture(Ro,null)}function Xi(Dn){var Zr=Dn.texture;q(Zr,"must not double destroy texture");var Ur=Dn.unit,ta=Dn.target;Ur>=0&&(ne.activeTexture(uu+Ur),ne.bindTexture(ta,null),El[Ur]=null),ne.deleteTexture(Zr),Dn.texture=null,Dn.params=null,Dn.pixels=null,Dn.refCount=0,delete Rl[Dn.id],or.textureCount--}E(Ca.prototype,{bind:function(){var Zr=this;Zr.bindCount+=1;var Ur=Zr.unit;if(Ur<0){for(var ta=0;ta<dc;++ta){var wo=El[ta];if(wo){if(wo.bindCount>0)continue;wo.unit=-1}El[ta]=Zr,Ur=ta;break}Ur>=dc&&q.raise("insufficient number of texture units"),sr.profile&&or.maxTextureUnits<Ur+1&&(or.maxTextureUnits=Ur+1),Zr.unit=Ur,ne.activeTexture(uu+Ur),ne.bindTexture(Zr.target,Zr.texture)}return Ur},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&Xi(this)}});function Mo(Dn,Zr){var Ur=new Ca(Ro);Rl[Ur.id]=Ur,or.textureCount++;function ta(sn,er){var Or=Ur.texInfo;Ks.call(Or);var Dr=Zo();return typeof sn=="number"?typeof er=="number"?Do(Dr,sn|0,er|0):Do(Dr,sn|0,sn|0):sn?(q.type(sn,"object","invalid arguments to regl.texture"),Jl(Or,sn),Ms(Dr,sn)):Do(Dr,1,1),Or.genMipmaps&&(Dr.mipmask=(Dr.width<<1)-1),Ur.mipmask=Dr.mipmask,Oi(Ur,Dr),q.texture2D(Or,Dr,Ze),Ur.internalformat=Dr.internalformat,ta.width=Dr.width,ta.height=Dr.height,Ec(Ur),bl(Dr,Ro),Ll(Or,Ro),Vs(),Ku(Dr),sr.profile&&(Ur.stats.size=br(Ur.internalformat,Ur.type,Dr.width,Dr.height,Or.genMipmaps,!1)),ta.format=vi[Ur.internalformat],ta.type=Vi[Ur.type],ta.mag=$r[Or.magFilter],ta.min=ra[Or.minFilter],ta.wrapS=Ci[Or.wrapS],ta.wrapT=Ci[Or.wrapT],ta}function wo(sn,er,Or,Dr){q(!!sn,"must specify image data");var ur=er|0,ar=Or|0,Sr=Dr|0,Tn=Ki();return Oi(Tn,Ur),Tn.width=0,Tn.height=0,_i(Tn,sn),Tn.width=Tn.width||(Ur.width>>Sr)-ur,Tn.height=Tn.height||(Ur.height>>Sr)-ar,q(Ur.type===Tn.type&&Ur.format===Tn.format&&Ur.internalformat===Tn.internalformat,"incompatible format for texture.subimage"),q(ur>=0&&ar>=0&&ur+Tn.width<=Ur.width&&ar+Tn.height<=Ur.height,"texture.subimage write out of bounds"),q(Ur.mipmask&1<<Sr,"missing mipmap data"),q(Tn.data||Tn.element||Tn.needsCopy,"missing image data"),Ec(Ur),za(Tn,Ro,ur,ar,Sr),Vs(),Oo(Tn),ta}function Sn(sn,er){var Or=sn|0,Dr=er|0||Or;if(Or===Ur.width&&Dr===Ur.height)return ta;ta.width=Ur.width=Or,ta.height=Ur.height=Dr,Ec(Ur);for(var ur=0;Ur.mipmask>>ur;++ur){var ar=Or>>ur,Sr=Dr>>ur;if(!ar||!Sr)break;ne.texImage2D(Ro,ur,Ur.format,ar,Sr,0,Ur.format,Ur.type,null)}return Vs(),sr.profile&&(Ur.stats.size=br(Ur.internalformat,Ur.type,Or,Dr,!1,!1)),ta}return ta(Dn,Zr),ta.subimage=wo,ta.resize=Sn,ta._reglType="texture2d",ta._texture=Ur,sr.profile&&(ta.stats=Ur.stats),ta.destroy=function(){Ur.decRef()},ta}function zo(Dn,Zr,Ur,ta,wo,Sn){var sn=new Ca(pu);Rl[sn.id]=sn,or.cubeCount++;var er=new Array(6);function Or(ar,Sr,Tn,Qn,xn,Tr){var jr,li=sn.texInfo;for(Ks.call(li),jr=0;jr<6;++jr)er[jr]=Zo();if(typeof ar=="number"||!ar){var Hr=ar|0||1;for(jr=0;jr<6;++jr)Do(er[jr],Hr,Hr)}else if(typeof ar=="object")if(Sr)Ms(er[0],ar),Ms(er[1],Sr),Ms(er[2],Tn),Ms(er[3],Qn),Ms(er[4],xn),Ms(er[5],Tr);else if(Jl(li,ar),oa(sn,ar),"faces"in ar){var ii=ar.faces;for(q(Array.isArray(ii)&&ii.length===6,"cube faces must be a length 6 array"),jr=0;jr<6;++jr)q(typeof ii[jr]=="object"&&!!ii[jr],"invalid input for cube map face"),Oi(er[jr],sn),Ms(er[jr],ii[jr])}else for(jr=0;jr<6;++jr)Ms(er[jr],ar);else q.raise("invalid arguments to cube map");for(Oi(sn,er[0]),Ze.npotTextureCube||q(Ra(sn.width)&&Ra(sn.height),"your browser does not support non power or two texture dimensions"),li.genMipmaps?sn.mipmask=(er[0].width<<1)-1:sn.mipmask=er[0].mipmask,q.textureCube(sn,li,er,Ze),sn.internalformat=er[0].internalformat,Or.width=er[0].width,Or.height=er[0].height,Ec(sn),jr=0;jr<6;++jr)bl(er[jr],Ml+jr);for(Ll(li,pu),Vs(),sr.profile&&(sn.stats.size=br(sn.internalformat,sn.type,Or.width,Or.height,li.genMipmaps,!0)),Or.format=vi[sn.internalformat],Or.type=Vi[sn.type],Or.mag=$r[li.magFilter],Or.min=ra[li.minFilter],Or.wrapS=Ci[li.wrapS],Or.wrapT=Ci[li.wrapT],jr=0;jr<6;++jr)Ku(er[jr]);return Or}function Dr(ar,Sr,Tn,Qn,xn){q(!!Sr,"must specify image data"),q(typeof ar=="number"&&ar===(ar|0)&&ar>=0&&ar<6,"invalid face");var Tr=Tn|0,jr=Qn|0,li=xn|0,Hr=Ki();return Oi(Hr,sn),Hr.width=0,Hr.height=0,_i(Hr,Sr),Hr.width=Hr.width||(sn.width>>li)-Tr,Hr.height=Hr.height||(sn.height>>li)-jr,q(sn.type===Hr.type&&sn.format===Hr.format&&sn.internalformat===Hr.internalformat,"incompatible format for texture.subimage"),q(Tr>=0&&jr>=0&&Tr+Hr.width<=sn.width&&jr+Hr.height<=sn.height,"texture.subimage write out of bounds"),q(sn.mipmask&1<<li,"missing mipmap data"),q(Hr.data||Hr.element||Hr.needsCopy,"missing image data"),Ec(sn),za(Hr,Ml+ar,Tr,jr,li),Vs(),Oo(Hr),Or}function ur(ar){var Sr=ar|0;if(Sr!==sn.width){Or.width=sn.width=Sr,Or.height=sn.height=Sr,Ec(sn);for(var Tn=0;Tn<6;++Tn)for(var Qn=0;sn.mipmask>>Qn;++Qn)ne.texImage2D(Ml+Tn,Qn,sn.format,Sr>>Qn,Sr>>Qn,0,sn.format,sn.type,null);return Vs(),sr.profile&&(sn.stats.size=br(sn.internalformat,sn.type,Or.width,Or.height,!1,!0)),Or}}return Or(Dn,Zr,Ur,ta,wo,Sn),Or.subimage=Dr,Or.resize=ur,Or._reglType="textureCube",Or._texture=sn,sr.profile&&(Or.stats=sn.stats),Or.destroy=function(){sn.decRef()},Or}function Dl(){for(var Dn=0;Dn<dc;++Dn)ne.activeTexture(uu+Dn),ne.bindTexture(Ro,null),El[Dn]=null;Wt(Rl).forEach(Xi),or.cubeCount=0,or.textureCount=0}sr.profile&&(or.getTotalTextureSize=function(){var Dn=0;return Object.keys(Rl).forEach(function(Zr){Dn+=Rl[Zr].stats.size}),Dn});function Sc(){for(var Dn=0;Dn<dc;++Dn){var Zr=El[Dn];Zr&&(Zr.bindCount=0,Zr.unit=-1,El[Dn]=null)}Wt(Rl).forEach(function(Ur){Ur.texture=ne.createTexture(),ne.bindTexture(Ur.target,Ur.texture);for(var ta=0;ta<32;++ta)if((Ur.mipmask&1<<ta)!=0)if(Ur.target===Ro)ne.texImage2D(Ro,ta,Ur.internalformat,Ur.width>>ta,Ur.height>>ta,0,Ur.internalformat,Ur.type,null);else for(var wo=0;wo<6;++wo)ne.texImage2D(Ml+wo,ta,Ur.internalformat,Ur.width>>ta,Ur.height>>ta,0,Ur.internalformat,Ur.type,null);Ll(Ur.texInfo,Ur.target)})}function mf(){for(var Dn=0;Dn<dc;++Dn){var Zr=El[Dn];Zr&&(Zr.bindCount=0,Zr.unit=-1,El[Dn]=null),ne.activeTexture(uu+Dn),ne.bindTexture(Ro,null),ne.bindTexture(pu,null)}}return{create2D:Mo,createCube:zo,clear:Dl,getTexture:function(Zr){return null},restore:Sc,refresh:mf}}var te=36161,Le=32854,_e=32855,Rt=36194,zt=33189,se=36168,re=34041,ce=35907,Fe=34836,Ke=34842,rn=34843,Je=[];Je[Le]=2,Je[_e]=2,Je[Rt]=2,Je[zt]=2,Je[se]=1,Je[re]=4,Je[ce]=4,Je[Fe]=16,Je[Ke]=8,Je[rn]=6;function vn(ne,Me,Ze){return Je[ne]*Me*Ze}var hn=function(Me,Ze,In,ir,or){var sr={rgba4:Le,rgb565:Rt,"rgb5 a1":_e,depth:zt,stencil:se,"depth stencil":re};Ze.ext_srgb&&(sr.srgba=ce),Ze.ext_color_buffer_half_float&&(sr.rgba16f=Ke,sr.rgb16f=rn),Ze.webgl_color_buffer_float&&(sr.rgba32f=Fe);var wr=[];Object.keys(sr).forEach(function(ai){var Ir=sr[ai];wr[Ir]=ai});var ni=0,Yr={};function ei(ai){this.id=ni++,this.refCount=1,this.renderbuffer=ai,this.format=Le,this.width=0,this.height=0,or.profile&&(this.stats={size:0})}ei.prototype.decRef=function(){--this.refCount<=0&&hi(this)};function hi(ai){var Ir=ai.renderbuffer;q(Ir,"must not double destroy renderbuffer"),Me.bindRenderbuffer(te,null),Me.deleteRenderbuffer(Ir),ai.renderbuffer=null,ai.refCount=0,delete Yr[ai.id],ir.renderbufferCount--}function Ai(ai,Ir){var Mr=new ei(Me.createRenderbuffer());Yr[Mr.id]=Mr,ir.renderbufferCount++;function vi($r,ra){var Ci=0,Ei=0,xi=Le;if(typeof $r=="object"&&$r){var Oi=$r;if("shape"in Oi){var oa=Oi.shape;q(Array.isArray(oa)&&oa.length>=2,"invalid renderbuffer shape"),Ci=oa[0]|0,Ei=oa[1]|0}else"radius"in Oi&&(Ci=Ei=Oi.radius|0),"width"in Oi&&(Ci=Oi.width|0),"height"in Oi&&(Ei=Oi.height|0);"format"in Oi&&(q.parameter(Oi.format,sr,"invalid renderbuffer format"),xi=sr[Oi.format])}else typeof $r=="number"?(Ci=$r|0,typeof ra=="number"?Ei=ra|0:Ei=Ci):$r?q.raise("invalid arguments to renderbuffer constructor"):Ci=Ei=1;if(q(Ci>0&&Ei>0&&Ci<=In.maxRenderbufferSize&&Ei<=In.maxRenderbufferSize,"invalid renderbuffer size"),!(Ci===Mr.width&&Ei===Mr.height&&xi===Mr.format))return vi.width=Mr.width=Ci,vi.height=Mr.height=Ei,Mr.format=xi,Me.bindRenderbuffer(te,Mr.renderbuffer),Me.renderbufferStorage(te,xi,Ci,Ei),q(Me.getError()===0,"invalid render buffer format"),or.profile&&(Mr.stats.size=vn(Mr.format,Mr.width,Mr.height)),vi.format=wr[Mr.format],vi}function Vi($r,ra){var Ci=$r|0,Ei=ra|0||Ci;return Ci===Mr.width&&Ei===Mr.height||(q(Ci>0&&Ei>0&&Ci<=In.maxRenderbufferSize&&Ei<=In.maxRenderbufferSize,"invalid renderbuffer size"),vi.width=Mr.width=Ci,vi.height=Mr.height=Ei,Me.bindRenderbuffer(te,Mr.renderbuffer),Me.renderbufferStorage(te,Mr.format,Ci,Ei),q(Me.getError()===0,"invalid render buffer format"),or.profile&&(Mr.stats.size=vn(Mr.format,Mr.width,Mr.height))),vi}return vi(ai,Ir),vi.resize=Vi,vi._reglType="renderbuffer",vi._renderbuffer=Mr,or.profile&&(vi.stats=Mr.stats),vi.destroy=function(){Mr.decRef()},vi}or.profile&&(ir.getTotalRenderbufferSize=function(){var ai=0;return Object.keys(Yr).forEach(function(Ir){ai+=Yr[Ir].stats.size}),ai});function di(){Wt(Yr).forEach(function(ai){ai.renderbuffer=Me.createRenderbuffer(),Me.bindRenderbuffer(te,ai.renderbuffer),Me.renderbufferStorage(te,ai.format,ai.width,ai.height)}),Me.bindRenderbuffer(te,null)}return{create:Ai,clear:function(){Wt(Yr).forEach(hi)},restore:di}},Jn=36160,Vn=36161,Zn=3553,Wn=34069,lr=36064,xr=36096,Vr=36128,yi=33306,Br=36053,si=36054,gi=36055,Zi=36057,Li=36061,Ma=36193,ma=5121,la=5126,ri=6407,Ta=6408,Ga=6402,Ya=[ri,Ta],Ii=[];Ii[Ta]=4,Ii[ri]=3;var Da=[];Da[ma]=1,Da[la]=4,Da[Ma]=2;var ho=32854,js=32855,Is=36194,Vu=33189,cu=36168,j=34041,I=35907,w=34836,B=34842,D=34843,G=[ho,js,Is,I,B,D,w],J={};J[Br]="complete",J[si]="incomplete attachment",J[Zi]="incomplete dimensions",J[gi]="incomplete, missing attachment",J[Li]="unsupported";function st(ne,Me,Ze,In,ir,or){var sr={cur:null,next:null,dirty:!1,setFBO:null},wr=["rgba"],ni=["rgba4","rgb565","rgb5 a1"];Me.ext_srgb&&ni.push("srgba"),Me.ext_color_buffer_half_float&&ni.push("rgba16f","rgb16f"),Me.webgl_color_buffer_float&&ni.push("rgba32f");var Yr=["uint8"];Me.oes_texture_half_float&&Yr.push("half float","float16"),Me.oes_texture_float&&Yr.push("float","float32");function ei(Di,_i,mi){this.target=Di,this.texture=_i,this.renderbuffer=mi;var za=0,ia=0;_i?(za=_i.width,ia=_i.height):mi&&(za=mi.width,ia=mi.height),this.width=za,this.height=ia}function hi(Di){Di&&(Di.texture&&Di.texture._texture.decRef(),Di.renderbuffer&&Di.renderbuffer._renderbuffer.decRef())}function Ai(Di,_i,mi){if(!!Di)if(Di.texture){var za=Di.texture._texture,ia=Math.max(1,za.width),Ki=Math.max(1,za.height);q(ia===_i&&Ki===mi,"inconsistent width/height for supplied texture"),za.refCount+=1}else{var Oo=Di.renderbuffer._renderbuffer;q(Oo.width===_i&&Oo.height===mi,"inconsistent width/height for renderbuffer"),Oo.refCount+=1}}function di(Di,_i){_i&&(_i.texture?ne.framebufferTexture2D(Jn,Di,_i.target,_i.texture._texture.texture,0):ne.framebufferRenderbuffer(Jn,Di,Vn,_i.renderbuffer._renderbuffer.renderbuffer))}function ai(Di){var _i=Zn,mi=null,za=null,ia=Di;typeof Di=="object"&&(ia=Di.data,"target"in Di&&(_i=Di.target|0)),q.type(ia,"function","invalid attachment data");var Ki=ia._reglType;return Ki==="texture2d"?(mi=ia,q(_i===Zn)):Ki==="textureCube"?(mi=ia,q(_i>=Wn&&_i<Wn+6,"invalid cube map target")):Ki==="renderbuffer"?(za=ia,_i=Vn):q.raise("invalid regl object for attachment"),new ei(_i,mi,za)}function Ir(Di,_i,mi,za,ia){if(mi){var Ki=In.create2D({width:Di,height:_i,format:za,type:ia});return Ki._texture.refCount=0,new ei(Zn,Ki,null)}else{var Oo=ir.create({width:Di,height:_i,format:za});return Oo._renderbuffer.refCount=0,new ei(Vn,null,Oo)}}function Mr(Di){return Di&&(Di.texture||Di.renderbuffer)}function vi(Di,_i,mi){Di&&(Di.texture?Di.texture.resize(_i,mi):Di.renderbuffer&&Di.renderbuffer.resize(_i,mi),Di.width=_i,Di.height=mi)}var Vi=0,$r={};function ra(){this.id=Vi++,$r[this.id]=this,this.framebuffer=ne.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function Ci(Di){Di.colorAttachments.forEach(hi),hi(Di.depthAttachment),hi(Di.stencilAttachment),hi(Di.depthStencilAttachment)}function Ei(Di){var _i=Di.framebuffer;q(_i,"must not double destroy framebuffer"),ne.deleteFramebuffer(_i),Di.framebuffer=null,or.framebufferCount--,delete $r[Di.id]}function xi(Di){var _i;ne.bindFramebuffer(Jn,Di.framebuffer);var mi=Di.colorAttachments;for(_i=0;_i<mi.length;++_i)di(lr+_i,mi[_i]);for(_i=mi.length;_i<Ze.maxColorAttachments;++_i)ne.framebufferTexture2D(Jn,lr+_i,Zn,null,0);ne.framebufferTexture2D(Jn,yi,Zn,null,0),ne.framebufferTexture2D(Jn,xr,Zn,null,0),ne.framebufferTexture2D(Jn,Vr,Zn,null,0),di(xr,Di.depthAttachment),di(Vr,Di.stencilAttachment),di(yi,Di.depthStencilAttachment);var za=ne.checkFramebufferStatus(Jn);!ne.isContextLost()&&za!==Br&&q.raise("framebuffer configuration not supported, status = "+J[za]),ne.bindFramebuffer(Jn,sr.next?sr.next.framebuffer:null),sr.cur=sr.next,ne.getError()}function Oi(Di,_i){var mi=new ra;or.framebufferCount++;function za(Ki,Oo){var so;q(sr.next!==mi,"can not update framebuffer which is currently in use");var Do=0,Ms=0,bl=!0,Xl=!0,Zo=null,Ku=!0,Ks="rgba",Jl="uint8",Ll=1,Yl=null,Rl=null,dc=null,El=!1;if(typeof Ki=="number")Do=Ki|0,Ms=Oo|0||Do;else if(!Ki)Do=Ms=1;else{q.type(Ki,"object","invalid arguments for framebuffer");var Ca=Ki;if("shape"in Ca){var Ec=Ca.shape;q(Array.isArray(Ec)&&Ec.length>=2,"invalid shape for framebuffer"),Do=Ec[0],Ms=Ec[1]}else"radius"in Ca&&(Do=Ms=Ca.radius),"width"in Ca&&(Do=Ca.width),"height"in Ca&&(Ms=Ca.height);("color"in Ca||"colors"in Ca)&&(Zo=Ca.color||Ca.colors,Array.isArray(Zo)&&q(Zo.length===1||Me.webgl_draw_buffers,"multiple render targets not supported")),Zo||("colorCount"in Ca&&(Ll=Ca.colorCount|0,q(Ll>0,"invalid color buffer count")),"colorTexture"in Ca&&(Ku=!!Ca.colorTexture,Ks="rgba4"),"colorType"in Ca&&(Jl=Ca.colorType,Ku?(q(Me.oes_texture_float||!(Jl==="float"||Jl==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),q(Me.oes_texture_half_float||!(Jl==="half float"||Jl==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):Jl==="half float"||Jl==="float16"?(q(Me.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),Ks="rgba16f"):(Jl==="float"||Jl==="float32")&&(q(Me.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),Ks="rgba32f"),q.oneOf(Jl,Yr,"invalid color type")),"colorFormat"in Ca&&(Ks=Ca.colorFormat,wr.indexOf(Ks)>=0?Ku=!0:ni.indexOf(Ks)>=0?Ku=!1:Ku?q.oneOf(Ca.colorFormat,wr,"invalid color format for texture"):q.oneOf(Ca.colorFormat,ni,"invalid color format for renderbuffer"))),("depthTexture"in Ca||"depthStencilTexture"in Ca)&&(El=!!(Ca.depthTexture||Ca.depthStencilTexture),q(!El||Me.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in Ca&&(typeof Ca.depth=="boolean"?bl=Ca.depth:(Yl=Ca.depth,Xl=!1)),"stencil"in Ca&&(typeof Ca.stencil=="boolean"?Xl=Ca.stencil:(Rl=Ca.stencil,bl=!1)),"depthStencil"in Ca&&(typeof Ca.depthStencil=="boolean"?bl=Xl=Ca.depthStencil:(dc=Ca.depthStencil,bl=!1,Xl=!1))}var Vs=null,Xi=null,Mo=null,zo=null;if(Array.isArray(Zo))Vs=Zo.map(ai);else if(Zo)Vs=[ai(Zo)];else for(Vs=new Array(Ll),so=0;so<Ll;++so)Vs[so]=Ir(Do,Ms,Ku,Ks,Jl);q(Me.webgl_draw_buffers||Vs.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),q(Vs.length<=Ze.maxColorAttachments,"too many color attachments, not supported"),Do=Do||Vs[0].width,Ms=Ms||Vs[0].height,Yl?Xi=ai(Yl):bl&&!Xl&&(Xi=Ir(Do,Ms,El,"depth","uint32")),Rl?Mo=ai(Rl):Xl&&!bl&&(Mo=Ir(Do,Ms,!1,"stencil","uint8")),dc?zo=ai(dc):!Yl&&!Rl&&Xl&&bl&&(zo=Ir(Do,Ms,El,"depth stencil","depth stencil")),q(!!Yl+!!Rl+!!dc<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var Dl=null;for(so=0;so<Vs.length;++so)if(Ai(Vs[so],Do,Ms),q(!Vs[so]||Vs[so].texture&&Ya.indexOf(Vs[so].texture._texture.format)>=0||Vs[so].renderbuffer&&G.indexOf(Vs[so].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+so+" is invalid"),Vs[so]&&Vs[so].texture){var Sc=Ii[Vs[so].texture._texture.format]*Da[Vs[so].texture._texture.type];Dl===null?Dl=Sc:q(Dl===Sc,"all color attachments much have the same number of bits per pixel.")}return Ai(Xi,Do,Ms),q(!Xi||Xi.texture&&Xi.texture._texture.format===Ga||Xi.renderbuffer&&Xi.renderbuffer._renderbuffer.format===Vu,"invalid depth attachment for framebuffer object"),Ai(Mo,Do,Ms),q(!Mo||Mo.renderbuffer&&Mo.renderbuffer._renderbuffer.format===cu,"invalid stencil attachment for framebuffer object"),Ai(zo,Do,Ms),q(!zo||zo.texture&&zo.texture._texture.format===j||zo.renderbuffer&&zo.renderbuffer._renderbuffer.format===j,"invalid depth-stencil attachment for framebuffer object"),Ci(mi),mi.width=Do,mi.height=Ms,mi.colorAttachments=Vs,mi.depthAttachment=Xi,mi.stencilAttachment=Mo,mi.depthStencilAttachment=zo,za.color=Vs.map(Mr),za.depth=Mr(Xi),za.stencil=Mr(Mo),za.depthStencil=Mr(zo),za.width=mi.width,za.height=mi.height,xi(mi),za}function ia(Ki,Oo){q(sr.next!==mi,"can not resize a framebuffer which is currently in use");var so=Math.max(Ki|0,1),Do=Math.max(Oo|0||so,1);if(so===mi.width&&Do===mi.height)return za;for(var Ms=mi.colorAttachments,bl=0;bl<Ms.length;++bl)vi(Ms[bl],so,Do);return vi(mi.depthAttachment,so,Do),vi(mi.stencilAttachment,so,Do),vi(mi.depthStencilAttachment,so,Do),mi.width=za.width=so,mi.height=za.height=Do,xi(mi),za}return za(Di,_i),E(za,{resize:ia,_reglType:"framebuffer",_framebuffer:mi,destroy:function(){Ei(mi),Ci(mi)},use:function(Oo){sr.setFBO({framebuffer:za},Oo)}})}function oa(Di){var _i=Array(6);function mi(ia){var Ki;q(_i.indexOf(sr.next)<0,"can not update framebuffer which is currently in use");var Oo={color:null},so=0,Do=null,Ms="rgba",bl="uint8",Xl=1;if(typeof ia=="number")so=ia|0;else if(!ia)so=1;else{q.type(ia,"object","invalid arguments for framebuffer");var Zo=ia;if("shape"in Zo){var Ku=Zo.shape;q(Array.isArray(Ku)&&Ku.length>=2,"invalid shape for framebuffer"),q(Ku[0]===Ku[1],"cube framebuffer must be square"),so=Ku[0]}else"radius"in Zo&&(so=Zo.radius|0),"width"in Zo?(so=Zo.width|0,"height"in Zo&&q(Zo.height===so,"must be square")):"height"in Zo&&(so=Zo.height|0);("color"in Zo||"colors"in Zo)&&(Do=Zo.color||Zo.colors,Array.isArray(Do)&&q(Do.length===1||Me.webgl_draw_buffers,"multiple render targets not supported")),Do||("colorCount"in Zo&&(Xl=Zo.colorCount|0,q(Xl>0,"invalid color buffer count")),"colorType"in Zo&&(q.oneOf(Zo.colorType,Yr,"invalid color type"),bl=Zo.colorType),"colorFormat"in Zo&&(Ms=Zo.colorFormat,q.oneOf(Zo.colorFormat,wr,"invalid color format for texture"))),"depth"in Zo&&(Oo.depth=Zo.depth),"stencil"in Zo&&(Oo.stencil=Zo.stencil),"depthStencil"in Zo&&(Oo.depthStencil=Zo.depthStencil)}var Ks;if(Do)if(Array.isArray(Do))for(Ks=[],Ki=0;Ki<Do.length;++Ki)Ks[Ki]=Do[Ki];else Ks=[Do];else{Ks=Array(Xl);var Jl={radius:so,format:Ms,type:bl};for(Ki=0;Ki<Xl;++Ki)Ks[Ki]=In.createCube(Jl)}for(Oo.color=Array(Ks.length),Ki=0;Ki<Ks.length;++Ki){var Ll=Ks[Ki];q(typeof Ll=="function"&&Ll._reglType==="textureCube","invalid cube map"),so=so||Ll.width,q(Ll.width===so&&Ll.height===so,"invalid cube map shape"),Oo.color[Ki]={target:Wn,data:Ks[Ki]}}for(Ki=0;Ki<6;++Ki){for(var Yl=0;Yl<Ks.length;++Yl)Oo.color[Yl].target=Wn+Ki;Ki>0&&(Oo.depth=_i[0].depth,Oo.stencil=_i[0].stencil,Oo.depthStencil=_i[0].depthStencil),_i[Ki]?_i[Ki](Oo):_i[Ki]=Oi(Oo)}return E(mi,{width:so,height:so,color:Ks})}function za(ia){var Ki,Oo=ia|0;if(q(Oo>0&&Oo<=Ze.maxCubeMapSize,"invalid radius for cube fbo"),Oo===mi.width)return mi;var so=mi.color;for(Ki=0;Ki<so.length;++Ki)so[Ki].resize(Oo);for(Ki=0;Ki<6;++Ki)_i[Ki].resize(Oo);return mi.width=mi.height=Oo,mi}return mi(Di),E(mi,{faces:_i,resize:za,_reglType:"framebufferCube",destroy:function(){_i.forEach(function(Ki){Ki.destroy()})}})}function Sa(){sr.cur=null,sr.next=null,sr.dirty=!0,Wt($r).forEach(function(Di){Di.framebuffer=ne.createFramebuffer(),xi(Di)})}return E(sr,{getFramebuffer:function(_i){if(typeof _i=="function"&&_i._reglType==="framebuffer"){var mi=_i._framebuffer;if(mi instanceof ra)return mi}return null},create:Oi,createCube:oa,clear:function(){Wt($r).forEach(Ei)},restore:Sa})}var Ct=5126,Ot=34962;function Ut(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Ct,this.offset=0,this.stride=0,this.divisor=0}function Ht(ne,Me,Ze,In,ir){for(var or=Ze.maxAttributes,sr=new Array(or),wr=0;wr<or;++wr)sr[wr]=new Ut;var ni=0,Yr={},ei={Record:Ut,scope:{},state:sr,currentVAO:null,targetVAO:null,restore:Ai()?$r:function(){},createVAO:ra,getVAO:ai,destroyBuffer:hi,setVAO:Ai()?Ir:Mr,clear:Ai()?vi:function(){}};function hi(Ci){for(var Ei=0;Ei<sr.length;++Ei){var xi=sr[Ei];xi.buffer===Ci&&(ne.disableVertexAttribArray(Ei),xi.buffer=null)}}function Ai(){return Me.oes_vertex_array_object}function di(){return Me.angle_instanced_arrays}function ai(Ci){return typeof Ci=="function"&&Ci._vao?Ci._vao:null}function Ir(Ci){if(Ci!==ei.currentVAO){var Ei=Ai();Ci?Ei.bindVertexArrayOES(Ci.vao):Ei.bindVertexArrayOES(null),ei.currentVAO=Ci}}function Mr(Ci){if(Ci!==ei.currentVAO){if(Ci)Ci.bindAttrs();else for(var Ei=di(),xi=0;xi<sr.length;++xi){var Oi=sr[xi];Oi.buffer?(ne.enableVertexAttribArray(xi),ne.vertexAttribPointer(xi,Oi.size,Oi.type,Oi.normalized,Oi.stride,Oi.offfset),Ei&&Oi.divisor&&Ei.vertexAttribDivisorANGLE(xi,Oi.divisor)):(ne.disableVertexAttribArray(xi),ne.vertexAttrib4f(xi,Oi.x,Oi.y,Oi.z,Oi.w))}ei.currentVAO=Ci}}function vi(){Wt(Yr).forEach(function(Ci){Ci.destroy()})}function Vi(){this.id=++ni,this.attributes=[];var Ci=Ai();Ci?this.vao=Ci.createVertexArrayOES():this.vao=null,Yr[this.id]=this,this.buffers=[]}Vi.prototype.bindAttrs=function(){for(var Ci=di(),Ei=this.attributes,xi=0;xi<Ei.length;++xi){var Oi=Ei[xi];Oi.buffer?(ne.enableVertexAttribArray(xi),ne.bindBuffer(Ot,Oi.buffer.buffer),ne.vertexAttribPointer(xi,Oi.size,Oi.type,Oi.normalized,Oi.stride,Oi.offset),Ci&&Oi.divisor&&Ci.vertexAttribDivisorANGLE(xi,Oi.divisor)):(ne.disableVertexAttribArray(xi),ne.vertexAttrib4f(xi,Oi.x,Oi.y,Oi.z,Oi.w))}for(var oa=Ei.length;oa<or;++oa)ne.disableVertexAttribArray(oa)},Vi.prototype.refresh=function(){var Ci=Ai();Ci&&(Ci.bindVertexArrayOES(this.vao),this.bindAttrs(),ei.currentVAO=this)},Vi.prototype.destroy=function(){if(this.vao){var Ci=Ai();this===ei.currentVAO&&(ei.currentVAO=null,Ci.bindVertexArrayOES(null)),Ci.deleteVertexArrayOES(this.vao),this.vao=null}Yr[this.id]&&(delete Yr[this.id],In.vaoCount-=1)};function $r(){var Ci=Ai();Ci&&Wt(Yr).forEach(function(Ei){Ei.refresh()})}function ra(Ci){var Ei=new Vi;In.vaoCount+=1;function xi(Oi){q(Array.isArray(Oi),"arguments to vertex array constructor must be an array"),q(Oi.length<or,"too many attributes"),q(Oi.length>0,"must specify at least one attribute");var oa={},Sa=Ei.attributes;Sa.length=Oi.length;for(var Di=0;Di<Oi.length;++Di){var _i=Oi[Di],mi=Sa[Di]=new Ut,za=_i.data||_i;if(Array.isArray(za)||U(za)||oe(za)){var ia;Ei.buffers[Di]&&(ia=Ei.buffers[Di],U(za)&&ia._buffer.byteLength>=za.byteLength?ia.subdata(za):(ia.destroy(),Ei.buffers[Di]=null)),Ei.buffers[Di]||(ia=Ei.buffers[Di]=ir.create(_i,Ot,!1,!0)),mi.buffer=ir.getBuffer(ia),mi.size=mi.buffer.dimension|0,mi.normalized=!1,mi.type=mi.buffer.dtype,mi.offset=0,mi.stride=0,mi.divisor=0,mi.state=1,oa[Di]=1}else ir.getBuffer(_i)?(mi.buffer=ir.getBuffer(_i),mi.size=mi.buffer.dimension|0,mi.normalized=!1,mi.type=mi.buffer.dtype,mi.offset=0,mi.stride=0,mi.divisor=0,mi.state=1):ir.getBuffer(_i.buffer)?(mi.buffer=ir.getBuffer(_i.buffer),mi.size=(+_i.size||mi.buffer.dimension)|0,mi.normalized=!!_i.normalized||!1,"type"in _i?(q.parameter(_i.type,Qa,"invalid buffer type"),mi.type=Qa[_i.type]):mi.type=mi.buffer.dtype,mi.offset=(_i.offset||0)|0,mi.stride=(_i.stride||0)|0,mi.divisor=(_i.divisor||0)|0,mi.state=1,q(mi.size>=1&&mi.size<=4,"size must be between 1 and 4"),q(mi.offset>=0,"invalid offset"),q(mi.stride>=0&&mi.stride<=255,"stride must be between 0 and 255"),q(mi.divisor>=0,"divisor must be positive"),q(!mi.divisor||!!Me.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in _i?(q(Di>0,"first attribute must not be a constant"),mi.x=+_i.x||0,mi.y=+_i.y||0,mi.z=+_i.z||0,mi.w=+_i.w||0,mi.state=2):q(!1,"invalid attribute spec for location "+Di)}for(var Ki=0;Ki<Ei.buffers.length;++Ki)!oa[Ki]&&Ei.buffers[Ki]&&(Ei.buffers[Ki].destroy(),Ei.buffers[Ki]=null);return Ei.refresh(),xi}return xi.destroy=function(){for(var Oi=0;Oi<Ei.buffers.length;++Oi)Ei.buffers[Oi]&&Ei.buffers[Oi].destroy();Ei.buffers.length=0,Ei.destroy()},xi._vao=Ei,xi._reglType="vao",xi(Ci)}return ei}var qt=35632,fe=35633,ye=35718,De=35721;function Ie(ne,Me,Ze,In){var ir={},or={};function sr(Ir,Mr,vi,Vi){this.name=Ir,this.id=Mr,this.location=vi,this.info=Vi}function wr(Ir,Mr){for(var vi=0;vi<Ir.length;++vi)if(Ir[vi].id===Mr.id){Ir[vi].location=Mr.location;return}Ir.push(Mr)}function ni(Ir,Mr,vi){var Vi=Ir===qt?ir:or,$r=Vi[Mr];if(!$r){var ra=Me.str(Mr);$r=ne.createShader(Ir),ne.shaderSource($r,ra),ne.compileShader($r),q.shaderError(ne,$r,ra,Ir,vi),Vi[Mr]=$r}return $r}var Yr={},ei=[],hi=0;function Ai(Ir,Mr){this.id=hi++,this.fragId=Ir,this.vertId=Mr,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,In.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function di(Ir,Mr,vi){var Vi,$r,ra=ni(qt,Ir.fragId),Ci=ni(fe,Ir.vertId),Ei=Ir.program=ne.createProgram();if(ne.attachShader(Ei,ra),ne.attachShader(Ei,Ci),vi)for(Vi=0;Vi<vi.length;++Vi){var xi=vi[Vi];ne.bindAttribLocation(Ei,xi[0],xi[1])}ne.linkProgram(Ei),q.linkError(ne,Ei,Me.str(Ir.fragId),Me.str(Ir.vertId),Mr);var Oi=ne.getProgramParameter(Ei,ye);In.profile&&(Ir.stats.uniformsCount=Oi);var oa=Ir.uniforms;for(Vi=0;Vi<Oi;++Vi)if($r=ne.getActiveUniform(Ei,Vi),$r)if($r.size>1)for(var Sa=0;Sa<$r.size;++Sa){var Di=$r.name.replace("[0]","["+Sa+"]");wr(oa,new sr(Di,Me.id(Di),ne.getUniformLocation(Ei,Di),$r))}else wr(oa,new sr($r.name,Me.id($r.name),ne.getUniformLocation(Ei,$r.name),$r));var _i=ne.getProgramParameter(Ei,De);In.profile&&(Ir.stats.attributesCount=_i);var mi=Ir.attributes;for(Vi=0;Vi<_i;++Vi)$r=ne.getActiveAttrib(Ei,Vi),$r&&wr(mi,new sr($r.name,Me.id($r.name),ne.getAttribLocation(Ei,$r.name),$r))}In.profile&&(Ze.getMaxUniformsCount=function(){var Ir=0;return ei.forEach(function(Mr){Mr.stats.uniformsCount>Ir&&(Ir=Mr.stats.uniformsCount)}),Ir},Ze.getMaxAttributesCount=function(){var Ir=0;return ei.forEach(function(Mr){Mr.stats.attributesCount>Ir&&(Ir=Mr.stats.attributesCount)}),Ir});function ai(){ir={},or={};for(var Ir=0;Ir<ei.length;++Ir)di(ei[Ir],null,ei[Ir].attributes.map(function(Mr){return[Mr.location,Mr.name]}))}return{clear:function(){var Mr=ne.deleteShader.bind(ne);Wt(ir).forEach(Mr),ir={},Wt(or).forEach(Mr),or={},ei.forEach(function(vi){ne.deleteProgram(vi.program)}),ei.length=0,Yr={},Ze.shaderCount=0},program:function(Mr,vi,Vi,$r){q.command(Mr>=0,"missing vertex shader",Vi),q.command(vi>=0,"missing fragment shader",Vi);var ra=Yr[vi];ra||(ra=Yr[vi]={});var Ci=ra[Mr];if(Ci&&(Ci.refCount++,!$r))return Ci;var Ei=new Ai(vi,Mr);return Ze.shaderCount++,di(Ei,Vi,$r),Ci||(ra[Mr]=Ei),ei.push(Ei),E(Ei,{destroy:function(){if(Ei.refCount--,Ei.refCount<=0){ne.deleteProgram(Ei.program);var Oi=ei.indexOf(Ei);ei.splice(Oi,1),Ze.shaderCount--}ra[Ei.vertId].refCount<=0&&(ne.deleteShader(or[Ei.vertId]),delete or[Ei.vertId],delete Yr[Ei.fragId][Ei.vertId]),Object.keys(Yr[Ei.fragId]).length||(ne.deleteShader(ir[Ei.fragId]),delete ir[Ei.fragId],delete Yr[Ei.fragId])}})},restore:ai,shader:ni,frag:-1,vert:-1}}var Ve=6408,qe=5121,on=3333,tr=5126;function zn(ne,Me,Ze,In,ir,or,sr){function wr(ei){var hi;Me.next===null?(q(ir.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),hi=qe):(q(Me.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),hi=Me.next.colorAttachments[0].texture._texture.type,or.oes_texture_float?(q(hi===qe||hi===tr,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),hi===tr&&q(sr.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):q(hi===qe,"Reading from a framebuffer is only allowed for the type 'uint8'"));var Ai=0,di=0,ai=In.framebufferWidth,Ir=In.framebufferHeight,Mr=null;U(ei)?Mr=ei:ei&&(q.type(ei,"object","invalid arguments to regl.read()"),Ai=ei.x|0,di=ei.y|0,q(Ai>=0&&Ai<In.framebufferWidth,"invalid x offset for regl.read"),q(di>=0&&di<In.framebufferHeight,"invalid y offset for regl.read"),ai=(ei.width||In.framebufferWidth-Ai)|0,Ir=(ei.height||In.framebufferHeight-di)|0,Mr=ei.data||null),Mr&&(hi===qe?q(Mr instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):hi===tr&&q(Mr instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),q(ai>0&&ai+Ai<=In.framebufferWidth,"invalid width for read pixels"),q(Ir>0&&Ir+di<=In.framebufferHeight,"invalid height for read pixels"),Ze();var vi=ai*Ir*4;return Mr||(hi===qe?Mr=new Uint8Array(vi):hi===tr&&(Mr=Mr||new Float32Array(vi))),q.isTypedArray(Mr,"data buffer for regl.read() must be a typedarray"),q(Mr.byteLength>=vi,"data buffer for regl.read() too small"),ne.pixelStorei(on,4),ne.readPixels(Ai,di,ai,Ir,Ve,hi,Mr),Mr}function ni(ei){var hi;return Me.setFBO({framebuffer:ei.framebuffer},function(){hi=wr(ei)}),hi}function Yr(ei){return!ei||!("framebuffer"in ei)?wr(ei):ni(ei)}return Yr}function cr(ne){return Array.prototype.slice.call(ne)}function yr(ne){return cr(ne).join("")}function Jr(){var ne=0,Me=[],Ze=[];function In(hi){for(var Ai=0;Ai<Ze.length;++Ai)if(Ze[Ai]===hi)return Me[Ai];var di="g"+ne++;return Me.push(di),Ze.push(hi),di}function ir(){var hi=[];function Ai(){hi.push.apply(hi,cr(arguments))}var di=[];function ai(){var Ir="v"+ne++;return di.push(Ir),arguments.length>0&&(hi.push(Ir,"="),hi.push.apply(hi,cr(arguments)),hi.push(";")),Ir}return E(Ai,{def:ai,toString:function(){return yr([di.length>0?"var "+di.join(",")+";":"",yr(hi)])}})}function or(){var hi=ir(),Ai=ir(),di=hi.toString,ai=Ai.toString;function Ir(Mr,vi){Ai(Mr,vi,"=",hi.def(Mr,vi),";")}return E(function(){hi.apply(hi,cr(arguments))},{def:hi.def,entry:hi,exit:Ai,save:Ir,set:function(vi,Vi,$r){Ir(vi,Vi),hi(vi,Vi,"=",$r,";")},toString:function(){return di()+ai()}})}function sr(){var hi=yr(arguments),Ai=or(),di=or(),ai=Ai.toString,Ir=di.toString;return E(Ai,{then:function(){return Ai.apply(Ai,cr(arguments)),this},else:function(){return di.apply(di,cr(arguments)),this},toString:function(){var vi=Ir();return vi&&(vi="else{"+vi+"}"),yr(["if(",hi,"){",ai(),"}",vi])}})}var wr=ir(),ni={};function Yr(hi,Ai){var di=[];function ai(){var $r="a"+di.length;return di.push($r),$r}Ai=Ai||0;for(var Ir=0;Ir<Ai;++Ir)ai();var Mr=or(),vi=Mr.toString,Vi=ni[hi]=E(Mr,{arg:ai,toString:function(){return yr(["function(",di.join(),"){",vi(),"}"])}});return Vi}function ei(){var hi=['"use strict";',wr,"return {"];Object.keys(ni).forEach(function(ai){hi.push('"',ai,'":',ni[ai].toString(),",")}),hi.push("}");var Ai=yr(hi).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),di=Function.apply(null,Me.concat(Ai));return di.apply(null,Ze)}return{global:wr,link:In,block:ir,proc:Yr,scope:or,cond:sr,compile:ei}}var Wr="xyzw".split(""),bi=5121,ji=1,Hi=2,Ji=0,Pa=1,ja=2,Fi=3,va=4,ya=5,Yi=6,Aa="dither",ua="blend.enable",Ba="blend.color",Za="blend.equation",os="blend.func",Go="depth.enable",Bs="depth.func",Yo="depth.range",ks="depth.mask",yl="colorMask",nl="cull.enable",wl="cull.face",yc="frontFace",Il="lineWidth",tc="polygonOffset.enable",xc="polygonOffset.offset",Bc="sample.alpha",Pc="sample.enable",Uc="sample.coverage",kc="stencil.enable",Tc="stencil.mask",Gc="stencil.func",fc="stencil.opFront",Su="stencil.opBack",Ac="scissor.enable",Nc="scissor.box",Wl="viewport",dl="profile",vl="framebuffer",Wu="vert",Hu="frag",rl="elements",ec="primitive",Ic="count",qc="offset",tf="instances",Lc="vao",Vc="Width",Fc="Height",Kl=vl+Vc,Yu=vl+Fc,ef=Wl+Vc,Hl=Wl+Fc,bf="drawingBuffer",wf=bf+Vc,If=bf+Fc,Gf=[os,Za,Gc,fc,Su,Uc,Wl,Nc,xc],Rc=34962,Pf=34963,Ef=35632,Lf=35633,Cc=3553,Xc=34067,Vf=2884,nf=3042,rf=3024,Wf=2960,Hf=2929,Yf=3089,Zf=32823,Tf=32926,qf=32928,Wc=5126,hf=35664,yu=35665,Hc=35666,df=5124,af=35667,oc=35668,hc=35669,Sf=35670,zc=35671,vf=35672,_f=35673,of=35674,jc=35675,de=35676,ge=35678,kt=35680,Kt=4,Ue=1028,un=1029,Gn=2304,mr=2305,gr=32775,Qr=32776,wi=519,$i=7680,ha=0,xa=1,ao=32774,vo=513,ts=36160,Ho=36064,Gs={"0":0,"1":1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},ru=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],xu={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},_s={"0":0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},_u={frag:Ef,vert:Lf},mo={cw:Gn,ccw:mr};function fu(ne){return Array.isArray(ne)||U(ne)||oe(ne)}function xl(ne){return ne.sort(function(Me,Ze){return Me===Wl?-1:Ze===Wl?1:Me<Ze?-1:1})}function ss(ne,Me,Ze,In){this.thisDep=ne,this.contextDep=Me,this.propDep=Ze,this.append=In}function Ls(ne){return ne&&!(ne.thisDep||ne.contextDep||ne.propDep)}function Ka(ne){return new ss(!1,!1,!1,ne)}function Zu(ne,Me){var Ze=ne.type;if(Ze===Ji){var In=ne.data.length;return new ss(!0,In>=1,In>=2,Me)}else if(Ze===va){var ir=ne.data;return new ss(ir.thisDep,ir.contextDep,ir.propDep,Me)}else{if(Ze===ya)return new ss(!1,!1,!1,Me);if(Ze===Yi){for(var or=!1,sr=!1,wr=!1,ni=0;ni<ne.data.length;++ni){var Yr=ne.data[ni];if(Yr.type===Pa)wr=!0;else if(Yr.type===ja)sr=!0;else if(Yr.type===Fi)or=!0;else if(Yr.type===Ji){or=!0;var ei=Yr.data;ei>=1&&(sr=!0),ei>=2&&(wr=!0)}else Yr.type===va&&(or=or||Yr.data.thisDep,sr=sr||Yr.data.contextDep,wr=wr||Yr.data.propDep)}return new ss(or,sr,wr,Me)}else return new ss(Ze===Fi,Ze===ja,Ze===Pa,Me)}}var Yc=new ss(!1,!1,!1,function(){});function pf(ne,Me,Ze,In,ir,or,sr,wr,ni,Yr,ei,hi,Ai,di,ai){var Ir=Yr.Record,Mr={add:32774,subtract:32778,"reverse subtract":32779};Ze.ext_blend_minmax&&(Mr.min=gr,Mr.max=Qr);var vi=Ze.angle_instanced_arrays,Vi=Ze.webgl_draw_buffers,$r={dirty:!0,profile:ai.profile},ra={},Ci=[],Ei={},xi={};function Oi(Sn){return Sn.replace(".","_")}function oa(Sn,sn,er){var Or=Oi(Sn);Ci.push(Sn),ra[Or]=$r[Or]=!!er,Ei[Or]=sn}function Sa(Sn,sn,er){var Or=Oi(Sn);Ci.push(Sn),Array.isArray(er)?($r[Or]=er.slice(),ra[Or]=er.slice()):$r[Or]=ra[Or]=er,xi[Or]=sn}oa(Aa,rf),oa(ua,nf),Sa(Ba,"blendColor",[0,0,0,0]),Sa(Za,"blendEquationSeparate",[ao,ao]),Sa(os,"blendFuncSeparate",[xa,ha,xa,ha]),oa(Go,Hf,!0),Sa(Bs,"depthFunc",vo),Sa(Yo,"depthRange",[0,1]),Sa(ks,"depthMask",!0),Sa(yl,yl,[!0,!0,!0,!0]),oa(nl,Vf),Sa(wl,"cullFace",un),Sa(yc,yc,mr),Sa(Il,Il,1),oa(tc,Zf),Sa(xc,"polygonOffset",[0,0]),oa(Bc,Tf),oa(Pc,qf),Sa(Uc,"sampleCoverage",[1,!1]),oa(kc,Wf),Sa(Tc,"stencilMask",-1),Sa(Gc,"stencilFunc",[wi,0,-1]),Sa(fc,"stencilOpSeparate",[Ue,$i,$i,$i]),Sa(Su,"stencilOpSeparate",[un,$i,$i,$i]),oa(Ac,Yf),Sa(Nc,"scissor",[0,0,ne.drawingBufferWidth,ne.drawingBufferHeight]),Sa(Wl,Wl,[0,0,ne.drawingBufferWidth,ne.drawingBufferHeight]);var Di={gl:ne,context:Ai,strings:Me,next:ra,current:$r,draw:hi,elements:or,buffer:ir,shader:ei,attributes:Yr.state,vao:Yr,uniforms:ni,framebuffer:wr,extensions:Ze,timer:di,isBufferArgs:fu},_i={primTypes:ka,compareFuncs:xu,blendFuncs:Gs,blendEquations:Mr,stencilOps:_s,glTypes:Qa,orientationType:mo};q.optional(function(){Di.isArrayLike=Io}),Vi&&(_i.backBuffer=[un],_i.drawBuffer=Ae(In.maxDrawbuffers,function(Sn){return Sn===0?[0]:Ae(Sn,function(sn){return Ho+sn})}));var mi=0;function za(){var Sn=Jr(),sn=Sn.link,er=Sn.global;Sn.id=mi++,Sn.batchId="0";var Or=sn(Di),Dr=Sn.shared={props:"a0"};Object.keys(Di).forEach(function(Qn){Dr[Qn]=er.def(Or,".",Qn)}),q.optional(function(){Sn.CHECK=sn(q),Sn.commandStr=q.guessCommand(),Sn.command=sn(Sn.commandStr),Sn.assert=function(Qn,xn,Tr){Qn("if(!(",xn,"))",this.CHECK,".commandRaise(",sn(Tr),",",this.command,");")},_i.invalidBlendCombinations=ru});var ur=Sn.next={},ar=Sn.current={};Object.keys(xi).forEach(function(Qn){Array.isArray($r[Qn])&&(ur[Qn]=er.def(Dr.next,".",Qn),ar[Qn]=er.def(Dr.current,".",Qn))});var Sr=Sn.constants={};Object.keys(_i).forEach(function(Qn){Sr[Qn]=er.def(JSON.stringify(_i[Qn]))}),Sn.invoke=function(Qn,xn){switch(xn.type){case Ji:var Tr=["this",Dr.context,Dr.props,Sn.batchId];return Qn.def(sn(xn.data),".call(",Tr.slice(0,Math.max(xn.data.length+1,4)),")");case Pa:return Qn.def(Dr.props,xn.data);case ja:return Qn.def(Dr.context,xn.data);case Fi:return Qn.def("this",xn.data);case va:return xn.data.append(Sn,Qn),xn.data.ref;case ya:return xn.data.toString();case Yi:return xn.data.map(function(jr){return Sn.invoke(Qn,jr)})}},Sn.attribCache={};var Tn={};return Sn.scopeAttrib=function(Qn){var xn=Me.id(Qn);if(xn in Tn)return Tn[xn];var Tr=Yr.scope[xn];Tr||(Tr=Yr.scope[xn]=new Ir);var jr=Tn[xn]=sn(Tr);return jr},Sn}function ia(Sn){var sn=Sn.static,er=Sn.dynamic,Or;if(dl in sn){var Dr=!!sn[dl];Or=Ka(function(ar,Sr){return Dr}),Or.enable=Dr}else if(dl in er){var ur=er[dl];Or=Zu(ur,function(ar,Sr){return ar.invoke(Sr,ur)})}return Or}function Ki(Sn,sn){var er=Sn.static,Or=Sn.dynamic;if(vl in er){var Dr=er[vl];return Dr?(Dr=wr.getFramebuffer(Dr),q.command(Dr,"invalid framebuffer object"),Ka(function(ar,Sr){var Tn=ar.link(Dr),Qn=ar.shared;Sr.set(Qn.framebuffer,".next",Tn);var xn=Qn.context;return Sr.set(xn,"."+Kl,Tn+".width"),Sr.set(xn,"."+Yu,Tn+".height"),Tn})):Ka(function(ar,Sr){var Tn=ar.shared;Sr.set(Tn.framebuffer,".next","null");var Qn=Tn.context;return Sr.set(Qn,"."+Kl,Qn+"."+wf),Sr.set(Qn,"."+Yu,Qn+"."+If),"null"})}else if(vl in Or){var ur=Or[vl];return Zu(ur,function(ar,Sr){var Tn=ar.invoke(Sr,ur),Qn=ar.shared,xn=Qn.framebuffer,Tr=Sr.def(xn,".getFramebuffer(",Tn,")");q.optional(function(){ar.assert(Sr,"!"+Tn+"||"+Tr,"invalid framebuffer object")}),Sr.set(xn,".next",Tr);var jr=Qn.context;return Sr.set(jr,"."+Kl,Tr+"?"+Tr+".width:"+jr+"."+wf),Sr.set(jr,"."+Yu,Tr+"?"+Tr+".height:"+jr+"."+If),Tr})}else return null}function Oo(Sn,sn,er){var Or=Sn.static,Dr=Sn.dynamic;function ur(Tn){if(Tn in Or){var Qn=Or[Tn];q.commandType(Qn,"object","invalid "+Tn,er.commandStr);var xn=!0,Tr=Qn.x|0,jr=Qn.y|0,li,Hr;return"width"in Qn?(li=Qn.width|0,q.command(li>=0,"invalid "+Tn,er.commandStr)):xn=!1,"height"in Qn?(Hr=Qn.height|0,q.command(Hr>=0,"invalid "+Tn,er.commandStr)):xn=!1,new ss(!xn&&sn&&sn.thisDep,!xn&&sn&&sn.contextDep,!xn&&sn&&sn.propDep,function(da,Lo){var ca=da.shared.context,Va=li;"width"in Qn||(Va=Lo.def(ca,".",Kl,"-",Tr));var yo=Hr;return"height"in Qn||(yo=Lo.def(ca,".",Yu,"-",jr)),[Tr,jr,Va,yo]})}else if(Tn in Dr){var ii=Dr[Tn],Ri=Zu(ii,function(da,Lo){var ca=da.invoke(Lo,ii);q.optional(function(){da.assert(Lo,ca+"&&typeof "+ca+'==="object"',"invalid "+Tn)});var Va=da.shared.context,yo=Lo.def(ca,".x|0"),Rs=Lo.def(ca,".y|0"),jl=Lo.def('"width" in ',ca,"?",ca,".width|0:","(",Va,".",Kl,"-",yo,")"),Dc=Lo.def('"height" in ',ca,"?",ca,".height|0:","(",Va,".",Yu,"-",Rs,")");return q.optional(function(){da.assert(Lo,jl+">=0&&"+Dc+">=0","invalid "+Tn)}),[yo,Rs,jl,Dc]});return sn&&(Ri.thisDep=Ri.thisDep||sn.thisDep,Ri.contextDep=Ri.contextDep||sn.contextDep,Ri.propDep=Ri.propDep||sn.propDep),Ri}else return sn?new ss(sn.thisDep,sn.contextDep,sn.propDep,function(da,Lo){var ca=da.shared.context;return[0,0,Lo.def(ca,".",Kl),Lo.def(ca,".",Yu)]}):null}var ar=ur(Wl);if(ar){var Sr=ar;ar=new ss(ar.thisDep,ar.contextDep,ar.propDep,function(Tn,Qn){var xn=Sr.append(Tn,Qn),Tr=Tn.shared.context;return Qn.set(Tr,"."+ef,xn[2]),Qn.set(Tr,"."+Hl,xn[3]),xn})}return{viewport:ar,scissor_box:ur(Nc)}}function so(Sn,sn){var er=Sn.static,Or=typeof er[Hu]=="string"&&typeof er[Wu]=="string";if(Or){if(Object.keys(sn.dynamic).length>0)return null;var Dr=sn.static,ur=Object.keys(Dr);if(ur.length>0&&typeof Dr[ur[0]]=="number"){for(var ar=[],Sr=0;Sr<ur.length;++Sr)q(typeof Dr[ur[Sr]]=="number","must specify all vertex attribute locations when using vaos"),ar.push([Dr[ur[Sr]]|0,ur[Sr]]);return ar}}return null}function Do(Sn,sn,er){var Or=Sn.static,Dr=Sn.dynamic;function ur(xn){if(xn in Or){var Tr=Me.id(Or[xn]);q.optional(function(){ei.shader(_u[xn],Tr,q.guessCommand())});var jr=Ka(function(){return Tr});return jr.id=Tr,jr}else if(xn in Dr){var li=Dr[xn];return Zu(li,function(Hr,ii){var Ri=Hr.invoke(ii,li),da=ii.def(Hr.shared.strings,".id(",Ri,")");return q.optional(function(){ii(Hr.shared.shader,".shader(",_u[xn],",",da,",",Hr.command,");")}),da})}return null}var ar=ur(Hu),Sr=ur(Wu),Tn=null,Qn;return Ls(ar)&&Ls(Sr)?(Tn=ei.program(Sr.id,ar.id,null,er),Qn=Ka(function(xn,Tr){return xn.link(Tn)})):Qn=new ss(ar&&ar.thisDep||Sr&&Sr.thisDep,ar&&ar.contextDep||Sr&&Sr.contextDep,ar&&ar.propDep||Sr&&Sr.propDep,function(xn,Tr){var jr=xn.shared.shader,li;ar?li=ar.append(xn,Tr):li=Tr.def(jr,".",Hu);var Hr;Sr?Hr=Sr.append(xn,Tr):Hr=Tr.def(jr,".",Wu);var ii=jr+".program("+Hr+","+li;return q.optional(function(){ii+=","+xn.command}),Tr.def(ii+")")}),{frag:ar,vert:Sr,progVar:Qn,program:Tn}}function Ms(Sn,sn){var er=Sn.static,Or=Sn.dynamic;function Dr(){if(rl in er){var xn=er[rl];fu(xn)?xn=or.getElements(or.create(xn,!0)):xn&&(xn=or.getElements(xn),q.command(xn,"invalid elements",sn.commandStr));var Tr=Ka(function(li,Hr){if(xn){var ii=li.link(xn);return li.ELEMENTS=ii,ii}return li.ELEMENTS=null,null});return Tr.value=xn,Tr}else if(rl in Or){var jr=Or[rl];return Zu(jr,function(li,Hr){var ii=li.shared,Ri=ii.isBufferArgs,da=ii.elements,Lo=li.invoke(Hr,jr),ca=Hr.def("null"),Va=Hr.def(Ri,"(",Lo,")"),yo=li.cond(Va).then(ca,"=",da,".createStream(",Lo,");").else(ca,"=",da,".getElements(",Lo,");");return q.optional(function(){li.assert(yo.else,"!"+Lo+"||"+ca,"invalid elements")}),Hr.entry(yo),Hr.exit(li.cond(Va).then(da,".destroyStream(",ca,");")),li.ELEMENTS=ca,ca})}return null}var ur=Dr();function ar(){if(ec in er){var xn=er[ec];return q.commandParameter(xn,ka,"invalid primitve",sn.commandStr),Ka(function(jr,li){return ka[xn]})}else if(ec in Or){var Tr=Or[ec];return Zu(Tr,function(jr,li){var Hr=jr.constants.primTypes,ii=jr.invoke(li,Tr);return q.optional(function(){jr.assert(li,ii+" in "+Hr,"invalid primitive, must be one of "+Object.keys(ka))}),li.def(Hr,"[",ii,"]")})}else if(ur)return Ls(ur)?ur.value?Ka(function(jr,li){return li.def(jr.ELEMENTS,".primType")}):Ka(function(){return Kt}):new ss(ur.thisDep,ur.contextDep,ur.propDep,function(jr,li){var Hr=jr.ELEMENTS;return li.def(Hr,"?",Hr,".primType:",Kt)});return null}function Sr(xn,Tr){if(xn in er){var jr=er[xn]|0;return q.command(!Tr||jr>=0,"invalid "+xn,sn.commandStr),Ka(function(Hr,ii){return Tr&&(Hr.OFFSET=jr),jr})}else if(xn in Or){var li=Or[xn];return Zu(li,function(Hr,ii){var Ri=Hr.invoke(ii,li);return Tr&&(Hr.OFFSET=Ri,q.optional(function(){Hr.assert(ii,Ri+">=0","invalid "+xn)})),Ri})}else if(Tr&&ur)return Ka(function(Hr,ii){return Hr.OFFSET="0",0});return null}var Tn=Sr(qc,!0);function Qn(){if(Ic in er){var xn=er[Ic]|0;return q.command(typeof xn=="number"&&xn>=0,"invalid vertex count",sn.commandStr),Ka(function(){return xn})}else if(Ic in Or){var Tr=Or[Ic];return Zu(Tr,function(Hr,ii){var Ri=Hr.invoke(ii,Tr);return q.optional(function(){Hr.assert(ii,"typeof "+Ri+'==="number"&&'+Ri+">=0&&"+Ri+"===("+Ri+"|0)","invalid vertex count")}),Ri})}else if(ur)if(Ls(ur)){if(ur)return Tn?new ss(Tn.thisDep,Tn.contextDep,Tn.propDep,function(Hr,ii){var Ri=ii.def(Hr.ELEMENTS,".vertCount-",Hr.OFFSET);return q.optional(function(){Hr.assert(ii,Ri+">=0","invalid vertex offset/element buffer too small")}),Ri}):Ka(function(Hr,ii){return ii.def(Hr.ELEMENTS,".vertCount")});var jr=Ka(function(){return-1});return q.optional(function(){jr.MISSING=!0}),jr}else{var li=new ss(ur.thisDep||Tn.thisDep,ur.contextDep||Tn.contextDep,ur.propDep||Tn.propDep,function(Hr,ii){var Ri=Hr.ELEMENTS;return Hr.OFFSET?ii.def(Ri,"?",Ri,".vertCount-",Hr.OFFSET,":-1"):ii.def(Ri,"?",Ri,".vertCount:-1")});return q.optional(function(){li.DYNAMIC=!0}),li}return null}return{elements:ur,primitive:ar(),count:Qn(),instances:Sr(tf,!1),offset:Tn}}function bl(Sn,sn){var er=Sn.static,Or=Sn.dynamic,Dr={};return Ci.forEach(function(ur){var ar=Oi(ur);function Sr(Tn,Qn){if(ur in er){var xn=Tn(er[ur]);Dr[ar]=Ka(function(){return xn})}else if(ur in Or){var Tr=Or[ur];Dr[ar]=Zu(Tr,function(jr,li){return Qn(jr,li,jr.invoke(li,Tr))})}}switch(ur){case nl:case ua:case Aa:case kc:case Go:case Ac:case tc:case Bc:case Pc:case ks:return Sr(function(Tn){return q.commandType(Tn,"boolean",ur,sn.commandStr),Tn},function(Tn,Qn,xn){return q.optional(function(){Tn.assert(Qn,"typeof "+xn+'==="boolean"',"invalid flag "+ur,Tn.commandStr)}),xn});case Bs:return Sr(function(Tn){return q.commandParameter(Tn,xu,"invalid "+ur,sn.commandStr),xu[Tn]},function(Tn,Qn,xn){var Tr=Tn.constants.compareFuncs;return q.optional(function(){Tn.assert(Qn,xn+" in "+Tr,"invalid "+ur+", must be one of "+Object.keys(xu))}),Qn.def(Tr,"[",xn,"]")});case Yo:return Sr(function(Tn){return q.command(Io(Tn)&&Tn.length===2&&typeof Tn[0]=="number"&&typeof Tn[1]=="number"&&Tn[0]<=Tn[1],"depth range is 2d array",sn.commandStr),Tn},function(Tn,Qn,xn){q.optional(function(){Tn.assert(Qn,Tn.shared.isArrayLike+"("+xn+")&&"+xn+".length===2&&typeof "+xn+'[0]==="number"&&typeof '+xn+'[1]==="number"&&'+xn+"[0]<="+xn+"[1]","depth range must be a 2d array")});var Tr=Qn.def("+",xn,"[0]"),jr=Qn.def("+",xn,"[1]");return[Tr,jr]});case os:return Sr(function(Tn){q.commandType(Tn,"object","blend.func",sn.commandStr);var Qn="srcRGB"in Tn?Tn.srcRGB:Tn.src,xn="srcAlpha"in Tn?Tn.srcAlpha:Tn.src,Tr="dstRGB"in Tn?Tn.dstRGB:Tn.dst,jr="dstAlpha"in Tn?Tn.dstAlpha:Tn.dst;return q.commandParameter(Qn,Gs,ar+".srcRGB",sn.commandStr),q.commandParameter(xn,Gs,ar+".srcAlpha",sn.commandStr),q.commandParameter(Tr,Gs,ar+".dstRGB",sn.commandStr),q.commandParameter(jr,Gs,ar+".dstAlpha",sn.commandStr),q.command(ru.indexOf(Qn+", "+Tr)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+Qn+", "+Tr+")",sn.commandStr),[Gs[Qn],Gs[Tr],Gs[xn],Gs[jr]]},function(Tn,Qn,xn){var Tr=Tn.constants.blendFuncs;q.optional(function(){Tn.assert(Qn,xn+"&&typeof "+xn+'==="object"',"invalid blend func, must be an object")});function jr(ca,Va){var yo=Qn.def('"',ca,Va,'" in ',xn,"?",xn,".",ca,Va,":",xn,".",ca);return q.optional(function(){Tn.assert(Qn,yo+" in "+Tr,"invalid "+ur+"."+ca+Va+", must be one of "+Object.keys(Gs))}),yo}var li=jr("src","RGB"),Hr=jr("dst","RGB");q.optional(function(){var ca=Tn.constants.invalidBlendCombinations;Tn.assert(Qn,ca+".indexOf("+li+'+", "+'+Hr+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var ii=Qn.def(Tr,"[",li,"]"),Ri=Qn.def(Tr,"[",jr("src","Alpha"),"]"),da=Qn.def(Tr,"[",Hr,"]"),Lo=Qn.def(Tr,"[",jr("dst","Alpha"),"]");return[ii,da,Ri,Lo]});case Za:return Sr(function(Tn){if(typeof Tn=="string")return q.commandParameter(Tn,Mr,"invalid "+ur,sn.commandStr),[Mr[Tn],Mr[Tn]];if(typeof Tn=="object")return q.commandParameter(Tn.rgb,Mr,ur+".rgb",sn.commandStr),q.commandParameter(Tn.alpha,Mr,ur+".alpha",sn.commandStr),[Mr[Tn.rgb],Mr[Tn.alpha]];q.commandRaise("invalid blend.equation",sn.commandStr)},function(Tn,Qn,xn){var Tr=Tn.constants.blendEquations,jr=Qn.def(),li=Qn.def(),Hr=Tn.cond("typeof ",xn,'==="string"');return q.optional(function(){function ii(Ri,da,Lo){Tn.assert(Ri,Lo+" in "+Tr,"invalid "+da+", must be one of "+Object.keys(Mr))}ii(Hr.then,ur,xn),Tn.assert(Hr.else,xn+"&&typeof "+xn+'==="object"',"invalid "+ur),ii(Hr.else,ur+".rgb",xn+".rgb"),ii(Hr.else,ur+".alpha",xn+".alpha")}),Hr.then(jr,"=",li,"=",Tr,"[",xn,"];"),Hr.else(jr,"=",Tr,"[",xn,".rgb];",li,"=",Tr,"[",xn,".alpha];"),Qn(Hr),[jr,li]});case Ba:return Sr(function(Tn){return q.command(Io(Tn)&&Tn.length===4,"blend.color must be a 4d array",sn.commandStr),Ae(4,function(Qn){return+Tn[Qn]})},function(Tn,Qn,xn){return q.optional(function(){Tn.assert(Qn,Tn.shared.isArrayLike+"("+xn+")&&"+xn+".length===4","blend.color must be a 4d array")}),Ae(4,function(Tr){return Qn.def("+",xn,"[",Tr,"]")})});case Tc:return Sr(function(Tn){return q.commandType(Tn,"number",ar,sn.commandStr),Tn|0},function(Tn,Qn,xn){return q.optional(function(){Tn.assert(Qn,"typeof "+xn+'==="number"',"invalid stencil.mask")}),Qn.def(xn,"|0")});case Gc:return Sr(function(Tn){q.commandType(Tn,"object",ar,sn.commandStr);var Qn=Tn.cmp||"keep",xn=Tn.ref||0,Tr="mask"in Tn?Tn.mask:-1;return q.commandParameter(Qn,xu,ur+".cmp",sn.commandStr),q.commandType(xn,"number",ur+".ref",sn.commandStr),q.commandType(Tr,"number",ur+".mask",sn.commandStr),[xu[Qn],xn,Tr]},function(Tn,Qn,xn){var Tr=Tn.constants.compareFuncs;q.optional(function(){function ii(){Tn.assert(Qn,Array.prototype.join.call(arguments,""),"invalid stencil.func")}ii(xn+"&&typeof ",xn,'==="object"'),ii('!("cmp" in ',xn,")||(",xn,".cmp in ",Tr,")")});var jr=Qn.def('"cmp" in ',xn,"?",Tr,"[",xn,".cmp]",":",$i),li=Qn.def(xn,".ref|0"),Hr=Qn.def('"mask" in ',xn,"?",xn,".mask|0:-1");return[jr,li,Hr]});case fc:case Su:return Sr(function(Tn){q.commandType(Tn,"object",ar,sn.commandStr);var Qn=Tn.fail||"keep",xn=Tn.zfail||"keep",Tr=Tn.zpass||"keep";return q.commandParameter(Qn,_s,ur+".fail",sn.commandStr),q.commandParameter(xn,_s,ur+".zfail",sn.commandStr),q.commandParameter(Tr,_s,ur+".zpass",sn.commandStr),[ur===Su?un:Ue,_s[Qn],_s[xn],_s[Tr]]},function(Tn,Qn,xn){var Tr=Tn.constants.stencilOps;q.optional(function(){Tn.assert(Qn,xn+"&&typeof "+xn+'==="object"',"invalid "+ur)});function jr(li){return q.optional(function(){Tn.assert(Qn,'!("'+li+'" in '+xn+")||("+xn+"."+li+" in "+Tr+")","invalid "+ur+"."+li+", must be one of "+Object.keys(_s))}),Qn.def('"',li,'" in ',xn,"?",Tr,"[",xn,".",li,"]:",$i)}return[ur===Su?un:Ue,jr("fail"),jr("zfail"),jr("zpass")]});case xc:return Sr(function(Tn){q.commandType(Tn,"object",ar,sn.commandStr);var Qn=Tn.factor|0,xn=Tn.units|0;return q.commandType(Qn,"number",ar+".factor",sn.commandStr),q.commandType(xn,"number",ar+".units",sn.commandStr),[Qn,xn]},function(Tn,Qn,xn){q.optional(function(){Tn.assert(Qn,xn+"&&typeof "+xn+'==="object"',"invalid "+ur)});var Tr=Qn.def(xn,".factor|0"),jr=Qn.def(xn,".units|0");return[Tr,jr]});case wl:return Sr(function(Tn){var Qn=0;return Tn==="front"?Qn=Ue:Tn==="back"&&(Qn=un),q.command(!!Qn,ar,sn.commandStr),Qn},function(Tn,Qn,xn){return q.optional(function(){Tn.assert(Qn,xn+'==="front"||'+xn+'==="back"',"invalid cull.face")}),Qn.def(xn,'==="front"?',Ue,":",un)});case Il:return Sr(function(Tn){return q.command(typeof Tn=="number"&&Tn>=In.lineWidthDims[0]&&Tn<=In.lineWidthDims[1],"invalid line width, must be a positive number between "+In.lineWidthDims[0]+" and "+In.lineWidthDims[1],sn.commandStr),Tn},function(Tn,Qn,xn){return q.optional(function(){Tn.assert(Qn,"typeof "+xn+'==="number"&&'+xn+">="+In.lineWidthDims[0]+"&&"+xn+"<="+In.lineWidthDims[1],"invalid line width")}),xn});case yc:return Sr(function(Tn){return q.commandParameter(Tn,mo,ar,sn.commandStr),mo[Tn]},function(Tn,Qn,xn){return q.optional(function(){Tn.assert(Qn,xn+'==="cw"||'+xn+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),Qn.def(xn+'==="cw"?'+Gn+":"+mr)});case yl:return Sr(function(Tn){return q.command(Io(Tn)&&Tn.length===4,"color.mask must be length 4 array",sn.commandStr),Tn.map(function(Qn){return!!Qn})},function(Tn,Qn,xn){return q.optional(function(){Tn.assert(Qn,Tn.shared.isArrayLike+"("+xn+")&&"+xn+".length===4","invalid color.mask")}),Ae(4,function(Tr){return"!!"+xn+"["+Tr+"]"})});case Uc:return Sr(function(Tn){q.command(typeof Tn=="object"&&Tn,ar,sn.commandStr);var Qn="value"in Tn?Tn.value:1,xn=!!Tn.invert;return q.command(typeof Qn=="number"&&Qn>=0&&Qn<=1,"sample.coverage.value must be a number between 0 and 1",sn.commandStr),[Qn,xn]},function(Tn,Qn,xn){q.optional(function(){Tn.assert(Qn,xn+"&&typeof "+xn+'==="object"',"invalid sample.coverage")});var Tr=Qn.def('"value" in ',xn,"?+",xn,".value:1"),jr=Qn.def("!!",xn,".invert");return[Tr,jr]})}}),Dr}function Xl(Sn,sn){var er=Sn.static,Or=Sn.dynamic,Dr={};return Object.keys(er).forEach(function(ur){var ar=er[ur],Sr;if(typeof ar=="number"||typeof ar=="boolean")Sr=Ka(function(){return ar});else if(typeof ar=="function"){var Tn=ar._reglType;Tn==="texture2d"||Tn==="textureCube"?Sr=Ka(function(Qn){return Qn.link(ar)}):Tn==="framebuffer"||Tn==="framebufferCube"?(q.command(ar.color.length>0,'missing color attachment for framebuffer sent to uniform "'+ur+'"',sn.commandStr),Sr=Ka(function(Qn){return Qn.link(ar.color[0])})):q.commandRaise('invalid data for uniform "'+ur+'"',sn.commandStr)}else Io(ar)?Sr=Ka(function(Qn){var xn=Qn.global.def("[",Ae(ar.length,function(Tr){return q.command(typeof ar[Tr]=="number"||typeof ar[Tr]=="boolean","invalid uniform "+ur,Qn.commandStr),ar[Tr]}),"]");return xn}):q.commandRaise('invalid or missing data for uniform "'+ur+'"',sn.commandStr);Sr.value=ar,Dr[ur]=Sr}),Object.keys(Or).forEach(function(ur){var ar=Or[ur];Dr[ur]=Zu(ar,function(Sr,Tn){return Sr.invoke(Tn,ar)})}),Dr}function Zo(Sn,sn){var er=Sn.static,Or=Sn.dynamic,Dr={};return Object.keys(er).forEach(function(ur){var ar=er[ur],Sr=Me.id(ur),Tn=new Ir;if(fu(ar))Tn.state=ji,Tn.buffer=ir.getBuffer(ir.create(ar,Rc,!1,!0)),Tn.type=0;else{var Qn=ir.getBuffer(ar);if(Qn)Tn.state=ji,Tn.buffer=Qn,Tn.type=0;else if(q.command(typeof ar=="object"&&ar,"invalid data for attribute "+ur,sn.commandStr),"constant"in ar){var xn=ar.constant;Tn.buffer="null",Tn.state=Hi,typeof xn=="number"?Tn.x=xn:(q.command(Io(xn)&&xn.length>0&&xn.length<=4,"invalid constant for attribute "+ur,sn.commandStr),Wr.forEach(function(da,Lo){Lo<xn.length&&(Tn[da]=xn[Lo])}))}else{fu(ar.buffer)?Qn=ir.getBuffer(ir.create(ar.buffer,Rc,!1,!0)):Qn=ir.getBuffer(ar.buffer),q.command(!!Qn,'missing buffer for attribute "'+ur+'"',sn.commandStr);var Tr=ar.offset|0;q.command(Tr>=0,'invalid offset for attribute "'+ur+'"',sn.commandStr);var jr=ar.stride|0;q.command(jr>=0&&jr<256,'invalid stride for attribute "'+ur+'", must be integer betweeen [0, 255]',sn.commandStr);var li=ar.size|0;q.command(!("size"in ar)||li>0&&li<=4,'invalid size for attribute "'+ur+'", must be 1,2,3,4',sn.commandStr);var Hr=!!ar.normalized,ii=0;"type"in ar&&(q.commandParameter(ar.type,Qa,"invalid type for attribute "+ur,sn.commandStr),ii=Qa[ar.type]);var Ri=ar.divisor|0;"divisor"in ar&&(q.command(Ri===0||vi,'cannot specify divisor for attribute "'+ur+'", instancing not supported',sn.commandStr),q.command(Ri>=0,'invalid divisor for attribute "'+ur+'"',sn.commandStr)),q.optional(function(){var da=sn.commandStr,Lo=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(ar).forEach(function(ca){q.command(Lo.indexOf(ca)>=0,'unknown parameter "'+ca+'" for attribute pointer "'+ur+'" (valid parameters are '+Lo+")",da)})}),Tn.buffer=Qn,Tn.state=ji,Tn.size=li,Tn.normalized=Hr,Tn.type=ii||Qn.dtype,Tn.offset=Tr,Tn.stride=jr,Tn.divisor=Ri}}Dr[ur]=Ka(function(da,Lo){var ca=da.attribCache;if(Sr in ca)return ca[Sr];var Va={isStream:!1};return Object.keys(Tn).forEach(function(yo){Va[yo]=Tn[yo]}),Tn.buffer&&(Va.buffer=da.link(Tn.buffer),Va.type=Va.type||Va.buffer+".dtype"),ca[Sr]=Va,Va})}),Object.keys(Or).forEach(function(ur){var ar=Or[ur];function Sr(Tn,Qn){var xn=Tn.invoke(Qn,ar),Tr=Tn.shared,jr=Tn.constants,li=Tr.isBufferArgs,Hr=Tr.buffer;q.optional(function(){Tn.assert(Qn,xn+"&&(typeof "+xn+'==="object"||typeof '+xn+'==="function")&&('+li+"("+xn+")||"+Hr+".getBuffer("+xn+")||"+Hr+".getBuffer("+xn+".buffer)||"+li+"("+xn+'.buffer)||("constant" in '+xn+"&&(typeof "+xn+'.constant==="number"||'+Tr.isArrayLike+"("+xn+".constant))))",'invalid dynamic attribute "'+ur+'"')});var ii={isStream:Qn.def(!1)},Ri=new Ir;Ri.state=ji,Object.keys(Ri).forEach(function(Va){ii[Va]=Qn.def(""+Ri[Va])});var da=ii.buffer,Lo=ii.type;Qn("if(",li,"(",xn,")){",ii.isStream,"=true;",da,"=",Hr,".createStream(",Rc,",",xn,");",Lo,"=",da,".dtype;","}else{",da,"=",Hr,".getBuffer(",xn,");","if(",da,"){",Lo,"=",da,".dtype;",'}else if("constant" in ',xn,"){",ii.state,"=",Hi,";","if(typeof "+xn+'.constant === "number"){',ii[Wr[0]],"=",xn,".constant;",Wr.slice(1).map(function(Va){return ii[Va]}).join("="),"=0;","}else{",Wr.map(function(Va,yo){return ii[Va]+"="+xn+".constant.length>"+yo+"?"+xn+".constant["+yo+"]:0;"}).join(""),"}}else{","if(",li,"(",xn,".buffer)){",da,"=",Hr,".createStream(",Rc,",",xn,".buffer);","}else{",da,"=",Hr,".getBuffer(",xn,".buffer);","}",Lo,'="type" in ',xn,"?",jr.glTypes,"[",xn,".type]:",da,".dtype;",ii.normalized,"=!!",xn,".normalized;");function ca(Va){Qn(ii[Va],"=",xn,".",Va,"|0;")}return ca("size"),ca("offset"),ca("stride"),ca("divisor"),Qn("}}"),Qn.exit("if(",ii.isStream,"){",Hr,".destroyStream(",da,");","}"),ii}Dr[ur]=Zu(ar,Sr)}),Dr}function Ku(Sn,sn){var er=Sn.static,Or=Sn.dynamic;if(Lc in er){var Dr=er[Lc];return Dr!==null&&Yr.getVAO(Dr)===null&&(Dr=Yr.createVAO(Dr)),Ka(function(ar){return ar.link(Yr.getVAO(Dr))})}else if(Lc in Or){var ur=Or[Lc];return Zu(ur,function(ar,Sr){var Tn=ar.invoke(Sr,ur);return Sr.def(ar.shared.vao+".getVAO("+Tn+")")})}return null}function Ks(Sn){var sn=Sn.static,er=Sn.dynamic,Or={};return Object.keys(sn).forEach(function(Dr){var ur=sn[Dr];Or[Dr]=Ka(function(ar,Sr){return typeof ur=="number"||typeof ur=="boolean"?""+ur:ar.link(ur)})}),Object.keys(er).forEach(function(Dr){var ur=er[Dr];Or[Dr]=Zu(ur,function(ar,Sr){return ar.invoke(Sr,ur)})}),Or}function Jl(Sn,sn,er,Or,Dr){var ur=Sn.static,ar=Sn.dynamic;q.optional(function(){var ca=[vl,Wu,Hu,rl,ec,qc,Ic,tf,dl,Lc].concat(Ci);function Va(yo){Object.keys(yo).forEach(function(Rs){q.command(ca.indexOf(Rs)>=0,'unknown parameter "'+Rs+'"',Dr.commandStr)})}Va(ur),Va(ar)});var Sr=so(Sn,sn),Tn=Ki(Sn,Dr),Qn=Oo(Sn,Tn,Dr),xn=Ms(Sn,Dr),Tr=bl(Sn,Dr),jr=Do(Sn,Dr,Sr);function li(ca){var Va=Qn[ca];Va&&(Tr[ca]=Va)}li(Wl),li(Oi(Nc));var Hr=Object.keys(Tr).length>0,ii={framebuffer:Tn,draw:xn,shader:jr,state:Tr,dirty:Hr,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(ii.profile=ia(Sn,Dr),ii.uniforms=Xl(er,Dr),ii.drawVAO=ii.scopeVAO=Ku(Sn,Dr),!ii.drawVAO&&jr.program&&!Sr&&Ze.angle_instanced_arrays){var Ri=!0,da=jr.program.attributes.map(function(ca){var Va=sn.static[ca];return Ri=Ri&&!!Va,Va});if(Ri&&da.length>0){var Lo=Yr.getVAO(Yr.createVAO(da));ii.drawVAO=new ss(null,null,null,function(ca,Va){return ca.link(Lo)}),ii.useVAO=!0}}return Sr?ii.useVAO=!0:ii.attributes=Zo(sn,Dr),ii.context=Ks(Or,Dr),ii}function Ll(Sn,sn,er){var Or=Sn.shared,Dr=Or.context,ur=Sn.scope();Object.keys(er).forEach(function(ar){sn.save(Dr,"."+ar);var Sr=er[ar],Tn=Sr.append(Sn,sn);Array.isArray(Tn)?ur(Dr,".",ar,"=[",Tn.join(),"];"):ur(Dr,".",ar,"=",Tn,";")}),sn(ur)}function Yl(Sn,sn,er,Or){var Dr=Sn.shared,ur=Dr.gl,ar=Dr.framebuffer,Sr;Vi&&(Sr=sn.def(Dr.extensions,".webgl_draw_buffers"));var Tn=Sn.constants,Qn=Tn.drawBuffer,xn=Tn.backBuffer,Tr;er?Tr=er.append(Sn,sn):Tr=sn.def(ar,".next"),Or||sn("if(",Tr,"!==",ar,".cur){"),sn("if(",Tr,"){",ur,".bindFramebuffer(",ts,",",Tr,".framebuffer);"),Vi&&sn(Sr,".drawBuffersWEBGL(",Qn,"[",Tr,".colorAttachments.length]);"),sn("}else{",ur,".bindFramebuffer(",ts,",null);"),Vi&&sn(Sr,".drawBuffersWEBGL(",xn,");"),sn("}",ar,".cur=",Tr,";"),Or||sn("}")}function Rl(Sn,sn,er){var Or=Sn.shared,Dr=Or.gl,ur=Sn.current,ar=Sn.next,Sr=Or.current,Tn=Or.next,Qn=Sn.cond(Sr,".dirty");Ci.forEach(function(xn){var Tr=Oi(xn);if(!(Tr in er.state)){var jr,li;if(Tr in ar){jr=ar[Tr],li=ur[Tr];var Hr=Ae($r[Tr].length,function(Ri){return Qn.def(jr,"[",Ri,"]")});Qn(Sn.cond(Hr.map(function(Ri,da){return Ri+"!=="+li+"["+da+"]"}).join("||")).then(Dr,".",xi[Tr],"(",Hr,");",Hr.map(function(Ri,da){return li+"["+da+"]="+Ri}).join(";"),";"))}else{jr=Qn.def(Tn,".",Tr);var ii=Sn.cond(jr,"!==",Sr,".",Tr);Qn(ii),Tr in Ei?ii(Sn.cond(jr).then(Dr,".enable(",Ei[Tr],");").else(Dr,".disable(",Ei[Tr],");"),Sr,".",Tr,"=",jr,";"):ii(Dr,".",xi[Tr],"(",jr,");",Sr,".",Tr,"=",jr,";")}}}),Object.keys(er.state).length===0&&Qn(Sr,".dirty=false;"),sn(Qn)}function dc(Sn,sn,er,Or){var Dr=Sn.shared,ur=Sn.current,ar=Dr.current,Sr=Dr.gl;xl(Object.keys(er)).forEach(function(Tn){var Qn=er[Tn];if(!(Or&&!Or(Qn))){var xn=Qn.append(Sn,sn);if(Ei[Tn]){var Tr=Ei[Tn];Ls(Qn)?xn?sn(Sr,".enable(",Tr,");"):sn(Sr,".disable(",Tr,");"):sn(Sn.cond(xn).then(Sr,".enable(",Tr,");").else(Sr,".disable(",Tr,");")),sn(ar,".",Tn,"=",xn,";")}else if(Io(xn)){var jr=ur[Tn];sn(Sr,".",xi[Tn],"(",xn,");",xn.map(function(li,Hr){return jr+"["+Hr+"]="+li}).join(";"),";")}else sn(Sr,".",xi[Tn],"(",xn,");",ar,".",Tn,"=",xn,";")}})}function El(Sn,sn){vi&&(Sn.instancing=sn.def(Sn.shared.extensions,".angle_instanced_arrays"))}function Ca(Sn,sn,er,Or,Dr){var ur=Sn.shared,ar=Sn.stats,Sr=ur.current,Tn=ur.timer,Qn=er.profile;function xn(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}var Tr,jr;function li(ca){Tr=sn.def(),ca(Tr,"=",xn(),";"),typeof Dr=="string"?ca(ar,".count+=",Dr,";"):ca(ar,".count++;"),di&&(Or?(jr=sn.def(),ca(jr,"=",Tn,".getNumPendingQueries();")):ca(Tn,".beginQuery(",ar,");"))}function Hr(ca){ca(ar,".cpuTime+=",xn(),"-",Tr,";"),di&&(Or?ca(Tn,".pushScopeStats(",jr,",",Tn,".getNumPendingQueries(),",ar,");"):ca(Tn,".endQuery();"))}function ii(ca){var Va=sn.def(Sr,".profile");sn(Sr,".profile=",ca,";"),sn.exit(Sr,".profile=",Va,";")}var Ri;if(Qn){if(Ls(Qn)){Qn.enable?(li(sn),Hr(sn.exit),ii("true")):ii("false");return}Ri=Qn.append(Sn,sn),ii(Ri)}else Ri=sn.def(Sr,".profile");var da=Sn.block();li(da),sn("if(",Ri,"){",da,"}");var Lo=Sn.block();Hr(Lo),sn.exit("if(",Ri,"){",Lo,"}")}function Ec(Sn,sn,er,Or,Dr){var ur=Sn.shared;function ar(Tn){switch(Tn){case hf:case af:case zc:return 2;case yu:case oc:case vf:return 3;case Hc:case hc:case _f:return 4;default:return 1}}function Sr(Tn,Qn,xn){var Tr=ur.gl,jr=sn.def(Tn,".location"),li=sn.def(ur.attributes,"[",jr,"]"),Hr=xn.state,ii=xn.buffer,Ri=[xn.x,xn.y,xn.z,xn.w],da=["buffer","normalized","offset","stride"];function Lo(){sn("if(!",li,".buffer){",Tr,".enableVertexAttribArray(",jr,");}");var Va=xn.type,yo;if(xn.size?yo=sn.def(xn.size,"||",Qn):yo=Qn,sn("if(",li,".type!==",Va,"||",li,".size!==",yo,"||",da.map(function(jl){return li+"."+jl+"!=="+xn[jl]}).join("||"),"){",Tr,".bindBuffer(",Rc,",",ii,".buffer);",Tr,".vertexAttribPointer(",[jr,yo,Va,xn.normalized,xn.stride,xn.offset],");",li,".type=",Va,";",li,".size=",yo,";",da.map(function(jl){return li+"."+jl+"="+xn[jl]+";"}).join(""),"}"),vi){var Rs=xn.divisor;sn("if(",li,".divisor!==",Rs,"){",Sn.instancing,".vertexAttribDivisorANGLE(",[jr,Rs],");",li,".divisor=",Rs,";}")}}function ca(){sn("if(",li,".buffer){",Tr,".disableVertexAttribArray(",jr,");",li,".buffer=null;","}if(",Wr.map(function(Va,yo){return li+"."+Va+"!=="+Ri[yo]}).join("||"),"){",Tr,".vertexAttrib4f(",jr,",",Ri,");",Wr.map(function(Va,yo){return li+"."+Va+"="+Ri[yo]+";"}).join(""),"}")}Hr===ji?Lo():Hr===Hi?ca():(sn("if(",Hr,"===",ji,"){"),Lo(),sn("}else{"),ca(),sn("}"))}Or.forEach(function(Tn){var Qn=Tn.name,xn=er.attributes[Qn],Tr;if(xn){if(!Dr(xn))return;Tr=xn.append(Sn,sn)}else{if(!Dr(Yc))return;var jr=Sn.scopeAttrib(Qn);q.optional(function(){Sn.assert(sn,jr+".state","missing attribute "+Qn)}),Tr={},Object.keys(new Ir).forEach(function(li){Tr[li]=sn.def(jr,".",li)})}Sr(Sn.link(Tn),ar(Tn.info.type),Tr)})}function Vs(Sn,sn,er,Or,Dr){for(var ur=Sn.shared,ar=ur.gl,Sr,Tn=0;Tn<Or.length;++Tn){var Qn=Or[Tn],xn=Qn.name,Tr=Qn.info.type,jr=er.uniforms[xn],li=Sn.link(Qn),Hr=li+".location",ii;if(jr){if(!Dr(jr))continue;if(Ls(jr)){var Ri=jr.value;if(q.command(Ri!==null&&typeof Ri!="undefined",'missing uniform "'+xn+'"',Sn.commandStr),Tr===ge||Tr===kt){q.command(typeof Ri=="function"&&(Tr===ge&&(Ri._reglType==="texture2d"||Ri._reglType==="framebuffer")||Tr===kt&&(Ri._reglType==="textureCube"||Ri._reglType==="framebufferCube")),"invalid texture for uniform "+xn,Sn.commandStr);var da=Sn.link(Ri._texture||Ri.color[0]._texture);sn(ar,".uniform1i(",Hr,",",da+".bind());"),sn.exit(da,".unbind();")}else if(Tr===of||Tr===jc||Tr===de){q.optional(function(){q.command(Io(Ri),"invalid matrix for uniform "+xn,Sn.commandStr),q.command(Tr===of&&Ri.length===4||Tr===jc&&Ri.length===9||Tr===de&&Ri.length===16,"invalid length for matrix uniform "+xn,Sn.commandStr)});var Lo=Sn.global.def("new Float32Array(["+Array.prototype.slice.call(Ri)+"])"),ca=2;Tr===jc?ca=3:Tr===de&&(ca=4),sn(ar,".uniformMatrix",ca,"fv(",Hr,",false,",Lo,");")}else{switch(Tr){case Wc:q.commandType(Ri,"number","uniform "+xn,Sn.commandStr),Sr="1f";break;case hf:q.command(Io(Ri)&&Ri.length===2,"uniform "+xn,Sn.commandStr),Sr="2f";break;case yu:q.command(Io(Ri)&&Ri.length===3,"uniform "+xn,Sn.commandStr),Sr="3f";break;case Hc:q.command(Io(Ri)&&Ri.length===4,"uniform "+xn,Sn.commandStr),Sr="4f";break;case Sf:q.commandType(Ri,"boolean","uniform "+xn,Sn.commandStr),Sr="1i";break;case df:q.commandType(Ri,"number","uniform "+xn,Sn.commandStr),Sr="1i";break;case zc:q.command(Io(Ri)&&Ri.length===2,"uniform "+xn,Sn.commandStr),Sr="2i";break;case af:q.command(Io(Ri)&&Ri.length===2,"uniform "+xn,Sn.commandStr),Sr="2i";break;case vf:q.command(Io(Ri)&&Ri.length===3,"uniform "+xn,Sn.commandStr),Sr="3i";break;case oc:q.command(Io(Ri)&&Ri.length===3,"uniform "+xn,Sn.commandStr),Sr="3i";break;case _f:q.command(Io(Ri)&&Ri.length===4,"uniform "+xn,Sn.commandStr),Sr="4i";break;case hc:q.command(Io(Ri)&&Ri.length===4,"uniform "+xn,Sn.commandStr),Sr="4i";break}sn(ar,".uniform",Sr,"(",Hr,",",Io(Ri)?Array.prototype.slice.call(Ri):Ri,");")}continue}else ii=jr.append(Sn,sn)}else{if(!Dr(Yc))continue;ii=sn.def(ur.uniforms,"[",Me.id(xn),"]")}Tr===ge?(q(!Array.isArray(ii),"must specify a scalar prop for textures"),sn("if(",ii,"&&",ii,'._reglType==="framebuffer"){',ii,"=",ii,".color[0];","}")):Tr===kt&&(q(!Array.isArray(ii),"must specify a scalar prop for cube maps"),sn("if(",ii,"&&",ii,'._reglType==="framebufferCube"){',ii,"=",ii,".color[0];","}")),q.optional(function(){function Dc(Jc,th){Sn.assert(sn,Jc,'bad data or missing for uniform "'+xn+'".  '+th)}function vh(Jc){q(!Array.isArray(ii),"must not specify an array type for uniform"),Dc("typeof "+ii+'==="'+Jc+'"',"invalid type, expected "+Jc)}function Zc(Jc,th){Array.isArray(ii)?q(ii.length===Jc,"must have length "+Jc):Dc(ur.isArrayLike+"("+ii+")&&"+ii+".length==="+Jc,"invalid vector, should have length "+Jc,Sn.commandStr)}function Ah(Jc){q(!Array.isArray(ii),"must not specify a value type"),Dc("typeof "+ii+'==="function"&&'+ii+'._reglType==="texture'+(Jc===Cc?"2d":"Cube")+'"',"invalid texture type",Sn.commandStr)}switch(Tr){case df:vh("number");break;case af:Zc(2,"number");break;case oc:Zc(3,"number");break;case hc:Zc(4,"number");break;case Wc:vh("number");break;case hf:Zc(2,"number");break;case yu:Zc(3,"number");break;case Hc:Zc(4,"number");break;case Sf:vh("boolean");break;case zc:Zc(2,"boolean");break;case vf:Zc(3,"boolean");break;case _f:Zc(4,"boolean");break;case of:Zc(4,"number");break;case jc:Zc(9,"number");break;case de:Zc(16,"number");break;case ge:Ah(Cc);break;case kt:Ah(Xc);break}});var Va=1;switch(Tr){case ge:case kt:var yo=sn.def(ii,"._texture");sn(ar,".uniform1i(",Hr,",",yo,".bind());"),sn.exit(yo,".unbind();");continue;case df:case Sf:Sr="1i";break;case af:case zc:Sr="2i",Va=2;break;case oc:case vf:Sr="3i",Va=3;break;case hc:case _f:Sr="4i",Va=4;break;case Wc:Sr="1f";break;case hf:Sr="2f",Va=2;break;case yu:Sr="3f",Va=3;break;case Hc:Sr="4f",Va=4;break;case of:Sr="Matrix2fv";break;case jc:Sr="Matrix3fv";break;case de:Sr="Matrix4fv";break}if(sn(ar,".uniform",Sr,"(",Hr,","),Sr.charAt(0)==="M"){var Rs=Math.pow(Tr-of+2,2),jl=Sn.global.def("new Float32Array(",Rs,")");Array.isArray(ii)?sn("false,(",Ae(Rs,function(Dc){return jl+"["+Dc+"]="+ii[Dc]}),",",jl,")"):sn("false,(Array.isArray(",ii,")||",ii," instanceof Float32Array)?",ii,":(",Ae(Rs,function(Dc){return jl+"["+Dc+"]="+ii+"["+Dc+"]"}),",",jl,")")}else Va>1?sn(Ae(Va,function(Dc){return Array.isArray(ii)?ii[Dc]:ii+"["+Dc+"]"})):(q(!Array.isArray(ii),"uniform value must not be an array"),sn(ii));sn(");")}}function Xi(Sn,sn,er,Or){var Dr=Sn.shared,ur=Dr.gl,ar=Dr.draw,Sr=Or.draw;function Tn(){var yo=Sr.elements,Rs,jl=sn;return yo?((yo.contextDep&&Or.contextDynamic||yo.propDep)&&(jl=er),Rs=yo.append(Sn,jl)):Rs=jl.def(ar,".",rl),Rs&&jl("if("+Rs+")"+ur+".bindBuffer("+Pf+","+Rs+".buffer.buffer);"),Rs}function Qn(){var yo=Sr.count,Rs,jl=sn;return yo?((yo.contextDep&&Or.contextDynamic||yo.propDep)&&(jl=er),Rs=yo.append(Sn,jl),q.optional(function(){yo.MISSING&&Sn.assert(sn,"false","missing vertex count"),yo.DYNAMIC&&Sn.assert(jl,Rs+">=0","missing vertex count")})):(Rs=jl.def(ar,".",Ic),q.optional(function(){Sn.assert(jl,Rs+">=0","missing vertex count")})),Rs}var xn=Tn();function Tr(yo){var Rs=Sr[yo];return Rs?Rs.contextDep&&Or.contextDynamic||Rs.propDep?Rs.append(Sn,er):Rs.append(Sn,sn):sn.def(ar,".",yo)}var jr=Tr(ec),li=Tr(qc),Hr=Qn();if(typeof Hr=="number"){if(Hr===0)return}else er("if(",Hr,"){"),er.exit("}");var ii,Ri;vi&&(ii=Tr(tf),Ri=Sn.instancing);var da=xn+".type",Lo=Sr.elements&&Ls(Sr.elements);function ca(){function yo(){er(Ri,".drawElementsInstancedANGLE(",[jr,Hr,da,li+"<<(("+da+"-"+bi+")>>1)",ii],");")}function Rs(){er(Ri,".drawArraysInstancedANGLE(",[jr,li,Hr,ii],");")}xn?Lo?yo():(er("if(",xn,"){"),yo(),er("}else{"),Rs(),er("}")):Rs()}function Va(){function yo(){er(ur+".drawElements("+[jr,Hr,da,li+"<<(("+da+"-"+bi+")>>1)"]+");")}function Rs(){er(ur+".drawArrays("+[jr,li,Hr]+");")}xn?Lo?yo():(er("if(",xn,"){"),yo(),er("}else{"),Rs(),er("}")):Rs()}vi&&(typeof ii!="number"||ii>=0)?typeof ii=="string"?(er("if(",ii,">0){"),ca(),er("}else if(",ii,"<0){"),Va(),er("}")):ca():Va()}function Mo(Sn,sn,er,Or,Dr){var ur=za(),ar=ur.proc("body",Dr);return q.optional(function(){ur.commandStr=sn.commandStr,ur.command=ur.link(sn.commandStr)}),vi&&(ur.instancing=ar.def(ur.shared.extensions,".angle_instanced_arrays")),Sn(ur,ar,er,Or),ur.compile().body}function zo(Sn,sn,er,Or){El(Sn,sn),er.useVAO?er.drawVAO?sn(Sn.shared.vao,".setVAO(",er.drawVAO.append(Sn,sn),");"):sn(Sn.shared.vao,".setVAO(",Sn.shared.vao,".targetVAO);"):(sn(Sn.shared.vao,".setVAO(null);"),Ec(Sn,sn,er,Or.attributes,function(){return!0})),Vs(Sn,sn,er,Or.uniforms,function(){return!0}),Xi(Sn,sn,sn,er)}function Dl(Sn,sn){var er=Sn.proc("draw",1);El(Sn,er),Ll(Sn,er,sn.context),Yl(Sn,er,sn.framebuffer),Rl(Sn,er,sn),dc(Sn,er,sn.state),Ca(Sn,er,sn,!1,!0);var Or=sn.shader.progVar.append(Sn,er);if(er(Sn.shared.gl,".useProgram(",Or,".program);"),sn.shader.program)zo(Sn,er,sn,sn.shader.program);else{er(Sn.shared.vao,".setVAO(null);");var Dr=Sn.global.def("{}"),ur=er.def(Or,".id"),ar=er.def(Dr,"[",ur,"]");er(Sn.cond(ar).then(ar,".call(this,a0);").else(ar,"=",Dr,"[",ur,"]=",Sn.link(function(Sr){return Mo(zo,Sn,sn,Sr,1)}),"(",Or,");",ar,".call(this,a0);"))}Object.keys(sn.state).length>0&&er(Sn.shared.current,".dirty=true;")}function Sc(Sn,sn,er,Or){Sn.batchId="a1",El(Sn,sn);function Dr(){return!0}Ec(Sn,sn,er,Or.attributes,Dr),Vs(Sn,sn,er,Or.uniforms,Dr),Xi(Sn,sn,sn,er)}function mf(Sn,sn,er,Or){El(Sn,sn);var Dr=er.contextDep,ur=sn.def(),ar="a0",Sr="a1",Tn=sn.def();Sn.shared.props=Tn,Sn.batchId=ur;var Qn=Sn.scope(),xn=Sn.scope();sn(Qn.entry,"for(",ur,"=0;",ur,"<",Sr,";++",ur,"){",Tn,"=",ar,"[",ur,"];",xn,"}",Qn.exit);function Tr(da){return da.contextDep&&Dr||da.propDep}function jr(da){return!Tr(da)}if(er.needsContext&&Ll(Sn,xn,er.context),er.needsFramebuffer&&Yl(Sn,xn,er.framebuffer),dc(Sn,xn,er.state,Tr),er.profile&&Tr(er.profile)&&Ca(Sn,xn,er,!1,!0),Or)er.useVAO?er.drawVAO?Tr(er.drawVAO)?xn(Sn.shared.vao,".setVAO(",er.drawVAO.append(Sn,xn),");"):Qn(Sn.shared.vao,".setVAO(",er.drawVAO.append(Sn,Qn),");"):Qn(Sn.shared.vao,".setVAO(",Sn.shared.vao,".targetVAO);"):(Qn(Sn.shared.vao,".setVAO(null);"),Ec(Sn,Qn,er,Or.attributes,jr),Ec(Sn,xn,er,Or.attributes,Tr)),Vs(Sn,Qn,er,Or.uniforms,jr),Vs(Sn,xn,er,Or.uniforms,Tr),Xi(Sn,Qn,xn,er);else{var li=Sn.global.def("{}"),Hr=er.shader.progVar.append(Sn,xn),ii=xn.def(Hr,".id"),Ri=xn.def(li,"[",ii,"]");xn(Sn.shared.gl,".useProgram(",Hr,".program);","if(!",Ri,"){",Ri,"=",li,"[",ii,"]=",Sn.link(function(da){return Mo(Sc,Sn,er,da,2)}),"(",Hr,");}",Ri,".call(this,a0[",ur,"],",ur,");")}}function Dn(Sn,sn){var er=Sn.proc("batch",2);Sn.batchId="0",El(Sn,er);var Or=!1,Dr=!0;Object.keys(sn.context).forEach(function(li){Or=Or||sn.context[li].propDep}),Or||(Ll(Sn,er,sn.context),Dr=!1);var ur=sn.framebuffer,ar=!1;ur?(ur.propDep?Or=ar=!0:ur.contextDep&&Or&&(ar=!0),ar||Yl(Sn,er,ur)):Yl(Sn,er,null),sn.state.viewport&&sn.state.viewport.propDep&&(Or=!0);function Sr(li){return li.contextDep&&Or||li.propDep}Rl(Sn,er,sn),dc(Sn,er,sn.state,function(li){return!Sr(li)}),(!sn.profile||!Sr(sn.profile))&&Ca(Sn,er,sn,!1,"a1"),sn.contextDep=Or,sn.needsContext=Dr,sn.needsFramebuffer=ar;var Tn=sn.shader.progVar;if(Tn.contextDep&&Or||Tn.propDep)mf(Sn,er,sn,null);else{var Qn=Tn.append(Sn,er);if(er(Sn.shared.gl,".useProgram(",Qn,".program);"),sn.shader.program)mf(Sn,er,sn,sn.shader.program);else{er(Sn.shared.vao,".setVAO(null);");var xn=Sn.global.def("{}"),Tr=er.def(Qn,".id"),jr=er.def(xn,"[",Tr,"]");er(Sn.cond(jr).then(jr,".call(this,a0,a1);").else(jr,"=",xn,"[",Tr,"]=",Sn.link(function(li){return Mo(mf,Sn,sn,li,2)}),"(",Qn,");",jr,".call(this,a0,a1);"))}}Object.keys(sn.state).length>0&&er(Sn.shared.current,".dirty=true;")}function Zr(Sn,sn){var er=Sn.proc("scope",3);Sn.batchId="a2";var Or=Sn.shared,Dr=Or.current;Ll(Sn,er,sn.context),sn.framebuffer&&sn.framebuffer.append(Sn,er),xl(Object.keys(sn.state)).forEach(function(ar){var Sr=sn.state[ar],Tn=Sr.append(Sn,er);Io(Tn)?Tn.forEach(function(Qn,xn){er.set(Sn.next[ar],"["+xn+"]",Qn)}):er.set(Or.next,"."+ar,Tn)}),Ca(Sn,er,sn,!0,!0),[rl,qc,Ic,tf,ec].forEach(function(ar){var Sr=sn.draw[ar];!Sr||er.set(Or.draw,"."+ar,""+Sr.append(Sn,er))}),Object.keys(sn.uniforms).forEach(function(ar){var Sr=sn.uniforms[ar].append(Sn,er);Array.isArray(Sr)&&(Sr="["+Sr.join()+"]"),er.set(Or.uniforms,"["+Me.id(ar)+"]",Sr)}),Object.keys(sn.attributes).forEach(function(ar){var Sr=sn.attributes[ar].append(Sn,er),Tn=Sn.scopeAttrib(ar);Object.keys(new Ir).forEach(function(Qn){er.set(Tn,"."+Qn,Sr[Qn])})}),sn.scopeVAO&&er.set(Or.vao,".targetVAO",sn.scopeVAO.append(Sn,er));function ur(ar){var Sr=sn.shader[ar];Sr&&er.set(Or.shader,"."+ar,Sr.append(Sn,er))}ur(Wu),ur(Hu),Object.keys(sn.state).length>0&&(er(Dr,".dirty=true;"),er.exit(Dr,".dirty=true;")),er("a1(",Sn.shared.context,",a0,",Sn.batchId,");")}function Ur(Sn){if(!(typeof Sn!="object"||Io(Sn))){for(var sn=Object.keys(Sn),er=0;er<sn.length;++er)if(ze.isDynamic(Sn[sn[er]]))return!0;return!1}}function ta(Sn,sn,er){var Or=sn.static[er];if(!Or||!Ur(Or))return;var Dr=Sn.global,ur=Object.keys(Or),ar=!1,Sr=!1,Tn=!1,Qn=Sn.global.def("{}");ur.forEach(function(Tr){var jr=Or[Tr];if(ze.isDynamic(jr)){typeof jr=="function"&&(jr=Or[Tr]=ze.unbox(jr));var li=Zu(jr,null);ar=ar||li.thisDep,Tn=Tn||li.propDep,Sr=Sr||li.contextDep}else{switch(Dr(Qn,".",Tr,"="),typeof jr){case"number":Dr(jr);break;case"string":Dr('"',jr,'"');break;case"object":Array.isArray(jr)&&Dr("[",jr.join(),"]");break;default:Dr(Sn.link(jr));break}Dr(";")}});function xn(Tr,jr){ur.forEach(function(li){var Hr=Or[li];if(!!ze.isDynamic(Hr)){var ii=Tr.invoke(jr,Hr);jr(Qn,".",li,"=",ii,";")}})}sn.dynamic[er]=new ze.DynamicVariable(va,{thisDep:ar,contextDep:Sr,propDep:Tn,ref:Qn,append:xn}),delete sn.static[er]}function wo(Sn,sn,er,Or,Dr){var ur=za();ur.stats=ur.link(Dr),Object.keys(sn.static).forEach(function(Sr){ta(ur,sn,Sr)}),Gf.forEach(function(Sr){ta(ur,Sn,Sr)});var ar=Jl(Sn,sn,er,Or,ur);return Dl(ur,ar),Zr(ur,ar),Dn(ur,ar),E(ur.compile(),{destroy:function(){ar.shader.program.destroy()}})}return{next:ra,current:$r,procs:function(){var Sn=za(),sn=Sn.proc("poll"),er=Sn.proc("refresh"),Or=Sn.block();sn(Or),er(Or);var Dr=Sn.shared,ur=Dr.gl,ar=Dr.next,Sr=Dr.current;Or(Sr,".dirty=false;"),Yl(Sn,sn),Yl(Sn,er,null,!0);var Tn;vi&&(Tn=Sn.link(vi)),Ze.oes_vertex_array_object&&er(Sn.link(Ze.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Qn=0;Qn<In.maxAttributes;++Qn){var xn=er.def(Dr.attributes,"[",Qn,"]"),Tr=Sn.cond(xn,".buffer");Tr.then(ur,".enableVertexAttribArray(",Qn,");",ur,".bindBuffer(",Rc,",",xn,".buffer.buffer);",ur,".vertexAttribPointer(",Qn,",",xn,".size,",xn,".type,",xn,".normalized,",xn,".stride,",xn,".offset);").else(ur,".disableVertexAttribArray(",Qn,");",ur,".vertexAttrib4f(",Qn,",",xn,".x,",xn,".y,",xn,".z,",xn,".w);",xn,".buffer=null;"),er(Tr),vi&&er(Tn,".vertexAttribDivisorANGLE(",Qn,",",xn,".divisor);")}return er(Sn.shared.vao,".currentVAO=null;",Sn.shared.vao,".setVAO(",Sn.shared.vao,".targetVAO);"),Object.keys(Ei).forEach(function(jr){var li=Ei[jr],Hr=Or.def(ar,".",jr),ii=Sn.block();ii("if(",Hr,"){",ur,".enable(",li,")}else{",ur,".disable(",li,")}",Sr,".",jr,"=",Hr,";"),er(ii),sn("if(",Hr,"!==",Sr,".",jr,"){",ii,"}")}),Object.keys(xi).forEach(function(jr){var li=xi[jr],Hr=$r[jr],ii,Ri,da=Sn.block();if(da(ur,".",li,"("),Io(Hr)){var Lo=Hr.length;ii=Sn.global.def(ar,".",jr),Ri=Sn.global.def(Sr,".",jr),da(Ae(Lo,function(ca){return ii+"["+ca+"]"}),");",Ae(Lo,function(ca){return Ri+"["+ca+"]="+ii+"["+ca+"];"}).join("")),sn("if(",Ae(Lo,function(ca){return ii+"["+ca+"]!=="+Ri+"["+ca+"]"}).join("||"),"){",da,"}")}else ii=Or.def(ar,".",jr),Ri=Or.def(Sr,".",jr),da(ii,");",Sr,".",jr,"=",ii,";"),sn("if(",ii,"!==",Ri,"){",da,"}");er(da)}),Sn.compile()}(),compile:wo}}function dh(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var Rf=34918,bc=34919,Kf=35007,gf=function(Me,Ze){if(!Ze.ext_disjoint_timer_query)return null;var In=[];function ir(){return In.pop()||Ze.ext_disjoint_timer_query.createQueryEXT()}function or(Vi){In.push(Vi)}var sr=[];function wr(Vi){var $r=ir();Ze.ext_disjoint_timer_query.beginQueryEXT(Kf,$r),sr.push($r),ai(sr.length-1,sr.length,Vi)}function ni(){Ze.ext_disjoint_timer_query.endQueryEXT(Kf)}function Yr(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var ei=[];function hi(){return ei.pop()||new Yr}function Ai(Vi){ei.push(Vi)}var di=[];function ai(Vi,$r,ra){var Ci=hi();Ci.startQueryIndex=Vi,Ci.endQueryIndex=$r,Ci.sum=0,Ci.stats=ra,di.push(Ci)}var Ir=[],Mr=[];function vi(){var Vi,$r,ra=sr.length;if(ra!==0){Mr.length=Math.max(Mr.length,ra+1),Ir.length=Math.max(Ir.length,ra+1),Ir[0]=0,Mr[0]=0;var Ci=0;for(Vi=0,$r=0;$r<sr.length;++$r){var Ei=sr[$r];Ze.ext_disjoint_timer_query.getQueryObjectEXT(Ei,bc)?(Ci+=Ze.ext_disjoint_timer_query.getQueryObjectEXT(Ei,Rf),or(Ei)):sr[Vi++]=Ei,Ir[$r+1]=Ci,Mr[$r+1]=Vi}for(sr.length=Vi,Vi=0,$r=0;$r<di.length;++$r){var xi=di[$r],Oi=xi.startQueryIndex,oa=xi.endQueryIndex;xi.sum+=Ir[oa]-Ir[Oi];var Sa=Mr[Oi],Di=Mr[oa];Di===Sa?(xi.stats.gpuTime+=xi.sum/1e6,Ai(xi)):(xi.startQueryIndex=Sa,xi.endQueryIndex=Di,di[Vi++]=xi)}di.length=Vi}}return{beginQuery:wr,endQuery:ni,pushScopeStats:ai,update:vi,getNumPendingQueries:function(){return sr.length},clear:function(){In.push.apply(In,sr);for(var $r=0;$r<In.length;$r++)Ze.ext_disjoint_timer_query.deleteQueryEXT(In[$r]);sr.length=0,In.length=0},restore:function(){sr.length=0,In.length=0}}},Xf=16384,jt=256,yt=1024,Q=34962,xt="webglcontextlost",wt="webglcontextrestored",ae=1,ke=2,gn=3;function pn(ne,Me){for(var Ze=0;Ze<ne.length;++Ze)if(ne[Ze]===Me)return Ze;return-1}function On(ne){var Me=fi(ne);if(!Me)return null;var Ze=Me.gl,In=Ze.getContextAttributes(),ir=Ze.isContextLost(),or=Oe(Ze,Me);if(!or)return null;var sr=Kn(),wr=dh(),ni=or.extensions,Yr=gf(Ze,ni),ei=_n(),hi=Ze.drawingBufferWidth,Ai=Ze.drawingBufferHeight,di={tick:0,time:0,viewportWidth:hi,viewportHeight:Ai,framebufferWidth:hi,framebufferHeight:Ai,drawingBufferWidth:hi,drawingBufferHeight:Ai,pixelRatio:Me.pixelRatio},ai={},Ir={elements:null,primitive:4,count:-1,offset:0,instances:-1},Mr=Ne(Ze,ni),vi=Ja(Ze,wr,Me,$r),Vi=Ht(Ze,ni,Mr,wr,vi);function $r(Xi){return Vi.destroyBuffer(Xi)}var ra=Ns(Ze,ni,vi,wr),Ci=Ie(Ze,sr,wr,Me),Ei=Zt(Ze,ni,Mr,function(){oa.procs.poll()},di,wr,Me),xi=hn(Ze,ni,Mr,wr,Me),Oi=st(Ze,ni,Mr,Ei,xi,wr),oa=pf(Ze,sr,ni,Mr,vi,ra,Ei,Oi,ai,Vi,Ci,Ir,di,Yr,Me),Sa=zn(Ze,Oi,oa.procs.poll,di,In,ni,Mr),Di=oa.next,_i=Ze.canvas,mi=[],za=[],ia=[],Ki=[Me.onDestroy],Oo=null;function so(){if(mi.length===0){Yr&&Yr.update(),Oo=null;return}Oo=Xe.next(so),dc();for(var Xi=mi.length-1;Xi>=0;--Xi){var Mo=mi[Xi];Mo&&Mo(di,null,0)}Ze.flush(),Yr&&Yr.update()}function Do(){!Oo&&mi.length>0&&(Oo=Xe.next(so))}function Ms(){Oo&&(Xe.cancel(so),Oo=null)}function bl(Xi){Xi.preventDefault(),ir=!0,Ms(),za.forEach(function(Mo){Mo()})}function Xl(Xi){Ze.getError(),ir=!1,or.restore(),Ci.restore(),vi.restore(),Ei.restore(),xi.restore(),Oi.restore(),Vi.restore(),Yr&&Yr.restore(),oa.procs.refresh(),Do(),ia.forEach(function(Mo){Mo()})}_i&&(_i.addEventListener(xt,bl,!1),_i.addEventListener(wt,Xl,!1));function Zo(){mi.length=0,Ms(),_i&&(_i.removeEventListener(xt,bl),_i.removeEventListener(wt,Xl)),Ci.clear(),Oi.clear(),xi.clear(),Ei.clear(),ra.clear(),vi.clear(),Vi.clear(),Yr&&Yr.clear(),Ki.forEach(function(Xi){Xi()})}function Ku(Xi){q(!!Xi,"invalid args to regl({...})"),q.type(Xi,"object","invalid args to regl({...})");function Mo(Dr){var ur=E({},Dr);delete ur.uniforms,delete ur.attributes,delete ur.context,delete ur.vao,"stencil"in ur&&ur.stencil.op&&(ur.stencil.opBack=ur.stencil.opFront=ur.stencil.op,delete ur.stencil.op);function ar(Sr){if(Sr in ur){var Tn=ur[Sr];delete ur[Sr],Object.keys(Tn).forEach(function(Qn){ur[Sr+"."+Qn]=Tn[Qn]})}}return ar("blend"),ar("depth"),ar("cull"),ar("stencil"),ar("polygonOffset"),ar("scissor"),ar("sample"),"vao"in Dr&&(ur.vao=Dr.vao),ur}function zo(Dr,ur){var ar={},Sr={};return Object.keys(Dr).forEach(function(Tn){var Qn=Dr[Tn];if(ze.isDynamic(Qn)){Sr[Tn]=ze.unbox(Qn,Tn);return}else if(ur&&Array.isArray(Qn)){for(var xn=0;xn<Qn.length;++xn)if(ze.isDynamic(Qn[xn])){Sr[Tn]=ze.unbox(Qn,Tn);return}}ar[Tn]=Qn}),{dynamic:Sr,static:ar}}var Dl=zo(Xi.context||{},!0),Sc=zo(Xi.uniforms||{},!0),mf=zo(Xi.attributes||{},!1),Dn=zo(Mo(Xi),!1),Zr={gpuTime:0,cpuTime:0,count:0},Ur=oa.compile(Dn,mf,Sc,Dl,Zr),ta=Ur.draw,wo=Ur.batch,Sn=Ur.scope,sn=[];function er(Dr){for(;sn.length<Dr;)sn.push(null);return sn}function Or(Dr,ur){var ar;if(ir&&q.raise("context lost"),typeof Dr=="function")return Sn.call(this,null,Dr,0);if(typeof ur=="function")if(typeof Dr=="number")for(ar=0;ar<Dr;++ar)Sn.call(this,null,ur,ar);else if(Array.isArray(Dr))for(ar=0;ar<Dr.length;++ar)Sn.call(this,Dr[ar],ur,ar);else return Sn.call(this,Dr,ur,0);else if(typeof Dr=="number"){if(Dr>0)return wo.call(this,er(Dr|0),Dr|0)}else if(Array.isArray(Dr)){if(Dr.length)return wo.call(this,Dr,Dr.length)}else return ta.call(this,Dr)}return E(Or,{stats:Zr,destroy:function(){Ur.destroy()}})}var Ks=Oi.setFBO=Ku({framebuffer:ze.define.call(null,ae,"framebuffer")});function Jl(Xi,Mo){var zo=0;oa.procs.poll();var Dl=Mo.color;Dl&&(Ze.clearColor(+Dl[0]||0,+Dl[1]||0,+Dl[2]||0,+Dl[3]||0),zo|=Xf),"depth"in Mo&&(Ze.clearDepth(+Mo.depth),zo|=jt),"stencil"in Mo&&(Ze.clearStencil(Mo.stencil|0),zo|=yt),q(!!zo,"called regl.clear with no buffer specified"),Ze.clear(zo)}function Ll(Xi){if(q(typeof Xi=="object"&&Xi,"regl.clear() takes an object as input"),"framebuffer"in Xi)if(Xi.framebuffer&&Xi.framebuffer_reglType==="framebufferCube")for(var Mo=0;Mo<6;++Mo)Ks(E({framebuffer:Xi.framebuffer.faces[Mo]},Xi),Jl);else Ks(Xi,Jl);else Jl(null,Xi)}function Yl(Xi){q.type(Xi,"function","regl.frame() callback must be a function"),mi.push(Xi);function Mo(){var zo=pn(mi,Xi);q(zo>=0,"cannot cancel a frame twice");function Dl(){var Sc=pn(mi,Dl);mi[Sc]=mi[mi.length-1],mi.length-=1,mi.length<=0&&Ms()}mi[zo]=Dl}return Do(),{cancel:Mo}}function Rl(){var Xi=Di.viewport,Mo=Di.scissor_box;Xi[0]=Xi[1]=Mo[0]=Mo[1]=0,di.viewportWidth=di.framebufferWidth=di.drawingBufferWidth=Xi[2]=Mo[2]=Ze.drawingBufferWidth,di.viewportHeight=di.framebufferHeight=di.drawingBufferHeight=Xi[3]=Mo[3]=Ze.drawingBufferHeight}function dc(){di.tick+=1,di.time=Ca(),Rl(),oa.procs.poll()}function El(){Ei.refresh(),Rl(),oa.procs.refresh(),Yr&&Yr.update()}function Ca(){return(_n()-ei)/1e3}El();function Ec(Xi,Mo){q.type(Mo,"function","listener callback must be a function");var zo;switch(Xi){case"frame":return Yl(Mo);case"lost":zo=za;break;case"restore":zo=ia;break;case"destroy":zo=Ki;break;default:q.raise("invalid event, must be one of frame,lost,restore,destroy")}return zo.push(Mo),{cancel:function(){for(var Sc=0;Sc<zo.length;++Sc)if(zo[Sc]===Mo){zo[Sc]=zo[zo.length-1],zo.pop();return}}}}var Vs=E(Ku,{clear:Ll,prop:ze.define.bind(null,ae),context:ze.define.bind(null,ke),this:ze.define.bind(null,gn),draw:Ku({}),buffer:function(Mo){return vi.create(Mo,Q,!1,!1)},elements:function(Mo){return ra.create(Mo,!1)},texture:Ei.create2D,cube:Ei.createCube,renderbuffer:xi.create,framebuffer:Oi.create,framebufferCube:Oi.createCube,vao:Vi.createVAO,attributes:In,frame:Yl,on:Ec,limits:Mr,hasExtension:function(Mo){return Mr.extensions.indexOf(Mo.toLowerCase())>=0},read:Sa,destroy:Zo,_gl:Ze,_refresh:El,poll:function(){dc(),Yr&&Yr.update()},now:Ca,stats:wr});return Me.onDone(null,Vs),Vs}return On})},fdMe:function(Se,ft,L){"use strict";L.d(ft,"a",function(){return U});function U(E,T){var e=T.callback;return e&&(E.dataArray=E.dataArray.map(e)),E}},fhzG:function(Se,ft,L){"use strict";var U=L("q1tI"),E=L("lT4e");if(typeof U=="undefined")throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");var T=new U.Component().updater;Se.exports=E(U.Component,U.isValidElement,T)},fo6e:function(Se,ft){var L=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function U(E){return L.test(E)}Se.exports=U},g4R6:function(Se,ft){function L(U,E,T){return U===U&&(T!==void 0&&(U=U<=T?U:T),E!==void 0&&(U=U>=E?U:E)),U}Se.exports=L},gFfm:function(Se,ft){function L(U,E){for(var T=-1,e=U==null?0:U.length;++T<e&&E(U[T],T,U)!==!1;);return U}Se.exports=L},gMG2:function(Se,ft,L){"use strict";L.d(ft,"a",function(){return M});var U={},E={},T=34,e=10,t=13;function l(x){return new Function("d","return {"+x.map(function(m,S){return JSON.stringify(m)+": d["+S+'] || ""'}).join(",")+"}")}function s(x,m){var S=l(x);return function(P,A){return m(S(P),A,x)}}function c(x){var m=Object.create(null),S=[];return x.forEach(function(P){for(var A in P)A in m||S.push(m[A]=A)}),S}function r(x,m){var S=x+"",P=S.length;return P<m?new Array(m-P+1).join(0)+S:S}function h(x){return x<0?"-"+r(-x,6):x>9999?"+"+r(x,6):r(x,4)}function n(x){var m=x.getUTCHours(),S=x.getUTCMinutes(),P=x.getUTCSeconds(),A=x.getUTCMilliseconds();return isNaN(x)?"Invalid Date":h(x.getUTCFullYear(),4)+"-"+r(x.getUTCMonth()+1,2)+"-"+r(x.getUTCDate(),2)+(A?"T"+r(m,2)+":"+r(S,2)+":"+r(P,2)+"."+r(A,3)+"Z":P?"T"+r(m,2)+":"+r(S,2)+":"+r(P,2)+"Z":S||m?"T"+r(m,2)+":"+r(S,2)+"Z":"")}var i=function(x){var m=new RegExp('["'+x+`
\r]`),S=x.charCodeAt(0);function P(k,Y){var K,it,ct=A(k,function(ht,ut){if(K)return K(ht,ut-1);it=ht,K=Y?s(ht,Y):l(ht)});return ct.columns=it||[],ct}function A(k,Y){var K=[],it=k.length,ct=0,ht=0,ut,It=it<=0,Nt=!1;k.charCodeAt(it-1)===e&&--it,k.charCodeAt(it-1)===t&&--it;function Lt(){if(It)return E;if(Nt)return Nt=!1,U;var mt,At=ct,rt;if(k.charCodeAt(At)===T){for(;ct++<it&&k.charCodeAt(ct)!==T||k.charCodeAt(++ct)===T;);return(mt=ct)>=it?It=!0:(rt=k.charCodeAt(ct++))===e?Nt=!0:rt===t&&(Nt=!0,k.charCodeAt(ct)===e&&++ct),k.slice(At+1,mt-1).replace(/""/g,'"')}for(;ct<it;){if((rt=k.charCodeAt(mt=ct++))===e)Nt=!0;else if(rt===t)Nt=!0,k.charCodeAt(ct)===e&&++ct;else if(rt!==S)continue;return k.slice(At,mt)}return It=!0,k.slice(At,it)}for(;(ut=Lt())!==E;){for(var _t=[];ut!==U&&ut!==E;)_t.push(ut),ut=Lt();Y&&(_t=Y(_t,ht++))==null||K.push(_t)}return K}function O(k,Y){return k.map(function(K){return Y.map(function(it){return V(K[it])}).join(x)})}function R(k,Y){return Y==null&&(Y=c(k)),[Y.map(V).join(x)].concat(O(k,Y)).join(`
`)}function W(k,Y){return Y==null&&(Y=c(k)),O(k,Y).join(`
`)}function F(k){return k.map(Z).join(`
`)}function Z(k){return k.map(V).join(x)}function V(k){return k==null?"":k instanceof Date?n(k):m.test(k+="")?'"'+k.replace(/"/g,'""')+'"':k}return{parse:P,parseRows:A,format:R,formatBody:W,formatRows:F,formatRow:Z,formatValue:V}},a=i(","),o=a.parse,u=a.parseRows,f=a.format,v=a.formatBody,b=a.formatRows,y=a.formatRow,g=a.formatValue,_=L("5zYK");function M(x,m){var S=o(x);return Object(_.a)(S,m)}},gQMU:function(Se,ft,L){var U=L("0ZTe"),E=U("toUpperCase");Se.exports=E},gzZq:function(Se,ft,L){"use strict";Object.defineProperty(ft,"__esModule",{value:!0}),ft.BindingToSyntax=void 0;var U=L("MON2"),E=L("FV85"),T=L("D9lx"),e=L("LKzl"),t=function(){function l(s){this._binding=s}return l.prototype.to=function(s){return this._binding.type=E.BindingTypeEnum.Instance,this._binding.implementationType=s,new T.BindingInWhenOnSyntax(this._binding)},l.prototype.toSelf=function(){if(typeof this._binding.serviceIdentifier!="function")throw new Error(""+U.INVALID_TO_SELF_VALUE);var s=this._binding.serviceIdentifier;return this.to(s)},l.prototype.toConstantValue=function(s){return this._binding.type=E.BindingTypeEnum.ConstantValue,this._binding.cache=s,this._binding.dynamicValue=null,this._binding.implementationType=null,new e.BindingWhenOnSyntax(this._binding)},l.prototype.toDynamicValue=function(s){return this._binding.type=E.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=s,this._binding.implementationType=null,new T.BindingInWhenOnSyntax(this._binding)},l.prototype.toConstructor=function(s){return this._binding.type=E.BindingTypeEnum.Constructor,this._binding.implementationType=s,new e.BindingWhenOnSyntax(this._binding)},l.prototype.toFactory=function(s){return this._binding.type=E.BindingTypeEnum.Factory,this._binding.factory=s,new e.BindingWhenOnSyntax(this._binding)},l.prototype.toFunction=function(s){if(typeof s!="function")throw new Error(U.INVALID_FUNCTION_BINDING);var c=this.toConstantValue(s);return this._binding.type=E.BindingTypeEnum.Function,c},l.prototype.toAutoFactory=function(s){return this._binding.type=E.BindingTypeEnum.Factory,this._binding.factory=function(c){var r=function(){return c.container.get(s)};return r},new e.BindingWhenOnSyntax(this._binding)},l.prototype.toProvider=function(s){return this._binding.type=E.BindingTypeEnum.Provider,this._binding.provider=s,new e.BindingWhenOnSyntax(this._binding)},l.prototype.toService=function(s){this.toDynamicValue(function(c){return c.container.get(s)})},l}();ft.BindingToSyntax=t},h1nZ:function(Se,ft,L){"use strict";var U=L("fX6N");L.d(ft,"container",function(){return U.c}),L.d(ft,"createSceneContainer",function(){return U.b}),L.d(ft,"createLayerContainer",function(){return U.a}),L.d(ft,"lazyInject",function(){return U.d});var E=L("+em5"),T=L("bB6j");L.d(ft,"TYPES",function(){return T.a});var e=L("8/Fi"),t=L("PUg6");L.d(ft,"BlendType",function(){return t.a});var l=L("cZlC");L.d(ft,"AttributeType",function(){return l.a}),L.d(ft,"ScaleTypes",function(){return l.b}),L.d(ft,"StyleScaleType",function(){return l.c});var s=L("O1je"),c=L.n(s);L.o(s,"CameraUniform")&&L.d(ft,"CameraUniform",function(){return s.CameraUniform}),L.o(s,"CityBuildingLayer")&&L.d(ft,"CityBuildingLayer",function(){return s.CityBuildingLayer}),L.o(s,"Control")&&L.d(ft,"Control",function(){return s.Control}),L.o(s,"CoordinateSystem")&&L.d(ft,"CoordinateSystem",function(){return s.CoordinateSystem}),L.o(s,"CoordinateUniform")&&L.d(ft,"CoordinateUniform",function(){return s.CoordinateUniform}),L.o(s,"HeatmapLayer")&&L.d(ft,"HeatmapLayer",function(){return s.HeatmapLayer}),L.o(s,"ImageLayer")&&L.d(ft,"ImageLayer",function(){return s.ImageLayer}),L.o(s,"LineLayer")&&L.d(ft,"LineLayer",function(){return s.LineLayer}),L.o(s,"Logo")&&L.d(ft,"Logo",function(){return s.Logo}),L.o(s,"MapServiceEvent")&&L.d(ft,"MapServiceEvent",function(){return s.MapServiceEvent}),L.o(s,"Marker")&&L.d(ft,"Marker",function(){return s.Marker}),L.o(s,"PointLayer")&&L.d(ft,"PointLayer",function(){return s.PointLayer}),L.o(s,"PolygonLayer")&&L.d(ft,"PolygonLayer",function(){return s.PolygonLayer}),L.o(s,"Popup")&&L.d(ft,"Popup",function(){return s.Popup}),L.o(s,"PositionType")&&L.d(ft,"PositionType",function(){return s.PositionType}),L.o(s,"RasterLayer")&&L.d(ft,"RasterLayer",function(){return s.RasterLayer}),L.o(s,"Scale")&&L.d(ft,"Scale",function(){return s.Scale}),L.o(s,"Scene")&&L.d(ft,"Scene",function(){return s.Scene}),L.o(s,"SceneEventList")&&L.d(ft,"SceneEventList",function(){return s.SceneEventList}),L.o(s,"Zoom")&&L.d(ft,"Zoom",function(){return s.Zoom}),L.o(s,"gl")&&L.d(ft,"gl",function(){return s.gl});var r=L("L56e");L.d(ft,"MapServiceEvent",function(){return r.a});var h=L("HthE");L.d(ft,"CoordinateSystem",function(){return h.a}),L.d(ft,"CoordinateUniform",function(){return h.b});var n=L("/33/"),i=L.n(n);L.o(n,"CameraUniform")&&L.d(ft,"CameraUniform",function(){return n.CameraUniform}),L.o(n,"CityBuildingLayer")&&L.d(ft,"CityBuildingLayer",function(){return n.CityBuildingLayer}),L.o(n,"Control")&&L.d(ft,"Control",function(){return n.Control}),L.o(n,"HeatmapLayer")&&L.d(ft,"HeatmapLayer",function(){return n.HeatmapLayer}),L.o(n,"ImageLayer")&&L.d(ft,"ImageLayer",function(){return n.ImageLayer}),L.o(n,"LineLayer")&&L.d(ft,"LineLayer",function(){return n.LineLayer}),L.o(n,"Logo")&&L.d(ft,"Logo",function(){return n.Logo}),L.o(n,"Marker")&&L.d(ft,"Marker",function(){return n.Marker}),L.o(n,"PointLayer")&&L.d(ft,"PointLayer",function(){return n.PointLayer}),L.o(n,"PolygonLayer")&&L.d(ft,"PolygonLayer",function(){return n.PolygonLayer}),L.o(n,"Popup")&&L.d(ft,"Popup",function(){return n.Popup}),L.o(n,"PositionType")&&L.d(ft,"PositionType",function(){return n.PositionType}),L.o(n,"RasterLayer")&&L.d(ft,"RasterLayer",function(){return n.RasterLayer}),L.o(n,"Scale")&&L.d(ft,"Scale",function(){return n.Scale}),L.o(n,"Scene")&&L.d(ft,"Scene",function(){return n.Scene}),L.o(n,"SceneEventList")&&L.d(ft,"SceneEventList",function(){return n.SceneEventList}),L.o(n,"Zoom")&&L.d(ft,"Zoom",function(){return n.Zoom}),L.o(n,"gl")&&L.d(ft,"gl",function(){return n.gl});var a=L("EfZ0");L.d(ft,"CameraUniform",function(){return a.a});var o=L("riiI"),u=L.n(o);L.o(o,"CityBuildingLayer")&&L.d(ft,"CityBuildingLayer",function(){return o.CityBuildingLayer}),L.o(o,"Control")&&L.d(ft,"Control",function(){return o.Control}),L.o(o,"HeatmapLayer")&&L.d(ft,"HeatmapLayer",function(){return o.HeatmapLayer}),L.o(o,"ImageLayer")&&L.d(ft,"ImageLayer",function(){return o.ImageLayer}),L.o(o,"LineLayer")&&L.d(ft,"LineLayer",function(){return o.LineLayer}),L.o(o,"Logo")&&L.d(ft,"Logo",function(){return o.Logo}),L.o(o,"Marker")&&L.d(ft,"Marker",function(){return o.Marker}),L.o(o,"PointLayer")&&L.d(ft,"PointLayer",function(){return o.PointLayer}),L.o(o,"PolygonLayer")&&L.d(ft,"PolygonLayer",function(){return o.PolygonLayer}),L.o(o,"Popup")&&L.d(ft,"Popup",function(){return o.Popup}),L.o(o,"PositionType")&&L.d(ft,"PositionType",function(){return o.PositionType}),L.o(o,"RasterLayer")&&L.d(ft,"RasterLayer",function(){return o.RasterLayer}),L.o(o,"Scale")&&L.d(ft,"Scale",function(){return o.Scale}),L.o(o,"Scene")&&L.d(ft,"Scene",function(){return o.Scene}),L.o(o,"SceneEventList")&&L.d(ft,"SceneEventList",function(){return o.SceneEventList}),L.o(o,"Zoom")&&L.d(ft,"Zoom",function(){return o.Zoom}),L.o(o,"gl")&&L.d(ft,"gl",function(){return o.gl});var f=L("eg+a");L.d(ft,"SceneEventList",function(){return f.a});var v=L("bYl4"),b=L.n(v);L.o(v,"CityBuildingLayer")&&L.d(ft,"CityBuildingLayer",function(){return v.CityBuildingLayer}),L.o(v,"Control")&&L.d(ft,"Control",function(){return v.Control}),L.o(v,"HeatmapLayer")&&L.d(ft,"HeatmapLayer",function(){return v.HeatmapLayer}),L.o(v,"ImageLayer")&&L.d(ft,"ImageLayer",function(){return v.ImageLayer}),L.o(v,"LineLayer")&&L.d(ft,"LineLayer",function(){return v.LineLayer}),L.o(v,"Logo")&&L.d(ft,"Logo",function(){return v.Logo}),L.o(v,"Marker")&&L.d(ft,"Marker",function(){return v.Marker}),L.o(v,"PointLayer")&&L.d(ft,"PointLayer",function(){return v.PointLayer}),L.o(v,"PolygonLayer")&&L.d(ft,"PolygonLayer",function(){return v.PolygonLayer}),L.o(v,"Popup")&&L.d(ft,"Popup",function(){return v.Popup}),L.o(v,"PositionType")&&L.d(ft,"PositionType",function(){return v.PositionType}),L.o(v,"RasterLayer")&&L.d(ft,"RasterLayer",function(){return v.RasterLayer}),L.o(v,"Scale")&&L.d(ft,"Scale",function(){return v.Scale}),L.o(v,"Scene")&&L.d(ft,"Scene",function(){return v.Scene}),L.o(v,"Zoom")&&L.d(ft,"Zoom",function(){return v.Zoom}),L.o(v,"gl")&&L.d(ft,"gl",function(){return v.gl});var y=L("FI6e"),g=L.n(y);L.o(y,"CityBuildingLayer")&&L.d(ft,"CityBuildingLayer",function(){return y.CityBuildingLayer}),L.o(y,"Control")&&L.d(ft,"Control",function(){return y.Control}),L.o(y,"HeatmapLayer")&&L.d(ft,"HeatmapLayer",function(){return y.HeatmapLayer}),L.o(y,"ImageLayer")&&L.d(ft,"ImageLayer",function(){return y.ImageLayer}),L.o(y,"LineLayer")&&L.d(ft,"LineLayer",function(){return y.LineLayer}),L.o(y,"Logo")&&L.d(ft,"Logo",function(){return y.Logo}),L.o(y,"Marker")&&L.d(ft,"Marker",function(){return y.Marker}),L.o(y,"PointLayer")&&L.d(ft,"PointLayer",function(){return y.PointLayer}),L.o(y,"PolygonLayer")&&L.d(ft,"PolygonLayer",function(){return y.PolygonLayer}),L.o(y,"Popup")&&L.d(ft,"Popup",function(){return y.Popup}),L.o(y,"PositionType")&&L.d(ft,"PositionType",function(){return y.PositionType}),L.o(y,"RasterLayer")&&L.d(ft,"RasterLayer",function(){return y.RasterLayer}),L.o(y,"Scale")&&L.d(ft,"Scale",function(){return y.Scale}),L.o(y,"Scene")&&L.d(ft,"Scene",function(){return y.Scene}),L.o(y,"Zoom")&&L.d(ft,"Zoom",function(){return y.Zoom}),L.o(y,"gl")&&L.d(ft,"gl",function(){return y.gl});var _=L("D+ow"),M=L.n(_);L.o(_,"CityBuildingLayer")&&L.d(ft,"CityBuildingLayer",function(){return _.CityBuildingLayer}),L.o(_,"Control")&&L.d(ft,"Control",function(){return _.Control}),L.o(_,"HeatmapLayer")&&L.d(ft,"HeatmapLayer",function(){return _.HeatmapLayer}),L.o(_,"ImageLayer")&&L.d(ft,"ImageLayer",function(){return _.ImageLayer}),L.o(_,"LineLayer")&&L.d(ft,"LineLayer",function(){return _.LineLayer}),L.o(_,"Logo")&&L.d(ft,"Logo",function(){return _.Logo}),L.o(_,"Marker")&&L.d(ft,"Marker",function(){return _.Marker}),L.o(_,"PointLayer")&&L.d(ft,"PointLayer",function(){return _.PointLayer}),L.o(_,"PolygonLayer")&&L.d(ft,"PolygonLayer",function(){return _.PolygonLayer}),L.o(_,"Popup")&&L.d(ft,"Popup",function(){return _.Popup}),L.o(_,"PositionType")&&L.d(ft,"PositionType",function(){return _.PositionType}),L.o(_,"RasterLayer")&&L.d(ft,"RasterLayer",function(){return _.RasterLayer}),L.o(_,"Scale")&&L.d(ft,"Scale",function(){return _.Scale}),L.o(_,"Scene")&&L.d(ft,"Scene",function(){return _.Scene}),L.o(_,"Zoom")&&L.d(ft,"Zoom",function(){return _.Zoom}),L.o(_,"gl")&&L.d(ft,"gl",function(){return _.gl});var x=L("AFH1");L.d(ft,"PositionType",function(){return x.a});var m=L("8uyu"),S=L.n(m);L.o(m,"CityBuildingLayer")&&L.d(ft,"CityBuildingLayer",function(){return m.CityBuildingLayer}),L.o(m,"Control")&&L.d(ft,"Control",function(){return m.Control}),L.o(m,"HeatmapLayer")&&L.d(ft,"HeatmapLayer",function(){return m.HeatmapLayer}),L.o(m,"ImageLayer")&&L.d(ft,"ImageLayer",function(){return m.ImageLayer}),L.o(m,"LineLayer")&&L.d(ft,"LineLayer",function(){return m.LineLayer}),L.o(m,"Logo")&&L.d(ft,"Logo",function(){return m.Logo}),L.o(m,"Marker")&&L.d(ft,"Marker",function(){return m.Marker}),L.o(m,"PointLayer")&&L.d(ft,"PointLayer",function(){return m.PointLayer}),L.o(m,"PolygonLayer")&&L.d(ft,"PolygonLayer",function(){return m.PolygonLayer}),L.o(m,"Popup")&&L.d(ft,"Popup",function(){return m.Popup}),L.o(m,"RasterLayer")&&L.d(ft,"RasterLayer",function(){return m.RasterLayer}),L.o(m,"Scale")&&L.d(ft,"Scale",function(){return m.Scale}),L.o(m,"Scene")&&L.d(ft,"Scene",function(){return m.Scene}),L.o(m,"Zoom")&&L.d(ft,"Zoom",function(){return m.Zoom}),L.o(m,"gl")&&L.d(ft,"gl",function(){return m.gl});var P=L("J7lC"),A=L.n(P);L.o(P,"CityBuildingLayer")&&L.d(ft,"CityBuildingLayer",function(){return P.CityBuildingLayer}),L.o(P,"Control")&&L.d(ft,"Control",function(){return P.Control}),L.o(P,"HeatmapLayer")&&L.d(ft,"HeatmapLayer",function(){return P.HeatmapLayer}),L.o(P,"ImageLayer")&&L.d(ft,"ImageLayer",function(){return P.ImageLayer}),L.o(P,"LineLayer")&&L.d(ft,"LineLayer",function(){return P.LineLayer}),L.o(P,"Logo")&&L.d(ft,"Logo",function(){return P.Logo}),L.o(P,"Marker")&&L.d(ft,"Marker",function(){return P.Marker}),L.o(P,"PointLayer")&&L.d(ft,"PointLayer",function(){return P.PointLayer}),L.o(P,"PolygonLayer")&&L.d(ft,"PolygonLayer",function(){return P.PolygonLayer}),L.o(P,"Popup")&&L.d(ft,"Popup",function(){return P.Popup}),L.o(P,"RasterLayer")&&L.d(ft,"RasterLayer",function(){return P.RasterLayer}),L.o(P,"Scale")&&L.d(ft,"Scale",function(){return P.Scale}),L.o(P,"Scene")&&L.d(ft,"Scene",function(){return P.Scene}),L.o(P,"Zoom")&&L.d(ft,"Zoom",function(){return P.Zoom}),L.o(P,"gl")&&L.d(ft,"gl",function(){return P.gl});var O=L("QGbF"),R=L.n(O);L.o(O,"CityBuildingLayer")&&L.d(ft,"CityBuildingLayer",function(){return O.CityBuildingLayer}),L.o(O,"Control")&&L.d(ft,"Control",function(){return O.Control}),L.o(O,"HeatmapLayer")&&L.d(ft,"HeatmapLayer",function(){return O.HeatmapLayer}),L.o(O,"ImageLayer")&&L.d(ft,"ImageLayer",function(){return O.ImageLayer}),L.o(O,"LineLayer")&&L.d(ft,"LineLayer",function(){return O.LineLayer}),L.o(O,"Logo")&&L.d(ft,"Logo",function(){return O.Logo}),L.o(O,"Marker")&&L.d(ft,"Marker",function(){return O.Marker}),L.o(O,"PointLayer")&&L.d(ft,"PointLayer",function(){return O.PointLayer}),L.o(O,"PolygonLayer")&&L.d(ft,"PolygonLayer",function(){return O.PolygonLayer}),L.o(O,"Popup")&&L.d(ft,"Popup",function(){return O.Popup}),L.o(O,"RasterLayer")&&L.d(ft,"RasterLayer",function(){return O.RasterLayer}),L.o(O,"Scale")&&L.d(ft,"Scale",function(){return O.Scale}),L.o(O,"Scene")&&L.d(ft,"Scene",function(){return O.Scene}),L.o(O,"Zoom")&&L.d(ft,"Zoom",function(){return O.Zoom}),L.o(O,"gl")&&L.d(ft,"gl",function(){return O.gl});var W=L("V1cb"),F=L("4kj+"),Z=L.n(F);L.o(F,"CityBuildingLayer")&&L.d(ft,"CityBuildingLayer",function(){return F.CityBuildingLayer}),L.o(F,"Control")&&L.d(ft,"Control",function(){return F.Control}),L.o(F,"HeatmapLayer")&&L.d(ft,"HeatmapLayer",function(){return F.HeatmapLayer}),L.o(F,"ImageLayer")&&L.d(ft,"ImageLayer",function(){return F.ImageLayer}),L.o(F,"LineLayer")&&L.d(ft,"LineLayer",function(){return F.LineLayer}),L.o(F,"Logo")&&L.d(ft,"Logo",function(){return F.Logo}),L.o(F,"Marker")&&L.d(ft,"Marker",function(){return F.Marker}),L.o(F,"PointLayer")&&L.d(ft,"PointLayer",function(){return F.PointLayer}),L.o(F,"PolygonLayer")&&L.d(ft,"PolygonLayer",function(){return F.PolygonLayer}),L.o(F,"Popup")&&L.d(ft,"Popup",function(){return F.Popup}),L.o(F,"RasterLayer")&&L.d(ft,"RasterLayer",function(){return F.RasterLayer}),L.o(F,"Scale")&&L.d(ft,"Scale",function(){return F.Scale}),L.o(F,"Scene")&&L.d(ft,"Scene",function(){return F.Scene}),L.o(F,"Zoom")&&L.d(ft,"Zoom",function(){return F.Zoom}),L.o(F,"gl")&&L.d(ft,"gl",function(){return F.gl});var V=L("bzyH"),k=L.n(V);L.o(V,"CityBuildingLayer")&&L.d(ft,"CityBuildingLayer",function(){return V.CityBuildingLayer}),L.o(V,"Control")&&L.d(ft,"Control",function(){return V.Control}),L.o(V,"HeatmapLayer")&&L.d(ft,"HeatmapLayer",function(){return V.HeatmapLayer}),L.o(V,"ImageLayer")&&L.d(ft,"ImageLayer",function(){return V.ImageLayer}),L.o(V,"LineLayer")&&L.d(ft,"LineLayer",function(){return V.LineLayer}),L.o(V,"Logo")&&L.d(ft,"Logo",function(){return V.Logo}),L.o(V,"Marker")&&L.d(ft,"Marker",function(){return V.Marker}),L.o(V,"PointLayer")&&L.d(ft,"PointLayer",function(){return V.PointLayer}),L.o(V,"PolygonLayer")&&L.d(ft,"PolygonLayer",function(){return V.PolygonLayer}),L.o(V,"Popup")&&L.d(ft,"Popup",function(){return V.Popup}),L.o(V,"RasterLayer")&&L.d(ft,"RasterLayer",function(){return V.RasterLayer}),L.o(V,"Scale")&&L.d(ft,"Scale",function(){return V.Scale}),L.o(V,"Scene")&&L.d(ft,"Scene",function(){return V.Scene}),L.o(V,"Zoom")&&L.d(ft,"Zoom",function(){return V.Zoom}),L.o(V,"gl")&&L.d(ft,"gl",function(){return V.gl});var Y=L("0eqD"),K=L.n(Y);L.o(Y,"CityBuildingLayer")&&L.d(ft,"CityBuildingLayer",function(){return Y.CityBuildingLayer}),L.o(Y,"Control")&&L.d(ft,"Control",function(){return Y.Control}),L.o(Y,"HeatmapLayer")&&L.d(ft,"HeatmapLayer",function(){return Y.HeatmapLayer}),L.o(Y,"ImageLayer")&&L.d(ft,"ImageLayer",function(){return Y.ImageLayer}),L.o(Y,"LineLayer")&&L.d(ft,"LineLayer",function(){return Y.LineLayer}),L.o(Y,"Logo")&&L.d(ft,"Logo",function(){return Y.Logo}),L.o(Y,"Marker")&&L.d(ft,"Marker",function(){return Y.Marker}),L.o(Y,"PointLayer")&&L.d(ft,"PointLayer",function(){return Y.PointLayer}),L.o(Y,"PolygonLayer")&&L.d(ft,"PolygonLayer",function(){return Y.PolygonLayer}),L.o(Y,"Popup")&&L.d(ft,"Popup",function(){return Y.Popup}),L.o(Y,"RasterLayer")&&L.d(ft,"RasterLayer",function(){return Y.RasterLayer}),L.o(Y,"Scale")&&L.d(ft,"Scale",function(){return Y.Scale}),L.o(Y,"Scene")&&L.d(ft,"Scene",function(){return Y.Scene}),L.o(Y,"Zoom")&&L.d(ft,"Zoom",function(){return Y.Zoom}),L.o(Y,"gl")&&L.d(ft,"gl",function(){return Y.gl});var it=L("/Uc5"),ct=L.n(it);L.o(it,"CityBuildingLayer")&&L.d(ft,"CityBuildingLayer",function(){return it.CityBuildingLayer}),L.o(it,"Control")&&L.d(ft,"Control",function(){return it.Control}),L.o(it,"HeatmapLayer")&&L.d(ft,"HeatmapLayer",function(){return it.HeatmapLayer}),L.o(it,"ImageLayer")&&L.d(ft,"ImageLayer",function(){return it.ImageLayer}),L.o(it,"LineLayer")&&L.d(ft,"LineLayer",function(){return it.LineLayer}),L.o(it,"Logo")&&L.d(ft,"Logo",function(){return it.Logo}),L.o(it,"Marker")&&L.d(ft,"Marker",function(){return it.Marker}),L.o(it,"PointLayer")&&L.d(ft,"PointLayer",function(){return it.PointLayer}),L.o(it,"PolygonLayer")&&L.d(ft,"PolygonLayer",function(){return it.PolygonLayer}),L.o(it,"Popup")&&L.d(ft,"Popup",function(){return it.Popup}),L.o(it,"RasterLayer")&&L.d(ft,"RasterLayer",function(){return it.RasterLayer}),L.o(it,"Scale")&&L.d(ft,"Scale",function(){return it.Scale}),L.o(it,"Scene")&&L.d(ft,"Scene",function(){return it.Scene}),L.o(it,"Zoom")&&L.d(ft,"Zoom",function(){return it.Zoom}),L.o(it,"gl")&&L.d(ft,"gl",function(){return it.gl});var ht=L("RMtq"),ut=L.n(ht);L.o(ht,"CityBuildingLayer")&&L.d(ft,"CityBuildingLayer",function(){return ht.CityBuildingLayer}),L.o(ht,"Control")&&L.d(ft,"Control",function(){return ht.Control}),L.o(ht,"HeatmapLayer")&&L.d(ft,"HeatmapLayer",function(){return ht.HeatmapLayer}),L.o(ht,"ImageLayer")&&L.d(ft,"ImageLayer",function(){return ht.ImageLayer}),L.o(ht,"LineLayer")&&L.d(ft,"LineLayer",function(){return ht.LineLayer}),L.o(ht,"Logo")&&L.d(ft,"Logo",function(){return ht.Logo}),L.o(ht,"Marker")&&L.d(ft,"Marker",function(){return ht.Marker}),L.o(ht,"PointLayer")&&L.d(ft,"PointLayer",function(){return ht.PointLayer}),L.o(ht,"PolygonLayer")&&L.d(ft,"PolygonLayer",function(){return ht.PolygonLayer}),L.o(ht,"Popup")&&L.d(ft,"Popup",function(){return ht.Popup}),L.o(ht,"RasterLayer")&&L.d(ft,"RasterLayer",function(){return ht.RasterLayer}),L.o(ht,"Scale")&&L.d(ft,"Scale",function(){return ht.Scale}),L.o(ht,"Scene")&&L.d(ft,"Scene",function(){return ht.Scene}),L.o(ht,"Zoom")&&L.d(ft,"Zoom",function(){return ht.Zoom}),L.o(ht,"gl")&&L.d(ft,"gl",function(){return ht.gl});var It=L("1jvM"),Nt=L.n(It);L.o(It,"CityBuildingLayer")&&L.d(ft,"CityBuildingLayer",function(){return It.CityBuildingLayer}),L.o(It,"Control")&&L.d(ft,"Control",function(){return It.Control}),L.o(It,"HeatmapLayer")&&L.d(ft,"HeatmapLayer",function(){return It.HeatmapLayer}),L.o(It,"ImageLayer")&&L.d(ft,"ImageLayer",function(){return It.ImageLayer}),L.o(It,"LineLayer")&&L.d(ft,"LineLayer",function(){return It.LineLayer}),L.o(It,"Logo")&&L.d(ft,"Logo",function(){return It.Logo}),L.o(It,"Marker")&&L.d(ft,"Marker",function(){return It.Marker}),L.o(It,"PointLayer")&&L.d(ft,"PointLayer",function(){return It.PointLayer}),L.o(It,"PolygonLayer")&&L.d(ft,"PolygonLayer",function(){return It.PolygonLayer}),L.o(It,"Popup")&&L.d(ft,"Popup",function(){return It.Popup}),L.o(It,"RasterLayer")&&L.d(ft,"RasterLayer",function(){return It.RasterLayer}),L.o(It,"Scale")&&L.d(ft,"Scale",function(){return It.Scale}),L.o(It,"Scene")&&L.d(ft,"Scene",function(){return It.Scene}),L.o(It,"Zoom")&&L.d(ft,"Zoom",function(){return It.Zoom}),L.o(It,"gl")&&L.d(ft,"gl",function(){return It.gl});var Lt=L("bPkA"),_t=L("PSsN"),mt=L.n(_t);L.o(_t,"CityBuildingLayer")&&L.d(ft,"CityBuildingLayer",function(){return _t.CityBuildingLayer}),L.o(_t,"Control")&&L.d(ft,"Control",function(){return _t.Control}),L.o(_t,"HeatmapLayer")&&L.d(ft,"HeatmapLayer",function(){return _t.HeatmapLayer}),L.o(_t,"ImageLayer")&&L.d(ft,"ImageLayer",function(){return _t.ImageLayer}),L.o(_t,"LineLayer")&&L.d(ft,"LineLayer",function(){return _t.LineLayer}),L.o(_t,"Logo")&&L.d(ft,"Logo",function(){return _t.Logo}),L.o(_t,"Marker")&&L.d(ft,"Marker",function(){return _t.Marker}),L.o(_t,"PointLayer")&&L.d(ft,"PointLayer",function(){return _t.PointLayer}),L.o(_t,"PolygonLayer")&&L.d(ft,"PolygonLayer",function(){return _t.PolygonLayer}),L.o(_t,"Popup")&&L.d(ft,"Popup",function(){return _t.Popup}),L.o(_t,"RasterLayer")&&L.d(ft,"RasterLayer",function(){return _t.RasterLayer}),L.o(_t,"Scale")&&L.d(ft,"Scale",function(){return _t.Scale}),L.o(_t,"Scene")&&L.d(ft,"Scene",function(){return _t.Scene}),L.o(_t,"Zoom")&&L.d(ft,"Zoom",function(){return _t.Zoom}),L.o(_t,"gl")&&L.d(ft,"gl",function(){return _t.gl});var At=L("6NqC"),rt=L.n(At);L.o(At,"CityBuildingLayer")&&L.d(ft,"CityBuildingLayer",function(){return At.CityBuildingLayer}),L.o(At,"Control")&&L.d(ft,"Control",function(){return At.Control}),L.o(At,"HeatmapLayer")&&L.d(ft,"HeatmapLayer",function(){return At.HeatmapLayer}),L.o(At,"ImageLayer")&&L.d(ft,"ImageLayer",function(){return At.ImageLayer}),L.o(At,"LineLayer")&&L.d(ft,"LineLayer",function(){return At.LineLayer}),L.o(At,"Logo")&&L.d(ft,"Logo",function(){return At.Logo}),L.o(At,"Marker")&&L.d(ft,"Marker",function(){return At.Marker}),L.o(At,"PointLayer")&&L.d(ft,"PointLayer",function(){return At.PointLayer}),L.o(At,"PolygonLayer")&&L.d(ft,"PolygonLayer",function(){return At.PolygonLayer}),L.o(At,"Popup")&&L.d(ft,"Popup",function(){return At.Popup}),L.o(At,"RasterLayer")&&L.d(ft,"RasterLayer",function(){return At.RasterLayer}),L.o(At,"Scale")&&L.d(ft,"Scale",function(){return At.Scale}),L.o(At,"Scene")&&L.d(ft,"Scene",function(){return At.Scene}),L.o(At,"Zoom")&&L.d(ft,"Zoom",function(){return At.Zoom}),L.o(At,"gl")&&L.d(ft,"gl",function(){return At.gl});var Mt=L("bTtR"),z=L.n(Mt);L.o(Mt,"CityBuildingLayer")&&L.d(ft,"CityBuildingLayer",function(){return Mt.CityBuildingLayer}),L.o(Mt,"Control")&&L.d(ft,"Control",function(){return Mt.Control}),L.o(Mt,"HeatmapLayer")&&L.d(ft,"HeatmapLayer",function(){return Mt.HeatmapLayer}),L.o(Mt,"ImageLayer")&&L.d(ft,"ImageLayer",function(){return Mt.ImageLayer}),L.o(Mt,"LineLayer")&&L.d(ft,"LineLayer",function(){return Mt.LineLayer}),L.o(Mt,"Logo")&&L.d(ft,"Logo",function(){return Mt.Logo}),L.o(Mt,"Marker")&&L.d(ft,"Marker",function(){return Mt.Marker}),L.o(Mt,"PointLayer")&&L.d(ft,"PointLayer",function(){return Mt.PointLayer}),L.o(Mt,"PolygonLayer")&&L.d(ft,"PolygonLayer",function(){return Mt.PolygonLayer}),L.o(Mt,"Popup")&&L.d(ft,"Popup",function(){return Mt.Popup}),L.o(Mt,"RasterLayer")&&L.d(ft,"RasterLayer",function(){return Mt.RasterLayer}),L.o(Mt,"Scale")&&L.d(ft,"Scale",function(){return Mt.Scale}),L.o(Mt,"Scene")&&L.d(ft,"Scene",function(){return Mt.Scene}),L.o(Mt,"Zoom")&&L.d(ft,"Zoom",function(){return Mt.Zoom}),L.o(Mt,"gl")&&L.d(ft,"gl",function(){return Mt.gl});var $=L("o+pz");L.d(ft,"gl",function(){return $.a})},h7MG:function(Se,ft,L){"use strict";Object.defineProperty(ft,"__esModule",{value:!0}),ft.getBindingDictionary=ft.createMockRequest=ft.plan=void 0;var U=L("doU7"),E=L("MON2"),T=L("FV85"),e=L("xfSm"),t=L("qK8v"),l=L("ujMp"),s=L("oy+k"),c=L("GXnB"),r=L("yMAV"),h=L("fbrv"),n=L("xiII"),i=L("dX1H");function a(_){return _._bindingDictionary}ft.getBindingDictionary=a;function o(_,M,x,m,S,P){var A=_?e.MULTI_INJECT_TAG:e.INJECT_TAG,O=new c.Metadata(A,x),R=new i.Target(M,m,x,O);if(S!==void 0){var W=new c.Metadata(S,P);R.metadata.push(W)}return R}function u(_,M,x,m,S){var P=b(x.container,S.serviceIdentifier),A=[];return P.length===U.BindingCount.NoBindingsAvailable&&x.container.options.autoBindInjectable&&typeof S.serviceIdentifier=="function"&&_.getConstructorMetadata(S.serviceIdentifier).compilerGeneratedMetadata&&(x.container.bind(S.serviceIdentifier).toSelf(),P=b(x.container,S.serviceIdentifier)),M?A=P:A=P.filter(function(O){var R=new n.Request(O.serviceIdentifier,x,m,O,S);return O.constraint(R)}),f(S.serviceIdentifier,A,S,x.container),A}function f(_,M,x,m){switch(M.length){case U.BindingCount.NoBindingsAvailable:if(x.isOptional())return M;var S=l.getServiceIdentifierAsString(_),P=E.NOT_REGISTERED;throw P+=l.listMetadataForTarget(S,x),P+=l.listRegisteredBindingsForServiceIdentifier(m,S,b),new Error(P);case U.BindingCount.OnlyOneBindingAvailable:if(!x.isArray())return M;case U.BindingCount.MultipleBindingsAvailable:default:if(x.isArray())return M;var S=l.getServiceIdentifierAsString(_),P=E.AMBIGUOUS_MATCH+" "+S;throw P+=l.listRegisteredBindingsForServiceIdentifier(m,S,b),new Error(P)}}function v(_,M,x,m,S,P){var A,O;if(S===null){A=u(_,M,m,null,P),O=new n.Request(x,m,null,A,P);var R=new r.Plan(m,O);m.addPlan(R)}else A=u(_,M,m,S,P),O=S.addChildRequest(P.serviceIdentifier,A,P);A.forEach(function(W){var F=null;if(P.isArray())F=O.addChildRequest(W.serviceIdentifier,W,P);else{if(W.cache)return;F=O}if(W.type===T.BindingTypeEnum.Instance&&W.implementationType!==null){var Z=h.getDependencies(_,W.implementationType);if(!m.container.options.skipBaseClassChecks){var V=h.getBaseClassDependencyCount(_,W.implementationType);if(Z.length<V){var k=E.ARGUMENTS_LENGTH_MISMATCH(h.getFunctionName(W.implementationType));throw new Error(k)}}Z.forEach(function(Y){v(_,!1,Y.serviceIdentifier,m,F,Y)})}})}function b(_,M){var x=[],m=a(_);return m.hasKey(M)?x=m.get(M):_.parent!==null&&(x=b(_.parent,M)),x}function y(_,M,x,m,S,P,A,O){O===void 0&&(O=!1);var R=new s.Context(M),W=o(x,m,S,"",P,A);try{return v(_,O,S,R,null,W),R}catch(F){throw t.isStackOverflowExeption(F)&&R.plan&&l.circularDependencyToException(R.plan.rootRequest),F}}ft.plan=y;function g(_,M,x,m){var S=new i.Target(T.TargetTypeEnum.Variable,"",M,new c.Metadata(x,m)),P=new s.Context(_),A=new n.Request(M,P,null,[],S);return A}ft.createMockRequest=g},heNW:function(Se,ft){function L(U,E,T){switch(T.length){case 0:return U.call(E);case 1:return U.call(E,T[0]);case 2:return U.call(E,T[0],T[1]);case 3:return U.call(E,T[0],T[1],T[2])}return U.apply(E,T)}Se.exports=L},hi0z:function(Se,ft,L){"use strict";(function(U,E){Se.exports=E()})(this,function(){function U(h){var n=[];return h.AMapUI&&n.push(E(h.AMapUI)),h.Loca&&n.push(T(h.Loca)),Promise.all(n)}function E(h){return new Promise(function(n,i){var a=[];if(h.plugins)for(var o=0;o<h.plugins.length;o+=1)t.AMapUI.plugins.indexOf(h.plugins[o])==-1&&a.push(h.plugins[o]);if(l.AMapUI===e.failed)i("\u524D\u6B21\u8BF7\u6C42 AMapUI \u5931\u8D25");else if(l.AMapUI===e.notload){l.AMapUI=e.loading,t.AMapUI.version=h.version||t.AMapUI.version,o=t.AMapUI.version;var u=document.body||document.head,f=document.createElement("script");f.type="text/javascript",f.src="https://webapi.amap.com/ui/"+o+"/main.js",f.onerror=function(v){l.AMapUI=e.failed,i("\u8BF7\u6C42 AMapUI \u5931\u8D25")},f.onload=function(){if(l.AMapUI=e.loaded,a.length)window.AMapUI.loadUI(a,function(){for(var v=0,b=a.length;v<b;v++){var y=a[v].split("/").slice(-1)[0];window.AMapUI[y]=arguments[v]}for(n();s.AMapUI.length;)s.AMapUI.splice(0,1)[0]()});else for(n();s.AMapUI.length;)s.AMapUI.splice(0,1)[0]()},u.appendChild(f)}else l.AMapUI===e.loaded?h.version&&h.version!==t.AMapUI.version?i("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C AMapUI \u6DF7\u7528"):a.length?window.AMapUI.loadUI(a,function(){for(var v=0,b=a.length;v<b;v++){var y=a[v].split("/").slice(-1)[0];window.AMapUI[y]=arguments[v]}n()}):n():h.version&&h.version!==t.AMapUI.version?i("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C AMapUI \u6DF7\u7528"):s.AMapUI.push(function(v){v?i(v):a.length?window.AMapUI.loadUI(a,function(){for(var b=0,y=a.length;b<y;b++){var g=a[b].split("/").slice(-1)[0];window.AMapUI[g]=arguments[b]}n()}):n()})})}function T(h){return new Promise(function(n,i){if(t.AMap.version.startsWith("2.0"))i("Loca \u6682\u4E0D\u9002\u914D JSAPI 2.0,\u8BF7\u4F7F\u7528 1.4.15");else if(l.Loca===e.failed)i("\u524D\u6B21\u8BF7\u6C42 Loca \u5931\u8D25");else if(l.Loca===e.notload){l.Loca=e.loading,t.Loca.version=h.version||t.Loca.version;var a=t.Loca.version,o=t.key,u=document.body||document.head,f=document.createElement("script");f.type="text/javascript",f.src="https://webapi.amap.com/loca?v="+a+"&key="+o,f.onerror=function(v){l.Loca=e.failed,i("\u8BF7\u6C42 AMapUI \u5931\u8D25")},f.onload=function(){for(l.Loca=e.loaded,n();s.Loca.length;)s.Loca.splice(0,1)[0]()},u.appendChild(f)}else l.Loca===e.loaded?h.version&&h.version!==t.Loca.version?i("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C Loca \u6DF7\u7528"):n():h.version&&h.version!==t.Loca.version?i("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C Loca \u6DF7\u7528"):s.Loca.push(function(v){v?i(v):i()})})}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var e;(function(h){h.notload="notload",h.loading="loading",h.loaded="loaded",h.failed="failed"})(e||(e={}));var t={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},l={AMap:e.notload,AMapUI:e.notload,Loca:e.notload},s={AMap:[],AMapUI:[],Loca:[]},c=[],r=function(n){typeof n=="function"&&(l.AMap===e.loaded?n(window.AMap):c.push(n))};return{load:function(n){return new Promise(function(i,a){if(l.AMap==e.failed)a("");else if(l.AMap==e.notload){var o=n.key,u=n.version,f=n.plugins;o?(window.AMap&&location.host!=="lbs.amap.com"&&a("\u7981\u6B62\u591A\u79CDAPI\u52A0\u8F7D\u65B9\u5F0F\u6DF7\u7528"),t.key=o,t.AMap.version=u||t.AMap.version,t.AMap.plugins=f||t.AMap.plugins,l.AMap=e.loading,u=document.body||document.head,window.___onAPILoaded=function(b){if(delete window.___onAPILoaded,b)l.AMap=e.failed,a(b);else for(l.AMap=e.loaded,U(n).then(function(){i(window.AMap)}).catch(a);c.length;)c.splice(0,1)[0]()},f=document.createElement("script"),f.type="text/javascript",f.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+t.AMap.version+"&key="+o+"&plugin="+t.AMap.plugins.join(","),f.onerror=function(b){l.AMap=e.failed,a(b)},u.appendChild(f)):a("\u8BF7\u586B\u5199key")}else if(l.AMap==e.loaded)if(n.key&&n.key!==t.key)a("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");else if(n.version&&n.version!==t.AMap.version)a("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");else{if(o=[],n.plugins)for(u=0;u<n.plugins.length;u+=1)t.AMap.plugins.indexOf(n.plugins[u])==-1&&o.push(n.plugins[u]);o.length?window.AMap.plugin(o,function(){U(n).then(function(){i(window.AMap)}).catch(a)}):U(n).then(function(){i(window.AMap)}).catch(a)}else if(n.key&&n.key!==t.key)a("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");else if(n.version&&n.version!==t.AMap.version)a("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");else{var v=[];if(n.plugins)for(u=0;u<n.plugins.length;u+=1)t.AMap.plugins.indexOf(n.plugins[u])==-1&&v.push(n.plugins[u]);r(function(){v.length?window.AMap.plugin(v,function(){U(n).then(function(){i(window.AMap)}).catch(a)}):U(n).then(function(){i(window.AMap)}).catch(a)})}})},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,t={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},l={AMap:e.notload,AMapUI:e.notload,Loca:e.notload},s={AMap:[],AMapUI:[],Loca:[]}}}})},hypo:function(Se,ft,L){var U=L("O0oS");function E(T,e,t){e=="__proto__"&&U?U(T,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):T[e]=t}Se.exports=E},iWIM:function(Se,ft,L){var U=L("n3AX");function E(T,e,t){return typeof Reflect!="undefined"&&Reflect.get?(Se.exports=E=Reflect.get,Se.exports.default=Se.exports,Se.exports.__esModule=!0):(Se.exports=E=function(s,c,r){var h=U(s,c);if(!!h){var n=Object.getOwnPropertyDescriptor(h,c);return n.get?n.get.call(r):n.value}},Se.exports.default=Se.exports,Se.exports.__esModule=!0),E(T,e,t||T)}Se.exports=E,Se.exports.default=Se.exports,Se.exports.__esModule=!0},iegG:function(Se,ft){function L(U){var E=U.target||U.srcElement;E.__resizeRAF__&&cancelAnimationFrame(E.__resizeRAF__),E.__resizeRAF__=requestAnimationFrame(function(){var T=E.__resizeTrigger__,e=T&&T.__resizeListeners__;e&&e.forEach(function(t){t.call(T,U)})})}var ft=function(E,T){var e=this,t=e.document,l,s=t.attachEvent;typeof navigator!="undefined"&&(l=navigator.userAgent.match(/Trident/)||navigator.userAgent.match(/Edge/));function c(){this.contentDocument.defaultView.__resizeTrigger__=this.__resizeElement__,this.contentDocument.defaultView.addEventListener("resize",L)}if(!E.__resizeListeners__)if(E.__resizeListeners__=[],s)E.__resizeTrigger__=E,E.attachEvent("onresize",L);else{getComputedStyle(E).position==="static"&&(E.style.position="relative");var r=E.__resizeTrigger__=t.createElement("object");r.setAttribute("style","position: absolute; top: 0; left: 0; height: 100%; width: 100%; pointer-events: none; z-index: -1; opacity: 0;"),r.setAttribute("class","resize-sensor"),r.setAttribute("tabindex","-1"),r.__resizeElement__=E,r.onload=c,r.type="text/html",l&&E.appendChild(r),r.data="about:blank",l||E.appendChild(r)}E.__resizeListeners__.push(T)};Se.exports=typeof window=="undefined"?ft:ft.bind(window),Se.exports.unbind=function(U,E){var T=document.attachEvent,e=U.__resizeListeners__||[];if(E){var t=e.indexOf(E);t!==-1&&e.splice(t,1)}else e=U.__resizeListeners__=[];if(!e.length){if(T)U.detachEvent("onresize",L);else if(U.__resizeTrigger__){var l=U.__resizeTrigger__.contentDocument,s=l&&l.defaultView;s&&(s.removeEventListener("resize",L),delete s.__resizeTrigger__),U.__resizeTrigger__=!U.removeChild(U.__resizeTrigger__)}delete U.__resizeListeners__}}},itsj:function(Se,ft){function L(U,E){if(!(E==="constructor"&&typeof U[E]=="function")&&E!="__proto__")return U[E]}Se.exports=L},jCWc:function(Se,ft,L){"use strict";var U=L("cIOH"),E=L.n(U),T=L("1GLa")},"jIg/":function(Se,ft,L){"use strict";Object.defineProperty(ft,"__esModule",{value:!0}),ft.multiInject=void 0;var U=L("xfSm"),E=L("GXnB"),T=L("Ztfv");function e(t){return function(l,s,c){var r=new E.Metadata(U.MULTI_INJECT_TAG,t);typeof c=="number"?T.tagParameter(l,s,c,r):T.tagProperty(l,s,r)}}ft.multiInject=e},jYQm:function(Se,ft,L){"use strict";var U=L("q1tI"),E=L.n(U),T=Object(U.createContext)({});ft.a=T},jYx5:function(Se,ft,L){"use strict";Object.defineProperty(ft,"__esModule",{value:!0}),ft.optional=void 0;var U=L("xfSm"),E=L("GXnB"),T=L("Ztfv");function e(){return function(t,l,s){var c=new E.Metadata(U.OPTIONAL_TAG,!0);typeof s=="number"?T.tagParameter(t,l,s,c):T.tagProperty(t,l,c)}}ft.optional=e},"jbM+":function(Se,ft,L){var U=L("R/W3");function E(T,e){var t=T==null?0:T.length;return!!t&&U(T,e,0)>-1}Se.exports=E},jeLo:function(Se,ft,L){var U=L("juv8"),E=L("mTTR");function T(e){return U(e,E(e))}Se.exports=T},juv8:function(Se,ft,L){var U=L("MrPd"),E=L("hypo");function T(e,t,l,s){var c=!l;l||(l={});for(var r=-1,h=t.length;++r<h;){var n=t[r],i=s?s(l[n],e[n],n,l,e):void 0;i===void 0&&(i=e[n]),c?E(l,n,i):U(l,n,i)}return l}Se.exports=T},"k5/I":function(Se,ft,L){"use strict";L.d(ft,"a",function(){return M}),L.d(ft,"b",function(){return W}),L.d(ft,"e",function(){return V}),L.d(ft,"f",function(){return K}),L.d(ft,"c",function(){return It}),L.d(ft,"d",function(){return H});var U=L("lSNA"),E=L.n(U),T=L("lwsE"),e=L.n(T),t=L("W8MJ"),l=L.n(t),s=L("7W2i"),c=L.n(s),r=L("a1gu"),h=L.n(r),n=L("Nsbk"),i=L.n(n),a=L("h1nZ"),o=L("Hel2"),u=L("uhBA");function f(nt,at){var q=Object.keys(nt);if(Object.getOwnPropertySymbols){var Et=Object.getOwnPropertySymbols(nt);at&&(Et=Et.filter(function(vt){return Object.getOwnPropertyDescriptor(nt,vt).enumerable})),q.push.apply(q,Et)}return q}function v(nt){for(var at=1;at<arguments.length;at++){var q=arguments[at]!=null?arguments[at]:{};at%2?f(Object(q),!0).forEach(function(Et){E()(nt,Et,q[Et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(nt,Object.getOwnPropertyDescriptors(q)):f(Object(q)).forEach(function(Et){Object.defineProperty(nt,Et,Object.getOwnPropertyDescriptor(q,Et))})}return nt}function b(nt){var at=y();return function(){var Et=i()(nt),vt;if(at){var Ft=i()(this).constructor;vt=Reflect.construct(Et,arguments,Ft)}else vt=Et.apply(this,arguments);return h()(this,vt)}}function y(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(nt){return!1}}var g;(function(nt){nt.TOPRIGHT="topright",nt.TOPLEFT="topleft",nt.BOTTOMRIGHT="bottomright",nt.BOTTOMLEFT="bottomleft"})(g||(g={}));var _=0,M=function(nt){c()(q,nt);var at=b(q);function q(Et){var vt;return e()(this,q),vt=at.call(this),vt.controlOption=void 0,vt.container=void 0,vt.sceneContainer=void 0,vt.mapsService=void 0,vt.renderService=void 0,vt.layerService=void 0,vt.controlService=void 0,vt.isShow=void 0,vt.controlOption=v(v({},vt.getDefault()),Et||{}),vt}return l()(q,[{key:"getDefault",value:function(){return{position:g.TOPRIGHT,name:"".concat(_++)}}},{key:"setPosition",value:function(vt){var Ft=this.controlService;return Ft&&Ft.removeControl(this),this.controlOption.position=vt,Ft&&Ft.addControl(this,this.sceneContainer),this}},{key:"addTo",value:function(vt){this.mapsService=vt.get(a.TYPES.IMapService),this.renderService=vt.get(a.TYPES.IRendererService),this.layerService=vt.get(a.TYPES.ILayerService),this.controlService=vt.get(a.TYPES.IControlService),this.sceneContainer=vt,this.isShow=!0,this.container=this.onAdd();var Ft=this.container,Qt=this.controlOption.position,ee=this.controlService.controlCorners[Qt];return o.a.addClass(Ft,"l7-control"),Qt.indexOf("bottom")!==-1?ee.insertBefore(Ft,ee.firstChild):ee.appendChild(Ft),this}},{key:"onAdd",value:function(){throw new Error("Method not implemented.")}},{key:"onRemove",value:function(){throw new Error("Method not implemented.")}},{key:"hide",value:function(){var vt=this.container;o.a.addClass(vt,"l7-control-hide"),this.isShow=!1}},{key:"show",value:function(){var vt=this.container;o.a.removeClass(vt,"l7-control-hide"),this.isShow=!0}},{key:"remove",value:function(){if(!this.mapsService)return this;o.a.remove(this.container),this.onRemove()}},{key:"_refocusOnMap",value:function(vt){if(this.mapsService&&vt&&vt.screenX>0&&vt.screenY>0){var Ft=this.mapsService.getContainer();Ft!==null&&Ft.focus()}}}]),q}(u.EventEmitter),x=L("PJYZ"),m=L.n(x);function S(nt){var at=P();return function(){var Et=i()(nt),vt;if(at){var Ft=i()(this).constructor;vt=Reflect.construct(Et,arguments,Ft)}else vt=Et.apply(this,arguments);return h()(this,vt)}}function P(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(nt){return!1}}var A=function(nt){c()(q,nt);var at=S(q);function q(Et){var vt;return e()(this,q),vt=at.call(this,Et),vt.layerControlInputs=void 0,vt.layers=void 0,vt.lastZIndex=void 0,vt.handlingClick=void 0,vt.layersLink=void 0,vt.baseLayersList=void 0,vt.separator=void 0,vt.overlaysList=void 0,vt.form=void 0,vt.layerControlInputs=[],vt.layers=[],vt.lastZIndex=0,vt.handlingClick=!1,vt.initLayers(),Object(o.i)(["checkDisabledLayers","onLayerChange","collapse","extend","expand","onInputClick"],m()(vt)),vt}return l()(q,[{key:"getDefault",value:function(){return{collapsed:!0,position:a.PositionType.TOPRIGHT,autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,name:"layers"}}},{key:"onAdd",value:function(){var vt=this;return this.initLayout(),this.update(),this.mapsService.on("zoomend",this.checkDisabledLayers),this.layers.forEach(function(Ft){Ft.layer.on("remove",vt.onLayerChange),Ft.layer.on("add",vt.onLayerChange)}),this.container}},{key:"addVisualLayer",value:function(vt,Ft){return this.addLayer(vt,Ft,!0),this.mapsService?this.update():this}},{key:"expand",value:function(){var vt=this.renderService.getViewportSize(),Ft=vt.height;o.a.addClass(this.container,"l7-control-layers-expanded"),this.form.style.height="null";var Qt=Ft-(this.container.offsetTop+50);return Qt<this.form.clientHeight?(o.a.addClass(this.form,"l7-control-layers-scrollbar"),this.form.style.height=Qt+"px"):o.a.removeClass(this.form,"l7-control-layers-scrollbar"),this.checkDisabledLayers(),this}},{key:"collapse",value:function(){return o.a.removeClass(this.container,"l7-control-layers-expanded"),this}},{key:"onRemove",value:function(){var vt=this;!this.mapsService||(this.mapsService.off("click",this.collapse),this.layers.forEach(function(Ft){Ft.layer.off("remove",vt.onLayerChange),Ft.layer.off("add",vt.onLayerChange)}))}},{key:"initLayout",value:function(){var vt="l7-control-layers",Ft=this.container=o.a.create("div",vt),Qt=this.controlOption.collapsed;Ft.setAttribute("aria-haspopup","true");var ee=this.form=o.a.create("form",vt+"-list");Qt&&(this.mapsService.on("click",this.collapse),Ft.addEventListener("mouseenter",this.expand),Ft.addEventListener("mouseleave",this.collapse)),this.layersLink=o.a.create("a",vt+"-toggle",Ft);var Gt=this.layersLink;Gt.title="Layers",Qt||this.expand(),this.baseLayersList=o.a.create("div",vt+"-base",ee),this.separator=o.a.create("div",vt+"-separator",ee),this.overlaysList=o.a.create("div",vt+"-overlays",ee),Ft.appendChild(ee)}},{key:"initLayers",value:function(){var vt=this,Ft=this.controlOption,Qt=Ft.baseLayers,ee=Qt===void 0?{}:Qt,Gt=Ft.overlayers,$t=Gt===void 0?{}:Gt;Object.keys(ee).forEach(function(Pe,me){vt.addLayer(ee[Pe],Pe,!1)}),Object.keys($t).forEach(function(Pe,me){vt.addLayer($t[Pe],Pe,!0)})}},{key:"update",value:function(){if(!this.container)return this;o.a.empty(this.baseLayersList),o.a.empty(this.overlaysList),this.layerControlInputs=[];var vt,Ft,Qt,ee,Gt=0;for(Qt=0;Qt<this.layers.length;Qt++)ee=this.layers[Qt],this.addItem(ee),Ft=Ft||ee.overlay,vt=vt||!ee.overlay,Gt+=ee.overlay?0:1;return this.controlOption.hideSingleBase&&(vt=vt&&Gt>1,this.baseLayersList.style.display=vt?"":"none"),this.separator.style.display=Ft&&vt?"":"none",this}},{key:"checkDisabledLayers",value:function(){for(var vt=this.layerControlInputs,Ft,Qt,ee=this.mapsService.getZoom(),Gt=vt.length-1;Gt>=0;Gt--)if(Ft=vt[Gt],Qt=this.layerService.getLayer(Ft.layerId),Qt&&Qt.inited){var $t=Qt.getMinZoom(),Pe=Qt.getMaxZoom();Ft.disabled=ee<$t||ee>Pe}}},{key:"addLayer",value:function(vt,Ft,Qt){this.mapsService&&(vt.on("add",this.onLayerChange),vt.on("remove",this.onLayerChange)),this.layers.push({layer:vt,name:Ft,overlay:Qt});var ee=this.controlOption,Gt=ee.sortLayers,$t=ee.sortFunction,Pe=ee.autoZIndex;Gt&&this.layers.sort(function(me,le){return $t(me.layer,le.layer,me.name,le.name)}),Pe&&vt.setZIndex&&(this.lastZIndex++,vt.setZIndex(this.lastZIndex)),this.expandIfNotCollapsed()}},{key:"expandIfNotCollapsed",value:function(){return this.mapsService&&!this.controlOption.collapsed&&this.expand(),this}},{key:"onLayerChange",value:function(vt){this.handlingClick||this.update();var Ft=this.layerService.getLayer(vt.target.layerId),Qt=Ft!=null&&Ft.overlay?vt.type==="add"?"overlayadd":"overlayremove":vt.type==="add"?"baselayerchange":null;Qt&&this.emit(Qt,Ft)}},{key:"createRadioElement",value:function(vt,Ft){var Qt='<input type="radio" class="l7-control-layers-selector" name="'+vt+'"'+(Ft?' checked="checked"':"")+"/>",ee=document.createElement("div");return ee.innerHTML=Qt,ee.firstChild}},{key:"addItem",value:function(vt){var Ft=document.createElement("label"),Qt=this.layerService.getLayer(vt.layer.id),ee=Qt&&Qt.inited&&vt.layer.isVisible(),Gt;vt.overlay?(Gt=document.createElement("input"),Gt.type="checkbox",Gt.className="l7-control-layers-selector",Gt.defaultChecked=ee):Gt=this.createRadioElement("l7-base-layers",ee),this.layerControlInputs.push(Gt),Gt.layerId=vt.layer.id,Gt.addEventListener("click",this.onInputClick);var $t=document.createElement("span");$t.innerHTML=" "+vt.name;var Pe=document.createElement("div");Ft.appendChild(Pe),Pe.appendChild(Gt),Pe.appendChild($t);var me=vt.overlay?this.overlaysList:this.baseLayersList;return me.appendChild(Ft),this.checkDisabledLayers(),Ft}},{key:"onInputClick",value:function(){var vt=this.layerControlInputs,Ft,Qt,ee=[],Gt=[];this.handlingClick=!0;for(var $t=vt.length-1;$t>=0;$t--)Ft=vt[$t],Qt=this.layerService.getLayer(Ft.layerId),Ft.checked?ee.push(Qt):Ft.checked||Gt.push(Qt);Gt.forEach(function(Pe){Pe.hide()}),ee.forEach(function(Pe){Pe.show()}),this.handlingClick=!1}}]),q}(M);function O(nt){var at=R();return function(){var Et=i()(nt),vt;if(at){var Ft=i()(this).constructor;vt=Reflect.construct(Et,arguments,Ft)}else vt=Et.apply(this,arguments);return h()(this,vt)}}function R(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(nt){return!1}}var W=function(nt){c()(q,nt);var at=O(q);function q(){return e()(this,q),at.apply(this,arguments)}return l()(q,[{key:"getDefault",value:function(){return{position:g.BOTTOMLEFT,name:"logo"}}},{key:"onAdd",value:function(){var vt="l7-control-logo",Ft=o.a.create("div",vt),Qt=o.a.create("a","l7-ctrl-logo");return Qt.target="_blank",Qt.rel="noopener nofollow",Qt.href="https://antv.alipay.com/l7",Qt.setAttribute("aria-label","AntV logo"),Qt.setAttribute("rel","noopener nofollow"),Ft.appendChild(Qt),Ft}},{key:"onRemove",value:function(){return null}}]),q}(M);function F(nt){var at=Z();return function(){var Et=i()(nt),vt;if(at){var Ft=i()(this).constructor;vt=Reflect.construct(Et,arguments,Ft)}else vt=Et.apply(this,arguments);return h()(this,vt)}}function Z(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(nt){return!1}}var V=function(nt){c()(q,nt);var at=F(q);function q(Et){var vt;return e()(this,q),vt=at.call(this,Et),vt.mScale=void 0,vt.iScale=void 0,Object(o.i)(["update"],m()(vt)),vt}return l()(q,[{key:"getDefault",value:function(){return{position:g.BOTTOMLEFT,maxWidth:100,metric:!0,updateWhenIdle:!1,imperial:!1,name:"scale"}}},{key:"onAdd",value:function(){var vt="l7-control-scale",Ft=o.a.create("div",vt);this.addScales(vt+"-line",Ft);var Qt=this.controlOption.updateWhenIdle;return this.mapsService.on(Qt?"moveend":"mapmove",this.update),this.mapsService.on(Qt?"zoomend":"zoomchange",this.update),this.update(),Ft}},{key:"onRemove",value:function(){var vt=this.controlOption.updateWhenIdle;this.mapsService.off(vt?"zoomend":"zoomchange",this.update),this.mapsService.off(vt?"moveend":"mapmove",this.update)}},{key:"update",value:function(){var vt=this.mapsService,Ft=this.controlOption.maxWidth,Qt=vt.getSize()[1]/2,ee=vt.containerToLngLat([0,Qt]),Gt=vt.containerToLngLat([Ft,Qt]),$t=Object(o.q)([ee.lng,ee.lat],[Gt.lng,Gt.lat]);this.updateScales($t)}},{key:"updateScales",value:function(vt){var Ft=this.controlOption,Qt=Ft.metric,ee=Ft.imperial;Qt&&vt&&this.updateMetric(vt),ee&&vt&&this.updateImperial(vt)}},{key:"updateMetric",value:function(vt){var Ft=this.getRoundNum(vt),Qt=Ft<1e3?Ft+" m":Ft/1e3+" km";this.updateScale(this.mScale,Qt,Ft/vt)}},{key:"updateImperial",value:function(vt){var Ft=vt*3.2808399,Qt,ee,Gt;Ft>5280?(Qt=Ft/5280,ee=this.getRoundNum(Qt),this.updateScale(this.iScale,ee+" mi",ee/Qt)):(Gt=this.getRoundNum(Ft),this.updateScale(this.iScale,Gt+" ft",Gt/Ft))}},{key:"updateScale",value:function(vt,Ft,Qt){var ee=this.controlOption.maxWidth;vt.style.width=Math.round(ee*Qt)+"px",vt.innerHTML=Ft}},{key:"getRoundNum",value:function(vt){var Ft=Math.pow(10,(Math.floor(vt)+"").length-1),Qt=vt/Ft;return Qt=Qt>=10?10:Qt>=5?5:Qt>=3?3:Qt>=2?2:1,Ft*Qt}},{key:"addScales",value:function(vt,Ft){var Qt=this.controlOption,ee=Qt.metric,Gt=Qt.imperial;ee&&(this.mScale=o.a.create("div",vt,Ft)),Gt&&(this.iScale=o.a.create("div",vt,Ft))}}]),q}(M);function k(nt){var at=Y();return function(){var Et=i()(nt),vt;if(at){var Ft=i()(this).constructor;vt=Reflect.construct(Et,arguments,Ft)}else vt=Et.apply(this,arguments);return h()(this,vt)}}function Y(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(nt){return!1}}var K=function(nt){c()(q,nt);var at=k(q);function q(Et){var vt;return e()(this,q),vt=at.call(this,Et),vt.disabled=void 0,vt.zoomInButton=void 0,vt.zoomOutButton=void 0,Object(o.i)(["updateDisabled","zoomIn","zoomOut"],m()(vt)),vt}return l()(q,[{key:"getDefault",value:function(){return{position:g.TOPLEFT,zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out",name:"zoom"}}},{key:"onAdd",value:function(){var vt="l7-control-zoom",Ft=o.a.create("div",vt+" l7-bar");return this.zoomInButton=this.createButton(this.controlOption.zoomInText,this.controlOption.zoomInTitle,vt+"-in",Ft,this.zoomIn),this.zoomOutButton=this.createButton(this.controlOption.zoomOutText,this.controlOption.zoomOutTitle,vt+"-out",Ft,this.zoomOut),this.mapsService.on("zoomend",this.updateDisabled),this.mapsService.on("zoomchange",this.updateDisabled),this.updateDisabled(),Ft}},{key:"onRemove",value:function(){this.mapsService.off("zoomend",this.updateDisabled),this.mapsService.off("zoomchange",this.updateDisabled)}},{key:"disable",value:function(){return this.disabled=!0,this.updateDisabled(),this}},{key:"enable",value:function(){return this.disabled=!1,this.updateDisabled(),this}},{key:"zoomIn",value:function(){!this.disabled&&this.mapsService.getZoom()<this.mapsService.getMaxZoom()&&this.mapsService.zoomIn()}},{key:"zoomOut",value:function(){!this.disabled&&this.mapsService.getZoom()>this.mapsService.getMinZoom()&&this.mapsService.zoomOut()}},{key:"createButton",value:function(vt,Ft,Qt,ee,Gt){var $t=o.a.create("a",Qt,ee);return $t.innerHTML=vt,$t.title=Ft,$t.href="javascript:void(0)",$t.addEventListener("click",Gt),$t}},{key:"updateDisabled",value:function(){var vt=this.mapsService,Ft="l7-disabled";o.a.removeClass(this.zoomInButton,Ft),o.a.removeClass(this.zoomOutButton,Ft),(this.disabled||vt.getZoom()<=vt.getMinZoom())&&o.a.addClass(this.zoomOutButton,Ft),(this.disabled||vt.getZoom()>=vt.getMaxZoom())&&o.a.addClass(this.zoomInButton,Ft)}}]),q}(M);function it(nt,at){var q=Object.keys(nt);if(Object.getOwnPropertySymbols){var Et=Object.getOwnPropertySymbols(nt);at&&(Et=Et.filter(function(vt){return Object.getOwnPropertyDescriptor(nt,vt).enumerable})),q.push.apply(q,Et)}return q}function ct(nt){for(var at=1;at<arguments.length;at++){var q=arguments[at]!=null?arguments[at]:{};at%2?it(Object(q),!0).forEach(function(Et){E()(nt,Et,q[Et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(nt,Object.getOwnPropertyDescriptors(q)):it(Object(q)).forEach(function(Et){Object.defineProperty(nt,Et,Object.getOwnPropertyDescriptor(q,Et))})}return nt}function ht(nt){var at=ut();return function(){var Et=i()(nt),vt;if(at){var Ft=i()(this).constructor;vt=Reflect.construct(Et,arguments,Ft)}else vt=Et.apply(this,arguments);return h()(this,vt)}}function ut(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(nt){return!1}}var It=function(nt){c()(q,nt);var at=ht(q);function q(Et){var vt;return e()(this,q),vt=at.call(this),vt.markerOption=void 0,vt.defaultMarker=void 0,vt.popup=void 0,vt.mapsService=void 0,vt.sceneSerive=void 0,vt.lngLat=void 0,vt.scene=void 0,vt.added=!1,vt.eventHandle=function(Ft){vt.emit(Ft.type,{target:Ft,data:vt.markerOption.extData,lngLat:vt.lngLat})},vt.markerOption=ct(ct({},vt.getDefault()),Et),Object(o.i)(["update","onMove","onUp","addDragHandler","onMapClick"],m()(vt)),vt.init(),vt}return l()(q,[{key:"getDefault",value:function(){return{element:void 0,anchor:o.f.BOTTOM,offsets:[0,0],color:"#5B8FF9",draggable:!1}}},{key:"addTo",value:function(vt){this.scene=vt,this.mapsService=vt.get(a.TYPES.IMapService),this.sceneSerive=vt.get(a.TYPES.ISceneService);var Ft=this.markerOption,Qt=Ft.element,ee=Ft.draggable;return this.mapsService.getMarkerContainer().appendChild(Qt),this.registerMarkerEvent(Qt),this.mapsService.on("camerachange",this.update),this.update(),this.added=!0,this.emit("added"),this}},{key:"remove",value:function(){this.mapsService&&(this.mapsService.off("click",this.onMapClick),this.mapsService.off("move",this.update),this.mapsService.off("moveend",this.update),this.mapsService.off("mousedown",this.addDragHandler),this.mapsService.off("touchstart",this.addDragHandler),this.mapsService.off("mouseup",this.onUp),this.mapsService.off("touchend",this.onUp)),this.unRegisterMarkerEvent(),this.removeAllListeners();var vt=this.markerOption.element;return vt&&o.a.remove(vt),this.popup&&this.popup.remove(),this}},{key:"setLnglat",value:function(vt){return this.lngLat=vt,Array.isArray(vt)&&(this.lngLat={lng:vt[0],lat:vt[1]}),this.popup&&this.popup.setLnglat(this.lngLat),this.update(),this}},{key:"getLnglat",value:function(){return this.lngLat}},{key:"getElement",value:function(){return this.markerOption.element}},{key:"setElement",value:function(vt){var Ft=this;if(!this.added)return this.once("added",function(){Ft.setElement(vt)}),this;var Qt=this.markerOption.element;return Qt&&o.a.remove(Qt),this.markerOption.element=vt,this.init(),this.mapsService.getMarkerContainer().appendChild(vt),this.registerMarkerEvent(vt),this.update(),this}},{key:"openPopup",value:function(){var vt=this;if(!this.added)return this.once("added",function(){vt.openPopup()}),this;var Ft=this.popup;return Ft?(Ft.isOpen()||Ft.addTo(this.scene),this):this}},{key:"closePopup",value:function(){var vt=this;this.added||this.once("added",function(){vt.closePopup()});var Ft=this.popup;return Ft&&Ft.remove(),this}},{key:"setPopup",value:function(vt){return this.popup=vt,this.lngLat&&this.popup.setLnglat(this.lngLat),this}},{key:"togglePopup",value:function(){var vt=this.popup;if(vt)vt.isOpen()?vt.remove():vt.addTo(this.scene);else return this;return this}},{key:"getPopup",value:function(){return this.popup}},{key:"getOffset",value:function(){return this.markerOption.offsets}},{key:"setDraggable",value:function(vt){throw new Error("Method not implemented.")}},{key:"isDraggable",value:function(){return this.markerOption.draggable}},{key:"getExtData",value:function(){return this.markerOption.extData}},{key:"setExtData",value:function(vt){this.markerOption.extData=vt}},{key:"update",value:function(){if(!!this.mapsService){var vt=this.markerOption,Ft=vt.element,Qt=vt.anchor;this.updatePosition(),o.a.setTransform(Ft,"".concat(o.e[Qt]))}}},{key:"onMapClick",value:function(vt){var Ft=this.markerOption.element;this.popup&&Ft&&this.togglePopup()}},{key:"updatePosition",value:function(){if(!!this.mapsService){var vt=this.markerOption,Ft=vt.element,Qt=vt.offsets,ee=this.lngLat,Gt=ee.lng,$t=ee.lat,Pe=this.mapsService.getBounds(),me=this.mapsService.lngLatToContainer([Gt,$t]);if(Ft){Ft.style.display="block";var le=this.mapsService.getContainer(),be=0,ze=0;if(le&&(be=le.scrollWidth,ze=le.scrollHeight),Math.abs(Pe[0][0])>180||Math.abs(Pe[1][0])>180){if(me.x>be){var Xe=this.mapsService.lngLatToContainer([Gt-360,$t]);me.x=Xe.x}if(me.x<0){var _n=this.mapsService.lngLatToContainer([Gt+360,$t]);me.x=_n.x}}(me.x>be||me.x<0||me.y>ze||me.y<0)&&(Ft.style.display="none"),Ft.style.left=me.x+Qt[0]+"px",Ft.style.top=me.y-Qt[1]+"px"}}}},{key:"init",value:function(){var vt=this,Ft=this.markerOption.element,Qt=this.markerOption,ee=Qt.color,Gt=Qt.anchor;if(!Ft){this.defaultMarker=!0,Ft=o.a.create("div"),this.markerOption.element=Ft;var $t=document.createElementNS("http://www.w3.org/2000/svg","svg");$t.setAttributeNS(null,"display","block"),$t.setAttributeNS(null,"height","48px"),$t.setAttributeNS(null,"width","48px"),$t.setAttributeNS(null,"viewBox","0 0 1024 1024");var Pe=document.createElementNS("http://www.w3.org/2000/svg","path");Pe.setAttributeNS(null,"d","M512 490.666667C453.12 490.666667 405.333333 442.88 405.333333 384 405.333333 325.12 453.12 277.333333 512 277.333333 570.88 277.333333 618.666667 325.12 618.666667 384 618.666667 442.88 570.88 490.666667 512 490.666667M512 85.333333C346.88 85.333333 213.333333 218.88 213.333333 384 213.333333 608 512 938.666667 512 938.666667 512 938.666667 810.666667 608 810.666667 384 810.666667 218.88 677.12 85.333333 512 85.333333Z"),Pe.setAttributeNS(null,"fill",ee),$t.appendChild(Pe),Ft.appendChild($t)}o.a.addClass(Ft,"l7-marker"),Object.keys(this.markerOption.style||{}).forEach(function(me){var le,be,ze=((le=vt.markerOption)===null||le===void 0?void 0:le.style)&&((be=vt.markerOption)===null||be===void 0?void 0:be.style[me]);Ft&&(Ft.style[me]=ze)}),Ft.addEventListener("click",function(me){vt.onMapClick(me)}),Ft.addEventListener("click",this.eventHandle),Object(o.g)(Ft,Gt,"marker")}},{key:"registerMarkerEvent",value:function(vt){vt.addEventListener("mousemove",this.eventHandle),vt.addEventListener("click",this.eventHandle),vt.addEventListener("mousedown",this.eventHandle),vt.addEventListener("mouseup",this.eventHandle),vt.addEventListener("dblclick",this.eventHandle),vt.addEventListener("contextmenu",this.eventHandle),vt.addEventListener("mouseover",this.eventHandle),vt.addEventListener("mouseout",this.eventHandle)}},{key:"unRegisterMarkerEvent",value:function(){var vt=this.getElement();vt.removeEventListener("mousemove",this.eventHandle),vt.removeEventListener("click",this.eventHandle),vt.removeEventListener("mousedown",this.eventHandle),vt.removeEventListener("mouseup",this.eventHandle),vt.removeEventListener("dblclick",this.eventHandle),vt.removeEventListener("contextmenu",this.eventHandle),vt.removeEventListener("mouseover",this.eventHandle),vt.removeEventListener("mouseout",this.eventHandle)}},{key:"addDragHandler",value:function(vt){throw new Error("Method not implemented.")}},{key:"onUp",value:function(vt){throw new Error("Method not implemented.")}}]),q}(u.EventEmitter),Nt=L("QkVN"),Lt=L.n(Nt),_t=L("mpbz"),mt=L.n(_t);function At(nt,at){var q=Object.keys(nt);if(Object.getOwnPropertySymbols){var Et=Object.getOwnPropertySymbols(nt);at&&(Et=Et.filter(function(vt){return Object.getOwnPropertyDescriptor(nt,vt).enumerable})),q.push.apply(q,Et)}return q}function rt(nt){for(var at=1;at<arguments.length;at++){var q=arguments[at]!=null?arguments[at]:{};at%2?At(Object(q),!0).forEach(function(Et){E()(nt,Et,q[Et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(nt,Object.getOwnPropertyDescriptors(q)):At(Object(q)).forEach(function(Et){Object.defineProperty(nt,Et,Object.getOwnPropertyDescriptor(q,Et))})}return nt}function Mt(nt){var at=z();return function(){var Et=i()(nt),vt;if(at){var Ft=i()(this).constructor;vt=Reflect.construct(Et,arguments,Ft)}else vt=Et.apply(this,arguments);return h()(this,vt)}}function z(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(nt){return!1}}var $=function(nt){c()(q,nt);var at=Mt(q);function q(Et){var vt,Ft;return e()(this,q),Ft=at.call(this),Ft.markers=[],Ft.markerLayerOption=void 0,Ft.clusterIndex=void 0,Ft.points=[],Ft.clusterMarkers=[],Ft.mapsService=void 0,Ft.scene=void 0,Ft.zoom=void 0,Ft.bbox=void 0,Ft.markerLayerOption=Lt()(Ft.getDefault(),Et),Object(o.i)(["update"],m()(Ft)),Ft.zoom=((vt=Ft.markerLayerOption.clusterOption)===null||vt===void 0?void 0:vt.zoom)||-99,Ft}return l()(q,[{key:"getDefault",value:function(){return{cluster:!1,clusterOption:{radius:80,maxZoom:20,minZoom:0,zoom:-99,style:{},className:""}}}},{key:"addTo",value:function(vt){return this.scene=vt,this.mapsService=vt.get(a.TYPES.IMapService),this.markerLayerOption.cluster&&(this.initCluster(),this.update(),this.mapsService.on("camerachange",this.update)),this.addMarkers(),this}},{key:"addMarker",value:function(vt){var Ft=this.markerLayerOption.cluster;Ft&&this.addPoint(vt,this.markers.length),this.markers.push(vt)}},{key:"removeMarker",value:function(vt){this.markers.indexOf(vt);var Ft=this.markers.indexOf(vt);Ft>-1&&this.markers.splice(Ft,1)}},{key:"getMarkers",value:function(){var vt=this.markerLayerOption.cluster;return vt?this.clusterMarkers:this.markers}},{key:"addMarkers",value:function(){var vt=this;this.getMarkers().forEach(function(Ft){Ft.addTo(vt.scene)})}},{key:"clear",value:function(){this.markers.forEach(function(vt){vt.remove()}),this.clusterMarkers.forEach(function(vt){vt.remove()}),this.mapsService.off("camerachange",this.update),this.markers=[],this.clusterMarkers=[]}},{key:"destroy",value:function(){this.clear(),this.removeAllListeners()}},{key:"addPoint",value:function(vt,Ft){var Qt=vt.getLnglat(),ee=Qt.lng,Gt=Qt.lat,$t={geometry:{type:"Point",coordinates:[ee,Gt]},properties:rt(rt({},vt.getExtData()),{},{marker_id:Ft})};this.points.push($t)}},{key:"initCluster",value:function(){if(!!this.markerLayerOption.cluster){var vt=this.markerLayerOption.clusterOption,Ft=vt.radius,Qt=vt.minZoom,ee=Qt===void 0?0:Qt,Gt=vt.maxZoom;this.clusterIndex=new mt.a({radius:Ft,minZoom:ee,maxZoom:Gt}),this.clusterIndex.load(this.points)}}},{key:"getClusterMarker",value:function(vt,Ft){var Qt=this,ee=vt[0].concat(vt[1]),Gt=this.clusterIndex.getClusters(ee,Ft);this.clusterMarkers.forEach(function($t){$t.remove()}),this.clusterMarkers=[],Gt.forEach(function($t){var Pe,me=Qt.markerLayerOption.clusterOption,le=me.field,be=me.method;if($t.properties&&(Pe=$t.properties)!==null&&Pe!==void 0&&Pe.cluster_id){var ze,Xe=Qt.getLeaves((ze=$t.properties)===null||ze===void 0?void 0:ze.cluster_id);if($t.properties.clusterData=Xe,le&&be){var _n=Xe==null?void 0:Xe.map(function(An){var Nn=E()({},le,An.properties[le]);return Nn}),Kn=o.c.getColumn(_n,le),Hn=o.c.getSatByColumn(be,Kn),nn="point_"+be;$t.properties[nn]=Hn.toFixed(2)}}var en=Qt.clusterMarker($t);Qt.clusterMarkers.push(en),en.addTo(Qt.scene)})}},{key:"getLeaves",value:function(vt){var Ft=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Infinity,Qt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return vt?this.clusterIndex.getLeaves(vt,Ft,Qt):null}},{key:"clusterMarker",value:function(vt){var Ft=this.markerLayerOption.clusterOption,Qt=Ft,ee=Qt.element,Gt=ee===void 0?this.generateElement.bind(this):ee,$t=new It({element:Gt(vt)}).setLnglat({lng:vt.geometry.coordinates[0],lat:vt.geometry.coordinates[1]});return $t}},{key:"normalMarker",value:function(vt){var Ft=vt.properties.marker_id;return this.markers[Ft]}},{key:"update",value:function(){var vt=this.mapsService.getZoom(),Ft=this.mapsService.getBounds();(!this.bbox||Math.abs(vt-this.zoom)>=1||!Object(o.j)(this.bbox,Ft))&&(this.bbox=Object(o.r)(Ft,.5),this.zoom=Math.floor(vt),this.getClusterMarker(this.bbox,this.zoom))}},{key:"generateElement",value:function(vt){var Ft=o.a.create("div","l7-marker-cluster"),Qt=o.a.create("div","",Ft),ee=o.a.create("span","",Qt),Gt=this.markerLayerOption.clusterOption,$t=Gt.field,Pe=Gt.method;vt.properties.point_count=vt.properties.point_count||1;var me=$t&&Pe?vt.properties["point_"+Pe]||vt.properties[$t]:vt.properties.point_count;return ee.textContent=me,Ft}}]),q}(u.EventEmitter);function dt(nt,at){var q=Object.keys(nt);if(Object.getOwnPropertySymbols){var Et=Object.getOwnPropertySymbols(nt);at&&(Et=Et.filter(function(vt){return Object.getOwnPropertyDescriptor(nt,vt).enumerable})),q.push.apply(q,Et)}return q}function et(nt){for(var at=1;at<arguments.length;at++){var q=arguments[at]!=null?arguments[at]:{};at%2?dt(Object(q),!0).forEach(function(Et){E()(nt,Et,q[Et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(nt,Object.getOwnPropertyDescriptors(q)):dt(Object(q)).forEach(function(Et){Object.defineProperty(nt,Et,Object.getOwnPropertyDescriptor(q,Et))})}return nt}function ot(nt){var at=pt();return function(){var Et=i()(nt),vt;if(at){var Ft=i()(this).constructor;vt=Reflect.construct(Et,arguments,Ft)}else vt=Et.apply(this,arguments);return h()(this,vt)}}function pt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(nt){return!1}}var H=function(nt){c()(q,nt);var at=ot(q);function q(Et){var vt;return e()(this,q),vt=at.call(this),vt.popupOption=void 0,vt.mapsService=void 0,vt.sceneSerive=void 0,vt.lngLat=void 0,vt.content=void 0,vt.closeButton=void 0,vt.timeoutInstance=void 0,vt.container=void 0,vt.tip=void 0,vt.scene=void 0,vt.popupOption=et(et({},vt.getdefault()),Et),Object(o.i)(["update","onClickClose","remove"],m()(vt)),vt}return l()(q,[{key:"addTo",value:function(vt){var Ft=this;return this.mapsService=vt.get(a.TYPES.IMapService),this.sceneSerive=vt.get(a.TYPES.ISceneService),this.mapsService.on("camerachange",this.update),this.scene=vt,this.update(),this.popupOption.closeOnClick&&(this.timeoutInstance=setTimeout(function(){Ft.mapsService.on("click",Ft.onClickClose)},30)),this.emit("open"),this}},{key:"close",value:function(){this.remove()}},{key:"open",value:function(){this.addTo(this.scene)}},{key:"setHTML",value:function(vt){var Ft=window.document.createDocumentFragment(),Qt=window.document.createElement("body"),ee;for(Qt.innerHTML=vt;ee=Qt.firstChild,!!ee;)Ft.appendChild(ee);return this.setDOMContent(Ft)}},{key:"setLnglat",value:function(vt){return this.lngLat=vt,Array.isArray(vt)&&(this.lngLat={lng:vt[0],lat:vt[1]}),this.mapsService&&this.mapsService.on("camerachange",this.update),this.update(),this}},{key:"getLnglat",value:function(){return this.lngLat}},{key:"setText",value:function(vt){return this.setDOMContent(window.document.createTextNode(vt))}},{key:"setMaxWidth",value:function(vt){return this.popupOption.maxWidth=vt,this.update(),this}},{key:"setDOMContent",value:function(vt){return this.createContent(),this.content.appendChild(vt),this.update(),this}},{key:"remove",value:function(){return this.content&&this.removeDom(this.content),this.container&&(this.removeDom(this.container),delete this.container),this.mapsService&&(this.mapsService.off("camerachange",this.update),this.mapsService.off("click",this.onClickClose),delete this.mapsService),clearTimeout(this.timeoutInstance),this.emit("close"),this}},{key:"isOpen",value:function(){return!!this.mapsService}},{key:"createContent",value:function(){this.content&&o.a.remove(this.content),this.content=o.a.create("div","l7-popup-content",this.container),this.popupOption.closeButton&&(this.closeButton=o.a.create("button","l7-popup-close-button",this.content),this.closeButton.setAttribute("aria-label","Close popup"),this.closeButton.innerHTML="&#215;",this.closeButton.addEventListener("click",this.onClickClose))}},{key:"creatDom",value:function(vt,Ft,Qt){var ee=window.document.createElement(vt);return Ft!==void 0&&(ee.className=Ft),Qt&&Qt.appendChild(ee),ee}},{key:"removeDom",value:function(vt){vt.parentNode&&vt.parentNode.removeChild(vt)}},{key:"getdefault",value:function(){return{closeButton:!0,closeOnClick:!0,maxWidth:"240px",offsets:[0,0],anchor:o.f.BOTTOM,className:"",stopPropagation:!0}}},{key:"onClickClose",value:function(vt){vt.stopPropagation&&vt.stopPropagation(),this.remove()}},{key:"update",value:function(){var vt=this,Ft=this.lngLat,Qt=this.popupOption,ee=Qt.className,Gt=Qt.maxWidth,$t=Qt.anchor;if(!(!this.mapsService||!Ft||!this.content)){var Pe=this.mapsService.getMarkerContainer();if(!this.container&&Pe){this.container=this.creatDom("div","l7-popup",Pe),this.tip=this.creatDom("div","l7-popup-tip",this.container),this.container.appendChild(this.content),ee&&ee.split(" ").forEach(function(le){return vt.container.classList.add(le)});var me=this.popupOption.stopPropagation;me&&["mousemove","mousedown","mouseup","click","dblclick"].forEach(function(le){vt.container.addEventListener(le,function(be){be.stopPropagation()})})}Gt&&this.container.style.maxWidth!==Gt&&(this.container.style.maxWidth=Gt),this.updatePosition(),o.a.setTransform(this.container,"".concat(o.e[$t])),Object(o.g)(this.container,$t,"popup")}}},{key:"updatePosition",value:function(){if(!!this.mapsService){var vt=this.lngLat,Ft=vt.lng,Qt=vt.lat,ee=this.popupOption.offsets,Gt=this.mapsService.lngLatToContainer([Ft,Qt]);this.container.style.left=Gt.x+ee[0]+"px",this.container.style.top=Gt.y-ee[1]+"px"}}}]),q}(u.EventEmitter);L("BGjm")(`/* @antv/l7-component */
.l7-marker-container {
  width: 100%;
  height: 100%;
  overflow: hidden;
  position: absolute;
 }

.l7-marker {
	position: absolute !important;
	top: 0;
	left: 0;
  z-index: 5;
  cursor: pointer;
}

.l7-marker-cluster {
  background-clip: padding-box;
  border-radius: 20px;
  background-color: rgba(181, 226, 140, 0.6);
  width: 40px;
  height: 40px;
}
.l7-marker-cluster div {
  width: 30px;
  height: 30px;
  margin-left: 5px;
  margin-top: 5px;
  text-align: center;
  border-radius: 15px;
  font: 12px "Helvetica Neue", Arial, Helvetica, sans-serif;
  background-color: rgba(110, 204, 57, 0.6);
}
.l7-marker-cluster span {
  line-height: 30px;
}

.l7-popup-anchor-bottom,
.l7-popup-anchor-bottom-left,
.l7-popup-anchor-bottom-right {
    -webkit-flex-direction: column-reverse;
    -webkit-box-orient: vertical;
    -webkit-box-direction: reverse;
        -ms-flex-direction: column-reverse;
            flex-direction: column-reverse;
}

.l7-popup-close-button {
  position: absolute;
  right: 0;
  top: 0;
  border: 0;
  border-radius: 0 3px 0 0;
  cursor: pointer;
  background-color: transparent;
}

.l7-popup-close-button:hover {
  background-color: rgba(0, 0, 0, 0.05);
}

.l7-popup-content {
  position: relative;
  background: #fff;
  border-radius: 3px;
  -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
          box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  padding: 10px 10px 15px;
  pointer-events: auto;
}

	/* layers control */

.l7-control-layers {
	-webkit-box-shadow: 0 1px 5px rgba(0,0,0,0.4);
	        box-shadow: 0 1px 5px rgba(0,0,0,0.4);
	background: #fff;
	border-radius: 5px;
	}
.l7-popup-anchor-top,
.l7-popup-anchor-top-left,
.l7-popup-anchor-top-right {
    -webkit-flex-direction: column;
    -webkit-box-orient: vertical;
    -webkit-box-direction: normal;
        -ms-flex-direction: column;
            flex-direction: column;
}


.l7-popup-anchor-left {
    -webkit-flex-direction: row;
    -webkit-box-orient: horizontal;
    -webkit-box-direction: normal;
        -ms-flex-direction: row;
            flex-direction: row;
}

.l7-popup-anchor-right {
    -webkit-flex-direction: row-reverse;
    -webkit-box-orient: horizontal;
    -webkit-box-direction: reverse;
        -ms-flex-direction: row-reverse;
            flex-direction: row-reverse;
}
.l7-popup {
  position: absolute;
  top: 0;
  left: 0;
  display: -webkit-flex;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  will-change: transform;
  pointer-events: none;
  z-index: 5;
}
.l7-popup-tip {
  width: 0;
  height: 0;
  border: 10px solid transparent;
  z-index: 1;
}
.l7-popup-anchor-top .l7-popup-tip {
	-webkit-align-self: center;
	-ms-flex-item-align: center;
	    align-self: center;
	border-top: none;
	border-bottom-color: #fff;
}

.l7-popup-anchor-top-left .l7-popup-tip {
	-webkit-align-self: flex-start;
	-ms-flex-item-align: start;
	    align-self: flex-start;
	border-top: none;
	border-left: none;
	border-bottom-color: #fff;
}

.l7-popup-anchor-top-right .l7-popup-tip {
	-webkit-align-self: flex-end;
	-ms-flex-item-align: end;
	    align-self: flex-end;
	border-top: none;
	border-right: none;
	border-bottom-color: #fff;
}

.l7-popup-anchor-bottom .l7-popup-tip {
	-webkit-align-self: center;
	-ms-flex-item-align: center;
	    align-self: center;
	border-bottom: none;
	border-top-color: #fff;
}

.l7-popup-anchor-bottom-left .l7-popup-tip {
	-webkit-align-self: flex-start;
	-ms-flex-item-align: start;
	    align-self: flex-start;
	border-bottom: none;
	border-left: none;
	border-top-color: #fff;
}

.l7-popup-anchor-bottom-right .l7-popup-tip {
	-webkit-align-self: flex-end;
	-ms-flex-item-align: end;
	    align-self: flex-end;
	border-bottom: none;
	border-right: none;
	border-top-color: #fff;
}

.l7-popup-anchor-left .l7-popup-tip {
	-webkit-align-self: center;
	-ms-flex-item-align: center;
	    align-self: center;
	border-left: none;
	border-right-color: #fff;
}

.l7-popup-anchor-right .l7-popup-tip {
	-webkit-align-self: center;
	-ms-flex-item-align: center;
	    align-self: center;
	border-right: none;
	border-left-color: #fff;
}

.l7-popup-close-button {
	position: absolute;
	right: 0;
	top: 0;
	border: 0;
	padding: 0;
	font-size: 25px;
	line-height: 20px;
	border-radius: 0 3px 0 0;
	cursor: pointer;
	background-color: transparent;
}

.l7-popup-close-button:hover {
	background-color: rgba(0, 0, 0, 0.05);
}

.l7-popup-content {
	position: relative;
	background: #fff;
	border-radius: 3px;
	-webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
	        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
	padding: 10px 10px 15px;
	pointer-events: auto;
}

.l7-popup-anchor-top-left .l7-popup-content {
	border-top-left-radius: 0;
}

.l7-popup-anchor-top-right .l7-popup-content {
	border-top-right-radius: 0;
}

.l7-popup-anchor-bottom-left .l7-popup-content {
	border-bottom-left-radius: 0;
}

.l7-popup-anchor-bottom-right .l7-popup-content {
	border-bottom-right-radius: 0;
}

.l7-popup-track-pointer {
	display: none;
}

.l7-popup-track-pointer * {
	pointer-events: none;
	-webkit-user-select: none;
	   -moz-user-select: none;
	    -ms-user-select: none;
	        user-select: none;
}

.l7-map:hover .l7-popup-track-pointer {
	display: -webkit-box;
	display: -webkit-flex;
	display: -ms-flexbox;
	display: flex;
}

.l7-map:active .l7-popup-track-pointer {
	display: none;
}


.l7-popup-close-button:hover {
  background-color: rgba(0, 0, 0, 0.05);
}

.l7-popup-content {
  position: relative;
  background: #fff;
  border-radius: 3px;
  -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
          box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  padding: 10px 10px 15px;
  pointer-events: auto;
}

/* general toolbar styles */

.l7-bar {
	-webkit-box-shadow: 0 1px 5px rgba(0,0,0,0.65);
	        box-shadow: 0 1px 5px rgba(0,0,0,0.65);
	border-radius: 4px;
	}
.l7-bar a,
.l7-bar a:hover {
	background-color: #fff;
	width: 30px;
	height: 30px;
  font-size: 20px;
	display: block;
	text-align: center;
	text-decoration: none;
	color: #8E9DAB;
	}
.l7-bar a,
.l7-control-layers-toggle {
	background-position: 50% 50%;
	background-repeat: no-repeat;
	display: block;
	}
.l7-bar a:hover {
	background-color: #f4f4f4;
	}
.l7-bar a:first-child {
	border-top-left-radius: 2px;
	border-top-right-radius: 2px;
	}
.l7-bar a:last-child {
	border-bottom-left-radius: 2px;
	border-bottom-right-radius: 2px;
	border-bottom: none;
	}
.l7-bar a.l7-disabled {
	cursor: default;
	background-color: #f4f4f4;
	color: #bbb;
	}


/* control positioning */

.l7-control-container {
	font: 12px/1.5 "Helvetica Neue", Arial, Helvetica, sans-serif;
}
.l7-control-hide {
	display: none;
}
.l7-control {
	position: relative;
	z-index: 800;
	pointer-events: visiblePainted; /* IE 9-10 doesn't have auto */
	pointer-events: auto;
	}
.l7-control {
	float: left;
	clear: both;
	}.l7-top,
  .l7-bottom {
    position: absolute;
    z-index: 1000;
    pointer-events: none;
    }
  .l7-top {
    top: 0;
    }
  .l7-right {
    right: 0;
    }
  .l7-bottom {
    bottom: 0;
    }
  .l7-left {
    left: 0;
    }

  .l7-control {
    float: left;
    clear: both;
    }
  .l7-right .l7-control {
    float: right;
    }
  .l7-top .l7-control {
    margin-top: 10px;
    }
  .l7-bottom .l7-control {
    margin-bottom: 10px;
    }
  .l7-left .l7-control {
    margin-left: 10px;
    }
  .l7-right .l7-control {
    margin-right: 10px;
    }

  /* attribution and scale controls */

.l7-control-container .l7-control-attribution {
	background: #fff;
	background: rgba(255, 255, 255, 0.7);
	margin: 0;
	}
.l7-control-attribution,
.l7-control-scale-line {
	padding: 0 5px;
  color: #333;
	}
.l7-control-attribution a {
	text-decoration: none;
	}
.l7-control-attribution a:hover {
	text-decoration: underline;
	}
.l7-container .l7-control-attribution,
.l7-container .l7-control-scale {
  font-size: 11px;
  padding: 5px 5px 2px 5px;
  background: rgba(255, 255, 255, 0.7);
	}
.l7-left .l7-control-scale {
	margin-left: 5px;
	}
.l7-bottom .l7-control-scale {
	margin-bottom: 5px;
	}
.l7-control-scale-line {
	border: 2px solid #000;
  border-top: none;
  color: #000;
	line-height: 1.1;
	padding: 2px 5px 1px;
	font-size: 11px;
	white-space: nowrap;
	overflow: hidden;
	-webkit-box-sizing: border-box;
	        box-sizing: border-box;

	background: #fff;
	}
.l7-control-scale-line:not(:first-child) {
	border-top: 2px solid #777;
	border-bottom: none;
	margin-top: -2px;
	}
.l7-control-scale-line:not(:first-child):not(:last-child) {
	border-bottom: 2px solid #777;
	}

.l7-touch .l7-control-attribution,
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
	-webkit-box-shadow: none;
	        box-shadow: none;
	}
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
	border: 2px solid rgba(0,0,0,0.2);
	background-clip: padding-box;
  }
  /*logo */

  .l7-ctrl-logo {
    background-size: 100% 100%;
    width: 89px;
    height: 16px;
    margin: 0 0 -3px -3px;
    display: -webkit-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    background-repeat: no-repeat;
    cursor: pointer;
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALIAAAAgCAYAAAHBIxK2AAAABGdBTUEAALGPC/xhBQAAIJZJREFUeAHtfAl8Tkf3/9z7PNmDRFbZSawhQcRSaqva1xCqpataqrT2UkuUUiqlaKtafe1VS1pUiypB0dIgIkpKRPZIELI/2/zO98akN48nltL3838//84nNzNzzpkzc+eee+bMOXMfxijNaMJ7LOrGO/HdYfZ8fb12gD2JJINJdR8WNHVQnRtSn7hilpz0u2DMKaEcFhZmhdzLNbiPyNVlwPxcm4Qh93Fr0gO4Ol5hfqiz6Q14G+QzGpYzQ9nXrUl7X/fgbrXdG3skX7m26+bNW2fQqJ5XmCs6RQKd6EQwB0zgtKgsvCidGF+N8wV/SBLqSKnXzx2WKIHw1xNxq2xtrKsBXqgrbePt1rivJFmloa5OoD129NcVQwa9Phxwaflw3ifvHCus1YIVjW7fwEF66dIhdYO/XV7Qk+9HY/5F7RA+w0G5TdRxq7gw10FBPWwA+3r9jpkYGcoJ5/7YiFxMiYCjLspsekOeCiJ1AhJJNER+8rfTX/j4BNcUMNCLMmhF+wC3cE9RZmMd/0IQjeTtGdwJjURD5EajsRQN1EwEHjAkUVce2LLhnKf8xGId3ZhkX4uxmj7MMKqJz0ZmMr3MJNZBmphV8WDBOCCgo+2QiE7DF3005wvU75e8vMLs4+P3HwwN7do5MzOu2NcjpPHRX/csCqjt2wvtxEAy8xJ3o+7j3jjkcurpn2xtrT0EPiS0oQPKSOfi/ygqL9H/qNbls8EXuer4+65xUa149QnBvGYFgapAN21EZ+pnuH3rrrnKdNA/zCRmjoqGzu36RoL21q38BLAAjRgo6iir63g1QAOcOoU27DAgwKtpPzVMKU+qBWIuve3Jx0zw4j/eQ0CASeNnjUi5mrYH72ZxUfFV0emJ479/BvrM9KxDAgZZEjziTp1d8+pL415sEdJloIAhF7QCZmnQoCkuLkkXNPfkozU8b4wVb30P4i4ADNQ41P08mtSBogHc27Vx70CPEHeUgRNwgUOuTqBR8wwODraGSIkrKipKxqVuI300mntri1jz9OOs0IHeHUdvms2t0iG+vn5nxmnan5QeUff6GGWttpidSjvGbCSZJdAAGTMwtjWSH2G5XrOp3oEv9wuWxqdeUPchZkW8OGqcedmcdujgUcMOH/zltmgL2YW2Fu22fbMz6q2xM+IEvmvHiCGyRq7AK3QLe959+T6v46co0uVBisLk0/9SqIIhcnQiVBPqULJ4dPVd2ypLg6Dx8wxuhAGDHrCOHTtqUfZ2b6KsYYIOuUiXL1/dKW4SMJRxkbbpG9nv5ecVutlt+PSoNvw7VPg8V4X5wqf4YQVp9g+NDQZDITr2cm/8lNIGlbvp+edGD/946eqJqOKmoBJRhjyjrclk0qlZAqeumw8YOEwE6ILdgh0raN9pcHeWx9n3mViPh9IKnlmBVBWI4bfoePDAEcOGPz9WWUDBzMe1cUdft5CnUfb2DvFR8rsz2avrkOdmT18wJisz5zDaqthVWjwAtzRgtBF9VbSdVofXIPWmB2CCouYqUBUFH59QbwwEqg0XykAi96/VuCEetRrm59msEfA+nqEtAUeqNEt324JGJEsDxpMi26gnaCpUxqJk6bahkGFp3akrZO8IBurcVGponpGW+VOdQP++uIAznzE1/cBBvRRZTc+OP0miUBJ78OiyxNxE6uX+KSP3vDIZuEE/z9BgWZZtHHj1oxZbkS6uJFNqIn+SWSy1AubjFtLd171xoHrQooyFQJRB7+0eHBrk2cxNtBW5mgYwoYNFXg5r7CvoFXWxajQ3mjiTc84wVkB2kTWt5NYk3lZ02SCvzphDDVrNZOY2p3mdA0wrhQoGSm5ig6SRyTsqwSxUaMKk+t4tXJIy4/IsoP82yNu7pYusKwk2WdslZmScvGHOyNs1tJ5GNrjVaeT2W2xsLCnuv5J6woQq/QtbXoLCMJqYtbWj208pKbGK4aamgWJR19XlCvpFEdxn6SDOl0byAjXB/cp8rlM/PteZ83k1T92PTuAw0Ly8GychmosWLB/v7xFSW+AeJQ/0auyLiYFEBgQ0dYKdDRsJfFOvpe0V76fgCVrgkNQTao63hAONr2vjFtAFltoTTFLzB415Al7RFdNipHRviWlLbzCHhZ05HxfEy9e7T/zX8FV+XLk+96e8Tl0xOJZfOpjdKp4kzboZXgGrouDj1rTunHnTQl1caoZ/unLNlKnTx32sNxobR0ZGakQTDCY8tEtEkG+LfihDg+NC2ccjpBXoyMTqVaLjTaFLduxe219XqH+67HYGKU5D0pbN30X5+vl0a9m6mZOPTxvFUIayPRAbM1RpS1uztp0a/SD6e9hcYlKVqgi7QEg/DAyRsAUsKSlNLyvT56Bs8e2Ias4LZzfnfEowJyOOVocZDs9jt8YnMDvUZzblZ+jis1rwtqg/KMHgwEThCUOCUS64U/An6iiL9oIGcFjwqMOQQB0JdTyEXd/tfR/1rMzsWCrPBxwPCxJMfJMELVYq0KO+fNkXk6CHRV/qXPSLXA0XZejpqiRZ0IgcY7hzu+AS2TB3quInaNnU2vzSlNqcT/fhHSqAVJgawAunEXxCPU4W9MMlcRN0ryZMAl2XcOHm6YlnYgMAToIOuxks+YBBErGrAa0YtKDDDkeYAaBFErjSUl2uKOfm5v1GE9y1nOLe/4IO+b3YchfKw0wy3lZ6m2arxyr4KV4RURH54qtS/fGufEMZZ7Hja/Ko0ptsgYML0+kKGM+4wbTbmGQUtPfLMfBrWWc3gIZenX4aJmUp9OQdqunk4nv2QmzMus0rO730wtj0qu2DqnuQjCYbrOjYrINq5JuRe/CKQp3QtRMweivm0yur+FBQf9xk6WFQX99Tvw2GDO0390jssWXW1vKf6n4q7Dc1EOXledJwQxF7RV/EomQbptMXssJlNyT5YSe4dq1m/s907eik1WprNKjdur9sW/1AWt7535Ur6/zvN2/lpcds/37eM892mEgTXGHuHD1y4qLRYK0YvrJsMly5knKu0tg0csmObbvfC2/ZbETK9bOnW4TU7xtGEw0a2geZbKysz/Xu9txQvV6fX6VOrMTw/hVsdF8b/tbGgX1feqF1m7Bq5hda+/o+pVgXm9Ztmzk0ctTBlMyEi/fnaoZ9g3HH1xmv5GgwI/m3+oAZUOzkj4fx7rQBt7qdxnhJDiuj/YlBe9dG1pLNbF9D8c2dem2xVMA3NQhjBk6WMyVaelmZVaL0+vmcB/Tz/zVa+8lIPlWW2SLMQh559ZSNCE2sbCq/FBuLyrrbLJVHsYZMr/sdfpiKJOv1pOxtyISp0tQRtHXqhNWQZffSy5d/LBOwJ5H71mrcAnzSSA2Z84ObJPlCbiujSZubkRefZI5X61hL5pavbzMvY4kuTCuzm6nXE4+Ztwf/lBRmcW1zcSkwxsXF6bWmEnbQSPJsoqWMZumwUqYC7QCVi3Y6tMmnCZdYDItiJezj0v3MaLJmRmXX58w0zKJ3w3ww2IwE+fk7JSUll9b2Crl4NfPcJXOav1OH7fyfdSs6cS7zl18Y65GRd36Pmk/S+dwex0/tHTN54pxNJ0/I2tTsM5WccqDFQgn9rW4nyphg4J95ut9gZis7p6Ym3BI4L9eQ+sS/ntrbLXDIE8/fLKaHVP7goyN5whKyKKMHcsWboSasqsznORfSRYEaz3v29uZt4JiDxMC8QVJLjzntg+ow+dBe7BhRJ1MwQ/AVkRbwQbBj7OtTXgVu49qt79LDrW/OX4yrqjEJ/OIPVrwlfM2CB/rW6XQ3wd9SgjsM41SsC9pLt+H0AptK2fdRjFdYHHwdhY0QOsL1VZDimkIHfLLD8xThcmCF+p3SjOxc0WlV+Zervm2x68dN/QQ+MLC2DVSHqOOVw6ZFXDRgCXjUBQ1y7Py+3bO+HyQLO0bArGV2auRrkxRv1orPPgjXF6XVARxJz0vCPvz4vbkoT50899yTenvAD0ljLx0L8Gr2Et4C9XXnTkEiecNKv/xiU/q1nHNXlQmN2iYVlpWwL0qLmSR3ZNFgQCpCogXuLDMa45WrTH8AcCVpTL8Q7ChbVDhAgO6XmwwGj7AWoa9lZ+UcBt3ufZvn6Ar0bUSbP/+42cJQ7NhbNjj3ybpW2p0G3LtP966DUIYk0TbZDr4Kk9Ho7lXLw1+0g6qo6Wtz8+f9sfmARQzqPZNWiCCBJ/NLtrOz9SkoKPxDlmT1SiJIHiuH6oAeF5e1o9XRGjWqa6pXrxbcqlm3YY7Wtifu6WDeU1xHF59an1cDki9wm8nnU7h3AV0fergDNrsln0+BtKUoP0yizYJr/57DhuJ1wnY5/mziepTVr6e3R0hrsbPLyck7BrxIZO/eAi2uuwE4I3Aok5rIAtzPPbjtxQuXtgCOOtQTwkqrPvlqMmBd2vcfDGeSpfGCXrS7H96SujCnBy+oj6LComSoEoGvUA0A6EvZ8DLaO9nYsUOoSzNy57Oi4mJyBu2SpuRcj2rGvZievUsRgleBf5gk6cpabd62egFoaYtr6NFl8DaUoz96LzTAq0kDlNWppLhE2UTg9Tuf8MdG2sw4DRjQU9H7e3b/FE2vomLoU3nJjm92rYSEwoXZuX3EJvDZsWtdz/+sjGlqMJqCXx/90jzALlz4syQl5awi7aj/EwnxPfC1srJy7ti232Sb6jZHRT+VJvm909I3pjKWayxjYdODeLkO1hnC2OLC/mhQWsJO6UvInCtjHQWDB+XKK2tvF3Dq5JkvVR4t/tzwiHk6namuefunwruvEq9ft86RW4Ef9sqQcK2WXRkzYtKBgtsFGYCNHjHpt3enzd+cnpvwo8pHbKQd2Wg9M3qDhjz9tqd+O7tao2XZqP+TKf8Ga3vyzP630EdGRpY+OTnutuiv0iQDqDOxVgaaSDLpjqMuResukoXHpwTw7jT5XnQlfHBBOgPcgxIiEqu+jG4NuoYN63a4mHzio0vJvy7Blhcwa2srWW0NAFZVgh0uaTSKj0LQYFERZVmy+WP1Z2uno25vZyd/tX5FO5T79x72faoF+xm4J5m4geLOPl7PHPvl1CeyLF1T875nkpdckq7qdOwIqY4aEz35i+XEXCYJ30MXs7dnSghSzaSqMunN2n36dZsBfG7uzYt3r0vpaVm/AHbkxJ4xJYWpD80PbapK6bmnL8+dvURRJXsPbXu5W49OU6n/ItA/zEapKr4PA8fC7OVVS1EXgwe8sq9Nh4aJ6nYWdyrFmayLvQsrIwleF8n4Jk9ntlCvo00gZ6ujE6UHBujQAZw2ZY52Cv8fvj/wwahXJu6VGFdu2sh4rdTs+M6+fl7dSAI+kTS0yfkbCWEndbhJIzPdjRu3TgcGBijqbcHc6Km21iz+b7C22KTEaGxFi1slHDyLsrGgKHr5kvYCsW3btkpeynskGYSrmaQnvTufLubhyL6WDGwK0zH9ypvSKMHoQXmuoaztz0diJoHu9VfePp6el3BYeOGstVYJ0Ys/VSR81OjhPmQqKAvbg3hqZNOd9PTsZNAt/3Rhi+5dW/cmy6SzaGfv7HS817NDlUUWsFWfrU9LzkxMFfjHyadMe3MZ7HPzCwJjMnK/8JbNI6rib1GSQfxpoTT7TRs+mYzLSJJoWkTYsKqYWIIbTNzWuaZTA0iWOT4l+2zKxx99fpXCUKxXv+5hn6/akP7n5eRztbw9O5rToi7cnx5+0rWIvi/uSU4/M2BgZJ/ZAwb2KiO9HynaXLp0rIAkTZeff/tc7MFju2Qm0T7r8RPcnJa43MjL1+PtocUif8SrE2ZkpWWX0Tmbex4q5q/KNFLLO8mcHSTXRc7nRsmzSkILCOzWsJkAypLjBXE4U+mdtmSCGclC+AEbC8US0Wh+u5Jz7jraIWREYfRGuJG064n7AAvxCHHIMxorpLcac4q9lHesYjLRb06qrgtZMoVpuecqzCi0tZRg2wq4pXEiKCDwlnIRMMD9WFvrjGqrwhK9RRj5kp+bwLgS37NI8C/wgTOgSPLyV7ibxoa9Rp7kV8nrVo1E3qSjJSr/CuNlBUxHTswSZmLFkhWTtLSGUqSEjO7yXEN1DZW1FBuQrQllxzK5FVuTc5HtnnOIwlRf1X6Waa1GM24KoNGQT69SkpiGFtIyYwwrMK1jb1+9/U9bApV6/7fyxGYAwewzZ1IdiosNBvF2PzHmD8FIWfcoKPIV7ZZ7Q8rImmJGPWPpR0jqdMxEAs5IgEkWCUm6mf6YRITIOXIFUC6heCvIyguhPIR5s1PE9TYrMixlWkM9ZqRwC2jLkywKSm4tPc005KKeOxe+qb+oKhE9fAUOvLLi0ubYH6AVNpoaLU++lnWezs8/OLbw8D09GUp8HkB7wHCEEwVHjBkOxqvX7x906kgOzMvn89qZWLm7SbSXmXwnqLHLMdVmWKAq5eolSY2wtDyp8aIcFNSqekl+Uftjhy5IbduGV0tKulrCdMEGrcRupeYm/iLoLOXkMpJqe4fUN+hZHRM3keQ9Wip3IGiSEIupmLjooXwByeoUA2daCrSw4nx2Kucye86qhJUq7MUKSznt+SqSHcq0KAqY1okZxqySrlcQUIEvJ7e+RDocW2JdmR3T8K0UT2lOwk1viKQnh2oUuaIqrFt120ct4ySGwaALHDPuVb8ZM9+OxjlFOh95oGXzrsvpxk2e/jb7ERB6VL6PQw9hS79427lUqzOOGBGZj5i64IcPYUp1paHDXxzs+UH07NUCvnrVumlzZ334h0ajuZqWc+68gKtz+Bq//CSmq4kbrRL/PDbPyalGKPDJySm7n27V+wtJywozshMPqduYl4Ugw/oHDm455A8ryDjEhp3CkV+/HxEYGKC0/XDRyreXLVmVbKeyE8HTPOE0DNmONhS3Gu0f4NPTHP+gOj7JGRwx4icYzRU7kUlfSzMW9+PJJMTLS03MztqahXs1YuuK8tmAqFgp70FM74eXxpeHTvhkR3eKY2wic6K5YmRoWBE51UdI825tuV/7h8Uh1qQzFAf26vusy8zZE1eKdt6+Xl1ooovbt+795fVUXRuC03rzzyecisZBYwoCsvETRgbcupFfunrl1mwSHtIW7EpqduKF5My4VBIG9w3rt7L+g3qtggsRI3t91IvzNq7d/sKVK1drk8bOtaSZ16zc3pw0sdV332/sLYSYzofd7tdj+H/Aw1O2/S0DhX8wlWvFv7eI0jpJqs1gs33brv09ej6TT7wqFKulIbt7utalw5RKxJwO4+yCEGMDFdjILbFCkNFw6k7py0XP8qu0Fm8nl4UTcW1nY81ORHXjPaL2SZcFcxq2xNbUXsSstB0oiCbA5TkWCCMvYQbda9KotCuVkCbTQGYyNCFb3ESh72wmayOlRbePV6L5m5UAOh+sK8wNh4tzxaeLF99lY6KjunGuri7h0BZf/GfZBfhQfDyaNEnPSUgw70o5bm8yuZrDUcdSTXftYL4EaiT5tobZJqXknsq+p52e+wB28vT+cfQyPYtyxOA+nw/oPXwPyiKl5ibE+Xs06UJb9x/OJB4OdXd3aUMmkPX2XWsnNAvu8EGZJDWhZfi62izyouPDRh2v9cabr/iGt2o6UvCa9c7CqfQFo0Gy0ZyJyyg/uiZw/0SuNocelX9qbvwv8F5+suxzv6VLPo211J6EvRZWnCXL5jUb+sKAoaDBh5SYKzyT1JxzRzAvlQQZRNN+kn6Oepq3JXn8gar+JKZBRPQbffnSJ+qEpAgdCTjnt/UbGCt7jkq+lbZwVmQqGPlcaVJWhRBHPcXd6ciG29xDbOecNtIGCm3VkKJLnqiy0JfcbIvxxx7fOc7Gxkpx6G3ZEDNn1rsLEy5cOb6GIkIuPXt3eef5FwaO3LxpByNteTM9Pb7yGO7az7+fPTBR+Km2bIyZPWPa/Pi1m1b0b0FONnt7Oz/0g0Su6oLLSVd+GP/G9G9154uLtZL2lsnGPo6XFjyDB0wx33JCC/8NBoavKQKBogB8noskH89jxs5dOw78MC7h5/VkUjiSQD+1fvPKDi8+/+ZhX0/lawzl5bv70jZ1dHTQTJ0xfr5gv+/HQ4vXr/smC/GC9Ixz6QL+T+aPo5ExrvT0E/BwX7I0RoR9TSajFebgmWc7TgINjk6OG/POKVnLctKzE06SECtNK2+67nKLOipdIEEOp7jI73QKg+lKWE3aDB56N5wPuUvCpInpCazEEM7yS86wQloh7tBVXFLEbpa8REL8fjkdl2Y158NItDOp/XnZimXM/ZW3lJY+WSH2dwttRt5o+6+3r+6C4A/6Tkq6EjNp4uz44pIS05wZi94V4164ZNYSN1cXKyz54hyowFnK+0X0GJGccXpneKuwQRcvJB3YvXPfAgSX6CPVeBK2avUb1huy79COLecuHp1Dx5fgU+wCId70zapnhNdZaGPwb9mq2SgBRx45uK87p1Xgjh3NjrV0FmHm92YtnirGggfYp09XV5PRFIBNIeDGohstke/9edtrCNmifC0l/YdXXxz3Cxy76dfPVz4DC4L/sYQvkhFh+HT1h62EEP+45+dFEGJ8xp6enXhSfUsWBRkEM45KubIDe5qE+DsE9XSlNM2lbMv0YP4OxaJIzsm+ePd6DivMb8vu6GKYviyJFRq7Se/d+hq4KMa104PZLBLgDXRiRkPhbU5h7s03PNgx4J9UCvBsGqDnBh/YoO07PDUefEtLyzK7tI9Yh80dQtTr1m7JPHL4+HLg6GxB9f2Hy0M1CNtg5wx4VUnWaO1bNn12YJBfizf69hr+5Zujpqx5PnLUp43rtZvVtFHHCBFAdHFxDlu28v1w8JEljf6FIaN/FseJ8DGe4I9wvYAj37Z113XZVnsaZxUyM8+nkYJJw5Gjn386/JFos3Tl+3NQ1nMpDB/aGbmpxkfL329Wu46fcqiD7je7U9u+n0M72jr5nhDt/ldzH7fgIJOJ+0+aNjaw34AeihI6ezph7YiX3zpGk3sjI/fsWfN7q1KQQUibvNIF51kECfMysmuNlFPUjy2sHchWvhzAyXNM9aWshDTsQOmD0vrShwWKkI704vZFddkXRDuXhJgsELKYS9n7CxKkF1b8KNFr8WQS3Gw6g74JztRNeefNDwXXyeNnzSIBI88gl40GpkRyhg4aeeD69RvKQ8aSHbNrfS+Exvy8yn9OQ7Q1z2kCd+D8BDZnGdcTTqTmJCTjRKgky3nQntezc0+JNl7etRT7WqM1XcOuX9ZoKnlvBB1yrdb6CmhwqU2cjNzEs/A2vPj82Nj0tMz9oLWzt/Pfd3DbYNjntJmr06x5Ywf6ZEIRbuBHvz5lWplOp7jrnvRxZPD/byZ8IE0u3IZ16wbaTpw8Zgn6pjBiQq9uQ2Po6/SyjJwEiy/qfQW5/AYkvviyNIEEcgIFqstweou07GgXA4sZ6cxrlNP89X9MDe7sILM9JK4v60CrYyUlejZy0Z/SrL+oHr8EB7w4q7hr78ZZcLMJritXL16jXr5FGZsoQdOqTfNRM2ZNrGvU81pVfXUGWnoZlN2seqOl8PgH/dFWtm4noF07te33KX0GmIv+GjdpOIzs4SCUN2xZ9Q5lyrPbuuW7uT/tPXjLykq6bMmzAfr/pVQs3WmG8W785rMRlCkr//w50eWrKWPx9zyHuzenvZs/MItOl1a85cGvajjbpJNYdYpd97C3YkfH2fGeK0qkdDCg3x4JoI3fXknH6hMNRnFLx9igZTnSwQd28IgExw9fpO9PTVbQVOR6CkFzslvP0pI/+36scLwRp+9A88a4Vxbt2bV3WHz8hUb0uzm3yn9i4H6tVbgHmCQqykcuptBX2/6uYXFk37d4+413pn62Jvo/YPLm+Nfmt+/QZouzs5PiL066dHnrhHEz4xB8QLDnkTv6hxuQtyWAPESKXV9VV5JReyM193QWBNTXlT4Y4boaeGF9fL26og3cbF9vjsmRtdqcq9nxVX6R9NCCDKYf50jfv+3EO5gYHYbjzItATZg1OzVG5t3IFrWmjeGPpL9cCQ8HXYpGw3rQB38XUX2SCd8ilOmMrouXzAmBpgJvsnUNg/u/shBlnMC2dD7Wzy24HTaAzVuFxtSrFxhBk6fd+u1X8+rXaT2Jlcmt6ZzVHQMYPKEk0SecYEVnd/WCpZNzjZoKjII28FrgvK9tDftjly//dkfQIL+WF5dF9nDyrl37WLeYZ+b3j+g5kzaX9s2aN3kV+OLC4iud2vXfiMMqdYJdfk2NBfT/jfTc0P49unXrVKXQiVEWFhUXvT12xgHaK+jpxf3doNH7IUjWf0DPZwXNvh8OHkFZMsiKshRw8/yRBBmNl+VLZ0fb8ZayzH4krdyEnpQnudbiKRxMAbry9Y5gJwnfOzpfUpZF804fp46dOwlxvY5dnnZ64aVIRbOC39ovN8/GAW9ZsrpoSYhBU82dnczPkbpiI5iUcrK1ra2Nl2M1x7oHf/lueOd2/TeYmEnxAID2iSSDdQbZVp6ff7J214IPZ3YnnnLdunUiyNSJuMvfSC/fi8eOnepAp6EOnss5Rydc/kp0EDORfuXOZeyoqSeDmzSIQVtg8Q3K4IGvzkSZW9vd87sdgP+3Ejw05n3hFxroMgffU6f7KBs4uM8fy5euTjFKRkf6ks4FRJ61PJojL7hTePH99z5Kwsuael3R2gBbTPcMwiKVBeBkxh0KtGw7mQ/dhbeUynihvrU2sKEr2JPb1Km7h238a+ylp4zc6IRNXsdObV3JTswqKCw0kUeCNmLxiWp68zLOBpTeLm5LGydt377dXJycnazhewUd/K/YLZPmk8aOf80/LSW96Ntvf8jFRGodXA5iyRf88Es5xQZda0GbkZZVtGP77ntocaKXlRW3wQOv5ugot+vUyqluUGB18CGT5hZ+jwuOfRx0FbzVOcLQaz7Z0Q6eCsDRHzayiodCI58URwXVbR6l/Lghavw6hYGZsDr/rYSNLSKQcfS7AwiOSGWF4eJewRAmRVAD59MPOjPytwUZncAN5yyzhVacDSFlbDJIbO1qkzQXuP9Gql+/bTXj7WLbUq1t4V3H+kN3q5zWOnq5Jn05Jdm6GvMTExPJnC9PCDgYC2/X1Mp6o38j1xv3m0Q1LT5wu985DghlzGcxdqUaKzvSRpLJXtaFhdUpND8mLsZhKQcPuhSTxRL+UWFCkM3bPexZC/N2/9b/nYF/Z+AxZuD/AA8zEhkTLyOGAAAAAElFTkSuQmCC');
}


	/* layers control */

.l7-control-layers {
	-webkit-box-shadow: 0 1px 8px rgba(0,0,0,0.4);
	        box-shadow: 0 1px 8px rgba(0,0,0,0.4);
	background: #fff;
	border-radius: 2px;
	}
.l7-control-layers-toggle {
	background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAkCAYAAAGf7Ah0AAAABGdBTUEAALGPC/xhBQAABzdJREFUWAnVV3lslEUUn/l2F0tpwdAih1HEqCReDcphNCo1EkgFkXa5PNpuC0Fo2e7Wgko8KiaKWrvbK5672xYFpNtiRRuNiY0aURA14BGviBcVlaKltVa6+42/N9v5Mrtt05rwj/PHzjt+8743b+a9N8vYwKgMNlUQyemnMtAkaJajvb3dToQSGp8e6boopkr4VYgEMYwO0vhCTfMVzBcMf8bx086YyODcuM80zTqp9IWat+7evW8sMdIxIqqCLa6oiAaJpuEtcBqcc2HEWMZ0JclgZR/Nchf++ubrzKjJSguXS4tVjXvPjfb3/UAAacGTn/MOMb7QnjNpNqP/bKZ50Ai0tqYmCi0n4zbM+W+lBc7JBOa+QPhDwcTsxJXE2+32edKCL9h8hRDmRzpIOWydAylhrcMfDN+ugBRKSdP3KwPhsFJIPth02FISIYQwYsDYcVfWhy/Bon4JgumffMGmiGTwQ0B/sHml4q2ZFAD3WQIQVhx0IdFw8B189lolN+w8w5PnjPmlhJgtA8/vfn3iye7u3yGzDljDxZEG4097Cp3rSSjBtMHunp6vFR+HHoIxmbgTe1xHKssDHecLNFUjMzbqMs5ZlHF7ute17M84+TMHDzr+OvR9JwKdCms9yRkzJq6bPTsWXh05QOPUN+PUHyPWMPhm6UHd7vaUohWZPSRE8OqxpTyibQa/qcTlbEP0vwF7AWUAT3JM9dy69FfSNza+MU4awNE8iQtXSkJuGLleV852ov2h5jkwVof0mUs8aO4LhTuYYFOAjExId0wcFIPahpaLTkWiX9ECfHG/sLNi1i8+HODfgLFFRI96+INNi0cNTgTS1obKQh03aAuk9DeELzcj4pACYivvwvXrFK/PcQZiQWo+hmidpYMUjQC7EOB6xdNsGfAHwk/RDdOVw9Dm+NTUSWtWLDohDVQ37JkbiUT2DwMeVswZP+gtdM4x3HnLDhjcGM2XLWOISaenIGee9MCSgqgMht/H/q/SZYk0qviV3oKcj5XcioESyOoqIseFYDYloxnAGm/hcrcuk3JV2XBMl+pKqn6mENux11+w12m6jpqMMFn7rPPTHdwfCm8yTfG4tMaNu+GepPUFiqbM7T105ARSPQU+dY/LOC/N2gI65WEkyWUEtjmSppfkLvlRLaQ5VnZFDtGGzbheNRROKZmbu/AvUvh3tE4Wff2/0IUC+y2q+4VVoXBW1BSvkR7Rb8BW84lWJQBdlGozcs7GLy3Nd35OSqTxBqtfgkc1+sPjcqbDgEl6xK0dH5lv545LOCVL1/F+3CoY4eyY1+WcBiC2KYEHQBd5XDkyndE17xCm2Ug6BLcSwb3LigE1AlOYu6TS4HUwVEw0Df1osfBnLDwnpiFDCQPuvQ73Fkqxg8/hEVYLXt66MXbbzOK8bKre1hhkgDT0RDja3fEHytwZxCMLH0YWPkD0fxqjqUZDejDSV3z1LbexqPkEPJxKWLqtKOGbvPnZL460NlE/KgfkIZiRrfjShsQcG2QQDUwwXjcuZcID61Ys6ErUJ/LDOiCfLUzUjVQdEg0O4jn/ABEq0iuIjrEcwE0x/KGWNbjPj4BO00Gni0ZOoIPzLR5X9vMqqaQDqDzzENra4V5zp8sBZQcROYjsLvYUOPdbEVBKeiZ193QjCmwtZCM+ldS6EWYTH3wuNSV1i+pFCj/IAaWgGUfBq0N78qPM3DZcp9TxcTQeyzZm3ON2LatXpSlOP8BIB6qDLddHmHnFrBlpNZmZmdZbNXEB9XsRlZXFennqGHzoXW5DaId4iSoc/Q365EjnRjszPnYXZL9NDWUtGsqzCjAw7xprTypbn7fkaILcYqkInzzeX06C8emO8sKlS7stZQLxVMPes/+O9FVAvEpXob+utY6gZmfrtMjf/RUI+2odhF7wJbq+Gzf3zTj5CAwyaoEwozVoCzN1KKK00z7WUbZx9dIOklsO6CAZpu87i5gpHoJ8gtLh9vZixSO2KckV7qysf5Sc5uq2tjOix3rL0FW3IJuSNV0XM/iDs85LqxvqeKUD8n3LxUobt5WVuLJlS9IM4O9i09VRwWtxLWfpcix+hXjs8mZdjn19YuOiuKRgufzXqOuqQi2r8O+yAk/tl2Q/RMW7ETe8UdX1GJhHDM5qjDHJ5e7bs07qBp7ZsTe9t6/vUXykkLKEdLFbLgLJSUn3rrt1yXEdX/1C23jzVG+5Keg/B5r2wJD9g/NcaUAJq4MvXxxl/TWoATcoGc0Av4eUKnIXZlsvXpLHO0CS2KgOtGQgdeuwqWuUjGbUgrdszLHRXXDLF0oe54AS0kyPnc5Iz/2CmV7EeIzSwcjvsHQPXkUhld/kCP6Xu+DRNjg/SWHh+SnODF+aPeVh9XCydAPEsA4kAqsCzcuiTPiw7+maTj6SwGsVk/9gY9xbUpizR8MNS47aAd0C7s35CG8VdrxYyjl/FcdUgo73nY77X9D/Au9RDMh+aBoVAAAAAElFTkSuQmCC');
	width: 30px;
  height: 30px;
  background-size: 20px 20px;
	}

.l7-touch .l7-control-layers-toggle {
	width: 44px;
	height: 44px;
	}
.l7-control-layers .l7-control-layers-list,
.l7-control-layers-expanded .l7-control-layers-toggle {
	display: none;
	}
.l7-control-layers-expanded .l7-control-layers-list {
	display: block;
	position: relative;
	}
.l7-control-layers-expanded {
	padding: 6px 10px 6px 6px;
	color: #59626B;
	background: #fff;
	}
.l7-control-layers-scrollbar {
	overflow-y: scroll;
	overflow-x: hidden;
	padding-right: 5px;
	}
.l7-control-layers-selector {
	margin-top: 2px;
	position: relative;
	top: 1px;
	}
.l7-control-layers label {
  display: block;
  padding: 8px;
  }
  .l7-control-layers label input[type="radio"],
  .l7-control-layers label input[type="checkbox"] {
  width: 14px;
  height: 14px;
  margin: 0;
}
.l7-control-layers-separator {
	height: 0;
	border-top: 1px solid #D8D8D8;
	margin: 5px -10px 5px -6px;
}
.mapboxgl-ctrl-logo {
  display: none !important;
 }
 .amap-logo{
  display: none !important;
 }


`)},kPKH:function(Se,ft,L){"use strict";var U=L("/kpp");ft.a=U.a},"kQ+U":function(Se,ft,L){"use strict";L.d(ft,"a",function(){return $t});var U=L("lSNA"),E=L.n(U),T=L("lwsE"),e=L.n(T),t=L("W8MJ"),l=L.n(t),s=L("k5/I"),c=L("h1nZ"),r=L("yXPU"),h=L.n(r),n=L("o0o1"),i=L.n(n),a=L("4cb6"),o=L("fbvF"),u=L.n(o),f=function(){function Pe(me,le){e()(this,Pe),this.attribute=void 0,this.buffer=void 0;var be=le.buffer,ze=le.offset,Xe=le.stride,_n=le.normalized,Kn=le.size,Hn=le.divisor;this.buffer=be,this.attribute={buffer:be.get(),offset:ze||0,stride:Xe||0,normalized:_n||!1,divisor:Hn||0},Kn&&(this.attribute.size=Kn)}return l()(Pe,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(le){this.buffer.subData(le)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),Pe}(),v,b,y,g,_,M,x,m,S,P,A,O,R,W,F=(v={},E()(v,c.gl.POINTS,"points"),E()(v,c.gl.LINES,"lines"),E()(v,c.gl.LINE_LOOP,"line loop"),E()(v,c.gl.LINE_STRIP,"line strip"),E()(v,c.gl.TRIANGLES,"triangles"),E()(v,c.gl.TRIANGLE_FAN,"triangle fan"),E()(v,c.gl.TRIANGLE_STRIP,"triangle strip"),v),Z=(b={},E()(b,c.gl.STATIC_DRAW,"static"),E()(b,c.gl.DYNAMIC_DRAW,"dynamic"),E()(b,c.gl.STREAM_DRAW,"stream"),b),V=(y={},E()(y,c.gl.BYTE,"int8"),E()(y,c.gl.UNSIGNED_INT,"int16"),E()(y,c.gl.INT,"int32"),E()(y,c.gl.UNSIGNED_BYTE,"uint8"),E()(y,c.gl.UNSIGNED_SHORT,"uint16"),E()(y,c.gl.UNSIGNED_INT,"uint32"),E()(y,c.gl.FLOAT,"float"),y),k=(g={},E()(g,c.gl.ALPHA,"alpha"),E()(g,c.gl.LUMINANCE,"luminance"),E()(g,c.gl.LUMINANCE_ALPHA,"luminance alpha"),E()(g,c.gl.RGB,"rgb"),E()(g,c.gl.RGBA,"rgba"),E()(g,c.gl.RGBA4,"rgba4"),E()(g,c.gl.RGB5_A1,"rgb5 a1"),E()(g,c.gl.RGB565,"rgb565"),E()(g,c.gl.DEPTH_COMPONENT,"depth"),E()(g,c.gl.DEPTH_STENCIL,"depth stencil"),g),Y=(_={},E()(_,c.gl.DONT_CARE,"dont care"),E()(_,c.gl.NICEST,"nice"),E()(_,c.gl.FASTEST,"fast"),_),K=(M={},E()(M,c.gl.NEAREST,"nearest"),E()(M,c.gl.LINEAR,"linear"),E()(M,c.gl.LINEAR_MIPMAP_LINEAR,"mipmap"),E()(M,c.gl.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),E()(M,c.gl.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),E()(M,c.gl.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),M),it=(x={},E()(x,c.gl.REPEAT,"repeat"),E()(x,c.gl.CLAMP_TO_EDGE,"clamp"),E()(x,c.gl.MIRRORED_REPEAT,"mirror"),x),ct=(m={},E()(m,c.gl.NONE,"none"),E()(m,c.gl.BROWSER_DEFAULT_WEBGL,"browser"),m),ht=(S={},E()(S,c.gl.NEVER,"never"),E()(S,c.gl.ALWAYS,"always"),E()(S,c.gl.LESS,"less"),E()(S,c.gl.LEQUAL,"lequal"),E()(S,c.gl.GREATER,"greater"),E()(S,c.gl.GEQUAL,"gequal"),E()(S,c.gl.EQUAL,"equal"),E()(S,c.gl.NOTEQUAL,"notequal"),S),ut=(P={},E()(P,c.gl.FUNC_ADD,"add"),E()(P,c.gl.MIN_EXT,"min"),E()(P,c.gl.MAX_EXT,"max"),E()(P,c.gl.FUNC_SUBTRACT,"subtract"),E()(P,c.gl.FUNC_REVERSE_SUBTRACT,"reverse subtract"),P),It=(A={},E()(A,c.gl.ZERO,"zero"),E()(A,c.gl.ONE,"one"),E()(A,c.gl.SRC_COLOR,"src color"),E()(A,c.gl.ONE_MINUS_SRC_COLOR,"one minus src color"),E()(A,c.gl.SRC_ALPHA,"src alpha"),E()(A,c.gl.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),E()(A,c.gl.DST_COLOR,"dst color"),E()(A,c.gl.ONE_MINUS_DST_COLOR,"one minus dst color"),E()(A,c.gl.DST_ALPHA,"dst alpha"),E()(A,c.gl.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),E()(A,c.gl.CONSTANT_COLOR,"constant color"),E()(A,c.gl.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),E()(A,c.gl.CONSTANT_ALPHA,"constant alpha"),E()(A,c.gl.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),E()(A,c.gl.SRC_ALPHA_SATURATE,"src alpha saturate"),A),Nt=(O={},E()(O,c.gl.NEVER,"never"),E()(O,c.gl.ALWAYS,"always"),E()(O,c.gl.LESS,"less"),E()(O,c.gl.LEQUAL,"lequal"),E()(O,c.gl.GREATER,"greater"),E()(O,c.gl.GEQUAL,"gequal"),E()(O,c.gl.EQUAL,"equal"),E()(O,c.gl.NOTEQUAL,"notequal"),O),Lt=(R={},E()(R,c.gl.ZERO,"zero"),E()(R,c.gl.KEEP,"keep"),E()(R,c.gl.REPLACE,"replace"),E()(R,c.gl.INVERT,"invert"),E()(R,c.gl.INCR,"increment"),E()(R,c.gl.DECR,"decrement"),E()(R,c.gl.INCR_WRAP,"increment wrap"),E()(R,c.gl.DECR_WRAP,"decrement wrap"),R),_t=(W={},E()(W,c.gl.FRONT,"front"),E()(W,c.gl.BACK,"back"),W),mt=function(){function Pe(me,le){e()(this,Pe),this.buffer=void 0;var be=le.data,ze=le.usage,Xe=le.type;this.buffer=me.buffer({data:be,usage:Z[ze||c.gl.STATIC_DRAW],type:V[Xe||c.gl.UNSIGNED_BYTE]})}return l()(Pe,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(le){var be=le.data,ze=le.offset;this.buffer.subdata(be,ze)}}]),Pe}(),At=function(){function Pe(me,le){e()(this,Pe),this.elements=void 0;var be=le.data,ze=le.usage,Xe=le.type,_n=le.count;this.elements=me.elements({data:be,usage:Z[ze||c.gl.STATIC_DRAW],type:V[Xe||c.gl.UNSIGNED_BYTE],count:_n})}return l()(Pe,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(le){var be=le.data;this.elements.subdata(be)}},{key:"destroy",value:function(){}}]),Pe}(),rt=function(){function Pe(me,le){e()(this,Pe),this.framebuffer=void 0;var be=le.width,ze=le.height,Xe=le.color,_n=le.colors,Kn=le.depth,Hn=le.stencil,nn={width:be,height:ze};Array.isArray(_n)&&(nn.colors=_n.map(function(en){return en.get()})),Xe&&typeof Xe!="boolean"&&(nn.color=Xe.get()),this.framebuffer=me.framebuffer(nn)}return l()(Pe,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(le){var be=le.width,ze=le.height;this.framebuffer.resize(be,ze)}}]),Pe}(),Mt=L("cDf5"),z=L.n(Mt),$=L("c6wG"),dt=L.n($),et=L("YO3V"),ot=L.n(et);function pt(Pe,me){var le=Object.keys(Pe);if(Object.getOwnPropertySymbols){var be=Object.getOwnPropertySymbols(Pe);me&&(be=be.filter(function(ze){return Object.getOwnPropertyDescriptor(Pe,ze).enumerable})),le.push.apply(le,be)}return le}function H(Pe){for(var me=1;me<arguments.length;me++){var le=arguments[me]!=null?arguments[me]:{};me%2?pt(Object(le),!0).forEach(function(be){E()(Pe,be,le[be])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Pe,Object.getOwnPropertyDescriptors(le)):pt(Object(le)).forEach(function(be){Object.defineProperty(Pe,be,Object.getOwnPropertyDescriptor(le,be))})}return Pe}var nt=function(){function Pe(me,le){e()(this,Pe),this.reGl=void 0,this.destroyed=!1,this.drawCommand=void 0,this.drawParams=void 0,this.options=void 0,this.uniforms={},this.reGl=me;var be=le.vs,ze=le.fs,Xe=le.attributes,_n=le.uniforms,Kn=le.primitive,Hn=le.count,nn=le.elements,en=le.depth,An=le.blend,Nn=le.stencil,hr=le.cull,fi=le.instances,Oe={};this.options=le,_n&&(this.uniforms=this.extractUniforms(_n),Object.keys(_n).forEach(function(ve){Oe[ve]=me.prop(ve)}));var Ae={};Object.keys(Xe).forEach(function(ve){Ae[ve]=Xe[ve].get()});var Jt={attributes:Ae,frag:ze,uniforms:Oe,vert:be,primitive:F[Kn===void 0?c.gl.TRIANGLES:Kn]};fi&&(Jt.instances=fi),Hn&&(Jt.count=Hn),nn&&(Jt.elements=nn.get()),this.initDepthDrawParams({depth:en},Jt),this.initBlendDrawParams({blend:An},Jt),this.initStencilDrawParams({stencil:Nn},Jt),this.initCullDrawParams({cull:hr},Jt),this.drawCommand=me(Jt),this.drawParams=Jt}return l()(Pe,[{key:"addUniforms",value:function(le){this.uniforms=H(H({},this.uniforms),this.extractUniforms(le))}},{key:"draw",value:function(le){if(!(this.drawParams.attributes&&Object.keys(this.drawParams.attributes).length===0)){var be=H(H({},this.uniforms),this.extractUniforms(le.uniforms||{})),ze={};Object.keys(be).forEach(function(Xe){var _n=z()(be[Xe]);_n==="boolean"||_n==="number"||Array.isArray(be[Xe])||be[Xe].BYTES_PER_ELEMENT?ze[Xe]=be[Xe]:ze[Xe]=be[Xe].get()}),this.drawCommand(ze)}}},{key:"destroy",value:function(){this.drawParams.elements.destroy(),this.options.attributes&&Object.values(this.options.attributes).forEach(function(le){le.destroy()}),this.destroyed=!0}},{key:"initDepthDrawParams",value:function(le,be){var ze=le.depth;ze&&(be.depth={enable:ze.enable===void 0?!0:!!ze.enable,mask:ze.mask===void 0?!0:!!ze.mask,func:ht[ze.func||c.gl.LESS],range:ze.range||[0,1]})}},{key:"initBlendDrawParams",value:function(le,be){var ze=le.blend;if(ze){var Xe=ze.enable,_n=ze.func,Kn=ze.equation,Hn=ze.color,nn=Hn===void 0?[0,0,0,0]:Hn;be.blend={enable:!!Xe,func:{srcRGB:It[_n&&_n.srcRGB||c.gl.SRC_ALPHA],srcAlpha:It[_n&&_n.srcAlpha||c.gl.SRC_ALPHA],dstRGB:It[_n&&_n.dstRGB||c.gl.ONE_MINUS_SRC_ALPHA],dstAlpha:It[_n&&_n.dstAlpha||c.gl.ONE_MINUS_SRC_ALPHA]},equation:{rgb:ut[Kn&&Kn.rgb||c.gl.FUNC_ADD],alpha:ut[Kn&&Kn.alpha||c.gl.FUNC_ADD]},color:nn}}}},{key:"initStencilDrawParams",value:function(le,be){var ze=le.stencil;if(ze){var Xe=ze.enable,_n=ze.mask,Kn=_n===void 0?-1:_n,Hn=ze.func,nn=Hn===void 0?{cmp:c.gl.ALWAYS,ref:0,mask:-1}:Hn,en=ze.opFront,An=en===void 0?{fail:c.gl.KEEP,zfail:c.gl.KEEP,zpass:c.gl.KEEP}:en,Nn=ze.opBack,hr=Nn===void 0?{fail:c.gl.KEEP,zfail:c.gl.KEEP,zpass:c.gl.KEEP}:Nn;be.stencil={enable:!!Xe,mask:Kn,func:H(H({},nn),{},{cmp:Nt[nn.cmp]}),opFront:{fail:Lt[An.fail],zfail:Lt[An.zfail],zpass:Lt[An.zpass]},opBack:{fail:Lt[hr.fail],zfail:Lt[hr.zfail],zpass:Lt[hr.zpass]}}}}},{key:"initCullDrawParams",value:function(le,be){var ze=le.cull;if(ze){var Xe=ze.enable,_n=ze.face,Kn=_n===void 0?c.gl.BACK:_n;be.cull={enable:!!Xe,face:_t[Kn]}}}},{key:"extractUniforms",value:function(le){var be=this,ze={};return Object.keys(le).forEach(function(Xe){be.extractUniformsRecursively(Xe,le[Xe],ze,"")}),ze}},{key:"extractUniformsRecursively",value:function(le,be,ze,Xe){var _n=this;if(be===null||typeof be=="number"||typeof be=="boolean"||Array.isArray(be)&&typeof be[0]=="number"||dt()(be)||be===""||"resize"in be){ze["".concat(Xe&&Xe+".").concat(le)]=be;return}ot()(be)&&Object.keys(be).forEach(function(Kn){_n.extractUniformsRecursively(Kn,be[Kn],ze,"".concat(Xe&&Xe+".").concat(le))}),Array.isArray(be)&&be.forEach(function(Kn,Hn){Object.keys(Kn).forEach(function(nn){_n.extractUniformsRecursively(nn,Kn[nn],ze,"".concat(Xe&&Xe+".").concat(le,"[").concat(Hn,"]"))})})}}]),Pe}(),at=function(){function Pe(me,le){e()(this,Pe),this.texture=void 0,this.width=void 0,this.height=void 0;var be=le.data,ze=le.type,Xe=ze===void 0?c.gl.UNSIGNED_BYTE:ze,_n=le.width,Kn=le.height,Hn=le.flipY,nn=Hn===void 0?!1:Hn,en=le.format,An=en===void 0?c.gl.RGBA:en,Nn=le.mipmap,hr=Nn===void 0?!1:Nn,fi=le.wrapS,Oe=fi===void 0?c.gl.CLAMP_TO_EDGE:fi,Ae=le.wrapT,Jt=Ae===void 0?c.gl.CLAMP_TO_EDGE:Ae,ve=le.aniso,Vt=ve===void 0?0:ve,ie=le.alignment,Ce=ie===void 0?1:ie,ue=le.premultiplyAlpha,xe=ue===void 0?!1:ue,$e=le.mag,Fn=$e===void 0?c.gl.NEAREST:$e,rr=le.min,En=rr===void 0?c.gl.NEAREST:rr,Pn=le.colorSpace,Er=Pn===void 0?c.gl.BROWSER_DEFAULT_WEBGL:Pn;this.width=_n,this.height=Kn;var Pr={width:_n,height:Kn,type:V[Xe],format:k[An],wrapS:it[Oe],wrapT:it[Jt],mag:K[Fn],min:K[En],alignment:Ce,flipY:nn,colorSpace:ct[Er],premultiplyAlpha:xe,aniso:Vt};be&&(Pr.data=be),typeof hr=="number"?Pr.mipmap=Y[hr]:typeof hr=="boolean"&&(Pr.mipmap=hr),this.texture=me.texture(Pr)}return l()(Pe,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){var le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.texture(le)}},{key:"bind",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(le){var be=le.width,ze=le.height;this.texture.resize(be,ze),this.width=be,this.height=ze}},{key:"destroy",value:function(){this.texture.destroy()}}]),Pe}(),q,Et,vt,Ft=(q=Object(a.injectable)(),q(Et=(vt=function(){function Pe(){var me=this;e()(this,Pe),this.gl=void 0,this.$container=void 0,this.canvas=void 0,this.width=void 0,this.height=void 0,this.isDirty=void 0,this.createModel=function(le){return new nt(me.gl,le)},this.createAttribute=function(le){return new f(me.gl,le)},this.createBuffer=function(le){return new mt(me.gl,le)},this.createElements=function(le){return new At(me.gl,le)},this.createTexture2D=function(le){return new at(me.gl,le)},this.createFramebuffer=function(le){return new rt(me.gl,le)},this.useFramebuffer=function(le,be){me.gl({framebuffer:le?le.get():null})(be)},this.clear=function(le){var be=le.color,ze=le.depth,Xe=le.stencil,_n=le.framebuffer,Kn=_n===void 0?null:_n,Hn={color:be,depth:ze,stencil:Xe};Hn.framebuffer=Kn===null?Kn:Kn.get(),me.gl.clear(Hn)},this.viewport=function(le){var be=le.x,ze=le.y,Xe=le.width,_n=le.height;me.gl._gl.viewport(be,ze,Xe,_n),me.width=Xe,me.height=_n,me.gl._refresh()},this.readPixels=function(le){var be=le.framebuffer,ze=le.x,Xe=le.y,_n=le.width,Kn=le.height,Hn={x:ze,y:Xe,width:_n,height:Kn};return be&&(Hn.framebuffer=be.get()),me.gl.read(Hn)},this.getViewportSize=function(){return{width:me.gl._gl.drawingBufferWidth,height:me.gl._gl.drawingBufferHeight}},this.getContainer=function(){var le;return(le=me.canvas)===null||le===void 0?void 0:le.parentElement},this.getCanvas=function(){return me.canvas},this.getGLContext=function(){return me.gl._gl},this.destroy=function(){me.gl.destroy()}}return l()(Pe,[{key:"init",value:function(){var me=h()(i.a.mark(function be(ze,Xe){var _n=this;return i.a.wrap(function(Hn){for(;;)switch(Hn.prev=Hn.next){case 0:return this.canvas=ze,Hn.next=3,new Promise(function(nn,en){u()({canvas:_n.canvas,attributes:{alpha:!0,antialias:Xe.antialias,premultipliedAlpha:!0,preserveDrawingBuffer:Xe.preserveDrawingBuffer},extensions:["OES_element_index_uint","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["oes_texture_float_linear","OES_texture_float","EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(Nn,hr){(Nn||!hr)&&en(Nn),nn(hr)}})});case 3:this.gl=Hn.sent;case 4:case"end":return Hn.stop()}},be,this)}));function le(be,ze){return me.apply(this,arguments)}return le}()},{key:"setBaseState",value:function(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!1,equation:"add"},framebuffer:null}),this.gl._refresh()}},{key:"setCustomLayerDefaults",value:function(){var le=this.getGLContext();le.disable(le.CULL_FACE)}},{key:"setDirty",value:function(le){this.isDirty=le}},{key:"getDirty",value:function(){return this.isDirty}}]),Pe}(),vt))||Et),Qt=L("Hel2");function ee(Pe,me){var le=Object.keys(Pe);if(Object.getOwnPropertySymbols){var be=Object.getOwnPropertySymbols(Pe);me&&(be=be.filter(function(ze){return Object.getOwnPropertyDescriptor(Pe,ze).enumerable})),le.push.apply(le,be)}return le}function Gt(Pe){for(var me=1;me<arguments.length;me++){var le=arguments[me]!=null?arguments[me]:{};me%2?ee(Object(le),!0).forEach(function(be){E()(Pe,be,le[be])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Pe,Object.getOwnPropertyDescriptors(le)):ee(Object(le)).forEach(function(be){Object.defineProperty(Pe,be,Object.getOwnPropertyDescriptor(le,be))})}return Pe}var $t=function(){function Pe(me){e()(this,Pe),this.sceneService=void 0,this.mapService=void 0,this.controlService=void 0,this.layerService=void 0,this.iconService=void 0,this.markerService=void 0,this.popupService=void 0,this.fontService=void 0,this.interactionService=void 0,this.container=void 0;var le=me.id,be=me.map,ze=Object(c.createSceneContainer)();this.container=ze,be.setContainer(ze,le),ze.bind(c.TYPES.IRendererService).to(Ft).inSingletonScope(),this.sceneService=ze.get(c.TYPES.ISceneService),this.mapService=ze.get(c.TYPES.IMapService),this.iconService=ze.get(c.TYPES.IIconService),this.fontService=ze.get(c.TYPES.IFontService),this.controlService=ze.get(c.TYPES.IControlService),this.layerService=ze.get(c.TYPES.ILayerService),this.markerService=ze.get(c.TYPES.IMarkerService),this.interactionService=ze.get(c.TYPES.IInteractionService),this.popupService=ze.get(c.TYPES.IPopupService),this.initComponent(le),this.sceneService.init(me),this.initControl()}return l()(Pe,[{key:"getServiceContainer",value:function(){return this.container}},{key:"getSize",value:function(){return this.mapService.getSize()}},{key:"getMinZoom",value:function(){return this.mapService.getMinZoom()}},{key:"getMaxZoom",value:function(){return this.mapService.getMaxZoom()}},{key:"getType",value:function(){return this.mapService.getType()}},{key:"getMapContainer",value:function(){return this.mapService.getMapContainer()}},{key:"getMapCanvasContainer",value:function(){return this.mapService.getMapCanvasContainer()}},{key:"getMapService",value:function(){return this.mapService}},{key:"exportPng",value:function(le){return this.sceneService.exportPng(le)}},{key:"exportMap",value:function(le){return this.sceneService.exportPng(le)}},{key:"registerRenderService",value:function(le){var be=this;if(this.sceneService.loaded){var ze=new le(this);ze.init()}else this.on("loaded",function(){var Xe=new le(be);Xe.init()})}},{key:"map",get:function(){return this.mapService.map}},{key:"addLayer",value:function(le){var be=Object(c.createLayerContainer)(this.container);le.setContainer(be),this.sceneService.addLayer(le)}},{key:"getLayers",value:function(){return this.layerService.getLayers()}},{key:"getLayer",value:function(le){return this.layerService.getLayer(le)}},{key:"getLayerByName",value:function(le){return this.layerService.getLayerByName(le)}},{key:"removeLayer",value:function(le){this.layerService.remove(le)}},{key:"removeAllLayer",value:function(){this.layerService.removeAllLayers()}},{key:"render",value:function(){this.sceneService.render()}},{key:"addImage",value:function(le,be){this.iconService.addImage(le,be)}},{key:"hasImage",value:function(le){return this.iconService.hasImage(le)}},{key:"removeImage",value:function(le){this.iconService.removeImage(le)}},{key:"addIconFontGlyphs",value:function(le,be){this.fontService.addIconGlyphs(be)}},{key:"addControl",value:function(le){this.controlService.addControl(le,this.container)}},{key:"removeControl",value:function(le){this.controlService.removeControl(le)}},{key:"getControlByName",value:function(le){return this.controlService.getControlByName(le)}},{key:"addMarker",value:function(le){this.markerService.addMarker(le)}},{key:"addMarkerLayer",value:function(le){this.markerService.addMarkerLayer(le)}},{key:"removeMarkerLayer",value:function(le){this.markerService.removeMarkerLayer(le)}},{key:"removeAllMakers",value:function(){this.markerService.removeAllMarkers()}},{key:"addPopup",value:function(le){this.popupService.addPopup(le)}},{key:"on",value:function(le,be){c.SceneEventList.indexOf(le)===-1?this.mapService.on(le,be):this.sceneService.on(le,be)}},{key:"off",value:function(le,be){c.SceneEventList.indexOf(le)===-1?this.mapService.off(le,be):this.sceneService.off(le,be)}},{key:"getZoom",value:function(){return this.mapService.getZoom()}},{key:"getCenter",value:function(){return this.mapService.getCenter()}},{key:"setCenter",value:function(le){return this.mapService.setCenter(le)}},{key:"getPitch",value:function(){return this.mapService.getPitch()}},{key:"setPitch",value:function(le){return this.mapService.setPitch(le)}},{key:"getRotation",value:function(){return this.mapService.getRotation()}},{key:"getBounds",value:function(){return this.mapService.getBounds()}},{key:"setRotation",value:function(le){this.mapService.setRotation(le)}},{key:"zoomIn",value:function(){this.mapService.zoomIn()}},{key:"zoomOut",value:function(){this.mapService.zoomOut()}},{key:"panTo",value:function(le){this.mapService.panTo(le)}},{key:"panBy",value:function(le){this.mapService.panBy(le)}},{key:"getContainer",value:function(){return this.mapService.getContainer()}},{key:"setZoom",value:function(le){this.mapService.setZoom(le)}},{key:"fitBounds",value:function(le,be){var ze=this.sceneService.getSceneConfig(),Xe=ze.fitBoundsOptions,_n=ze.animate;this.mapService.fitBounds(le,be||Gt(Gt({},Xe),{},{animate:_n}))}},{key:"setZoomAndCenter",value:function(le,be){this.mapService.setZoomAndCenter(le,be)}},{key:"setMapStyle",value:function(le){this.mapService.setMapStyle(le)}},{key:"setMapStatus",value:function(le){this.mapService.setMapStatus(le)}},{key:"pixelToLngLat",value:function(le){return this.mapService.pixelToLngLat(le)}},{key:"lngLatToPixel",value:function(le){return this.mapService.lngLatToPixel(le)}},{key:"containerToLngLat",value:function(le){return this.mapService.containerToLngLat(le)}},{key:"lngLatToContainer",value:function(le){return this.mapService.lngLatToContainer(le)}},{key:"destroy",value:function(){this.sceneService.destroy()}},{key:"registerPostProcessingPass",value:function(le,be){this.container.bind(c.TYPES.IPostProcessingPass).to(le).whenTargetNamed(be)}},{key:"initComponent",value:function(le){this.controlService.init({container:Qt.a.getContainer(le)},this.container),this.markerService.init(this.container),this.popupService.init(this.container)}},{key:"initControl",value:function(){var le=this.sceneService.getSceneConfig(),be=le.logoVisible,ze=le.logoPosition;be&&this.addControl(new s.b({position:ze}))}}]),Pe}()},l94r:function(Se,ft,L){"use strict";L.d(ft,"a",function(){return it});var U=L("lSNA"),E=L.n(U),T=L("lwsE"),e=L.n(T),t=L("W8MJ"),l=L.n(t),s=L("7W2i"),c=L.n(s),r=L("a1gu"),h=L.n(r),n=L("Nsbk"),i=L.n(n),a=L("JBE3"),o=L.n(a),u=L("4qC0"),f=L.n(u),v=L("lSCD"),b=L.n(v),y=L("BkRI"),g=L.n(y),_=L("xp6e"),M=L("Hel2"),x=L("uhBA"),m=L("rlAn"),S=L("qxNg");function P(ct){if(ct.length===0)throw new Error("max requires at least one data point");for(var ht=ct[0],ut=1;ut<ct.length;ut++)ct[ut]>ht&&(ht=ct[ut]);return ht}function A(ct){if(ct.length===0)throw new Error("min requires at least one data point");for(var ht=ct[0],ut=1;ut<ct.length;ut++)ct[ut]<ht&&(ht=ct[ut]);return ht}function O(ct){if(ct.length===0)return 0;for(var ht=ct[0],ut=0,It,Nt=1;Nt<ct.length;Nt++)It=ht+ct[Nt]*1,Math.abs(ht)>=Math.abs(ct[Nt])?ut+=ht-It+ct[Nt]:ut+=ct[Nt]-It+ht,ht=It;return ht+ut*1}function R(ct){if(ct.length===0)throw new Error("mean requires at least one data point");return O(ct)/ct.length}var W={min:A,max:P,mean:R,sum:O};function F(ct,ht){return ct.map(function(ut){return ut[ht]*1})}function Z(ct,ht){var ut=Object.keys(ct);if(Object.getOwnPropertySymbols){var It=Object.getOwnPropertySymbols(ct);ht&&(It=It.filter(function(Nt){return Object.getOwnPropertyDescriptor(ct,Nt).enumerable})),ut.push.apply(ut,It)}return ut}function V(ct){for(var ht=1;ht<arguments.length;ht++){var ut=arguments[ht]!=null?arguments[ht]:{};ht%2?Z(Object(ut),!0).forEach(function(It){E()(ct,It,ut[It])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ct,Object.getOwnPropertyDescriptors(ut)):Z(Object(ut)).forEach(function(It){Object.defineProperty(ct,It,Object.getOwnPropertyDescriptor(ut,It))})}return ct}function k(ct){var ht=Y();return function(){var It=i()(ct),Nt;if(ht){var Lt=i()(this).constructor;Nt=Reflect.construct(It,arguments,Lt)}else Nt=It.apply(this,arguments);return h()(this,Nt)}}function Y(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ct){return!1}}function K(ct,ht){if(Array.isArray(ht))return ht}var it=function(ct){c()(ut,ct);var ht=k(ut);function ut(It,Nt){var Lt;return e()(this,ut),Lt=ht.call(this),Lt.data=void 0,Lt.extent=void 0,Lt.hooks={init:new _.c},Lt.parser={type:"geojson"},Lt.transforms=[],Lt.cluster=!1,Lt.clusterOptions={enable:!1,radius:40,maxZoom:20,zoom:-99,method:"count"},Lt.originData=void 0,Lt.rawData=void 0,Lt.cfg={},Lt.clusterIndex=void 0,Lt.originData=It,Lt.initCfg(Nt),Lt.hooks.init.tap("parser",function(){Lt.excuteParser()}),Lt.hooks.init.tap("cluster",function(){Lt.initCluster()}),Lt.hooks.init.tap("transform",function(){Lt.executeTrans()}),Lt.init(),Lt}return l()(ut,[{key:"setData",value:function(Nt,Lt){this.rawData=Nt,this.originData=Nt,this.initCfg(Lt),this.init(),this.emit("update")}},{key:"getClusters",value:function(Nt){return this.clusterIndex.getClusters(this.extent,Nt)}},{key:"getClustersLeaves",value:function(Nt){return this.clusterIndex.getLeaves(Nt,Infinity)}},{key:"updateClusterData",value:function(Nt){var Lt=this,_t=this.clusterOptions,mt=_t.method,At=mt===void 0?"sum":mt,rt=_t.field,Mt=Object(M.r)(Object(M.h)(this.extent),2),z=this.clusterIndex.getClusters(Mt[0].concat(Mt[1]),Math.floor(Nt));this.clusterOptions.zoom=Nt,z.forEach(function($){$.id||($.properties.point_count=1)}),(rt||b()(At))&&(z=z.map(function($){var dt=$.id;if(dt){var et=Lt.clusterIndex.getLeaves(dt,Infinity),ot=et.map(function(nt){return nt.properties}),pt;if(f()(At)&&rt){var H=F(ot,rt);pt=W[At](H)}b()(At)&&(pt=At(ot)),$.properties.stat=pt}else $.properties.point_count=1;return $})),this.data=Object(m.getParser)("geojson")({type:"FeatureCollection",features:z}),this.executeTrans()}},{key:"getFeatureById",value:function(Nt){var Lt=this.parser.type,_t=Lt===void 0?"geojson":Lt;if(_t==="geojson"&&!this.cluster){var mt=Nt<this.originData.features.length?this.originData.features[Nt]:"null",At=g()(mt);if(this.transforms.length!==0){var rt=this.data.dataArray.find(function(Mt){return Mt._id===Nt});At.properties=rt}return At}else return Nt<this.data.dataArray.length?this.data.dataArray[Nt]:"null"}},{key:"getFeatureId",value:function(Nt,Lt){var _t=this.data.dataArray.find(function(mt){return mt[Nt]===name});return _t==null?void 0:_t._id}},{key:"destroy",value:function(){this.removeAllListeners(),this.originData=null,this.clusterIndex=null,this.data=null}},{key:"initCfg",value:function(Nt){this.cfg=o()(this.cfg,Nt,K);var Lt=this.cfg;Lt&&(Lt.parser&&(this.parser=Lt.parser),Lt.transforms&&(this.transforms=Lt.transforms),this.cluster=Lt.cluster||!1,Lt.clusterOptions&&(this.cluster=!0,this.clusterOptions=V(V({},this.clusterOptions),Lt.clusterOptions)))}},{key:"excuteParser",value:function(){var Nt=this.parser,Lt=Nt.type||"geojson",_t=Object(m.getParser)(Lt);this.data=_t(this.originData,Nt),this.extent=Object(M.m)(this.data.dataArray)}},{key:"executeTrans",value:function(){var Nt=this,Lt=this.transforms;Lt.forEach(function(_t){var mt=_t.type,At=Object(m.getTransform)(mt)(Nt.data,_t);Object.assign(Nt.data,At)})}},{key:"initCluster",value:function(){if(!!this.cluster){var Nt=this.clusterOptions||{};this.clusterIndex=Object(S.a)(this.data,Nt)}}},{key:"init",value:function(){this.hooks.init.call(this)}}]),ut}(x.EventEmitter)},lJbI:function(Se,ft,L){"use strict";L.d(ft,"a",function(){return U});function U(E,T){var e=T.extent,t=T.width,l=T.height,s=T.min,c=T.max,r={_id:1,dataArray:[{_id:1,data:Array.from(E),width:t,height:l,min:s,max:c,coordinates:[[e[0],e[1]],[e[2],e[3]]]}]};return r}},lT4e:function(Se,ft,L){"use strict";var U=L("MgzW"),E={},T=function(i){};function e(n,i,a,o,u,f,v,b){if(T(i),!n){var y;if(i===void 0)y=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var g=[a,o,u,f,v,b],_=0;y=new Error(i.replace(/%s/g,function(){return g[_++]})),y.name="Invariant Violation"}throw y.framesToPop=1,y}}var t=function(){};if(!1)var l;var s="mixins";function c(n){return n}var r;r={};function h(n,i,a){var o=[],u={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",UNSAFE_componentWillMount:"DEFINE_MANY",UNSAFE_componentWillReceiveProps:"DEFINE_MANY",UNSAFE_componentWillUpdate:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},f={getDerivedStateFromProps:"DEFINE_MANY_MERGED"},v={displayName:function(V,k){V.displayName=k},mixins:function(V,k){if(k)for(var Y=0;Y<k.length;Y++)g(V,k[Y])},childContextTypes:function(V,k){V.childContextTypes=U({},V.childContextTypes,k)},contextTypes:function(V,k){V.contextTypes=U({},V.contextTypes,k)},getDefaultProps:function(V,k){V.getDefaultProps?V.getDefaultProps=x(V.getDefaultProps,k):V.getDefaultProps=k},propTypes:function(V,k){V.propTypes=U({},V.propTypes,k)},statics:function(V,k){_(V,k)},autobind:function(){}};function b(Z,V,k){for(var Y in V)V.hasOwnProperty(Y)}function y(Z,V){var k=u.hasOwnProperty(V)?u[V]:null;R.hasOwnProperty(V)&&e(k==="OVERRIDE_BASE","ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",V),Z&&e(k==="DEFINE_MANY"||k==="DEFINE_MANY_MERGED","ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",V)}function g(Z,V){if(!V){if(!1)var k,Y;return}e(typeof V!="function","ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),e(!i(V),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var K=Z.prototype,it=K.__reactAutoBindPairs;V.hasOwnProperty(s)&&v.mixins(Z,V.mixins);for(var ct in V)if(!!V.hasOwnProperty(ct)&&ct!==s){var ht=V[ct],ut=K.hasOwnProperty(ct);if(y(ut,ct),v.hasOwnProperty(ct))v[ct](Z,ht);else{var It=u.hasOwnProperty(ct),Nt=typeof ht=="function",Lt=Nt&&!It&&!ut&&V.autobind!==!1;if(Lt)it.push(ct,ht),K[ct]=ht;else if(ut){var _t=u[ct];e(It&&(_t==="DEFINE_MANY_MERGED"||_t==="DEFINE_MANY"),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",_t,ct),_t==="DEFINE_MANY_MERGED"?K[ct]=x(K[ct],ht):_t==="DEFINE_MANY"&&(K[ct]=m(K[ct],ht))}else K[ct]=ht}}}function _(Z,V){if(!!V)for(var k in V){var Y=V[k];if(!!V.hasOwnProperty(k)){var K=k in v;e(!K,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',k);var it=k in Z;if(it){var ct=f.hasOwnProperty(k)?f[k]:null;e(ct==="DEFINE_MANY_MERGED","ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",k),Z[k]=x(Z[k],Y);return}Z[k]=Y}}}function M(Z,V){e(Z&&V&&typeof Z=="object"&&typeof V=="object","mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects.");for(var k in V)V.hasOwnProperty(k)&&(e(Z[k]===void 0,"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",k),Z[k]=V[k]);return Z}function x(Z,V){return function(){var Y=Z.apply(this,arguments),K=V.apply(this,arguments);if(Y==null)return K;if(K==null)return Y;var it={};return M(it,Y),M(it,K),it}}function m(Z,V){return function(){Z.apply(this,arguments),V.apply(this,arguments)}}function S(Z,V){var k=V.bind(Z);if(!1)var Y,K;return k}function P(Z){for(var V=Z.__reactAutoBindPairs,k=0;k<V.length;k+=2){var Y=V[k],K=V[k+1];Z[Y]=S(Z,K)}}var A={componentDidMount:function(){this.__isMounted=!0}},O={componentWillUnmount:function(){this.__isMounted=!1}},R={replaceState:function(V,k){this.updater.enqueueReplaceState(this,V,k)},isMounted:function(){return!!this.__isMounted}},W=function(){};U(W.prototype,n.prototype,R);function F(Z){var V=c(function(Y,K,it){this.__reactAutoBindPairs.length&&P(this),this.props=Y,this.context=K,this.refs=E,this.updater=it||a,this.state=null;var ct=this.getInitialState?this.getInitialState():null;e(typeof ct=="object"&&!Array.isArray(ct),"%s.getInitialState(): must return an object or null",V.displayName||"ReactCompositeComponent"),this.state=ct});V.prototype=new W,V.prototype.constructor=V,V.prototype.__reactAutoBindPairs=[],o.forEach(g.bind(null,V)),g(V,A),g(V,Z),g(V,O),V.getDefaultProps&&(V.defaultProps=V.getDefaultProps()),e(V.prototype.render,"createClass(...): Class specification must implement a `render` method.");for(var k in u)V.prototype[k]||(V.prototype[k]=null);return V}return F}Se.exports=h},lnY3:function(Se,ft,L){Se.exports={"ant-card":"ant-card","ant-card-rtl":"ant-card-rtl","ant-card-hoverable":"ant-card-hoverable","ant-card-bordered":"ant-card-bordered","ant-card-head":"ant-card-head","ant-card-head-wrapper":"ant-card-head-wrapper","ant-card-head-title":"ant-card-head-title","ant-typography":"ant-typography","ant-typography-edit-content":"ant-typography-edit-content","ant-tabs":"ant-tabs","ant-tabs-bar":"ant-tabs-bar","ant-card-extra":"ant-card-extra","ant-card-body":"ant-card-body","ant-card-contain-grid":"ant-card-contain-grid","ant-card-loading":"ant-card-loading","ant-card-grid":"ant-card-grid","ant-card-grid-hoverable":"ant-card-grid-hoverable","ant-card-contain-tabs":"ant-card-contain-tabs","ant-card-cover":"ant-card-cover","ant-card-actions":"ant-card-actions","ant-btn":"ant-btn",anticon:"anticon","ant-card-type-inner":"ant-card-type-inner","ant-card-meta":"ant-card-meta","ant-card-meta-avatar":"ant-card-meta-avatar","ant-card-meta-detail":"ant-card-meta-detail","ant-card-meta-title":"ant-card-meta-title","ant-card-meta-description":"ant-card-meta-description","ant-card-loading-content":"ant-card-loading-content","ant-card-loading-block":"ant-card-loading-block","card-loading":"card-loading","ant-card-small":"ant-card-small"}},lwsE:function(Se,ft){function L(U,E){if(!(U instanceof E))throw new TypeError("Cannot call a class as a function")}Se.exports=L,Se.exports.default=Se.exports,Se.exports.__esModule=!0},mNvP:function(Se,ft,L){(function(U,E){/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var T;(function(e){(function(t){var l=typeof E=="object"?E:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),s=c(e);typeof l.Reflect=="undefined"?l.Reflect=e:s=c(l.Reflect,s),t(s);function c(r,h){return function(n,i){typeof r[n]!="function"&&Object.defineProperty(r,n,{configurable:!0,writable:!0,value:i}),h&&h(n,i)}}})(function(t){var l=Object.prototype.hasOwnProperty,s=typeof Symbol=="function",c=s&&typeof Symbol.toPrimitive!="undefined"?Symbol.toPrimitive:"@@toPrimitive",r=s&&typeof Symbol.iterator!="undefined"?Symbol.iterator:"@@iterator",h=typeof Object.create=="function",n={__proto__:[]}instanceof Array,i=!h&&!n,a={create:h?function(){return ee(Object.create(null))}:n?function(){return ee({__proto__:null})}:function(){return ee({})},has:i?function(Gt,$t){return l.call(Gt,$t)}:function(Gt,$t){return $t in Gt},get:i?function(Gt,$t){return l.call(Gt,$t)?Gt[$t]:void 0}:function(Gt,$t){return Gt[$t]}},o=Object.getPrototypeOf(Function),u=typeof U=="object"&&Object({NODE_ENV:"production"})&&Object({NODE_ENV:"production"}).REFLECT_METADATA_USE_MAP_POLYFILL==="true",f=!u&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:vt(),v=!u&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:Ft(),b=!u&&typeof WeakMap=="function"?WeakMap:Qt(),y=new b;function g(Gt,$t,Pe,me){if(It(Pe)){if(!$(Gt))throw new TypeError;if(!et($t))throw new TypeError;return W(Gt,$t)}else{if(!$(Gt))throw new TypeError;if(!_t($t))throw new TypeError;if(!_t(me)&&!It(me)&&!Nt(me))throw new TypeError;return Nt(me)&&(me=void 0),Pe=z(Pe),F(Gt,$t,Pe,me)}}t("decorate",g);function _(Gt,$t){function Pe(me,le){if(!_t(me))throw new TypeError;if(!It(le)&&!ot(le))throw new TypeError;it(Gt,$t,me,le)}return Pe}t("metadata",_);function M(Gt,$t,Pe,me){if(!_t(Pe))throw new TypeError;return It(me)||(me=z(me)),it(Gt,$t,Pe,me)}t("defineMetadata",M);function x(Gt,$t,Pe){if(!_t($t))throw new TypeError;return It(Pe)||(Pe=z(Pe)),V(Gt,$t,Pe)}t("hasMetadata",x);function m(Gt,$t,Pe){if(!_t($t))throw new TypeError;return It(Pe)||(Pe=z(Pe)),k(Gt,$t,Pe)}t("hasOwnMetadata",m);function S(Gt,$t,Pe){if(!_t($t))throw new TypeError;return It(Pe)||(Pe=z(Pe)),Y(Gt,$t,Pe)}t("getMetadata",S);function P(Gt,$t,Pe){if(!_t($t))throw new TypeError;return It(Pe)||(Pe=z(Pe)),K(Gt,$t,Pe)}t("getOwnMetadata",P);function A(Gt,$t){if(!_t(Gt))throw new TypeError;return It($t)||($t=z($t)),ct(Gt,$t)}t("getMetadataKeys",A);function O(Gt,$t){if(!_t(Gt))throw new TypeError;return It($t)||($t=z($t)),ht(Gt,$t)}t("getOwnMetadataKeys",O);function R(Gt,$t,Pe){if(!_t($t))throw new TypeError;It(Pe)||(Pe=z(Pe));var me=Z($t,Pe,!1);if(It(me)||!me.delete(Gt))return!1;if(me.size>0)return!0;var le=y.get($t);return le.delete(Pe),le.size>0||y.delete($t),!0}t("deleteMetadata",R);function W(Gt,$t){for(var Pe=Gt.length-1;Pe>=0;--Pe){var me=Gt[Pe],le=me($t);if(!It(le)&&!Nt(le)){if(!et(le))throw new TypeError;$t=le}}return $t}function F(Gt,$t,Pe,me){for(var le=Gt.length-1;le>=0;--le){var be=Gt[le],ze=be($t,Pe,me);if(!It(ze)&&!Nt(ze)){if(!_t(ze))throw new TypeError;me=ze}}return me}function Z(Gt,$t,Pe){var me=y.get(Gt);if(It(me)){if(!Pe)return;me=new f,y.set(Gt,me)}var le=me.get($t);if(It(le)){if(!Pe)return;le=new f,me.set($t,le)}return le}function V(Gt,$t,Pe){var me=k(Gt,$t,Pe);if(me)return!0;var le=Et($t);return Nt(le)?!1:V(Gt,le,Pe)}function k(Gt,$t,Pe){var me=Z($t,Pe,!1);return It(me)?!1:rt(me.has(Gt))}function Y(Gt,$t,Pe){var me=k(Gt,$t,Pe);if(me)return K(Gt,$t,Pe);var le=Et($t);if(!Nt(le))return Y(Gt,le,Pe)}function K(Gt,$t,Pe){var me=Z($t,Pe,!1);if(!It(me))return me.get(Gt)}function it(Gt,$t,Pe,me){var le=Z(Pe,me,!0);le.set(Gt,$t)}function ct(Gt,$t){var Pe=ht(Gt,$t),me=Et(Gt);if(me===null)return Pe;var le=ct(me,$t);if(le.length<=0)return Pe;if(Pe.length<=0)return le;for(var be=new v,ze=[],Xe=0,_n=Pe;Xe<_n.length;Xe++){var Kn=_n[Xe],Hn=be.has(Kn);Hn||(be.add(Kn),ze.push(Kn))}for(var nn=0,en=le;nn<en.length;nn++){var Kn=en[nn],Hn=be.has(Kn);Hn||(be.add(Kn),ze.push(Kn))}return ze}function ht(Gt,$t){var Pe=[],me=Z(Gt,$t,!1);if(It(me))return Pe;for(var le=me.keys(),be=H(le),ze=0;;){var Xe=at(be);if(!Xe)return Pe.length=ze,Pe;var _n=nt(Xe);try{Pe[ze]=_n}catch(Kn){try{q(be)}finally{throw Kn}}ze++}}function ut(Gt){if(Gt===null)return 1;switch(typeof Gt){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return Gt===null?1:6;default:return 6}}function It(Gt){return Gt===void 0}function Nt(Gt){return Gt===null}function Lt(Gt){return typeof Gt=="symbol"}function _t(Gt){return typeof Gt=="object"?Gt!==null:typeof Gt=="function"}function mt(Gt,$t){switch(ut(Gt)){case 0:return Gt;case 1:return Gt;case 2:return Gt;case 3:return Gt;case 4:return Gt;case 5:return Gt}var Pe=$t===3?"string":$t===5?"number":"default",me=pt(Gt,c);if(me!==void 0){var le=me.call(Gt,Pe);if(_t(le))throw new TypeError;return le}return At(Gt,Pe==="default"?"number":Pe)}function At(Gt,$t){if($t==="string"){var Pe=Gt.toString;if(dt(Pe)){var me=Pe.call(Gt);if(!_t(me))return me}var le=Gt.valueOf;if(dt(le)){var me=le.call(Gt);if(!_t(me))return me}}else{var le=Gt.valueOf;if(dt(le)){var me=le.call(Gt);if(!_t(me))return me}var be=Gt.toString;if(dt(be)){var me=be.call(Gt);if(!_t(me))return me}}throw new TypeError}function rt(Gt){return!!Gt}function Mt(Gt){return""+Gt}function z(Gt){var $t=mt(Gt,3);return Lt($t)?$t:Mt($t)}function $(Gt){return Array.isArray?Array.isArray(Gt):Gt instanceof Object?Gt instanceof Array:Object.prototype.toString.call(Gt)==="[object Array]"}function dt(Gt){return typeof Gt=="function"}function et(Gt){return typeof Gt=="function"}function ot(Gt){switch(ut(Gt)){case 3:return!0;case 4:return!0;default:return!1}}function pt(Gt,$t){var Pe=Gt[$t];if(Pe!=null){if(!dt(Pe))throw new TypeError;return Pe}}function H(Gt){var $t=pt(Gt,r);if(!dt($t))throw new TypeError;var Pe=$t.call(Gt);if(!_t(Pe))throw new TypeError;return Pe}function nt(Gt){return Gt.value}function at(Gt){var $t=Gt.next();return $t.done?!1:$t}function q(Gt){var $t=Gt.return;$t&&$t.call(Gt)}function Et(Gt){var $t=Object.getPrototypeOf(Gt);if(typeof Gt!="function"||Gt===o||$t!==o)return $t;var Pe=Gt.prototype,me=Pe&&Object.getPrototypeOf(Pe);if(me==null||me===Object.prototype)return $t;var le=me.constructor;return typeof le!="function"||le===Gt?$t:le}function vt(){var Gt={},$t=[],Pe=function(){function ze(Xe,_n,Kn){this._index=0,this._keys=Xe,this._values=_n,this._selector=Kn}return ze.prototype["@@iterator"]=function(){return this},ze.prototype[r]=function(){return this},ze.prototype.next=function(){var Xe=this._index;if(Xe>=0&&Xe<this._keys.length){var _n=this._selector(this._keys[Xe],this._values[Xe]);return Xe+1>=this._keys.length?(this._index=-1,this._keys=$t,this._values=$t):this._index++,{value:_n,done:!1}}return{value:void 0,done:!0}},ze.prototype.throw=function(Xe){throw this._index>=0&&(this._index=-1,this._keys=$t,this._values=$t),Xe},ze.prototype.return=function(Xe){return this._index>=0&&(this._index=-1,this._keys=$t,this._values=$t),{value:Xe,done:!0}},ze}();return function(){function ze(){this._keys=[],this._values=[],this._cacheKey=Gt,this._cacheIndex=-2}return Object.defineProperty(ze.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),ze.prototype.has=function(Xe){return this._find(Xe,!1)>=0},ze.prototype.get=function(Xe){var _n=this._find(Xe,!1);return _n>=0?this._values[_n]:void 0},ze.prototype.set=function(Xe,_n){var Kn=this._find(Xe,!0);return this._values[Kn]=_n,this},ze.prototype.delete=function(Xe){var _n=this._find(Xe,!1);if(_n>=0){for(var Kn=this._keys.length,Hn=_n+1;Hn<Kn;Hn++)this._keys[Hn-1]=this._keys[Hn],this._values[Hn-1]=this._values[Hn];return this._keys.length--,this._values.length--,Xe===this._cacheKey&&(this._cacheKey=Gt,this._cacheIndex=-2),!0}return!1},ze.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=Gt,this._cacheIndex=-2},ze.prototype.keys=function(){return new Pe(this._keys,this._values,me)},ze.prototype.values=function(){return new Pe(this._keys,this._values,le)},ze.prototype.entries=function(){return new Pe(this._keys,this._values,be)},ze.prototype["@@iterator"]=function(){return this.entries()},ze.prototype[r]=function(){return this.entries()},ze.prototype._find=function(Xe,_n){return this._cacheKey!==Xe&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=Xe)),this._cacheIndex<0&&_n&&(this._cacheIndex=this._keys.length,this._keys.push(Xe),this._values.push(void 0)),this._cacheIndex},ze}();function me(ze,Xe){return ze}function le(ze,Xe){return Xe}function be(ze,Xe){return[ze,Xe]}}function Ft(){return function(){function Gt(){this._map=new f}return Object.defineProperty(Gt.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),Gt.prototype.has=function($t){return this._map.has($t)},Gt.prototype.add=function($t){return this._map.set($t,$t),this},Gt.prototype.delete=function($t){return this._map.delete($t)},Gt.prototype.clear=function(){this._map.clear()},Gt.prototype.keys=function(){return this._map.keys()},Gt.prototype.values=function(){return this._map.values()},Gt.prototype.entries=function(){return this._map.entries()},Gt.prototype["@@iterator"]=function(){return this.keys()},Gt.prototype[r]=function(){return this.keys()},Gt}()}function Qt(){var Gt=16,$t=a.create(),Pe=me();return function(){function _n(){this._key=me()}return _n.prototype.has=function(Kn){var Hn=le(Kn,!1);return Hn!==void 0?a.has(Hn,this._key):!1},_n.prototype.get=function(Kn){var Hn=le(Kn,!1);return Hn!==void 0?a.get(Hn,this._key):void 0},_n.prototype.set=function(Kn,Hn){var nn=le(Kn,!0);return nn[this._key]=Hn,this},_n.prototype.delete=function(Kn){var Hn=le(Kn,!1);return Hn!==void 0?delete Hn[this._key]:!1},_n.prototype.clear=function(){this._key=me()},_n}();function me(){var _n;do _n="@@WeakMap@@"+Xe();while(a.has($t,_n));return $t[_n]=!0,_n}function le(_n,Kn){if(!l.call(_n,Pe)){if(!Kn)return;Object.defineProperty(_n,Pe,{value:a.create()})}return _n[Pe]}function be(_n,Kn){for(var Hn=0;Hn<Kn;++Hn)_n[Hn]=Math.random()*255|0;return _n}function ze(_n){return typeof Uint8Array=="function"?typeof crypto!="undefined"?crypto.getRandomValues(new Uint8Array(_n)):typeof msCrypto!="undefined"?msCrypto.getRandomValues(new Uint8Array(_n)):be(new Uint8Array(_n),_n):be(new Array(_n),_n)}function Xe(){var _n=ze(Gt);_n[6]=_n[6]&79|64,_n[8]=_n[8]&191|128;for(var Kn="",Hn=0;Hn<Gt;++Hn){var nn=_n[Hn];(Hn===4||Hn===6||Hn===8)&&(Kn+="-"),nn<16&&(Kn+="0"),Kn+=nn.toString(16).toLowerCase()}return Kn}}function ee(Gt){return Gt.__=void 0,delete Gt.__,Gt}})})(T||(T={}))}).call(this,L("Q2Ig"),L("IyRk"))},mTTR:function(Se,ft,L){var U=L("b80T"),E=L("QcOe"),T=L("MMmD");function e(t){return T(t)?U(t,!0):E(t)}Se.exports=e},mc0g:function(Se,ft){function L(U){return function(E,T,e){for(var t=-1,l=Object(E),s=e(E),c=s.length;c--;){var r=s[U?c:++t];if(T(l[r],r,l)===!1)break}return E}}Se.exports=L},mhV4:function(Se,ft,L){var U=L("ZK94");Se.exports.geometry=E,Se.exports.ring=e;function E(l){var s=0,c;switch(l.type){case"Polygon":return T(l.coordinates);case"MultiPolygon":for(c=0;c<l.coordinates.length;c++)s+=T(l.coordinates[c]);return s;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(c=0;c<l.geometries.length;c++)s+=E(l.geometries[c]);return s}}function T(l){var s=0;if(l&&l.length>0){s+=Math.abs(e(l[0]));for(var c=1;c<l.length;c++)s-=Math.abs(e(l[c]))}return s}function e(l){var s,c,r,h,n,i,a,o=0,u=l.length;if(u>2){for(a=0;a<u;a++)a===u-2?(h=u-2,n=u-1,i=0):a===u-1?(h=u-1,n=0,i=1):(h=a,n=a+1,i=a+2),s=l[h],c=l[n],r=l[i],o+=(t(r[0])-t(s[0]))*Math.sin(t(c[1]));o=o*U.RADIUS*U.RADIUS/2}return o}function t(l){return l*Math.PI/180}},mpbz:function(Se,ft,L){(function(U,E){Se.exports=E()})(this,function(){"use strict";function U(S,P,A,O,R,W){if(!(R-O<=A)){var F=O+R>>1;E(S,P,F,O,R,W%2),U(S,P,A,O,F-1,W+1),U(S,P,A,F+1,R,W+1)}}function E(S,P,A,O,R,W){for(;R>O;){if(R-O>600){var F=R-O+1,Z=A-O+1,V=Math.log(F),k=.5*Math.exp(2*V/3),Y=.5*Math.sqrt(V*k*(F-k)/F)*(Z-F/2<0?-1:1),K=Math.max(O,Math.floor(A-Z*k/F+Y)),it=Math.min(R,Math.floor(A+(F-Z)*k/F+Y));E(S,P,A,K,it,W)}var ct=P[2*A+W],ht=O,ut=R;for(T(S,P,O,A),P[2*R+W]>ct&&T(S,P,O,R);ht<ut;){for(T(S,P,ht,ut),ht++,ut--;P[2*ht+W]<ct;)ht++;for(;P[2*ut+W]>ct;)ut--}P[2*O+W]===ct?T(S,P,O,ut):(ut++,T(S,P,ut,R)),ut<=A&&(O=ut+1),A<=ut&&(R=ut-1)}}function T(S,P,A,O){e(S,A,O),e(P,2*A,2*O),e(P,2*A+1,2*O+1)}function e(S,P,A){var O=S[P];S[P]=S[A],S[A]=O}function t(S,P,A,O,R,W,F){for(var Z=[0,S.length-1,0],V=[],k,Y;Z.length;){var K=Z.pop(),it=Z.pop(),ct=Z.pop();if(it-ct<=F){for(var ht=ct;ht<=it;ht++)k=P[2*ht],Y=P[2*ht+1],k>=A&&k<=R&&Y>=O&&Y<=W&&V.push(S[ht]);continue}var ut=Math.floor((ct+it)/2);k=P[2*ut],Y=P[2*ut+1],k>=A&&k<=R&&Y>=O&&Y<=W&&V.push(S[ut]);var It=(K+1)%2;(K===0?A<=k:O<=Y)&&(Z.push(ct),Z.push(ut-1),Z.push(It)),(K===0?R>=k:W>=Y)&&(Z.push(ut+1),Z.push(it),Z.push(It))}return V}function l(S,P,A,O,R,W){for(var F=[0,S.length-1,0],Z=[],V=R*R;F.length;){var k=F.pop(),Y=F.pop(),K=F.pop();if(Y-K<=W){for(var it=K;it<=Y;it++)s(P[2*it],P[2*it+1],A,O)<=V&&Z.push(S[it]);continue}var ct=Math.floor((K+Y)/2),ht=P[2*ct],ut=P[2*ct+1];s(ht,ut,A,O)<=V&&Z.push(S[ct]);var It=(k+1)%2;(k===0?A-R<=ht:O-R<=ut)&&(F.push(K),F.push(ct-1),F.push(It)),(k===0?A+R>=ht:O+R>=ut)&&(F.push(ct+1),F.push(Y),F.push(It))}return Z}function s(S,P,A,O){var R=S-A,W=P-O;return R*R+W*W}var c=function(P){return P[0]},r=function(P){return P[1]},h=function(P,A,O,R,W){A===void 0&&(A=c),O===void 0&&(O=r),R===void 0&&(R=64),W===void 0&&(W=Float64Array),this.nodeSize=R,this.points=P;for(var F=P.length<65536?Uint16Array:Uint32Array,Z=this.ids=new F(P.length),V=this.coords=new W(P.length*2),k=0;k<P.length;k++)Z[k]=k,V[2*k]=A(P[k]),V[2*k+1]=O(P[k]);U(Z,V,R,0,Z.length-1,0)};h.prototype.range=function(P,A,O,R){return t(this.ids,this.coords,P,A,O,R,this.nodeSize)},h.prototype.within=function(P,A,O){return l(this.ids,this.coords,P,A,O,this.nodeSize)};var n={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(P){return P}},i=Math.fround||function(S){return function(P){return S[0]=+P,S[0]}}(new Float32Array(1)),a=function(P){this.options=M(Object.create(n),P),this.trees=new Array(this.options.maxZoom+1)};a.prototype.load=function(P){var A=this.options,O=A.log,R=A.minZoom,W=A.maxZoom,F=A.nodeSize;O&&console.time("total time");var Z="prepare "+P.length+" points";O&&console.time(Z),this.points=P;for(var V=[],k=0;k<P.length;k++)!P[k].geometry||V.push(u(P[k],k));this.trees[W+1]=new h(V,x,m,F,Float32Array),O&&console.timeEnd(Z);for(var Y=W;Y>=R;Y--){var K=+Date.now();V=this._cluster(V,Y),this.trees[Y]=new h(V,x,m,F,Float32Array),O&&console.log("z%d: %d clusters in %dms",Y,V.length,+Date.now()-K)}return O&&console.timeEnd("total time"),this},a.prototype.getClusters=function(P,A){var O=((P[0]+180)%360+360)%360-180,R=Math.max(-90,Math.min(90,P[1])),W=P[2]===180?180:((P[2]+180)%360+360)%360-180,F=Math.max(-90,Math.min(90,P[3]));if(P[2]-P[0]>=360)O=-180,W=180;else if(O>W){var Z=this.getClusters([O,R,180,F],A),V=this.getClusters([-180,R,W,F],A);return Z.concat(V)}for(var k=this.trees[this._limitZoom(A)],Y=k.range(b(O),y(F),b(W),y(R)),K=[],it=0,ct=Y;it<ct.length;it+=1){var ht=ct[it],ut=k.points[ht];K.push(ut.numPoints?f(ut):this.points[ut.index])}return K},a.prototype.getChildren=function(P){var A=this._getOriginId(P),O=this._getOriginZoom(P),R="No cluster with the specified id.",W=this.trees[O];if(!W)throw new Error(R);var F=W.points[A];if(!F)throw new Error(R);for(var Z=this.options.radius/(this.options.extent*Math.pow(2,O-1)),V=W.within(F.x,F.y,Z),k=[],Y=0,K=V;Y<K.length;Y+=1){var it=K[Y],ct=W.points[it];ct.parentId===P&&k.push(ct.numPoints?f(ct):this.points[ct.index])}if(k.length===0)throw new Error(R);return k},a.prototype.getLeaves=function(P,A,O){A=A||10,O=O||0;var R=[];return this._appendLeaves(R,P,A,O,0),R},a.prototype.getTile=function(P,A,O){var R=this.trees[this._limitZoom(P)],W=Math.pow(2,P),F=this.options,Z=F.extent,V=F.radius,k=V/Z,Y=(O-k)/W,K=(O+1+k)/W,it={features:[]};return this._addTileFeatures(R.range((A-k)/W,Y,(A+1+k)/W,K),R.points,A,O,W,it),A===0&&this._addTileFeatures(R.range(1-k/W,Y,1,K),R.points,W,O,W,it),A===W-1&&this._addTileFeatures(R.range(0,Y,k/W,K),R.points,-1,O,W,it),it.features.length?it:null},a.prototype.getClusterExpansionZoom=function(P){for(var A=this._getOriginZoom(P)-1;A<=this.options.maxZoom;){var O=this.getChildren(P);if(A++,O.length!==1)break;P=O[0].properties.cluster_id}return A},a.prototype._appendLeaves=function(P,A,O,R,W){for(var F=this.getChildren(A),Z=0,V=F;Z<V.length;Z+=1){var k=V[Z],Y=k.properties;if(Y&&Y.cluster?W+Y.point_count<=R?W+=Y.point_count:W=this._appendLeaves(P,Y.cluster_id,O,R,W):W<R?W++:P.push(k),P.length===O)break}return W},a.prototype._addTileFeatures=function(P,A,O,R,W,F){for(var Z=0,V=P;Z<V.length;Z+=1){var k=V[Z],Y=A[k],K=Y.numPoints,it={type:1,geometry:[[Math.round(this.options.extent*(Y.x*W-O)),Math.round(this.options.extent*(Y.y*W-R))]],tags:K?v(Y):this.points[Y.index].properties},ct=void 0;K?ct=Y.id:this.options.generateId?ct=Y.index:this.points[Y.index].id&&(ct=this.points[Y.index].id),ct!==void 0&&(it.id=ct),F.features.push(it)}},a.prototype._limitZoom=function(P){return Math.max(this.options.minZoom,Math.min(+P,this.options.maxZoom+1))},a.prototype._cluster=function(P,A){for(var O=[],R=this.options,W=R.radius,F=R.extent,Z=R.reduce,V=R.minPoints,k=W/(F*Math.pow(2,A)),Y=0;Y<P.length;Y++){var K=P[Y];if(!(K.zoom<=A)){K.zoom=A;for(var it=this.trees[A+1],ct=it.within(K.x,K.y,k),ht=K.numPoints||1,ut=ht,It=0,Nt=ct;It<Nt.length;It+=1){var Lt=Nt[It],_t=it.points[Lt];_t.zoom>A&&(ut+=_t.numPoints||1)}if(ut>=V){for(var mt=K.x*ht,At=K.y*ht,rt=Z&&ht>1?this._map(K,!0):null,Mt=(Y<<5)+(A+1)+this.points.length,z=0,$=ct;z<$.length;z+=1){var dt=$[z],et=it.points[dt];if(!(et.zoom<=A)){et.zoom=A;var ot=et.numPoints||1;mt+=et.x*ot,At+=et.y*ot,et.parentId=Mt,Z&&(rt||(rt=this._map(K,!0)),Z(rt,this._map(et)))}}K.parentId=Mt,O.push(o(mt/ut,At/ut,Mt,ut,rt))}else if(O.push(K),ut>1)for(var pt=0,H=ct;pt<H.length;pt+=1){var nt=H[pt],at=it.points[nt];at.zoom<=A||(at.zoom=A,O.push(at))}}}return O},a.prototype._getOriginId=function(P){return P-this.points.length>>5},a.prototype._getOriginZoom=function(P){return(P-this.points.length)%32},a.prototype._map=function(P,A){if(P.numPoints)return A?M({},P.properties):P.properties;var O=this.points[P.index].properties,R=this.options.map(O);return A&&R===O?M({},R):R};function o(S,P,A,O,R){return{x:i(S),y:i(P),zoom:Infinity,id:A,parentId:-1,numPoints:O,properties:R}}function u(S,P){var A=S.geometry.coordinates,O=A[0],R=A[1];return{x:i(b(O)),y:i(y(R)),zoom:Infinity,index:P,parentId:-1}}function f(S){return{type:"Feature",id:S.id,properties:v(S),geometry:{type:"Point",coordinates:[g(S.x),_(S.y)]}}}function v(S){var P=S.numPoints,A=P>=1e4?Math.round(P/1e3)+"k":P>=1e3?Math.round(P/100)/10+"k":P;return M(M({},S.properties),{cluster:!0,cluster_id:S.id,point_count:P,point_count_abbreviated:A})}function b(S){return S/360+.5}function y(S){var P=Math.sin(S*Math.PI/180),A=.5-.25*Math.log((1+P)/(1-P))/Math.PI;return A<0?0:A>1?1:A}function g(S){return(S-.5)*360}function _(S){var P=(180-S*360)*Math.PI/180;return 360*Math.atan(Math.exp(P))/Math.PI-90}function M(S,P){for(var A in P)S[A]=P[A];return S}function x(S){return S.x}function m(S){return S.y}return a})},"mv/X":function(Se,ft,L){var U=L("ljhN"),E=L("MMmD"),T=L("wJg7"),e=L("GoyQ");function t(l,s,c){if(!e(c))return!1;var r=typeof s;return(r=="number"?E(c)&&T(s,c.length):r=="string"&&s in c)?U(c[s],l):!1}Se.exports=t},"n+fv":function(Se,ft,L){"use strict";L.r(ft),L.d(ft,"create",function(){return E}),L.d(ft,"clone",function(){return T}),L.d(ft,"length",function(){return e}),L.d(ft,"fromValues",function(){return t}),L.d(ft,"copy",function(){return l}),L.d(ft,"set",function(){return s}),L.d(ft,"add",function(){return c}),L.d(ft,"subtract",function(){return r}),L.d(ft,"multiply",function(){return h}),L.d(ft,"divide",function(){return n}),L.d(ft,"ceil",function(){return i}),L.d(ft,"floor",function(){return a}),L.d(ft,"min",function(){return o}),L.d(ft,"max",function(){return u}),L.d(ft,"round",function(){return f}),L.d(ft,"scale",function(){return v}),L.d(ft,"scaleAndAdd",function(){return b}),L.d(ft,"distance",function(){return y}),L.d(ft,"squaredDistance",function(){return g}),L.d(ft,"squaredLength",function(){return _}),L.d(ft,"negate",function(){return M}),L.d(ft,"inverse",function(){return x}),L.d(ft,"normalize",function(){return m}),L.d(ft,"dot",function(){return S}),L.d(ft,"cross",function(){return P}),L.d(ft,"lerp",function(){return A}),L.d(ft,"hermite",function(){return O}),L.d(ft,"bezier",function(){return R}),L.d(ft,"random",function(){return W}),L.d(ft,"transformMat4",function(){return F}),L.d(ft,"transformMat3",function(){return Z}),L.d(ft,"transformQuat",function(){return V}),L.d(ft,"rotateX",function(){return k}),L.d(ft,"rotateY",function(){return Y}),L.d(ft,"rotateZ",function(){return K}),L.d(ft,"angle",function(){return it}),L.d(ft,"zero",function(){return ct}),L.d(ft,"str",function(){return ht}),L.d(ft,"exactEquals",function(){return ut}),L.d(ft,"equals",function(){return It}),L.d(ft,"sub",function(){return Nt}),L.d(ft,"mul",function(){return Lt}),L.d(ft,"div",function(){return _t}),L.d(ft,"dist",function(){return mt}),L.d(ft,"sqrDist",function(){return At}),L.d(ft,"len",function(){return rt}),L.d(ft,"sqrLen",function(){return Mt}),L.d(ft,"forEach",function(){return z});var U=L("yU0y");function E(){var $=new U.a(3);return U.a!=Float32Array&&($[0]=0,$[1]=0,$[2]=0),$}function T($){var dt=new U.a(3);return dt[0]=$[0],dt[1]=$[1],dt[2]=$[2],dt}function e($){var dt=$[0],et=$[1],ot=$[2];return Math.hypot(dt,et,ot)}function t($,dt,et){var ot=new U.a(3);return ot[0]=$,ot[1]=dt,ot[2]=et,ot}function l($,dt){return $[0]=dt[0],$[1]=dt[1],$[2]=dt[2],$}function s($,dt,et,ot){return $[0]=dt,$[1]=et,$[2]=ot,$}function c($,dt,et){return $[0]=dt[0]+et[0],$[1]=dt[1]+et[1],$[2]=dt[2]+et[2],$}function r($,dt,et){return $[0]=dt[0]-et[0],$[1]=dt[1]-et[1],$[2]=dt[2]-et[2],$}function h($,dt,et){return $[0]=dt[0]*et[0],$[1]=dt[1]*et[1],$[2]=dt[2]*et[2],$}function n($,dt,et){return $[0]=dt[0]/et[0],$[1]=dt[1]/et[1],$[2]=dt[2]/et[2],$}function i($,dt){return $[0]=Math.ceil(dt[0]),$[1]=Math.ceil(dt[1]),$[2]=Math.ceil(dt[2]),$}function a($,dt){return $[0]=Math.floor(dt[0]),$[1]=Math.floor(dt[1]),$[2]=Math.floor(dt[2]),$}function o($,dt,et){return $[0]=Math.min(dt[0],et[0]),$[1]=Math.min(dt[1],et[1]),$[2]=Math.min(dt[2],et[2]),$}function u($,dt,et){return $[0]=Math.max(dt[0],et[0]),$[1]=Math.max(dt[1],et[1]),$[2]=Math.max(dt[2],et[2]),$}function f($,dt){return $[0]=Math.round(dt[0]),$[1]=Math.round(dt[1]),$[2]=Math.round(dt[2]),$}function v($,dt,et){return $[0]=dt[0]*et,$[1]=dt[1]*et,$[2]=dt[2]*et,$}function b($,dt,et,ot){return $[0]=dt[0]+et[0]*ot,$[1]=dt[1]+et[1]*ot,$[2]=dt[2]+et[2]*ot,$}function y($,dt){var et=dt[0]-$[0],ot=dt[1]-$[1],pt=dt[2]-$[2];return Math.hypot(et,ot,pt)}function g($,dt){var et=dt[0]-$[0],ot=dt[1]-$[1],pt=dt[2]-$[2];return et*et+ot*ot+pt*pt}function _($){var dt=$[0],et=$[1],ot=$[2];return dt*dt+et*et+ot*ot}function M($,dt){return $[0]=-dt[0],$[1]=-dt[1],$[2]=-dt[2],$}function x($,dt){return $[0]=1/dt[0],$[1]=1/dt[1],$[2]=1/dt[2],$}function m($,dt){var et=dt[0],ot=dt[1],pt=dt[2],H=et*et+ot*ot+pt*pt;return H>0&&(H=1/Math.sqrt(H)),$[0]=dt[0]*H,$[1]=dt[1]*H,$[2]=dt[2]*H,$}function S($,dt){return $[0]*dt[0]+$[1]*dt[1]+$[2]*dt[2]}function P($,dt,et){var ot=dt[0],pt=dt[1],H=dt[2],nt=et[0],at=et[1],q=et[2];return $[0]=pt*q-H*at,$[1]=H*nt-ot*q,$[2]=ot*at-pt*nt,$}function A($,dt,et,ot){var pt=dt[0],H=dt[1],nt=dt[2];return $[0]=pt+ot*(et[0]-pt),$[1]=H+ot*(et[1]-H),$[2]=nt+ot*(et[2]-nt),$}function O($,dt,et,ot,pt,H){var nt=H*H,at=nt*(2*H-3)+1,q=nt*(H-2)+H,Et=nt*(H-1),vt=nt*(3-2*H);return $[0]=dt[0]*at+et[0]*q+ot[0]*Et+pt[0]*vt,$[1]=dt[1]*at+et[1]*q+ot[1]*Et+pt[1]*vt,$[2]=dt[2]*at+et[2]*q+ot[2]*Et+pt[2]*vt,$}function R($,dt,et,ot,pt,H){var nt=1-H,at=nt*nt,q=H*H,Et=at*nt,vt=3*H*at,Ft=3*q*nt,Qt=q*H;return $[0]=dt[0]*Et+et[0]*vt+ot[0]*Ft+pt[0]*Qt,$[1]=dt[1]*Et+et[1]*vt+ot[1]*Ft+pt[1]*Qt,$[2]=dt[2]*Et+et[2]*vt+ot[2]*Ft+pt[2]*Qt,$}function W($,dt){dt=dt||1;var et=U.c()*2*Math.PI,ot=U.c()*2-1,pt=Math.sqrt(1-ot*ot)*dt;return $[0]=Math.cos(et)*pt,$[1]=Math.sin(et)*pt,$[2]=ot*dt,$}function F($,dt,et){var ot=dt[0],pt=dt[1],H=dt[2],nt=et[3]*ot+et[7]*pt+et[11]*H+et[15];return nt=nt||1,$[0]=(et[0]*ot+et[4]*pt+et[8]*H+et[12])/nt,$[1]=(et[1]*ot+et[5]*pt+et[9]*H+et[13])/nt,$[2]=(et[2]*ot+et[6]*pt+et[10]*H+et[14])/nt,$}function Z($,dt,et){var ot=dt[0],pt=dt[1],H=dt[2];return $[0]=ot*et[0]+pt*et[3]+H*et[6],$[1]=ot*et[1]+pt*et[4]+H*et[7],$[2]=ot*et[2]+pt*et[5]+H*et[8],$}function V($,dt,et){var ot=et[0],pt=et[1],H=et[2],nt=et[3],at=dt[0],q=dt[1],Et=dt[2],vt=pt*Et-H*q,Ft=H*at-ot*Et,Qt=ot*q-pt*at,ee=pt*Qt-H*Ft,Gt=H*vt-ot*Qt,$t=ot*Ft-pt*vt,Pe=nt*2;return vt*=Pe,Ft*=Pe,Qt*=Pe,ee*=2,Gt*=2,$t*=2,$[0]=at+vt+ee,$[1]=q+Ft+Gt,$[2]=Et+Qt+$t,$}function k($,dt,et,ot){var pt=[],H=[];return pt[0]=dt[0]-et[0],pt[1]=dt[1]-et[1],pt[2]=dt[2]-et[2],H[0]=pt[0],H[1]=pt[1]*Math.cos(ot)-pt[2]*Math.sin(ot),H[2]=pt[1]*Math.sin(ot)+pt[2]*Math.cos(ot),$[0]=H[0]+et[0],$[1]=H[1]+et[1],$[2]=H[2]+et[2],$}function Y($,dt,et,ot){var pt=[],H=[];return pt[0]=dt[0]-et[0],pt[1]=dt[1]-et[1],pt[2]=dt[2]-et[2],H[0]=pt[2]*Math.sin(ot)+pt[0]*Math.cos(ot),H[1]=pt[1],H[2]=pt[2]*Math.cos(ot)-pt[0]*Math.sin(ot),$[0]=H[0]+et[0],$[1]=H[1]+et[1],$[2]=H[2]+et[2],$}function K($,dt,et,ot){var pt=[],H=[];return pt[0]=dt[0]-et[0],pt[1]=dt[1]-et[1],pt[2]=dt[2]-et[2],H[0]=pt[0]*Math.cos(ot)-pt[1]*Math.sin(ot),H[1]=pt[0]*Math.sin(ot)+pt[1]*Math.cos(ot),H[2]=pt[2],$[0]=H[0]+et[0],$[1]=H[1]+et[1],$[2]=H[2]+et[2],$}function it($,dt){var et=$[0],ot=$[1],pt=$[2],H=dt[0],nt=dt[1],at=dt[2],q=Math.sqrt(et*et+ot*ot+pt*pt),Et=Math.sqrt(H*H+nt*nt+at*at),vt=q*Et,Ft=vt&&S($,dt)/vt;return Math.acos(Math.min(Math.max(Ft,-1),1))}function ct($){return $[0]=0,$[1]=0,$[2]=0,$}function ht($){return"vec3("+$[0]+", "+$[1]+", "+$[2]+")"}function ut($,dt){return $[0]===dt[0]&&$[1]===dt[1]&&$[2]===dt[2]}function It($,dt){var et=$[0],ot=$[1],pt=$[2],H=dt[0],nt=dt[1],at=dt[2];return Math.abs(et-H)<=U.b*Math.max(1,Math.abs(et),Math.abs(H))&&Math.abs(ot-nt)<=U.b*Math.max(1,Math.abs(ot),Math.abs(nt))&&Math.abs(pt-at)<=U.b*Math.max(1,Math.abs(pt),Math.abs(at))}var Nt=r,Lt=h,_t=n,mt=y,At=g,rt=e,Mt=_,z=function(){var $=E();return function(dt,et,ot,pt,H,nt){var at,q;for(et||(et=3),ot||(ot=0),pt?q=Math.min(pt*et+ot,dt.length):q=dt.length,at=ot;at<q;at+=et)$[0]=dt[at],$[1]=dt[at+1],$[2]=dt[at+2],H($,$,nt),dt[at]=$[0],dt[at+1]=$[1],dt[at+2]=$[2];return dt}}()},n2J3:function(Se,ft,L){"use strict";Object.defineProperty(ft,"__esModule",{value:!0}),ft.unmanaged=void 0;var U=L("xfSm"),E=L("GXnB"),T=L("Ztfv");function e(){return function(t,l,s){var c=new E.Metadata(U.UNMANAGED_TAG,!0);T.tagParameter(t,l,s,c)}}ft.unmanaged=e},n3AX:function(Se,ft,L){var U=L("Nsbk");function E(T,e){for(;!Object.prototype.hasOwnProperty.call(T,e)&&(T=U(T),T!==null););return T}Se.exports=E,Se.exports.default=Se.exports,Se.exports.__esModule=!0},"o+pz":function(Se,ft,L){"use strict";L.d(ft,"a",function(){return U});var U;(function(E){E[E.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",E[E.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",E[E.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",E[E.POINTS=0]="POINTS",E[E.LINES=1]="LINES",E[E.LINE_LOOP=2]="LINE_LOOP",E[E.LINE_STRIP=3]="LINE_STRIP",E[E.TRIANGLES=4]="TRIANGLES",E[E.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",E[E.TRIANGLE_FAN=6]="TRIANGLE_FAN",E[E.ZERO=0]="ZERO",E[E.ONE=1]="ONE",E[E.SRC_COLOR=768]="SRC_COLOR",E[E.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",E[E.SRC_ALPHA=770]="SRC_ALPHA",E[E.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",E[E.DST_ALPHA=772]="DST_ALPHA",E[E.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",E[E.DST_COLOR=774]="DST_COLOR",E[E.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",E[E.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",E[E.FUNC_ADD=32774]="FUNC_ADD",E[E.BLEND_EQUATION=32777]="BLEND_EQUATION",E[E.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",E[E.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",E[E.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",E[E.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",E[E.MAX_EXT=32776]="MAX_EXT",E[E.MIN_EXT=32775]="MIN_EXT",E[E.BLEND_DST_RGB=32968]="BLEND_DST_RGB",E[E.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",E[E.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",E[E.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",E[E.CONSTANT_COLOR=32769]="CONSTANT_COLOR",E[E.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",E[E.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",E[E.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",E[E.BLEND_COLOR=32773]="BLEND_COLOR",E[E.ARRAY_BUFFER=34962]="ARRAY_BUFFER",E[E.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",E[E.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",E[E.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",E[E.STREAM_DRAW=35040]="STREAM_DRAW",E[E.STATIC_DRAW=35044]="STATIC_DRAW",E[E.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",E[E.BUFFER_SIZE=34660]="BUFFER_SIZE",E[E.BUFFER_USAGE=34661]="BUFFER_USAGE",E[E.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",E[E.FRONT=1028]="FRONT",E[E.BACK=1029]="BACK",E[E.FRONT_AND_BACK=1032]="FRONT_AND_BACK",E[E.CULL_FACE=2884]="CULL_FACE",E[E.BLEND=3042]="BLEND",E[E.DITHER=3024]="DITHER",E[E.STENCIL_TEST=2960]="STENCIL_TEST",E[E.DEPTH_TEST=2929]="DEPTH_TEST",E[E.SCISSOR_TEST=3089]="SCISSOR_TEST",E[E.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",E[E.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",E[E.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",E[E.NO_ERROR=0]="NO_ERROR",E[E.INVALID_ENUM=1280]="INVALID_ENUM",E[E.INVALID_VALUE=1281]="INVALID_VALUE",E[E.INVALID_OPERATION=1282]="INVALID_OPERATION",E[E.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",E[E.CW=2304]="CW",E[E.CCW=2305]="CCW",E[E.LINE_WIDTH=2849]="LINE_WIDTH",E[E.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",E[E.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",E[E.CULL_FACE_MODE=2885]="CULL_FACE_MODE",E[E.FRONT_FACE=2886]="FRONT_FACE",E[E.DEPTH_RANGE=2928]="DEPTH_RANGE",E[E.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",E[E.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",E[E.DEPTH_FUNC=2932]="DEPTH_FUNC",E[E.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",E[E.STENCIL_FUNC=2962]="STENCIL_FUNC",E[E.STENCIL_FAIL=2964]="STENCIL_FAIL",E[E.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",E[E.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",E[E.STENCIL_REF=2967]="STENCIL_REF",E[E.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",E[E.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",E[E.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",E[E.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",E[E.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",E[E.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",E[E.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",E[E.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",E[E.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",E[E.VIEWPORT=2978]="VIEWPORT",E[E.SCISSOR_BOX=3088]="SCISSOR_BOX",E[E.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",E[E.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",E[E.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",E[E.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",E[E.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",E[E.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",E[E.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",E[E.RED_BITS=3410]="RED_BITS",E[E.GREEN_BITS=3411]="GREEN_BITS",E[E.BLUE_BITS=3412]="BLUE_BITS",E[E.ALPHA_BITS=3413]="ALPHA_BITS",E[E.DEPTH_BITS=3414]="DEPTH_BITS",E[E.STENCIL_BITS=3415]="STENCIL_BITS",E[E.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",E[E.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",E[E.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",E[E.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",E[E.SAMPLES=32937]="SAMPLES",E[E.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",E[E.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",E[E.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",E[E.DONT_CARE=4352]="DONT_CARE",E[E.FASTEST=4353]="FASTEST",E[E.NICEST=4354]="NICEST",E[E.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",E[E.BYTE=5120]="BYTE",E[E.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",E[E.SHORT=5122]="SHORT",E[E.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",E[E.INT=5124]="INT",E[E.UNSIGNED_INT=5125]="UNSIGNED_INT",E[E.FLOAT=5126]="FLOAT",E[E.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",E[E.ALPHA=6406]="ALPHA",E[E.RGB=6407]="RGB",E[E.RGBA=6408]="RGBA",E[E.LUMINANCE=6409]="LUMINANCE",E[E.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",E[E.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",E[E.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",E[E.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",E[E.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",E[E.VERTEX_SHADER=35633]="VERTEX_SHADER",E[E.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",E[E.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",E[E.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",E[E.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",E[E.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",E[E.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",E[E.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",E[E.SHADER_TYPE=35663]="SHADER_TYPE",E[E.DELETE_STATUS=35712]="DELETE_STATUS",E[E.LINK_STATUS=35714]="LINK_STATUS",E[E.VALIDATE_STATUS=35715]="VALIDATE_STATUS",E[E.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",E[E.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",E[E.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",E[E.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",E[E.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",E[E.NEVER=512]="NEVER",E[E.LESS=513]="LESS",E[E.EQUAL=514]="EQUAL",E[E.LEQUAL=515]="LEQUAL",E[E.GREATER=516]="GREATER",E[E.NOTEQUAL=517]="NOTEQUAL",E[E.GEQUAL=518]="GEQUAL",E[E.ALWAYS=519]="ALWAYS",E[E.KEEP=7680]="KEEP",E[E.REPLACE=7681]="REPLACE",E[E.INCR=7682]="INCR",E[E.DECR=7683]="DECR",E[E.INVERT=5386]="INVERT",E[E.INCR_WRAP=34055]="INCR_WRAP",E[E.DECR_WRAP=34056]="DECR_WRAP",E[E.VENDOR=7936]="VENDOR",E[E.RENDERER=7937]="RENDERER",E[E.VERSION=7938]="VERSION",E[E.NEAREST=9728]="NEAREST",E[E.LINEAR=9729]="LINEAR",E[E.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",E[E.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",E[E.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",E[E.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",E[E.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",E[E.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",E[E.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",E[E.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",E[E.TEXTURE_2D=3553]="TEXTURE_2D",E[E.TEXTURE=5890]="TEXTURE",E[E.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",E[E.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",E[E.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",E[E.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",E[E.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",E[E.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",E[E.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",E[E.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",E[E.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",E[E.TEXTURE0=33984]="TEXTURE0",E[E.TEXTURE1=33985]="TEXTURE1",E[E.TEXTURE2=33986]="TEXTURE2",E[E.TEXTURE3=33987]="TEXTURE3",E[E.TEXTURE4=33988]="TEXTURE4",E[E.TEXTURE5=33989]="TEXTURE5",E[E.TEXTURE6=33990]="TEXTURE6",E[E.TEXTURE7=33991]="TEXTURE7",E[E.TEXTURE8=33992]="TEXTURE8",E[E.TEXTURE9=33993]="TEXTURE9",E[E.TEXTURE10=33994]="TEXTURE10",E[E.TEXTURE11=33995]="TEXTURE11",E[E.TEXTURE12=33996]="TEXTURE12",E[E.TEXTURE13=33997]="TEXTURE13",E[E.TEXTURE14=33998]="TEXTURE14",E[E.TEXTURE15=33999]="TEXTURE15",E[E.TEXTURE16=34e3]="TEXTURE16",E[E.TEXTURE17=34001]="TEXTURE17",E[E.TEXTURE18=34002]="TEXTURE18",E[E.TEXTURE19=34003]="TEXTURE19",E[E.TEXTURE20=34004]="TEXTURE20",E[E.TEXTURE21=34005]="TEXTURE21",E[E.TEXTURE22=34006]="TEXTURE22",E[E.TEXTURE23=34007]="TEXTURE23",E[E.TEXTURE24=34008]="TEXTURE24",E[E.TEXTURE25=34009]="TEXTURE25",E[E.TEXTURE26=34010]="TEXTURE26",E[E.TEXTURE27=34011]="TEXTURE27",E[E.TEXTURE28=34012]="TEXTURE28",E[E.TEXTURE29=34013]="TEXTURE29",E[E.TEXTURE30=34014]="TEXTURE30",E[E.TEXTURE31=34015]="TEXTURE31",E[E.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",E[E.REPEAT=10497]="REPEAT",E[E.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",E[E.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",E[E.FLOAT_VEC2=35664]="FLOAT_VEC2",E[E.FLOAT_VEC3=35665]="FLOAT_VEC3",E[E.FLOAT_VEC4=35666]="FLOAT_VEC4",E[E.INT_VEC2=35667]="INT_VEC2",E[E.INT_VEC3=35668]="INT_VEC3",E[E.INT_VEC4=35669]="INT_VEC4",E[E.BOOL=35670]="BOOL",E[E.BOOL_VEC2=35671]="BOOL_VEC2",E[E.BOOL_VEC3=35672]="BOOL_VEC3",E[E.BOOL_VEC4=35673]="BOOL_VEC4",E[E.FLOAT_MAT2=35674]="FLOAT_MAT2",E[E.FLOAT_MAT3=35675]="FLOAT_MAT3",E[E.FLOAT_MAT4=35676]="FLOAT_MAT4",E[E.SAMPLER_2D=35678]="SAMPLER_2D",E[E.SAMPLER_CUBE=35680]="SAMPLER_CUBE",E[E.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",E[E.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",E[E.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",E[E.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",E[E.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",E[E.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",E[E.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",E[E.COMPILE_STATUS=35713]="COMPILE_STATUS",E[E.LOW_FLOAT=36336]="LOW_FLOAT",E[E.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",E[E.HIGH_FLOAT=36338]="HIGH_FLOAT",E[E.LOW_INT=36339]="LOW_INT",E[E.MEDIUM_INT=36340]="MEDIUM_INT",E[E.HIGH_INT=36341]="HIGH_INT",E[E.FRAMEBUFFER=36160]="FRAMEBUFFER",E[E.RENDERBUFFER=36161]="RENDERBUFFER",E[E.RGBA4=32854]="RGBA4",E[E.RGB5_A1=32855]="RGB5_A1",E[E.RGB565=36194]="RGB565",E[E.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",E[E.STENCIL_INDEX=6401]="STENCIL_INDEX",E[E.STENCIL_INDEX8=36168]="STENCIL_INDEX8",E[E.DEPTH_STENCIL=34041]="DEPTH_STENCIL",E[E.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",E[E.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",E[E.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",E[E.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",E[E.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",E[E.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",E[E.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",E[E.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",E[E.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",E[E.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",E[E.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",E[E.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",E[E.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",E[E.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",E[E.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",E[E.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",E[E.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",E[E.NONE=0]="NONE",E[E.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",E[E.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",E[E.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",E[E.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",E[E.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",E[E.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",E[E.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",E[E.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",E[E.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",E[E.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",E[E.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",E[E.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",E[E.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",E[E.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL"})(U||(U={}))},"oCl/":function(Se,ft,L){var U=L("CH3K"),E=L("LcsW"),T=L("MvSz"),e=L("0ycA"),t=Object.getOwnPropertySymbols,l=t?function(s){for(var c=[];s;)U(c,T(s)),s=E(s);return c}:e;Se.exports=l},oIFs:function(Se,ft,L){Se.exports={"ant-skeleton":"ant-skeleton","ant-skeleton-header":"ant-skeleton-header","ant-skeleton-avatar":"ant-skeleton-avatar","ant-skeleton-avatar-circle":"ant-skeleton-avatar-circle","ant-skeleton-avatar-lg":"ant-skeleton-avatar-lg","ant-skeleton-avatar-sm":"ant-skeleton-avatar-sm","ant-skeleton-content":"ant-skeleton-content","ant-skeleton-title":"ant-skeleton-title","ant-skeleton-paragraph":"ant-skeleton-paragraph","ant-skeleton-with-avatar":"ant-skeleton-with-avatar","ant-skeleton-round":"ant-skeleton-round","ant-skeleton-active":"ant-skeleton-active","ant-skeleton-loading":"ant-skeleton-loading","ant-skeleton-button":"ant-skeleton-button","ant-skeleton-input":"ant-skeleton-input","ant-skeleton-image":"ant-skeleton-image","ant-skeleton-element":"ant-skeleton-element","ant-skeleton-button-circle":"ant-skeleton-button-circle","ant-skeleton-button-round":"ant-skeleton-button-round","ant-skeleton-button-lg":"ant-skeleton-button-lg","ant-skeleton-button-sm":"ant-skeleton-button-sm","ant-skeleton-input-lg":"ant-skeleton-input-lg","ant-skeleton-input-sm":"ant-skeleton-input-sm","ant-skeleton-image-circle":"ant-skeleton-image-circle","ant-skeleton-image-path":"ant-skeleton-image-path","ant-skeleton-image-svg":"ant-skeleton-image-svg","ant-skeleton-rtl":"ant-skeleton-rtl","ant-skeleton-loading-rtl":"ant-skeleton-loading-rtl"}},oShl:function(Se,ft,L){var U=L("Nsbk"),E=L("SksO"),T=L("xfeJ"),e=L("sXyB");function t(l){var s=typeof Map=="function"?new Map:void 0;return Se.exports=t=function(r){if(r===null||!T(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof s!="undefined"){if(s.has(r))return s.get(r);s.set(r,h)}function h(){return e(r,arguments,U(this).constructor)}return h.prototype=Object.create(r.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),E(h,r)},Se.exports.default=Se.exports,Se.exports.__esModule=!0,t(l)}Se.exports=t,Se.exports.default=Se.exports,Se.exports.__esModule=!0},oaX6:function(Se,ft,L){"use strict";Object.defineProperty(ft,"__esModule",{value:!0}),ft.targetName=void 0;var U=L("xfSm"),E=L("GXnB"),T=L("Ztfv");function e(t){return function(l,s,c){var r=new E.Metadata(U.NAME_TAG,t);T.tagParameter(l,s,c,r)}}ft.targetName=e},"otv/":function(Se,ft,L){var U=L("nmnc"),E=U?U.prototype:void 0,T=E?E.valueOf:void 0;function e(t){return T?Object(T.call(t)):{}}Se.exports=e},"oy+k":function(Se,ft,L){"use strict";Object.defineProperty(ft,"__esModule",{value:!0}),ft.Context=void 0;var U=L("d9O0"),E=function(){function T(e){this.id=U.id(),this.container=e}return T.prototype.addPlan=function(e){this.plan=e},T.prototype.setCurrentRequest=function(e){this.currentRequest=e},T}();ft.Context=E},pFRH:function(Se,ft,L){var U=L("cvCv"),E=L("O0oS"),T=L("zZ0H"),e=E?function(t,l){return E(t,"toString",{configurable:!0,enumerable:!1,value:U(l),writable:!0})}:T;Se.exports=e},q4HE:function(Se,ft){var L="\\ud800-\\udfff",U="\\u0300-\\u036f",E="\\ufe20-\\ufe2f",T="\\u20d0-\\u20ff",e=U+E+T,t="\\ufe0e\\ufe0f",l="["+L+"]",s="["+e+"]",c="\\ud83c[\\udffb-\\udfff]",r="(?:"+s+"|"+c+")",h="[^"+L+"]",n="(?:\\ud83c[\\udde6-\\uddff]){2}",i="[\\ud800-\\udbff][\\udc00-\\udfff]",a="\\u200d",o=r+"?",u="["+t+"]?",f="(?:"+a+"(?:"+[h,n,i].join("|")+")"+u+o+")*",v=u+o+f,b="(?:"+[h+s+"?",s,n,i,l].join("|")+")",y=RegExp(c+"(?="+c+")|"+b+v,"g");function g(_){for(var M=y.lastIndex=0;y.test(_);)++M;return M}Se.exports=g},qK8v:function(Se,ft,L){"use strict";Object.defineProperty(ft,"__esModule",{value:!0}),ft.isStackOverflowExeption=void 0;var U=L("MON2");function E(T){return T instanceof RangeError||T.message===U.STACK_OVERFLOW}ft.isStackOverflowExeption=E},qRkn:function(Se,ft,L){var U=L("3cYt"),E={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},T=U(E);Se.exports=T},qd8s:function(Se,ft,L){(function(U,E){var T=200,e="__lodash_hash_undefined__",t=800,l=16,s=9007199254740991,c="[object Arguments]",r="[object Array]",h="[object AsyncFunction]",n="[object Boolean]",i="[object Date]",a="[object Error]",o="[object Function]",u="[object GeneratorFunction]",f="[object Map]",v="[object Number]",b="[object Null]",y="[object Object]",g="[object Proxy]",_="[object RegExp]",M="[object Set]",x="[object String]",m="[object Undefined]",S="[object WeakMap]",P="[object ArrayBuffer]",A="[object DataView]",O="[object Float32Array]",R="[object Float64Array]",W="[object Int8Array]",F="[object Int16Array]",Z="[object Int32Array]",V="[object Uint8Array]",k="[object Uint8ClampedArray]",Y="[object Uint16Array]",K="[object Uint32Array]",it=/[\\^$.*+?()[\]{}|]/g,ct=/^\[object .+?Constructor\]$/,ht=/^(?:0|[1-9]\d*)$/,ut={};ut[O]=ut[R]=ut[W]=ut[F]=ut[Z]=ut[V]=ut[k]=ut[Y]=ut[K]=!0,ut[c]=ut[r]=ut[P]=ut[n]=ut[A]=ut[i]=ut[a]=ut[o]=ut[f]=ut[v]=ut[y]=ut[_]=ut[M]=ut[x]=ut[S]=!1;var It=typeof U=="object"&&U&&U.Object===Object&&U,Nt=typeof self=="object"&&self&&self.Object===Object&&self,Lt=It||Nt||Function("return this")(),_t=ft&&!ft.nodeType&&ft,mt=_t&&typeof E=="object"&&E&&!E.nodeType&&E,At=mt&&mt.exports===_t,rt=At&&It.process,Mt=function(){try{var yn=mt&&mt.require&&mt.require("util").types;return yn||rt&&rt.binding&&rt.binding("util")}catch(dr){}}(),z=Mt&&Mt.isTypedArray;function $(yn,dr,kr){switch(kr.length){case 0:return yn.call(dr);case 1:return yn.call(dr,kr[0]);case 2:return yn.call(dr,kr[0],kr[1]);case 3:return yn.call(dr,kr[0],kr[1],kr[2])}return yn.apply(dr,kr)}function dt(yn,dr){for(var kr=-1,Ui=Array(yn);++kr<yn;)Ui[kr]=dr(kr);return Ui}function et(yn){return function(dr){return yn(dr)}}function ot(yn,dr){return yn==null?void 0:yn[dr]}function pt(yn,dr){return function(kr){return yn(dr(kr))}}var H=Array.prototype,nt=Function.prototype,at=Object.prototype,q=Lt["__core-js_shared__"],Et=nt.toString,vt=at.hasOwnProperty,Ft=function(){var yn=/[^.]+$/.exec(q&&q.keys&&q.keys.IE_PROTO||"");return yn?"Symbol(src)_1."+yn:""}(),Qt=at.toString,ee=Et.call(Object),Gt=RegExp("^"+Et.call(vt).replace(it,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$t=At?Lt.Buffer:void 0,Pe=Lt.Symbol,me=Lt.Uint8Array,le=$t?$t.allocUnsafe:void 0,be=pt(Object.getPrototypeOf,Object),ze=Object.create,Xe=at.propertyIsEnumerable,_n=H.splice,Kn=Pe?Pe.toStringTag:void 0,Hn=function(){try{var yn=lu(Object,"defineProperty");return yn({},"",{}),yn}catch(dr){}}(),nn=$t?$t.isBuffer:void 0,en=Math.max,An=Date.now,Nn=lu(Lt,"Map"),hr=lu(Object,"create"),fi=function(){function yn(){}return function(dr){if(!Qa(dr))return{};if(ze)return ze(dr);yn.prototype=dr;var kr=new yn;return yn.prototype=void 0,kr}}();function Oe(yn){var dr=-1,kr=yn==null?0:yn.length;for(this.clear();++dr<kr;){var Ui=yn[dr];this.set(Ui[0],Ui[1])}}function Ae(){this.__data__=hr?hr(null):{},this.size=0}function Jt(yn){var dr=this.has(yn)&&delete this.__data__[yn];return this.size-=dr?1:0,dr}function ve(yn){var dr=this.__data__;if(hr){var kr=dr[yn];return kr===e?void 0:kr}return vt.call(dr,yn)?dr[yn]:void 0}function Vt(yn){var dr=this.__data__;return hr?dr[yn]!==void 0:vt.call(dr,yn)}function ie(yn,dr){var kr=this.__data__;return this.size+=this.has(yn)?0:1,kr[yn]=hr&&dr===void 0?e:dr,this}Oe.prototype.clear=Ae,Oe.prototype.delete=Jt,Oe.prototype.get=ve,Oe.prototype.has=Vt,Oe.prototype.set=ie;function Ce(yn){var dr=-1,kr=yn==null?0:yn.length;for(this.clear();++dr<kr;){var Ui=yn[dr];this.set(Ui[0],Ui[1])}}function ue(){this.__data__=[],this.size=0}function xe(yn){var dr=this.__data__,kr=nr(dr,yn);if(kr<0)return!1;var Ui=dr.length-1;return kr==Ui?dr.pop():_n.call(dr,kr,1),--this.size,!0}function $e(yn){var dr=this.__data__,kr=nr(dr,yn);return kr<0?void 0:dr[kr][1]}function Fn(yn){return nr(this.__data__,yn)>-1}function rr(yn,dr){var kr=this.__data__,Ui=nr(kr,yn);return Ui<0?(++this.size,kr.push([yn,dr])):kr[Ui][1]=dr,this}Ce.prototype.clear=ue,Ce.prototype.delete=xe,Ce.prototype.get=$e,Ce.prototype.has=Fn,Ce.prototype.set=rr;function En(yn){var dr=-1,kr=yn==null?0:yn.length;for(this.clear();++dr<kr;){var Ui=yn[dr];this.set(Ui[0],Ui[1])}}function Pn(){this.size=0,this.__data__={hash:new Oe,map:new(Nn||Ce),string:new Oe}}function Er(yn){var dr=Bo(this,yn).delete(yn);return this.size-=dr?1:0,dr}function Pr(yn){return Bo(this,yn).get(yn)}function ln(yn){return Bo(this,yn).has(yn)}function Cr(yn,dr){var kr=Bo(this,yn),Ui=kr.size;return kr.set(yn,dr),this.size+=kr.size==Ui?0:1,this}En.prototype.clear=Pn,En.prototype.delete=Er,En.prototype.get=Pr,En.prototype.has=ln,En.prototype.set=Cr;function Ar(yn){var dr=this.__data__=new Ce(yn);this.size=dr.size}function je(){this.__data__=new Ce,this.size=0}function We(yn){var dr=this.__data__,kr=dr.delete(yn);return this.size=dr.size,kr}function Ye(yn){return this.__data__.get(yn)}function fn(yn){return this.__data__.has(yn)}function mn(yn,dr){var kr=this.__data__;if(kr instanceof Ce){var Ui=kr.__data__;if(!Nn||Ui.length<T-1)return Ui.push([yn,dr]),this.size=++kr.size,this;kr=this.__data__=new En(Ui)}return kr.set(yn,dr),this.size=kr.size,this}Ar.prototype.clear=je,Ar.prototype.delete=We,Ar.prototype.get=Ye,Ar.prototype.has=fn,Ar.prototype.set=mn;function jn(yn,dr){var kr=$a(yn),Ui=!kr&&sa(yn),Ja=!kr&&!Ui&&Fa(yn),So=!kr&&!Ui&&!Ja&&No(yn),po=kr||Ui||Ja||So,ea=po?dt(yn.length,String):[],to=ea.length;for(var bs in yn)(dr||vt.call(yn,bs))&&!(po&&(bs=="length"||Ja&&(bs=="offset"||bs=="parent")||So&&(bs=="buffer"||bs=="byteLength"||bs=="byteOffset")||$s(bs,to)))&&ea.push(bs);return ea}function bn(yn,dr,kr){(kr!==void 0&&!ki(yn[dr],kr)||kr===void 0&&!(dr in yn))&&Yn(yn,dr,kr)}function Ln(yn,dr,kr){var Ui=yn[dr];(!(vt.call(yn,dr)&&ki(Ui,kr))||kr===void 0&&!(dr in yn))&&Yn(yn,dr,kr)}function nr(yn,dr){for(var kr=yn.length;kr--;)if(ki(yn[kr][0],dr))return kr;return-1}function Yn(yn,dr,kr){dr=="__proto__"&&Hn?Hn(yn,dr,{configurable:!0,enumerable:!0,value:kr,writable:!0}):yn[dr]=kr}var Mn=Vo();function Rr(yn){return yn==null?yn===void 0?m:b:Kn&&Kn in Object(yn)?Jo(yn):Un(yn)}function pr(yn){return Ao(yn)&&Rr(yn)==c}function zr(yn){if(!Qa(yn)||Wt(yn))return!1;var dr=oo(yn)?Gt:ct;return dr.test(Ti(yn))}function Pi(yn){return Ao(yn)&&Eo(yn.length)&&!!ut[Rr(yn)]}function Oa(yn){if(!Qa(yn))return an(yn);var dr=Ee(yn),kr=[];for(var Ui in yn)Ui=="constructor"&&(dr||!vt.call(yn,Ui))||kr.push(Ui);return kr}function Ua(yn,dr,kr,Ui,Ja){yn!==dr&&Mn(dr,function(So,po){if(Ja||(Ja=new Ar),Qa(So))ro(yn,dr,po,kr,Ua,Ui,Ja);else{var ea=Ui?Ui(kn(yn,po),So,po+"",yn,dr,Ja):void 0;ea===void 0&&(ea=So),bn(yn,po,ea)}},Co)}function ro(yn,dr,kr,Ui,Ja,So,po){var ea=kn(yn,kr),to=kn(dr,kr),bs=po.get(to);if(bs){bn(yn,kr,bs);return}var Es=So?So(ea,to,kr+"",yn,dr,po):void 0,ka=Es===void 0;if(ka){var bu=$a(to),Wo=!bu&&Fa(to),As=!bu&&!Wo&&No(to);Es=to,bu||Wo||As?$a(ea)?Es=ea:bo(ea)?Es=To(ea):Wo?(ka=!1,Es=co(to,!0)):As?(ka=!1,Es=io(to,!0)):Es=[]:as(to)||sa(to)?(Es=ea,sa(ea)?Es=xs(ea):(!Qa(ea)||oo(ea))&&(Es=iu(to))):ka=!1}ka&&(po.set(to,Es),Ja(Es,to,Ui,So,po),po.delete(to)),bn(yn,kr,Es)}function Ko(yn,dr){return Xr(qn(yn,dr,ls),yn+"")}var _a=Hn?function(yn,dr){return Hn(yn,"toString",{configurable:!0,enumerable:!1,value:Ts(dr),writable:!0})}:ls;function co(yn,dr){if(dr)return yn.slice();var kr=yn.length,Ui=le?le(kr):new yn.constructor(kr);return yn.copy(Ui),Ui}function Xo(yn){var dr=new yn.constructor(yn.byteLength);return new me(dr).set(new me(yn)),dr}function io(yn,dr){var kr=dr?Xo(yn.buffer):yn.buffer;return new yn.constructor(kr,yn.byteOffset,yn.length)}function To(yn,dr){var kr=-1,Ui=yn.length;for(dr||(dr=Array(Ui));++kr<Ui;)dr[kr]=yn[kr];return dr}function ds(yn,dr,kr,Ui){var Ja=!kr;kr||(kr={});for(var So=-1,po=dr.length;++So<po;){var ea=dr[So],to=Ui?Ui(kr[ea],yn[ea],ea,kr,yn):void 0;to===void 0&&(to=yn[ea]),Ja?Yn(kr,ea,to):Ln(kr,ea,to)}return kr}function La(yn){return Ko(function(dr,kr){var Ui=-1,Ja=kr.length,So=Ja>1?kr[Ja-1]:void 0,po=Ja>2?kr[2]:void 0;for(So=yn.length>3&&typeof So=="function"?(Ja--,So):void 0,po&&Ne(kr[0],kr[1],po)&&(So=Ja<3?void 0:So,Ja=1),dr=Object(dr);++Ui<Ja;){var ea=kr[Ui];ea&&yn(dr,ea,Ui,So)}return dr})}function Vo(yn){return function(dr,kr,Ui){for(var Ja=-1,So=Object(dr),po=Ui(dr),ea=po.length;ea--;){var to=po[yn?ea:++Ja];if(kr(So[to],to,So)===!1)break}return dr}}function Bo(yn,dr){var kr=yn.__data__;return oe(dr)?kr[typeof dr=="string"?"string":"hash"]:kr.map}function lu(yn,dr){var kr=ot(yn,dr);return zr(kr)?kr:void 0}function Jo(yn){var dr=vt.call(yn,Kn),kr=yn[Kn];try{yn[Kn]=void 0;var Ui=!0}catch(So){}var Ja=Qt.call(yn);return Ui&&(dr?yn[Kn]=kr:delete yn[Kn]),Ja}function iu(yn){return typeof yn.constructor=="function"&&!Ee(yn)?fi(be(yn)):{}}function $s(yn,dr){var kr=typeof yn;return dr=dr==null?s:dr,!!dr&&(kr=="number"||kr!="symbol"&&ht.test(yn))&&yn>-1&&yn%1==0&&yn<dr}function Ne(yn,dr,kr){if(!Qa(kr))return!1;var Ui=typeof dr;return(Ui=="number"?ba(kr)&&$s(dr,kr.length):Ui=="string"&&dr in kr)?ki(kr[dr],yn):!1}function oe(yn){var dr=typeof yn;return dr=="string"||dr=="number"||dr=="symbol"||dr=="boolean"?yn!=="__proto__":yn===null}function Wt(yn){return!!Ft&&Ft in yn}function Ee(yn){var dr=yn&&yn.constructor,kr=typeof dr=="function"&&dr.prototype||at;return yn===kr}function an(yn){var dr=[];if(yn!=null)for(var kr in Object(yn))dr.push(kr);return dr}function Un(yn){return Qt.call(yn)}function qn(yn,dr,kr){return dr=en(dr===void 0?yn.length-1:dr,0),function(){for(var Ui=arguments,Ja=-1,So=en(Ui.length-dr,0),po=Array(So);++Ja<So;)po[Ja]=Ui[dr+Ja];Ja=-1;for(var ea=Array(dr+1);++Ja<dr;)ea[Ja]=Ui[Ja];return ea[dr]=kr(po),$(yn,this,ea)}}function kn(yn,dr){if(!(dr==="constructor"&&typeof yn[dr]=="function")&&dr!="__proto__")return yn[dr]}var Xr=Si(_a);function Si(yn){var dr=0,kr=0;return function(){var Ui=An(),Ja=l-(Ui-kr);if(kr=Ui,Ja>0){if(++dr>=t)return arguments[0]}else dr=0;return yn.apply(void 0,arguments)}}function Ti(yn){if(yn!=null){try{return Et.call(yn)}catch(dr){}try{return yn+""}catch(dr){}}return""}function ki(yn,dr){return yn===dr||yn!==yn&&dr!==dr}var sa=pr(function(){return arguments}())?pr:function(yn){return Ao(yn)&&vt.call(yn,"callee")&&!Xe.call(yn,"callee")},$a=Array.isArray;function ba(yn){return yn!=null&&Eo(yn.length)&&!oo(yn)}function bo(yn){return Ao(yn)&&ba(yn)}var Fa=nn||wa;function oo(yn){if(!Qa(yn))return!1;var dr=Rr(yn);return dr==o||dr==u||dr==h||dr==g}function Eo(yn){return typeof yn=="number"&&yn>-1&&yn%1==0&&yn<=s}function Qa(yn){var dr=typeof yn;return yn!=null&&(dr=="object"||dr=="function")}function Ao(yn){return yn!=null&&typeof yn=="object"}function as(yn){if(!Ao(yn)||Rr(yn)!=y)return!1;var dr=be(yn);if(dr===null)return!0;var kr=vt.call(dr,"constructor")&&dr.constructor;return typeof kr=="function"&&kr instanceof kr&&Et.call(kr)==ee}var No=z?et(z):Pi;function xs(yn){return ds(yn,Co(yn))}function Co(yn){return ba(yn)?jn(yn,!0):Oa(yn)}var qa=La(function(yn,dr,kr,Ui){Ua(yn,dr,kr,Ui)});function Ts(yn){return function(){return yn}}function ls(yn){return yn}function wa(){return!1}E.exports=qa}).call(this,L("IyRk"),L("hOG+")(Se))},quyA:function(Se,ft){var L="\\ud800-\\udfff",U="\\u0300-\\u036f",E="\\ufe20-\\ufe2f",T="\\u20d0-\\u20ff",e=U+E+T,t="\\ufe0e\\ufe0f",l="\\u200d",s=RegExp("["+l+L+e+t+"]");function c(r){return s.test(r)}Se.exports=c},qxNg:function(Se,ft,L){"use strict";L.d(ft,"a",function(){return s});var U=L("lSNA"),E=L.n(U),T=L("mpbz"),e=L.n(T);function t(r,h){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);h&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),n.push.apply(n,i)}return n}function l(r){for(var h=1;h<arguments.length;h++){var n=arguments[h]!=null?arguments[h]:{};h%2?t(Object(n),!0).forEach(function(i){E()(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):t(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}function s(r,h){var n=h.radius,i=n===void 0?40:n,a=h.maxZoom,o=a===void 0?18:a,u=h.minZoom,f=u===void 0?0:u,v=h.zoom,b=v===void 0?2:v;if(r.pointIndex){var y=r.pointIndex.getClusters(r.extent,Math.floor(b));return r.dataArray=c(y),r}var g=new e.a({radius:i,minZoom:f,maxZoom:o}),_={type:"FeatureCollection",features:[]};return _.features=r.dataArray.map(function(M){return{type:"Feature",geometry:{type:"Point",coordinates:M.coordinates},properties:l({},M)}}),g.load(_.features),g}function c(r){return r.map(function(h,n){return l({coordinates:h.geometry.coordinates,_id:n+1},h.properties)})}},riiI:function(Se,ft){},rlAn:function(Se,ft,L){"use strict";var U=L("ISu3"),E=L("gMG2"),T=L("5gLl"),e=L("BpBL"),t=L("5zYK"),l=L("lJbI"),s=L("l94r"),c=L("qxNg"),r=L("Y8BV"),h=L("VIsB"),n=L("+VLl"),i=L("aF1E"),a=L("fdMe");L.d(ft,"getTransform",function(){return U.b}),L.d(ft,"getParser",function(){return U.a});var o=L("U1ZX"),u=L.n(o);ft.default=s.a,Object(U.c)("geojson",T.a),Object(U.c)("image",e.a),Object(U.c)("csv",E.a),Object(U.c)("json",t.a),Object(U.c)("raster",l.a),Object(U.d)("cluster",c.a),Object(U.d)("filter",r.a),Object(U.d)("join",i.a),Object(U.d)("map",a.a),Object(U.d)("grid",h.a),Object(U.d)("hexagon",n.a)},rxlC:function(Se,ft,L){"use strict";Se.exports=E,Se.exports.default=E;var U=1e20;function E(s,c,r,h,n,i){this.fontSize=s||24,this.buffer=c===void 0?3:c,this.cutoff=h||.25,this.fontFamily=n||"sans-serif",this.fontWeight=i||"normal",this.radius=r||8;var a=this.size=this.fontSize+this.buffer*2,o=a+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(o*o),this.gridInner=new Float64Array(o*o),this.f=new Float64Array(o),this.z=new Float64Array(o+1),this.v=new Uint16Array(o),this.useMetrics=this.ctx.measureText("A").actualBoundingBoxLeft!==void 0,this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function T(s,c,r,h,n,i,a){i.fill(U,0,c*r),a.fill(0,0,c*r);for(var o=(c-h)/2,u=0;u<n;u++)for(var f=0;f<h;f++){var v=(u+o)*c+f+o,b=s.data[4*(u*h+f)+3]/255;if(b===1)i[v]=0,a[v]=U;else if(b===0)i[v]=U,a[v]=0;else{var y=Math.max(0,.5-b),g=Math.max(0,b-.5);i[v]=y*y,a[v]=g*g}}}function e(s,c,r,h,n,i,a){for(var o=0;o<c*r;o++){var u=Math.sqrt(h[o])-Math.sqrt(n[o]);s[o]=Math.round(255-255*(u/i+a))}}E.prototype._draw=function(s,c){var r=this.ctx.measureText(s),h=r.width,n=2*this.buffer,i,a,o,u,f,v,b,y;c&&this.useMetrics?(f=Math.floor(r.actualBoundingBoxAscent),y=this.buffer+Math.ceil(r.actualBoundingBoxAscent),v=this.buffer,b=this.buffer,a=Math.min(this.size,Math.ceil(r.actualBoundingBoxRight-r.actualBoundingBoxLeft)),u=Math.min(this.size-v,Math.ceil(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)),i=a+n,o=u+n,this.ctx.textBaseline="alphabetic"):(i=a=this.size,o=u=this.size,f=19*this.fontSize/24,v=b=0,y=this.middle,this.ctx.textBaseline="middle");var g;a&&u&&(this.ctx.clearRect(b,v,a,u),this.ctx.fillText(s,this.buffer,y),g=this.ctx.getImageData(b,v,a,u));var _=new Uint8ClampedArray(i*o);return T(g,i,o,a,u,this.gridOuter,this.gridInner),t(this.gridOuter,i,o,this.f,this.v,this.z),t(this.gridInner,i,o,this.f,this.v,this.z),e(_,i,o,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:_,metrics:{width:a,height:u,sdfWidth:i,sdfHeight:o,top:f,left:0,advance:h}}},E.prototype.draw=function(s){return this._draw(s,!1).data},E.prototype.drawWithMetrics=function(s){return this._draw(s,!0)};function t(s,c,r,h,n,i){for(var a=0;a<c;a++)l(s,a,c,r,h,n,i);for(var o=0;o<r;o++)l(s,o*c,1,c,h,n,i)}function l(s,c,r,h,n,i,a){var o,u,f,v;for(i[0]=0,a[0]=-U,a[1]=U,o=0;o<h;o++)n[o]=s[c+o*r];for(o=1,u=0,f=0;o<h;o++){do v=i[u],f=(n[o]-n[v]+o*o-v*v)/(o-v)/2;while(f<=a[u]&&--u>-1);u++,i[u]=o,a[u]=f,a[u+1]=U}for(o=0,u=0;o<h;o++){for(;a[u+1]<o;)u++;v=i[u],s[c+o*r]=n[v]+(o-v)*(o-v)}}},sGsY:function(Se,ft,L){"use strict";var U=L("rePB"),E=L("wx14"),T=L("q1tI"),e=L("TSYQ"),t=L.n(e),l=L("H84U"),s=L("/ezw"),c=L("B6l+"),r=L.n(c),h=function(Z){var V=Z.value,k=Z.formatter,Y=Z.precision,K=Z.decimalSeparator,it=Z.groupSeparator,ct=it===void 0?"":it,ht=Z.prefixCls,ut;if(typeof k=="function")ut=k(V);else{var It=String(V),Nt=It.match(/^(-?)(\d*)(\.(\d+))?$/);if(!Nt||It==="-")ut=It;else{var Lt=Nt[1],_t=Nt[2]||"0",mt=Nt[4]||"";_t=_t.replace(/\B(?=(\d{3})+(?!\d))/g,ct),typeof Y=="number"&&(mt=r()(mt,Y,"0").slice(0,Y)),mt&&(mt="".concat(K).concat(mt)),ut=[T.createElement("span",{key:"int",className:"".concat(ht,"-content-value-int")},Lt,_t),mt&&T.createElement("span",{key:"decimal",className:"".concat(ht,"-content-value-decimal")},mt)]}}return T.createElement("span",{className:"".concat(ht,"-content-value")},ut)},n=h,i=function(Z){var V=Z.prefixCls,k=Z.className,Y=Z.style,K=Z.valueStyle,it=Z.value,ct=it===void 0?0:it,ht=Z.title,ut=Z.valueRender,It=Z.prefix,Nt=Z.suffix,Lt=Z.loading,_t=Z.direction,mt=Z.onMouseEnter,At=Z.onMouseLeave,rt=T.createElement(n,Object(E.a)({},Z,{value:ct})),Mt=t()(V,Object(U.a)({},"".concat(V,"-rtl"),_t==="rtl"),k);return T.createElement("div",{className:Mt,style:Y,onMouseEnter:mt,onMouseLeave:At},ht&&T.createElement("div",{className:"".concat(V,"-title")},ht),T.createElement(s.a,{paragraph:!1,loading:Lt},T.createElement("div",{style:K,className:"".concat(V,"-content")},It&&T.createElement("span",{className:"".concat(V,"-content-prefix")},It),ut?ut(rt):rt,Nt&&T.createElement("span",{className:"".concat(V,"-content-suffix")},Nt))))};i.defaultProps={decimalSeparator:".",groupSeparator:",",loading:!1};var a=Object(l.c)({prefixCls:"statistic"})(i),o=a,u=L("1OyB"),f=L("vuIU"),v=L("Ji7U"),b=L("LK+K"),y=L("ODXe"),g=L("QQZ/"),_=L.n(g),M=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]];function x(F,Z){var V=F,k=/\[[^\]]*]/g,Y=(Z.match(k)||[]).map(function(ht){return ht.slice(1,-1)}),K=Z.replace(k,"[]"),it=M.reduce(function(ht,ut){var It=Object(y.a)(ut,2),Nt=It[0],Lt=It[1];if(ht.indexOf(Nt)!==-1){var _t=Math.floor(V/Lt);return V-=_t*Lt,ht.replace(new RegExp("".concat(Nt,"+"),"g"),function(mt){var At=mt.length;return _()(_t.toString(),At,"0")})}return ht},K),ct=0;return it.replace(k,function(){var ht=Y[ct];return ct+=1,ht})}function m(F,Z){var V=Z.format,k=V===void 0?"":V,Y=new Date(F).getTime(),K=Date.now(),it=Math.max(Y-K,0);return x(it,k)}var S=L("0n0R"),P=1e3/30;function A(F){return new Date(F).getTime()}var O=function(F){Object(v.a)(V,F);var Z=Object(b.a)(V);function V(){var k;return Object(u.a)(this,V),k=Z.apply(this,arguments),k.syncTimer=function(){var Y=k.props.value,K=A(Y);K>=Date.now()?k.startTimer():k.stopTimer()},k.startTimer=function(){k.countdownId||(k.countdownId=window.setInterval(function(){k.forceUpdate()},P))},k.stopTimer=function(){var Y=k.props,K=Y.onFinish,it=Y.value;if(k.countdownId){clearInterval(k.countdownId),k.countdownId=void 0;var ct=A(it);K&&ct<Date.now()&&K()}},k.formatCountdown=function(Y,K){var it=k.props.format;return m(Y,Object(E.a)(Object(E.a)({},K),{format:it}))},k.valueRender=function(Y){return Object(S.a)(Y,{title:void 0})},k}return Object(f.a)(V,[{key:"componentDidMount",value:function(){this.syncTimer()}},{key:"componentDidUpdate",value:function(){this.syncTimer()}},{key:"componentWillUnmount",value:function(){this.stopTimer()}},{key:"render",value:function(){return T.createElement(o,Object(E.a)({valueRender:this.valueRender},this.props,{formatter:this.formatCountdown}))}}]),V}(T.Component);O.defaultProps={format:"HH:mm:ss"};var R=O;o.Countdown=R;var W=ft.a=o},sKgW:function(Se,ft){var L=9007199254740991,U=Math.floor;function E(T,e){var t="";if(!T||e<1||e>L)return t;do e%2&&(t+=T),e=U(e/2),e&&(T+=T);while(e);return t}Se.exports=E},sXyB:function(Se,ft,L){var U=L("SksO"),E=L("b48C");function T(e,t,l){return E()?(Se.exports=T=Reflect.construct,Se.exports.default=Se.exports,Se.exports.__esModule=!0):(Se.exports=T=function(c,r,h){var n=[null];n.push.apply(n,r);var i=Function.bind.apply(c,n),a=new i;return h&&U(a,h.prototype),a},Se.exports.default=Se.exports,Se.exports.__esModule=!0),T.apply(null,arguments)}Se.exports=T,Se.exports.default=Se.exports,Se.exports.__esModule=!0},sgoq:function(Se,ft,L){var U=L("asDA"),E=L("TKrE"),T=L("6nK8"),e="['\u2019]",t=RegExp(e,"g");function l(s){return function(c){return U(T(E(c).replace(t,"")),s,"")}}Se.exports=l},sxDa:function(Se,ft,L){"use strict";L.d(ft,"e",function(){return Zs}),L.d(ft,"f",function(){return Lu}),L.d(ft,"d",function(){return au}),L.d(ft,"a",function(){return Bo}),L.d(ft,"c",function(){return to}),L.d(ft,"g",function(){return ti}),L.d(ft,"b",function(){return ls});var U=L("h1nZ"),E=L("lwsE"),T=L.n(E),e=L("W8MJ"),t=L.n(e),l=L("7W2i"),s=L.n(l),c=L("a1gu"),r=L.n(c),h=L("Nsbk"),n=L.n(h),i=L("QILm"),a=L.n(i),o=L("lSNA"),u=L.n(o),f=L("yG8O"),v=L.n(f),b=L("PJYZ"),y=L.n(b),g=L("U+yc"),_=L.n(g),M=L("1ABj"),x=L("GoyQ"),m=L.n(x),S=L("lSCD"),P=L.n(S),A=L("xp6e"),O=L("Hel2"),R=L("uhBA"),W=L("4U9+"),F=L.n(W),Z=L("4cb6"),V,k,Y,K,it,ct;function ht(tt){return tt.map(function(St){return typeof St=="string"&&(St=[St,{}]),St})}var ut=(V=Object(Z.injectable)(),k=Object(Z.inject)(U.TYPES.IGlobalConfigService),V(Y=(K=(ct=function(){function tt(){T()(this,tt),v()(this,"configService",it,this),this.enabled=void 0}return t()(tt,[{key:"apply",value:function(bt,gt){var Tt=this,Dt=gt.rendererService,Yt=gt.postProcessingPassFactory,pe=gt.normalPassFactory;bt.hooks.init.tap("MultiPassRendererPlugin",function(){var Be=bt.getLayerConfig(),Qe=Be.enableMultiPassRenderer,Bn=Be.passes,fr=Bn===void 0?[]:Bn;Tt.enabled=!!Qe&&bt.getLayerConfig().enableMultiPassRenderer!==!1,Tt.enabled&&(bt.multiPassRenderer=Tt.createMultiPassRenderer(bt,fr,Yt,pe),bt.multiPassRenderer.setRenderFlag(!0))}),bt.hooks.beforeRender.tap("MultiPassRendererPlugin",function(){})}},{key:"createMultiPassRenderer",value:function(bt,gt,Tt,Dt){var Yt=bt.multiPassRenderer,pe=bt.getLayerConfig(),Be=pe.enablePicking,Qe=pe.enableTAA;return Be&&Yt.add(Dt("pixelPicking")),Yt}}]),tt}(),ct),it=_()(K.prototype,"configService",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K))||Y),It,Nt=(It={},u()(It,U.BlendType.additive,{enable:!0,func:{srcRGB:U.gl.ONE,dstRGB:U.gl.ONE,srcAlpha:1,dstAlpha:1}}),u()(It,U.BlendType.none,{enable:!1}),u()(It,U.BlendType.normal,{enable:!0,func:{srcRGB:U.gl.SRC_ALPHA,dstRGB:U.gl.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}}),u()(It,U.BlendType.subtractive,{enable:!0,func:{srcRGB:U.gl.ONE,dstRGB:U.gl.ONE,srcAlpha:U.gl.ZERO,dstAlpha:U.gl.ONE_MINUS_SRC_COLOR},equation:{rgb:U.gl.FUNC_SUBTRACT,alpha:U.gl.FUNC_SUBTRACT}}),u()(It,U.BlendType.max,{enable:!0,func:{srcRGB:U.gl.ONE,dstRGB:U.gl.ONE},equation:{rgb:U.gl.MAX_EXT}}),u()(It,U.BlendType.min,{enable:!0,func:{srcRGB:U.gl.ONE,dstRGB:U.gl.ONE},equation:{rgb:U.gl.MIN_EXT}}),It),Lt={properties:{enablePicking:{type:"boolean"},enableHighlight:{type:"boolean"},highlightColor:{oneOf:[{type:"array",items:{type:"number",minimum:0,maximum:1}},{type:"string"}]}}},_t,mt,At,rt,Mt,z,$,dt;function et(tt,St){var bt;if(typeof Symbol=="undefined"||tt[Symbol.iterator]==null){if(Array.isArray(tt)||(bt=ot(tt))||St&&tt&&typeof tt.length=="number"){bt&&(tt=bt);var gt=0,Tt=function(){};return{s:Tt,n:function(){return gt>=tt.length?{done:!0}:{done:!1,value:tt[gt++]}},e:function(Qe){throw Qe},f:Tt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Dt=!0,Yt=!1,pe;return{s:function(){bt=tt[Symbol.iterator]()},n:function(){var Qe=bt.next();return Dt=Qe.done,Qe},e:function(Qe){Yt=!0,pe=Qe},f:function(){try{!Dt&&bt.return!=null&&bt.return()}finally{if(Yt)throw pe}}}}function ot(tt,St){if(!!tt){if(typeof tt=="string")return pt(tt,St);var bt=Object.prototype.toString.call(tt).slice(8,-1);if(bt==="Object"&&tt.constructor&&(bt=tt.constructor.name),bt==="Map"||bt==="Set")return Array.from(tt);if(bt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(bt))return pt(tt,St)}}function pt(tt,St){(St==null||St>tt.length)&&(St=tt.length);for(var bt=0,gt=new Array(St);bt<St;bt++)gt[bt]=tt[bt];return gt}function H(tt,St){var bt=Object.keys(tt);if(Object.getOwnPropertySymbols){var gt=Object.getOwnPropertySymbols(tt);St&&(gt=gt.filter(function(Tt){return Object.getOwnPropertyDescriptor(tt,Tt).enumerable})),bt.push.apply(bt,gt)}return bt}function nt(tt){for(var St=1;St<arguments.length;St++){var bt=arguments[St]!=null?arguments[St]:{};St%2?H(Object(bt),!0).forEach(function(gt){u()(tt,gt,bt[gt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tt,Object.getOwnPropertyDescriptors(bt)):H(Object(bt)).forEach(function(gt){Object.defineProperty(tt,gt,Object.getOwnPropertyDescriptor(bt,gt))})}return tt}function at(tt){var St=q();return function(){var gt=n()(tt),Tt;if(St){var Dt=n()(this).constructor;Tt=Reflect.construct(gt,arguments,Dt)}else Tt=gt.apply(this,arguments);return r()(this,Tt)}}function q(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var Et=0,vt=(_t=Object(U.lazyInject)(U.TYPES.ILogService),mt=Object(U.lazyInject)(U.TYPES.IGlobalConfigService),At=Object(U.lazyInject)(U.TYPES.IShaderModuleService),rt=(dt=function(tt){s()(bt,tt);var St=at(bt);function bt(){var gt,Tt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return T()(this,bt),gt=St.call(this),gt.id="".concat(Et++),gt.name="".concat(Et),gt.type=void 0,gt.visible=!0,gt.zIndex=0,gt.minZoom=void 0,gt.maxZoom=void 0,gt.inited=!1,gt.layerModelNeedUpdate=!1,gt.pickedFeatureID=null,gt.selectedFeatureID=null,gt.styleNeedUpdate=!1,gt.dataState={dataSourceNeedUpdate:!1,dataMappingNeedUpdate:!1,filterNeedUpdate:!1,featureScaleNeedUpdate:!1,StyleAttrNeedUpdate:!1},gt.hooks={init:new A.b,afterInit:new A.b,beforeRender:new A.b,beforeRenderData:new A.d,afterRender:new A.c,beforePickingEncode:new A.c,afterPickingEncode:new A.c,beforeHighlight:new A.c(["pickedColor"]),afterHighlight:new A.c,beforeSelect:new A.c(["pickedColor"]),afterSelect:new A.c,beforeDestroy:new A.c,afterDestroy:new A.c},gt.models=[],gt.multiPassRenderer=void 0,gt.plugins=void 0,gt.sourceOption=void 0,gt.layerModel=void 0,v()(gt,"logger",Mt,y()(gt)),v()(gt,"configService",z,y()(gt)),v()(gt,"shaderModuleService",$,y()(gt)),gt.cameraService=void 0,gt.coordinateService=void 0,gt.iconService=void 0,gt.fontService=void 0,gt.pickingService=void 0,gt.rendererService=void 0,gt.layerService=void 0,gt.interactionService=void 0,gt.mapService=void 0,gt.styleAttributeService=void 0,gt.layerSource=void 0,gt.postProcessingPassFactory=void 0,gt.normalPassFactory=void 0,gt.animateOptions={enable:!1},gt.container=void 0,gt.encodedData=void 0,gt.configSchema=void 0,gt.currentPickId=null,gt.rawConfig=void 0,gt.needUpdateConfig=void 0,gt.pendingStyleAttributes=[],gt.scaleOptions={},gt.animateStartTime=void 0,gt.aniamateStatus=!1,gt.sourceEvent=function(){gt.dataState.dataSourceNeedUpdate=!0;var Dt=gt.getLayerConfig(),Yt=Dt.autoFit,pe=Dt.fitBoundsOptions;Yt&&gt.fitBounds(pe),gt.emit("dataUpdate"),gt.reRender()},gt.name=Tt.name||gt.id,gt.zIndex=Tt.zIndex||0,gt.rawConfig=Tt,gt}return t()(bt,[{key:"getLayerConfig",value:function(){return this.configService.getLayerConfig(this.id)}},{key:"updateLayerConfig",value:function(Tt){if(!this.inited)this.needUpdateConfig=nt(nt({},this.needUpdateConfig),Tt);else{var Dt=this.container.get(U.TYPES.SceneID);this.configService.setLayerConfig(Dt,this.id,nt(nt(nt({},this.configService.getLayerConfig(this.id)),this.needUpdateConfig),Tt)),this.needUpdateConfig={}}}},{key:"setContainer",value:function(Tt){this.container=Tt}},{key:"getContainer",value:function(){return this.container}},{key:"addPlugin",value:function(Tt){return this.plugins.push(Tt),this}},{key:"init",value:function(){var Tt=this,Dt=this.container.get(U.TYPES.SceneID),Yt=this.rawConfig.enableMultiPassRenderer,pe=Yt===void 0?!1:Yt;this.configService.setLayerConfig(Dt,this.id,{enableMultiPassRenderer:pe}),this.iconService=this.container.get(U.TYPES.IIconService),this.fontService=this.container.get(U.TYPES.IFontService),this.rendererService=this.container.get(U.TYPES.IRendererService),this.layerService=this.container.get(U.TYPES.ILayerService),this.interactionService=this.container.get(U.TYPES.IInteractionService),this.pickingService=this.container.get(U.TYPES.IPickingService),this.mapService=this.container.get(U.TYPES.IMapService),this.cameraService=this.container.get(U.TYPES.ICameraService),this.coordinateService=this.container.get(U.TYPES.ICoordinateSystemService),this.postProcessingPassFactory=this.container.get(U.TYPES.IFactoryPostProcessingPass),this.normalPassFactory=this.container.get(U.TYPES.IFactoryNormalPass),this.styleAttributeService=this.container.get(U.TYPES.IStyleAttributeService),this.multiPassRenderer=this.container.get(U.TYPES.IMultiPassRenderer),this.multiPassRenderer.setLayer(this),this.pendingStyleAttributes.forEach(function(fr){var qr=fr.attributeName,ci=fr.attributeField,Gi=fr.attributeValues,zi=fr.updateOptions;Tt.styleAttributeService.updateStyleAttribute(qr,{scale:nt({field:ci},Tt.splitValuesAndCallbackInAttribute(Gi,Tt.getLayerConfig()[qr]))},zi)}),this.pendingStyleAttributes=[],this.plugins=this.container.getAll(U.TYPES.ILayerPlugin);var Be=et(this.plugins),Qe;try{for(Be.s();!(Qe=Be.n()).done;){var Bn=Qe.value;Bn.apply(this,{rendererService:this.rendererService,mapService:this.mapService,styleAttributeService:this.styleAttributeService,normalPassFactory:this.normalPassFactory,postProcessingPassFactory:this.postProcessingPassFactory})}}catch(fr){Be.e(fr)}finally{Be.f()}return this.hooks.init.call(),this.hooks.afterInit.call(),this.emit("inited",{target:this,type:"inited"}),this.emit("add",{target:this,type:"add"}),this}},{key:"prepareBuildModel",value:function(){this.inited=!0,this.updateLayerConfig(nt(nt({},this.getDefaultConfig()),this.rawConfig));var Tt=this.getLayerConfig(),Dt=Tt.animateOption;Dt!=null&&Dt.enable&&(this.layerService.startAnimate(),this.aniamateStatus=!0)}},{key:"color",value:function(Tt,Dt,Yt){return this.updateStyleAttribute("color",Tt,Dt,Yt),this}},{key:"rotate",value:function(Tt,Dt,Yt){return this.updateStyleAttribute("rotate",Tt,Dt,Yt),this}},{key:"size",value:function(Tt,Dt,Yt){return this.updateStyleAttribute("size",Tt,Dt,Yt),this}},{key:"filter",value:function(Tt,Dt,Yt){return this.updateStyleAttribute("filter",Tt,Dt,Yt),this}},{key:"shape",value:function(Tt,Dt,Yt){return this.updateStyleAttribute("shape",Tt,Dt,Yt),this}},{key:"label",value:function(Tt,Dt,Yt){return this.pendingStyleAttributes.push({attributeName:"label",attributeField:Tt,attributeValues:Dt,updateOptions:Yt}),this}},{key:"animate",value:function(Tt){var Dt={};return m()(Tt)?(Dt.enable=!0,Dt=nt(nt({},Dt),Tt)):Dt.enable=Tt,this.updateLayerConfig({animateOption:Dt}),this}},{key:"source",value:function(Tt,Dt){return this.sourceOption={data:Tt,options:Dt},this}},{key:"setData",value:function(Tt,Dt){var Yt=this;return this.inited?this.layerSource.setData(Tt,Dt):this.on("inited",function(){Yt.layerSource.setData(Tt,Dt)}),this}},{key:"style",value:function(Tt){var Dt=this,Yt=Tt.passes,pe=a()(Tt,["passes"]);return Yt&&ht(Yt).forEach(function(Be){var Qe=Dt.multiPassRenderer.getPostProcessor().getPostProcessingPassByName(Be[0]);Qe&&Qe.updateOptions(Be[1])}),this.rawConfig=nt(nt({},this.rawConfig),pe),this.container&&(this.updateLayerConfig(this.rawConfig),this.styleNeedUpdate=!0),this}},{key:"scale",value:function(Tt,Dt){return m()(Tt)?this.scaleOptions=nt(nt({},this.scaleOptions),Tt):this.scaleOptions[Tt]=Dt,this}},{key:"render",value:function(){return this.renderModels(),this}},{key:"active",value:function(Tt){var Dt={};return Dt.enableHighlight=m()(Tt)?!0:Tt,m()(Tt)?(Dt.enableHighlight=!0,Tt.color&&(Dt.highlightColor=Tt.color)):Dt.enableHighlight=!!Tt,this.updateLayerConfig(Dt),this}},{key:"setActive",value:function(Tt,Dt){var Yt=this;if(m()(Tt)){var pe=Tt.x,Be=pe===void 0?0:pe,Qe=Tt.y,Bn=Qe===void 0?0:Qe;this.updateLayerConfig({highlightColor:m()(Dt)?Dt.color:this.getLayerConfig().highlightColor}),this.pick({x:Be,y:Bn})}else this.updateLayerConfig({pickedFeatureID:Tt,highlightColor:m()(Dt)?Dt.color:this.getLayerConfig().highlightColor}),this.hooks.beforeSelect.call(Object(O.l)(Tt)).then(function(){setTimeout(function(){Yt.reRender()},1)})}},{key:"select",value:function(Tt){var Dt={};return Dt.enableSelect=m()(Tt)?!0:Tt,m()(Tt)?(Dt.enableSelect=!0,Tt.color&&(Dt.selectColor=Tt.color)):Dt.enableSelect=!!Tt,this.updateLayerConfig(Dt),this}},{key:"setSelect",value:function(Tt,Dt){var Yt=this;if(m()(Tt)){var pe=Tt.x,Be=pe===void 0?0:pe,Qe=Tt.y,Bn=Qe===void 0?0:Qe;this.updateLayerConfig({selectColor:m()(Dt)?Dt.color:this.getLayerConfig().selectColor}),this.pick({x:Be,y:Bn})}else this.updateLayerConfig({pickedFeatureID:Tt,selectColor:m()(Dt)?Dt.color:this.getLayerConfig().selectColor}),this.hooks.beforeSelect.call(Object(O.l)(Tt)).then(function(){setTimeout(function(){Yt.reRender()},1)})}},{key:"setBlend",value:function(Tt){this.updateLayerConfig({blend:Tt}),this.layerModelNeedUpdate=!0,this.reRender()}},{key:"show",value:function(){return this.updateLayerConfig({visible:!0}),this.reRender(),this}},{key:"hide",value:function(){return this.updateLayerConfig({visible:!1}),this.reRender(),this}},{key:"setIndex",value:function(Tt){return this.zIndex=Tt,this.layerService.updateRenderOrder(),this}},{key:"setCurrentPickId",value:function(Tt){this.currentPickId=Tt}},{key:"getCurrentPickId",value:function(){return this.currentPickId}},{key:"setCurrentSelectedId",value:function(Tt){this.selectedFeatureID=Tt}},{key:"getCurrentSelectedId",value:function(){return this.selectedFeatureID}},{key:"isVisible",value:function(){var Tt=this.mapService.getZoom(),Dt=this.getLayerConfig(),Yt=Dt.visible,pe=Dt.minZoom,Be=pe===void 0?-Infinity:pe,Qe=Dt.maxZoom,Bn=Qe===void 0?Infinity:Qe;return!!Yt&&Tt>=Be&&Tt<=Bn}},{key:"setMinZoom",value:function(Tt){return this.updateLayerConfig({minZoom:Tt}),this}},{key:"getMinZoom",value:function(){var Tt=this.getLayerConfig(),Dt=Tt.minZoom;return Dt}},{key:"getMaxZoom",value:function(){var Tt=this.getLayerConfig(),Dt=Tt.maxZoom;return Dt}},{key:"get",value:function(Tt){var Dt=this.getLayerConfig();return Dt[Tt]}},{key:"setMaxZoom",value:function(Tt){return this.updateLayerConfig({maxZoom:Tt}),this}},{key:"fitBounds",value:function(Tt){if(!this.inited)return this.updateLayerConfig({autoFit:!0}),this;var Dt=this.getSource(),Yt=Dt.extent,pe=Yt.some(function(Be){return Math.abs(Be)===Infinity});return pe?this:(this.mapService.fitBounds([[Yt[0],Yt[1]],[Yt[2],Yt[3]]],Tt),this)}},{key:"destroy",value:function(){this.hooks.beforeDestroy.call(),this.layerSource.off("update",this.sourceEvent),this.multiPassRenderer.destroy(),this.styleAttributeService.clearAllAttributes(),this.hooks.afterDestroy.call(),this.emit("remove",{target:this,type:"remove"}),this.removeAllListeners()}},{key:"clear",value:function(){this.styleAttributeService.clearAllAttributes()}},{key:"clearModels",value:function(){this.models.forEach(function(Tt){return Tt.destroy()}),this.layerModel.clearModels()}},{key:"isDirty",value:function(){return!!(this.styleAttributeService.getLayerStyleAttributes()||[]).filter(function(Tt){return Tt.needRescale||Tt.needRemapping||Tt.needRegenerateVertices}).length}},{key:"setSource",value:function(Tt){this.layerSource=Tt;var Dt=this.mapService.getZoom();this.layerSource.cluster&&this.layerSource.updateClusterData(Dt),this.layerSource.on("update",this.sourceEvent)}},{key:"getSource",value:function(){return this.layerSource}},{key:"getScaleOptions",value:function(){return this.scaleOptions}},{key:"setEncodedData",value:function(Tt){this.encodedData=Tt}},{key:"getEncodedData",value:function(){return this.encodedData}},{key:"getConfigSchemaForValidation",value:function(){return this.configSchema||(this.configSchema=F()([Lt,this.getConfigSchema()])),this.configSchema}},{key:"getLegendItems",value:function(Tt){var Dt=this.styleAttributeService.getLayerAttributeScale(Tt);if(Dt){if(Dt.ticks){var Yt=Dt.ticks().map(function(Be){return u()({value:Be},Tt,Dt(Be))});return Yt}else if(Dt.invertExtent){var pe=Dt.range().map(function(Be){return u()({value:Dt.invertExtent(Be)},Tt,Be)});return pe}}else return[]}},{key:"pick",value:function(Tt){var Dt=Tt.x,Yt=Tt.y;this.interactionService.triggerHover({x:Dt,y:Yt})}},{key:"boxSelect",value:function(Tt,Dt){this.pickingService.boxPickLayer(this,Tt,Dt)}},{key:"buildLayerModel",value:function(Tt){var Dt=Tt.moduleName,Yt=Tt.vertexShader,pe=Tt.fragmentShader,Be=Tt.triangulation,Qe=a()(Tt,["moduleName","vertexShader","fragmentShader","triangulation"]);this.shaderModuleService.registerModule(Dt,{vs:Yt,fs:pe});var Bn=this.shaderModuleService.getModule(Dt),fr=Bn.vs,qr=Bn.fs,ci=Bn.uniforms,Gi=this.rendererService.createModel,zi=this.styleAttributeService.createAttributesAndIndices(this.encodedData,Be),aa=zi.attributes,no=zi.elements;return Gi(nt({attributes:aa,uniforms:ci,fs:qr,vs:fr,elements:no,blend:Nt[U.BlendType.normal]},Qe))}},{key:"getTime",value:function(){return this.layerService.clock.getDelta()}},{key:"setAnimateStartTime",value:function(){this.animateStartTime=this.layerService.clock.getElapsedTime()}},{key:"stopAnimate",value:function(){this.aniamateStatus&&(this.layerService.stopAnimate(),this.aniamateStatus=!1,this.updateLayerConfig({animateOption:{enable:!1}}))}},{key:"getLayerAnimateTime",value:function(){return this.layerService.clock.getElapsedTime()-this.animateStartTime}},{key:"needPick",value:function(Tt){var Dt=this.getLayerConfig(),Yt=Dt.enableHighlight,pe=Yt===void 0?!0:Yt,Be=Dt.enableSelect,Qe=Be===void 0?!0:Be,Bn=this.eventNames().indexOf(Tt)!==-1||this.eventNames().indexOf("un"+Tt)!==-1;return(Tt==="click"||Tt==="dblclick")&&Qe&&(Bn=!0),Tt==="mousemove"&&(pe||this.eventNames().indexOf("mouseenter")!==-1||this.eventNames().indexOf("unmousemove")!==-1||this.eventNames().indexOf("mouseout")!==-1)&&(Bn=!0),this.isVisible()&&Bn}},{key:"buildModels",value:function(){throw new Error("Method not implemented.")}},{key:"rebuildModels",value:function(){throw new Error("Method not implemented.")}},{key:"renderModels",value:function(){var Tt=this;return this.layerModelNeedUpdate&&this.layerModel&&(this.models=this.layerModel.buildModels(),this.hooks.beforeRender.call(),this.layerModelNeedUpdate=!1),this.models.forEach(function(Dt){Dt.draw({uniforms:Tt.layerModel.getUninforms()})}),this}},{key:"getConfigSchema",value:function(){throw new Error("Method not implemented.")}},{key:"getModelType",value:function(){throw new Error("Method not implemented.")}},{key:"getDefaultConfig",value:function(){return{}}},{key:"reRender",value:function(){this.inited&&this.layerService.renderLayers()}},{key:"splitValuesAndCallbackInAttribute",value:function(Tt,Dt){return{values:P()(Tt)?void 0:Tt||Dt,callback:P()(Tt)?Tt:void 0}}},{key:"updateStyleAttribute",value:function(Tt,Dt,Yt,pe){this.inited?this.styleAttributeService.updateStyleAttribute(Tt,{scale:nt({field:Dt},this.splitValuesAndCallbackInAttribute(Yt,this.getLayerConfig()[Dt]))},pe):this.pendingStyleAttributes.push({attributeName:Tt,attributeField:Dt,attributeValues:Yt,updateOptions:pe})}}]),bt}(R.EventEmitter),dt),Mt=_()(rt.prototype,"logger",[_t],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=_()(rt.prototype,"configService",[mt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=_()(rt.prototype,"shaderModuleService",[At],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rt),Ft,Qt,ee,Gt,$t,Pe,me=(Ft=Object(U.lazyInject)(U.TYPES.IGlobalConfigService),Qt=Object(U.lazyInject)(U.TYPES.IShaderModuleService),ee=(Pe=function(){function tt(St){T()(this,tt),this.triangulation=void 0,this.layer=void 0,v()(this,"configService",Gt,this),v()(this,"shaderModuleService",$t,this),this.rendererService=void 0,this.iconService=void 0,this.fontService=void 0,this.styleAttributeService=void 0,this.mapService=void 0,this.cameraService=void 0,this.layerService=void 0,this.layer=St,this.rendererService=St.getContainer().get(U.TYPES.IRendererService),this.styleAttributeService=St.getContainer().get(U.TYPES.IStyleAttributeService),this.mapService=St.getContainer().get(U.TYPES.IMapService),this.iconService=St.getContainer().get(U.TYPES.IIconService),this.fontService=St.getContainer().get(U.TYPES.IFontService),this.cameraService=St.getContainer().get(U.TYPES.ICameraService),this.layerService=St.getContainer().get(U.TYPES.ILayerService),this.registerBuiltinAttributes(),this.startModelAnimate()}return t()(tt,[{key:"getBlend",value:function(){var bt=this.layer.getLayerConfig(),gt=bt.blend,Tt=gt===void 0?"normal":gt;return Nt[U.BlendType[Tt]]}},{key:"getDefaultStyle",value:function(){return{}}},{key:"getUninforms",value:function(){throw new Error("Method not implemented.")}},{key:"getAnimateUniforms",value:function(){return{}}},{key:"needUpdate",value:function(){return!1}},{key:"buildModels",value:function(){throw new Error("Method not implemented.")}},{key:"initModels",value:function(){throw new Error("Method not implemented.")}},{key:"clearModels",value:function(){}},{key:"getAttribute",value:function(){throw new Error("Method not implemented.")}},{key:"render",value:function(){throw new Error("Method not implemented.")}},{key:"registerBuiltinAttributes",value:function(){throw new Error("Method not implemented.")}},{key:"animateOption2Array",value:function(bt){return[bt.enable?0:1,bt.duration||4,bt.interval||.2,bt.trailLength||.1]}},{key:"startModelAnimate",value:function(){var bt=this.layer.getLayerConfig(),gt=bt.animateOption;gt.enable&&this.layer.setAnimateStartTime()}}]),tt}(),Pe),Gt=_()(ee.prototype,"configService",[Ft],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$t=_()(ee.prototype,"shaderModuleService",[Qt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ee),le=L("J4zp"),be=L.n(le),ze=L("RIqP"),Xe=L.n(ze),_n=L("VmRL"),Kn=L.n(_n),Hn=L("IOcx"),nn=Hn.c.create(),en=Hn.c.create(),An=Hn.c.create(),Nn=Hn.c.create(),hr=Hn.c.create();function fi(tt,St,bt,gt,Tt){Hn.c.add(tt,bt,gt),Hn.c.normalize(tt,tt),St=Hn.c.fromValues(-tt[1],tt[0]);var Dt=Hn.c.fromValues(-bt[1],bt[0]);return[Tt/Hn.c.dot(St,Dt),St]}function Oe(tt,St){return Hn.c.set(tt,-St[1],St[0])}function Ae(tt,St,bt){return Hn.c.sub(tt,St,bt),Hn.c.normalize(tt,tt),tt}function Jt(tt,St){return tt[0]===St[0]&&tt[1]===St[1]}function ve(tt){for(var St=new Map,bt=0;bt<tt.length;bt++){var gt=tt[0].toString()+"-"+tt[1].toString();St.get(gt)?(tt.splice(bt,1),bt++):St.set(gt,gt)}return tt}var Vt=function(){function tt(){var St=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};T()(this,tt),this.complex=void 0,this.join=void 0,this.cap=void 0,this.miterLimit=void 0,this.thickness=void 0,this.normal=void 0,this.lastFlip=-1,this.miter=Hn.c.fromValues(0,0),this.started=!1,this.dash=!1,this.totalDistance=0,this.join=St.join||"miter",this.cap=St.cap||"butt",this.miterLimit=St.miterLimit||10,this.thickness=St.thickness||1,this.dash=St.dash||!1,this.complex={positions:[],indices:[],normals:[],startIndex:0}}return t()(tt,[{key:"extrude",value:function(bt){var gt=this.complex;if(bt.length<=1)return gt;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var Tt=bt.length,Dt=gt.startIndex,Yt=1;Yt<Tt;Yt++){var pe=bt[Yt-1],Be=bt[Yt],Qe=Yt<bt.length-1?bt[Yt+1]:null,Bn=this.segment(gt,Dt,pe,Be,Qe);Dt+=Bn}if(this.dash)for(var fr=0;fr<gt.positions.length/6;fr++)gt.positions[fr*6+5]=this.totalDistance;return gt.startIndex=gt.positions.length/6,gt}},{key:"segment",value:function(bt,gt,Tt,Dt,Yt){var pe=0,Be=bt.indices,Qe=bt.positions,Bn=bt.normals,fr=this.cap==="square",qr=this.join==="bevel",ci=Object(O.d)([Dt[0],Dt[1]]),Gi=Object(O.d)([Tt[0],Tt[1]]);Ae(An,ci,Gi);var zi=0;if(this.dash&&(zi=this.lineSegmentDistance(ci,Gi),this.totalDistance+=zi),this.normal||(this.normal=Hn.c.create(),Oe(this.normal,An)),!this.started)if(this.started=!0,fr){var aa=Hn.c.create(),no=Hn.c.create();Hn.c.add(aa,this.normal,An),Hn.c.add(no,this.normal,An),Bn.push(no[0],no[1],0),Bn.push(aa[0],aa[1],0),Qe.push(Tt[0],Tt[1],0,this.totalDistance-zi,-this.thickness,0),Qe.push(Tt[0],Tt[1],0,this.totalDistance-zi,this.thickness,0)}else this.extrusions(Qe,Bn,Tt,this.normal,this.thickness,this.totalDistance-zi);if(Be.push(gt+0,gt+1,gt+2),Yt){var rs=Object(O.d)([Yt[0],Yt[1]]);Jt(ci,rs)&&Hn.c.add(rs,ci,Hn.c.normalize(rs,Hn.c.subtract(rs,ci,Gi))),Ae(Nn,rs,ci);var is=fi(hr,Hn.c.create(),An,Nn,this.thickness),du=be()(is,2),lo=du[0],vu=du[1],Du=Hn.c.dot(hr,this.normal)<0?-1:1,ac=qr;if(!ac&&this.join==="miter"){var jo=lo;jo>this.miterLimit&&(ac=!0)}ac?(Bn.push(this.normal[0],this.normal[1],0),Bn.push(vu[0],vu[1],0),Qe.push(Dt[0],Dt[1],0,this.totalDistance,-this.thickness*Du,0),Qe.push(Dt[0],Dt[1],0,this.totalDistance,this.thickness*Du,0),Be.push.apply(Be,Xe()(this.lastFlip!==-Du?[gt,gt+2,gt+3]:[gt+2,gt+1,gt+3])),Be.push(gt+2,gt+3,gt+4),Oe(nn,Nn),Hn.c.copy(this.normal,nn),Bn.push(this.normal[0],this.normal[1],0),Qe.push(Dt[0],Dt[1],0,this.totalDistance,-this.thickness*Du,0),pe+=3):(this.extrusions(Qe,Bn,Dt,vu,lo,this.totalDistance),Be.push.apply(Be,Xe()(this.lastFlip===1?[gt,gt+2,gt+3]:[gt+2,gt+1,gt+3])),Du=-1,Hn.c.copy(this.normal,vu),pe+=2),this.lastFlip=Du}else{if(Oe(this.normal,An),fr){var uo=Hn.c.create(),Ws=Hn.c.create();Hn.c.sub(Ws,An,this.normal),Hn.c.add(uo,An,this.normal),Bn.push(Ws[0],Ws[1],0),Bn.push(uo[0],uo[1],0),Qe.push(Dt[0],Dt[1],0,this.totalDistance,this.thickness,0),Qe.push(Dt[0],Dt[1],0,this.totalDistance,this.thickness,0)}else this.extrusions(Qe,Bn,Dt,this.normal,this.thickness,this.totalDistance);Be.push.apply(Be,Xe()(this.lastFlip===1?[gt,gt+2,gt+3]:[gt+2,gt+1,gt+3])),pe+=2}return pe}},{key:"extrusions",value:function(bt,gt,Tt,Dt,Yt,pe){gt.push(Dt[0],Dt[1],0),gt.push(Dt[0],Dt[1],0),bt.push(Tt[0],Tt[1],0,pe,-Yt,0),bt.push(Tt[0],Tt[1],0,pe,Yt,0)}},{key:"lineSegmentDistance",value:function(bt,gt){var Tt=gt[0]-bt[0],Dt=gt[1]-bt[1];return Math.sqrt(Tt*Tt+Dt*Dt)}}]),tt}(),ie=L("UB5X"),Ce=L.n(ie);function ue(tt){if(Ce()(tt[0]))return tt;if(Ce()(tt[0][0]))throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8");if(Ce()(tt[0][0][0])){var St=tt,bt=0,gt=0,Tt=0;return St.forEach(function(Dt){Dt.forEach(function(Yt){bt+=Yt[0],gt+=Yt[1],Tt++})}),[bt/Tt,gt/Tt,0]}else throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8")}function xe(tt){var St=tt[0][0],bt=tt[0][tt[0].length-1];St[0]===bt[0]&&St[1]===bt[1]&&(tt[0]=tt[0].slice(0,tt[0].length-1));for(var gt=tt[0].length,Tt=Kn.a.flatten(tt),Dt=Tt.vertices,Yt=Tt.dimensions,pe=[],Be=[],Qe=0;Qe<Dt.length/Yt;Qe++)Yt===2?pe.push(Dt[Qe*2],Dt[Qe*2+1],1):pe.push(Dt[Qe*3],Dt[Qe*3+1],1);var Bn=Kn()(Tt.vertices,Tt.holes,Tt.dimensions);Be.push.apply(Be,Xe()(Bn));for(var fr=function(Gi){var zi=Tt.vertices.slice(Gi*Yt,(Gi+1)*Yt),aa=Tt.vertices.slice((Gi+1)*Yt,(Gi+2)*Yt);aa.length===0&&(aa=Tt.vertices.slice(0,Yt));var no=pe.length/3;pe.push(zi[0],zi[1],1,aa[0],aa[1],1,zi[0],zi[1],0,aa[0],aa[1],0),Be.push.apply(Be,Xe()([0,2,1,2,3,1].map(function(uo){return uo+no})))},qr=0;qr<gt;qr++)fr(qr);return{positions:pe,index:Be}}function $e(tt){var St=Kn.a.flatten(tt),bt=Kn()(St.vertices,St.holes,St.dimensions);return{positions:St.vertices,index:bt}}function Fn(tt){var St=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,bt=tt[0][0],gt=tt[0][tt[0].length-1];bt[0]===gt[0]&&bt[1]===gt[1]&&(tt[0]=tt[0].slice(0,tt[0].length-1));for(var Tt=tt[0].length,Dt=Kn.a.flatten(tt),Yt=Dt.vertices,pe=Dt.dimensions,Be=[],Qe=[],Bn=[],fr=0;fr<Yt.length/pe;fr++)pe===2?Be.push(Yt[fr*2],Yt[fr*2+1],1,-1,-1):Be.push(Yt[fr*3],Yt[fr*3+1],1,-1,-1),Bn.push(0,0,1);var qr=Kn()(Dt.vertices,Dt.holes,Dt.dimensions);Qe.push.apply(Qe,Xe()(qr));for(var ci=function(aa){var no=Dt.vertices.slice(aa*pe,(aa+1)*pe),uo=Dt.vertices.slice((aa+1)*pe,(aa+2)*pe);uo.length===0&&(uo=Dt.vertices.slice(0,pe));var Ws=Be.length/5;Be.push(no[0],no[1],1,0,0,uo[0],uo[1],1,.1,0,no[0],no[1],0,0,.8,uo[0],uo[1],0,.1,.8);var rs=rr([uo[0],uo[1],1],[no[0],no[1],0],[no[0],no[1],1],St);Bn.push.apply(Bn,Xe()(rs).concat(Xe()(rs),Xe()(rs),Xe()(rs))),Qe.push.apply(Qe,Xe()([1,2,0,3,2,1].map(function(is){return is+Ws})))},Gi=0;Gi<Tt;Gi++)ci(Gi);return{positions:Be,index:Qe,normals:Bn}}function rr(tt,St,bt){var gt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,Tt=Hn.d.create(),Dt=Hn.d.create(),Yt=Hn.d.create();gt&&(tt=Object(O.p)(tt),St=Object(O.p)(St),bt=Object(O.p)(bt));var pe=Hn.d.fromValues.apply(Hn.d,Xe()(tt)),Be=Hn.d.fromValues.apply(Hn.d,Xe()(St)),Qe=Hn.d.fromValues.apply(Hn.d,Xe()(bt));Hn.d.sub(Tt,Qe,Be),Hn.d.sub(Dt,pe,Be),Hn.d.cross(Yt,Tt,Dt);var Bn=Hn.d.create();return Hn.d.normalize(Bn,Yt),Bn}var En,Pn;(function(tt){tt.CYLINDER="cylinder",tt.SQUARECOLUMN="squareColumn",tt.TRIANGLECOLUMN="triangleColumn",tt.HEXAGONCOLUMN="hexagonColumn",tt.PENTAGONCOLUMN="pentagonColumn"})(Pn||(Pn={}));var Er;(function(tt){tt.CIRCLE="circle",tt.SQUARE="square",tt.TRIANGLE="triangle",tt.HEXAGON="hexagon",tt.PENTAGON="pentagon"})(Er||(Er={}));function Pr(tt){for(var St=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,bt=Math.PI*2/tt,gt=[],Tt=0;Tt<tt;Tt++)gt.push(bt*Tt+St*Math.PI/12);var Dt=gt.map(function(Yt){var pe=Math.sin(Yt+Math.PI/4),Be=Math.cos(Yt+Math.PI/4);return[pe,Be,0]});return Dt}function ln(){return Pr(30)}function Cr(){return Pr(4)}function Ar(){return Pr(3)}function je(){return Pr(6,1)}function We(){return Pr(5)}var Ye=(En={},u()(En,Er.CIRCLE,ln),u()(En,Er.HEXAGON,je),u()(En,Er.TRIANGLE,Ar),u()(En,Er.SQUARE,Cr),u()(En,Er.PENTAGON,We),u()(En,Pn.CYLINDER,ln),u()(En,Pn.HEXAGONCOLUMN,je),u()(En,Pn.TRIANGLECOLUMN,Ar),u()(En,Pn.SQUARECOLUMN,Cr),u()(En,Pn.PENTAGONCOLUMN,We),En),fn={};function mn(tt){var St=ue(tt.coordinates);return{vertices:[].concat(Xe()(St),Xe()(St),Xe()(St),Xe()(St)),indices:[0,1,2,2,3,0],size:St.length}}function jn(tt){var St=tt.shape,bt=Pi(St,!1),gt=bt.positions,Tt=bt.index,Dt=bt.normals;return{vertices:gt,indices:Tt,normals:Dt,size:5}}function bn(tt){var St=ue(tt.coordinates);return{vertices:Xe()(St),indices:[0],size:St.length}}function Ln(tt){var St=tt.coordinates,bt=St;Array.isArray(bt[0][0])||(bt=[St]);var gt=new Vt({dash:!0,join:"bevel"});bt.forEach(function(Dt){gt.extrude(Dt)});var Tt=gt.complex;return{vertices:Tt.positions,indices:Tt.indices,normals:Tt.normals,size:6}}function nr(tt){var St=tt.coordinates,bt=Kn.a.flatten(St),gt=bt.vertices,Tt=bt.dimensions,Dt=bt.holes;return{indices:Kn()(gt,Dt,Tt),vertices:gt,size:Tt}}function Yn(tt){var St=tt.coordinates,bt=Fn(St,!0),gt=bt.positions,Tt=bt.index,Dt=bt.normals;return{vertices:gt,indices:Tt,normals:Dt,size:5}}function Mn(tt){var St=tt.shape,bt=Ko(St),gt=bt.positions,Tt=bt.index;return{vertices:gt,indices:Tt,size:3}}function Rr(tt){var St=tt.coordinates,bt=[].concat(Xe()(St[0]),[0,0,1,St[1][0],St[0][1],0,1,1],Xe()(St[1]),[0,1,0],Xe()(St[0]),[0,0,1],Xe()(St[1]),[0,1,0,St[0][0],St[1][1],0,0,0]),gt=[0,1,2,3,4,5];return{vertices:bt,indices:gt,size:5}}function pr(tt){for(var St=30,bt=tt.coordinates,gt=[],Tt=[],Dt=function(Be){gt.push(Be,1,Be,bt[0][0],bt[0][1],bt[1][0],bt[1][1],Be,-1,Be,bt[0][0],bt[0][1],bt[1][0],bt[1][1]),Be!==St-1&&Tt.push.apply(Tt,Xe()([0,1,2,1,3,2].map(function(Qe){return Be*2+Qe})))},Yt=0;Yt<St;Yt++)Dt(Yt);return{vertices:gt,indices:Tt,size:7}}function zr(tt){var St=tt.coordinates;St.length===2&&St.push(0);var bt=tt.size,gt=_a(-1,1),Tt=_a(1,1),Dt=_a(-1,-1),Yt=_a(1,-1),pe=[].concat(Xe()(St),Xe()(gt),Xe()(St),Xe()(Dt),Xe()(St),Xe()(Yt),Xe()(St),Xe()(Tt)),Be=[0,1,2,3,0,2];return{vertices:pe,indices:Be,size:5}}function Pi(tt){var St=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(fn&&fn[tt])return fn[tt];var bt=Ye[tt]?Ye[tt]():Ye.cylinder(),gt=Fn([bt],St);return fn[tt]=gt,gt}function Oa(tt,St){for(var bt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:3,gt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,Tt=new Float32Array(tt.length/bt*3),Dt,Yt,pe,Be=Hn.d.create(),Qe=Hn.d.create(),Bn=Hn.d.create(),fr=0,qr=St.length;fr<qr;fr+=3){Dt=St[fr+0]*3,Yt=St[fr+1]*3,pe=St[fr+2]*3;var ci=[tt[Dt],tt[Dt+1]],Gi=[tt[Yt],tt[Yt+1]],zi=[tt[pe],tt[pe+1]];gt&&(ci=Object(O.p)(ci),Gi=Object(O.p)(Gi),zi=Object(O.p)(zi));var aa=ci,no=be()(aa,2),uo=no[0],Ws=no[1],rs=Hn.d.fromValues(uo,Ws,tt[Dt+2]),is=Gi,du=be()(is,2),lo=du[0],vu=du[1],Du=Hn.d.fromValues(lo,vu,tt[Yt+2]),ac=zi,jo=be()(ac,2),Zl=jo[0],pl=jo[1],xf=Hn.d.fromValues(Zl,pl,tt[pe+2]);Hn.d.sub(Be,xf,Du),Hn.d.sub(Qe,rs,Du),Hn.d.cross(Bn,Be,Qe),Tt[Dt]+=Be[0],Tt[Dt+1]+=Be[1],Tt[Dt+2]+=Be[2],Tt[Yt]+=Be[0],Tt[Yt+1]+=Be[1],Tt[Yt+2]+=Be[2],Tt[pe]+=Be[0],Tt[pe+1]+=Be[1],Tt[pe+2]+=Be[2]}return Ua(Tt),Tt}function Ua(tt){for(var St=0,bt=tt.length;St<bt;St+=3){var gt=Hn.d.fromValues(tt[St],tt[St+1],tt[St+2]),Tt=Hn.d.create();Hn.d.normalize(Tt,gt),tt.set(Tt,St)}}function ro(tt){var St=tt[0][0],bt=tt[0][tt[0].length-1];return St[0]===bt[0]&&St[1]===bt[1]}function Ko(tt){var St=["cylinder","triangleColumn","hexagonColumn","squareColumn"],bt=Ye[tt]?Ye[tt]():Ye.circle(),gt=St.indexOf(tt)===-1?$e([bt]):xe([bt]);return gt}function _a(tt,St){var bt=(tt+1)/2,gt=(St+1)/2;return[bt,gt]}function co(tt){var St=Xo();return function(){var gt=n()(tt),Tt;if(St){var Dt=n()(this).constructor;Tt=Reflect.construct(gt,arguments,Dt)}else Tt=gt.apply(this,arguments);return r()(this,Tt)}}function Xo(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var io=`uniform float u_opacity: 1.0;
uniform vec4 u_baseColor : [ 1.0, 0, 0, 1.0 ];
uniform vec4 u_brightColor : [ 1.0, 0, 0, 1.0 ];
uniform vec4 u_windowColor : [ 1.0, 0, 0, 1.0 ];
uniform float u_near : 0;
uniform float u_far : 1;
varying vec4 v_Color;
varying vec2 v_texCoord;
uniform float u_Zoom : 1;
uniform float u_time;

#pragma include "picking"

vec3 getWindowColor(float n, float hot, vec3 brightColor, vec3 darkColor) {
    float s = step(hot, n);
    vec3 color = mix(brightColor,vec3(0.9,0.9,1.0),n);

    return mix(darkColor, color, s);
}
float random (vec2 st) {
    return fract(sin(dot(st.xy, vec2(12.9898,78.233)))* 43758.5453123);
}

float LinearizeDepth()
{
    float z = gl_FragCoord.z * 2.0 - 1.0;
    return (2.0 * u_near * u_far) / (u_far + u_near - z * (u_far - u_near));
}

vec3 fog(vec3 color, vec3 fogColor, float depth){
    float fogFactor=clamp(depth,0.0,1.0);
    vec3 output_color=mix(fogColor,color,fogFactor);
    return output_color;
}

float sdRect(vec2 p, vec2 sz) {
  vec2 d = abs(p) - sz;
  float outside = length(max(d, 0.));
  float inside = min(max(d.x, d.y), 0.);
  return outside + inside;
}

void main() {
  gl_FragColor = v_Color;
  vec3 baseColor = u_baseColor.xyz;
  vec3 brightColor = u_brightColor.xyz;
  vec3 windowColor = u_windowColor.xyz;
  float targetColId = 5.;
  float depth = 1.0 - LinearizeDepth() / u_far * u_Zoom;
  vec3 fogColor = vec3(23.0/255.0,31.0/255.0,51.0/255.0);
  if(v_texCoord.x < 0.) { //\u9876\u90E8\u989C\u8272
       vec3 foggedColor = fog(baseColor.xyz + vec3(0.12*0.9,0.2*0.9,0.3*0.9),fogColor,depth);
       gl_FragColor = vec4( foggedColor, v_Color.w);
  }else { // \u4FA7\u9762\u989C\u8272
        vec2 st = v_texCoord;
        vec2  UvScale = v_texCoord;
        float tStep = min(0.08,max(0.05* (18.0-u_Zoom),0.02));
        float tStart = 0.25 * tStep;
        float tEnd = 0.75 * tStep;
        float u = mod(UvScale.x, tStep);
        float v = mod(UvScale.y, tStep);
        float ux = floor(UvScale.x/tStep);
        float uy = floor(UvScale.y/tStep);
        float n = random(vec2(ux,uy));
        float lightP = u_time;
        float head = 1.0- step(0.005,st.y);
        /*step3*/
        // \u5C06\u7A97\u6237\u989C\u8272\u548C\u5899\u9762\u989C\u8272\u533A\u522B\u5F00\u6765
        float sU = step(tStart, u) - step(tEnd, u);
        float sV = step(tStart, v) - step(tEnd, v);
        vec2 windowSize = vec2(abs(tEnd-tStart),abs(tEnd-tStart));
        float dist = sdRect(vec2(u,v), windowSize);
        float s = sU * sV;

        float curColId = floor(UvScale.x / tStep);
        float sCol = step(targetColId - 0.2, curColId) - step(targetColId + 0.2, curColId);

        float mLightP = mod(lightP, 2.);
        float sRow = step(mLightP - 0.2, st.y) - step(mLightP, st.y);
        if(ux == targetColId){
            n =0.;
        }
        float timeP = min(0.75, abs ( sin(u_time/3.0) ) );
        float hot = smoothstep(1.0,0.0,timeP);
        vec3 color = mix(baseColor, getWindowColor(n,hot,brightColor,windowColor), s);
        //vec3 color = mix(baseColor, getWindowColor(n,hot,brightColor,windowColor), 1.0);
        float sFinal = s * sCol * sRow;
        color += mix(baseColor, brightColor, sFinal*n);
        if (st.y<0.01){
        color = baseColor;
         }
        if(head ==1.0) { // \u9876\u90E8\u4EAE\u7EBF
            color = brightColor;
        }
        color = color * v_Color.rgb;

        vec3 foggedColor = fog(color,fogColor,depth);

        gl_FragColor = vec4(foggedColor,1.0);
  }
  gl_FragColor.a *= u_opacity;
  gl_FragColor = filterColor(gl_FragColor);
}
`,To=`precision highp float;

#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Normal;
attribute float a_Size;
uniform mat4 u_ModelMatrix;

attribute vec2 a_Uv;
varying vec2 v_texCoord;

varying vec4 v_Color;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  vec4 project_pos = project_position(pos);
   v_texCoord = a_Uv;
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  float lightWeight = calc_lighting(pos);
  // v_Color = a_Color;
  v_Color = vec4(a_Color.rgb * lightWeight, a_Color.w);

  setPickingColor(a_PickingColor);
}
`,ds=function(tt){s()(bt,tt);var St=co(bt);function bt(){return T()(this,bt),St.apply(this,arguments)}return t()(bt,[{key:"getUninforms",value:function(){var Tt=this.layer.getLayerConfig(),Dt=Tt.opacity,Yt=Dt===void 0?1:Dt,pe=Tt.baseColor,Be=pe===void 0?"rgb(16,16,16)":pe,Qe=Tt.brightColor,Bn=Qe===void 0?"rgb(255,176,38)":Qe,fr=Tt.windowColor,qr=fr===void 0?"rgb(30,60,89)":fr,ci=Tt.time,Gi=ci===void 0?0:ci;return{u_opacity:Yt,u_baseColor:Object(O.s)(Be),u_brightColor:Object(O.s)(Bn),u_windowColor:Object(O.s)(qr),u_time:this.layer.getLayerAnimateTime()||Gi}}},{key:"initModels",value:function(){return this.startModelAnimate(),[this.layer.buildLayerModel({moduleName:"cityBuilding",vertexShader:To,fragmentShader:io,triangulation:Yn})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"normal",type:U.AttributeType.Attribute,descriptor:{name:"a_Normal",buffer:{usage:U.gl.STATIC_DRAW,data:[],type:U.gl.FLOAT},size:3,update:function(Dt,Yt,pe,Be,Qe){return Qe}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:U.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:1,update:function(Dt,Yt,pe,Be){var Qe=Dt.size,Bn=Qe===void 0?10:Qe;return Array.isArray(Bn)?[Bn[0]]:[Bn]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:U.AttributeType.Attribute,descriptor:{name:"a_Uv",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:2,update:function(Dt,Yt,pe,Be){var Qe=Dt.size;return[pe[3],pe[4]]}}})}}]),bt}(me);function La(tt){var St=Vo();return function(){var gt=n()(tt),Tt;if(St){var Dt=n()(this).constructor;Tt=Reflect.construct(gt,arguments,Dt)}else Tt=gt.apply(this,arguments);return r()(this,Tt)}}function Vo(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var Bo=function(tt){s()(bt,tt);var St=La(bt);function bt(){var gt;T()(this,bt);for(var Tt=arguments.length,Dt=new Array(Tt),Yt=0;Yt<Tt;Yt++)Dt[Yt]=arguments[Yt];return gt=St.call.apply(St,[this].concat(Dt)),gt.type="PolygonLayer",gt}return t()(bt,[{key:"buildModels",value:function(){this.layerModel=new ds(this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"setLight",value:function(Tt){this.updateLayerConfig({time:Tt})}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getModelType",value:function(){return"citybuilding"}}]),bt}(vt);function lu(tt){var St=Jo();return function(){var gt=n()(tt),Tt;if(St){var Dt=n()(this).constructor;Tt=Reflect.construct(gt,arguments,Dt)}else Tt=gt.apply(this,arguments);return r()(this,Tt)}}function Jo(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var iu=`precision highp float;\r
// \u591A\u8FB9\u5F62\u9876\u70B9\u5750\u6807\r
attribute vec3 a_Position;\r
// \u591A\u8FB9\u5F62\u7ECF\u7EAC\u5EA6\u5750\u6807\r
attribute vec3 a_Pos;\r
attribute float a_Size;\r
attribute vec4 a_Color;\r
uniform vec2 u_radius;\r
uniform float u_coverage: 0.9;\r
uniform float u_angle: 0;\r
uniform mat4 u_ModelMatrix;\r
varying vec4 v_color;\r
\r
#pragma include "projection"\r
#pragma include "project"\r
#pragma include "picking"\r
\r
void main() {\r
  v_color = a_Color;\r
\r
  mat2 rotationMatrix = mat2(cos(u_angle), sin(u_angle), -sin(u_angle), cos(u_angle));\r
  vec2 offset = a_Position.xy * u_radius * rotationMatrix * u_coverage ;\r
  vec2 lnglat = unProjectFlat(a_Pos.xy + offset);\r
  vec4 project_pos = project_position(vec4(lnglat, 0, 1.0));\r
  gl_Position = project_common_position_to_clipspace(project_pos);\r
\r
  setPickingColor(a_PickingColor);\r
}\r
`,$s=`precision highp float;
varying vec4 v_color;
uniform float u_opacity: 1;

#pragma include "picking"

void main() {
  gl_FragColor = v_color;
  gl_FragColor.a *= u_opacity;

  gl_FragColor = filterColor(gl_FragColor);
}
`,Ne=function(tt){s()(bt,tt);var St=lu(bt);function bt(){return T()(this,bt),St.apply(this,arguments)}return t()(bt,[{key:"getUninforms",value:function(){var Tt=this.layer.getLayerConfig(),Dt=Tt.opacity,Yt=Tt.coverage,pe=Tt.angle;return{u_opacity:Dt||1,u_coverage:Yt||.9,u_angle:pe||0,u_radius:[this.layer.getSource().data.xOffset,this.layer.getSource().data.yOffset]}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"gridheatmap",vertexShader:iu,fragmentShader:$s,triangulation:Mn,depth:{enable:!1},primitive:U.gl.TRIANGLES,blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"pos",type:U.AttributeType.Attribute,descriptor:{name:"a_Pos",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:3,update:function(Dt,Yt){var pe=Dt.coordinates;return[pe[0],pe[1],0]}}})}}]),bt}(me);function oe(tt){var St=Wt();return function(){var gt=n()(tt),Tt;if(St){var Dt=n()(this).constructor;Tt=Reflect.construct(gt,arguments,Dt)}else Tt=gt.apply(this,arguments);return r()(this,Tt)}}function Wt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var Ee=`precision highp float;
// \u591A\u8FB9\u5F62\u9876\u70B9\u5750\u6807
attribute vec3 a_Position;
// \u591A\u8FB9\u5F62\u7ECF\u7EAC\u5EA6\u5750\u6807
attribute vec3 a_Pos;

attribute vec3 a_Normal;
attribute float a_Size;
attribute vec4 a_Color;
uniform vec2 u_radius;
uniform float u_coverage: 0.9;
uniform float u_angle: 0;
uniform mat4 u_ModelMatrix;
varying vec4 v_color;

#pragma include "projection"
#pragma include "project"
#pragma include "light"
#pragma include "picking"

void main() {
  mat2 rotationMatrix = mat2(cos(u_angle), sin(u_angle), -sin(u_angle), cos(u_angle));
  vec2 offset =(vec2(a_Position.xy * u_radius * rotationMatrix * u_coverage));
  vec2 lnglat = unProjectFlat(a_Pos.xy + offset);
  vec4 project_pos = project_position(vec4(lnglat, a_Position.z * a_Size, 1.0));
  float lightWeight = calc_lighting(project_pos);
  v_color =vec4(a_Color.rgb*lightWeight, a_Color.w);

  gl_Position = project_common_position_to_clipspace(project_pos);
  setPickingColor(a_PickingColor);
}
`,an=`precision highp float;
varying vec4 v_color;
uniform float u_opacity: 1;

#pragma include "picking"

void main() {
  gl_FragColor = v_color;
  gl_FragColor.a *= u_opacity;

  gl_FragColor = filterColor(gl_FragColor);
}
`,Un=function(tt){s()(bt,tt);var St=oe(bt);function bt(){return T()(this,bt),St.apply(this,arguments)}return t()(bt,[{key:"getUninforms",value:function(){var Tt=this.layer.getLayerConfig(),Dt=Tt.opacity,Yt=Tt.coverage,pe=Tt.angle;return{u_opacity:Dt||1,u_coverage:Yt||1,u_angle:pe||0,u_radius:[this.layer.getSource().data.xOffset,this.layer.getSource().data.yOffset]}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"grid3dheatmap",vertexShader:Ee,fragmentShader:an,triangulation:jn,depth:{enable:!0},blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:U.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:1,update:function(Dt,Yt,pe,Be){var Qe=Dt.size;return Array.isArray(Qe)?[Qe[0]]:[Qe]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:U.AttributeType.Attribute,descriptor:{name:"a_Normal",buffer:{usage:U.gl.STATIC_DRAW,data:[],type:U.gl.FLOAT},size:3,update:function(Dt,Yt,pe,Be,Qe){return Qe}}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:U.AttributeType.Attribute,descriptor:{name:"a_Pos",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:3,update:function(Dt,Yt){var pe=Dt.coordinates;return[pe[0],pe[1],0]}}})}}]),bt}(me);function qn(tt,St){for(var bt=[],gt=[],Tt=[],Dt=tt+1,Yt=St+1,pe=tt/2,Be=St/2,Qe=0;Qe<Yt;Qe++)for(var Bn=Qe-Be,fr=0;fr<Dt;fr++){var qr=fr-pe;gt.push(qr/pe,-Bn/Be,0),Tt.push(fr/tt),Tt.push(1-Qe/St)}for(var ci=0;ci<St;ci++)for(var Gi=0;Gi<tt;Gi++){var zi=Gi+Dt*ci,aa=Gi+Dt*(ci+1),no=Gi+1+Dt*(ci+1),uo=Gi+1+Dt*ci;bt.push(zi,aa,uo),bt.push(aa,no,uo)}return{vertices:gt,indices:bt,uvs:Tt}}function kn(tt,St){var bt=Object.keys(tt);if(Object.getOwnPropertySymbols){var gt=Object.getOwnPropertySymbols(tt);St&&(gt=gt.filter(function(Tt){return Object.getOwnPropertyDescriptor(tt,Tt).enumerable})),bt.push.apply(bt,gt)}return bt}function Xr(tt){for(var St=1;St<arguments.length;St++){var bt=arguments[St]!=null?arguments[St]:{};St%2?kn(Object(bt),!0).forEach(function(gt){u()(tt,gt,bt[gt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tt,Object.getOwnPropertyDescriptors(bt)):kn(Object(bt)).forEach(function(gt){Object.defineProperty(tt,gt,Object.getOwnPropertyDescriptor(bt,gt))})}return tt}function Si(tt){var St=Ti();return function(){var gt=n()(tt),Tt;if(St){var Dt=n()(this).constructor;Tt=Reflect.construct(gt,arguments,Dt)}else Tt=gt.apply(this,arguments);return r()(this,Tt)}}function Ti(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var ki=`uniform sampler2D u_texture;
uniform sampler2D u_colorTexture;
uniform float u_opacity;
varying vec2 v_texCoord;
varying float v_intensity;

void main(){
   
     float intensity = texture2D(u_texture, v_texCoord).r;
    vec4 color = texture2D(u_colorTexture,vec2(intensity, 0));
    gl_FragColor = color;
    // gl_FragColor.a = color.a * smoothstep(0.1,0.2,intensity)* u_opacity;
     gl_FragColor.a = color.a * smoothstep(0.,0.1,intensity) * u_opacity;

}
`,sa=`precision highp float;
attribute vec3 a_Position;
attribute vec2 a_Uv;
uniform sampler2D u_texture;
varying vec2 v_texCoord;
uniform mat4 u_ModelMatrix;
uniform mat4 u_InverseViewProjectionMatrix;
uniform mat4 u_ViewProjectionMatrixUncentered;
varying float v_intensity;

vec2 toBezier(float t, vec2 P0, vec2 P1, vec2 P2, vec2 P3) {
    float t2 = t * t;
    float one_minus_t = 1.0 - t;
    float one_minus_t2 = one_minus_t * one_minus_t;
    return (P0 * one_minus_t2 * one_minus_t + P1 * 3.0 * t * one_minus_t2 + P2 * 3.0 * t2 * one_minus_t + P3 * t2 * t);
}
vec2 toBezier(float t, vec4 p){
    return toBezier(t, vec2(0.0, 0.0), vec2(p.x, p.y), vec2(p.z, p.w), vec2(1.0, 1.0));
}
#pragma include "projection"
void main() {
  v_texCoord = a_Uv;

  vec2 pos =(a_Uv * vec2(2.0) - vec2(1.0));


  vec4 p1 = vec4(pos, 0.0, 1.0);
	vec4 p2 = vec4(pos, 1.0, 1.0);

	vec4 inverseP1 = u_InverseViewProjectionMatrix * p1;
	vec4 inverseP2 = u_InverseViewProjectionMatrix * p2;

  inverseP1 = inverseP1 / inverseP1.w;
	inverseP2 = inverseP2 / inverseP2.w;

	float zPos = (0.0 - inverseP1.z) / (inverseP2.z - inverseP1.z);
	vec4 position = inverseP1 + zPos * (inverseP2 - inverseP1);

  vec4 b= vec4(0.5000, 0, 1, 0.5000);
  float fh;

  v_intensity = texture2D(u_texture, v_texCoord).r;
  fh = toBezier(v_intensity, b).y;
  gl_Position = u_ViewProjectionMatrixUncentered * vec4(position.xy, fh * project_pixel(50.), 1.0);

}
`,$a=`uniform sampler2D u_texture;
uniform sampler2D u_colorTexture;
uniform float u_opacity;
varying vec2 v_texCoord;
varying float v_intensity;

void main(){
     float intensity = texture2D(u_texture, v_texCoord).r;
    vec4 color = texture2D(u_colorTexture,vec2(intensity, 0));
    gl_FragColor =color;
    gl_FragColor.a = color.a * smoothstep(0.,0.1,intensity) * u_opacity;

}
`,ba=`precision highp float;
uniform float u_intensity;
varying float v_weight;
varying vec2 v_extrude;
#define GAUSS_COEF  0.3989422804014327
void main(){
    float d = -0.5 * 3.0 * 3.0 * dot(v_extrude, v_extrude);
    float val = v_weight * u_intensity * GAUSS_COEF * exp(d);
    gl_FragColor = vec4(val, 1., 1., 1.);
}
`,bo=`precision highp float;
attribute vec3 a_Position;
attribute float a_Size;
attribute vec2 a_Dir;
uniform float u_intensity;
uniform float u_radius;
varying vec2 v_extrude;
varying float v_weight;
uniform mat4 u_ModelMatrix;

#define GAUSS_COEF  0.3989422804014327

#pragma include "projection"

void main(){
    v_weight = a_Size;
    float ZERO = 1.0 / 255.0 / 16.0;
    float extrude_x = a_Dir.x * 2.0 -1.0;
    float extrude_y = a_Dir.y * 2.0 -1.0;
    vec2 extrude_dir = normalize(vec2(extrude_x,extrude_y));
    float S = sqrt(-2.0 * log(ZERO / a_Size / u_intensity / GAUSS_COEF)) / 3.0;
    v_extrude = extrude_dir * S;

    vec2 offset = project_pixel(v_extrude * u_radius);
    vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0));

    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));
}
`,Fa=`precision highp float;
attribute vec3 a_Position;
attribute vec2 a_Uv;
uniform sampler2D u_texture;
varying vec2 v_texCoord;
varying float v_intensity;
void main() {
  v_texCoord = a_Uv;
  v_intensity = texture2D(u_texture, v_texCoord).r;
  gl_Position = vec4(a_Position.xy, 0, 1.);
}
`,oo=function(tt){s()(bt,tt);var St=Si(bt);function bt(){var gt;T()(this,bt);for(var Tt=arguments.length,Dt=new Array(Tt),Yt=0;Yt<Tt;Yt++)Dt[Yt]=arguments[Yt];return gt=St.call.apply(St,[this].concat(Dt)),gt.texture=void 0,gt.colorTexture=void 0,gt.heatmapFramerBuffer=void 0,gt.intensityModel=void 0,gt.colorModel=void 0,gt.shapeType=void 0,gt}return t()(bt,[{key:"render",value:function(){var Tt=this,Dt=this.rendererService,Yt=Dt.clear,pe=Dt.useFramebuffer;pe(this.heatmapFramerBuffer,function(){Yt({color:[0,0,0,0],depth:1,stencil:0,framebuffer:Tt.heatmapFramerBuffer}),Tt.drawIntensityMode()}),this.layer.styleNeedUpdate&&this.updateColorTexture(),this.shapeType==="heatmap"?this.drawColorMode():this.draw3DHeatMap()}},{key:"getUninforms",value:function(){throw new Error("Method not implemented.")}},{key:"initModels",value:function(){var Tt,Dt=this.rendererService,Yt=Dt.createFramebuffer,pe=Dt.clear,Be=Dt.getViewportSize,Qe=Dt.createTexture2D,Bn=Dt.useFramebuffer,fr=this.styleAttributeService.getLayerStyleAttribute("shape"),qr=(fr==null||(Tt=fr.scale)===null||Tt===void 0?void 0:Tt.field)||"heatmap";this.shapeType=qr,this.intensityModel=this.buildHeatMapIntensity(),this.colorModel=qr==="heatmap"?this.buildHeatmapColor():this.build3dHeatMap();var ci=this.layer.getLayerConfig(),Gi=ci.rampColors,zi=Object(O.n)(Gi),aa=Be(),no=aa.width,uo=aa.height;return this.heatmapFramerBuffer=Yt({color:Qe({width:Math.floor(no/4),height:Math.floor(uo/4),wrapS:U.gl.CLAMP_TO_EDGE,wrapT:U.gl.CLAMP_TO_EDGE,min:U.gl.LINEAR,mag:U.gl.LINEAR}),depth:!1}),this.updateColorTexture(),[this.intensityModel,this.colorModel]}},{key:"buildModels",value:function(){return this.initModels()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"dir",type:U.AttributeType.Attribute,descriptor:{name:"a_Dir",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:2,update:function(Dt,Yt,pe,Be){return[pe[3],pe[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:U.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:1,update:function(Dt,Yt,pe,Be){var Qe=Dt.size,Bn=Qe===void 0?1:Qe;return[Bn]}}})}},{key:"buildHeatMapIntensity",value:function(){return this.layer.buildLayerModel({moduleName:"heatmapintensity",vertexShader:bo,fragmentShader:ba,triangulation:zr,depth:{enable:!1},blend:{enable:!0,func:{srcRGB:U.gl.ONE,srcAlpha:1,dstRGB:U.gl.ONE,dstAlpha:1}}})}},{key:"buildHeatmapColor",value:function(){this.shaderModuleService.registerModule("heatmapColor",{vs:Fa,fs:$a});var Tt=this.shaderModuleService.getModule("heatmapColor"),Dt=Tt.vs,Yt=Tt.fs,pe=Tt.uniforms,Be=this.rendererService,Qe=Be.createAttribute,Bn=Be.createElements,fr=Be.createBuffer,qr=Be.createModel;return qr({vs:Dt,fs:Yt,attributes:{a_Position:Qe({buffer:fr({data:[-1,1,0,1,1,0,-1,-1,0,1,-1,0],type:U.gl.FLOAT}),size:3}),a_Uv:Qe({buffer:fr({data:[0,1,1,1,0,0,1,0],type:U.gl.FLOAT}),size:2})},uniforms:Xr({},pe),depth:{enable:!1},blend:this.getBlend(),count:6,elements:Bn({data:[0,2,1,2,3,1],type:U.gl.UNSIGNED_INT,count:6})})}},{key:"drawIntensityMode",value:function(){var Tt=this.layer.getLayerConfig(),Dt=Tt.opacity,Yt=Tt.intensity,pe=Yt===void 0?10:Yt,Be=Tt.radius,Qe=Be===void 0?5:Be;this.intensityModel.draw({uniforms:{u_opacity:Dt||1,u_radius:Qe,u_intensity:pe}})}},{key:"drawColorMode",value:function(){var Tt=this.layer.getLayerConfig(),Dt=Tt.opacity;this.colorModel.draw({uniforms:{u_opacity:Dt||1,u_colorTexture:this.colorTexture,u_texture:this.heatmapFramerBuffer}})}},{key:"draw3DHeatMap",value:function(){var Tt=this.layer.getLayerConfig(),Dt=Tt.opacity,Yt=Hn.b.invert(Hn.b.create(),Hn.b.fromValues.apply(Hn.b,Xe()(this.cameraService.getViewProjectionMatrixUncentered())));this.colorModel.draw({uniforms:{u_opacity:Dt||1,u_colorTexture:this.colorTexture,u_texture:this.heatmapFramerBuffer,u_ViewProjectionMatrixUncentered:this.cameraService.getViewProjectionMatrixUncentered(),u_InverseViewProjectionMatrix:Xe()(Yt)}})}},{key:"build3dHeatMap",value:function(){var Tt=this.rendererService.getViewportSize,Dt=Tt(),Yt=Dt.width,pe=Dt.height,Be=qn(Yt/4,pe/4);this.shaderModuleService.registerModule("heatmap3dColor",{vs:sa,fs:ki});var Qe=this.shaderModuleService.getModule("heatmap3dColor"),Bn=Qe.vs,fr=Qe.fs,qr=Qe.uniforms,ci=this.rendererService,Gi=ci.createAttribute,zi=ci.createElements,aa=ci.createBuffer,no=ci.createModel;return no({vs:Bn,fs:fr,attributes:{a_Position:Gi({buffer:aa({data:Be.vertices,type:U.gl.FLOAT}),size:3}),a_Uv:Gi({buffer:aa({data:Be.uvs,type:U.gl.FLOAT}),size:2})},primitive:U.gl.TRIANGLES,uniforms:Xr({},qr),depth:{enable:!0},blend:{enable:!0,func:{srcRGB:U.gl.SRC_ALPHA,srcAlpha:1,dstRGB:U.gl.ONE_MINUS_SRC_ALPHA,dstAlpha:1}},elements:zi({data:Be.indices,type:U.gl.UNSIGNED_INT,count:Be.indices.length})})}},{key:"updateStyle",value:function(){this.updateColorTexture()}},{key:"updateColorTexture",value:function(){var Tt=this.rendererService.createTexture2D;this.texture&&this.texture.destroy();var Dt=this.layer.getLayerConfig(),Yt=Dt.rampColors,pe=Object(O.n)(Yt);this.colorTexture=Tt({data:new Uint8Array(pe.data),width:pe.width,height:pe.height,wrapS:U.gl.CLAMP_TO_EDGE,wrapT:U.gl.CLAMP_TO_EDGE,min:U.gl.NEAREST,mag:U.gl.NEAREST,flipY:!1})}}]),bt}(me);function Eo(tt){var St=Qa();return function(){var gt=n()(tt),Tt;if(St){var Dt=n()(this).constructor;Tt=Reflect.construct(gt,arguments,Dt)}else Tt=gt.apply(this,arguments);return r()(this,Tt)}}function Qa(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var Ao=`precision highp float;
varying vec4 v_color;
uniform float u_opacity: 1;

#pragma include "picking"

void main() {
  gl_FragColor = v_color;
  gl_FragColor.a *= u_opacity;

  gl_FragColor = filterColor(gl_FragColor);
}
`,as=`precision highp float;
// \u591A\u8FB9\u5F62\u9876\u70B9\u5750\u6807
attribute vec3 a_Position;
// \u591A\u8FB9\u5F62\u7ECF\u7EAC\u5EA6\u5750\u6807
attribute vec3 a_Pos;
attribute float a_Size;
attribute vec4 a_Color;
uniform vec2 u_radius;
uniform float u_coverage: 0.9;
uniform float u_angle: 0;
uniform mat4 u_ModelMatrix;
varying vec4 v_color;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

void main() {
  v_color = a_Color;
    
  mat2 rotationMatrix = mat2(cos(u_angle), sin(u_angle), -sin(u_angle), cos(u_angle));
  vec2 offset =(vec2(a_Position.xy * u_radius * rotationMatrix * u_coverage));
  vec2 lnglat = unProjectFlat(a_Pos.xy + offset);
  vec4 project_pos = project_position(vec4(lnglat, 0, 1.0));
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0., 1.0));
  setPickingColor(a_PickingColor);
}
`,No=function(tt){s()(bt,tt);var St=Eo(bt);function bt(){return T()(this,bt),St.apply(this,arguments)}return t()(bt,[{key:"getUninforms",value:function(){var Tt=this.layer.getLayerConfig(),Dt=Tt.opacity,Yt=Tt.coverage,pe=Tt.angle;return{u_opacity:Dt||1,u_coverage:Yt||.9,u_angle:pe||0,u_radius:[this.layer.getSource().data.xOffset,this.layer.getSource().data.yOffset]}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"hexagonheatmap",vertexShader:as,fragmentShader:Ao,triangulation:Mn,depth:{enable:!1},primitive:U.gl.TRIANGLES,blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"pos",type:U.AttributeType.Attribute,descriptor:{name:"a_Pos",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:3,update:function(Dt,Yt){var pe=Dt.coordinates;return[pe[0],pe[1],0]}}})}}]),bt}(me),xs={heatmap:oo,heatmap3d:oo,grid:Ne,grid3d:Un,hexagon:No},Co=xs;function qa(tt){var St=Ts();return function(){var gt=n()(tt),Tt;if(St){var Dt=n()(this).constructor;Tt=Reflect.construct(gt,arguments,Dt)}else Tt=gt.apply(this,arguments);return r()(this,Tt)}}function Ts(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var ls=function(tt){s()(bt,tt);var St=qa(bt);function bt(){var gt;T()(this,bt);for(var Tt=arguments.length,Dt=new Array(Tt),Yt=0;Yt<Tt;Yt++)Dt[Yt]=arguments[Yt];return gt=St.call.apply(St,[this].concat(Dt)),gt.type="HeatMapLayer",gt}return t()(bt,[{key:"buildModels",value:function(){var Tt=this.getModelType();this.layerModel=new Co[Tt](this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"renderModels",value:function(){var Tt=this,Dt=this.getModelType();return Dt==="heatmap"?(this.layerModel&&this.layerModel.render(),this):(this.layerModelNeedUpdate&&(this.models=this.layerModel.buildModels(),this.layerModelNeedUpdate=!1),this.models.forEach(function(Yt){return Yt.draw({uniforms:Tt.layerModel.getUninforms()})}),this)}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getModelType",value:function(){var Tt,Dt=this.styleAttributeService.getLayerStyleAttribute("shape"),Yt=this.getLayerConfig(),pe=Yt.shape3d,Be=this.getSource(),Qe=Be.data.type,Bn=(Dt==null||(Tt=Dt.scale)===null||Tt===void 0?void 0:Tt.field)||"heatmap";return Bn==="heatmap"||Bn==="heatmap3d"?"heatmap":Qe==="hexagon"?(pe==null?void 0:pe.indexOf(Bn))===-1?"hexagon":"grid3d":Qe==="grid"?(pe==null?void 0:pe.indexOf(Bn))===-1?"grid":"grid3d":"heatmap"}}]),bt}(vt);function wa(tt){var St=yn();return function(){var gt=n()(tt),Tt;if(St){var Dt=n()(this).constructor;Tt=Reflect.construct(gt,arguments,Dt)}else Tt=gt.apply(this,arguments);return r()(this,Tt)}}function yn(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var dr=`precision mediump float;
uniform float u_opacity: 1.0;
uniform sampler2D u_texture;
varying vec2 v_texCoord;
void main() {
  vec4 color = texture2D(u_texture,vec2(v_texCoord.x,v_texCoord.y));
  gl_FragColor = color;
  gl_FragColor.a *= u_opacity;
}
`,kr=`precision highp float;
uniform mat4 u_ModelMatrix;
attribute vec3 a_Position;
attribute vec2 a_Uv;
varying vec2 v_texCoord;
#pragma include "projection"
void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));
}
`,Ui=function(tt){s()(bt,tt);var St=wa(bt);function bt(){var gt;T()(this,bt);for(var Tt=arguments.length,Dt=new Array(Tt),Yt=0;Yt<Tt;Yt++)Dt[Yt]=arguments[Yt];return gt=St.call.apply(St,[this].concat(Dt)),gt.texture=void 0,gt}return t()(bt,[{key:"getUninforms",value:function(){var Tt=this.layer.getLayerConfig(),Dt=Tt.opacity;return{u_opacity:Dt||1,u_texture:this.texture}}},{key:"initModels",value:function(){var Tt=this,Dt=this.layer.getSource(),Yt=this.rendererService.createTexture2D;return this.texture=Yt({height:0,width:0}),Dt.data.images.then(function(pe){Tt.texture=Yt({data:pe[0],width:pe[0].width,height:pe[0].height}),Tt.layerService.renderLayers()}),[this.layer.buildLayerModel({moduleName:"RasterImage",vertexShader:kr,fragmentShader:dr,triangulation:Rr,primitive:U.gl.TRIANGLES,depth:{enable:!1},blend:this.getBlend()})]}},{key:"buildModels",value:function(){return this.initModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:U.AttributeType.Attribute,descriptor:{name:"a_Uv",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:2,update:function(Dt,Yt,pe,Be){return[pe[3],pe[4]]}}})}}]),bt}(me),Ja={image:Ui},So=Ja;function po(tt){var St=ea();return function(){var gt=n()(tt),Tt;if(St){var Dt=n()(this).constructor;Tt=Reflect.construct(gt,arguments,Dt)}else Tt=gt.apply(this,arguments);return r()(this,Tt)}}function ea(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var to=function(tt){s()(bt,tt);var St=po(bt);function bt(){var gt;T()(this,bt);for(var Tt=arguments.length,Dt=new Array(Tt),Yt=0;Yt<Tt;Yt++)Dt[Yt]=arguments[Yt];return gt=St.call.apply(St,[this].concat(Dt)),gt.type="ImageLayer",gt}return t()(bt,[{key:"buildModels",value:function(){var Tt=this.getModelType();this.layerModel=new So[Tt](this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getDefaultConfig",value:function(){var Tt=this.getModelType(),Dt={image:{}};return Dt[Tt]}},{key:"getModelType",value:function(){return"image"}}]),bt}(vt);function bs(tt){var St=Es();return function(){var gt=n()(tt),Tt;if(St){var Dt=n()(this).constructor;Tt=Reflect.construct(gt,arguments,Dt)}else Tt=gt.apply(this,arguments);return r()(this,Tt)}}function Es(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var ka=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0

uniform float u_opacity;
uniform float u_blur : 0.9;
uniform float u_line_type: 0.0;
varying vec2 v_normal;
varying vec4 v_dash_array;
varying float v_distance_ratio;
varying vec4 v_color;

uniform float u_time;
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];

#pragma include "picking"

void main() {
  gl_FragColor = v_color;
  // float blur = 1.- smoothstep(u_blur, 1., length(v_normal.xy));
  // float blur = smoothstep(1.0, u_blur, length(v_normal.xy));
  gl_FragColor.a *= u_opacity;
  if(u_line_type == LineTypeDash) {
   float flag = 0.;
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      flag = 1.;
    }
    gl_FragColor.a *=flag;
  }

  if(u_aimate.x == Animate) {
      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_aimate.z)* (1.0/ u_aimate.z) + u_time / u_aimate.y);
      alpha = (alpha + u_aimate.w -1.0) / u_aimate.w;
      alpha = smoothstep(0., 1., alpha);
      gl_FragColor.a *= alpha;
  }
  gl_FragColor = filterColor(gl_FragColor);
}
`,bu=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute float a_Size;
uniform mat4 u_ModelMatrix;
uniform float segmentNumber;
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];
varying vec4 v_color;
varying vec2 v_normal;

varying float v_distance_ratio;
uniform float u_line_type: 0.0;
uniform vec4 u_dash_array: [10.0, 5., 0, 0];
varying vec4 v_dash_array;
#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float bezier3(vec3 arr, float t) {
  float ut = 1. - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}
vec2 midPoint(vec2 source, vec2 target) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = 0.314;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);
  return mid;
}
float getSegmentRatio(float index) {
    return smoothstep(0.0, 1.0, index / (segmentNumber - 1.));
}
vec2 interpolate (vec2 source, vec2 target, float t) {
  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  vec2 mid = midPoint(source, target);
  vec3 x = vec3(source.x, mid.x, target.x);
  vec3 y = vec3(source.y, mid.y, target.y);
  return vec2(bezier3(x ,t), bezier3(y,t));
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

void main() {
  v_color = a_Color;
  vec2 source = a_Instance.rg;
  vec2 target =  a_Instance.ba;
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));
  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  if(u_line_type == LineTypeDash) {
      v_distance_ratio = segmentIndex / segmentNumber;
      float total_Distance = pixelDistance(a_Instance.rg, a_Instance.ba) / 2.0 * PI;
      v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);
    }
  if(u_aimate.x == Animate) {
      v_distance_ratio = segmentIndex / segmentNumber;
  }
  vec4 curr = project_position(vec4(interpolate(source, target, segmentRatio), 0.0, 1.0));
  vec4 next = project_position(vec4(interpolate(source, target, nextSegmentRatio), 0.0, 1.0));
  v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);
  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));

  gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));
  setPickingColor(a_PickingColor);
}
`,Wo={solid:0,dash:1},As=function(tt){s()(bt,tt);var St=bs(bt);function bt(){return T()(this,bt),St.apply(this,arguments)}return t()(bt,[{key:"getUninforms",value:function(){var Tt=this.layer.getLayerConfig(),Dt=Tt.opacity,Yt=Tt.lineType,pe=Yt===void 0?"solid":Yt,Be=Tt.dashArray,Qe=Be===void 0?[10,5]:Be;return Qe.length===2&&Qe.push(0,0),{u_opacity:Dt||1,segmentNumber:30,u_line_type:Wo[pe||"solid"],u_dash_array:Qe,u_blur:.9}}},{key:"getAnimateUniforms",value:function(){var Tt=this.layer.getLayerConfig(),Dt=Tt.animateOption;return{u_aimate:this.animateOption2Array(Dt),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"arc2dline",vertexShader:bu,fragmentShader:ka,triangulation:pr,depth:{enable:!1},blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:U.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:1,update:function(Dt,Yt,pe,Be){var Qe=Dt.size,Bn=Qe===void 0?1:Qe;return Array.isArray(Bn)?[Bn[0]]:[Bn]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:U.AttributeType.Attribute,descriptor:{name:"a_Instance",buffer:{usage:U.gl.STATIC_DRAW,data:[],type:U.gl.FLOAT},size:4,update:function(Dt,Yt,pe,Be){return[pe[3],pe[4],pe[5],pe[6]]}}})}}]),bt}(me);function Qs(tt){var St=vs();return function(){var gt=n()(tt),Tt;if(St){var Dt=n()(this).constructor;Tt=Reflect.construct(gt,arguments,Dt)}else Tt=gt.apply(this,arguments);return r()(this,Tt)}}function vs(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var ps=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute vec4 a_Color;
attribute float a_Size;

uniform mat4 u_ModelMatrix;
uniform float segmentNumber;
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];
varying vec4 v_color;
varying vec2 v_normal;
varying float v_distance_ratio;
uniform float u_line_type: 0.0;
uniform vec4 u_dash_array: [10.0, 5., 0, 0];
varying vec4 v_dash_array;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(
    mix(source, target, segmentRatio),
    sqrt(max(0.0, vertex_height))
  );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;

  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

void main() {
  v_color = a_Color;
  vec2 source = project_position(vec4(a_Instance.rg, 0, 0)).xy;
  vec2 target = project_position(vec4(a_Instance.ba, 0, 0)).xy;
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

   if(u_line_type == LineTypeDash) {
    v_distance_ratio = segmentIndex / segmentNumber;
    float total_Distance = pixelDistance(a_Instance.rg, a_Instance.ba) / 2.0 * PI;
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);
  }
    if(u_aimate.x == Animate) {
      v_distance_ratio = segmentIndex / segmentNumber;
  }

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  vec3 curr = getPos(source, target, segmentRatio);
  vec3 next = getPos(source, target, nextSegmentRatio);
  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);
  v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);

  gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  setPickingColor(a_PickingColor);
}
`,cs=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0

uniform float u_opacity;
uniform float u_blur : 0.9;
uniform float u_line_type: 0.0;
varying vec2 v_normal;
varying vec4 v_dash_array;
varying float v_distance_ratio;
varying vec4 v_color;

uniform float u_time;
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];

#pragma include "picking"

void main() {
  gl_FragColor = v_color;
  // float blur = 1.- smoothstep(u_blur, 1., length(v_normal.xy));
  // float blur = smoothstep(1.0, u_blur, length(v_normal.xy));
  gl_FragColor.a *= u_opacity;
  if(u_line_type == LineTypeDash) {
   float flag = 0.;
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      flag = 1.;
    }
    gl_FragColor.a *=flag;
  }

  if(u_aimate.x == Animate) {
      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_aimate.z)* (1.0/ u_aimate.z) + u_time / u_aimate.y);
      alpha = (alpha + u_aimate.w -1.0) / u_aimate.w;
      alpha = smoothstep(0., 1., alpha);
      gl_FragColor.a *= alpha;
  }
  gl_FragColor = filterColor(gl_FragColor);
}
`,gs={solid:0,dash:1},Cs=function(tt){s()(bt,tt);var St=Qs(bt);function bt(){return T()(this,bt),St.apply(this,arguments)}return t()(bt,[{key:"getUninforms",value:function(){var Tt=this.layer.getLayerConfig(),Dt=Tt.opacity,Yt=Tt.lineType,pe=Yt===void 0?"solid":Yt,Be=Tt.dashArray,Qe=Be===void 0?[10,5]:Be;return Qe.length===2&&Qe.push(0,0),{u_opacity:Dt||1,segmentNumber:30,u_line_type:gs[pe]||0,u_dash_array:Qe}}},{key:"getAnimateUniforms",value:function(){var Tt=this.layer.getLayerConfig(),Dt=Tt.animateOption;return{u_aimate:this.animateOption2Array(Dt),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"arc3Dline",vertexShader:ps,fragmentShader:cs,triangulation:pr,blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:U.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:1,update:function(Dt,Yt,pe,Be){var Qe=Dt.size,Bn=Qe===void 0?1:Qe;return Array.isArray(Bn)?[Bn[0]]:[Bn]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:U.AttributeType.Attribute,descriptor:{name:"a_Instance",buffer:{usage:U.gl.STATIC_DRAW,data:[],type:U.gl.FLOAT},size:4,update:function(Dt,Yt,pe,Be){return[pe[3],pe[4],pe[5],pe[6]]}}})}}]),bt}(me);function Pu(tt){var St=ju();return function(){var gt=n()(tt),Tt;if(St){var Dt=n()(this).constructor;Tt=Reflect.construct(gt,arguments,Dt)}else Tt=gt.apply(this,arguments);return r()(this,Tt)}}function ju(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var fo=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0

uniform float u_opacity;
uniform float u_blur : 0.9;
uniform float u_line_type: 0.0;
varying vec2 v_normal;
varying vec4 v_dash_array;
varying float v_distance_ratio;
varying vec4 v_color;

uniform float u_time;
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];

#pragma include "picking"

void main() {
  gl_FragColor = v_color;
  // float blur = 1.- smoothstep(u_blur, 1., length(v_normal.xy));
  // float blur = smoothstep(1.0, u_blur, length(v_normal.xy));
  gl_FragColor.a *= u_opacity;
  if(u_line_type == LineTypeDash) {
   float flag = 0.;
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      flag = 1.;
    }
    gl_FragColor.a *=flag;
  }

  if(u_aimate.x == Animate) {
      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_aimate.z)* (1.0/ u_aimate.z) + u_time / u_aimate.y);
      alpha = (alpha + u_aimate.w -1.0) / u_aimate.w;
      alpha = smoothstep(0., 1., alpha);
      gl_FragColor.a *= alpha;
  }
  gl_FragColor = filterColor(gl_FragColor);
}
`,Ns=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute float a_Size;
uniform mat4 u_ModelMatrix;
uniform float segmentNumber;
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];
varying vec4 v_color;
varying vec2 v_normal;

varying float v_distance_ratio;
uniform float u_line_type: 0.0;
uniform vec4 u_dash_array: [10.0, 5., 0, 0];
varying vec4 v_dash_array;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
    return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
    return smoothstep(0.0, 1.0, index / (segmentNumber - 1.));
}

float paraboloid(vec2 source, vec2 target, float ratio) {
    vec2 x = mix(source, target, ratio);
    vec2 center = mix(source, target, 0.5);
    float dSourceCenter = distance(source, center);
    float dXCenter = distance(x, center);
    return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
     float vertex_height = paraboloid(source, target, segmentRatio);

    return vec3(
    mix(source, target, segmentRatio),
    sqrt(max(0.0, vertex_height))
    );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size)/ 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}
float getAngularDist (vec2 source, vec2 target) {
  vec2 delta = source - target;
  vec2 sin_half_delta = sin(delta / 2.0);
  float a =
    sin_half_delta.y * sin_half_delta.y +
    cos(source.y) * cos(target.y) *
    sin_half_delta.x * sin_half_delta.x;
  return 2.0 * atan(sqrt(a), sqrt(1.0 - a));
}
vec2 interpolate (vec2 source, vec2 target, float angularDist, float t) {
  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  if(abs(angularDist - PI) < 0.001) {
    return (1.0 - t) * source + t * target;
  }
  float a = sin((1.0 - t) * angularDist) / sin(angularDist);
  float b = sin(t * angularDist) / sin(angularDist);
  vec2 sin_source = sin(source);
  vec2 cos_source = cos(source);
  vec2 sin_target = sin(target);
  vec2 cos_target = cos(target);
  float x = a * cos_source.y * cos_source.x + b * cos_target.y * cos_target.x;
  float y = a * cos_source.y * sin_source.x + b * cos_target.y * sin_target.x;
  float z = a * sin_source.y + b * sin_target.y;
  return vec2(atan(y, x), atan(z, sqrt(x * x + y * y)));
}

void main() {
  v_color = a_Color;
  vec2 source = radians(a_Instance.rg);
  vec2 target = radians(a_Instance.ba);
  float angularDist = getAngularDist(source, target);
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));
  if(u_line_type == LineTypeDash) {
    v_distance_ratio = segmentIndex / segmentNumber;
    float total_Distance = pixelDistance(a_Instance.rg, a_Instance.ba);
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);
  }
  if(u_aimate.x == Animate) {
      v_distance_ratio = segmentIndex / segmentNumber;
  }
  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  v_distance_ratio = segmentIndex / segmentNumber;
  vec4 curr = project_position(vec4(degrees(interpolate(source, target, angularDist, segmentRatio)), 0.0, 1.0));
  vec4 next = project_position(vec4(degrees(interpolate(source, target, angularDist, nextSegmentRatio)), 0.0, 1.0));
  v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);
  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));
  //  vec4 project_pos = project_position(vec4(curr.xy, 0, 1.0));
  gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, curr.z, 1.0));
  setPickingColor(a_PickingColor);
}

`,Bu={solid:0,dash:1},ll=function(tt){s()(bt,tt);var St=Pu(bt);function bt(){return T()(this,bt),St.apply(this,arguments)}return t()(bt,[{key:"getUninforms",value:function(){var Tt=this.layer.getLayerConfig(),Dt=Tt.opacity,Yt=Tt.lineType,pe=Yt===void 0?"solid":Yt,Be=Tt.dashArray,Qe=Be===void 0?[10,5]:Be;return Qe.length===2&&Qe.push(0,0),{u_opacity:Dt||1,segmentNumber:30,u_line_type:Bu[pe]||0,u_dash_array:Qe}}},{key:"getAnimateUniforms",value:function(){var Tt=this.layer.getLayerConfig(),Dt=Tt.animateOption;return{u_aimate:this.animateOption2Array(Dt),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"arc2dline",vertexShader:Ns,fragmentShader:fo,triangulation:pr,depth:{enable:!1},blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:U.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:1,update:function(Dt,Yt,pe,Be){var Qe=Dt.size,Bn=Qe===void 0?1:Qe;return Array.isArray(Bn)?[Bn[0]]:[Bn]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:U.AttributeType.Attribute,descriptor:{name:"a_Instance",buffer:{usage:U.gl.STATIC_DRAW,data:[],type:U.gl.FLOAT},size:4,update:function(Dt,Yt,pe,Be){return[pe[3],pe[4],pe[5],pe[6]]}}})}}]),bt}(me);function cl(tt){var St=Xu();return function(){var gt=n()(tt),Tt;if(St){var Dt=n()(this).constructor;Tt=Reflect.construct(gt,arguments,Dt)}else Tt=gt.apply(this,arguments);return r()(this,Tt)}}function Xu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var Io=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
uniform float u_blur : 0.99;
uniform float u_line_type: 0.0;
uniform float u_opacity : 1.0;
varying vec4 v_color;
varying vec2 v_normal;


// dash
uniform float u_dash_offset : 0.0;
uniform float u_dash_ratio : 0.1;
varying float v_distance_ratio;
varying vec4 v_dash_array;
varying float v_side;


#pragma include "picking"

uniform float u_time;
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];
// [animate, duration, interval, trailLength],
void main() {
  gl_FragColor = v_color;
  // anti-alias
  // float blur = 1.0 - smoothstep(u_blur, 1., length(v_normal.xy));
  gl_FragColor.a *= u_opacity;
  if(u_aimate.x == Animate) {
      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_aimate.z)* (1.0/ u_aimate.z) + u_time / u_aimate.y);
      alpha = (alpha + u_aimate.w -1.0) / u_aimate.w;
      alpha = smoothstep(0., 1., alpha);
      gl_FragColor.a *= alpha;
  }
 // dash line
  if(u_line_type == LineTypeDash) {
    float flag = 0.;
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      flag = 1.;
    }
    gl_FragColor.a *=flag;
    // gl_FragColor.a *=(1.0- step(v_dash_array.x, mod(v_distance_ratio, dashLength)));
  }

  gl_FragColor = filterColor(gl_FragColor);
}
`,Ra=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0

attribute float a_Miter;
attribute vec4 a_Color;
attribute vec2 a_Size;
attribute vec3 a_Normal;
attribute vec3 a_Position;

// dash line
attribute float a_Total_Distance;
attribute float a_Distance;

uniform mat4 u_ModelMatrix;
uniform float u_line_type: 0.0;
uniform vec4 u_dash_array: [10.0, 5.\uFF0C0, 0];
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];

#pragma include "projection"
#pragma include "picking"

varying vec4 v_color;
varying vec4 v_dash_array;
varying vec2 v_normal;
varying float v_distance_ratio;
varying float v_side;


void main() {

  if(u_line_type == LineTypeDash) {
    v_distance_ratio = a_Distance / a_Total_Distance;
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / a_Total_Distance;
  }
  if(u_aimate.x == Animate) {
      v_distance_ratio = a_Distance / a_Total_Distance;
  }
  v_normal = vec2(reverse_offset_normal(a_Normal) * sign(a_Miter));
  v_color = a_Color;
  vec3 size = a_Miter * setPickingSize(a_Size.x) * reverse_offset_normal(a_Normal);
  vec2 offset = project_pixel(size.xy);
  v_side = a_Miter * a_Size.x;
  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));

  setPickingColor(a_PickingColor);
}
`,Ea={solid:0,dash:1},Ro=function(tt){s()(bt,tt);var St=cl(bt);function bt(){return T()(this,bt),St.apply(this,arguments)}return t()(bt,[{key:"getUninforms",value:function(){var Tt=this.layer.getLayerConfig(),Dt=Tt.opacity,Yt=Tt.lineType,pe=Yt===void 0?"solid":Yt,Be=Tt.dashArray,Qe=Be===void 0?[10,5,0,0]:Be;return Qe.length===2&&Qe.push(0,0),{u_opacity:Dt||1,u_line_type:Ea[pe],u_dash_array:Qe}}},{key:"getAnimateUniforms",value:function(){var Tt=this.layer.getLayerConfig(),Dt=Tt.animateOption;return{u_aimate:this.animateOption2Array(Dt),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"line",vertexShader:Ra,fragmentShader:Io,triangulation:Ln,primitive:U.gl.TRIANGLES,blend:this.getBlend(),depth:{enable:!1}})]}},{key:"registerBuiltinAttributes",value:function(){var Tt=this.layer.getLayerConfig(),Dt=Tt.lineType,Yt=Dt===void 0?"solid":Dt;this.styleAttributeService.registerStyleAttribute({name:"distance",type:U.AttributeType.Attribute,descriptor:{name:"a_Distance",buffer:{usage:U.gl.STATIC_DRAW,data:[],type:U.gl.FLOAT},size:1,update:function(Be,Qe,Bn,fr){return[Bn[3]]}}}),this.styleAttributeService.registerStyleAttribute({name:"total_distance",type:U.AttributeType.Attribute,descriptor:{name:"a_Total_Distance",buffer:{usage:U.gl.STATIC_DRAW,data:[],type:U.gl.FLOAT},size:1,update:function(Be,Qe,Bn,fr){return[Bn[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:U.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:2,update:function(Be,Qe,Bn,fr){var qr=Be.size,ci=qr===void 0?1:qr;return Array.isArray(ci)?[ci[0],ci[1]]:[ci,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:U.AttributeType.Attribute,descriptor:{name:"a_Normal",buffer:{usage:U.gl.STATIC_DRAW,data:[],type:U.gl.FLOAT},size:3,update:function(Be,Qe,Bn,fr,qr){return qr}}}),this.styleAttributeService.registerStyleAttribute({name:"miter",type:U.AttributeType.Attribute,descriptor:{name:"a_Miter",buffer:{usage:U.gl.STATIC_DRAW,data:[],type:U.gl.FLOAT},size:1,update:function(Be,Qe,Bn,fr){return[Bn[4]]}}})}}]),bt}(me),pu={arc:As,arc3d:Cs,greatcircle:ll,line:Ro},Ml=pu;function Fs(tt){var St=Ss();return function(){var gt=n()(tt),Tt;if(St){var Dt=n()(this).constructor;Tt=Reflect.construct(gt,arguments,Dt)}else Tt=gt.apply(this,arguments);return r()(this,Tt)}}function Ss(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var au=function(tt){s()(bt,tt);var St=Fs(bt);function bt(){var gt;T()(this,bt);for(var Tt=arguments.length,Dt=new Array(Tt),Yt=0;Yt<Tt;Yt++)Dt[Yt]=arguments[Yt];return gt=St.call.apply(St,[this].concat(Dt)),gt.type="LineLayer",gt}return t()(bt,[{key:"buildModels",value:function(){var Tt=this.getModelType();this.layerModel=new Ml[Tt](this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getDefaultConfig",value:function(){var Tt=this.getModelType(),Dt={line:{},arc3d:{blend:"additive"},arc:{blend:"additive"},greatcircle:{blend:"additive"}};return Dt[Tt]}},{key:"getModelType",value:function(){var Tt,Dt=this.styleAttributeService.getLayerStyleAttribute("shape"),Yt=Dt==null||(Tt=Dt.scale)===null||Tt===void 0?void 0:Tt.field;return Yt||"line"}}]),bt}(vt);function qs(tt){var St=Ds();return function(){var gt=n()(tt),Tt;if(St){var Dt=n()(this).constructor;Tt=Reflect.construct(gt,arguments,Dt)}else Tt=gt.apply(this,arguments);return r()(this,Tt)}}function Ds(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var Ju=`varying vec4 v_color;
uniform float u_opacity: 1.0;

#pragma include "picking"

void main() {
  gl_FragColor = v_color;
  gl_FragColor.a *= u_opacity;

  gl_FragColor = filterColor(gl_FragColor);
}
`,ou=`precision highp float;

#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

attribute vec3 a_Position;
attribute vec3 a_Pos;
attribute vec4 a_Color;
attribute vec3 a_Size;
attribute vec3 a_Normal;

uniform mat4 u_ModelMatrix;
uniform vec2 u_offsets;
varying vec4 v_color;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  vec3 size = a_Size * a_Position;

  vec2 offset = project_pixel(size.xy);

  vec4 project_pos = project_position(vec4(a_Pos.xy, 0., 1.0));

  vec4 pos = vec4(project_pos.xy + offset, project_pixel(size.z), 1.0);

  float lightWeight = calc_lighting(pos);
  v_color =vec4(a_Color.rgb * lightWeight, a_Color.w);

  gl_Position = project_common_position_to_clipspace(pos);
  setPickingColor(a_PickingColor);
}
`,Wa=function(tt){s()(bt,tt);var St=qs(bt);function bt(){return T()(this,bt),St.apply(this,arguments)}return t()(bt,[{key:"getUninforms",value:function(){var Tt=this.layer.getLayerConfig(),Dt=Tt.opacity,Yt=Tt.offsets;return{u_opacity:Dt||1,u_offsets:Yt||[0,0]}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"pointExtrude2",vertexShader:ou,fragmentShader:Ju,triangulation:jn,blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:U.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:3,update:function(Dt,Yt,pe,Be){var Qe=Dt.size;if(Qe){var Bn=[];return Array.isArray(Qe)&&(Bn=Qe.length===2?[Qe[0],Qe[0],Qe[1]]:Qe),Array.isArray(Qe)||(Bn=[Qe]),Bn}else return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:U.AttributeType.Attribute,descriptor:{name:"a_Normal",buffer:{usage:U.gl.STATIC_DRAW,data:[],type:U.gl.FLOAT},size:3,update:function(Dt,Yt,pe,Be,Qe){return Qe}}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:U.AttributeType.Attribute,descriptor:{name:"a_Pos",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:3,update:function(Dt,Yt){var pe=ue(Dt.coordinates);return[pe[0],pe[1],0]}}})}}]),bt}(me);function Pl(tt){var St=$l();return function(){var gt=n()(tt),Tt;if(St){var Dt=n()(this).constructor;Tt=Reflect.construct(gt,arguments,Dt)}else Tt=gt.apply(this,arguments);return r()(this,Tt)}}function $l(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var Tl=`#define Animate 0.0

uniform float u_blur : 0;
uniform float u_opacity : 1;
uniform float u_stroke_width : 1;
uniform vec4 u_stroke_color : [0, 0, 0, 0];
uniform float u_stroke_opacity : 1;

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;
uniform float u_time;
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];

#pragma include "sdf_2d"
#pragma include "picking"

void main() {
  int shape = int(floor(v_data.w + 0.5));

  lowp float antialiasblur = v_data.z;
  float antialiased_blur = -max(u_blur, antialiasblur);
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  } else if (shape == 1) {
    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  } else if (shape == 2) {
    outer_df = sdBox(v_data.xy, vec2(1.));
    inner_df = sdBox(v_data.xy, vec2(r));
  } else if (shape == 3) {
    outer_df = sdPentagon(v_data.xy, 0.8);
    inner_df = sdPentagon(v_data.xy, r * 0.8);
  } else if (shape == 4) {
    outer_df = sdHexagon(v_data.xy, 0.8);
    inner_df = sdHexagon(v_data.xy, r * 0.8);
  } else if (shape == 5) {
    outer_df = sdOctogon(v_data.xy, 1.0);
    inner_df = sdOctogon(v_data.xy, r);
  } else if (shape == 6) {
    outer_df = sdHexagram(v_data.xy, 0.52);
    inner_df = sdHexagram(v_data.xy, r * 0.52);
  } else if (shape == 7) {
    outer_df = sdRhombus(v_data.xy, vec2(1.0));
    inner_df = sdRhombus(v_data.xy, vec2(r));
  } else if (shape == 8) {
    outer_df = sdVesica(v_data.xy, 1.1, 0.8);
    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  }

  float opacity_t = smoothstep(0.0, antialiased_blur, outer_df);
  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiased_blur,
    0.0,
    inner_df
  );
  vec4 strokeColor = u_stroke_color == vec4(0) ? v_color : u_stroke_color;
  float PI = 3.14159;
  float N_RINGS = 3.0;
  float FREQ = 1.0;

  // gl_FragColor = v_color * color_t;
  // gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);
  gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);
  gl_FragColor.a = gl_FragColor.a * opacity_t;
  if(u_aimate.x == Animate) {
    float d = length(v_data.xy);
    float intensity = clamp(cos(d * PI), 0.0, 1.0) * clamp(cos(2.0 * PI * (d * 2.0 * u_aimate.z - u_aimate.y * u_time)), 0.0, 1.0);
    gl_FragColor = vec4(gl_FragColor.xyz, intensity);
  }

  gl_FragColor = filterColor(gl_FragColor);
}
`,Ql=`attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec2 a_Extrude;
attribute float a_Size;
attribute float a_Shape;
uniform mat4 u_ModelMatrix;

uniform float u_stroke_width : 2;
uniform vec2 u_offsets;

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;

#pragma include "projection"
#pragma include "picking"

void main() {
  // unpack color(vec2)
  v_color = a_Color;
  vec2 extrude = a_Extrude;

  float shape_type = a_Shape;

  float newSize = setPickingSize(a_Size);

  // radius(16-bit)
  v_radius = newSize;

  vec2 offset = project_pixel(extrude * (newSize + u_stroke_width) + u_offsets);
  vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0));

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));

  // TODO: billboard
  // anti-alias
  float antialiasblur = 1.0 / u_DevicePixelRatio / (newSize + u_stroke_width);

  // construct point coords
  v_data = vec4(extrude, antialiasblur,shape_type);

  setPickingColor(a_PickingColor);
}
`,Nu=function(tt){s()(bt,tt);var St=Pl(bt);function bt(){return T()(this,bt),St.apply(this,arguments)}return t()(bt,[{key:"getUninforms",value:function(){var Tt=this.layer.getLayerConfig(),Dt=Tt.opacity,Yt=Dt===void 0?1:Dt,pe=Tt.stroke,Be=pe===void 0?"rgb(0,0,0,0)":pe,Qe=Tt.strokeWidth,Bn=Qe===void 0?1:Qe,fr=Tt.strokeOpacity,qr=fr===void 0?1:fr,ci=Tt.offsets,Gi=ci===void 0?[0,0]:ci;return{u_opacity:Yt,u_stroke_width:Bn,u_stroke_color:Object(O.s)(Be),u_stroke_opacity:qr,u_offsets:[-Gi[0],Gi[1]]}}},{key:"getAnimateUniforms",value:function(){var Tt=this.layer.getLayerConfig(),Dt=Tt.animateOption;return{u_aimate:this.animateOption2Array(Dt),u_time:this.layer.getLayerAnimateTime()}}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),mn)}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"pointfill",vertexShader:Ql,fragmentShader:Tl,triangulation:mn,depth:{enable:!1},blend:this.getBlend()})]}},{key:"animateOption2Array",value:function(Tt){return[Tt.enable?0:1,Tt.speed||1,Tt.rings||3,0]}},{key:"registerBuiltinAttributes",value:function(){var Tt=this;this.styleAttributeService.registerStyleAttribute({name:"extrude",type:U.AttributeType.Attribute,descriptor:{name:"a_Extrude",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:2,update:function(Yt,pe,Be,Qe){var Bn=[1,1,-1,1,-1,-1,1,-1],fr=Qe%4*2;return[Bn[fr],Bn[fr+1]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:U.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:1,update:function(Yt,pe,Be,Qe){var Bn=Yt.size,fr=Bn===void 0?5:Bn;return Array.isArray(fr)?[fr[0]]:[fr]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:U.AttributeType.Attribute,descriptor:{name:"a_Shape",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:1,update:function(Yt,pe,Be,Qe){var Bn=Yt.shape,fr=Bn===void 0?2:Bn,qr=Tt.layer.getLayerConfig().shape2d,ci=qr.indexOf(fr);return[ci]}}})}}]),bt}(me);function Ha(tt){var St=su();return function(){var gt=n()(tt),Tt;if(St){var Dt=n()(this).constructor;Tt=Reflect.construct(gt,arguments,Dt)}else Tt=gt.apply(this,arguments);return r()(this,Tt)}}function su(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var Al=`
uniform sampler2D u_texture;
varying vec4 v_color;
varying vec2 v_uv;
uniform vec2 u_textSize;
uniform float u_stroke_width : 1;
uniform vec4 u_stroke_color : [1, 1, 1, 1];
uniform float u_stroke_opacity : 1;
uniform float u_opacity : 1;

varying float v_size;
#pragma include "picking"
void main(){
vec2 pos= v_uv / u_textSize + gl_PointCoord / u_textSize * 64.;
vec4 textureColor=texture2D(u_texture,pos);
if(all(lessThan(v_color, vec4(1.0+0.00001))) && all(greaterThan(v_color, vec4(1.0-0.00001))) || v_color==vec4(1.0)){
      gl_FragColor= textureColor;
}else {
      gl_FragColor= step(0.01, textureColor.z) * v_color;
}
gl_FragColor.a =gl_FragColor.a * u_opacity;
gl_FragColor = filterColor(gl_FragColor);
}
`,ms=`precision highp float;
attribute vec3 a_Position;
attribute vec4 a_Color;
attribute vec2 a_Uv;
attribute float a_Size;
varying vec4 v_color;
varying vec2 v_uv;
uniform mat4 u_ModelMatrix;
uniform float u_stroke_width : 1;
uniform vec2 u_offsets;
varying float v_size;

#pragma include "projection"
#pragma include "picking"

void main() {
   v_color = a_Color;
   v_uv = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   v_size = a_Size;
   vec2 offset = project_pixel(u_offsets);
   gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy + offset),project_pos.z, 1.0));
   gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;

  setPickingColor(a_PickingColor);

}
`,Tu=function(tt){s()(bt,tt);var St=Ha(bt);function bt(){var gt;T()(this,bt);for(var Tt=arguments.length,Dt=new Array(Tt),Yt=0;Yt<Tt;Yt++)Dt[Yt]=arguments[Yt];return gt=St.call.apply(St,[this].concat(Dt)),gt.texture=void 0,gt}return t()(bt,[{key:"getUninforms",value:function(){var Tt=this.layer.getLayerConfig(),Dt=Tt.opacity;return{u_opacity:Dt||1,u_texture:this.texture,u_textSize:[1024,this.iconService.canvasHeight||128]}}},{key:"initModels",value:function(){var Tt=this;return this.initIconFontGlyphs(),this.registerBuiltinAttributes(),this.updateTexture(),this.iconService.on("imageUpdate",function(){Tt.updateTexture(),Tt.layer.render()}),[this.layer.buildLayerModel({moduleName:"pointiconImage",vertexShader:ms,fragmentShader:Al,triangulation:bn,primitive:U.gl.POINTS,depth:{enable:!1},blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){var Tt=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:U.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:1,update:function(Yt,pe,Be,Qe){var Bn=Yt.size;return Array.isArray(Bn)?[Bn[0]]:[Bn]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:U.AttributeType.Attribute,descriptor:{name:"a_Uv",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:2,update:function(Yt,pe,Be,Qe){var Bn=Tt.fontService.mapping,fr=Yt.shape,qr=Tt.fontService.getGlyph(fr),ci=Bn[qr],Gi=ci.x,zi=ci.y;return[Gi,zi]}}})}},{key:"updateTexture",value:function(){var Tt=this.rendererService.createTexture2D,Dt=this.fontService.canvas;this.texture=Tt({data:Dt,mag:U.gl.LINEAR,min:U.gl.LINEAR,width:Dt.width,height:Dt.height})}},{key:"initIconFontGlyphs",value:function(){var Tt=this,Dt=this.layer.getLayerConfig(),Yt=Dt.fontWeight,pe=Yt===void 0?"normal":Yt,Be=Dt.fontFamily,Qe=Be===void 0?"sans-serif":Be,Bn=this.layer.getEncodedData(),fr=[];Bn.forEach(function(qr){var ci=qr.shape,Gi=ci===void 0?"":ci;Gi=Gi.toString();var zi=Tt.fontService.getGlyph(Gi);fr.indexOf(zi)===-1&&fr.push(zi)}),this.fontService.setFontOptions({characterSet:fr,fontWeight:pe,fontFamily:Qe,fontSize:48})}}]),bt}(me);function gu(tt){var St=Fu();return function(){var gt=n()(tt),Tt;if(St){var Dt=n()(this).constructor;Tt=Reflect.construct(gt,arguments,Dt)}else Tt=gt.apply(this,arguments);return r()(this,Tt)}}function Fu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var Hs=`
uniform sampler2D u_texture;
varying vec4 v_color;
varying vec2 v_uv;
uniform vec2 u_textSize;
uniform float u_stroke_width : 1;
uniform vec4 u_stroke_color : [1, 1, 1, 1];
uniform float u_stroke_opacity : 1;
uniform float u_opacity : 1;

varying float v_size;
#pragma include "picking"
void main(){
vec2 pos= v_uv / u_textSize + gl_PointCoord / u_textSize * 64.;
vec4 textureColor=texture2D(u_texture,pos);
if(all(lessThan(v_color, vec4(1.0+0.00001))) && all(greaterThan(v_color, vec4(1.0-0.00001))) || v_color==vec4(1.0)){
      gl_FragColor= textureColor;
}else {
      gl_FragColor= step(0.01, textureColor.z) * v_color;
}
gl_FragColor.a =gl_FragColor.a * u_opacity;
gl_FragColor = filterColor(gl_FragColor);
}
`,$o=`precision highp float;
attribute vec3 a_Position;
attribute vec4 a_Color;
attribute vec2 a_Uv;
attribute float a_Size;
varying vec4 v_color;
varying vec2 v_uv;
uniform mat4 u_ModelMatrix;
uniform float u_stroke_width : 1;
uniform vec2 u_offsets;
varying float v_size;

#pragma include "projection"
#pragma include "picking"

void main() {
   v_color = a_Color;
   v_uv = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   v_size = a_Size;
   vec2 offset = project_pixel(u_offsets);
   gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy + offset),project_pos.z, 1.0));
   gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;

  setPickingColor(a_PickingColor);

}
`,fs=function(tt){s()(bt,tt);var St=gu(bt);function bt(){var gt;T()(this,bt);for(var Tt=arguments.length,Dt=new Array(Tt),Yt=0;Yt<Tt;Yt++)Dt[Yt]=arguments[Yt];return gt=St.call.apply(St,[this].concat(Dt)),gt.texture=void 0,gt.updateTexture=function(){var pe=gt.rendererService.createTexture2D;if(gt.texture){gt.texture.update({data:gt.iconService.getCanvas()}),gt.layer.render();return}gt.texture=pe({data:gt.iconService.getCanvas(),mag:U.gl.NEAREST,min:U.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:gt.iconService.canvasHeight||128})},gt}return t()(bt,[{key:"getUninforms",value:function(){var Tt=this.layer.getLayerConfig(),Dt=Tt.opacity,Yt=Tt.offsets,pe=Yt===void 0?[0,0]:Yt;return this.rendererService.getDirty()&&this.texture.bind(),{u_opacity:Dt||1,u_texture:this.texture,u_textSize:[1024,this.iconService.canvasHeight||128],u_offsets:[-pe[0],pe[1]]}}},{key:"initModels",value:function(){return this.registerBuiltinAttributes(),this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),this.buildModels()}},{key:"clearModels",value:function(){this.texture&&this.texture.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"pointImage",vertexShader:$o,fragmentShader:Hs,triangulation:bn,primitive:U.gl.POINTS,depth:{enable:!1},blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){var Tt=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:U.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:1,update:function(Yt,pe,Be,Qe){var Bn=Yt.size,fr=Bn===void 0?5:Bn;return Array.isArray(fr)?[fr[0]]:[fr]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:U.AttributeType.Attribute,descriptor:{name:"a_Uv",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:2,update:function(Yt,pe,Be,Qe){var Bn=Tt.iconService.getIconMap(),fr=Yt.shape,qr=Bn[fr]||{x:0,y:0},ci=qr.x,Gi=qr.y;return[ci,Gi]}}})}}]),bt}(me);function fl(tt){var St=zl();return function(){var gt=n()(tt),Tt;if(St){var Dt=n()(this).constructor;Tt=Reflect.construct(gt,arguments,Dt)}else Tt=gt.apply(this,arguments);return r()(this,Tt)}}function zl(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var ql=`
uniform float u_opacity : 1;
uniform vec2 u_offsets;
varying vec4 v_color;

#pragma include "picking"
void main() {
  gl_FragColor = v_color;
  gl_FragColor.a =gl_FragColor.a * u_opacity;

  gl_FragColor = filterColor(gl_FragColor);
}
`,zu=`
attribute vec3 a_Position;
uniform mat4 u_ModelMatrix;
attribute float a_Size;
attribute vec4 a_Color;
varying vec4 v_color;

uniform vec2 u_offsets;

#pragma include "projection"
#pragma include "picking"
void main() {
  v_color = a_Color;
  vec2 offset = project_pixel(u_offsets);
  vec4 project_pos = project_position(vec4(a_Position, 1.0)) + vec4(a_Size / 2.,-a_Size /2.,0.,0.);
  gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy+offset),project_pos.z,project_pos.w));
  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
    setPickingColor(a_PickingColor);
}
`;function $u(tt){var St=tt.coordinates;return{vertices:Xe()(St),indices:[0],size:St.length}}var Au=function(tt){s()(bt,tt);var St=fl(bt);function bt(){return T()(this,bt),St.apply(this,arguments)}return t()(bt,[{key:"getDefaultStyle",value:function(){return{blend:"additive"}}},{key:"getUninforms",value:function(){var Tt=this.layer.getLayerConfig(),Dt=Tt.opacity,Yt=Dt===void 0?1:Dt,pe=Tt.stroke,Be=pe===void 0?"rgb(0,0,0,0)":pe,Qe=Tt.strokeWidth,Bn=Qe===void 0?1:Qe,fr=Tt.offsets,qr=fr===void 0?[0,0]:fr;return{u_opacity:Yt,u_stroke_width:Bn,u_stroke_color:Object(O.s)(Be),u_offsets:[-qr[0],qr[1]]}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"normalpoint",vertexShader:zu,fragmentShader:ql,triangulation:$u,depth:{enable:!1},primitive:U.gl.POINTS,blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:U.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:1,update:function(Dt,Yt,pe,Be){var Qe=Dt.size,Bn=Qe===void 0?1:Qe;return Array.isArray(Bn)?[Bn[0]]:[Bn]}}})}},{key:"defaultStyleOptions",value:function(){return{blend:U.BlendType.additive}}}]),bt}(me);function Cu(tt,St){var bt;if(typeof Symbol=="undefined"||tt[Symbol.iterator]==null){if(Array.isArray(tt)||(bt=mu(tt))||St&&tt&&typeof tt.length=="number"){bt&&(tt=bt);var gt=0,Tt=function(){};return{s:Tt,n:function(){return gt>=tt.length?{done:!0}:{done:!1,value:tt[gt++]}},e:function(Qe){throw Qe},f:Tt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Dt=!0,Yt=!1,pe;return{s:function(){bt=tt[Symbol.iterator]()},n:function(){var Qe=bt.next();return Dt=Qe.done,Qe},e:function(Qe){Yt=!0,pe=Qe},f:function(){try{!Dt&&bt.return!=null&&bt.return()}finally{if(Yt)throw pe}}}}function mu(tt,St){if(!!tt){if(typeof tt=="string")return Uu(tt,St);var bt=Object.prototype.toString.call(tt).slice(8,-1);if(bt==="Object"&&tt.constructor&&(bt=tt.constructor.name),bt==="Map"||bt==="Set")return Array.from(tt);if(bt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(bt))return Uu(tt,St)}}function Uu(tt,St){(St==null||St>tt.length)&&(St=tt.length);for(var bt=0,gt=new Array(St);bt<St;bt++)gt[bt]=tt[bt];return gt}var zs=function(){function tt(St,bt,gt){T()(this,tt),this.boxCells=[],this.xCellCount=void 0,this.yCellCount=void 0,this.boxKeys=void 0,this.bboxes=void 0,this.width=void 0,this.height=void 0,this.xScale=void 0,this.yScale=void 0,this.boxUid=void 0;var Tt=this.boxCells;this.xCellCount=Math.ceil(St/gt),this.yCellCount=Math.ceil(bt/gt);for(var Dt=0;Dt<this.xCellCount*this.yCellCount;Dt++)Tt.push([]);this.boxKeys=[],this.bboxes=[],this.width=St,this.height=bt,this.xScale=this.xCellCount/St,this.yScale=this.yCellCount/bt,this.boxUid=0}return t()(tt,[{key:"insert",value:function(bt,gt,Tt,Dt,Yt){this.forEachCell(gt,Tt,Dt,Yt,this.insertBoxCell,this.boxUid++),this.boxKeys.push(bt),this.bboxes.push(gt),this.bboxes.push(Tt),this.bboxes.push(Dt),this.bboxes.push(Yt)}},{key:"query",value:function(bt,gt,Tt,Dt,Yt){return this.queryHitTest(bt,gt,Tt,Dt,!1,Yt)}},{key:"hitTest",value:function(bt,gt,Tt,Dt,Yt){return this.queryHitTest(bt,gt,Tt,Dt,!0,Yt)}},{key:"insertBoxCell",value:function(bt,gt,Tt,Dt,Yt,pe){this.boxCells[Yt].push(pe)}},{key:"queryHitTest",value:function(bt,gt,Tt,Dt,Yt,pe){if(Tt<0||bt>this.width||Dt<0||gt>this.height)return Yt?!1:[];var Be=[];if(bt<=0&&gt<=0&&this.width<=Tt&&this.height<=Dt){if(Yt)return!0;for(var Qe=0;Qe<this.boxKeys.length;Qe++)Be.push({key:this.boxKeys[Qe],x1:this.bboxes[Qe*4],y1:this.bboxes[Qe*4+1],x2:this.bboxes[Qe*4+2],y2:this.bboxes[Qe*4+3]});return pe?Be.filter(pe):Be}var Bn={hitTest:Yt,seenUids:{box:{},circle:{}}};return this.forEachCell(bt,gt,Tt,Dt,this.queryCell,Be,Bn,pe),Yt?Be.length>0:Be}},{key:"queryCell",value:function(bt,gt,Tt,Dt,Yt,pe,Be,Qe){var Bn=Be.seenUids,fr=this.boxCells[Yt];if(fr!==null){var qr=this.bboxes,ci=Cu(fr),Gi;try{for(ci.s();!(Gi=ci.n()).done;){var zi=Gi.value;if(!Bn.box[zi]){Bn.box[zi]=!0;var aa=zi*4;if(bt<=qr[aa+2]&&gt<=qr[aa+3]&&Tt>=qr[aa+0]&&Dt>=qr[aa+1]&&(!Qe||Qe(this.boxKeys[zi]))){if(Be.hitTest)return pe.push(!0),!0;pe.push({key:this.boxKeys[zi],x1:qr[aa],y1:qr[aa+1],x2:qr[aa+2],y2:qr[aa+3]})}}}}catch(no){ci.e(no)}finally{ci.f()}}return!1}},{key:"forEachCell",value:function(bt,gt,Tt,Dt,Yt,pe,Be,Qe){for(var Bn=this.convertToXCellCoord(bt),fr=this.convertToYCellCoord(gt),qr=this.convertToXCellCoord(Tt),ci=this.convertToYCellCoord(Dt),Gi=Bn;Gi<=qr;Gi++)for(var zi=fr;zi<=ci;zi++){var aa=this.xCellCount*zi+Gi;if(Yt.call(this,bt,gt,Tt,Dt,aa,pe,Be,Qe))return}}},{key:"convertToXCellCoord",value:function(bt){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(bt*this.xScale)))}},{key:"convertToYCellCoord",value:function(bt){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(bt*this.yScale)))}}]),tt}(),Ul=zs,gc=function(){function tt(St,bt){T()(this,tt),this.width=void 0,this.height=void 0,this.grid=void 0,this.viewportPadding=100,this.screenRightBoundary=void 0,this.screenBottomBoundary=void 0,this.gridRightBoundary=void 0,this.gridBottomBoundary=void 0,this.width=St,this.height=bt,this.viewportPadding=Math.max(St,bt),this.grid=new Ul(St+this.viewportPadding,bt+this.viewportPadding,25),this.screenRightBoundary=St+this.viewportPadding,this.screenBottomBoundary=bt+this.viewportPadding,this.gridRightBoundary=St+2*this.viewportPadding,this.gridBottomBoundary=bt+2*this.viewportPadding}return t()(tt,[{key:"placeCollisionBox",value:function(bt){var gt=bt.x1+bt.anchorPointX+this.viewportPadding,Tt=bt.y1+bt.anchorPointY+this.viewportPadding,Dt=bt.x2+bt.anchorPointX+this.viewportPadding,Yt=bt.y2+bt.anchorPointY+this.viewportPadding;return!this.isInsideGrid(gt,Tt,Dt,Yt)||this.grid.hitTest(gt,Tt,Dt,Yt)?{box:[]}:{box:[gt,Tt,Dt,Yt]}}},{key:"insertCollisionBox",value:function(bt,gt){var Tt={featureIndex:gt};this.grid.insert(Tt,bt[0],bt[1],bt[2],bt[3])}},{key:"project",value:function(bt,gt,Tt){var Dt=Hn.e.fromValues(gt,Tt,0,1),Yt=Hn.e.create(),pe=Hn.b.fromValues.apply(Hn.b,Xe()(bt));return Hn.e.transformMat4(Yt,Dt,pe),{x:(Yt[0]/Yt[3]+1)/2*this.width+this.viewportPadding,y:(-Yt[1]/Yt[3]+1)/2*this.height+this.viewportPadding}}},{key:"isInsideGrid",value:function(bt,gt,Tt,Dt){return Tt>=0&&bt<this.gridRightBoundary&&Dt>=0&&gt<this.gridBottomBoundary}}]),tt}();function Cl(tt,St){var bt;if(typeof Symbol=="undefined"||tt[Symbol.iterator]==null){if(Array.isArray(tt)||(bt=kl(tt))||St&&tt&&typeof tt.length=="number"){bt&&(tt=bt);var gt=0,Tt=function(){};return{s:Tt,n:function(){return gt>=tt.length?{done:!0}:{done:!1,value:tt[gt++]}},e:function(Qe){throw Qe},f:Tt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Dt=!0,Yt=!1,pe;return{s:function(){bt=tt[Symbol.iterator]()},n:function(){var Qe=bt.next();return Dt=Qe.done,Qe},e:function(Qe){Yt=!0,pe=Qe},f:function(){try{!Dt&&bt.return!=null&&bt.return()}finally{if(Yt)throw pe}}}}function kl(tt,St){if(!!tt){if(typeof tt=="string")return Gl(tt,St);var bt=Object.prototype.toString.call(tt).slice(8,-1);if(bt==="Object"&&tt.constructor&&(bt=tt.constructor.name),bt==="Map"||bt==="Set")return Array.from(tt);if(bt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(bt))return Gl(tt,St)}}function Gl(tt,St){(St==null||St>tt.length)&&(St=tt.length);for(var bt=0,gt=new Array(St);bt<St;bt++)gt[bt]=tt[bt];return gt}function cc(tt){var St=.5,bt=.5;switch(tt){case"right":case"top-right":case"bottom-right":St=1;break;case"left":case"top-left":case"bottom-left":St=0;break;default:St=.5}switch(tt){case"bottom":case"bottom-right":case"bottom-left":bt=1;break;case"top":case"top-right":case"top-left":bt=0;break;default:bt=.5}return{horizontalAlign:St,verticalAlign:bt}}function Qu(tt,St,bt,gt,Tt){if(!!Tt){var Dt=tt[gt],Yt=Dt.glyph;if(Yt)for(var pe=St[Yt].advance*Dt.scale,Be=(tt[gt].x+pe)*Tt,Qe=bt;Qe<=gt;Qe++)tt[Qe].x-=Be}}function Ol(tt,St,bt,gt,Tt,Dt,Yt){var pe=(St-bt)*Tt,Be=(-gt*Yt+.5)*Dt,Qe=Cl(tt),Bn;try{for(Qe.s();!(Bn=Qe.n()).done;){var fr=Bn.value;fr.x+=pe,fr.y+=Be}}catch(qr){Qe.e(qr)}finally{Qe.f()}}function Vl(tt,St,bt,gt,Tt,Dt,Yt){var pe=-8,Be=0,Qe=pe,Bn=0,fr=tt.positionedGlyphs,qr=Dt==="right"?1:Dt==="left"?0:.5,ci=fr.length;bt.forEach(function(uo){if(uo.split("").forEach(function(rs){var is=St[rs],du=0;is&&(fr.push({glyph:rs,x:Be,y:Qe+du,vertical:!1,scale:1,metrics:is}),Be+=is.advance+Yt)}),fr.length!==ci){var Ws=Be-Yt;Bn=Math.max(Ws,Bn),Qu(fr,St,ci,fr.length-1,qr)}Be=0,Qe+=gt});var Gi=cc(Tt),zi=Gi.horizontalAlign,aa=Gi.verticalAlign;Ol(fr,qr,zi,aa,Bn,gt,bt.length);var no=Qe-pe;tt.top+=-aa*no,tt.bottom=tt.top+no,tt.left+=-zi*Bn,tt.right=tt.left+Bn}function tu(tt,St,bt,gt,Tt,Dt){var Yt=arguments.length>6&&arguments[6]!==void 0?arguments[6]:[0,0],pe=tt.split(`
`),Be=[],Qe={positionedGlyphs:Be,top:Yt[1],bottom:Yt[1],left:Yt[0],right:Yt[0],lineCount:pe.length,text:tt};return Vl(Qe,St,pe,bt,gt,Tt,Dt),Be.length?Qe:!1}function go(tt){var St=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0],bt=arguments.length>2?arguments[2]:void 0,gt=tt.positionedGlyphs,Tt=gt===void 0?[]:gt,Dt=[],Yt=Cl(Tt),pe;try{for(Yt.s();!(pe=Yt.n()).done;){var Be=pe.value,Qe=Be.metrics,Bn=4,fr=Qe.advance*Be.scale/2,qr=bt?[Be.x+fr,Be.y]:[0,0],ci=bt?[0,0]:[Be.x+fr+St[0],Be.y+St[1]],Gi=(0-Bn)*Be.scale-fr+ci[0],zi=(0-Bn)*Be.scale+ci[1],aa=Gi+Qe.width*Be.scale,no=zi+Qe.height*Be.scale,uo={x:Gi,y:zi},Ws={x:aa,y:zi},rs={x:Gi,y:no},is={x:aa,y:no};Dt.push({tl:uo,tr:Ws,bl:rs,br:is,tex:Qe,glyphOffset:qr})}}catch(du){Yt.e(du)}finally{Yt.f()}return Dt}function gl(tt,St){var bt;if(typeof Symbol=="undefined"||tt[Symbol.iterator]==null){if(Array.isArray(tt)||(bt=hl(tt))||St&&tt&&typeof tt.length=="number"){bt&&(tt=bt);var gt=0,Tt=function(){};return{s:Tt,n:function(){return gt>=tt.length?{done:!0}:{done:!1,value:tt[gt++]}},e:function(Qe){throw Qe},f:Tt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Dt=!0,Yt=!1,pe;return{s:function(){bt=tt[Symbol.iterator]()},n:function(){var Qe=bt.next();return Dt=Qe.done,Qe},e:function(Qe){Yt=!0,pe=Qe},f:function(){try{!Dt&&bt.return!=null&&bt.return()}finally{if(Yt)throw pe}}}}function hl(tt,St){if(!!tt){if(typeof tt=="string")return Ys(tt,St);var bt=Object.prototype.toString.call(tt).slice(8,-1);if(bt==="Object"&&tt.constructor&&(bt=tt.constructor.name),bt==="Map"||bt==="Set")return Array.from(tt);if(bt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(bt))return Ys(tt,St)}}function Ys(tt,St){(St==null||St>tt.length)&&(St=tt.length);for(var bt=0,gt=new Array(St);bt<St;bt++)gt[bt]=tt[bt];return gt}function Na(tt){var St=_o();return function(){var gt=n()(tt),Tt;if(St){var Dt=n()(this).constructor;Tt=Reflect.construct(gt,arguments,Dt)}else Tt=gt.apply(this,arguments);return r()(this,Tt)}}function _o(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var Us=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 48.0
uniform sampler2D u_sdf_map;
uniform float u_gamma_scale : 0.5;
// uniform float u_font_size : 24.0;
uniform float u_opacity : 1.0;
uniform float u_stroke_opacity: 1.0;
uniform vec4 u_stroke : [0, 0, 0, 1];
uniform float u_strokeWidth : 2.0;
uniform float u_halo_blur : 0.5;
uniform float u_DevicePixelRatio;

varying vec4 v_color;
varying vec2 v_uv;
varying float v_gamma_scale;
varying float v_fontScale;

#pragma include "picking"
void main() {
  // get sdf from atlas
  float dist = texture2D(u_sdf_map, v_uv).a;

  // float fontScale = u_font_size / FONT_SIZE;

  lowp float buff = (6.0 - u_strokeWidth / v_fontScale) / SDF_PX;
  highp float gamma = (u_halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (v_fontScale * u_gamma_scale) / 1.0;

  highp float gamma_scaled = gamma * v_gamma_scale;

  highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);
  gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), vec4(u_stroke.rgb, u_stroke.a * u_opacity), smoothstep(0., 0.5, 1. - dist));
  gl_FragColor.a= gl_FragColor.a * alpha;
  gl_FragColor = filterColor(gl_FragColor);
}
`,ml=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 24.0
attribute vec3 a_Position;
attribute vec2 a_tex;
attribute vec2 a_textOffsets;
attribute vec4 a_Color;
attribute float a_Size;
attribute float a_Rotate;

uniform vec2 u_sdf_map_size;
uniform mat4 u_ModelMatrix;

varying vec2 v_uv;
varying float v_gamma_scale;
varying vec4 v_color;
varying float v_fontScale;

#pragma include "projection"
#pragma include "picking"

void main() {
  v_color = a_Color;
  v_uv = a_tex / u_sdf_map_size;

  // \u6587\u672C\u7F29\u653E\u6BD4\u4F8B
  float fontScale = a_Size / FONT_SIZE;
   v_fontScale = fontScale;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));

  vec4 projected_position  = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
 highp float angle_sin = sin(a_Rotate);
 highp float angle_cos = cos(a_Rotate);
 mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);
  gl_Position = vec4(projected_position.xy / projected_position.w
    + rotation_matrix * a_textOffsets * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);
  v_gamma_scale = gl_Position.w;
  setPickingColor(a_PickingColor);

}
`;function qu(tt){var St=this,bt=tt.id,gt=[],Tt=[];if(!St.glyphInfoMap||!St.glyphInfoMap[bt])return{vertices:[],indices:[],size:7};var Dt=St.glyphInfoMap[bt].centroid,Yt=Dt.length===2?[Dt[0],Dt[1],0]:Dt;return St.glyphInfoMap[bt].glyphQuads.forEach(function(pe,Be){gt.push.apply(gt,Xe()(Yt).concat([pe.tex.x,pe.tex.y+pe.tex.height,pe.tl.x,pe.tl.y],Xe()(Yt),[pe.tex.x+pe.tex.width,pe.tex.y+pe.tex.height,pe.tr.x,pe.tr.y],Xe()(Yt),[pe.tex.x+pe.tex.width,pe.tex.y,pe.br.x,pe.br.y],Xe()(Yt),[pe.tex.x,pe.tex.y,pe.bl.x,pe.bl.y])),Tt.push(0+Be*4,1+Be*4,2+Be*4,2+Be*4,3+Be*4,0+Be*4)}),{vertices:gt,indices:Tt,size:7}}var ku=function(tt){s()(bt,tt);var St=Na(bt);function bt(){var gt;T()(this,bt);for(var Tt=arguments.length,Dt=new Array(Tt),Yt=0;Yt<Tt;Yt++)Dt[Yt]=arguments[Yt];return gt=St.call.apply(St,[this].concat(Dt)),gt.glyphInfo=void 0,gt.glyphInfoMap={},gt.texture=void 0,gt.currentZoom=-1,gt.extent=void 0,gt.textureHeight=0,gt.textCount=0,gt.preTextStyle={},gt.buildModels=function(){return gt.initGlyph(),gt.updateTexture(),gt.filterGlyphs(),[gt.layer.buildLayerModel({moduleName:"pointText",vertexShader:ml,fragmentShader:Us,triangulation:qu.bind(y()(gt)),depth:{enable:!1},blend:gt.getBlend()})]},gt}return t()(bt,[{key:"getUninforms",value:function(){var Tt=this.layer.getLayerConfig(),Dt=Tt.opacity,Yt=Dt===void 0?1:Dt,pe=Tt.stroke,Be=pe===void 0?"#fff":pe,Qe=Tt.strokeWidth,Bn=Qe===void 0?0:Qe,fr=Tt.strokeOpacity,qr=fr===void 0?1:fr,ci=Tt.textAnchor,Gi=ci===void 0?"center":ci,zi=Tt.textAllowOverlap,aa=zi===void 0?!1:zi,no=Tt.halo,uo=no===void 0?.5:no,Ws=Tt.gamma,rs=Ws===void 0?2:Ws,is=this.fontService,du=is.canvas,lo=is.mapping;return Object.keys(lo).length!==this.textCount&&(this.updateTexture(),this.textCount=Object.keys(lo).length),this.preTextStyle={textAnchor:Gi,textAllowOverlap:aa},{u_opacity:Yt,u_stroke_opacity:qr,u_sdf_map:this.texture,u_stroke:Object(O.s)(Be),u_halo_blur:uo,u_gamma_scale:rs,u_sdf_map_size:[du.width,du.height],u_strokeWidth:Bn}}},{key:"initModels",value:function(){this.layer.on("remapping",this.buildModels),this.extent=this.textExtent();var Tt=this.layer.getLayerConfig(),Dt=Tt.textAnchor,Yt=Dt===void 0?"center":Dt,pe=Tt.textAllowOverlap,Be=pe===void 0?!0:pe;return this.preTextStyle={textAnchor:Yt,textAllowOverlap:Be},this.buildModels()}},{key:"needUpdate",value:function(){var Tt=this.layer.getLayerConfig(),Dt=Tt.textAllowOverlap,Yt=Dt===void 0?!1:Dt,pe=this.mapService.getZoom(),Be=this.mapService.getBounds(),Qe=Object(O.j)(this.extent,Be);return!Yt&&(Math.abs(this.currentZoom-pe)>1||!Qe)||Yt!==this.preTextStyle.textAllowOverlap?(this.reBuildModel(),!0):!1}},{key:"clearModels",value:function(){this.layer.off("remapping",this.buildModels)}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"rotate",type:U.AttributeType.Attribute,descriptor:{name:"a_Rotate",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:1,update:function(Dt,Yt,pe,Be){var Qe=Dt.rotate,Bn=Qe===void 0?0:Qe;return Array.isArray(Bn)?[Bn[0]]:[Bn]}}}),this.styleAttributeService.registerStyleAttribute({name:"textOffsets",type:U.AttributeType.Attribute,descriptor:{name:"a_textOffsets",buffer:{usage:U.gl.STATIC_DRAW,data:[],type:U.gl.FLOAT},size:2,update:function(Dt,Yt,pe,Be){return[pe[5],pe[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:U.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:1,update:function(Dt,Yt,pe,Be){var Qe=Dt.size,Bn=Qe===void 0?12:Qe;return Array.isArray(Bn)?[Bn[0]]:[Bn]}}}),this.styleAttributeService.registerStyleAttribute({name:"textUv",type:U.AttributeType.Attribute,descriptor:{name:"a_tex",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:2,update:function(Dt,Yt,pe,Be){return[pe[3],pe[4]]}}})}},{key:"textExtent",value:function(){var Tt=this.mapService.getBounds();return Object(O.r)(Tt,.5)}},{key:"initTextFont",value:function(){var Tt=this.layer.getLayerConfig(),Dt=Tt.fontWeight,Yt=Dt===void 0?"400":Dt,pe=Tt.fontFamily,Be=pe===void 0?"sans-serif":pe,Qe=this.layer.getEncodedData(),Bn=[];Qe.forEach(function(fr){var qr=fr.shape,ci=qr===void 0?"":qr;ci=ci.toString();var Gi=gl(ci),zi;try{for(Gi.s();!(zi=Gi.n()).done;){var aa=zi.value;Bn.indexOf(aa)===-1&&Bn.push(aa)}}catch(no){Gi.e(no)}finally{Gi.f()}}),this.fontService.setFontOptions({characterSet:Bn,fontWeight:Yt,fontFamily:Be})}},{key:"generateGlyphLayout",value:function(){var Tt=this,Dt=this.fontService.mapping,Yt=this.layer.getLayerConfig(),pe=Yt.spacing,Be=pe===void 0?2:pe,Qe=Yt.textAnchor,Bn=Qe===void 0?"center":Qe,fr=Yt.textOffset,qr=this.layer.getEncodedData();this.glyphInfo=qr.map(function(ci){var Gi=ci.shape,zi=Gi===void 0?"":Gi,aa=ci.coordinates,no=ci.id,uo=ci.size,Ws=uo===void 0?1:uo,rs=tu(zi.toString(),Dt,Ws,Bn,"center",Be,fr),is=go(rs,fr,!1);return ci.shaping=rs,ci.glyphQuads=is,ci.centroid=ue(aa),Tt.glyphInfoMap[no]={shaping:rs,glyphQuads:is,centroid:ue(aa)},ci})}},{key:"filterGlyphs",value:function(){var Tt=this,Dt=this.layer.getLayerConfig(),Yt=Dt.padding,pe=Yt===void 0?[4,4]:Yt,Be=Dt.textAllowOverlap,Qe=Be===void 0?!1:Be;if(!Qe){this.glyphInfoMap={},this.currentZoom=this.mapService.getZoom(),this.extent=this.textExtent();var Bn=this.rendererService.getViewportSize(),fr=Bn.width,qr=Bn.height,ci=new gc(fr,qr),Gi=this.glyphInfo.filter(function(zi){var aa=zi.shaping,no=zi.id,uo=no===void 0?0:no,Ws=zi.centroid,rs=zi.size,is=rs/24,du=Tt.mapService.lngLatToContainer(Ws),lo=ci.placeCollisionBox({x1:aa.left*is-pe[0],x2:aa.right*is+pe[0],y1:aa.top*is-pe[1],y2:aa.bottom*is+pe[1],anchorPointX:du.x,anchorPointY:du.y}),vu=lo.box;return vu&&vu.length?(ci.insertCollisionBox(vu,uo),!0):!1});Gi.forEach(function(zi){Tt.glyphInfoMap[zi.id]=zi})}}},{key:"initGlyph",value:function(){this.initTextFont(),this.generateGlyphLayout()}},{key:"updateTexture",value:function(){var Tt=this.rendererService.createTexture2D,Dt=this.fontService.canvas;this.textureHeight=Dt.height,this.texture&&this.texture.destroy(),this.texture=Tt({data:Dt,mag:U.gl.LINEAR,min:U.gl.LINEAR,width:Dt.width,height:Dt.height})}},{key:"reBuildModel",value:function(){this.filterGlyphs(),this.layer.models=[this.layer.buildLayerModel({moduleName:"pointText",vertexShader:ml,fragmentShader:Us,triangulation:qu.bind(this),depth:{enable:!1},blend:this.getBlend()})]}}]),bt}(me),mc={fill:Nu,image:fs,normal:Au,extrude:Wa,text:ku,icon:Tu},Os=mc;function tl(tt){var St=uu();return function(){var gt=n()(tt),Tt;if(St){var Dt=n()(this).constructor;Tt=Reflect.construct(gt,arguments,Dt)}else Tt=gt.apply(this,arguments);return r()(this,Tt)}}function uu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var Zs=function(tt){s()(bt,tt);var St=tl(bt);function bt(){var gt;T()(this,bt);for(var Tt=arguments.length,Dt=new Array(Tt),Yt=0;Yt<Tt;Yt++)Dt[Yt]=arguments[Yt];return gt=St.call.apply(St,[this].concat(Dt)),gt.type="PointLayer",gt}return t()(bt,[{key:"buildModels",value:function(){var Tt=this.getModelType();this.layerModel=new Os[Tt](this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getDefaultConfig",value:function(){var Tt=this.getModelType(),Dt={normal:{blend:"additive"},fill:{blend:"normal"},extrude:{},image:{},icon:{},text:{blend:"normal"}};return Dt[Tt]}},{key:"getModelType",value:function(){var Tt=this.getEncodedData(),Dt=this.getLayerConfig(),Yt=Dt.shape2d,pe=Dt.shape3d,Be=this.iconService.getIconMap(),Qe=Tt.find(function(fr){return fr.hasOwnProperty("shape")});if(Qe){var Bn=Qe.shape;return Bn==="dot"?"normal":(Yt==null?void 0:Yt.indexOf(Bn))!==-1?"fill":(pe==null?void 0:pe.indexOf(Bn))!==-1?"extrude":Be.hasOwnProperty(Bn)?"image":this.fontService.getGlyph(Bn)!==""?"icon":"text"}else return"normal"}}]),bt}(vt);function Qo(tt){var St=eu();return function(){var gt=n()(tt),Tt;if(St){var Dt=n()(this).constructor;Tt=Reflect.construct(gt,arguments,Dt)}else Tt=gt.apply(this,arguments);return r()(this,Tt)}}function eu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var Ou=`uniform float u_opacity: 1.0;
varying vec4 v_Color;

#pragma include "picking"

void main() {
  gl_FragColor = v_Color;
  gl_FragColor.a *= u_opacity;
  gl_FragColor = filterColor(gl_FragColor);
}
`,qo=`precision highp float;

#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Normal;
attribute float a_Size;
uniform mat4 u_ModelMatrix;

varying vec4 v_Color;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  vec4 project_pos = project_position(pos);

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  float lightWeight = calc_lighting(pos);
  // v_Color = a_Color;
  v_Color = vec4(a_Color.rgb * lightWeight, a_Color.w);

  setPickingColor(a_PickingColor);
}
`,Wi=function(tt){s()(bt,tt);var St=Qo(bt);function bt(){return T()(this,bt),St.apply(this,arguments)}return t()(bt,[{key:"getUninforms",value:function(){var Tt=this.layer.getLayerConfig(),Dt=Tt.opacity,Yt=Dt===void 0?1:Dt;return{u_opacity:Yt}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"polygonExtrude",vertexShader:qo,fragmentShader:Ou,triangulation:Yn})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"normal",type:U.AttributeType.Attribute,descriptor:{name:"a_Normal",buffer:{usage:U.gl.STATIC_DRAW,data:[],type:U.gl.FLOAT},size:3,update:function(Dt,Yt,pe,Be,Qe){return Qe}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:U.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:1,update:function(Dt,Yt,pe,Be){var Qe=Dt.size,Bn=Qe===void 0?10:Qe;return Array.isArray(Bn)?[Bn[0]]:[Bn]}}})}}]),bt}(me);function ws(tt){var St=Gu();return function(){var gt=n()(tt),Tt;if(St){var Dt=n()(this).constructor;Tt=Reflect.construct(gt,arguments,Dt)}else Tt=gt.apply(this,arguments);return r()(this,Tt)}}function Gu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var wu=`uniform float u_opacity: 1.0;
varying vec4 v_Color;

#pragma include "picking"

void main() {
  gl_FragColor = v_Color;
  gl_FragColor.a *= u_opacity;
  gl_FragColor = filterColor(gl_FragColor);
}
`,Fo=`attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Normal;
attribute float a_Size;
uniform mat4 u_ModelMatrix;

varying vec4 v_Color;

#pragma include "projection"
#pragma include "picking"

void main() {
  v_Color = a_Color;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  setPickingColor(a_PickingColor);
}

`,ko=function(tt){s()(bt,tt);var St=ws(bt);function bt(){return T()(this,bt),St.apply(this,arguments)}return t()(bt,[{key:"getUninforms",value:function(){var Tt=this.layer.getLayerConfig(),Dt=Tt.opacity,Yt=Dt===void 0?1:Dt;return{u_opacity:Yt}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"polygon",vertexShader:Fo,fragmentShader:wu,triangulation:nr,blend:this.getBlend(),depth:{enable:!1}})]}},{key:"registerBuiltinAttributes",value:function(){}}]),bt}(me),Eu={fill:ko,line:Ro,extrude:Wi,text:ku,point_fill:Nu,point_image:fs,point_normal:Au,point_extrude:Wa},Mi=Eu;function el(tt){var St=Iu();return function(){var gt=n()(tt),Tt;if(St){var Dt=n()(this).constructor;Tt=Reflect.construct(gt,arguments,Dt)}else Tt=gt.apply(this,arguments);return r()(this,Tt)}}function Iu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var Lu=function(tt){s()(bt,tt);var St=el(bt);function bt(){var gt;T()(this,bt);for(var Tt=arguments.length,Dt=new Array(Tt),Yt=0;Yt<Tt;Yt++)Dt[Yt]=arguments[Yt];return gt=St.call.apply(St,[this].concat(Dt)),gt.type="PolygonLayer",gt}return t()(bt,[{key:"buildModels",value:function(){var Tt=this.getModelType();this.layerModel=new Mi[Tt](this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getModelType",value:function(){var Tt,Dt=this.styleAttributeService.getLayerStyleAttribute("shape"),Yt=Dt==null||(Tt=Dt.scale)===null||Tt===void 0?void 0:Tt.field;return Yt==="fill"?"fill":Yt==="extrude"?"extrude":Yt==="line"?"line":this.getPointModelType()}},{key:"getPointModelType",value:function(){var Tt=this.getEncodedData(),Dt=this.getLayerConfig(),Yt=Dt.shape2d,pe=Dt.shape3d,Be=this.iconService.getIconMap(),Qe=Tt.find(function(fr){return fr.hasOwnProperty("shape")});if(Qe){var Bn=Qe.shape;return Bn==="dot"?"point_normal":(Yt==null?void 0:Yt.indexOf(Bn))!==-1?"point_fill":(pe==null?void 0:pe.indexOf(Bn))!==-1?"point_extrude":Be.hasOwnProperty(Bn)?"point_image":"text"}else return"fill"}}]),bt}(vt);function nu(tt){var St=we();return function(){var gt=n()(tt),Tt;if(St){var Dt=n()(this).constructor;Tt=Reflect.construct(gt,arguments,Dt)}else Tt=gt.apply(this,arguments);return r()(this,Tt)}}function we(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var Te=`precision mediump float;
uniform float u_opacity: 1.0;
uniform sampler2D u_texture;
uniform sampler2D u_colorTexture;
uniform float u_min;
uniform float u_max;
uniform vec2 u_domain;
uniform float u_noDataValue;
uniform bool u_clampLow: true;
uniform bool u_clampHigh: true;
varying vec2 v_texCoord;

void main() {

  float value = texture2D(u_texture,vec2(v_texCoord.x,v_texCoord.y)).r;
  if (value == u_noDataValue)
    gl_FragColor = vec4(0.0, 0, 0, 0.0);
  else if ((!u_clampLow && value < u_domain[0]) || (!u_clampHigh && value > u_domain[1]))
    gl_FragColor = vec4(0, 0, 0, 0);
  else {
    float normalisedValue =(value - u_domain[0]) / (u_domain[1] -u_domain[0]);
    vec4 color = texture2D(u_colorTexture,vec2(normalisedValue, 0));
    gl_FragColor = color;
    gl_FragColor.a =  gl_FragColor.a * u_opacity ;
  }


}
`,dn=`precision highp float;
uniform mat4 u_ModelMatrix;
attribute vec3 a_Position;
attribute vec2 a_Uv;
varying vec2 v_texCoord;
#pragma include "projection"
void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));
}
`,tn=function(tt){s()(bt,tt);var St=nu(bt);function bt(){var gt;T()(this,bt);for(var Tt=arguments.length,Dt=new Array(Tt),Yt=0;Yt<Tt;Yt++)Dt[Yt]=arguments[Yt];return gt=St.call.apply(St,[this].concat(Dt)),gt.texture=void 0,gt.colorTexture=void 0,gt}return t()(bt,[{key:"getUninforms",value:function(){var Tt=this.layer.getLayerConfig(),Dt=Tt.opacity,Yt=Dt===void 0?1:Dt,pe=Tt.clampLow,Be=pe===void 0?!0:pe,Qe=Tt.clampHigh,Bn=Qe===void 0?!0:Qe,fr=Tt.noDataValue,qr=fr===void 0?-9999999:fr,ci=Tt.domain,Gi=ci===void 0?[0,1]:ci;return this.updateColorTexure(),{u_opacity:Yt||1,u_texture:this.texture,u_domain:Gi,u_clampLow:Be,u_clampHigh:typeof Bn!="undefined"?Bn:Be,u_noDataValue:qr,u_colorTexture:this.colorTexture}}},{key:"initModels",value:function(){var Tt=this.layer.getSource(),Dt=this.rendererService.createTexture2D,Yt=Tt.data.dataArray[0];this.texture=Dt({data:Yt.data,width:Yt.width,height:Yt.height,format:U.gl.LUMINANCE,type:U.gl.FLOAT});var pe=this.layer.getLayerConfig(),Be=pe.rampColors,Qe=Object(O.n)(Be);return this.colorTexture=Dt({data:Qe.data,width:Qe.width,height:Qe.height,flipY:!1}),[this.layer.buildLayerModel({moduleName:"RasterImageData",vertexShader:dn,fragmentShader:Te,triangulation:Rr,primitive:U.gl.TRIANGLES,depth:{enable:!1},blend:this.getBlend()})]}},{key:"buildModels",value:function(){return this.initModels()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:U.AttributeType.Attribute,descriptor:{name:"a_Uv",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:2,update:function(Dt,Yt,pe,Be){return[pe[3],pe[4]]}}})}},{key:"updateColorTexure",value:function(){var Tt=this.rendererService.createTexture2D,Dt=this.layer.getLayerConfig(),Yt=Dt.rampColors,pe=Object(O.n)(Yt);this.colorTexture=Tt({data:pe.data,width:pe.width,height:pe.height,flipY:!1})}}]),bt}(me),wn={raster:tn,raster3d:tn},vr=wn;function Lr(tt){var St=Kr();return function(){var gt=n()(tt),Tt;if(St){var Dt=n()(this).constructor;Tt=Reflect.construct(gt,arguments,Dt)}else Tt=gt.apply(this,arguments);return r()(this,Tt)}}function Kr(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var ti=function(tt){s()(bt,tt);var St=Lr(bt);function bt(){var gt;T()(this,bt);for(var Tt=arguments.length,Dt=new Array(Tt),Yt=0;Yt<Tt;Yt++)Dt[Yt]=arguments[Yt];return gt=St.call.apply(St,[this].concat(Dt)),gt.type="RasterLayer",gt}return t()(bt,[{key:"buildModels",value:function(){var Tt=this.getModelType();this.layerModel=new vr[Tt](this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getDefaultConfig",value:function(){var Tt=this.getModelType(),Dt={raster:{},raster3d:{}};return Dt[Tt]}},{key:"getModelType",value:function(){return"raster"}}]),bt}(vt),Fr,ui,br,Zt,te,Le,_e,Rt;function zt(tt,St){var bt=Object.keys(tt);if(Object.getOwnPropertySymbols){var gt=Object.getOwnPropertySymbols(tt);St&&(gt=gt.filter(function(Tt){return Object.getOwnPropertyDescriptor(tt,Tt).enumerable})),bt.push.apply(bt,gt)}return bt}function se(tt){for(var St=1;St<arguments.length;St++){var bt=arguments[St]!=null?arguments[St]:{};St%2?zt(Object(bt),!0).forEach(function(gt){u()(tt,gt,bt[gt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tt,Object.getOwnPropertyDescriptors(bt)):zt(Object(bt)).forEach(function(gt){Object.defineProperty(tt,gt,Object.getOwnPropertyDescriptor(bt,gt))})}return tt}var re=(Fr=Object(Z.injectable)(),ui=Object(Z.inject)(U.TYPES.IGlobalConfigService),br=Object(Z.inject)(U.TYPES.ILogService),Fr(Zt=(te=(Rt=function(){function tt(){T()(this,tt),v()(this,"configService",Le,this),v()(this,"logger",_e,this)}return t()(tt,[{key:"apply",value:function(bt,gt){var Tt=this,Dt=gt.styleAttributeService;bt.hooks.init.tap("DataMappingPlugin",function(){Tt.generateMaping(bt,{styleAttributeService:Dt})}),bt.hooks.beforeRenderData.tap("DataMappingPlugin",function(){return bt.dataState.dataMappingNeedUpdate=!1,Tt.generateMaping(bt,{styleAttributeService:Dt}),!0}),bt.hooks.beforeRender.tap("DataMappingPlugin",function(){if(!bt.layerModelNeedUpdate){var Yt=Dt.getLayerStyleAttributes()||[],pe=Dt.getLayerStyleAttribute("filter"),Be=bt.getSource().data.dataArray,Qe=Yt.filter(function(fr){return fr.needRemapping}),Bn=Be;pe!=null&&pe.needRemapping&&pe!==null&&pe!==void 0&&pe.scale&&(Bn=Be.filter(function(fr){return Tt.applyAttributeMapping(pe,fr)[0]})),Qe.length&&(pe!=null&&pe.needRemapping?(bt.setEncodedData(Tt.mapping(Yt,Bn)),pe.needRemapping=!1):bt.setEncodedData(Tt.mapping(Qe,Bn,bt.getEncodedData())),Tt.logger.debug("remapping finished"),bt.emit("remapping",null))}})}},{key:"generateMaping",value:function(bt,gt){var Tt=this,Dt=gt.styleAttributeService,Yt=Dt.getLayerStyleAttributes()||[],pe=Dt.getLayerStyleAttribute("filter"),Be=bt.getSource().data.dataArray,Qe=Be;pe!=null&&pe.scale&&(Qe=Be.filter(function(Bn){return Tt.applyAttributeMapping(pe,Bn)[0]})),bt.setEncodedData(this.mapping(Yt,Qe))}},{key:"mapping",value:function(bt,gt,Tt){var Dt=this;return gt.map(function(Yt,pe){var Be=Tt?Tt[pe]:{},Qe=se({id:Yt._id,coordinates:Yt.coordinates},Be);return bt.filter(function(Bn){return Bn.scale!==void 0}).forEach(function(Bn){var fr=Dt.applyAttributeMapping(Bn,Yt);Bn.needRemapping=!1,Bn.name==="color"&&(fr=fr.map(function(qr){return Object(O.s)(qr)})),Qe[Bn.name]=Array.isArray(fr)&&fr.length===1?fr[0]:fr}),Qe})}},{key:"applyAttributeMapping",value:function(bt,gt){var Tt;if(!bt.scale)return[];var Dt=(bt==null||(Tt=bt.scale)===null||Tt===void 0?void 0:Tt.scalers)||[],Yt=[];return Dt.forEach(function(pe){var Be,Qe=pe.field;(gt.hasOwnProperty(Qe)||((Be=bt.scale)===null||Be===void 0?void 0:Be.type)==="variable")&&Yt.push(gt[Qe])}),bt.mapping?bt.mapping(Yt):[]}}]),tt}(),Rt),Le=_()(te.prototype,"configService",[ui],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_e=_()(te.prototype,"logger",[br],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),te))||Zt),ce=L("rlAn"),Fe,Ke,rn,Je=(Fe=Object(Z.injectable)(),Fe(Ke=(rn=function(){function tt(){T()(this,tt),this.mapService=void 0}return t()(tt,[{key:"apply",value:function(bt){var gt=this;this.mapService=bt.getContainer().get(U.TYPES.IMapService),bt.hooks.init.tap("DataSourcePlugin",function(){var Tt=bt.sourceOption,Dt=Tt.data,Yt=Tt.options;bt.setSource(new ce.default(Dt,Yt)),gt.updateClusterData(bt)}),bt.hooks.beforeRenderData.tap("DataSourcePlugin",function(){var Tt=gt.updateClusterData(bt),Dt=bt.dataState.dataSourceNeedUpdate;return bt.dataState.dataSourceNeedUpdate=!1,Tt||Dt})}},{key:"updateClusterData",value:function(bt){var gt=bt.getSource(),Tt=gt.cluster,Dt=gt.clusterOptions,Yt=Dt.zoom,pe=Yt===void 0?0:Yt,Be=Dt.maxZoom,Qe=Be===void 0?16:Be,Bn=this.mapService.getZoom()-1;return Tt&&Math.abs(pe-Bn)>1&&Qe>pe?(gt.updateClusterData(Math.floor(Bn)),!0):!1}}]),tt}(),rn))||Ke),vn=L("7tbW"),hn=L.n(vn),Jn=L("4qC0"),Vn=L.n(Jn),Zn=L("J2iB"),Wn=L.n(Zn),lr=function(tt,St){return tt<St?-1:tt>St?1:tt>=St?0:NaN},xr=function(tt){return tt.length===1&&(tt=Vr(tt)),{left:function(bt,gt,Tt,Dt){for(Tt==null&&(Tt=0),Dt==null&&(Dt=bt.length);Tt<Dt;){var Yt=Tt+Dt>>>1;tt(bt[Yt],gt)<0?Tt=Yt+1:Dt=Yt}return Tt},right:function(bt,gt,Tt,Dt){for(Tt==null&&(Tt=0),Dt==null&&(Dt=bt.length);Tt<Dt;){var Yt=Tt+Dt>>>1;tt(bt[Yt],gt)>0?Dt=Yt:Tt=Yt+1}return Tt}}};function Vr(tt){return function(St,bt){return lr(tt(St),bt)}}var yi=xr(lr),Br=yi.right,si=yi.left,gi=Br,Zi=function(tt,St){St==null&&(St=Li);for(var bt=0,gt=tt.length-1,Tt=tt[0],Dt=new Array(gt<0?0:gt);bt<gt;)Dt[bt]=St(Tt,Tt=tt[++bt]);return Dt};function Li(tt,St){return[tt,St]}var Ma=function(tt,St,bt){var gt=tt.length,Tt=St.length,Dt=new Array(gt*Tt),Yt,pe,Be,Qe;for(bt==null&&(bt=Li),Yt=Be=0;Yt<gt;++Yt)for(Qe=tt[Yt],pe=0;pe<Tt;++pe,++Be)Dt[Be]=bt(Qe,St[pe]);return Dt},ma=function(tt,St){return St<tt?-1:St>tt?1:St>=tt?0:NaN},la=function(tt){return tt===null?NaN:+tt},ri=function(tt,St){var bt=tt.length,gt=0,Tt=-1,Dt=0,Yt,pe,Be=0;if(St==null)for(;++Tt<bt;)isNaN(Yt=la(tt[Tt]))||(pe=Yt-Dt,Dt+=pe/++gt,Be+=pe*(Yt-Dt));else for(;++Tt<bt;)isNaN(Yt=la(St(tt[Tt],Tt,tt)))||(pe=Yt-Dt,Dt+=pe/++gt,Be+=pe*(Yt-Dt));if(gt>1)return Be/(gt-1)},Ta=function(tt,St){var bt=ri(tt,St);return bt&&Math.sqrt(bt)},Ga=function(tt,St){var bt=tt.length,gt=-1,Tt,Dt,Yt;if(St==null){for(;++gt<bt;)if((Tt=tt[gt])!=null&&Tt>=Tt)for(Dt=Yt=Tt;++gt<bt;)(Tt=tt[gt])!=null&&(Dt>Tt&&(Dt=Tt),Yt<Tt&&(Yt=Tt))}else for(;++gt<bt;)if((Tt=St(tt[gt],gt,tt))!=null&&Tt>=Tt)for(Dt=Yt=Tt;++gt<bt;)(Tt=St(tt[gt],gt,tt))!=null&&(Dt>Tt&&(Dt=Tt),Yt<Tt&&(Yt=Tt));return[Dt,Yt]},Ya=Array.prototype,Ii=Ya.slice,Da=Ya.map,ho=function(tt){return function(){return tt}},js=function(tt){return tt},Is=function(tt,St,bt){tt=+tt,St=+St,bt=(Tt=arguments.length)<2?(St=tt,tt=0,1):Tt<3?1:+bt;for(var gt=-1,Tt=Math.max(0,Math.ceil((St-tt)/bt))|0,Dt=new Array(Tt);++gt<Tt;)Dt[gt]=tt+gt*bt;return Dt},Vu=Math.sqrt(50),cu=Math.sqrt(10),j=Math.sqrt(2),I=function(tt,St,bt){var gt,Tt=-1,Dt,Yt,pe;if(St=+St,tt=+tt,bt=+bt,tt===St&&bt>0)return[tt];if((gt=St<tt)&&(Dt=tt,tt=St,St=Dt),(pe=w(tt,St,bt))===0||!isFinite(pe))return[];if(pe>0)for(tt=Math.ceil(tt/pe),St=Math.floor(St/pe),Yt=new Array(Dt=Math.ceil(St-tt+1));++Tt<Dt;)Yt[Tt]=(tt+Tt)*pe;else for(tt=Math.floor(tt*pe),St=Math.ceil(St*pe),Yt=new Array(Dt=Math.ceil(tt-St+1));++Tt<Dt;)Yt[Tt]=(tt-Tt)/pe;return gt&&Yt.reverse(),Yt};function w(tt,St,bt){var gt=(St-tt)/Math.max(0,bt),Tt=Math.floor(Math.log(gt)/Math.LN10),Dt=gt/Math.pow(10,Tt);return Tt>=0?(Dt>=Vu?10:Dt>=cu?5:Dt>=j?2:1)*Math.pow(10,Tt):-Math.pow(10,-Tt)/(Dt>=Vu?10:Dt>=cu?5:Dt>=j?2:1)}function B(tt,St,bt){var gt=Math.abs(St-tt)/Math.max(0,bt),Tt=Math.pow(10,Math.floor(Math.log(gt)/Math.LN10)),Dt=gt/Tt;return Dt>=Vu?Tt*=10:Dt>=cu?Tt*=5:Dt>=j&&(Tt*=2),St<tt?-Tt:Tt}var D=function(tt){return Math.ceil(Math.log(tt.length)/Math.LN2)+1},G=function(){var tt=js,St=Ga,bt=D;function gt(Tt){var Dt,Yt=Tt.length,pe,Be=new Array(Yt);for(Dt=0;Dt<Yt;++Dt)Be[Dt]=tt(Tt[Dt],Dt,Tt);var Qe=St(Be),Bn=Qe[0],fr=Qe[1],qr=bt(Be,Bn,fr);Array.isArray(qr)||(qr=B(Bn,fr,qr),qr=Is(Math.ceil(Bn/qr)*qr,fr,qr));for(var ci=qr.length;qr[0]<=Bn;)qr.shift(),--ci;for(;qr[ci-1]>fr;)qr.pop(),--ci;var Gi=new Array(ci+1),zi;for(Dt=0;Dt<=ci;++Dt)zi=Gi[Dt]=[],zi.x0=Dt>0?qr[Dt-1]:Bn,zi.x1=Dt<ci?qr[Dt]:fr;for(Dt=0;Dt<Yt;++Dt)pe=Be[Dt],Bn<=pe&&pe<=fr&&Gi[gi(qr,pe,0,ci)].push(Tt[Dt]);return Gi}return gt.value=function(Tt){return arguments.length?(tt=typeof Tt=="function"?Tt:ho(Tt),gt):tt},gt.domain=function(Tt){return arguments.length?(St=typeof Tt=="function"?Tt:ho([Tt[0],Tt[1]]),gt):St},gt.thresholds=function(Tt){return arguments.length?(bt=typeof Tt=="function"?Tt:Array.isArray(Tt)?ho(Ii.call(Tt)):ho(Tt),gt):bt},gt},J=function(tt,St,bt){if(bt==null&&(bt=la),!!(gt=tt.length)){if((St=+St)<=0||gt<2)return+bt(tt[0],0,tt);if(St>=1)return+bt(tt[gt-1],gt-1,tt);var gt,Tt=(gt-1)*St,Dt=Math.floor(Tt),Yt=+bt(tt[Dt],Dt,tt),pe=+bt(tt[Dt+1],Dt+1,tt);return Yt+(pe-Yt)*(Tt-Dt)}},st=function(tt,St,bt){return tt=Da.call(tt,la).sort(lr),Math.ceil((bt-St)/(2*(J(tt,.75)-J(tt,.25))*Math.pow(tt.length,-1/3)))},Ct=function(tt,St,bt){return Math.ceil((bt-St)/(3.5*Ta(tt)*Math.pow(tt.length,-1/3)))},Ot=function(tt,St){var bt=tt.length,gt=-1,Tt,Dt;if(St==null){for(;++gt<bt;)if((Tt=tt[gt])!=null&&Tt>=Tt)for(Dt=Tt;++gt<bt;)(Tt=tt[gt])!=null&&Tt>Dt&&(Dt=Tt)}else for(;++gt<bt;)if((Tt=St(tt[gt],gt,tt))!=null&&Tt>=Tt)for(Dt=Tt;++gt<bt;)(Tt=St(tt[gt],gt,tt))!=null&&Tt>Dt&&(Dt=Tt);return Dt},Ut=function(tt,St){var bt=tt.length,gt=bt,Tt=-1,Dt,Yt=0;if(St==null)for(;++Tt<bt;)isNaN(Dt=la(tt[Tt]))?--gt:Yt+=Dt;else for(;++Tt<bt;)isNaN(Dt=la(St(tt[Tt],Tt,tt)))?--gt:Yt+=Dt;if(gt)return Yt/gt},Ht=function(tt,St){var bt=tt.length,gt=-1,Tt,Dt=[];if(St==null)for(;++gt<bt;)isNaN(Tt=la(tt[gt]))||Dt.push(Tt);else for(;++gt<bt;)isNaN(Tt=la(St(tt[gt],gt,tt)))||Dt.push(Tt);return J(Dt.sort(lr),.5)},qt=function(tt){for(var St=tt.length,bt,gt=-1,Tt=0,Dt,Yt;++gt<St;)Tt+=tt[gt].length;for(Dt=new Array(Tt);--St>=0;)for(Yt=tt[St],bt=Yt.length;--bt>=0;)Dt[--Tt]=Yt[bt];return Dt},fe=function(tt,St){var bt=tt.length,gt=-1,Tt,Dt;if(St==null){for(;++gt<bt;)if((Tt=tt[gt])!=null&&Tt>=Tt)for(Dt=Tt;++gt<bt;)(Tt=tt[gt])!=null&&Dt>Tt&&(Dt=Tt)}else for(;++gt<bt;)if((Tt=St(tt[gt],gt,tt))!=null&&Tt>=Tt)for(Dt=Tt;++gt<bt;)(Tt=St(tt[gt],gt,tt))!=null&&Dt>Tt&&(Dt=Tt);return Dt},ye=function(tt,St){for(var bt=St.length,gt=new Array(bt);bt--;)gt[bt]=tt[St[bt]];return gt},De=function(tt,St){if(!!(bt=tt.length)){var bt,gt=0,Tt=0,Dt,Yt=tt[Tt];for(St==null&&(St=lr);++gt<bt;)(St(Dt=tt[gt],Yt)<0||St(Yt,Yt)!==0)&&(Yt=Dt,Tt=gt);if(St(Yt,Yt)===0)return Tt}},Ie=function(tt,St,bt){for(var gt=(bt==null?tt.length:bt)-(St=St==null?0:+St),Tt,Dt;gt;)Dt=Math.random()*gt--|0,Tt=tt[gt+St],tt[gt+St]=tt[Dt+St],tt[Dt+St]=Tt;return tt},Ve=function(tt,St){var bt=tt.length,gt=-1,Tt,Dt=0;if(St==null)for(;++gt<bt;)(Tt=+tt[gt])&&(Dt+=Tt);else for(;++gt<bt;)(Tt=+St(tt[gt],gt,tt))&&(Dt+=Tt);return Dt},qe=function(tt){if(!(Dt=tt.length))return[];for(var St=-1,bt=fe(tt,on),gt=new Array(bt);++St<bt;)for(var Tt=-1,Dt,Yt=gt[St]=new Array(Dt);++Tt<Dt;)Yt[Tt]=tt[Tt][St];return gt};function on(tt){return tt.length}var tr=function(){return qe(arguments)};function zn(tt,St){switch(arguments.length){case 0:break;case 1:this.range(tt);break;default:this.range(St).domain(tt);break}return this}function cr(tt,St){switch(arguments.length){case 0:break;case 1:this.interpolator(tt);break;default:this.interpolator(St).domain(tt);break}return this}var yr="$";function Jr(){}Jr.prototype=Wr.prototype={constructor:Jr,has:function(St){return yr+St in this},get:function(St){return this[yr+St]},set:function(St,bt){return this[yr+St]=bt,this},remove:function(St){var bt=yr+St;return bt in this&&delete this[bt]},clear:function(){for(var St in this)St[0]===yr&&delete this[St]},keys:function(){var St=[];for(var bt in this)bt[0]===yr&&St.push(bt.slice(1));return St},values:function(){var St=[];for(var bt in this)bt[0]===yr&&St.push(this[bt]);return St},entries:function(){var St=[];for(var bt in this)bt[0]===yr&&St.push({key:bt.slice(1),value:this[bt]});return St},size:function(){var St=0;for(var bt in this)bt[0]===yr&&++St;return St},empty:function(){for(var St in this)if(St[0]===yr)return!1;return!0},each:function(St){for(var bt in this)bt[0]===yr&&St(this[bt],bt.slice(1),this)}};function Wr(tt,St){var bt=new Jr;if(tt instanceof Jr)tt.each(function(pe,Be){bt.set(Be,pe)});else if(Array.isArray(tt)){var gt=-1,Tt=tt.length,Dt;if(St==null)for(;++gt<Tt;)bt.set(gt,tt[gt]);else for(;++gt<Tt;)bt.set(St(Dt=tt[gt],gt,tt),Dt)}else if(tt)for(var Yt in tt)bt.set(Yt,tt[Yt]);return bt}var bi=Wr,ji=function(){var tt=[],St=[],bt,gt,Tt;function Dt(pe,Be,Qe,Bn){if(Be>=tt.length)return bt!=null&&pe.sort(bt),gt!=null?gt(pe):pe;for(var fr=-1,qr=pe.length,ci=tt[Be++],Gi,zi,aa=bi(),no,uo=Qe();++fr<qr;)(no=aa.get(Gi=ci(zi=pe[fr])+""))?no.push(zi):aa.set(Gi,[zi]);return aa.each(function(Ws,rs){Bn(uo,rs,Dt(Ws,Be,Qe,Bn))}),uo}function Yt(pe,Be){if(++Be>tt.length)return pe;var Qe,Bn=St[Be-1];return gt!=null&&Be>=tt.length?Qe=pe.entries():(Qe=[],pe.each(function(fr,qr){Qe.push({key:qr,values:Yt(fr,Be)})})),Bn!=null?Qe.sort(function(fr,qr){return Bn(fr.key,qr.key)}):Qe}return Tt={object:function(Be){return Dt(Be,0,Hi,Ji)},map:function(Be){return Dt(Be,0,Pa,ja)},entries:function(Be){return Yt(Dt(Be,0,Pa,ja),0)},key:function(Be){return tt.push(Be),Tt},sortKeys:function(Be){return St[tt.length-1]=Be,Tt},sortValues:function(Be){return bt=Be,Tt},rollup:function(Be){return gt=Be,Tt}}};function Hi(){return{}}function Ji(tt,St,bt){tt[St]=bt}function Pa(){return bi()}function ja(tt,St,bt){tt.set(St,bt)}function Fi(){}var va=bi.prototype;Fi.prototype=ya.prototype={constructor:Fi,has:va.has,add:function(St){return St+="",this[yr+St]=St,this},remove:va.remove,clear:va.clear,values:va.keys,size:va.size,empty:va.empty,each:va.each};function ya(tt,St){var bt=new Fi;if(tt instanceof Fi)tt.each(function(Dt){bt.add(Dt)});else if(tt){var gt=-1,Tt=tt.length;if(St==null)for(;++gt<Tt;)bt.add(tt[gt]);else for(;++gt<Tt;)bt.add(St(tt[gt],gt,tt))}return bt}var Yi=ya,Aa=function(tt){var St=[];for(var bt in tt)St.push(bt);return St},ua=function(tt){var St=[];for(var bt in tt)St.push(tt[bt]);return St},Ba=function(tt){var St=[];for(var bt in tt)St.push({key:bt,value:tt[bt]});return St},Za=Array.prototype,os=Za.map,Go=Za.slice,Bs={name:"implicit"};function Yo(){var tt=bi(),St=[],bt=[],gt=Bs;function Tt(Dt){var Yt=Dt+"",pe=tt.get(Yt);if(!pe){if(gt!==Bs)return gt;tt.set(Yt,pe=St.push(Dt))}return bt[(pe-1)%bt.length]}return Tt.domain=function(Dt){if(!arguments.length)return St.slice();St=[],tt=bi();for(var Yt=-1,pe=Dt.length,Be,Qe;++Yt<pe;)tt.has(Qe=(Be=Dt[Yt])+"")||tt.set(Qe,St.push(Be));return Tt},Tt.range=function(Dt){return arguments.length?(bt=Go.call(Dt),Tt):bt.slice()},Tt.unknown=function(Dt){return arguments.length?(gt=Dt,Tt):gt},Tt.copy=function(){return Yo(St,bt).unknown(gt)},zn.apply(Tt,arguments),Tt}function ks(){var tt=Yo().unknown(void 0),St=tt.domain,bt=tt.range,gt=[0,1],Tt,Dt,Yt=!1,pe=0,Be=0,Qe=.5;delete tt.unknown;function Bn(){var fr=St().length,qr=gt[1]<gt[0],ci=gt[qr-0],Gi=gt[1-qr];Tt=(Gi-ci)/Math.max(1,fr-pe+Be*2),Yt&&(Tt=Math.floor(Tt)),ci+=(Gi-ci-Tt*(fr-pe))*Qe,Dt=Tt*(1-pe),Yt&&(ci=Math.round(ci),Dt=Math.round(Dt));var zi=Is(fr).map(function(aa){return ci+Tt*aa});return bt(qr?zi.reverse():zi)}return tt.domain=function(fr){return arguments.length?(St(fr),Bn()):St()},tt.range=function(fr){return arguments.length?(gt=[+fr[0],+fr[1]],Bn()):gt.slice()},tt.rangeRound=function(fr){return gt=[+fr[0],+fr[1]],Yt=!0,Bn()},tt.bandwidth=function(){return Dt},tt.step=function(){return Tt},tt.round=function(fr){return arguments.length?(Yt=!!fr,Bn()):Yt},tt.padding=function(fr){return arguments.length?(pe=Math.min(1,Be=+fr),Bn()):pe},tt.paddingInner=function(fr){return arguments.length?(pe=Math.min(1,fr),Bn()):pe},tt.paddingOuter=function(fr){return arguments.length?(Be=+fr,Bn()):Be},tt.align=function(fr){return arguments.length?(Qe=Math.max(0,Math.min(1,fr)),Bn()):Qe},tt.copy=function(){return ks(St(),gt).round(Yt).paddingInner(pe).paddingOuter(Be).align(Qe)},zn.apply(Bn(),arguments)}function yl(tt){var St=tt.copy;return tt.padding=tt.paddingOuter,delete tt.paddingInner,delete tt.paddingOuter,tt.copy=function(){return yl(St())},tt}function nl(){return yl(ks.apply(null,arguments).paddingInner(1))}var wl=L("FmoU");function yc(tt,St,bt,gt,Tt){var Dt=tt*tt,Yt=Dt*tt;return((1-3*tt+3*Dt-Yt)*St+(4-6*Dt+3*Yt)*bt+(1+3*tt+3*Dt-3*Yt)*gt+Yt*Tt)/6}var Il=function(tt){var St=tt.length-1;return function(bt){var gt=bt<=0?bt=0:bt>=1?(bt=1,St-1):Math.floor(bt*St),Tt=tt[gt],Dt=tt[gt+1],Yt=gt>0?tt[gt-1]:2*Tt-Dt,pe=gt<St-1?tt[gt+2]:2*Dt-Tt;return yc((bt-gt/St)*St,Yt,Tt,Dt,pe)}},tc=function(tt){var St=tt.length;return function(bt){var gt=Math.floor(((bt%=1)<0?++bt:bt)*St),Tt=tt[(gt+St-1)%St],Dt=tt[gt%St],Yt=tt[(gt+1)%St],pe=tt[(gt+2)%St];return yc((bt-gt/St)*St,Tt,Dt,Yt,pe)}},xc=function(tt){return function(){return tt}};function Bc(tt,St){return function(bt){return tt+bt*St}}function Pc(tt,St,bt){return tt=Math.pow(tt,bt),St=Math.pow(St,bt)-tt,bt=1/bt,function(gt){return Math.pow(tt+gt*St,bt)}}function Uc(tt,St){var bt=St-tt;return bt?Bc(tt,bt>180||bt<-180?bt-360*Math.round(bt/360):bt):xc(isNaN(tt)?St:tt)}function kc(tt){return(tt=+tt)==1?Tc:function(St,bt){return bt-St?Pc(St,bt,tt):xc(isNaN(St)?bt:St)}}function Tc(tt,St){var bt=St-tt;return bt?Bc(tt,bt):xc(isNaN(tt)?St:tt)}var Gc=function tt(St){var bt=kc(St);function gt(Tt,Dt){var Yt=bt((Tt=Object(wl.b)(Tt)).r,(Dt=Object(wl.b)(Dt)).r),pe=bt(Tt.g,Dt.g),Be=bt(Tt.b,Dt.b),Qe=Tc(Tt.opacity,Dt.opacity);return function(Bn){return Tt.r=Yt(Bn),Tt.g=pe(Bn),Tt.b=Be(Bn),Tt.opacity=Qe(Bn),Tt+""}}return gt.gamma=tt,gt}(1);function fc(tt){return function(St){var bt=St.length,gt=new Array(bt),Tt=new Array(bt),Dt=new Array(bt),Yt,pe;for(Yt=0;Yt<bt;++Yt)pe=Object(wl.b)(St[Yt]),gt[Yt]=pe.r||0,Tt[Yt]=pe.g||0,Dt[Yt]=pe.b||0;return gt=tt(gt),Tt=tt(Tt),Dt=tt(Dt),pe.opacity=1,function(Be){return pe.r=gt(Be),pe.g=Tt(Be),pe.b=Dt(Be),pe+""}}}var Su=fc(Il),Ac=fc(tc),Nc=function(tt,St){St||(St=[]);var bt=tt?Math.min(St.length,tt.length):0,gt=St.slice(),Tt;return function(Dt){for(Tt=0;Tt<bt;++Tt)gt[Tt]=tt[Tt]*(1-Dt)+St[Tt]*Dt;return gt}};function Wl(tt){return ArrayBuffer.isView(tt)&&!(tt instanceof DataView)}var dl=function(tt,St){return(Wl(St)?Nc:vl)(tt,St)};function vl(tt,St){var bt=St?St.length:0,gt=tt?Math.min(bt,tt.length):0,Tt=new Array(gt),Dt=new Array(bt),Yt;for(Yt=0;Yt<gt;++Yt)Tt[Yt]=Vc(tt[Yt],St[Yt]);for(;Yt<bt;++Yt)Dt[Yt]=St[Yt];return function(pe){for(Yt=0;Yt<gt;++Yt)Dt[Yt]=Tt[Yt](pe);return Dt}}var Wu=function(tt,St){var bt=new Date;return tt=+tt,St=+St,function(gt){return bt.setTime(tt*(1-gt)+St*gt),bt}},Hu=function(tt,St){return tt=+tt,St=+St,function(bt){return tt*(1-bt)+St*bt}},rl=function(tt,St){var bt={},gt={},Tt;(tt===null||typeof tt!="object")&&(tt={}),(St===null||typeof St!="object")&&(St={});for(Tt in St)Tt in tt?bt[Tt]=Vc(tt[Tt],St[Tt]):gt[Tt]=St[Tt];return function(Dt){for(Tt in bt)gt[Tt]=bt[Tt](Dt);return gt}},ec=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ic=new RegExp(ec.source,"g");function qc(tt){return function(){return tt}}function tf(tt){return function(St){return tt(St)+""}}var Lc=function(tt,St){var bt=ec.lastIndex=Ic.lastIndex=0,gt,Tt,Dt,Yt=-1,pe=[],Be=[];for(tt=tt+"",St=St+"";(gt=ec.exec(tt))&&(Tt=Ic.exec(St));)(Dt=Tt.index)>bt&&(Dt=St.slice(bt,Dt),pe[Yt]?pe[Yt]+=Dt:pe[++Yt]=Dt),(gt=gt[0])===(Tt=Tt[0])?pe[Yt]?pe[Yt]+=Tt:pe[++Yt]=Tt:(pe[++Yt]=null,Be.push({i:Yt,x:Hu(gt,Tt)})),bt=Ic.lastIndex;return bt<St.length&&(Dt=St.slice(bt),pe[Yt]?pe[Yt]+=Dt:pe[++Yt]=Dt),pe.length<2?Be[0]?tf(Be[0].x):qc(St):(St=Be.length,function(Qe){for(var Bn=0,fr;Bn<St;++Bn)pe[(fr=Be[Bn]).i]=fr.x(Qe);return pe.join("")})},Vc=function(tt,St){var bt=typeof St,gt;return St==null||bt==="boolean"?xc(St):(bt==="number"?Hu:bt==="string"?(gt=Object(wl.a)(St))?(St=gt,Gc):Lc:St instanceof wl.a?Gc:St instanceof Date?Wu:Wl(St)?Nc:Array.isArray(St)?vl:typeof St.valueOf!="function"&&typeof St.toString!="function"||isNaN(St)?rl:Hu)(tt,St)},Fc=function(tt,St){return tt=+tt,St=+St,function(bt){return Math.round(tt*(1-bt)+St*bt)}},Kl=function(tt){return function(){return tt}},Yu=function(tt){return+tt},ef=[0,1];function Hl(tt){return tt}function bf(tt,St){return(St-=tt=+tt)?function(bt){return(bt-tt)/St}:Kl(isNaN(St)?NaN:.5)}function wf(tt){var St=tt[0],bt=tt[tt.length-1],gt;return St>bt&&(gt=St,St=bt,bt=gt),function(Tt){return Math.max(St,Math.min(bt,Tt))}}function If(tt,St,bt){var gt=tt[0],Tt=tt[1],Dt=St[0],Yt=St[1];return Tt<gt?(gt=bf(Tt,gt),Dt=bt(Yt,Dt)):(gt=bf(gt,Tt),Dt=bt(Dt,Yt)),function(pe){return Dt(gt(pe))}}function Gf(tt,St,bt){var gt=Math.min(tt.length,St.length)-1,Tt=new Array(gt),Dt=new Array(gt),Yt=-1;for(tt[gt]<tt[0]&&(tt=tt.slice().reverse(),St=St.slice().reverse());++Yt<gt;)Tt[Yt]=bf(tt[Yt],tt[Yt+1]),Dt[Yt]=bt(St[Yt],St[Yt+1]);return function(pe){var Be=gi(tt,pe,1,gt)-1;return Dt[Be](Tt[Be](pe))}}function Rc(tt,St){return St.domain(tt.domain()).range(tt.range()).interpolate(tt.interpolate()).clamp(tt.clamp()).unknown(tt.unknown())}function Pf(){var tt=ef,St=ef,bt=Vc,gt,Tt,Dt,Yt=Hl,pe,Be,Qe;function Bn(){return pe=Math.min(tt.length,St.length)>2?Gf:If,Be=Qe=null,fr}function fr(qr){return isNaN(qr=+qr)?Dt:(Be||(Be=pe(tt.map(gt),St,bt)))(gt(Yt(qr)))}return fr.invert=function(qr){return Yt(Tt((Qe||(Qe=pe(St,tt.map(gt),Hu)))(qr)))},fr.domain=function(qr){return arguments.length?(tt=os.call(qr,Yu),Yt===Hl||(Yt=wf(tt)),Bn()):tt.slice()},fr.range=function(qr){return arguments.length?(St=Go.call(qr),Bn()):St.slice()},fr.rangeRound=function(qr){return St=Go.call(qr),bt=Fc,Bn()},fr.clamp=function(qr){return arguments.length?(Yt=qr?wf(tt):Hl,fr):Yt!==Hl},fr.interpolate=function(qr){return arguments.length?(bt=qr,Bn()):bt},fr.unknown=function(qr){return arguments.length?(Dt=qr,fr):Dt},function(qr,ci){return gt=qr,Tt=ci,Bn()}}function Ef(tt,St){return Pf()(tt,St)}var Lf=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Cc(tt){if(!(St=Lf.exec(tt)))throw new Error("invalid format: "+tt);var St;return new Xc({fill:St[1],align:St[2],sign:St[3],symbol:St[4],zero:St[5],width:St[6],comma:St[7],precision:St[8]&&St[8].slice(1),trim:St[9],type:St[10]})}Cc.prototype=Xc.prototype;function Xc(tt){this.fill=tt.fill===void 0?" ":tt.fill+"",this.align=tt.align===void 0?">":tt.align+"",this.sign=tt.sign===void 0?"-":tt.sign+"",this.symbol=tt.symbol===void 0?"":tt.symbol+"",this.zero=!!tt.zero,this.width=tt.width===void 0?void 0:+tt.width,this.comma=!!tt.comma,this.precision=tt.precision===void 0?void 0:+tt.precision,this.trim=!!tt.trim,this.type=tt.type===void 0?"":tt.type+""}Xc.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};var Vf=function(tt){return Math.abs(tt=Math.round(tt))>=1e21?tt.toLocaleString("en").replace(/,/g,""):tt.toString(10)};function nf(tt,St){if((bt=(tt=St?tt.toExponential(St-1):tt.toExponential()).indexOf("e"))<0)return null;var bt,gt=tt.slice(0,bt);return[gt.length>1?gt[0]+gt.slice(2):gt,+tt.slice(bt+1)]}var rf=function(tt){return tt=nf(Math.abs(tt)),tt?tt[1]:NaN},Wf=function(tt,St){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(rf(St)/3)))*3-rf(Math.abs(tt)))},Hf=function(tt,St){return function(bt,gt){for(var Tt=bt.length,Dt=[],Yt=0,pe=tt[0],Be=0;Tt>0&&pe>0&&(Be+pe+1>gt&&(pe=Math.max(1,gt-Be)),Dt.push(bt.substring(Tt-=pe,Tt+pe)),!((Be+=pe+1)>gt));)pe=tt[Yt=(Yt+1)%tt.length];return Dt.reverse().join(St)}},Yf=function(tt){return function(St){return St.replace(/[0-9]/g,function(bt){return tt[+bt]})}},Zf=function(tt){t:for(var St=tt.length,bt=1,gt=-1,Tt;bt<St;++bt)switch(tt[bt]){case".":gt=Tt=bt;break;case"0":gt===0&&(gt=bt),Tt=bt;break;default:if(!+tt[bt])break t;gt>0&&(gt=0);break}return gt>0?tt.slice(0,gt)+tt.slice(Tt+1):tt},Tf,qf=function(tt,St){var bt=nf(tt,St);if(!bt)return tt+"";var gt=bt[0],Tt=bt[1],Dt=Tt-(Tf=Math.max(-8,Math.min(8,Math.floor(Tt/3)))*3)+1,Yt=gt.length;return Dt===Yt?gt:Dt>Yt?gt+new Array(Dt-Yt+1).join("0"):Dt>0?gt.slice(0,Dt)+"."+gt.slice(Dt):"0."+new Array(1-Dt).join("0")+nf(tt,Math.max(0,St+Dt-1))[0]},Wc=function(tt,St){var bt=nf(tt,St);if(!bt)return tt+"";var gt=bt[0],Tt=bt[1];return Tt<0?"0."+new Array(-Tt).join("0")+gt:gt.length>Tt+1?gt.slice(0,Tt+1)+"."+gt.slice(Tt+1):gt+new Array(Tt-gt.length+2).join("0")},hf={"%":function(St,bt){return(St*100).toFixed(bt)},b:function(St){return Math.round(St).toString(2)},c:function(St){return St+""},d:Vf,e:function(St,bt){return St.toExponential(bt)},f:function(St,bt){return St.toFixed(bt)},g:function(St,bt){return St.toPrecision(bt)},o:function(St){return Math.round(St).toString(8)},p:function(St,bt){return Wc(St*100,bt)},r:Wc,s:qf,X:function(St){return Math.round(St).toString(16).toUpperCase()},x:function(St){return Math.round(St).toString(16)}},yu=function(tt){return tt},Hc=Array.prototype.map,df=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"],af=function(tt){var St=tt.grouping===void 0||tt.thousands===void 0?yu:Hf(Hc.call(tt.grouping,Number),tt.thousands+""),bt=tt.currency===void 0?"":tt.currency[0]+"",gt=tt.currency===void 0?"":tt.currency[1]+"",Tt=tt.decimal===void 0?".":tt.decimal+"",Dt=tt.numerals===void 0?yu:Yf(Hc.call(tt.numerals,String)),Yt=tt.percent===void 0?"%":tt.percent+"",pe=tt.minus===void 0?"-":tt.minus+"",Be=tt.nan===void 0?"NaN":tt.nan+"";function Qe(fr){fr=Cc(fr);var qr=fr.fill,ci=fr.align,Gi=fr.sign,zi=fr.symbol,aa=fr.zero,no=fr.width,uo=fr.comma,Ws=fr.precision,rs=fr.trim,is=fr.type;is==="n"?(uo=!0,is="g"):hf[is]||(Ws===void 0&&(Ws=12),rs=!0,is="g"),(aa||qr==="0"&&ci==="=")&&(aa=!0,qr="0",ci="=");var du=zi==="$"?bt:zi==="#"&&/[boxX]/.test(is)?"0"+is.toLowerCase():"",lo=zi==="$"?gt:/[%p]/.test(is)?Yt:"",vu=hf[is],Du=/[defgprs%]/.test(is);Ws=Ws===void 0?6:/[gprs]/.test(is)?Math.max(1,Math.min(21,Ws)):Math.max(0,Math.min(20,Ws));function ac(jo){var Zl=du,pl=lo,xf,Th,$c;if(is==="c")pl=vu(jo)+pl,jo="";else{jo=+jo;var fh=jo<0||1/jo<0;if(jo=isNaN(jo)?Be:vu(Math.abs(jo),Ws),rs&&(jo=Zf(jo)),fh&&+jo==0&&Gi!=="+"&&(fh=!1),Zl=(fh?Gi==="("?Gi:pe:Gi==="-"||Gi==="("?"":Gi)+Zl,pl=(is==="s"?df[8+Tf/3]:"")+pl+(fh&&Gi==="("?")":""),Du){for(xf=-1,Th=jo.length;++xf<Th;)if($c=jo.charCodeAt(xf),48>$c||$c>57){pl=($c===46?Tt+jo.slice(xf+1):jo.slice(xf))+pl,jo=jo.slice(0,xf);break}}}uo&&!aa&&(jo=St(jo,Infinity));var $f=Zl.length+jo.length+pl.length,lf=$f<no?new Array(no-$f+1).join(qr):"";switch(uo&&aa&&(jo=St(lf+jo,lf.length?no-pl.length:Infinity),lf=""),ci){case"<":jo=Zl+jo+pl+lf;break;case"=":jo=Zl+lf+jo+pl;break;case"^":jo=lf.slice(0,$f=lf.length>>1)+Zl+jo+pl+lf.slice($f);break;default:jo=lf+Zl+jo+pl;break}return Dt(jo)}return ac.toString=function(){return fr+""},ac}function Bn(fr,qr){var ci=Qe((fr=Cc(fr),fr.type="f",fr)),Gi=Math.max(-8,Math.min(8,Math.floor(rf(qr)/3)))*3,zi=Math.pow(10,-Gi),aa=df[8+Gi/3];return function(no){return ci(zi*no)+aa}}return{format:Qe,formatPrefix:Bn}},oc,hc,Sf;zc({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function zc(tt){return oc=af(tt),hc=oc.format,Sf=oc.formatPrefix,oc}var vf=function(tt,St){return tt=Math.abs(tt),St=Math.abs(St)-tt,Math.max(0,rf(St)-rf(tt))+1},_f=function(tt){return Math.max(0,-rf(Math.abs(tt)))},of=function(tt,St,bt,gt){var Tt=B(tt,St,bt),Dt;switch(gt=Cc(gt==null?",f":gt),gt.type){case"s":{var Yt=Math.max(Math.abs(tt),Math.abs(St));return gt.precision==null&&!isNaN(Dt=Wf(Tt,Yt))&&(gt.precision=Dt),Sf(gt,Yt)}case"":case"e":case"g":case"p":case"r":{gt.precision==null&&!isNaN(Dt=vf(Tt,Math.max(Math.abs(tt),Math.abs(St))))&&(gt.precision=Dt-(gt.type==="e"));break}case"f":case"%":{gt.precision==null&&!isNaN(Dt=_f(Tt))&&(gt.precision=Dt-(gt.type==="%")*2);break}}return hc(gt)};function jc(tt){var St=tt.domain;return tt.ticks=function(bt){var gt=St();return I(gt[0],gt[gt.length-1],bt==null?10:bt)},tt.tickFormat=function(bt,gt){var Tt=St();return of(Tt[0],Tt[Tt.length-1],bt==null?10:bt,gt)},tt.nice=function(bt){bt==null&&(bt=10);var gt=St(),Tt=0,Dt=gt.length-1,Yt=gt[Tt],pe=gt[Dt],Be;return pe<Yt&&(Be=Yt,Yt=pe,pe=Be,Be=Tt,Tt=Dt,Dt=Be),Be=w(Yt,pe,bt),Be>0?(Yt=Math.floor(Yt/Be)*Be,pe=Math.ceil(pe/Be)*Be,Be=w(Yt,pe,bt)):Be<0&&(Yt=Math.ceil(Yt*Be)/Be,pe=Math.floor(pe*Be)/Be,Be=w(Yt,pe,bt)),Be>0?(gt[Tt]=Math.floor(Yt/Be)*Be,gt[Dt]=Math.ceil(pe/Be)*Be,St(gt)):Be<0&&(gt[Tt]=Math.ceil(Yt*Be)/Be,gt[Dt]=Math.floor(pe*Be)/Be,St(gt)),tt},tt}function de(){var tt=Ef(Hl,Hl);return tt.copy=function(){return Rc(tt,de())},zn.apply(tt,arguments),jc(tt)}function ge(tt){var St;function bt(gt){return isNaN(gt=+gt)?St:gt}return bt.invert=bt,bt.domain=bt.range=function(gt){return arguments.length?(tt=os.call(gt,Yu),bt):tt.slice()},bt.unknown=function(gt){return arguments.length?(St=gt,bt):St},bt.copy=function(){return ge(tt).unknown(St)},tt=arguments.length?os.call(tt,Yu):[0,1],jc(bt)}var kt=function(tt,St){tt=tt.slice();var bt=0,gt=tt.length-1,Tt=tt[bt],Dt=tt[gt],Yt;return Dt<Tt&&(Yt=bt,bt=gt,gt=Yt,Yt=Tt,Tt=Dt,Dt=Yt),tt[bt]=St.floor(Tt),tt[gt]=St.ceil(Dt),tt};function Kt(tt){return Math.log(tt)}function Ue(tt){return Math.exp(tt)}function un(tt){return-Math.log(-tt)}function Gn(tt){return-Math.exp(-tt)}function mr(tt){return isFinite(tt)?+("1e"+tt):tt<0?0:tt}function gr(tt){return tt===10?mr:tt===Math.E?Math.exp:function(St){return Math.pow(tt,St)}}function Qr(tt){return tt===Math.E?Math.log:tt===10&&Math.log10||tt===2&&Math.log2||(tt=Math.log(tt),function(St){return Math.log(St)/tt})}function wi(tt){return function(St){return-tt(-St)}}function $i(tt){var St=tt(Kt,Ue),bt=St.domain,gt=10,Tt,Dt;function Yt(){return Tt=Qr(gt),Dt=gr(gt),bt()[0]<0?(Tt=wi(Tt),Dt=wi(Dt),tt(un,Gn)):tt(Kt,Ue),St}return St.base=function(pe){return arguments.length?(gt=+pe,Yt()):gt},St.domain=function(pe){return arguments.length?(bt(pe),Yt()):bt()},St.ticks=function(pe){var Be=bt(),Qe=Be[0],Bn=Be[Be.length-1],fr;(fr=Bn<Qe)&&(qr=Qe,Qe=Bn,Bn=qr);var qr=Tt(Qe),ci=Tt(Bn),Gi,zi,aa,no=pe==null?10:+pe,uo=[];if(!(gt%1)&&ci-qr<no){if(qr=Math.round(qr)-1,ci=Math.round(ci)+1,Qe>0){for(;qr<ci;++qr)for(zi=1,Gi=Dt(qr);zi<gt;++zi)if(aa=Gi*zi,!(aa<Qe)){if(aa>Bn)break;uo.push(aa)}}else for(;qr<ci;++qr)for(zi=gt-1,Gi=Dt(qr);zi>=1;--zi)if(aa=Gi*zi,!(aa<Qe)){if(aa>Bn)break;uo.push(aa)}}else uo=I(qr,ci,Math.min(ci-qr,no)).map(Dt);return fr?uo.reverse():uo},St.tickFormat=function(pe,Be){if(Be==null&&(Be=gt===10?".0e":","),typeof Be!="function"&&(Be=hc(Be)),pe===Infinity)return Be;pe==null&&(pe=10);var Qe=Math.max(1,gt*pe/St.ticks().length);return function(Bn){var fr=Bn/Dt(Math.round(Tt(Bn)));return fr*gt<gt-.5&&(fr*=gt),fr<=Qe?Be(Bn):""}},St.nice=function(){return bt(kt(bt(),{floor:function(Be){return Dt(Math.floor(Tt(Be)))},ceil:function(Be){return Dt(Math.ceil(Tt(Be)))}}))},St}function ha(){var tt=$i(Pf()).domain([1,10]);return tt.copy=function(){return Rc(tt,ha()).base(tt.base())},zn.apply(tt,arguments),tt}function xa(tt){return function(St){return Math.sign(St)*Math.log1p(Math.abs(St/tt))}}function ao(tt){return function(St){return Math.sign(St)*Math.expm1(Math.abs(St))*tt}}function vo(tt){var St=1,bt=tt(xa(St),ao(St));return bt.constant=function(gt){return arguments.length?tt(xa(St=+gt),ao(St)):St},jc(bt)}function ts(){var tt=vo(Pf());return tt.copy=function(){return Rc(tt,ts()).constant(tt.constant())},zn.apply(tt,arguments)}function Ho(tt){return function(St){return St<0?-Math.pow(-St,tt):Math.pow(St,tt)}}function Gs(tt){return tt<0?-Math.sqrt(-tt):Math.sqrt(tt)}function ru(tt){return tt<0?-tt*tt:tt*tt}function xu(tt){var St=tt(Hl,Hl),bt=1;function gt(){return bt===1?tt(Hl,Hl):bt===.5?tt(Gs,ru):tt(Ho(bt),Ho(1/bt))}return St.exponent=function(Tt){return arguments.length?(bt=+Tt,gt()):bt},jc(St)}function _s(){var tt=xu(Pf());return tt.copy=function(){return Rc(tt,_s()).exponent(tt.exponent())},zn.apply(tt,arguments),tt}function _u(){return _s.apply(null,arguments).exponent(.5)}function mo(){var tt=[],St=[],bt=[],gt;function Tt(){var Yt=0,pe=Math.max(1,St.length);for(bt=new Array(pe-1);++Yt<pe;)bt[Yt-1]=J(tt,Yt/pe);return Dt}function Dt(Yt){return isNaN(Yt=+Yt)?gt:St[gi(bt,Yt)]}return Dt.invertExtent=function(Yt){var pe=St.indexOf(Yt);return pe<0?[NaN,NaN]:[pe>0?bt[pe-1]:tt[0],pe<bt.length?bt[pe]:tt[tt.length-1]]},Dt.domain=function(Yt){if(!arguments.length)return tt.slice();tt=[];for(var pe=0,Be=Yt.length,Qe;pe<Be;++pe)Qe=Yt[pe],Qe!=null&&!isNaN(Qe=+Qe)&&tt.push(Qe);return tt.sort(lr),Tt()},Dt.range=function(Yt){return arguments.length?(St=Go.call(Yt),Tt()):St.slice()},Dt.unknown=function(Yt){return arguments.length?(gt=Yt,Dt):gt},Dt.quantiles=function(){return bt.slice()},Dt.copy=function(){return mo().domain(tt).range(St).unknown(gt)},zn.apply(Dt,arguments)}function fu(){var tt=0,St=1,bt=1,gt=[.5],Tt=[0,1],Dt;function Yt(Be){return Be<=Be?Tt[gi(gt,Be,0,bt)]:Dt}function pe(){var Be=-1;for(gt=new Array(bt);++Be<bt;)gt[Be]=((Be+1)*St-(Be-bt)*tt)/(bt+1);return Yt}return Yt.domain=function(Be){return arguments.length?(tt=+Be[0],St=+Be[1],pe()):[tt,St]},Yt.range=function(Be){return arguments.length?(bt=(Tt=Go.call(Be)).length-1,pe()):Tt.slice()},Yt.invertExtent=function(Be){var Qe=Tt.indexOf(Be);return Qe<0?[NaN,NaN]:Qe<1?[tt,gt[0]]:Qe>=bt?[gt[bt-1],St]:[gt[Qe-1],gt[Qe]]},Yt.unknown=function(Be){return arguments.length&&(Dt=Be),Yt},Yt.thresholds=function(){return gt.slice()},Yt.copy=function(){return fu().domain([tt,St]).range(Tt).unknown(Dt)},zn.apply(jc(Yt),arguments)}function xl(){var tt=[.5],St=[0,1],bt,gt=1;function Tt(Dt){return Dt<=Dt?St[gi(tt,Dt,0,gt)]:bt}return Tt.domain=function(Dt){return arguments.length?(tt=Go.call(Dt),gt=Math.min(tt.length,St.length-1),Tt):tt.slice()},Tt.range=function(Dt){return arguments.length?(St=Go.call(Dt),gt=Math.min(tt.length,St.length-1),Tt):St.slice()},Tt.invertExtent=function(Dt){var Yt=St.indexOf(Dt);return[tt[Yt-1],tt[Yt]]},Tt.unknown=function(Dt){return arguments.length?(bt=Dt,Tt):bt},Tt.copy=function(){return xl().domain(tt).range(St).unknown(bt)},zn.apply(Tt,arguments)}var ss=new Date,Ls=new Date;function Ka(tt,St,bt,gt){function Tt(Dt){return tt(Dt=arguments.length===0?new Date:new Date(+Dt)),Dt}return Tt.floor=function(Dt){return tt(Dt=new Date(+Dt)),Dt},Tt.ceil=function(Dt){return tt(Dt=new Date(Dt-1)),St(Dt,1),tt(Dt),Dt},Tt.round=function(Dt){var Yt=Tt(Dt),pe=Tt.ceil(Dt);return Dt-Yt<pe-Dt?Yt:pe},Tt.offset=function(Dt,Yt){return St(Dt=new Date(+Dt),Yt==null?1:Math.floor(Yt)),Dt},Tt.range=function(Dt,Yt,pe){var Be=[],Qe;if(Dt=Tt.ceil(Dt),pe=pe==null?1:Math.floor(pe),!(Dt<Yt)||!(pe>0))return Be;do Be.push(Qe=new Date(+Dt)),St(Dt,pe),tt(Dt);while(Qe<Dt&&Dt<Yt);return Be},Tt.filter=function(Dt){return Ka(function(Yt){if(Yt>=Yt)for(;tt(Yt),!Dt(Yt);)Yt.setTime(Yt-1)},function(Yt,pe){if(Yt>=Yt)if(pe<0)for(;++pe<=0;)for(;St(Yt,-1),!Dt(Yt););else for(;--pe>=0;)for(;St(Yt,1),!Dt(Yt););})},bt&&(Tt.count=function(Dt,Yt){return ss.setTime(+Dt),Ls.setTime(+Yt),tt(ss),tt(Ls),Math.floor(bt(ss,Ls))},Tt.every=function(Dt){return Dt=Math.floor(Dt),!isFinite(Dt)||!(Dt>0)?null:Dt>1?Tt.filter(gt?function(Yt){return gt(Yt)%Dt==0}:function(Yt){return Tt.count(0,Yt)%Dt==0}):Tt}),Tt}var Zu=Ka(function(tt){tt.setMonth(0,1),tt.setHours(0,0,0,0)},function(tt,St){tt.setFullYear(tt.getFullYear()+St)},function(tt,St){return St.getFullYear()-tt.getFullYear()},function(tt){return tt.getFullYear()});Zu.every=function(tt){return!isFinite(tt=Math.floor(tt))||!(tt>0)?null:Ka(function(St){St.setFullYear(Math.floor(St.getFullYear()/tt)*tt),St.setMonth(0,1),St.setHours(0,0,0,0)},function(St,bt){St.setFullYear(St.getFullYear()+bt*tt)})};var Yc=Zu,pf=Zu.range,dh=Ka(function(tt){tt.setDate(1),tt.setHours(0,0,0,0)},function(tt,St){tt.setMonth(tt.getMonth()+St)},function(tt,St){return St.getMonth()-tt.getMonth()+(St.getFullYear()-tt.getFullYear())*12},function(tt){return tt.getMonth()}),Rf=dh,bc=dh.range,Kf=1e3,gf=6e4,Xf=36e5,jt=864e5,yt=6048e5;function Q(tt){return Ka(function(St){St.setDate(St.getDate()-(St.getDay()+7-tt)%7),St.setHours(0,0,0,0)},function(St,bt){St.setDate(St.getDate()+bt*7)},function(St,bt){return(bt-St-(bt.getTimezoneOffset()-St.getTimezoneOffset())*gf)/yt})}var xt=Q(0),wt=Q(1),ae=Q(2),ke=Q(3),gn=Q(4),pn=Q(5),On=Q(6),ne=xt.range,Me=wt.range,Ze=ae.range,In=ke.range,ir=gn.range,or=pn.range,sr=On.range,wr=Ka(function(tt){tt.setHours(0,0,0,0)},function(tt,St){tt.setDate(tt.getDate()+St)},function(tt,St){return(St-tt-(St.getTimezoneOffset()-tt.getTimezoneOffset())*gf)/jt},function(tt){return tt.getDate()-1}),ni=wr,Yr=wr.range,ei=Ka(function(tt){tt.setTime(tt-tt.getMilliseconds()-tt.getSeconds()*Kf-tt.getMinutes()*gf)},function(tt,St){tt.setTime(+tt+St*Xf)},function(tt,St){return(St-tt)/Xf},function(tt){return tt.getHours()}),hi=ei,Ai=ei.range,di=Ka(function(tt){tt.setTime(tt-tt.getMilliseconds()-tt.getSeconds()*Kf)},function(tt,St){tt.setTime(+tt+St*gf)},function(tt,St){return(St-tt)/gf},function(tt){return tt.getMinutes()}),ai=di,Ir=di.range,Mr=Ka(function(tt){tt.setTime(tt-tt.getMilliseconds())},function(tt,St){tt.setTime(+tt+St*Kf)},function(tt,St){return(St-tt)/Kf},function(tt){return tt.getUTCSeconds()}),vi=Mr,Vi=Mr.range,$r=Ka(function(){},function(tt,St){tt.setTime(+tt+St)},function(tt,St){return St-tt});$r.every=function(tt){return tt=Math.floor(tt),!isFinite(tt)||!(tt>0)?null:tt>1?Ka(function(St){St.setTime(Math.floor(St/tt)*tt)},function(St,bt){St.setTime(+St+bt*tt)},function(St,bt){return(bt-St)/tt}):$r};var ra=$r,Ci=$r.range;function Ei(tt){return Ka(function(St){St.setUTCDate(St.getUTCDate()-(St.getUTCDay()+7-tt)%7),St.setUTCHours(0,0,0,0)},function(St,bt){St.setUTCDate(St.getUTCDate()+bt*7)},function(St,bt){return(bt-St)/yt})}var xi=Ei(0),Oi=Ei(1),oa=Ei(2),Sa=Ei(3),Di=Ei(4),_i=Ei(5),mi=Ei(6),za=xi.range,ia=Oi.range,Ki=oa.range,Oo=Sa.range,so=Di.range,Do=_i.range,Ms=mi.range,bl=Ka(function(tt){tt.setUTCHours(0,0,0,0)},function(tt,St){tt.setUTCDate(tt.getUTCDate()+St)},function(tt,St){return(St-tt)/jt},function(tt){return tt.getUTCDate()-1}),Xl=bl,Zo=bl.range,Ku=Ka(function(tt){tt.setUTCMonth(0,1),tt.setUTCHours(0,0,0,0)},function(tt,St){tt.setUTCFullYear(tt.getUTCFullYear()+St)},function(tt,St){return St.getUTCFullYear()-tt.getUTCFullYear()},function(tt){return tt.getUTCFullYear()});Ku.every=function(tt){return!isFinite(tt=Math.floor(tt))||!(tt>0)?null:Ka(function(St){St.setUTCFullYear(Math.floor(St.getUTCFullYear()/tt)*tt),St.setUTCMonth(0,1),St.setUTCHours(0,0,0,0)},function(St,bt){St.setUTCFullYear(St.getUTCFullYear()+bt*tt)})};var Ks=Ku,Jl=Ku.range;function Ll(tt){if(0<=tt.y&&tt.y<100){var St=new Date(-1,tt.m,tt.d,tt.H,tt.M,tt.S,tt.L);return St.setFullYear(tt.y),St}return new Date(tt.y,tt.m,tt.d,tt.H,tt.M,tt.S,tt.L)}function Yl(tt){if(0<=tt.y&&tt.y<100){var St=new Date(Date.UTC(-1,tt.m,tt.d,tt.H,tt.M,tt.S,tt.L));return St.setUTCFullYear(tt.y),St}return new Date(Date.UTC(tt.y,tt.m,tt.d,tt.H,tt.M,tt.S,tt.L))}function Rl(tt,St,bt){return{y:tt,m:St,d:bt,H:0,M:0,S:0,L:0}}function dc(tt){var St=tt.dateTime,bt=tt.date,gt=tt.time,Tt=tt.periods,Dt=tt.days,Yt=tt.shortDays,pe=tt.months,Be=tt.shortMonths,Qe=zo(Tt),Bn=Dl(Tt),fr=zo(Dt),qr=Dl(Dt),ci=zo(Yt),Gi=Dl(Yt),zi=zo(pe),aa=Dl(pe),no=zo(Be),uo=Dl(Be),Ws={a:fh,A:$f,b:lf,B:dd,c:null,d:li,e:li,f:Lo,g:th,G:Hh,H:Hr,I:ii,j:Ri,L:da,m:ca,M:Va,p:rd,q:vd,Q:Qh,s:ld,S:yo,u:Rs,U:jl,V:vh,w:Zc,W:Ah,x:null,X:null,y:Jc,Y:eh,Z:ph,"%":$h},rs={a:pd,A:id,b:gd,B:Dh,c:null,d:Yh,e:Yh,f:od,g:Bh,G:gh,H:nc,I:il,j:ad,L:Zh,m:sd,M:ud,p:md,q:Wh,Q:Qh,s:ld,S:Kh,u:nh,U:rh,V:rc,w:Ch,W:Df,x:null,X:null,y:jh,Y:Jh,Z:jf,"%":$h},is={a:ac,A:jo,b:Zl,B:pl,c:xf,d:Or,e:Or,f:Qn,g:wo,G:ta,H:ur,I:ur,j:Dr,L:Tn,m:er,M:ar,p:Du,q:sn,Q:Tr,s:jr,S:Sr,u:mf,U:Dn,V:Zr,w:Sc,W:Ur,x:Th,X:$c,y:wo,Y:ta,Z:Sn,"%":xn};Ws.x=du(bt,Ws),Ws.X=du(gt,Ws),Ws.c=du(St,Ws),rs.x=du(bt,rs),rs.X=du(gt,rs),rs.c=du(St,rs);function du(Po,Js){return function(us){var qi=[],Qc=-1,Fl=0,cf=Po.length,ff,hh,yd;for(us instanceof Date||(us=new Date(+us));++Qc<cf;)Po.charCodeAt(Qc)===37&&(qi.push(Po.slice(Fl,Qc)),(hh=El[ff=Po.charAt(++Qc)])!=null?ff=Po.charAt(++Qc):hh=ff==="e"?" ":"0",(yd=Js[ff])&&(ff=yd(us,hh)),qi.push(ff),Fl=Qc+1);return qi.push(Po.slice(Fl,Qc)),qi.join("")}}function lo(Po,Js){return function(us){var qi=Rl(1900,void 0,1),Qc=vu(qi,Po,us+="",0),Fl,cf;if(Qc!=us.length)return null;if("Q"in qi)return new Date(qi.Q);if("s"in qi)return new Date(qi.s*1e3+("L"in qi?qi.L:0));if(Js&&!("Z"in qi)&&(qi.Z=0),"p"in qi&&(qi.H=qi.H%12+qi.p*12),qi.m===void 0&&(qi.m="q"in qi?qi.q:0),"V"in qi){if(qi.V<1||qi.V>53)return null;"w"in qi||(qi.w=1),"Z"in qi?(Fl=Yl(Rl(qi.y,0,1)),cf=Fl.getUTCDay(),Fl=cf>4||cf===0?Oi.ceil(Fl):Oi(Fl),Fl=Xl.offset(Fl,(qi.V-1)*7),qi.y=Fl.getUTCFullYear(),qi.m=Fl.getUTCMonth(),qi.d=Fl.getUTCDate()+(qi.w+6)%7):(Fl=Ll(Rl(qi.y,0,1)),cf=Fl.getDay(),Fl=cf>4||cf===0?wt.ceil(Fl):wt(Fl),Fl=ni.offset(Fl,(qi.V-1)*7),qi.y=Fl.getFullYear(),qi.m=Fl.getMonth(),qi.d=Fl.getDate()+(qi.w+6)%7)}else("W"in qi||"U"in qi)&&("w"in qi||(qi.w="u"in qi?qi.u%7:"W"in qi?1:0),cf="Z"in qi?Yl(Rl(qi.y,0,1)).getUTCDay():Ll(Rl(qi.y,0,1)).getDay(),qi.m=0,qi.d="W"in qi?(qi.w+6)%7+qi.W*7-(cf+5)%7:qi.w+qi.U*7-(cf+6)%7);return"Z"in qi?(qi.H+=qi.Z/100|0,qi.M+=qi.Z%100,Yl(qi)):Ll(qi)}}function vu(Po,Js,us,qi){for(var Qc=0,Fl=Js.length,cf=us.length,ff,hh;Qc<Fl;){if(qi>=cf)return-1;if(ff=Js.charCodeAt(Qc++),ff===37){if(ff=Js.charAt(Qc++),hh=is[ff in El?Js.charAt(Qc++):ff],!hh||(qi=hh(Po,us,qi))<0)return-1}else if(ff!=us.charCodeAt(qi++))return-1}return qi}function Du(Po,Js,us){var qi=Qe.exec(Js.slice(us));return qi?(Po.p=Bn[qi[0].toLowerCase()],us+qi[0].length):-1}function ac(Po,Js,us){var qi=ci.exec(Js.slice(us));return qi?(Po.w=Gi[qi[0].toLowerCase()],us+qi[0].length):-1}function jo(Po,Js,us){var qi=fr.exec(Js.slice(us));return qi?(Po.w=qr[qi[0].toLowerCase()],us+qi[0].length):-1}function Zl(Po,Js,us){var qi=no.exec(Js.slice(us));return qi?(Po.m=uo[qi[0].toLowerCase()],us+qi[0].length):-1}function pl(Po,Js,us){var qi=zi.exec(Js.slice(us));return qi?(Po.m=aa[qi[0].toLowerCase()],us+qi[0].length):-1}function xf(Po,Js,us){return vu(Po,St,Js,us)}function Th(Po,Js,us){return vu(Po,bt,Js,us)}function $c(Po,Js,us){return vu(Po,gt,Js,us)}function fh(Po){return Yt[Po.getDay()]}function $f(Po){return Dt[Po.getDay()]}function lf(Po){return Be[Po.getMonth()]}function dd(Po){return pe[Po.getMonth()]}function rd(Po){return Tt[+(Po.getHours()>=12)]}function vd(Po){return 1+~~(Po.getMonth()/3)}function pd(Po){return Yt[Po.getUTCDay()]}function id(Po){return Dt[Po.getUTCDay()]}function gd(Po){return Be[Po.getUTCMonth()]}function Dh(Po){return pe[Po.getUTCMonth()]}function md(Po){return Tt[+(Po.getUTCHours()>=12)]}function Wh(Po){return 1+~~(Po.getUTCMonth()/3)}return{format:function(Js){var us=du(Js+="",Ws);return us.toString=function(){return Js},us},parse:function(Js){var us=lo(Js+="",!1);return us.toString=function(){return Js},us},utcFormat:function(Js){var us=du(Js+="",rs);return us.toString=function(){return Js},us},utcParse:function(Js){var us=lo(Js+="",!0);return us.toString=function(){return Js},us}}}var El={"-":"",_:" ","0":"0"},Ca=/^\s*\d+/,Ec=/^%/,Vs=/[\\^$*+?|[\]().{}]/g;function Xi(tt,St,bt){var gt=tt<0?"-":"",Tt=(gt?-tt:tt)+"",Dt=Tt.length;return gt+(Dt<bt?new Array(bt-Dt+1).join(St)+Tt:Tt)}function Mo(tt){return tt.replace(Vs,"\\$&")}function zo(tt){return new RegExp("^(?:"+tt.map(Mo).join("|")+")","i")}function Dl(tt){for(var St={},bt=-1,gt=tt.length;++bt<gt;)St[tt[bt].toLowerCase()]=bt;return St}function Sc(tt,St,bt){var gt=Ca.exec(St.slice(bt,bt+1));return gt?(tt.w=+gt[0],bt+gt[0].length):-1}function mf(tt,St,bt){var gt=Ca.exec(St.slice(bt,bt+1));return gt?(tt.u=+gt[0],bt+gt[0].length):-1}function Dn(tt,St,bt){var gt=Ca.exec(St.slice(bt,bt+2));return gt?(tt.U=+gt[0],bt+gt[0].length):-1}function Zr(tt,St,bt){var gt=Ca.exec(St.slice(bt,bt+2));return gt?(tt.V=+gt[0],bt+gt[0].length):-1}function Ur(tt,St,bt){var gt=Ca.exec(St.slice(bt,bt+2));return gt?(tt.W=+gt[0],bt+gt[0].length):-1}function ta(tt,St,bt){var gt=Ca.exec(St.slice(bt,bt+4));return gt?(tt.y=+gt[0],bt+gt[0].length):-1}function wo(tt,St,bt){var gt=Ca.exec(St.slice(bt,bt+2));return gt?(tt.y=+gt[0]+(+gt[0]>68?1900:2e3),bt+gt[0].length):-1}function Sn(tt,St,bt){var gt=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(St.slice(bt,bt+6));return gt?(tt.Z=gt[1]?0:-(gt[2]+(gt[3]||"00")),bt+gt[0].length):-1}function sn(tt,St,bt){var gt=Ca.exec(St.slice(bt,bt+1));return gt?(tt.q=gt[0]*3-3,bt+gt[0].length):-1}function er(tt,St,bt){var gt=Ca.exec(St.slice(bt,bt+2));return gt?(tt.m=gt[0]-1,bt+gt[0].length):-1}function Or(tt,St,bt){var gt=Ca.exec(St.slice(bt,bt+2));return gt?(tt.d=+gt[0],bt+gt[0].length):-1}function Dr(tt,St,bt){var gt=Ca.exec(St.slice(bt,bt+3));return gt?(tt.m=0,tt.d=+gt[0],bt+gt[0].length):-1}function ur(tt,St,bt){var gt=Ca.exec(St.slice(bt,bt+2));return gt?(tt.H=+gt[0],bt+gt[0].length):-1}function ar(tt,St,bt){var gt=Ca.exec(St.slice(bt,bt+2));return gt?(tt.M=+gt[0],bt+gt[0].length):-1}function Sr(tt,St,bt){var gt=Ca.exec(St.slice(bt,bt+2));return gt?(tt.S=+gt[0],bt+gt[0].length):-1}function Tn(tt,St,bt){var gt=Ca.exec(St.slice(bt,bt+3));return gt?(tt.L=+gt[0],bt+gt[0].length):-1}function Qn(tt,St,bt){var gt=Ca.exec(St.slice(bt,bt+6));return gt?(tt.L=Math.floor(gt[0]/1e3),bt+gt[0].length):-1}function xn(tt,St,bt){var gt=Ec.exec(St.slice(bt,bt+1));return gt?bt+gt[0].length:-1}function Tr(tt,St,bt){var gt=Ca.exec(St.slice(bt));return gt?(tt.Q=+gt[0],bt+gt[0].length):-1}function jr(tt,St,bt){var gt=Ca.exec(St.slice(bt));return gt?(tt.s=+gt[0],bt+gt[0].length):-1}function li(tt,St){return Xi(tt.getDate(),St,2)}function Hr(tt,St){return Xi(tt.getHours(),St,2)}function ii(tt,St){return Xi(tt.getHours()%12||12,St,2)}function Ri(tt,St){return Xi(1+ni.count(Yc(tt),tt),St,3)}function da(tt,St){return Xi(tt.getMilliseconds(),St,3)}function Lo(tt,St){return da(tt,St)+"000"}function ca(tt,St){return Xi(tt.getMonth()+1,St,2)}function Va(tt,St){return Xi(tt.getMinutes(),St,2)}function yo(tt,St){return Xi(tt.getSeconds(),St,2)}function Rs(tt){var St=tt.getDay();return St===0?7:St}function jl(tt,St){return Xi(xt.count(Yc(tt)-1,tt),St,2)}function Dc(tt){var St=tt.getDay();return St>=4||St===0?gn(tt):gn.ceil(tt)}function vh(tt,St){return tt=Dc(tt),Xi(gn.count(Yc(tt),tt)+(Yc(tt).getDay()===4),St,2)}function Zc(tt){return tt.getDay()}function Ah(tt,St){return Xi(wt.count(Yc(tt)-1,tt),St,2)}function Jc(tt,St){return Xi(tt.getFullYear()%100,St,2)}function th(tt,St){return tt=Dc(tt),Xi(tt.getFullYear()%100,St,2)}function eh(tt,St){return Xi(tt.getFullYear()%1e4,St,4)}function Hh(tt,St){var bt=tt.getDay();return tt=bt>=4||bt===0?gn(tt):gn.ceil(tt),Xi(tt.getFullYear()%1e4,St,4)}function ph(tt){var St=tt.getTimezoneOffset();return(St>0?"-":(St*=-1,"+"))+Xi(St/60|0,"0",2)+Xi(St%60,"0",2)}function Yh(tt,St){return Xi(tt.getUTCDate(),St,2)}function nc(tt,St){return Xi(tt.getUTCHours(),St,2)}function il(tt,St){return Xi(tt.getUTCHours()%12||12,St,2)}function ad(tt,St){return Xi(1+Xl.count(Ks(tt),tt),St,3)}function Zh(tt,St){return Xi(tt.getUTCMilliseconds(),St,3)}function od(tt,St){return Zh(tt,St)+"000"}function sd(tt,St){return Xi(tt.getUTCMonth()+1,St,2)}function ud(tt,St){return Xi(tt.getUTCMinutes(),St,2)}function Kh(tt,St){return Xi(tt.getUTCSeconds(),St,2)}function nh(tt){var St=tt.getUTCDay();return St===0?7:St}function rh(tt,St){return Xi(xi.count(Ks(tt)-1,tt),St,2)}function Xh(tt){var St=tt.getUTCDay();return St>=4||St===0?Di(tt):Di.ceil(tt)}function rc(tt,St){return tt=Xh(tt),Xi(Di.count(Ks(tt),tt)+(Ks(tt).getUTCDay()===4),St,2)}function Ch(tt){return tt.getUTCDay()}function Df(tt,St){return Xi(Oi.count(Ks(tt)-1,tt),St,2)}function jh(tt,St){return Xi(tt.getUTCFullYear()%100,St,2)}function Bh(tt,St){return tt=Xh(tt),Xi(tt.getUTCFullYear()%100,St,2)}function Jh(tt,St){return Xi(tt.getUTCFullYear()%1e4,St,4)}function gh(tt,St){var bt=tt.getUTCDay();return tt=bt>=4||bt===0?Di(tt):Di.ceil(tt),Xi(tt.getUTCFullYear()%1e4,St,4)}function jf(){return"+0000"}function $h(){return"%"}function Qh(tt){return+tt}function ld(tt){return Math.floor(+tt/1e3)}var Bl,Bf,cd,d,p;C({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function C(tt){return Bl=dc(tt),Bf=Bl.format,cd=Bl.parse,d=Bl.utcFormat,p=Bl.utcParse,Bl}var N=1e3,X=N*60,lt=X*60,Pt=lt*24,Bt=Pt*7,Xt=Pt*30,he=Pt*365;function Re(tt){return new Date(tt)}function Ge(tt){return tt instanceof Date?+tt:+new Date(+tt)}function He(tt,St,bt,gt,Tt,Dt,Yt,pe,Be){var Qe=Ef(Hl,Hl),Bn=Qe.invert,fr=Qe.domain,qr=Be(".%L"),ci=Be(":%S"),Gi=Be("%I:%M"),zi=Be("%I %p"),aa=Be("%a %d"),no=Be("%b %d"),uo=Be("%B"),Ws=Be("%Y"),rs=[[Yt,1,N],[Yt,5,5*N],[Yt,15,15*N],[Yt,30,30*N],[Dt,1,X],[Dt,5,5*X],[Dt,15,15*X],[Dt,30,30*X],[Tt,1,lt],[Tt,3,3*lt],[Tt,6,6*lt],[Tt,12,12*lt],[gt,1,Pt],[gt,2,2*Pt],[bt,1,Bt],[St,1,Xt],[St,3,3*Xt],[tt,1,he]];function is(lo){return(Yt(lo)<lo?qr:Dt(lo)<lo?ci:Tt(lo)<lo?Gi:gt(lo)<lo?zi:St(lo)<lo?bt(lo)<lo?aa:no:tt(lo)<lo?uo:Ws)(lo)}function du(lo,vu,Du,ac){if(lo==null&&(lo=10),typeof lo=="number"){var jo=Math.abs(Du-vu)/lo,Zl=xr(function(pl){return pl[2]}).right(rs,jo);Zl===rs.length?(ac=B(vu/he,Du/he,lo),lo=tt):Zl?(Zl=rs[jo/rs[Zl-1][2]<rs[Zl][2]/jo?Zl-1:Zl],ac=Zl[1],lo=Zl[0]):(ac=Math.max(B(vu,Du,lo),1),lo=pe)}return ac==null?lo:lo.every(ac)}return Qe.invert=function(lo){return new Date(Bn(lo))},Qe.domain=function(lo){return arguments.length?fr(os.call(lo,Ge)):fr().map(Re)},Qe.ticks=function(lo,vu){var Du=fr(),ac=Du[0],jo=Du[Du.length-1],Zl=jo<ac,pl;return Zl&&(pl=ac,ac=jo,jo=pl),pl=du(lo,ac,jo,vu),pl=pl?pl.range(ac,jo+1):[],Zl?pl.reverse():pl},Qe.tickFormat=function(lo,vu){return vu==null?is:Be(vu)},Qe.nice=function(lo,vu){var Du=fr();return(lo=du(lo,Du[0],Du[Du.length-1],vu))?fr(kt(Du,lo)):Qe},Qe.copy=function(){return Rc(Qe,He(tt,St,bt,gt,Tt,Dt,Yt,pe,Be))},Qe}var cn=function(){return zn.apply(He(Yc,Rf,xt,ni,hi,ai,vi,ra,Bf).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},Rn=Ka(function(tt){tt.setUTCDate(1),tt.setUTCHours(0,0,0,0)},function(tt,St){tt.setUTCMonth(tt.getUTCMonth()+St)},function(tt,St){return St.getUTCMonth()-tt.getUTCMonth()+(St.getUTCFullYear()-tt.getUTCFullYear())*12},function(tt){return tt.getUTCMonth()}),Cn=Rn,$n=Rn.range,Xn=Ka(function(tt){tt.setUTCMinutes(0,0,0)},function(tt,St){tt.setTime(+tt+St*Xf)},function(tt,St){return(St-tt)/Xf},function(tt){return tt.getUTCHours()}),_r=Xn,Nr=Xn.range,Gr=Ka(function(tt){tt.setUTCSeconds(0,0)},function(tt,St){tt.setTime(+tt+St*gf)},function(tt,St){return(St-tt)/gf},function(tt){return tt.getUTCMinutes()}),pi=Gr,oi=Gr.range,Ni=function(){return zn.apply(He(Ks,Cn,xi,Xl,_r,pi,vi,ra,d).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)};function Bi(){var tt=0,St=1,bt,gt,Tt,Dt,Yt=Hl,pe=!1,Be;function Qe(Bn){return isNaN(Bn=+Bn)?Be:Yt(Tt===0?.5:(Bn=(Dt(Bn)-bt)*Tt,pe?Math.max(0,Math.min(1,Bn)):Bn))}return Qe.domain=function(Bn){return arguments.length?(bt=Dt(tt=+Bn[0]),gt=Dt(St=+Bn[1]),Tt=bt===gt?0:1/(gt-bt),Qe):[tt,St]},Qe.clamp=function(Bn){return arguments.length?(pe=!!Bn,Qe):pe},Qe.interpolator=function(Bn){return arguments.length?(Yt=Bn,Qe):Yt},Qe.unknown=function(Bn){return arguments.length?(Be=Bn,Qe):Be},function(Bn){return Dt=Bn,bt=Bn(tt),gt=Bn(St),Tt=bt===gt?0:1/(gt-bt),Qe}}function Qi(tt,St){return St.domain(tt.domain()).interpolator(tt.interpolator()).clamp(tt.clamp()).unknown(tt.unknown())}function pa(){var tt=jc(Bi()(Hl));return tt.copy=function(){return Qi(tt,pa())},cr.apply(tt,arguments)}function fa(){var tt=$i(Bi()).domain([1,10]);return tt.copy=function(){return Qi(tt,fa()).base(tt.base())},cr.apply(tt,arguments)}function na(){var tt=vo(Bi());return tt.copy=function(){return Qi(tt,na()).constant(tt.constant())},cr.apply(tt,arguments)}function eo(){var tt=xu(Bi());return tt.copy=function(){return Qi(tt,eo()).exponent(tt.exponent())},cr.apply(tt,arguments)}function Ia(){return eo.apply(null,arguments).exponent(.5)}function ga(){var tt=[],St=Hl;function bt(gt){if(!isNaN(gt=+gt))return St((gi(tt,gt)-1)/(tt.length-1))}return bt.domain=function(gt){if(!arguments.length)return tt.slice();tt=[];for(var Tt=0,Dt=gt.length,Yt;Tt<Dt;++Tt)Yt=gt[Tt],Yt!=null&&!isNaN(Yt=+Yt)&&tt.push(Yt);return tt.sort(lr),bt},bt.interpolator=function(gt){return arguments.length?(St=gt,bt):St},bt.copy=function(){return ga(St).domain(tt)},cr.apply(bt,arguments)}function Uo(){var tt=0,St=.5,bt=1,gt,Tt,Dt,Yt,pe,Be=Hl,Qe,Bn=!1,fr;function qr(ci){return isNaN(ci=+ci)?fr:(ci=.5+((ci=+Qe(ci))-Tt)*(ci<Tt?Yt:pe),Be(Bn?Math.max(0,Math.min(1,ci)):ci))}return qr.domain=function(ci){return arguments.length?(gt=Qe(tt=+ci[0]),Tt=Qe(St=+ci[1]),Dt=Qe(bt=+ci[2]),Yt=gt===Tt?0:.5/(Tt-gt),pe=Tt===Dt?0:.5/(Dt-Tt),qr):[tt,St,bt]},qr.clamp=function(ci){return arguments.length?(Bn=!!ci,qr):Bn},qr.interpolator=function(ci){return arguments.length?(Be=ci,qr):Be},qr.unknown=function(ci){return arguments.length?(fr=ci,qr):fr},function(ci){return Qe=ci,gt=ci(tt),Tt=ci(St),Dt=ci(bt),Yt=gt===Tt?0:.5/(Tt-gt),pe=Tt===Dt?0:.5/(Dt-Tt),qr}}function xo(){var tt=jc(Uo()(Hl));return tt.copy=function(){return Qi(tt,xo())},cr.apply(tt,arguments)}function Xs(){var tt=$i(Uo()).domain([.1,1,10]);return tt.copy=function(){return Qi(tt,Xs()).base(tt.base())},cr.apply(tt,arguments)}function Xa(){var tt=vo(Uo());return tt.copy=function(){return Qi(tt,Xa()).constant(tt.constant())},cr.apply(tt,arguments)}function es(){var tt=xu(Uo());return tt.copy=function(){return Qi(tt,es()).exponent(tt.exponent())},cr.apply(tt,arguments)}function al(){return es.apply(null,arguments).exponent(.5)}var Ps,ol,sl,Sl,vc,_l,Oc,sc,wc,uc=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]?)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/,ic=(Ps={},u()(Ps,U.ScaleTypes.LINEAR,de),u()(Ps,U.ScaleTypes.POWER,_s),u()(Ps,U.ScaleTypes.LOG,ha),u()(Ps,U.ScaleTypes.IDENTITY,ge),u()(Ps,U.ScaleTypes.TIME,cn),u()(Ps,U.ScaleTypes.QUANTILE,mo),u()(Ps,U.ScaleTypes.QUANTIZE,fu),u()(Ps,U.ScaleTypes.THRESHOLD,xl),u()(Ps,U.ScaleTypes.CAT,Yo),Ps),lc=(ol=Object(Z.injectable)(),sl=Object(Z.inject)(U.TYPES.IGlobalConfigService),Sl=Object(Z.inject)(U.TYPES.ILogService),ol(vc=(_l=(wc=function(){function tt(){T()(this,tt),v()(this,"configService",Oc,this),v()(this,"logger",sc,this),this.scaleCache={},this.scaleOptions={}}return t()(tt,[{key:"apply",value:function(bt,gt){var Tt=this,Dt=gt.styleAttributeService;bt.hooks.init.tap("FeatureScalePlugin",function(){Tt.scaleOptions=bt.getScaleOptions();var Yt=Dt.getLayerStyleAttributes(),pe=bt.getSource().data.dataArray;pe.length!==0&&Tt.caculateScalesForAttributes(Yt||[],pe)}),bt.hooks.beforeRenderData.tap("FeatureScalePlugin",function(){Tt.scaleOptions=bt.getScaleOptions();var Yt=Dt.getLayerStyleAttributes(),pe=bt.getSource().data.dataArray;return Tt.caculateScalesForAttributes(Yt||[],pe),bt.layerModelNeedUpdate=!0,!0}),bt.hooks.beforeRender.tap("FeatureScalePlugin",function(){if(!bt.layerModelNeedUpdate){Tt.scaleOptions=bt.getScaleOptions();var Yt=Dt.getLayerStyleAttributes();if(Yt){var pe=bt.getSource().data.dataArray;if(pe.length===0)return;var Be=Yt.filter(function(Qe){return Qe.needRescale});Be.length&&(Tt.caculateScalesForAttributes(Be,pe),Tt.logger.debug("rescale finished"))}}})}},{key:"isNumber",value:function(bt){return!isNaN(parseFloat(bt))&&isFinite(bt)}},{key:"caculateScalesForAttributes",value:function(bt,gt){var Tt=this;this.scaleCache={},bt.forEach(function(Dt){if(Dt.scale){var Yt=Dt.scale,pe=Dt.name;Yt.names=Tt.parseFields(Dt.scale.field||[]);var Be=[];Yt.names.forEach(function(Qe){Be.push(Tt.getOrCreateScale(Qe,Dt,gt))}),Be.some(function(Qe){return Qe.type===U.StyleScaleType.VARIABLE})?(Yt.type=U.StyleScaleType.VARIABLE,Be.forEach(function(Qe){if(!Yt.callback){var Bn;if(Yt.values&&Yt.values!=="text"){var fr;if(((fr=Qe.option)===null||fr===void 0?void 0:fr.type)==="linear"&&Yt.values.length>2){var qr=Qe.scale.ticks(Yt.values.length);pe==="color"&&Qe.scale.domain(qr)}Qe.scale.range(Yt.values)}else((Bn=Qe.option)===null||Bn===void 0?void 0:Bn.type)==="cat"&&Qe.scale.range(Qe.option.domain)}})):(Yt.type=U.StyleScaleType.CONSTANT,Yt.defaultValues=Be.map(function(Qe,Bn){return Qe.scale(Yt.names[Bn])})),Yt.scalers=Be.map(function(Qe){return{field:Qe.field,func:Qe.scale,option:Qe.option}}),Dt.needRescale=!1}})}},{key:"getOrCreateScale",value:function(bt,gt,Tt){var Dt,Yt=[bt,gt.name].join("_"),pe=(Dt=gt.scale)===null||Dt===void 0?void 0:Dt.values,Be=this.createScale(bt,gt.name,pe,Tt);return Be}},{key:"parseFields",value:function(bt){return Array.isArray(bt)?bt:Vn()(bt)?bt.split("*"):[bt]}},{key:"createScale",value:function(bt,gt,Tt,Dt){var Yt,pe=this.scaleOptions[gt]&&this.scaleOptions[gt].field===bt?this.scaleOptions[gt]:this.scaleOptions[bt],Be={field:bt,scale:void 0,type:U.StyleScaleType.VARIABLE,option:pe};if(!Dt||!Dt.length)return pe&&pe.type?Be.scale=this.createDefaultScale(pe):(Be.scale=Yo([bt]),Be.type=U.StyleScaleType.CONSTANT),Be;var Qe=(Yt=Dt.find(function(qr){return!Wn()(qr[bt])}))===null||Yt===void 0?void 0:Yt[bt];if(this.isNumber(bt)||Wn()(Qe)&&!pe)Be.scale=Yo([bt]),Be.type=U.StyleScaleType.CONSTANT;else{var Bn=pe&&pe.type||this.getDefaultType(Qe);Tt==="text"&&(Bn=U.ScaleTypes.CAT);var fr=this.createDefaultScaleConfig(Bn,bt,Dt);Object.assign(fr,pe),Be.scale=this.createDefaultScale(fr),Be.option=fr}return Be}},{key:"getDefaultType",value:function(bt){var gt=U.ScaleTypes.LINEAR;return typeof bt=="string"&&(gt=uc.test(bt)?U.ScaleTypes.TIME:U.ScaleTypes.CAT),gt}},{key:"createDefaultScaleConfig",value:function(bt,gt,Tt){var Dt={type:bt},Yt=(Tt==null?void 0:Tt.map(function(pe){return pe[gt]}))||[];return bt!==U.ScaleTypes.CAT&&bt!==U.ScaleTypes.QUANTILE?Dt.domain=Ga(Yt):bt===U.ScaleTypes.CAT?Dt.domain=hn()(Yt):bt===U.ScaleTypes.QUANTILE&&(Dt.domain=Yt),Dt}},{key:"createDefaultScale",value:function(bt){var gt=bt.type,Tt=bt.domain,Dt=ic[gt]();return Tt&&Dt.domain(Tt),Dt}}]),tt}(),wc),Oc=_()(_l.prototype,"configService",[sl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sc=_()(_l.prototype,"logger",[Sl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_l))||vc),ys,ns,hu,Mu,pc,Ru,ul,_c;function hs(tt,St){var bt=Object.keys(tt);if(Object.getOwnPropertySymbols){var gt=Object.getOwnPropertySymbols(tt);St&&(gt=gt.filter(function(Tt){return Object.getOwnPropertyDescriptor(tt,Tt).enumerable})),bt.push.apply(bt,gt)}return bt}function Nf(tt){for(var St=1;St<arguments.length;St++){var bt=arguments[St]!=null?arguments[St]:{};St%2?hs(Object(bt),!0).forEach(function(gt){u()(tt,gt,bt[gt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tt,Object.getOwnPropertyDescriptors(bt)):hs(Object(bt)).forEach(function(gt){Object.defineProperty(tt,gt,Object.getOwnPropertyDescriptor(bt,gt))})}return tt}var sf=(ys=Object(Z.injectable)(),ns=Object(Z.inject)(U.TYPES.ICameraService),hu=Object(Z.inject)(U.TYPES.IRendererService),ys(Mu=(pc=(_c=function(){function tt(){T()(this,tt),v()(this,"cameraService",Ru,this),v()(this,"rendererService",ul,this)}return t()(tt,[{key:"apply",value:function(bt){bt.hooks.beforeRender.tap("LayerAnimateStylePlugin",function(){bt.models.forEach(function(gt){gt.addUniforms(Nf({},bt.layerModel.getAnimateUniforms()))})})}}]),tt}(),_c),Ru=_()(pc.prototype,"cameraService",[ns],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ul=_()(pc.prototype,"rendererService",[hu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pc))||Mu),yf,Kc,Mc=(yf=Object(Z.injectable)(),yf(Kc=function(){function tt(){T()(this,tt)}return t()(tt,[{key:"apply",value:function(bt){bt.hooks.init.tap("LayerModelPlugin",function(){bt.prepareBuildModel(),bt.buildModels(),bt.styleNeedUpdate=!1}),bt.hooks.beforeRenderData.tap("DataSourcePlugin",function(){return bt.prepareBuildModel(),bt.clearModels(),bt.buildModels(),bt.layerModelNeedUpdate=!1,!1})}}]),tt}())||Kc),Af,Cf,Ff=(Af=Object(Z.injectable)(),Af(Cf=function(){function tt(){T()(this,tt)}return t()(tt,[{key:"apply",value:function(bt){bt.hooks.afterInit.tap("LayerStylePlugin",function(){bt.updateLayerConfig({});var gt=bt.getLayerConfig(),Tt=gt.autoFit,Dt=gt.fitBoundsOptions;Tt&&setTimeout(function(){bt.fitBounds(Dt)},100)})}}]),tt}())||Cf),mh,Mf;function yh(tt,St){var bt=Object.keys(tt);if(Object.getOwnPropertySymbols){var gt=Object.getOwnPropertySymbols(tt);St&&(gt=gt.filter(function(Tt){return Object.getOwnPropertyDescriptor(tt,Tt).enumerable})),bt.push.apply(bt,gt)}return bt}function zf(tt){for(var St=1;St<arguments.length;St++){var bt=arguments[St]!=null?arguments[St]:{};St%2?yh(Object(bt),!0).forEach(function(gt){u()(tt,gt,bt[gt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tt,Object.getOwnPropertyDescriptors(bt)):yh(Object(bt)).forEach(function(gt){Object.defineProperty(tt,gt,Object.getOwnPropertyDescriptor(bt,gt))})}return tt}var ih={directional:{lights:"u_DirectionalLights",num:"u_NumOfDirectionalLights"},spot:{lights:"u_SpotLights",num:"u_NumOfSpotLights"}},Nh={type:"directional",direction:[1,10.5,12],ambient:[.2,.2,.2],diffuse:[.6,.6,.6],specular:[.1,.1,.1]},Oh={direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0]},Fh={position:[0,0,0],direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0],constant:1,linear:0,quadratic:0,angle:14,exponent:40,blur:5},ah=["ambient","diffuse","specular"];function xh(tt){var St={u_DirectionalLights:new Array(3).fill(zf({},Oh)),u_NumOfDirectionalLights:0,u_SpotLights:new Array(3).fill(zf({},Fh)),u_NumOfSpotLights:0};return(!tt||!tt.length)&&(tt=[Nh]),tt.forEach(function(bt,gt){var Tt=bt.type,Dt=Tt===void 0?"directional":Tt,Yt=a()(bt,["type"]),pe=ih[Dt].lights,Be=ih[Dt].num,Qe=St[Be];St[pe][Qe]=zf(zf({},St[pe][Qe]),Yt),St[Be]++}),St}var zh=(mh=Object(Z.injectable)(),mh(Mf=function(){function tt(){T()(this,tt)}return t()(tt,[{key:"apply",value:function(bt){bt.hooks.beforeRender.tap("LightingPlugin",function(){var gt=bt.getLayerConfig(),Tt=gt.enableLighting;Tt&&bt.models.forEach(function(Dt){return Dt.addUniforms(zf({},xh()))})})}}]),tt}())||Mf),oh,Uf,Jf={NONE:0,ENCODE:1,HIGHLIGHT:2},Uh=(oh=Object(Z.injectable)(),oh(Uf=function(){function tt(){T()(this,tt)}return t()(tt,[{key:"apply",value:function(bt,gt){var Tt=gt.rendererService,Dt=gt.styleAttributeService;bt.hooks.init.tap("PixelPickingPlugin",function(){var Yt=bt.getLayerConfig(),pe=Yt.enablePicking;Dt.registerStyleAttribute({name:"pickingColor",type:U.AttributeType.Attribute,descriptor:{name:"a_PickingColor",buffer:{data:[],type:U.gl.FLOAT},size:3,update:function(Qe,Bn){var fr=Qe.id;return pe?Object(O.l)(fr):[0,0,0]}}})}),bt.hooks.beforePickingEncode.tap("PixelPickingPlugin",function(){var Yt=bt.getLayerConfig(),pe=Yt.enablePicking;pe&&bt.isVisible()&&bt.models.forEach(function(Be){return Be.addUniforms({u_PickingStage:Jf.ENCODE})})}),bt.hooks.afterPickingEncode.tap("PixelPickingPlugin",function(){var Yt=bt.getLayerConfig(),pe=Yt.enablePicking;pe&&bt.isVisible()&&bt.models.forEach(function(Be){return Be.addUniforms({u_PickingStage:Jf.HIGHLIGHT})})}),bt.hooks.beforeHighlight.tap("PixelPickingPlugin",function(Yt){var pe=bt.getLayerConfig(),Be=pe.highlightColor,Qe=typeof Be=="string"?Object(O.s)(Be):Be||[1,0,0,1];bt.updateLayerConfig({pickedFeatureID:Object(O.k)(new Uint8Array(Yt))}),bt.models.forEach(function(Bn){return Bn.addUniforms({u_PickingStage:Jf.HIGHLIGHT,u_PickingColor:Yt,u_HighlightColor:Qe.map(function(fr){return fr*255})})})}),bt.hooks.beforeSelect.tap("PixelPickingPlugin",function(Yt){var pe=bt.getLayerConfig(),Be=pe.selectColor,Qe=typeof Be=="string"?Object(O.s)(Be):Be||[1,0,0,1];bt.updateLayerConfig({pickedFeatureID:Object(O.k)(new Uint8Array(Yt))}),bt.models.forEach(function(Bn){return Bn.addUniforms({u_PickingStage:Jf.HIGHLIGHT,u_PickingColor:Yt,u_HighlightColor:Qe.map(function(fr){return fr*255})})})})}}]),tt}())||Uf),wh,sh,Ih,bh,uh,Lh,Rh=(wh=Object(Z.injectable)(),sh=Object(Z.inject)(U.TYPES.ILogService),wh(Ih=(bh=(Lh=function(){function tt(){T()(this,tt),v()(this,"logger",uh,this)}return t()(tt,[{key:"apply",value:function(bt,gt){var Tt=this,Dt=gt.styleAttributeService;bt.hooks.init.tap("RegisterStyleAttributePlugin",function(){Tt.registerBuiltinAttributes(Dt)})}},{key:"registerBuiltinAttributes",value:function(bt){bt.registerStyleAttribute({name:"position",type:U.AttributeType.Attribute,descriptor:{name:"a_Position",buffer:{data:[],type:U.gl.FLOAT},size:3,update:function(Tt,Dt,Yt){return Yt.length===2?[Yt[0],Yt[1],0]:[Yt[0],Yt[1],Yt[2]]}}}),bt.registerStyleAttribute({name:"filter",type:U.AttributeType.Attribute,descriptor:{name:"filter",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:1,update:function(Tt,Dt){var Yt=Tt.filter;return Yt?[1]:[0]}}}),bt.registerStyleAttribute({name:"color",type:U.AttributeType.Attribute,descriptor:{name:"a_Color",buffer:{usage:U.gl.DYNAMIC_DRAW,data:[],type:U.gl.FLOAT},size:4,update:function(Tt,Dt){var Yt=Tt.color;return!Yt||!Yt.length?[1,1,1,1]:Yt}}})}}]),tt}(),Lh),uh=_()(bh.prototype,"logger",[sh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bh))||Ih),Eh,Sh,lh,_h,ch,Of,Mh,kh,Gh,qh,td=(Eh=Object(Z.injectable)(),Sh=Object(Z.inject)(U.TYPES.ICameraService),lh=Object(Z.inject)(U.TYPES.ICoordinateSystemService),_h=Object(Z.inject)(U.TYPES.IRendererService),Eh(ch=(Of=(qh=function(){function tt(){T()(this,tt),v()(this,"cameraService",Mh,this),v()(this,"coordinateSystemService",kh,this),v()(this,"rendererService",Gh,this)}return t()(tt,[{key:"apply",value:function(bt){var gt=this;bt.hooks.beforeRender.tap("ShaderUniformPlugin",function(){gt.coordinateSystemService.refresh();var Tt=gt.rendererService.getViewportSize(),Dt=Tt.width,Yt=Tt.height;bt.models.forEach(function(pe){var Be;return pe.addUniforms((Be={},u()(Be,U.CameraUniform.ProjectionMatrix,gt.cameraService.getProjectionMatrix()),u()(Be,U.CameraUniform.ViewMatrix,gt.cameraService.getViewMatrix()),u()(Be,U.CameraUniform.ViewProjectionMatrix,gt.cameraService.getViewProjectionMatrix()),u()(Be,U.CameraUniform.Zoom,gt.cameraService.getZoom()),u()(Be,U.CameraUniform.ZoomScale,gt.cameraService.getZoomScale()),u()(Be,U.CameraUniform.FocalDistance,gt.cameraService.getFocalDistance()),u()(Be,U.CameraUniform.CameraPosition,gt.cameraService.getCameraPosition()),u()(Be,U.CoordinateUniform.CoordinateSystem,gt.coordinateSystemService.getCoordinateSystem()),u()(Be,U.CoordinateUniform.ViewportCenter,gt.coordinateSystemService.getViewportCenter()),u()(Be,U.CoordinateUniform.ViewportCenterProjection,gt.coordinateSystemService.getViewportCenterProjection()),u()(Be,U.CoordinateUniform.PixelsPerDegree,gt.coordinateSystemService.getPixelsPerDegree()),u()(Be,U.CoordinateUniform.PixelsPerDegree2,gt.coordinateSystemService.getPixelsPerDegree2()),u()(Be,U.CoordinateUniform.PixelsPerMeter,gt.coordinateSystemService.getPixelsPerMeter()),u()(Be,"u_ViewportSize",[Dt,Yt]),u()(Be,"u_DevicePixelRatio",window.devicePixelRatio),u()(Be,"u_ModelMatrix",[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),u()(Be,"u_PickingBuffer",bt.getLayerConfig().pickingBuffer||0),Be))})})}}]),tt}(),qh),Mh=_()(Of.prototype,"cameraService",[Sh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kh=_()(Of.prototype,"coordinateSystemService",[lh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gh=_()(Of.prototype,"rendererService",[_h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Of))||ch),ed,Vh,Ed=(ed=Object(Z.injectable)(),ed(Vh=function(){function tt(){T()(this,tt)}return t()(tt,[{key:"apply",value:function(bt){bt.hooks.beforeRender.tap("UpdateModelPlugin",function(){bt.layerModel&&bt.layerModel.needUpdate()})}}]),tt}())||Vh),fd,Ph,Nl,uf,hd,kf,nd=(fd=Object(Z.injectable)(),Ph=Object(Z.inject)(U.TYPES.ILogService),fd(Nl=(uf=(kf=function(){function tt(){T()(this,tt),v()(this,"logger",hd,this)}return t()(tt,[{key:"apply",value:function(bt,gt){var Tt=this,Dt=gt.styleAttributeService;bt.hooks.init.tap("UpdateStyleAttributePlugin",function(){Tt.initStyleAttribute(bt,{styleAttributeService:Dt})}),bt.hooks.beforeRender.tap("UpdateStyleAttributePlugin",function(){bt.layerModelNeedUpdate||Tt.updateStyleAtrribute(bt,{styleAttributeService:Dt})})}},{key:"updateStyleAtrribute",value:function(bt,gt){var Tt=this,Dt=gt.styleAttributeService,Yt=Dt.getLayerStyleAttributes()||[],pe=Dt.getLayerStyleAttribute("filter"),Be=Dt.getLayerStyleAttribute("shape");if(pe&&pe.needRegenerateVertices||Be&&Be.needRegenerateVertices){bt.layerModelNeedUpdate=!0,Yt.forEach(function(Qe){return Qe.needRegenerateVertices=!1});return}Yt.filter(function(Qe){return Qe.needRegenerateVertices}).forEach(function(Qe){Dt.updateAttributeByFeatureRange(Qe.name,bt.getEncodedData(),Qe.featureRange.startIndex,Qe.featureRange.endIndex),Qe.needRegenerateVertices=!1,Tt.logger.debug("regenerate vertex attributes: ".concat(Qe.name," finished"))})}},{key:"initStyleAttribute",value:function(bt,gt){var Tt=this,Dt=gt.styleAttributeService,Yt=Dt.getLayerStyleAttributes()||[];Yt.filter(function(pe){return pe.needRegenerateVertices}).forEach(function(pe){Dt.updateAttributeByFeatureRange(pe.name,bt.getEncodedData(),pe.featureRange.startIndex,pe.featureRange.endIndex),pe.needRegenerateVertices=!1,Tt.logger.debug("init vertex attributes: ".concat(pe.name," finished"))})}}]),tt}(),kf),hd=_()(uf.prototype,"logger",[Ph],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uf))||Nl);U.container.bind(U.TYPES.ILayerPlugin).to(Je).inRequestScope(),U.container.bind(U.TYPES.ILayerPlugin).to(Rh).inRequestScope(),U.container.bind(U.TYPES.ILayerPlugin).to(lc).inRequestScope(),U.container.bind(U.TYPES.ILayerPlugin).to(re).inRequestScope(),U.container.bind(U.TYPES.ILayerPlugin).to(Ff).inRequestScope(),U.container.bind(U.TYPES.ILayerPlugin).to(nd).inRequestScope(),U.container.bind(U.TYPES.ILayerPlugin).to(Ed).inRequestScope(),U.container.bind(U.TYPES.ILayerPlugin).to(ut).inRequestScope(),U.container.bind(U.TYPES.ILayerPlugin).to(td).inRequestScope(),U.container.bind(U.TYPES.ILayerPlugin).to(sf).inRequestScope(),U.container.bind(U.TYPES.ILayerPlugin).to(zh).inRequestScope(),U.container.bind(U.TYPES.ILayerPlugin).to(Uh).inRequestScope(),U.container.bind(U.TYPES.ILayerPlugin).to(Mc).inRequestScope()},t2Dn:function(Se,ft,L){var U=L("hypo"),E=L("ljhN");function T(e,t,l){(l!==void 0&&!E(e[t],l)||l===void 0&&!(t in e))&&U(e,t,l)}Se.exports=T},u6S6:function(Se,ft,L){var U=L("6acW"),E=L("sgoq"),T=E(function(e,t,l){return t=t.toLowerCase(),e+(l?U(t):t)});Se.exports=T},uhBA:function(Se,ft,L){"use strict";var U=Object.prototype.hasOwnProperty,E="~";function T(){}Object.create&&(T.prototype=Object.create(null),new T().__proto__||(E=!1));function e(c,r,h){this.fn=c,this.context=r,this.once=h||!1}function t(c,r,h,n,i){if(typeof h!="function")throw new TypeError("The listener must be a function");var a=new e(h,n||c,i),o=E?E+r:r;return c._events[o]?c._events[o].fn?c._events[o]=[c._events[o],a]:c._events[o].push(a):(c._events[o]=a,c._eventsCount++),c}function l(c,r){--c._eventsCount==0?c._events=new T:delete c._events[r]}function s(){this._events=new T,this._eventsCount=0}s.prototype.eventNames=function(){var r=[],h,n;if(this._eventsCount===0)return r;for(n in h=this._events)U.call(h,n)&&r.push(E?n.slice(1):n);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(h)):r},s.prototype.listeners=function(r){var h=E?E+r:r,n=this._events[h];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,a=n.length,o=new Array(a);i<a;i++)o[i]=n[i].fn;return o},s.prototype.listenerCount=function(r){var h=E?E+r:r,n=this._events[h];return n?n.fn?1:n.length:0},s.prototype.emit=function(r,h,n,i,a,o){var u=E?E+r:r;if(!this._events[u])return!1;var f=this._events[u],v=arguments.length,b,y;if(f.fn){switch(f.once&&this.removeListener(r,f.fn,void 0,!0),v){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,h),!0;case 3:return f.fn.call(f.context,h,n),!0;case 4:return f.fn.call(f.context,h,n,i),!0;case 5:return f.fn.call(f.context,h,n,i,a),!0;case 6:return f.fn.call(f.context,h,n,i,a,o),!0}for(y=1,b=new Array(v-1);y<v;y++)b[y-1]=arguments[y];f.fn.apply(f.context,b)}else{var g=f.length,_;for(y=0;y<g;y++)switch(f[y].once&&this.removeListener(r,f[y].fn,void 0,!0),v){case 1:f[y].fn.call(f[y].context);break;case 2:f[y].fn.call(f[y].context,h);break;case 3:f[y].fn.call(f[y].context,h,n);break;case 4:f[y].fn.call(f[y].context,h,n,i);break;default:if(!b)for(_=1,b=new Array(v-1);_<v;_++)b[_-1]=arguments[_];f[y].fn.apply(f[y].context,b)}}return!0},s.prototype.on=function(r,h,n){return t(this,r,h,n,!1)},s.prototype.once=function(r,h,n){return t(this,r,h,n,!0)},s.prototype.removeListener=function(r,h,n,i){var a=E?E+r:r;if(!this._events[a])return this;if(!h)return l(this,a),this;var o=this._events[a];if(o.fn)o.fn===h&&(!i||o.once)&&(!n||o.context===n)&&l(this,a);else{for(var u=0,f=[],v=o.length;u<v;u++)(o[u].fn!==h||i&&!o[u].once||n&&o[u].context!==n)&&f.push(o[u]);f.length?this._events[a]=f.length===1?f[0]:f:l(this,a)}return this},s.prototype.removeAllListeners=function(r){var h;return r?(h=E?E+r:r,this._events[h]&&l(this,h)):(this._events=new T,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=E,s.EventEmitter=s,Se.exports=s},ujMp:function(Se,ft,L){"use strict";Object.defineProperty(ft,"__esModule",{value:!0}),ft.circularDependencyToException=ft.listMetadataForTarget=ft.listRegisteredBindingsForServiceIdentifier=ft.getServiceIdentifierAsString=ft.getFunctionName=void 0;var U=L("MON2");function E(r){if(typeof r=="function"){var h=r;return h.name}else{if(typeof r=="symbol")return r.toString();var h=r;return h}}ft.getServiceIdentifierAsString=E;function T(r,h,n){var i="",a=n(r,h);return a.length!==0&&(i=`
Registered bindings:`,a.forEach(function(o){var u="Object";o.implementationType!==null&&(u=c(o.implementationType)),i=i+`
 `+u,o.constraint.metaData&&(i=i+" - "+o.constraint.metaData)})),i}ft.listRegisteredBindingsForServiceIdentifier=T;function e(r,h){return r.parentRequest===null?!1:r.parentRequest.serviceIdentifier===h?!0:e(r.parentRequest,h)}function t(r){function h(i,a){a===void 0&&(a=[]);var o=E(i.serviceIdentifier);return a.push(o),i.parentRequest!==null?h(i.parentRequest,a):a}var n=h(r);return n.reverse().join(" --> ")}function l(r){r.childRequests.forEach(function(h){if(e(h,h.serviceIdentifier)){var n=t(h);throw new Error(U.CIRCULAR_DEPENDENCY+" "+n)}else l(h)})}ft.circularDependencyToException=l;function s(r,h){if(h.isTagged()||h.isNamed()){var n="",i=h.getNamedTag(),a=h.getCustomTags();return i!==null&&(n+=i.toString()+`
`),a!==null&&a.forEach(function(o){n+=o.toString()+`
`})," "+r+`
 `+r+" - "+n}else return" "+r}ft.listMetadataForTarget=s;function c(r){if(r.name)return r.name;var h=r.toString(),n=h.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: "+h}ft.getFunctionName=c},"vN+2":function(Se,ft){function L(){}Se.exports=L},"w/wX":function(Se,ft,L){var U=L("QqLw"),E=L("ExA7"),T="[object Set]";function e(t){return E(t)&&U(t)==T}Se.exports=e},w26f:function(Se,ft,L){(function(U){var E=200,T="__lodash_hash_undefined__",e=1/0,t="[object Function]",l="[object GeneratorFunction]",s=/[\\^$.*+?()[\]{}|]/g,c=/^\[object .+?Constructor\]$/,r=typeof U=="object"&&U&&U.Object===Object&&U,h=typeof self=="object"&&self&&self.Object===Object&&self,n=r||h||Function("return this")();function i(be,ze){var Xe=be?be.length:0;return!!Xe&&u(be,ze,0)>-1}function a(be,ze,Xe){for(var _n=-1,Kn=be?be.length:0;++_n<Kn;)if(Xe(ze,be[_n]))return!0;return!1}function o(be,ze,Xe,_n){for(var Kn=be.length,Hn=Xe+(_n?1:-1);_n?Hn--:++Hn<Kn;)if(ze(be[Hn],Hn,be))return Hn;return-1}function u(be,ze,Xe){if(ze!==ze)return o(be,f,Xe);for(var _n=Xe-1,Kn=be.length;++_n<Kn;)if(be[_n]===ze)return _n;return-1}function f(be){return be!==be}function v(be,ze){return be.has(ze)}function b(be,ze){return be==null?void 0:be[ze]}function y(be){var ze=!1;if(be!=null&&typeof be.toString!="function")try{ze=!!(be+"")}catch(Xe){}return ze}function g(be){var ze=-1,Xe=Array(be.size);return be.forEach(function(_n){Xe[++ze]=_n}),Xe}var _=Array.prototype,M=Function.prototype,x=Object.prototype,m=n["__core-js_shared__"],S=function(){var be=/[^.]+$/.exec(m&&m.keys&&m.keys.IE_PROTO||"");return be?"Symbol(src)_1."+be:""}(),P=M.toString,A=x.hasOwnProperty,O=x.toString,R=RegExp("^"+P.call(A).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),W=_.splice,F=vt(n,"Map"),Z=vt(n,"Set"),V=vt(Object,"create");function k(be){var ze=-1,Xe=be?be.length:0;for(this.clear();++ze<Xe;){var _n=be[ze];this.set(_n[0],_n[1])}}function Y(){this.__data__=V?V(null):{}}function K(be){return this.has(be)&&delete this.__data__[be]}function it(be){var ze=this.__data__;if(V){var Xe=ze[be];return Xe===T?void 0:Xe}return A.call(ze,be)?ze[be]:void 0}function ct(be){var ze=this.__data__;return V?ze[be]!==void 0:A.call(ze,be)}function ht(be,ze){var Xe=this.__data__;return Xe[be]=V&&ze===void 0?T:ze,this}k.prototype.clear=Y,k.prototype.delete=K,k.prototype.get=it,k.prototype.has=ct,k.prototype.set=ht;function ut(be){var ze=-1,Xe=be?be.length:0;for(this.clear();++ze<Xe;){var _n=be[ze];this.set(_n[0],_n[1])}}function It(){this.__data__=[]}function Nt(be){var ze=this.__data__,Xe=H(ze,be);if(Xe<0)return!1;var _n=ze.length-1;return Xe==_n?ze.pop():W.call(ze,Xe,1),!0}function Lt(be){var ze=this.__data__,Xe=H(ze,be);return Xe<0?void 0:ze[Xe][1]}function _t(be){return H(this.__data__,be)>-1}function mt(be,ze){var Xe=this.__data__,_n=H(Xe,be);return _n<0?Xe.push([be,ze]):Xe[_n][1]=ze,this}ut.prototype.clear=It,ut.prototype.delete=Nt,ut.prototype.get=Lt,ut.prototype.has=_t,ut.prototype.set=mt;function At(be){var ze=-1,Xe=be?be.length:0;for(this.clear();++ze<Xe;){var _n=be[ze];this.set(_n[0],_n[1])}}function rt(){this.__data__={hash:new k,map:new(F||ut),string:new k}}function Mt(be){return Et(this,be).delete(be)}function z(be){return Et(this,be).get(be)}function $(be){return Et(this,be).has(be)}function dt(be,ze){return Et(this,be).set(be,ze),this}At.prototype.clear=rt,At.prototype.delete=Mt,At.prototype.get=z,At.prototype.has=$,At.prototype.set=dt;function et(be){var ze=-1,Xe=be?be.length:0;for(this.__data__=new At;++ze<Xe;)this.add(be[ze])}function ot(be){return this.__data__.set(be,T),this}function pt(be){return this.__data__.has(be)}et.prototype.add=et.prototype.push=ot,et.prototype.has=pt;function H(be,ze){for(var Xe=be.length;Xe--;)if($t(be[Xe][0],ze))return Xe;return-1}function nt(be){if(!me(be)||Qt(be))return!1;var ze=Pe(be)||y(be)?R:c;return ze.test(ee(be))}function at(be,ze,Xe){var _n=-1,Kn=i,Hn=be.length,nn=!0,en=[],An=en;if(Xe)nn=!1,Kn=a;else if(Hn>=E){var Nn=ze?null:q(be);if(Nn)return g(Nn);nn=!1,Kn=v,An=new et}else An=ze?[]:en;t:for(;++_n<Hn;){var hr=be[_n],fi=ze?ze(hr):hr;if(hr=Xe||hr!==0?hr:0,nn&&fi===fi){for(var Oe=An.length;Oe--;)if(An[Oe]===fi)continue t;ze&&An.push(fi),en.push(hr)}else Kn(An,fi,Xe)||(An!==en&&An.push(fi),en.push(hr))}return en}var q=Z&&1/g(new Z([,-0]))[1]==e?function(be){return new Z(be)}:le;function Et(be,ze){var Xe=be.__data__;return Ft(ze)?Xe[typeof ze=="string"?"string":"hash"]:Xe.map}function vt(be,ze){var Xe=b(be,ze);return nt(Xe)?Xe:void 0}function Ft(be){var ze=typeof be;return ze=="string"||ze=="number"||ze=="symbol"||ze=="boolean"?be!=="__proto__":be===null}function Qt(be){return!!S&&S in be}function ee(be){if(be!=null){try{return P.call(be)}catch(ze){}try{return be+""}catch(ze){}}return""}function Gt(be){return be&&be.length?at(be):[]}function $t(be,ze){return be===ze||be!==be&&ze!==ze}function Pe(be){var ze=me(be)?O.call(be):"";return ze==t||ze==l}function me(be){var ze=typeof be;return!!be&&(ze=="object"||ze=="function")}function le(){}Se.exports=Gt}).call(this,L("IyRk"))},wclG:function(Se,ft,L){var U=L("pFRH"),E=L("88Gu"),T=E(U);Se.exports=T},wnjb:function(Se,ft,L){"use strict";Object.defineProperty(ft,"__esModule",{value:!0}),ft.MetadataReader=void 0;var U=L("xfSm"),E=function(){function T(){}return T.prototype.getConstructorMetadata=function(e){var t=Reflect.getMetadata(U.PARAM_TYPES,e),l=Reflect.getMetadata(U.TAGGED,e);return{compilerGeneratedMetadata:t,userGeneratedMetadata:l||{}}},T.prototype.getPropertiesMetadata=function(e){var t=Reflect.getMetadata(U.TAGGED_PROP,e)||[];return t},T}();ft.MetadataReader=E},wrZu:function(Se,ft,L){var U=L("+K+b"),E=L("XYm9"),T=L("b2z7"),e=L("otv/"),t=L("yP5f"),l="[object Boolean]",s="[object Date]",c="[object Map]",r="[object Number]",h="[object RegExp]",n="[object Set]",i="[object String]",a="[object Symbol]",o="[object ArrayBuffer]",u="[object DataView]",f="[object Float32Array]",v="[object Float64Array]",b="[object Int8Array]",y="[object Int16Array]",g="[object Int32Array]",_="[object Uint8Array]",M="[object Uint8ClampedArray]",x="[object Uint16Array]",m="[object Uint32Array]";function S(P,A,O){var R=P.constructor;switch(A){case o:return U(P);case l:case s:return new R(+P);case u:return E(P,O);case f:case v:case b:case y:case g:case _:case M:case x:case m:return t(P,O);case c:return new R;case r:case i:return new R(P);case h:return T(P);case n:return new R;case a:return e(P)}}Se.exports=S},wy8a:function(Se,ft,L){var U=L("KxBF");function E(T,e,t){var l=T.length;return t=t===void 0?l:t,!e&&t>=l?T:U(T,e,t)}Se.exports=E},xfSm:function(Se,ft,L){"use strict";Object.defineProperty(ft,"__esModule",{value:!0}),ft.POST_CONSTRUCT=ft.DESIGN_PARAM_TYPES=ft.PARAM_TYPES=ft.TAGGED_PROP=ft.TAGGED=ft.MULTI_INJECT_TAG=ft.INJECT_TAG=ft.OPTIONAL_TAG=ft.UNMANAGED_TAG=ft.NAME_TAG=ft.NAMED_TAG=void 0,ft.NAMED_TAG="named",ft.NAME_TAG="name",ft.UNMANAGED_TAG="unmanaged",ft.OPTIONAL_TAG="optional",ft.INJECT_TAG="inject",ft.MULTI_INJECT_TAG="multi_inject",ft.TAGGED="inversify:tagged",ft.TAGGED_PROP="inversify:tagged_props",ft.PARAM_TYPES="inversify:paramtypes",ft.DESIGN_PARAM_TYPES="design:paramtypes",ft.POST_CONSTRUCT="post_construct"},xfeJ:function(Se,ft){function L(U){return Function.toString.call(U).indexOf("[native code]")!==-1}Se.exports=L,Se.exports.default=Se.exports,Se.exports.__esModule=!0},xiII:function(Se,ft,L){"use strict";Object.defineProperty(ft,"__esModule",{value:!0}),ft.Request=void 0;var U=L("d9O0"),E=function(){function T(e,t,l,s,c){this.id=U.id(),this.serviceIdentifier=e,this.parentContext=t,this.parentRequest=l,this.target=c,this.childRequests=[],this.bindings=Array.isArray(s)?s:[s],this.requestScope=l===null?new Map:null}return T.prototype.addChildRequest=function(e,t,l){var s=new T(e,this.parentContext,this,t,l);return this.childRequests.push(s),s},T}();ft.Request=E},xp6e:function(Se,ft,L){"use strict";(function(U){L.d(ft,"a",function(){return it}),L.d(ft,"b",function(){return It}),L.d(ft,"c",function(){return V}),L.d(ft,"d",function(){return ut});/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function E(Nt,Lt,_t,mt){function At(rt){return rt instanceof _t?rt:new _t(function(Mt){Mt(rt)})}return new(_t||(_t=Promise))(function(rt,Mt){function z(et){try{dt(mt.next(et))}catch(ot){Mt(ot)}}function $(et){try{dt(mt.throw(et))}catch(ot){Mt(ot)}}function dt(et){et.done?rt(et.value):At(et.value).then(z,$)}dt((mt=mt.apply(Nt,Lt||[])).next())})}function T(Nt,Lt){var _t={label:0,sent:function(){if(rt[0]&1)throw rt[1];return rt[1]},trys:[],ops:[]},mt,At,rt,Mt;return Mt={next:z(0),throw:z(1),return:z(2)},typeof Symbol=="function"&&(Mt[Symbol.iterator]=function(){return this}),Mt;function z(dt){return function(et){return $([dt,et])}}function $(dt){if(mt)throw new TypeError("Generator is already executing.");for(;_t;)try{if(mt=1,At&&(rt=dt[0]&2?At.return:dt[0]?At.throw||((rt=At.return)&&rt.call(At),0):At.next)&&!(rt=rt.call(At,dt[1])).done)return rt;switch(At=0,rt&&(dt=[dt[0]&2,rt.value]),dt[0]){case 0:case 1:rt=dt;break;case 4:return _t.label++,{value:dt[1],done:!1};case 5:_t.label++,At=dt[1],dt=[0];continue;case 7:dt=_t.ops.pop(),_t.trys.pop();continue;default:if(rt=_t.trys,!(rt=rt.length>0&&rt[rt.length-1])&&(dt[0]===6||dt[0]===2)){_t=0;continue}if(dt[0]===3&&(!rt||dt[1]>rt[0]&&dt[1]<rt[3])){_t.label=dt[1];break}if(dt[0]===6&&_t.label<rt[1]){_t.label=rt[1],rt=dt;break}if(rt&&_t.label<rt[2]){_t.label=rt[2],_t.ops.push(dt);break}rt[2]&&_t.ops.pop(),_t.trys.pop();continue}dt=Lt.call(Nt,_t)}catch(et){dt=[6,et],At=0}finally{mt=rt=0}if(dt[0]&5)throw dt[1];return{value:dt[0]?dt[1]:void 0,done:!0}}}function e(Nt,Lt){var _t=typeof Symbol=="function"&&Nt[Symbol.iterator];if(!_t)return Nt;var mt=_t.call(Nt),At,rt=[],Mt;try{for(;(Lt===void 0||Lt-- >0)&&!(At=mt.next()).done;)rt.push(At.value)}catch(z){Mt={error:z}}finally{try{At&&!At.done&&(_t=mt.return)&&_t.call(mt)}finally{if(Mt)throw Mt.error}}return rt}function t(){for(var Nt=[],Lt=0;Lt<arguments.length;Lt++)Nt=Nt.concat(e(arguments[Lt]));return Nt}function l(Nt){return Nt&&Nt.__esModule&&Object.prototype.hasOwnProperty.call(Nt,"default")?Nt.default:Nt}function s(Nt,Lt){return Lt={exports:{}},Nt(Lt,Lt.exports),Lt.exports}var c=s(function(Nt,Lt){Object.defineProperty(Lt,"__esModule",{value:!0}),Lt.default=_t;function _t(mt){return mt&&typeof mt.length=="number"&&mt.length>=0&&mt.length%1==0}Nt.exports=Lt.default});l(c);var r=s(function(Nt,Lt){Object.defineProperty(Lt,"__esModule",{value:!0}),Lt.default=function(_t){return function(){for(var mt=[],At=arguments.length;At--;)mt[At]=arguments[At];var rt=mt.pop();return _t.call(this,mt,rt)}},Nt.exports=Lt.default});l(r);var h=s(function(Nt,Lt){Object.defineProperty(Lt,"__esModule",{value:!0}),Lt.fallback=At,Lt.wrap=rt;var _t=Lt.hasSetImmediate=typeof setImmediate=="function"&&setImmediate,mt=Lt.hasNextTick=typeof U=="object"&&typeof U.nextTick=="function";function At(z){setTimeout(z,0)}function rt(z){return function($){for(var dt=[],et=arguments.length-1;et-- >0;)dt[et]=arguments[et+1];return z(function(){return $.apply(void 0,dt)})}}var Mt;_t?Mt=setImmediate:mt?Mt=U.nextTick:Mt=At,Lt.default=rt(Mt)});l(h);var n=h.fallback,i=h.wrap,a=h.hasSetImmediate,o=h.hasNextTick,u=s(function(Nt,Lt){Object.defineProperty(Lt,"__esModule",{value:!0}),Lt.default=rt;var _t=At(r),mt=At(h);function At($){return $&&$.__esModule?$:{default:$}}function rt($){return(0,f.isAsync)($)?function(){for(var dt=[],et=arguments.length;et--;)dt[et]=arguments[et];var ot=dt.pop(),pt=$.apply(this,dt);return Mt(pt,ot)}:(0,_t.default)(function(dt,et){var ot;try{ot=$.apply(this,dt)}catch(pt){return et(pt)}if(ot&&typeof ot.then=="function")return Mt(ot,et);et(null,ot)})}function Mt($,dt){return $.then(function(et){z(dt,null,et)},function(et){z(dt,et&&et.message?et:new Error(et))})}function z($,dt,et){try{$(dt,et)}catch(ot){(0,mt.default)(function(pt){throw pt},ot)}}Nt.exports=Lt.default});l(u);var f=s(function(Nt,Lt){Object.defineProperty(Lt,"__esModule",{value:!0}),Lt.isAsyncIterable=Lt.isAsyncGenerator=Lt.isAsync=void 0;var _t=mt(u);function mt($){return $&&$.__esModule?$:{default:$}}function At($){return $[Symbol.toStringTag]==="AsyncFunction"}function rt($){return $[Symbol.toStringTag]==="AsyncGenerator"}function Mt($){return typeof $[Symbol.asyncIterator]=="function"}function z($){if(typeof $!="function")throw new Error("expected a function");return At($)?(0,_t.default)($):$}Lt.default=z,Lt.isAsync=At,Lt.isAsyncGenerator=rt,Lt.isAsyncIterable=Mt});l(f);var v=f.isAsyncIterable,b=f.isAsyncGenerator,y=f.isAsync,g=s(function(Nt,Lt){Object.defineProperty(Lt,"__esModule",{value:!0}),Lt.default=_t;function _t(mt,At){if(At===void 0&&(At=mt.length),!At)throw new Error("arity is undefined");function rt(){for(var Mt=this,z=[],$=arguments.length;$--;)z[$]=arguments[$];return typeof z[At-1]=="function"?mt.apply(this,z):new Promise(function(dt,et){z[At-1]=function(ot){for(var pt=[],H=arguments.length-1;H-- >0;)pt[H]=arguments[H+1];if(ot)return et(ot);dt(pt.length>1?pt:pt[0])},mt.apply(Mt,z)})}return Object.defineProperty(rt,"name",{configurable:!0,value:"awaitable("+mt.name+")"}),rt}Nt.exports=Lt.default});l(g);var _=s(function(Nt,Lt){Object.defineProperty(Lt,"__esModule",{value:!0});var _t=rt(c),mt=rt(f),At=rt(g);function rt(Mt){return Mt&&Mt.__esModule?Mt:{default:Mt}}Lt.default=(0,At.default)(function(Mt,z,$){var dt=(0,_t.default)(z)?[]:{};Mt(z,function(et,ot,pt){(0,mt.default)(et)(function(H){for(var nt,at=[],q=arguments.length-1;q-- >0;)at[q]=arguments[q+1];at.length<2&&(nt=at,at=nt[0]),dt[ot]=at,pt(H)})},function(et){return $(et,dt)})},3),Nt.exports=Lt.default});l(_);var M=s(function(Nt,Lt){Object.defineProperty(Lt,"__esModule",{value:!0}),Lt.default=_t;function _t(mt){function At(){for(var rt=[],Mt=arguments.length;Mt--;)rt[Mt]=arguments[Mt];if(mt!==null){var z=mt;mt=null,z.apply(this,rt)}}return Object.assign(At,mt),At}Nt.exports=Lt.default});l(M);var x=s(function(Nt,Lt){Object.defineProperty(Lt,"__esModule",{value:!0}),Lt.default=function(_t){return _t[Symbol.iterator]&&_t[Symbol.iterator]()},Nt.exports=Lt.default});l(x);var m=s(function(Nt,Lt){Object.defineProperty(Lt,"__esModule",{value:!0}),Lt.default=$;var _t=At(c),mt=At(x);function At(dt){return dt&&dt.__esModule?dt:{default:dt}}function rt(dt){var et=-1,ot=dt.length;return function(){return++et<ot?{value:dt[et],key:et}:null}}function Mt(dt){var et=-1;return function(){var pt=dt.next();return pt.done?null:(et++,{value:pt.value,key:et})}}function z(dt){var et=dt?Object.keys(dt):[],ot=-1,pt=et.length;return function(){var nt=et[++ot];return ot<pt?{value:dt[nt],key:nt}:null}}function $(dt){if((0,_t.default)(dt))return rt(dt);var et=(0,mt.default)(dt);return et?Mt(et):z(dt)}Nt.exports=Lt.default});l(m);var S=s(function(Nt,Lt){Object.defineProperty(Lt,"__esModule",{value:!0}),Lt.default=_t;function _t(mt){return function(){for(var At=[],rt=arguments.length;rt--;)At[rt]=arguments[rt];if(mt===null)throw new Error("Callback was already called.");var Mt=mt;mt=null,Mt.apply(this,At)}}Nt.exports=Lt.default});l(S);var P=s(function(Nt,Lt){Object.defineProperty(Lt,"__esModule",{value:!0});var _t={};Lt.default=_t,Nt.exports=Lt.default});l(P);var A=s(function(Nt,Lt){Object.defineProperty(Lt,"__esModule",{value:!0}),Lt.default=At;var _t=mt(P);function mt(rt){return rt&&rt.__esModule?rt:{default:rt}}function At(rt,Mt,z,$){var dt=!1,et=!1,ot=!1,pt=0,H=0;function nt(){pt>=Mt||ot||dt||(ot=!0,rt.next().then(function(Et){var vt=Et.value,Ft=Et.done;if(!(et||dt)){if(ot=!1,Ft){dt=!0,pt<=0&&$(null);return}pt++,z(vt,H,at),H++,nt()}}).catch(q))}function at(Et,vt){if(pt-=1,!et){if(Et)return q(Et);if(Et===!1){dt=!0,et=!0;return}if(vt===_t.default||dt&&pt<=0)return dt=!0,$(null);nt()}}function q(Et){et||(ot=!1,dt=!0,$(Et))}nt()}Nt.exports=Lt.default});l(A);var O=s(function(Nt,Lt){Object.defineProperty(Lt,"__esModule",{value:!0});var _t=z(M),mt=z(m),At=z(S),rt=z(A),Mt=z(P);function z($){return $&&$.__esModule?$:{default:$}}Lt.default=function($){return function(dt,et,ot){if(ot=(0,_t.default)(ot),$<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!dt)return ot(null);if((0,f.isAsyncGenerator)(dt))return(0,rt.default)(dt,$,et,ot);if((0,f.isAsyncIterable)(dt))return(0,rt.default)(dt[Symbol.asyncIterator](),$,et,ot);var pt=(0,mt.default)(dt),H=!1,nt=!1,at=0,q=!1;function Et(Ft,Qt){if(!nt)if(at-=1,Ft)H=!0,ot(Ft);else if(Ft===!1)H=!0,nt=!0;else{if(Qt===Mt.default||H&&at<=0)return H=!0,ot(null);q||vt()}}function vt(){for(q=!0;at<$&&!H;){var Ft=pt();if(Ft===null){H=!0,at<=0&&ot(null);return}at+=1,et(Ft.value,Ft.key,(0,At.default)(Et))}q=!1}vt()}},Nt.exports=Lt.default});l(O);var R=s(function(Nt,Lt){Object.defineProperty(Lt,"__esModule",{value:!0});var _t=rt(O),mt=rt(f),At=rt(g);function rt(z){return z&&z.__esModule?z:{default:z}}function Mt(z,$,dt,et){return(0,_t.default)($)(z,(0,mt.default)(dt),et)}Lt.default=(0,At.default)(Mt,4),Nt.exports=Lt.default});l(R);var W=s(function(Nt,Lt){Object.defineProperty(Lt,"__esModule",{value:!0});var _t=At(R),mt=At(g);function At(Mt){return Mt&&Mt.__esModule?Mt:{default:Mt}}function rt(Mt,z,$){return(0,_t.default)(Mt,1,z,$)}Lt.default=(0,mt.default)(rt,3),Nt.exports=Lt.default});l(W);var F=s(function(Nt,Lt){Object.defineProperty(Lt,"__esModule",{value:!0}),Lt.default=rt;var _t=At(_),mt=At(W);function At(Mt){return Mt&&Mt.__esModule?Mt:{default:Mt}}function rt(Mt,z){return(0,_t.default)(mt.default,Mt,z)}Nt.exports=Lt.default}),Z=l(F),V=function(){function Nt(){for(var Lt=arguments,_t=[],mt=0;mt<arguments.length;mt++)_t[mt]=Lt[mt];this.args=[],this.tasks=[]}return Nt.prototype.call=function(){for(var Lt=arguments,_t=[],mt=0;mt<arguments.length;mt++)_t[mt]=Lt[mt];return this.args=_t,Z(this.tasks)},Nt.prototype.tap=function(Lt,_t){var mt=this;this.tasks.push(function(At){_t.apply(void 0,t(mt.args)),At(null,Lt)})},Nt}(),k=s(function(Nt,Lt){Object.defineProperty(Lt,"__esModule",{value:!0});var _t=dt(c),mt=dt(P),At=dt(R),rt=dt(M),Mt=dt(S),z=dt(f),$=dt(g);function dt(H){return H&&H.__esModule?H:{default:H}}function et(H,nt,at){at=(0,rt.default)(at);var q=0,Et=0,vt=H.length,Ft=!1;vt===0&&at(null);function Qt(ee,Gt){ee===!1&&(Ft=!0),Ft!==!0&&(ee?at(ee):(++Et===vt||Gt===mt.default)&&at(null))}for(;q<vt;q++)nt(H[q],q,(0,Mt.default)(Qt))}function ot(H,nt,at){return(0,At.default)(H,Infinity,nt,at)}function pt(H,nt,at){var q=(0,_t.default)(H)?et:ot;return q(H,(0,z.default)(nt),at)}Lt.default=(0,$.default)(pt,3),Nt.exports=Lt.default});l(k);var Y=s(function(Nt,Lt){Object.defineProperty(Lt,"__esModule",{value:!0}),Lt.default=rt;var _t=At(k),mt=At(_);function At(Mt){return Mt&&Mt.__esModule?Mt:{default:Mt}}function rt(Mt,z){return(0,mt.default)(_t.default,Mt,z)}Nt.exports=Lt.default}),K=l(Y),it=function(){function Nt(){for(var Lt=arguments,_t=[],mt=0;mt<arguments.length;mt++)_t[mt]=Lt[mt];this.tasks=[]}return Nt.prototype.promise=function(){for(var Lt=arguments,_t=[],mt=0;mt<arguments.length;mt++)_t[mt]=Lt[mt];return K(this.tasks)},Nt.prototype.tapPromise=function(Lt,_t){var mt=this;this.tasks.push(function(At){return E(mt,void 0,void 0,function(){return T(this,function(rt){switch(rt.label){case 0:return[4,_t()];case 1:return rt.sent(),At(null,Lt),[2]}})})})},Nt}(),ct=s(function(Nt,Lt){Object.defineProperty(Lt,"__esModule",{value:!0});var _t=Mt(M),mt=Mt(S),At=Mt(f),rt=Mt(g);function Mt($){return $&&$.__esModule?$:{default:$}}function z($,dt){if(dt=(0,_t.default)(dt),!Array.isArray($))return dt(new Error("First argument to waterfall must be an array of functions"));if(!$.length)return dt();var et=0;function ot(H){var nt=(0,At.default)($[et++]);nt.apply(void 0,H.concat([(0,mt.default)(pt)]))}function pt(H){for(var nt=[],at=arguments.length-1;at-- >0;)nt[at]=arguments[at+1];if(H!==!1){if(H||et===$.length)return dt.apply(void 0,[H].concat(nt));ot(nt)}}ot([])}Lt.default=(0,rt.default)(z),Nt.exports=Lt.default}),ht=l(ct),ut=function(){function Nt(){for(var Lt=arguments,_t=[],mt=0;mt<arguments.length;mt++)_t[mt]=Lt[mt];this.tasks=[]}return Nt.prototype.call=function(){for(var Lt=arguments,_t=[],mt=0;mt<arguments.length;mt++)_t[mt]=Lt[mt];return ht(this.tasks)},Nt.prototype.tap=function(Lt,_t){this.tasks.length===0?this.tasks.push(function(mt){var At=_t();mt(At?null:!1,At)}):this.tasks.push(function(mt,At){var rt=_t();At(rt?null:!1,Lt)})},Nt}(),It=function(){function Nt(){for(var Lt=arguments,_t=[],mt=0;mt<arguments.length;mt++)_t[mt]=Lt[mt];this.tasks=[]}return Nt.prototype.call=function(){for(var Lt=arguments,_t=[],mt=0;mt<arguments.length;mt++)_t[mt]=Lt[mt];return Z(this.tasks)},Nt.prototype.tap=function(Lt,_t){this.tasks.push(function(mt){var At=_t();mt(At,Lt)})},Nt}()}).call(this,L("Q2Ig"))},yG8O:function(Se,ft){function L(U,E,T,e){!T||Object.defineProperty(U,E,{enumerable:T.enumerable,configurable:T.configurable,writable:T.writable,value:T.initializer?T.initializer.call(e):void 0})}Se.exports=L,Se.exports.default=Se.exports,Se.exports.__esModule=!0},yHx3:function(Se,ft){var L=Object.prototype,U=L.hasOwnProperty;function E(T){var e=T.length,t=new T.constructor(e);return e&&typeof T[0]=="string"&&U.call(T,"index")&&(t.index=T.index,t.input=T.input),t}Se.exports=E},yLV6:function(Se,ft,L){var U;/*! Hammer.JS - v2.0.7 - 2016-04-22
* http://hammerjs.github.io/
*
* Copyright (c) 2016 Jorik Tangelder;
* Licensed under the MIT license */(function(E,T,e,t){"use strict";var l=["","webkit","Moz","MS","ms","o"],s=T.createElement("div"),c="function",r=Math.round,h=Math.abs,n=Date.now;function i(oe,Wt,Ee){return setTimeout(g(oe,Ee),Wt)}function a(oe,Wt,Ee){return Array.isArray(oe)?(o(oe,Ee[Wt],Ee),!0):!1}function o(oe,Wt,Ee){var an;if(!!oe)if(oe.forEach)oe.forEach(Wt,Ee);else if(oe.length!==t)for(an=0;an<oe.length;)Wt.call(Ee,oe[an],an,oe),an++;else for(an in oe)oe.hasOwnProperty(an)&&Wt.call(Ee,oe[an],an,oe)}function u(oe,Wt,Ee){var an="DEPRECATED METHOD: "+Wt+`
`+Ee+` AT 
`;return function(){var Un=new Error("get-stack-trace"),qn=Un&&Un.stack?Un.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",kn=E.console&&(E.console.warn||E.console.log);return kn&&kn.call(E.console,an,qn),oe.apply(this,arguments)}}var f;typeof Object.assign!="function"?f=function(Wt){if(Wt===t||Wt===null)throw new TypeError("Cannot convert undefined or null to object");for(var Ee=Object(Wt),an=1;an<arguments.length;an++){var Un=arguments[an];if(Un!==t&&Un!==null)for(var qn in Un)Un.hasOwnProperty(qn)&&(Ee[qn]=Un[qn])}return Ee}:f=Object.assign;var v=u(function(Wt,Ee,an){for(var Un=Object.keys(Ee),qn=0;qn<Un.length;)(!an||an&&Wt[Un[qn]]===t)&&(Wt[Un[qn]]=Ee[Un[qn]]),qn++;return Wt},"extend","Use `assign`."),b=u(function(Wt,Ee){return v(Wt,Ee,!0)},"merge","Use `assign`.");function y(oe,Wt,Ee){var an=Wt.prototype,Un;Un=oe.prototype=Object.create(an),Un.constructor=oe,Un._super=an,Ee&&f(Un,Ee)}function g(oe,Wt){return function(){return oe.apply(Wt,arguments)}}function _(oe,Wt){return typeof oe==c?oe.apply(Wt&&Wt[0]||t,Wt):oe}function M(oe,Wt){return oe===t?Wt:oe}function x(oe,Wt,Ee){o(A(Wt),function(an){oe.addEventListener(an,Ee,!1)})}function m(oe,Wt,Ee){o(A(Wt),function(an){oe.removeEventListener(an,Ee,!1)})}function S(oe,Wt){for(;oe;){if(oe==Wt)return!0;oe=oe.parentNode}return!1}function P(oe,Wt){return oe.indexOf(Wt)>-1}function A(oe){return oe.trim().split(/\s+/g)}function O(oe,Wt,Ee){if(oe.indexOf&&!Ee)return oe.indexOf(Wt);for(var an=0;an<oe.length;){if(Ee&&oe[an][Ee]==Wt||!Ee&&oe[an]===Wt)return an;an++}return-1}function R(oe){return Array.prototype.slice.call(oe,0)}function W(oe,Wt,Ee){for(var an=[],Un=[],qn=0;qn<oe.length;){var kn=Wt?oe[qn][Wt]:oe[qn];O(Un,kn)<0&&an.push(oe[qn]),Un[qn]=kn,qn++}return Ee&&(Wt?an=an.sort(function(Si,Ti){return Si[Wt]>Ti[Wt]}):an=an.sort()),an}function F(oe,Wt){for(var Ee,an,Un=Wt[0].toUpperCase()+Wt.slice(1),qn=0;qn<l.length;){if(Ee=l[qn],an=Ee?Ee+Un:Wt,an in oe)return an;qn++}return t}var Z=1;function V(){return Z++}function k(oe){var Wt=oe.ownerDocument||oe;return Wt.defaultView||Wt.parentWindow||E}var Y=/mobile|tablet|ip(ad|hone|od)|android/i,K="ontouchstart"in E,it=F(E,"PointerEvent")!==t,ct=K&&Y.test(navigator.userAgent),ht="touch",ut="pen",It="mouse",Nt="kinect",Lt=25,_t=1,mt=2,At=4,rt=8,Mt=1,z=2,$=4,dt=8,et=16,ot=z|$,pt=dt|et,H=ot|pt,nt=["x","y"],at=["clientX","clientY"];function q(oe,Wt){var Ee=this;this.manager=oe,this.callback=Wt,this.element=oe.element,this.target=oe.options.inputTarget,this.domHandler=function(an){_(oe.options.enable,[oe])&&Ee.handler(an)},this.init()}q.prototype={handler:function(){},init:function(){this.evEl&&x(this.element,this.evEl,this.domHandler),this.evTarget&&x(this.target,this.evTarget,this.domHandler),this.evWin&&x(k(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&m(this.element,this.evEl,this.domHandler),this.evTarget&&m(this.target,this.evTarget,this.domHandler),this.evWin&&m(k(this.element),this.evWin,this.domHandler)}};function Et(oe){var Wt,Ee=oe.options.inputClass;return Ee?Wt=Ee:it?Wt=fi:ct?Wt=ue:K?Wt=rr:Wt=nn,new Wt(oe,vt)}function vt(oe,Wt,Ee){var an=Ee.pointers.length,Un=Ee.changedPointers.length,qn=Wt&_t&&an-Un==0,kn=Wt&(At|rt)&&an-Un==0;Ee.isFirst=!!qn,Ee.isFinal=!!kn,qn&&(oe.session={}),Ee.eventType=Wt,Ft(oe,Ee),oe.emit("hammer.input",Ee),oe.recognize(Ee),oe.session.prevInput=Ee}function Ft(oe,Wt){var Ee=oe.session,an=Wt.pointers,Un=an.length;Ee.firstInput||(Ee.firstInput=Gt(Wt)),Un>1&&!Ee.firstMultiple?Ee.firstMultiple=Gt(Wt):Un===1&&(Ee.firstMultiple=!1);var qn=Ee.firstInput,kn=Ee.firstMultiple,Xr=kn?kn.center:qn.center,Si=Wt.center=$t(an);Wt.timeStamp=n(),Wt.deltaTime=Wt.timeStamp-qn.timeStamp,Wt.angle=be(Xr,Si),Wt.distance=le(Xr,Si),Qt(Ee,Wt),Wt.offsetDirection=me(Wt.deltaX,Wt.deltaY);var Ti=Pe(Wt.deltaTime,Wt.deltaX,Wt.deltaY);Wt.overallVelocityX=Ti.x,Wt.overallVelocityY=Ti.y,Wt.overallVelocity=h(Ti.x)>h(Ti.y)?Ti.x:Ti.y,Wt.scale=kn?Xe(kn.pointers,an):1,Wt.rotation=kn?ze(kn.pointers,an):0,Wt.maxPointers=Ee.prevInput?Wt.pointers.length>Ee.prevInput.maxPointers?Wt.pointers.length:Ee.prevInput.maxPointers:Wt.pointers.length,ee(Ee,Wt);var ki=oe.element;S(Wt.srcEvent.target,ki)&&(ki=Wt.srcEvent.target),Wt.target=ki}function Qt(oe,Wt){var Ee=Wt.center,an=oe.offsetDelta||{},Un=oe.prevDelta||{},qn=oe.prevInput||{};(Wt.eventType===_t||qn.eventType===At)&&(Un=oe.prevDelta={x:qn.deltaX||0,y:qn.deltaY||0},an=oe.offsetDelta={x:Ee.x,y:Ee.y}),Wt.deltaX=Un.x+(Ee.x-an.x),Wt.deltaY=Un.y+(Ee.y-an.y)}function ee(oe,Wt){var Ee=oe.lastInterval||Wt,an=Wt.timeStamp-Ee.timeStamp,Un,qn,kn,Xr;if(Wt.eventType!=rt&&(an>Lt||Ee.velocity===t)){var Si=Wt.deltaX-Ee.deltaX,Ti=Wt.deltaY-Ee.deltaY,ki=Pe(an,Si,Ti);qn=ki.x,kn=ki.y,Un=h(ki.x)>h(ki.y)?ki.x:ki.y,Xr=me(Si,Ti),oe.lastInterval=Wt}else Un=Ee.velocity,qn=Ee.velocityX,kn=Ee.velocityY,Xr=Ee.direction;Wt.velocity=Un,Wt.velocityX=qn,Wt.velocityY=kn,Wt.direction=Xr}function Gt(oe){for(var Wt=[],Ee=0;Ee<oe.pointers.length;)Wt[Ee]={clientX:r(oe.pointers[Ee].clientX),clientY:r(oe.pointers[Ee].clientY)},Ee++;return{timeStamp:n(),pointers:Wt,center:$t(Wt),deltaX:oe.deltaX,deltaY:oe.deltaY}}function $t(oe){var Wt=oe.length;if(Wt===1)return{x:r(oe[0].clientX),y:r(oe[0].clientY)};for(var Ee=0,an=0,Un=0;Un<Wt;)Ee+=oe[Un].clientX,an+=oe[Un].clientY,Un++;return{x:r(Ee/Wt),y:r(an/Wt)}}function Pe(oe,Wt,Ee){return{x:Wt/oe||0,y:Ee/oe||0}}function me(oe,Wt){return oe===Wt?Mt:h(oe)>=h(Wt)?oe<0?z:$:Wt<0?dt:et}function le(oe,Wt,Ee){Ee||(Ee=nt);var an=Wt[Ee[0]]-oe[Ee[0]],Un=Wt[Ee[1]]-oe[Ee[1]];return Math.sqrt(an*an+Un*Un)}function be(oe,Wt,Ee){Ee||(Ee=nt);var an=Wt[Ee[0]]-oe[Ee[0]],Un=Wt[Ee[1]]-oe[Ee[1]];return Math.atan2(Un,an)*180/Math.PI}function ze(oe,Wt){return be(Wt[1],Wt[0],at)+be(oe[1],oe[0],at)}function Xe(oe,Wt){return le(Wt[0],Wt[1],at)/le(oe[0],oe[1],at)}var _n={mousedown:_t,mousemove:mt,mouseup:At},Kn="mousedown",Hn="mousemove mouseup";function nn(){this.evEl=Kn,this.evWin=Hn,this.pressed=!1,q.apply(this,arguments)}y(nn,q,{handler:function(Wt){var Ee=_n[Wt.type];Ee&_t&&Wt.button===0&&(this.pressed=!0),Ee&mt&&Wt.which!==1&&(Ee=At),!!this.pressed&&(Ee&At&&(this.pressed=!1),this.callback(this.manager,Ee,{pointers:[Wt],changedPointers:[Wt],pointerType:It,srcEvent:Wt}))}});var en={pointerdown:_t,pointermove:mt,pointerup:At,pointercancel:rt,pointerout:rt},An={2:ht,3:ut,4:It,5:Nt},Nn="pointerdown",hr="pointermove pointerup pointercancel";E.MSPointerEvent&&!E.PointerEvent&&(Nn="MSPointerDown",hr="MSPointerMove MSPointerUp MSPointerCancel");function fi(){this.evEl=Nn,this.evWin=hr,q.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}y(fi,q,{handler:function(Wt){var Ee=this.store,an=!1,Un=Wt.type.toLowerCase().replace("ms",""),qn=en[Un],kn=An[Wt.pointerType]||Wt.pointerType,Xr=kn==ht,Si=O(Ee,Wt.pointerId,"pointerId");qn&_t&&(Wt.button===0||Xr)?Si<0&&(Ee.push(Wt),Si=Ee.length-1):qn&(At|rt)&&(an=!0),!(Si<0)&&(Ee[Si]=Wt,this.callback(this.manager,qn,{pointers:Ee,changedPointers:[Wt],pointerType:kn,srcEvent:Wt}),an&&Ee.splice(Si,1))}});var Oe={touchstart:_t,touchmove:mt,touchend:At,touchcancel:rt},Ae="touchstart",Jt="touchstart touchmove touchend touchcancel";function ve(){this.evTarget=Ae,this.evWin=Jt,this.started=!1,q.apply(this,arguments)}y(ve,q,{handler:function(Wt){var Ee=Oe[Wt.type];if(Ee===_t&&(this.started=!0),!!this.started){var an=Vt.call(this,Wt,Ee);Ee&(At|rt)&&an[0].length-an[1].length==0&&(this.started=!1),this.callback(this.manager,Ee,{pointers:an[0],changedPointers:an[1],pointerType:ht,srcEvent:Wt})}}});function Vt(oe,Wt){var Ee=R(oe.touches),an=R(oe.changedTouches);return Wt&(At|rt)&&(Ee=W(Ee.concat(an),"identifier",!0)),[Ee,an]}var ie={touchstart:_t,touchmove:mt,touchend:At,touchcancel:rt},Ce="touchstart touchmove touchend touchcancel";function ue(){this.evTarget=Ce,this.targetIds={},q.apply(this,arguments)}y(ue,q,{handler:function(Wt){var Ee=ie[Wt.type],an=xe.call(this,Wt,Ee);!an||this.callback(this.manager,Ee,{pointers:an[0],changedPointers:an[1],pointerType:ht,srcEvent:Wt})}});function xe(oe,Wt){var Ee=R(oe.touches),an=this.targetIds;if(Wt&(_t|mt)&&Ee.length===1)return an[Ee[0].identifier]=!0,[Ee,Ee];var Un,qn,kn=R(oe.changedTouches),Xr=[],Si=this.target;if(qn=Ee.filter(function(Ti){return S(Ti.target,Si)}),Wt===_t)for(Un=0;Un<qn.length;)an[qn[Un].identifier]=!0,Un++;for(Un=0;Un<kn.length;)an[kn[Un].identifier]&&Xr.push(kn[Un]),Wt&(At|rt)&&delete an[kn[Un].identifier],Un++;if(!!Xr.length)return[W(qn.concat(Xr),"identifier",!0),Xr]}var $e=2500,Fn=25;function rr(){q.apply(this,arguments);var oe=g(this.handler,this);this.touch=new ue(this.manager,oe),this.mouse=new nn(this.manager,oe),this.primaryTouch=null,this.lastTouches=[]}y(rr,q,{handler:function(Wt,Ee,an){var Un=an.pointerType==ht,qn=an.pointerType==It;if(!(qn&&an.sourceCapabilities&&an.sourceCapabilities.firesTouchEvents)){if(Un)En.call(this,Ee,an);else if(qn&&Er.call(this,an))return;this.callback(Wt,Ee,an)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function En(oe,Wt){oe&_t?(this.primaryTouch=Wt.changedPointers[0].identifier,Pn.call(this,Wt)):oe&(At|rt)&&Pn.call(this,Wt)}function Pn(oe){var Wt=oe.changedPointers[0];if(Wt.identifier===this.primaryTouch){var Ee={x:Wt.clientX,y:Wt.clientY};this.lastTouches.push(Ee);var an=this.lastTouches,Un=function(){var kn=an.indexOf(Ee);kn>-1&&an.splice(kn,1)};setTimeout(Un,$e)}}function Er(oe){for(var Wt=oe.srcEvent.clientX,Ee=oe.srcEvent.clientY,an=0;an<this.lastTouches.length;an++){var Un=this.lastTouches[an],qn=Math.abs(Wt-Un.x),kn=Math.abs(Ee-Un.y);if(qn<=Fn&&kn<=Fn)return!0}return!1}var Pr=F(s.style,"touchAction"),ln=Pr!==t,Cr="compute",Ar="auto",je="manipulation",We="none",Ye="pan-x",fn="pan-y",mn=Ln();function jn(oe,Wt){this.manager=oe,this.set(Wt)}jn.prototype={set:function(Wt){Wt==Cr&&(Wt=this.compute()),ln&&this.manager.element.style&&mn[Wt]&&(this.manager.element.style[Pr]=Wt),this.actions=Wt.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var Wt=[];return o(this.manager.recognizers,function(Ee){_(Ee.options.enable,[Ee])&&(Wt=Wt.concat(Ee.getTouchAction()))}),bn(Wt.join(" "))},preventDefaults:function(Wt){var Ee=Wt.srcEvent,an=Wt.offsetDirection;if(this.manager.session.prevented){Ee.preventDefault();return}var Un=this.actions,qn=P(Un,We)&&!mn[We],kn=P(Un,fn)&&!mn[fn],Xr=P(Un,Ye)&&!mn[Ye];if(qn){var Si=Wt.pointers.length===1,Ti=Wt.distance<2,ki=Wt.deltaTime<250;if(Si&&Ti&&ki)return}if(!(Xr&&kn)&&(qn||kn&&an&ot||Xr&&an&pt))return this.preventSrc(Ee)},preventSrc:function(Wt){this.manager.session.prevented=!0,Wt.preventDefault()}};function bn(oe){if(P(oe,We))return We;var Wt=P(oe,Ye),Ee=P(oe,fn);return Wt&&Ee?We:Wt||Ee?Wt?Ye:fn:P(oe,je)?je:Ar}function Ln(){if(!ln)return!1;var oe={},Wt=E.CSS&&E.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(Ee){oe[Ee]=Wt?E.CSS.supports("touch-action",Ee):!0}),oe}var nr=1,Yn=2,Mn=4,Rr=8,pr=Rr,zr=16,Pi=32;function Oa(oe){this.options=f({},this.defaults,oe||{}),this.id=V(),this.manager=null,this.options.enable=M(this.options.enable,!0),this.state=nr,this.simultaneous={},this.requireFail=[]}Oa.prototype={defaults:{},set:function(Wt){return f(this.options,Wt),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(Wt){if(a(Wt,"recognizeWith",this))return this;var Ee=this.simultaneous;return Wt=Ko(Wt,this),Ee[Wt.id]||(Ee[Wt.id]=Wt,Wt.recognizeWith(this)),this},dropRecognizeWith:function(Wt){return a(Wt,"dropRecognizeWith",this)?this:(Wt=Ko(Wt,this),delete this.simultaneous[Wt.id],this)},requireFailure:function(Wt){if(a(Wt,"requireFailure",this))return this;var Ee=this.requireFail;return Wt=Ko(Wt,this),O(Ee,Wt)===-1&&(Ee.push(Wt),Wt.requireFailure(this)),this},dropRequireFailure:function(Wt){if(a(Wt,"dropRequireFailure",this))return this;Wt=Ko(Wt,this);var Ee=O(this.requireFail,Wt);return Ee>-1&&this.requireFail.splice(Ee,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(Wt){return!!this.simultaneous[Wt.id]},emit:function(Wt){var Ee=this,an=this.state;function Un(qn){Ee.manager.emit(qn,Wt)}an<Rr&&Un(Ee.options.event+Ua(an)),Un(Ee.options.event),Wt.additionalEvent&&Un(Wt.additionalEvent),an>=Rr&&Un(Ee.options.event+Ua(an))},tryEmit:function(Wt){if(this.canEmit())return this.emit(Wt);this.state=Pi},canEmit:function(){for(var Wt=0;Wt<this.requireFail.length;){if(!(this.requireFail[Wt].state&(Pi|nr)))return!1;Wt++}return!0},recognize:function(Wt){var Ee=f({},Wt);if(!_(this.options.enable,[this,Ee])){this.reset(),this.state=Pi;return}this.state&(pr|zr|Pi)&&(this.state=nr),this.state=this.process(Ee),this.state&(Yn|Mn|Rr|zr)&&this.tryEmit(Ee)},process:function(Wt){},getTouchAction:function(){},reset:function(){}};function Ua(oe){return oe&zr?"cancel":oe&Rr?"end":oe&Mn?"move":oe&Yn?"start":""}function ro(oe){return oe==et?"down":oe==dt?"up":oe==z?"left":oe==$?"right":""}function Ko(oe,Wt){var Ee=Wt.manager;return Ee?Ee.get(oe):oe}function _a(){Oa.apply(this,arguments)}y(_a,Oa,{defaults:{pointers:1},attrTest:function(Wt){var Ee=this.options.pointers;return Ee===0||Wt.pointers.length===Ee},process:function(Wt){var Ee=this.state,an=Wt.eventType,Un=Ee&(Yn|Mn),qn=this.attrTest(Wt);return Un&&(an&rt||!qn)?Ee|zr:Un||qn?an&At?Ee|Rr:Ee&Yn?Ee|Mn:Yn:Pi}});function co(){_a.apply(this,arguments),this.pX=null,this.pY=null}y(co,_a,{defaults:{event:"pan",threshold:10,pointers:1,direction:H},getTouchAction:function(){var Wt=this.options.direction,Ee=[];return Wt&ot&&Ee.push(fn),Wt&pt&&Ee.push(Ye),Ee},directionTest:function(Wt){var Ee=this.options,an=!0,Un=Wt.distance,qn=Wt.direction,kn=Wt.deltaX,Xr=Wt.deltaY;return qn&Ee.direction||(Ee.direction&ot?(qn=kn===0?Mt:kn<0?z:$,an=kn!=this.pX,Un=Math.abs(Wt.deltaX)):(qn=Xr===0?Mt:Xr<0?dt:et,an=Xr!=this.pY,Un=Math.abs(Wt.deltaY))),Wt.direction=qn,an&&Un>Ee.threshold&&qn&Ee.direction},attrTest:function(Wt){return _a.prototype.attrTest.call(this,Wt)&&(this.state&Yn||!(this.state&Yn)&&this.directionTest(Wt))},emit:function(Wt){this.pX=Wt.deltaX,this.pY=Wt.deltaY;var Ee=ro(Wt.direction);Ee&&(Wt.additionalEvent=this.options.event+Ee),this._super.emit.call(this,Wt)}});function Xo(){_a.apply(this,arguments)}y(Xo,_a,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[We]},attrTest:function(Wt){return this._super.attrTest.call(this,Wt)&&(Math.abs(Wt.scale-1)>this.options.threshold||this.state&Yn)},emit:function(Wt){if(Wt.scale!==1){var Ee=Wt.scale<1?"in":"out";Wt.additionalEvent=this.options.event+Ee}this._super.emit.call(this,Wt)}});function io(){Oa.apply(this,arguments),this._timer=null,this._input=null}y(io,Oa,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Ar]},process:function(Wt){var Ee=this.options,an=Wt.pointers.length===Ee.pointers,Un=Wt.distance<Ee.threshold,qn=Wt.deltaTime>Ee.time;if(this._input=Wt,!Un||!an||Wt.eventType&(At|rt)&&!qn)this.reset();else if(Wt.eventType&_t)this.reset(),this._timer=i(function(){this.state=pr,this.tryEmit()},Ee.time,this);else if(Wt.eventType&At)return pr;return Pi},reset:function(){clearTimeout(this._timer)},emit:function(Wt){this.state===pr&&(Wt&&Wt.eventType&At?this.manager.emit(this.options.event+"up",Wt):(this._input.timeStamp=n(),this.manager.emit(this.options.event,this._input)))}});function To(){_a.apply(this,arguments)}y(To,_a,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[We]},attrTest:function(Wt){return this._super.attrTest.call(this,Wt)&&(Math.abs(Wt.rotation)>this.options.threshold||this.state&Yn)}});function ds(){_a.apply(this,arguments)}y(ds,_a,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:ot|pt,pointers:1},getTouchAction:function(){return co.prototype.getTouchAction.call(this)},attrTest:function(Wt){var Ee=this.options.direction,an;return Ee&(ot|pt)?an=Wt.overallVelocity:Ee&ot?an=Wt.overallVelocityX:Ee&pt&&(an=Wt.overallVelocityY),this._super.attrTest.call(this,Wt)&&Ee&Wt.offsetDirection&&Wt.distance>this.options.threshold&&Wt.maxPointers==this.options.pointers&&h(an)>this.options.velocity&&Wt.eventType&At},emit:function(Wt){var Ee=ro(Wt.offsetDirection);Ee&&this.manager.emit(this.options.event+Ee,Wt),this.manager.emit(this.options.event,Wt)}});function La(){Oa.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}y(La,Oa,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[je]},process:function(Wt){var Ee=this.options,an=Wt.pointers.length===Ee.pointers,Un=Wt.distance<Ee.threshold,qn=Wt.deltaTime<Ee.time;if(this.reset(),Wt.eventType&_t&&this.count===0)return this.failTimeout();if(Un&&qn&&an){if(Wt.eventType!=At)return this.failTimeout();var kn=this.pTime?Wt.timeStamp-this.pTime<Ee.interval:!0,Xr=!this.pCenter||le(this.pCenter,Wt.center)<Ee.posThreshold;this.pTime=Wt.timeStamp,this.pCenter=Wt.center,!Xr||!kn?this.count=1:this.count+=1,this._input=Wt;var Si=this.count%Ee.taps;if(Si===0)return this.hasRequireFailures()?(this._timer=i(function(){this.state=pr,this.tryEmit()},Ee.interval,this),Yn):pr}return Pi},failTimeout:function(){return this._timer=i(function(){this.state=Pi},this.options.interval,this),Pi},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==pr&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Vo(oe,Wt){return Wt=Wt||{},Wt.recognizers=M(Wt.recognizers,Vo.defaults.preset),new Jo(oe,Wt)}Vo.VERSION="2.0.7",Vo.defaults={domEvents:!1,touchAction:Cr,enable:!0,inputTarget:null,inputClass:null,preset:[[To,{enable:!1}],[Xo,{enable:!1},["rotate"]],[ds,{direction:ot}],[co,{direction:ot},["swipe"]],[La],[La,{event:"doubletap",taps:2},["tap"]],[io]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Bo=1,lu=2;function Jo(oe,Wt){this.options=f({},Vo.defaults,Wt||{}),this.options.inputTarget=this.options.inputTarget||oe,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=oe,this.input=Et(this),this.touchAction=new jn(this,this.options.touchAction),iu(this,!0),o(this.options.recognizers,function(Ee){var an=this.add(new Ee[0](Ee[1]));Ee[2]&&an.recognizeWith(Ee[2]),Ee[3]&&an.requireFailure(Ee[3])},this)}Jo.prototype={set:function(Wt){return f(this.options,Wt),Wt.touchAction&&this.touchAction.update(),Wt.inputTarget&&(this.input.destroy(),this.input.target=Wt.inputTarget,this.input.init()),this},stop:function(Wt){this.session.stopped=Wt?lu:Bo},recognize:function(Wt){var Ee=this.session;if(!Ee.stopped){this.touchAction.preventDefaults(Wt);var an,Un=this.recognizers,qn=Ee.curRecognizer;(!qn||qn&&qn.state&pr)&&(qn=Ee.curRecognizer=null);for(var kn=0;kn<Un.length;)an=Un[kn],Ee.stopped!==lu&&(!qn||an==qn||an.canRecognizeWith(qn))?an.recognize(Wt):an.reset(),!qn&&an.state&(Yn|Mn|Rr)&&(qn=Ee.curRecognizer=an),kn++}},get:function(Wt){if(Wt instanceof Oa)return Wt;for(var Ee=this.recognizers,an=0;an<Ee.length;an++)if(Ee[an].options.event==Wt)return Ee[an];return null},add:function(Wt){if(a(Wt,"add",this))return this;var Ee=this.get(Wt.options.event);return Ee&&this.remove(Ee),this.recognizers.push(Wt),Wt.manager=this,this.touchAction.update(),Wt},remove:function(Wt){if(a(Wt,"remove",this))return this;if(Wt=this.get(Wt),Wt){var Ee=this.recognizers,an=O(Ee,Wt);an!==-1&&(Ee.splice(an,1),this.touchAction.update())}return this},on:function(Wt,Ee){if(Wt!==t&&Ee!==t){var an=this.handlers;return o(A(Wt),function(Un){an[Un]=an[Un]||[],an[Un].push(Ee)}),this}},off:function(Wt,Ee){if(Wt!==t){var an=this.handlers;return o(A(Wt),function(Un){Ee?an[Un]&&an[Un].splice(O(an[Un],Ee),1):delete an[Un]}),this}},emit:function(Wt,Ee){this.options.domEvents&&$s(Wt,Ee);var an=this.handlers[Wt]&&this.handlers[Wt].slice();if(!(!an||!an.length)){Ee.type=Wt,Ee.preventDefault=function(){Ee.srcEvent.preventDefault()};for(var Un=0;Un<an.length;)an[Un](Ee),Un++}},destroy:function(){this.element&&iu(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function iu(oe,Wt){var Ee=oe.element;if(!!Ee.style){var an;o(oe.options.cssProps,function(Un,qn){an=F(Ee.style,qn),Wt?(oe.oldCssProps[an]=Ee.style[an],Ee.style[an]=Un):Ee.style[an]=oe.oldCssProps[an]||""}),Wt||(oe.oldCssProps={})}}function $s(oe,Wt){var Ee=T.createEvent("Event");Ee.initEvent(oe,!0,!0),Ee.gesture=Wt,Wt.target.dispatchEvent(Ee)}f(Vo,{INPUT_START:_t,INPUT_MOVE:mt,INPUT_END:At,INPUT_CANCEL:rt,STATE_POSSIBLE:nr,STATE_BEGAN:Yn,STATE_CHANGED:Mn,STATE_ENDED:Rr,STATE_RECOGNIZED:pr,STATE_CANCELLED:zr,STATE_FAILED:Pi,DIRECTION_NONE:Mt,DIRECTION_LEFT:z,DIRECTION_RIGHT:$,DIRECTION_UP:dt,DIRECTION_DOWN:et,DIRECTION_HORIZONTAL:ot,DIRECTION_VERTICAL:pt,DIRECTION_ALL:H,Manager:Jo,Input:q,TouchAction:jn,TouchInput:ue,MouseInput:nn,PointerEventInput:fi,TouchMouseInput:rr,SingleTouchInput:ve,Recognizer:Oa,AttrRecognizer:_a,Tap:La,Pan:co,Swipe:ds,Pinch:Xo,Rotate:To,Press:io,on:x,off:m,each:o,merge:b,extend:v,assign:f,inherit:y,bindFn:g,prefixed:F});var Ne=typeof E!="undefined"?E:typeof self!="undefined"?self:{};Ne.Hammer=Vo,U=function(){return Vo}.call(ft,L,ft,Se),U!==t&&(Se.exports=U)})(window,document,"Hammer")},yMAV:function(Se,ft,L){"use strict";Object.defineProperty(ft,"__esModule",{value:!0}),ft.Plan=void 0;var U=function(){function E(T,e){this.parentContext=T,this.rootRequest=e}return E}();ft.Plan=U},yP5f:function(Se,ft,L){var U=L("+K+b");function E(T,e){var t=e?U(T.buffer):T.buffer;return new T.constructor(t,T.byteOffset,T.length)}Se.exports=E},"yP6+":function(Se,ft,L){(function(E,T){Se.exports=T(L("q1tI"))})(this,function(U){return function(E){var T={};function e(t){if(T[t])return T[t].exports;var l=T[t]={i:t,l:!1,exports:{}};return E[t].call(l.exports,l,l.exports,e),l.l=!0,l.exports}return e.m=E,e.c=T,e.i=function(t){return t},e.d=function(t,l,s){e.o(t,l)||Object.defineProperty(t,l,{configurable:!1,enumerable:!0,get:s})},e.n=function(t){var l=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(l,"a",l),l},e.o=function(t,l){return Object.prototype.hasOwnProperty.call(t,l)},e.p="",e(e.s=546)}([function(E,T,e){var t=e(166),l=e(16),s=t.mix({},t,{assign:t.mix,merge:t.deepMix,cloneDeep:t.clone,isFinite,isNaN,snapEqual:t.isNumberEqual,remove:t.pull,inArray:t.contains,toAllPadding:function(r){var h=0,n=0,i=0,a=0;return s.isNumber(r)||s.isString(r)?h=n=i=a=r:s.isArray(r)?(h=r[0],i=s.isNil(r[1])?r[0]:r[1],a=s.isNil(r[2])?r[0]:r[2],n=s.isNil(r[3])?i:r[3]):s.isObject(r)&&(h=r.top||0,i=r.right||0,a=r.bottom||0,n=r.left||0),[h,i,a,n]},getClipByRange:function(r){var h=r.tl,n=r.br,i=new l.Rect({attrs:{x:h.x,y:h.y,width:n.x-h.x,height:n.y-h.y}});return i}});s.Array={groupToMap:t.groupToMap,group:t.group,merge:t.merge,values:t.valuesOfKey,getRange:t.getRange,firstValue:t.firstValue,remove:t.pull},E.exports=s},function(E,T,e){var t=e(150),l={};t.merge(l,t,{mixin:function(c,r){var h=c.CFG?"CFG":"ATTRS";if(c&&r){c._mixins=r,c[h]=c[h]||{};var n={};l.each(r,function(i){l.augment(c,i);var a=i[h];a&&l.merge(n,a)}),c[h]=l.merge(n,c[h])}}}),E.exports=l},function(E,T,e){var t=e(39),l=e(4),s=function(r,h){if(!!r){var n=void 0;if(l(r))for(var i=0,a=r.length;i<a&&(n=h(r[i],i),n!==!1);i++);else if(t(r)){for(var o in r)if(r.hasOwnProperty(o)&&(n=h(r[o],o),n===!1))break}}};E.exports=s},function(E,T,e){var t=e(31),l=e(166),s=l.mix({assign:l.mix,isFinite,isNaN,Group:t.Group,Event:t.Event},l);E.exports=s},function(E,T,e){var t=e(17),l=Array.isArray?Array.isArray:function(s){return t(s,"Array")};E.exports=l},function(E,T,e){var t=e(0),l=e(132),s={version:"3.5.15",renderer:"canvas",trackingInfo:{},animate:!0,widthRatio:{column:1/2,rose:.9999999,multiplePie:1/1.3},showSinglePoint:!1,connectNulls:!1,scales:{},registerTheme:function(r,h){l[r]=h},setTheme:function(r){var h={};t.isObject(r)?h=r:t.indexOf(Object.keys(l),r)!==-1?h=l[r]:h=l.default,t.deepMix(s,h)}};s.setTheme("default"),E.exports=s},function(E,T){var e=function(l){return l==null};E.exports=e},function(E,T,e){var t=e(1),l=e(331),s=e(133),c=e(76),r=function i(a){i.superclass.constructor.call(this,a)};r.ATTRS={},t.extend(r,s);var h={matrix:"matrix",path:"path",points:"points",lineDash:"lineDash"};function n(i){for(var a=[],o=0;o<i.length;o++)t.isArray(i[o])?a.push([].concat(i[o])):a.push(i[o]);return a}t.augment(r,l,{isShape:!0,drawInner:function(a){var o=this,u=o._attrs;o.createPath(a);var f=a.globalAlpha;if(o.hasFill()){var v=u.fillOpacity;!t.isNil(v)&&v!==1?(a.globalAlpha=v,a.fill(),a.globalAlpha=f):a.fill()}if(o.hasStroke()){var b=o._attrs.lineWidth;if(b>0){var y=u.strokeOpacity;!t.isNil(y)&&y!==1&&(a.globalAlpha=y),a.stroke()}}o.afterPath(a)},afterPath:function(){},isHitBox:function(){return!0},isHit:function(a,o){var u=this,f=[a,o,1];if(u.invert(f),u.isHitBox()){var v=u.getBBox();if(v&&!c.box(v.minX,v.maxX,v.minY,v.maxY,f[0],f[1]))return!1}var b=u._attrs.clip;if(b){if(b.invert(f,u.get("canvas")),b.isPointInPath(f[0],f[1]))return u.isPointInPath(f[0],f[1])}else return u.isPointInPath(f[0],f[1]);return!1},calculateBox:function(){return null},getHitLineWidth:function(){var a=this._attrs,o=a.lineAppendWidth||0,u=a.lineWidth||0;return u+o},clearTotalMatrix:function(){this._cfg.totalMatrix=null,this._cfg.region=null},clearBBox:function(){this._cfg.box=null,this._cfg.region=null},getBBox:function(){var a=this._cfg.box;return a||(a=this.calculateBox(),a&&(a.x=a.minX,a.y=a.minY,a.width=a.maxX-a.minX,a.height=a.maxY-a.minY),this._cfg.box=a),a},clone:function(){var a=this,o=null,u=a._attrs,f={};return t.each(u,function(v,b){h[b]&&t.isArray(u[b])?f[b]=n(u[b]):f[b]=u[b]}),o=new a.constructor({attrs:f}),o._cfg.zIndex=a._cfg.zIndex,o}}),E.exports=r},function(E,T,e){function t(M){if(M===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M}function l(M,x){M.prototype=Object.create(x.prototype),M.prototype.constructor=M,M.__proto__=x}var s=e(65),c=e(227),r=e(120),h=e(0),n=e(5),i=e(294),a=e(9),o=e(300),u=e(298),f=e(299),v=e(313),b=["color","shape","size"],y="_origin";function g(M){return(h.isString(M)||h.isPlainObject(M))&&(M=[M]),h.each(M,function(x,m){h.isObject(x)||(M[m]={type:x})}),M}var _=function(M){l(m,M);var x=m.prototype;x.getDefaultCfg=function(){return{_id:null,type:"base",coord:null,attrs:{},view:null,data:[],scales:{},container:null,labelContainer:null,shapeContainer:null,attrOptions:{},styleOptions:null,selectedOptions:null,activedOptions:null,hasDefaultAdjust:!1,adjusts:null,shapeType:null,generatePoints:!1,sortable:!1,labelCfg:null,shareTooltip:!0,tooltipCfg:null,animate:!0,animateCfg:null,visible:!0}};function m(S){var P;return P=M.call(this,S)||this,P.viewTheme=P.get("viewTheme"),h.assign(t(P),o,u,f),P.get("container")&&P._initContainer(),P._initOptions(),P}return x._initOptions=function(){var P=this.get("adjusts");P&&(P=g(P),this.set("adjusts",P))},x._createScale=function(P,A){var O=this.get("scales"),R=O[P];return R||(R=this.get("view").createScale(P,A),O[P]=R),R},x._setAttrOptions=function(P,A){var O=this.get("attrOptions");O[P]=A},x._createAttrOption=function(P,A,O,R){var W={};W.field=A,O?h.isFunction(O)?W.callback=O:W.values=O:P!=="color"&&(W.values=R),this._setAttrOptions(P,W)},x.position=function(P){return this._setAttrOptions("position",{field:P}),this},x.color=function(P,A){var O=this.viewTheme||n;return this._createAttrOption("color",P,A,O.colors),this},x.size=function(P,A){var O=this.viewTheme||n;return this._createAttrOption("size",P,A,O.sizes),this},x.shape=function(P,A){var O=this.viewTheme||n,R=this.get("type"),W=O.shapes[R]||[];return this._createAttrOption("shape",P,A,W),this},x.opacity=function(P,A){var O=this.viewTheme||n;return this._createAttrOption("opacity",P,A,O.opacities),this},x.style=function(P,A){var O=this.get("styleOptions");O||(O={},this.set("styleOptions",O)),h.isObject(P)&&(A=P,P=null);var R;return P&&(R=v(P)),O.fields=R,O.style=A,this},x.label=function(P,A,O){var R=this,W=R.get("labelCfg");W||(W={},R.set("labelCfg",W));var F;return P&&(F=v(P)),W.fields=F,h.isFunction(A)?(O||(O={}),W.callback=A):h.isObject(A)&&(O=A),W.globalCfg=O,this},x.tooltip=function(P,A){var O=this.get("tooltipCfg");if(O||(O={}),P===!1)this.set("tooltipCfg",!1);else{var R;P&&(R=v(P)),O.fields=R,O.cfg=A}return this.set("tooltipCfg",O),this},x.animate=function(P){return this.set("animateCfg",P),this},x.active=function(P,A){return P===!1?this.set("allowActive",!1):h.isObject(P)?(this.set("allowActive",!0),this.set("activedOptions",P)):(this.set("allowActive",!0),this.set("activedOptions",A)),this},x.adjust=function(P){return this.get("hasDefaultAdjust")||(P&&(P=g(P)),this.set("adjusts",P)),this},x.select=function(P,A){return P===!1?this.set("allowSelect",!1):h.isObject(P)?(this.set("allowSelect",!0),this.set("selectedOptions",P)):(this.set("allowSelect",!0),this.set("selectedOptions",A)),this},x.hasAdjust=function(P){var A=this,O=A.get("adjusts");if(!P)return!1;var R=!1;return h.each(O,function(W){if(W.type===P)return R=!0,!1}),R},x.hasStack=function(){var P=this.get("isStacked");return h.isNil(P)&&(P=this.hasAdjust("stack"),this.set("isStacked",P)),P},x.isInCircle=function(){var P=this.get("coord");return P&&P.isPolar},x._initContainer=function(){var P=this,A=P.get("shapeContainer");if(!A){var O=P.get("container"),R=P.get("view"),W=R&&R.get("_id");A=O.addGroup({viewId:W,visible:P.get("visible")}),P.set("shapeContainer",A)}},x.init=function(){var P=this;if(P._initContainer(),P._initAttrs(),P.get("tooltipCfg")&&P.get("tooltipCfg").fields){var A=P.get("tooltipCfg").fields;h.each(A,function(R){P._createScale(R)})}var O=P._processData();P.get("adjusts")&&P._adjust(O),P.set("dataArray",O)},x._initAttrs=function(){var P=this,A=P.get("attrs"),O=P.get("attrOptions"),R=P.get("coord"),W=P.viewTheme||n,F=!1;for(var Z in O)if(O.hasOwnProperty(Z)){var V=O[Z],k=h.upperFirst(Z),Y=v(V.field);Z==="position"&&(V.coord=R,Y.length===1&&R.type==="theta"&&(Y.unshift("1"),F=!0));for(var K=[],it=0;it<Y.length;it++){var ct=Y[it],ht=P._createScale(ct);Z==="color"&&h.isNil(V.values)&&(ht.values.length<=8?V.values=F?W.colors_pie:W.colors:ht.values.length<=16?V.values=F?W.colors_pie_16:W.colors_16:V.values=W.colors_24,h.isNil(V.values)&&(V.values=W.colors)),K.push(ht)}if(R.type==="theta"&&Z==="position"&&K.length>1){var ut=K[1],It=0,Nt=Math.max.apply(null,ut.values);isFinite(Nt)||(Nt=1),ut.change({nice:!1,min:It,max:Nt})}V.scales=K;var Lt=new s[k](V);A[Z]=Lt}},x._processData=function(){for(var P=this,A=this.get("data"),O=[],R=this._groupData(A),W=0;W<R.length;W++){var F=R[W],Z=P._saveOrigin(F);O.push(P._numberic(Z))}return O},x._groupData=function(P){var A=this._getGroupScales(),O=A.map(function(R){return R.field});return h.Array.group(P,O)},x._saveOrigin=function(P){for(var A=[],O=0;O<P.length;O++){var R=P[O],W={};for(var F in R)W[F]=R[F];W[y]=R,A.push(W)}return A},x._numberic=function(P){for(var A=this.getAttr("position"),O=A.scales,R=[],W=0;W<P.length;W++){for(var F=P[W],Z=!0,V=0;V<Math.min(2,O.length);V++){var k=O[V];if(k.isCategory){var Y=k.field;F[Y]=k.translate(F[Y]),Number.isNaN(F[Y])&&(Z=!1)}}Z&&R.push(F)}return R},x._getGroupScales=function(){var P=this,A=P.get("groupScales");if(!A){A=[];var O=P.get("attrs");h.each(O,function(R){if(b.includes(R.type)){var W=R.scales;h.each(W,function(F){F.isCategory&&h.indexOf(A,F)===-1&&A.push(F)})}}),P.set("groupScales",A)}return A},x._updateStackRange=function(P,A,O){for(var R=h.Array.merge(O),W=A.min,F=A.max,Z=0;Z<R.length;Z++){var V=R[Z];if(!!h.isArray(V[P])){var k=Math.min.apply(null,V[P]),Y=Math.max.apply(null,V[P]);k<W&&(W=k),Y>F&&(F=Y)}}(W<A.min||F>A.max)&&A.change({min:W,max:F})},x._adjust=function(P){if(!(!P||!P.length)){var A=this,O=A.get("adjusts"),R=this.viewTheme||n,W=A.getYScale(),F=A.getXScale(),Z=F.field,V=W?W.field:null;h.each(O,function(k){var Y=h.mix({xField:Z,yField:V},k),K=h.upperFirst(k.type);if(K==="Dodge"){var it=[];if(F.isCategory||F.isIdentity)it.push("x");else if(!W)it.push("y");else throw new Error("dodge is not support linear attribute, please use category attribute!");Y.adjustNames=it,Y.dodgeRatio=Y.dodgeRatio||R.widthRatio.column}else if(K==="Stack"){var ct=A.get("coord");if(!W){Y.height=ct.getHeight();var ht=A.getDefaultValue("size")||3;Y.size=ht}!ct.isTransposed&&h.isNil(Y.reverseOrder)&&(Y.reverseOrder=!0)}var ut=new c[K](Y);ut.processAdjust(P),K==="Stack"&&W&&A._updateStackRange(V,W,P)})}},x.setCoord=function(P){this.set("coord",P);var A=this.getAttr("position"),O=this.get("shapeContainer");O.setMatrix(P.matrix),A&&(A.coord=P)},x.paint=function(){var P=this,A=P.get("dataArray"),O=[],R=P.getShapeFactory();R.setCoord(P.get("coord")),P.set("shapeFactory",R);var W=P.get("shapeContainer");P._beforeMapping(A);for(var F=0;F<A.length;F++){var Z=A[F],V=F;Z=P._mapping(Z),O.push(Z),P.draw(Z,W,R,V)}P.get("labelCfg")&&P._addLabels(h.union.apply(null,O),W.get("children")),P.get("sortable")?P.set("dataArray",O):P._sort(O)},x._sort=function(P){var A=this,O=A.getXScale(),R=O.field;h.each(P,function(W){W.sort(function(F,Z){return O.translate(F[y][R])-O.translate(Z[y][R])})}),A.set("dataArray",P)},x._beforeMapping=function(P){var A=this;if(A.get("sortable")){var O=A.getXScale(),R=O.field;h.each(P,function(W){W.sort(function(F,Z){return O.translate(F[R])-O.translate(Z[R])})})}A.get("generatePoints")&&(h.each(P,function(W){A._generatePoints(W)}),h.each(P,function(W,F){var Z=P[F+1];Z&&(W[0].nextPoints=Z[0].points)}))},x._addLabels=function(P,A){var O=this,R=O.get("type"),W=O.get("viewTheme")||n,F=O.get("coord"),Z=i.getLabelsClass(F.type,R),V=O.get("container"),k=h.map(O.get("labelCfg").fields,function(K){return O._createScale(K)}),Y=V.addGroup(Z,{_id:this.get("_id"),labelCfg:h.mix({scales:k},O.get("labelCfg")),coord:F,geom:O,geomType:R,yScale:O.getYScale(),viewTheme:W,visible:O.get("visible")});Y.showLabels(P,A),O.set("labelContainer",Y)},x.getShapeFactory=function(){var P=this.get("shapeFactory");if(!P){var A=this.get("shapeType");P=a.getShapeFactory(A),this.set("shapeFactory",P)}return P},x._generatePoints=function(P){for(var A=this,O=A.getShapeFactory(),R=A.getAttr("shape"),W=0;W<P.length;W++){var F=P[W],Z=A.createShapePointsCfg(F),V=R?A._getAttrValues(R,F):null,k=O.getShapePoints(V,Z);F.points=k}},x.createShapePointsCfg=function(P){var A=this.getXScale(),O=this.getYScale(),R=this._normalizeValues(P[A.field],A),W;return O?W=this._normalizeValues(P[O.field],O):W=P.y?P.y:.1,{x:R,y:W,y0:O?O.scale(this.getYMinValue()):void 0}},x.getYMinValue=function(){var P=this.getYScale(),A=P.min,O=P.max,R;return A>=0?R=A:O<=0?R=O:R=0,R},x._normalizeValues=function(P,A){var O=[];if(h.isArray(P))for(var R=0;R<P.length;R++){var W=P[R];O.push(A.scale(W))}else O=A.scale(P);return O},x._mapping=function(P){for(var A=this,O=A.get("attrs"),R=[],W=0;W<P.length;W++){var F=P[W],Z={};Z[y]=F[y],Z.points=F.points,Z.nextPoints=F.nextPoints;for(var V in O)if(O.hasOwnProperty(V)){var k=O[V],Y=k.names,K=A._getAttrValues(k,F);if(Y.length>1)for(var it=0;it<K.length;it++){var ct=K[it],ht=Y[it];Z[ht]=h.isArray(ct)&&ct.length===1?ct[0]:ct}else Z[Y[0]]=K.length===1?K[0]:K}R.push(Z)}return R},x._getAttrValues=function(P,A){for(var O=P.scales,R=[],W=0;W<O.length;W++){var F=O[W],Z=F.field;F.type==="identity"?R.push(F.value):R.push(A[Z])}var V=P.mapping.apply(P,R);return V},x.getAttrValue=function(P,A){var O=this.getAttr(P),R=null;if(O){var W=this._getAttrValues(O,A);R=W[0]}return R},x.getDefaultValue=function(P){var A=this.get(P),O=this.getAttr(P);if(O){var R=O.getScale(P);R.type==="identity"&&(A=R.value)}return A},x.draw=function(P,A,O,R){for(var W=this,F=0;F<P.length;F++){var Z=P[F];W.drawPoint(Z,A,O,R+F)}},x.getCallbackCfg=function(P,A,O){if(!P)return A;var R={},W=P.map(function(F){return O[F]});return h.each(A,function(F,Z){h.isFunction(F)?R[Z]=F.apply(null,W):R[Z]=F}),R},x._getShapeId=function(P){var A=this.get("_id"),O=this.get("keyFields");if(O&&O.length>0)h.each(O,function(it){A+="-"+P[it]});else{var R=this.get("type"),W=this.getXScale(),F=this.getYScale(),Z=W.field||"x",V=F.field||"y",k=P[V],Y;W.isIdentity?Y=W.value:Y=P[Z],R==="interval"||R==="schema"?A+="-"+Y:R==="line"||R==="area"||R==="path"?A+="-"+R:A+="-"+Y+"-"+k;var K=this._getGroupScales();h.isEmpty(K)||h.each(K,function(it){var ct=it.field;it.type!=="identity"&&(A+="-"+P[ct])})}return A},x.getDrawCfg=function(P){var A=this,O={origin:P,x:P.x,y:P.y,color:P.color,size:P.size,shape:P.shape,isInCircle:A.isInCircle(),opacity:P.opacity},R=A.get("styleOptions");return R&&R.style&&(O.style=A.getCallbackCfg(R.fields,R.style,P[y])),A.get("generatePoints")&&(O.points=P.points,O.nextPoints=P.nextPoints),A.get("animate")&&(O._id=A._getShapeId(P[y])),O},x.appendShapeInfo=function(P,A){P&&(P.setSilent("index",A),P.setSilent("coord",this.get("coord")),this.get("animate")&&this.get("animateCfg")&&P.setSilent("animateCfg",this.get("animateCfg")))},x._applyViewThemeShapeStyle=function(P,A,O){var R=this,W=R.viewTheme||n,F=O.name;A?A&&(A.indexOf("hollow")>-1||A.indexOf("liquid")>-1)&&(F="hollow"+h.upperFirst(F)):O.defaultShapeType.indexOf("hollow")>-1&&(F="hollow"+h.upperFirst(F));var Z=W.shape[F]||{};P.style=h.mix({},Z,P.style)},x.drawPoint=function(P,A,O,R){var W=this,F=P.shape,Z=W.getDrawCfg(P);W._applyViewThemeShapeStyle(Z,F,O);var V=O.drawShape(F,Z,A);W.appendShapeInfo(V,R)},x.getAttr=function(P){return this.get("attrs")[P]},x.getXScale=function(){return this.getAttr("position").scales[0]},x.getYScale=function(){return this.getAttr("position").scales[1]},x.getShapes=function(){var P=[],A=this.get("shapeContainer"),O=A.get("children");return h.each(O,function(R){R.get("origin")&&P.push(R)}),P},x.getAttrsForLegend=function(){var P=this.get("attrs"),A=[];return h.each(P,function(O){b.includes(O.type)&&A.push(O)}),A},x.getFieldsForLegend=function(){var P=[],A=this.get("attrOptions");return h.each(b,function(O){var R=A[O];R&&R.field&&h.isString(R.field)&&(P=P.concat(R.field.split("*")))}),h.uniq(P)},x.changeVisible=function(P,A){var O=this;O.set("visible",P);var R=this.get("shapeContainer");R&&R.set("visible",P);var W=this.get("labelContainer");if(W&&W.set("visible",P),!A&&R){var F=R.get("canvas");F.draw()}},x.reset=function(){this.set("attrOptions",{}),this.clearInner()},x.clearInner=function(){this.clearActivedShapes(),this.clearSelected();var P=this.get("shapeContainer");P&&P.clear();var A=this.get("labelContainer");A&&A.remove(),this.set("attrs",{}),this.set("groupScales",null),this.set("labelContainer",null),this.set("xDistance",null),this.set("isStacked",null)},x.clear=function(){this.clearInner(),this.set("scales",{})},x.destroy=function(){this.clear();var P=this.get("shapeContainer");P&&P.remove(),this.offEvents(),M.prototype.destroy.call(this)},x.bindEvents=function(){this.get("view")&&(this._bindActiveAction(),this._bindSelectedAction())},x.offEvents=function(){this.get("view")&&(this._offActiveAction(),this._offSelectedAction())},m}(r);E.exports=_},function(E,T,e){var t=e(0),l=e(25),s=t.PathUtil,c={},r={_coord:null,draw:function(i,a){return this.drawShape?this.drawShape(i,a):null},setCoord:function(i){this._coord=i},parsePath:function(i,a){var o=this._coord;return i=s.parsePathString(i),o.isPolar&&a!==!1?i=l.convertPolarPath(o,i):i=l.convertNormalPath(o,i),i},parsePoint:function(i){var a=this._coord;return a.convertPoint(i)},parsePoints:function(i){var a=this._coord,o=[];return t.each(i,function(u){o.push(a.convertPoint(u))}),o}},h={defaultShapeType:null,setCoord:function(i){this._coord=i},getShape:function(i){var a=this;t.isArray(i)&&(i=i[0]);var o=a[i]||a[a.defaultShapeType];return o._coord=a._coord,o},getShapePoints:function(i,a){var o=this.getShape(i),u=o.getPoints||o.getShapePoints||this.getDefaultPoints,f=u(a);return f},getDefaultPoints:function(){return[]},getMarkerCfg:function(i,a){var o=this.getShape(i);if(!o.getMarkerCfg){var u=this.defaultShapeType;o=this.getShape(u)}return o.getMarkerCfg(a)},getSelectedCfg:function(){return{}},drawShape:function(i,a,o){var u=this.getShape(i),f=u.draw(a,o);return f&&(f.setSilent("origin",a.origin),f._id=a.yIndex?a._id+a.yIndex:a._id,f.name=this.name),f}};c.registerFactory=function(n,i){var a=t.upperFirst(n),o=t.assign({},h,i);return c[a]=o,o.name=n,o},c.registerShape=function(n,i,a){var o=t.upperFirst(n),u=c[o],f=t.assign({},r,a);return u[i]=f,f},c.getShapeFactory=function(n){var i=this;n=n||"point";var a=t.upperFirst(n);return i[a]},E.exports=c},function(E,T){function e(l,s){for(var c in s)s.hasOwnProperty(c)&&c!=="constructor"&&s[c]!==void 0&&(l[c]=s[c])}var t=function(s,c,r,h){return c&&e(s,c),r&&e(s,r),h&&e(s,h),s};E.exports=t},function(E,T,e){var t=e(17),l=function(c){return t(c,"Number")};E.exports=l},function(E,T,e){"use strict";var t=e(89);e.d(T,"f",function(){return t.h}),e.d(T,"e",function(){return t.g}),e.d(T,"d",function(){return t.f});var l=e(440);e.d(T,"c",function(){return l.b}),e.d(T,"b",function(){return l.a});var s=e(439);e.d(T,"a",function(){return s.a})},function(E,T,e){"use strict";e.d(T,"d",function(){return h}),e.d(T,"a",function(){return n}),e.d(T,"b",function(){return o}),e.d(T,"c",function(){return u}),T.g=f,T.e=v,T.f=b;var t=e(442),l=e(103),s=e.i(t.a)("start","end","cancel","interrupt"),c=[],r=0,h=1,n=2,i=3,a=4,o=5,u=6;T.h=function(g,_,M,x,m,S){var P=g.__transition;if(!P)g.__transition={};else if(M in P)return;y(g,M,{name:_,index:x,group:m,on:s,tween:c,time:S.time,delay:S.delay,duration:S.duration,ease:S.ease,timer:null,state:r})};function f(g,_){var M=b(g,_);if(M.state>r)throw new Error("too late; already scheduled");return M}function v(g,_){var M=b(g,_);if(M.state>i)throw new Error("too late; already running");return M}function b(g,_){var M=g.__transition;if(!M||!(M=M[_]))throw new Error("transition not found");return M}function y(g,_,M){var x=g.__transition,m;x[_]=M,M.timer=e.i(l.timer)(S,0,M.time);function S(R){M.state=h,M.timer.restart(P,M.delay,M.time),M.delay<=R&&P(R-M.delay)}function P(R){var W,F,Z,V;if(M.state!==h)return O();for(W in x)if(V=x[W],V.name===M.name){if(V.state===i)return e.i(l.timeout)(P);V.state===a?(V.state=u,V.timer.stop(),V.on.call("interrupt",g,g.__data__,V.index,V.group),delete x[W]):+W<_&&(V.state=u,V.timer.stop(),V.on.call("cancel",g,g.__data__,V.index,V.group),delete x[W])}if(e.i(l.timeout)(function(){M.state===i&&(M.state=a,M.timer.restart(A,M.delay,M.time),A(R))}),M.state=n,M.on.call("start",g,g.__data__,M.index,M.group),M.state===n){for(M.state=i,m=new Array(Z=M.tween.length),W=0,F=-1;W<Z;++W)(V=M.tween[W].value.call(g,g.__data__,M.index,M.group))&&(m[++F]=V);m.length=F+1}}function A(R){for(var W=R<M.duration?M.ease.call(null,R/M.duration):(M.timer.restart(O),M.state=o,1),F=-1,Z=m.length;++F<Z;)m[F].call(g,W);M.state===o&&(M.on.call("end",g,g.__data__,M.index,M.group),O())}function O(){M.state=u,M.timer.stop(),delete x[_];for(var R in x)return;delete g.__transition}}},function(E,T,e){var t=e(17),l=function(c){return t(c,"Function")};E.exports=l},function(E,T,e){var t=e(17),l=function(c){return t(c,"String")};E.exports=l},function(E,T,e){var t=e(31);E.exports=t},function(E,T){var e={}.toString,t=function(s,c){return e.call(s)==="[object "+c+"]"};E.exports=t},function(E,T,e){"use strict";e.d(T,"c",function(){return K}),T.b=it;var t=e(505),l=e(506),s=e(493),c=e(487),r=e(216),h=e(492),n=e(496),i=e(498),a=e(501),o=e(508),u=e(484),f=e(500),v=e(499),b=e(507),y=e(491),g=e(490),_=e(483),M=e(218),x=e(502),m=e(485),S=e(509),P=e(494),A=e(503),O=e(497),R=e(482),W=e(495),F=e(504),Z=e(486),V=e(488),k=e(99),Y=e(489),K=[null];function it(ht,ut){this._groups=ht,this._parents=ut}function ct(){return new it([[document.documentElement]],K)}it.prototype=ct.prototype={constructor:it,select:t.a,selectAll:l.a,filter:s.a,data:c.a,enter:r.a,exit:h.a,join:n.a,merge:i.a,order:a.a,sort:o.a,call:u.a,nodes:f.a,node:v.a,size:b.a,empty:y.a,each:g.a,attr:_.a,style:M.b,property:x.a,classed:m.a,text:S.a,html:P.a,raise:A.a,lower:O.a,append:R.a,insert:W.a,remove:F.a,clone:Z.a,datum:V.a,on:k.c,dispatch:Y.a},T.a=ct},function(E,T){E.exports={FONT_FAMILY:'"-apple-system", BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",SimSun, "sans-serif"'}},function(E,T,e){function t(f){return function(){var v=r(f),b;if(c()){var y=r(this).constructor;b=Reflect.construct(v,arguments,y)}else b=v.apply(this,arguments);return l(this,b)}}function l(f,v){return v&&(typeof v=="object"||typeof v=="function")?v:s(f)}function s(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(f){return!1}}function r(f){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)},r(f)}function h(f,v){f.prototype=Object.create(v.prototype),f.prototype.constructor=f,f.__proto__=v}var n=e(3),i=e(109),a=e(36),o=["min","max","median","start","end"],u=function(f){h(b,f);var v=t(b);function b(){return f.apply(this,arguments)||this}var y=b.prototype;return y.getDefaultCfg=function(){var _=f.prototype.getDefaultCfg.call(this);return n.mix({},_,{xScales:null,yScales:null,el:null})},y.render=function(){},y.clear=function(){var _=this,M=_.get("el");M&&M.remove(),this.set("el",null)},y.destroy=function(){this.clear(),f.prototype.destroy.call(this)},y.changeVisible=function(_){var M=this;M.set("visible",_);var x=M.get("el");!x||(x.set?x.set("visible",_):x.style.display=_?"":"none")},y.parsePoint=function(_,M){var x=this,m=x.get("xScales"),S=x.get("yScales");n.isFunction(M)&&(M=M(m,S));var P,A;if(n.isArray(M)&&n.isString(M[0])&&M[0].indexOf("%")!==-1)return this._parsePercentPoint(_,M);if(n.isArray(M))P=x._getNormalizedValue(M[0],i.getFirstScale(m)),A=x._getNormalizedValue(M[1],i.getFirstScale(S));else for(var O in M){var R=M[O];m[O]&&(P=x._getNormalizedValue(R,m[O])),S[O]&&(A=x._getNormalizedValue(R,S[O],"y"))}return!n.isNil(P)&&!n.isNil(A)&&!isNaN(P)&&!isNaN(A)?_.convert({x:P,y:A}):null},y._getNormalizedValue=function(_,M){var x;if(n.indexOf(o,_)!==-1){var m;_==="start"?x=0:_==="end"?x=1:_==="median"?(m=M.isCategory?(M.values.length-1)/2:(M.min+M.max)/2,x=M.scale(m)):(M.isCategory?m=_==="min"?0:M.values.length-1:m=M[_],x=M.scale(m))}else x=M.scale(_);return x},y._parsePercentPoint=function(_,M){var x=parseFloat(M[0])/100,m=parseFloat(M[1])/100,S=_.start,P=_.end,A={x:Math.min(S.x,P.x),y:Math.min(S.y,P.y)},O=_.width*x+A.x,R=_.height*m+A.y;return{x:O,y:R}},b}(a);E.exports=u},function(E,T){var e=function(l){return l!==null&&typeof l!="function"&&isFinite(l.length)};E.exports=e},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(478);e.d(T,"create",function(){return t.a});var l=e(61);e.d(T,"creator",function(){return l.a});var s=e(479);e.d(T,"local",function(){return s.a});var c=e(214);e.d(T,"matcher",function(){return c.a});var r=e(480);e.d(T,"mouse",function(){return r.a});var h=e(97);e.d(T,"namespace",function(){return h.a});var n=e(98);e.d(T,"namespaces",function(){return n.a});var i=e(62);e.d(T,"clientPoint",function(){return i.a});var a=e(215);e.d(T,"select",function(){return a.a});var o=e(481);e.d(T,"selectAll",function(){return o.a});var u=e(18);e.d(T,"selection",function(){return u.a});var f=e(100);e.d(T,"selector",function(){return f.a});var v=e(219);e.d(T,"selectorAll",function(){return v.a});var b=e(218);e.d(T,"style",function(){return b.a});var y=e(510);e.d(T,"touch",function(){return y.a});var g=e(511);e.d(T,"touches",function(){return g.a});var _=e(102);e.d(T,"window",function(){return _.a});var M=e(99);e.d(T,"event",function(){return M.a}),e.d(T,"customEvent",function(){return M.b})},function(E,T,e){var t=e(0),l={splitPoints:function(c){var r=[],h=c.x,n=c.y;return n=t.isArray(n)?n:[n],t.each(n,function(i,a){var o={x:t.isArray(h)?h[a]:h,y:i};r.push(o)}),r},addFillAttrs:function(c,r){r.color&&(c.fill=r.color),t.isNumber(r.opacity)&&(c.opacity=c.fillOpacity=r.opacity)},addStrokeAttrs:function(c,r){r.color&&(c.stroke=r.color),t.isNumber(r.opacity)&&(c.opacity=c.strokeOpacity=r.opacity)}};E.exports=l},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(){function f(v,b){for(var y=0;y<b.length;y++){var g=b[y];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(v,g.key,g)}}return function(v,b,y){return b&&f(v.prototype,b),y&&f(v,y),v}}(),l=e(42),s=h(l),c=e(29),r=h(c);function h(f){return f&&f.__esModule?f:{default:f}}function n(f,v){if(!(f instanceof v))throw new TypeError("Cannot call a class as a function")}function i(f,v){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:f}function a(f,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);f.prototype=Object.create(v&&v.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(f,v):f.__proto__=v)}var o=function(f){a(v,f);function v(b,y){n(this,v);var g=i(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,b));return g.getParentInfo=function(){return{id:g.id,name:g.name}},g.name=y,g}return t(v,[{key:"getChildContext",value:function(){return{addElement:this.context.addElement,updateElement:this.context.updateElement,deleteElement:this.context.deleteElement,createId:this.context.createId,getParentInfo:this.getParentInfo,getViewId:this.context.getViewId}}},{key:"componentWillMount",value:function(){var y=this.context;this.id=y.createId(),y.addElement(this.name,this.id,this.props,y.getParentInfo(),y.getViewId())}},{key:"componentWillReceiveProps",value:function(y){this.context.updateElement(this.name,this.id,y,this.context.getParentInfo(),this.context.getViewId())}},{key:"componentWillUnmount",value:function(){this.context.deleteElement(this.name,this.id)}},{key:"render",value:function(){var y=this.props.children;return y?y.length&&(y=s.default.createElement("div",null,y)):y=null,y}}]),v}(l.Component);o.contextTypes={addElement:r.default.func,updateElement:r.default.func,deleteElement:r.default.func,createId:r.default.func,getParentInfo:r.default.func,getViewId:r.default.func},o.childContextTypes={addElement:r.default.func,updateElement:r.default.func,deleteElement:r.default.func,createId:r.default.func,getParentInfo:r.default.func,getViewId:r.default.func};function u(f){var v=function(b){a(y,b);function y(g){return n(this,y),i(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,g,f))}return t(y,[{key:"getChildContext",value:function(){return{addElement:this.context.addElement,updateElement:this.context.updateElement,deleteElement:this.context.deleteElement,createId:this.context.createId,getParentInfo:this.getParentInfo,getViewId:this.context.getViewId}}}]),y}(o);return v.contextTypes={addElement:r.default.func,updateElement:r.default.func,deleteElement:r.default.func,createId:r.default.func,getParentInfo:r.default.func,getViewId:r.default.func},v.childContextTypes={addElement:r.default.func,updateElement:r.default.func,deleteElement:r.default.func,createId:r.default.func,getParentInfo:r.default.func,getViewId:r.default.func},v.displayName=f,v}o.generateBaseTypedComponent=u,T.default=o},function(E,T,e){var t=e(0),l=e(314);function s(a,o){if(!a.length)return[];for(var u=[],f=0,v=a.length;f<v;f++){var b=a[f];f===0?u.push(["M",b.x,b.y]):u.push(["L",b.x,b.y])}return o&&u.push(["Z"]),u}function c(a,o){var u=a.getCenter(),f=Math.sqrt(Math.pow(o.x-u.x,2)+Math.pow(o.y-u.y,2));return f}function r(a,o){for(var u=a.length,f=[a[0]],v=1;v<u;v=v+2){var b=o.convertPoint({x:a[v],y:a[v+1]});f.push(b.x,b.y)}return f}function h(a,o,u){var f=u.isTransposed,v=u.startAngle,b=u.endAngle,y={x:a[1],y:a[2]},g={x:o[1],y:o[2]},_=[],M=f?"y":"x",x=Math.abs(g[M]-y[M])*(b-v),m=g[M]>=y[M]?1:0,S=x>Math.PI?1:0,P=u.convertPoint(g),A=c(u,P);if(A>=.5)if(x===Math.PI*2){var O={x:(g.x+y.x)/2,y:(g.y+y.y)/2},R=u.convertPoint(O);_.push(["A",A,A,0,S,m,R.x,R.y]),_.push(["A",A,A,0,S,m,P.x,P.y])}else _.push(["A",A,A,0,S,m,P.x,P.y]);return _}function n(a){t.each(a,function(o,u){var f=o;if(f[0].toLowerCase()==="a"){var v=a[u-1],b=a[u+1];b&&b[0].toLowerCase()==="a"?v&&v[0].toLowerCase()==="l"&&(v[0]="M"):v&&v[0].toLowerCase()==="a"&&b&&b[0].toLowerCase()==="l"&&(b[0]="M")}})}var i={getLinePath:function(o,u){return s(o,u)},getSplinePath:function(o,u,f){var v=[],b=o[0],y=null;if(o.length<=2)return i.getLinePath(o,u);t.each(o,function(_){(!y||!(y.x===_.x&&y.y===_.y))&&(v.push(_.x),v.push(_.y),y=_)}),f=f||[[0,0],[1,1]];var g=l.catmullRom2bezier(v,u,f);return g.unshift(["M",b.x,b.y]),g},getPointRadius:function(o,u){var f=c(o,u);return f},getPointAngle:function(o,u){var f=o.getCenter(),v=Math.atan2(u.y-f.y,u.x-f.x);return v},convertNormalPath:function(o,u){var f=[];return t.each(u,function(v){var b=v[0];switch(b.toLowerCase()){case"m":case"l":case"c":f.push(r(v,o));break;case"z":default:f.push(v);break}}),f},convertPolarPath:function(o,u){var f=[],v,b,y,g;return t.each(u,function(_,M){var x=_[0];switch(x.toLowerCase()){case"m":case"c":case"q":f.push(r(_,o));break;case"l":v=u[M-1],b=_,y=o.isTransposed,g=y?v[v.length-2]===b[1]:v[v.length-1]===b[2],g?f=f.concat(h(v,b,o)):f.push(r(_,o));break;case"z":default:f.push(_);break}}),n(f),f}};E.exports=i},function(E,T,e){var t=e(10),l=e(2),s=e(39),c=e(6),r=function(){var h=n.prototype;h._initDefaultCfg=function(){this.type="base",this.formatter=null,this.range=[0,1],this.ticks=null,this.values=[]};function n(i){this._initDefaultCfg(),t(this,i),this.init()}return h.init=function(){},h.getTicks=function(){var a=this,o=a.ticks,u=[];return l(o,function(f){var v;s(f)?v=f:v={text:a.getText(f),tickValue:f,value:a.scale(f)},u.push(v)}),u},h.getText=function(a,o){var u=this.formatter;return a=u?u(a,o):a,(c(a)||!a.toString)&&(a=""),a.toString()},h.rangeMin=function(){return this.range[0]},h.rangeMax=function(){var a=this.range;return a[a.length-1]},h.invert=function(a){return a},h.translate=function(a){return a},h.scale=function(a){return a},h.clone=function(){var a=this,o=a.constructor,u={};return l(a,function(f,v){u[v]=a[v]}),new o(u)},h.change=function(a){return this.ticks=null,t(this,a),this.init(),this},n}();E.exports=r},function(E,T,e){"use strict";T.b=P,T.a=A,T.c=O;var t=e(22),l=e(519),s=e(520),c=e(521),r=e(522),h=e(523),n=e(525),i=e(526),a=e(527),o=e(528),u=e(529),f=e(530),v=e(531),b=e(532),y=e(533),g=e(534),_=e(535),M=e(536),x=e(63),m=e(524),S=0;function P(W,F,Z,V){this._groups=W,this._parents=F,this._name=Z,this._id=V}function A(W){return e.i(t.selection)().transition(W)}function O(){return++S}var R=t.selection.prototype;P.prototype=A.prototype={constructor:P,select:u.a,selectAll:f.a,filter:n.a,merge:i.a,selection:v.a,transition:M.a,call:R.call,nodes:R.nodes,node:R.node,size:R.size,empty:R.empty,each:R.each,on:a.a,attr:l.a,attrTween:s.a,style:b.a,styleTween:y.a,text:g.a,textTween:_.a,remove:o.a,tween:x.a,delay:c.a,duration:r.a,ease:h.a,end:m.a}},function(E,T,e){var t=e(0),l=t.DomUtil,s=["start","process","end","reset"],c=function(){var r=h.prototype;r.getDefaultCfg=function(){return{startEvent:"mousedown",processEvent:"mousemove",endEvent:"mouseup",resetEvent:"dblclick"}},r._start=function(i){var a=this;a.preStart&&a.preStart(i),a.start(i),a.onStart&&a.onStart(i)},r._process=function(i){var a=this;a.preProcess&&a.preProcess(i),a.process(i),a.onProcess&&a.onProcess(i)},r._end=function(i){var a=this;a.preEnd&&a.preEnd(i),a.end(i),a.onEnd&&a.onEnd(i)},r._reset=function(i){var a=this;a.preReset&&a.preReset(i),a.reset(i),a.onReset&&a.onReset(i)},r.start=function(){},r.process=function(){},r.end=function(){},r.reset=function(){};function h(n,i){var a=this,o=a.getDefaultCfg();t.assign(a,o,n),a.view=a.chart=i,a.canvas=i.get("canvas"),a._bindEvents()}return r._bindEvents=function(){var i=this,a=i.canvas,o=a.get("canvasDOM");i._clearEvents(),t.each(s,function(u){var f=t.upperFirst(u);i["_on"+f+"Listener"]=l.addEventListener(o,i[u+"Event"],t.wrapBehavior(i,"_"+u))})},r._clearEvents=function(){var i=this;t.each(s,function(a){var o="_on"+t.upperFirst(a)+"Listener";i[o]&&i[o].remove()})},r.destroy=function(){this._clearEvents()},h}();E.exports=c},function(E,T,e){var t=e(224),l=!0;E.exports=e(541)(t.isElement,l)},function(E,T,e){E.exports={Axis:e(240),Component:e(66),Guide:e(248),Label:e(252),Legend:e(258),Tooltip:e(263)}},function(E,T,e){E.exports={Canvas:e(328),Group:e(134),Shape:e(7),Arc:e(136),Circle:e(137),Dom:e(138),Ellipse:e(139),Fan:e(140),Image:e(141),Line:e(142),Marker:e(74),Path:e(145),Polygon:e(146),Polyline:e(147),Rect:e(148),Text:e(149),PathSegment:e(50),PathUtil:e(77),Event:e(135),version:"3.3.6"}},function(E,T,e){"use strict";T.b=c,T.c=r,T.a=h;var t=e(209);function l(n,i){return function(a){return n+a*i}}function s(n,i,a){return n=Math.pow(n,a),i=Math.pow(i,a)-n,a=1/a,function(o){return Math.pow(n+o*i,a)}}function c(n,i){var a=i-n;return a?l(n,a>180||a<-180?a-360*Math.round(a/360):a):e.i(t.a)(isNaN(n)?i:n)}function r(n){return(n=+n)==1?h:function(i,a){return a-i?s(i,a,n):e.i(t.a)(isNaN(i)?a:i)}}function h(n,i){var a=i-n;return a?l(n,a):e.i(t.a)(isNaN(n)?i:n)}},function(E,T,e){var t=e(10),l=function(){var s=c.prototype;s._initDefaultCfg=function(){this.adjustNames=["x","y"]};function c(r){this._initDefaultCfg(),t(this,r)}return s.processAdjust=function(){},c}();E.exports=l},function(E,T,e){var t=e(15),l=e(4),s=e(6),c=e(10),r=e(2);function h(i,a){return t(a)?a:i.invert(i.scale(a))}var n=function(){function i(o){var u=this;this.type="base",this.name=null,this.method=null,this.values=[],this.scales=[],this.linear=null;var f=null,v=this.callback;if(o.callback){var b=o.callback;f=function(){for(var g=arguments.length,_=new Array(g),M=0;M<g;M++)_[M]=arguments[M];var x=b.apply(void 0,_);return s(x)&&(x=v.apply(u,_)),x}}c(this,o),f&&c(this,{callback:f})}var a=i.prototype;return a._getAttrValue=function(u,f){var v=this.values;if(u.isCategory&&!this.linear){var b=u.translate(f);return v[b%v.length]}var y=u.scale(f);return this.getLinearValue(y)},a.getLinearValue=function(u){var f=this.values,v=f.length-1,b=Math.floor(v*u),y=v*u-b,g=f[b],_=b===v?g:f[b+1],M=g+(_-g)*y;return M},a.callback=function(u){var f=this,v=f.scales[0],b=null;return v.type==="identity"?b=v.value:b=f._getAttrValue(v,u),b},a.getNames=function(){for(var u=this.scales,f=this.names,v=Math.min(u.length,f.length),b=[],y=0;y<v;y++)b.push(f[y]);return b},a.getFields=function(){var u=this.scales,f=[];return r(u,function(v){f.push(v.field)}),f},a.getScale=function(u){var f=this.scales,v=this.names,b=v.indexOf(u);return f[b]},a.mapping=function(){for(var u=this.scales,f=this.callback,v=arguments.length,b=new Array(v),y=0;y<v;y++)b[y]=arguments[y];var g=b;if(f){for(var _=0,M=b.length;_<M;_++)b[_]=this._toOriginParam(b[_],u[_]);g=f.apply(this,b)}return g=[].concat(g),g},a._toOriginParam=function(u,f){var v=u;if(!f.isLinear)if(l(u)){v=[];for(var b=0,y=u.length;b<y;b++)v.push(h(f,u[b]))}else v=h(f,u);return v},i}();E.exports=n},function(E,T,e){function t(b){return function(){var y=r(b),g;if(c()){var _=r(this).constructor;g=Reflect.construct(y,arguments,_)}else g=y.apply(this,arguments);return l(this,g)}}function l(b,y){return y&&(typeof y=="object"||typeof y=="function")?y:s(b)}function s(b){if(b===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(b){return!1}}function r(b){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},r(b)}function h(b,y){b.prototype=Object.create(y.prototype),b.prototype.constructor=b,b.__proto__=y}var n=e(36),i=e(3),a=e(108),o=e(110),u=e(19),f=u.FONT_FAMILY,v=function(b){h(g,b);var y=t(g);function g(){return b.apply(this,arguments)||this}var _=g.prototype;return _.getDefaultCfg=function(){var x=b.prototype.getDefaultCfg.call(this);return i.mix({},x,{_id:null,zIndex:4,ticks:null,line:null,tickLine:null,subTickCount:0,subTickLine:null,grid:null,label:{offset:0,offsetX:0,offsetY:0,textStyle:{},autoRotate:!0,autoHide:!1,formatter:null},labelItems:[],title:{autoRotate:!0,textStyle:{}},autoPaint:!0})},_.beforeRender=function(){var x=this,m=x.get("title"),S=x.get("label"),P=x.get("grid");m&&x.set("title",i.deepMix({autoRotate:!0,textStyle:{fontSize:12,fill:"#ccc",textBaseline:"middle",fontFamily:f,textAlign:"center"},offset:48},m)),S&&x.set("label",i.deepMix({autoRotate:!0,autoHide:!0,textStyle:{fontSize:12,fill:"#ccc",textBaseline:"middle",fontFamily:f},offset:10},S)),P&&x.set("grid",i.deepMix({lineStyle:{lineWidth:1,stroke:"#C0D0E0"}},P))},_.render=function(){var x=this;x.beforeRender();var m=x.get("label");m&&x.renderLabels(),x.get("autoPaint")&&x.paint(),i.isNil(x.get("title"))||x.renderTitle(),x.get("group").sort()},_.renderLabels=function(){var x=this,m=x.get("group"),S=x.get("label"),P=new o({name:"axis-label"});x.set("labelRenderer",P),P.set("labelCfg",S);var A=["formatter","htmlTemplate","labelLine","textStyle","useHtml"];i.each(A,function(O){S[O]&&P.set(O,S[O])}),P.set("coord",x.get("coord")),P.set("group",m.addGroup()),P.set("canvas",x.get("canvas"))},_._parseTicks=function(x){x=x||[];for(var m=x.length,S=0;S<m;S++){var P=x[S];i.isObject(P)||(x[S]=this.parseTick(P,S,m))}return this.set("ticks",x),x},_._addTickItem=function(x,m,S,P){P===void 0&&(P="");var A=this.get("tickItems"),O=this.get("subTickItems"),R=this.getTickEnd(m,S,x),W={x1:m.x,y1:m.y,x2:R.x,y2:R.y};A||(A=[]),O||(O=[]),P==="sub"?O.push(W):A.push(W),this.set("tickItems",A),this.set("subTickItems",O)},_._renderLine=function(){var x=this,m=x.get("line"),S;if(m){S=x.getLinePath(),m=i.mix({path:S},m);var P=x.get("group"),A=P.addShape("path",{attrs:m});A.name="axis-line",x.get("appendInfo")&&A.setSilent("appendInfo",x.get("appendInfo")),x.set("lineShape",A)}},_._processCatTicks=function(){var x=this,m=x.get("label"),S=x.get("tickLine"),P=x.get("ticks");P=x._parseTicks(P);for(var A=x._getNormalizedTicks(P),O=0;O<A.length;O+=3){var R=x.getTickPoint(A[O]),W=x.getTickPoint(A[O+1]),F=x.getTickPoint(A[O+2]),Z=Math.floor(O/3),V=P[Z];S&&(Z===0&&x._addTickItem(Z,W,S.length),x._addTickItem(Z,F,S.length)),m&&x.addLabel(V,R,Z)}},_._getNormalizedTicks=function(x){var m=0;x.length>1&&(m=(x[1].value-x[0].value)/2);for(var S=[],P=0;P<x.length;P++){var A=x[P],O=A.value,R=A.value-m,W=A.value+m;S.push(O,R,W)}var F=i.arrayUtil.getRange(S);return S.map(function(Z){var V=(Z-F.min)/(F.max-F.min);return V})},_.addLabel=function(x,m,S){var P=this,A=P.get("labelItems"),O=P.get("labelRenderer"),R=i.deepMix({},P.get("label")),W;if(O){var F=P.get("_labelOffset");i.isNil(P.get("label").offset)||(F=P.get("label").offset);var Z=P.getSideVector(F,m,S);m={x:m.x+Z[0]+R.offsetX,y:m.y+Z[1]+R.offsetY},R.text=x.text,R.x=m.x,R.y=m.y,R.point=m,R.textAlign=P.getTextAnchor(Z),m.rotate&&(R.rotate=m.rotate),A.push(R)}return W},_._processTicks=function(){var x=this,m=x.get("label"),S=x.get("subTickCount"),P=x.get("tickLine"),A=x.get("ticks");if(A=x._parseTicks(A),i.each(A,function(R,W){var F=x.getTickPoint(R.value,W);P&&x._addTickItem(W,F,P.length),m&&x.addLabel(R,F,W)}),S){var O=x.get("subTickLine");i.each(A,function(R,W){if(W>0){var F=R.value-A[W-1].value;F=F/(x.get("subTickCount")+1);for(var Z=1;Z<=S;Z++){var V={text:"",value:W?A[W-1].value+Z*F:Z*F},k=x.getTickPoint(V.value),Y=void 0;O&&O.length?Y=O.length:Y=parseInt(P.length*(3/5),10),x._addTickItem(Z-1,k,Y,"sub")}}})}},_._addTickLine=function(x,m){var S=this,P=i.mix({},m),A=[];i.each(x,function(W){A.push(["M",W.x1,W.y1]),A.push(["L",W.x2,W.y2])}),delete P.length,P.path=A;var O=S.get("group"),R=O.addShape("path",{attrs:P});R.name="axis-ticks",R._id=S.get("_id")+"-ticks",R.set("coord",S.get("coord")),S.get("appendInfo")&&R.setSilent("appendInfo",S.get("appendInfo"))},_._renderTicks=function(){var x=this,m=x.get("tickItems"),S=x.get("subTickItems");if(!i.isEmpty(m)){var P=x.get("tickLine");x._addTickLine(m,P)}if(!i.isEmpty(S)){var A=x.get("subTickLine")||x.get("tickLine");x._addTickLine(S,A)}},_._renderGrid=function(){var x=this.get("grid");if(!!x){x.coord=this.get("coord"),x.appendInfo=this.get("appendInfo");var m=this.get("group");this.set("gridGroup",m.addGroup(a,x))}},_._renderLabels=function(){var x=this,m=x.get("labelRenderer"),S=x.get("labelItems");m&&(m.set("items",S),m._dryDraw())},_.paint=function(){var x=this,m=x.get("tickLine"),S=!0;m&&m.hasOwnProperty("alignWithLabel")&&(S=m.alignWithLabel),x._renderLine();var P=x.get("type"),A=P==="cat"||P==="timeCat";A&&S===!1?x._processCatTicks():x._processTicks(),x._renderTicks(),x._renderGrid(),x._renderLabels();var O=this.get("label");O&&O.autoRotate&&x.autoRotateLabels(),O&&O.autoHide&&x.autoHideLabels()},_.parseTick=function(x,m,S){return{text:x,value:m/(S-1)}},_.getTextAnchor=function(x){var m=Math.abs(x[1]/x[0]),S;return m>=1?S="center":x[0]>0?S="start":S="end",S},_.getMaxLabelWidth=function(x){var m=x.getLabels(),S=0;return i.each(m,function(P){var A=P.getBBox(),O=A.width;S<O&&(S=O)}),S},_.getMaxLabelHeight=function(x){var m=x.getLabels(),S=0;return i.each(m,function(P){var A=P.getBBox(),O=A.height;S<O&&(S=O)}),S},_.destroy=function(){var x=this;if(!x.destroyed){var m=x.get("gridGroup");m&&m.remove();var S=this.get("labelRenderer");S&&S.destroy();var P=x.get("group");P.destroy(),b.prototype.destroy.call(this)}},_.clear=function(){var x=this,m=x.get("group");if(!m.get("destroyed")&&m.get("children").length){var S=x.get("gridGroup");S&&S.clear();var P=this.get("labelRenderer");P&&P.clear();var A=x.get("group");A.clear()}},_.autoRotateLabels=function(){},_.autoHideLabels=function(){},_.renderTitle=function(){},_.getLinePath=function(){},_.getTickPoint=function(){},_.getTickEnd=function(){},_.getSideVector=function(){},g}(n);E.exports=v},function(E,T,e){function t(a){return function(){var o=r(a),u;if(c()){var f=r(this).constructor;u=Reflect.construct(o,arguments,f)}else u=o.apply(this,arguments);return l(this,u)}}function l(a,o){return o&&(typeof o=="object"||typeof o=="function")?o:s(a)}function s(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(a){return!1}}function r(a){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(u){return u.__proto__||Object.getPrototypeOf(u)},r(a)}function h(a,o){a.prototype=Object.create(o.prototype),a.prototype.constructor=a,a.__proto__=o}var n=e(66),i=function(a){h(u,a);var o=t(u);function u(){return a.apply(this,arguments)||this}var f=u.prototype;return f.getDefaultCfg=function(){return{_id:null,canvas:null,container:null,group:null,capture:!1,coord:null,offset:[0,0],plotRange:null,position:[0,0],visible:!0,zIndex:1}},f._init=function(){},f.clear=function(){},f.destroy=function(){a.prototype.destroy.call(this)},f.beforeRender=function(){},f.render=function(){},f.afterRender=function(){},f.beforeDraw=function(){},f.draw=function(){},f.afterDraw=function(){},f.show=function(){},f.hide=function(){},f.setOffset=function(){},f.setPosition=function(){},f.setVisible=function(){},f.setZIndex=function(){},u}(n);E.exports=i},function(E,T,e){var t=e(1),l=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,s=/[^\s\,]+/ig,c={};E.exports={parseRadius:function(h){var n=0,i=0,a=0,o=0;return t.isArray(h)?h.length===1?n=i=a=o=h[0]:h.length===2?(n=a=h[0],i=o=h[1]):h.length===3?(n=h[0],i=o=h[1],a=h[2]):(n=h[0],i=h[1],a=h[2],o=h[3]):n=i=a=o=h,{r1:n,r2:i,r3:a,r4:o}},parsePath:function(h){if(h=h||[],t.isArray(h))return h;if(t.isString(h))return h=h.match(l),t.each(h,function(n,i){if(n=n.match(s),n[0].length>1){var a=n[0].charAt(0);n.splice(1,0,n[0].substr(1)),n[0]=a}t.each(n,function(o,u){isNaN(o)||(n[u]=+o)}),h[i]=n}),h},numberToColor:function(h){var n=c[h];if(!n){for(var i=h.toString(16),a=i.length;a<6;a++)i="0"+i;n="#"+i,c[h]=n}return n}}},function(E,T,e){var t=e(6);function l(s){return t(s)?"":s.toString()}E.exports=l},function(E,T){var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},t=function(s){var c=typeof s=="undefined"?"undefined":e(s);return s!==null&&c==="object"||c==="function"};E.exports=t},function(E,T,e){var t=e(86),l=e(17),s=function(r){if(!t(r)||!l(r,"Object"))return!1;if(Object.getPrototypeOf(r)===null)return!0;for(var h=r;Object.getPrototypeOf(h)!==null;)h=Object.getPrototypeOf(h);return Object.getPrototypeOf(r)===h};E.exports=s},function(E,T,e){"use strict";T.b=c,T.c=r,T.a=h;var t=e(202);function l(n,i){return function(a){return n+a*i}}function s(n,i,a){return n=Math.pow(n,a),i=Math.pow(i,a)-n,a=1/a,function(o){return Math.pow(n+o*i,a)}}function c(n,i){var a=i-n;return a?l(n,a>180||a<-180?a-360*Math.round(a/360):a):e.i(t.a)(isNaN(n)?i:n)}function r(n){return(n=+n)==1?h:function(i,a){return a-i?s(i,a,n):e.i(t.a)(isNaN(i)?a:i)}}function h(n,i){var a=i-n;return a?l(n,a):e.i(t.a)(isNaN(n)?i:n)}},function(E,T){E.exports=U},function(E,T,e){"use strict";function t(a,o){if(!(a instanceof o))throw new TypeError("Cannot call a class as a function")}function l(a,o){for(var u=0;u<o.length;u++){var f=o[u];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(a,f.key,f)}}function s(a,o,u){return o&&l(a.prototype,o),u&&l(a,u),a}var c=e(56),r=e(10),h=c.mat3,n=c.vec3,i=function(){s(a,[{key:"getDefaultCfg",value:function(){return{isTransposed:!1,matrix:[1,0,0,0,1,0,0,0,1]}}}]);function a(o){t(this,a);var u=this.getDefaultCfg();r(this,u,o),this.init()}return s(a,[{key:"init",value:function(){var u=this.start,f=this.end,v={x:(u.x+f.x)/2,y:(u.y+f.y)/2};this.center=v,this.width=Math.abs(f.x-u.x),this.height=Math.abs(f.y-u.y)}},{key:"_swapDim",value:function(u){var f=this[u];if(f){var v=f.start;f.start=f.end,f.end=v}}},{key:"getCenter",value:function(){return this.center}},{key:"getWidth",value:function(){return this.width}},{key:"getHeight",value:function(){return this.height}},{key:"convertDim",value:function(u,f){var v=this[f],b=v.start,y=v.end;return b+u*(y-b)}},{key:"invertDim",value:function(u,f){var v=this[f],b=v.start,y=v.end;return(u-b)/(y-b)}},{key:"convertPoint",value:function(u){return u}},{key:"invertPoint",value:function(u){return u}},{key:"applyMatrix",value:function(u,f){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,b=this.matrix,y=[u,f,v];return n.transformMat3(y,y,b),y}},{key:"invertMatrix",value:function(u,f){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,b=this.matrix,y=h.invert([],b),g=[u,f,v];return n.transformMat3(g,g,y),g}},{key:"convert",value:function(u){var f=this.convertPoint(u),v=f.x,b=f.y,y=this.applyMatrix(v,b,1);return{x:y[0],y:y[1]}}},{key:"invert",value:function(u){var f=this.invertMatrix(u.x,u.y,1);return this.invertPoint({x:f[0],y:f[1]})}},{key:"rotate",value:function(u){var f=this.matrix,v=this.center;return h.translate(f,f,[-v.x,-v.y]),h.rotate(f,f,u),h.translate(f,f,[v.x,v.y]),this}},{key:"reflect",value:function(u){switch(u){case"x":this._swapDim("x");break;case"y":this._swapDim("y");break;default:this._swapDim("y")}return this}},{key:"scale",value:function(u,f){var v=this.matrix,b=this.center;return h.translate(v,v,[-b.x,-b.y]),h.scale(v,v,[u,f]),h.translate(v,v,[b.x,b.y]),this}},{key:"translate",value:function(u,f){var v=this.matrix;return h.translate(v,v,[u,f]),this}},{key:"transpose",value:function(){return this.isTransposed=!this.isTransposed,this}}]),a}();E.exports=i},function(E,T,e){function t(_,M){_.prototype=Object.create(M.prototype),_.prototype.constructor=_,_.__proto__=M}var l=e(0),s=e(279),c=e(16),r=c.Canvas,h=l.DomUtil,n=e(5),i=e(283),a=e(121),o=e(123),u=e(122),f=e(124),v="auto";function b(_,M){var x=!1;return l.each(_,function(m){var S=[].concat(m.values),P=[].concat(M.values);if(m.type===M.type&&m.field===M.field&&S.sort().toString()===P.sort().toString()){x=!0;return}}),x}function y(_,M){return l.isEqualWith(_,M,function(x,m){return x===m})}var g=function(_){t(M,_);function M(){return _.apply(this,arguments)||this}var x=M.prototype;return x.getDefaultCfg=function(){var S=_.prototype.getDefaultCfg.call(this);return l.mix(S,{id:null,forceFit:!1,container:null,wrapperEl:null,canvas:null,width:500,height:500,pixelRatio:null,backPlot:null,frontPlot:null,plotBackground:null,padding:n.plotCfg.padding,background:null,autoPaddingAppend:5,limitInPlot:!1,renderer:n.renderer,views:[]})},x.init=function(){var S=this,P=S.get("viewTheme");S._initCanvas(),S._initPlot(),S._initEvents(),_.prototype.init.call(this);var A=new a.Tooltip({chart:S,viewTheme:P,options:{}});S.set("tooltipController",A);var O=new a.Legend({chart:S,viewTheme:P});S.set("legendController",O),S.set("_id","chart"),S.emit("afterinit")},x._isAutoPadding=function(){var S=this.get("padding");return l.isArray(S)?S.includes(v):S===v},x._getAutoPadding=function(){for(var S=this.get("padding"),P=this.get("frontPlot"),A=P.getBBox(),O=this.get("backPlot"),R=u(O,f(this.get("plotRange"))),W=o(A,R),F=[0-W.minY,W.maxX-this.get("width"),W.maxY-this.get("height"),0-W.minX],Z=l.toAllPadding(S),V=0;V<Z.length;V++)if(Z[V]===v){var k=Math.max(0,F[V]);Z[V]=k+this.get("autoPaddingAppend")}return Z},x._initCanvas=function(){var S=this.get("container"),P=this.get("id");!S&&P&&(S=P,this.set("container",P));var A=this.get("width"),O=this.get("height");if(l.isString(S)){if(S=document.getElementById(S),!S)throw new Error("Please specify the container for the chart!");this.set("container",S)}var R=h.createDom('<div style="position:relative;"></div>');S.appendChild(R),this.set("wrapperEl",R),this.get("forceFit")&&(A=h.getWidth(S,A),this.set("width",A));var W=this.get("renderer"),F=new r({containerDOM:R,width:A,height:O,pixelRatio:W==="svg"?1:this.get("pixelRatio"),renderer:W});this.set("canvas",F)},x._initPlot=function(){var S=this;S._initPlotBack();var P=S.get("canvas"),A=P.addGroup({zIndex:1}),O=P.addGroup({zIndex:0}),R=P.addGroup({zIndex:3});S.set("backPlot",A),S.set("middlePlot",O),S.set("frontPlot",R)},x._initPlotBack=function(){var S=this,P=S.get("canvas"),A=S.get("viewTheme"),O=P.addGroup(i,{padding:this.get("padding"),plotBackground:l.mix({},A.plotBackground,S.get("plotBackground")),background:l.mix({},A.background,S.get("background"))});S.set("plot",O),S.set("plotRange",O.get("plotRange"))},x._initEvents=function(){this.get("forceFit")&&window.addEventListener("resize",l.wrapBehavior(this,"_initForceFitEvent"))},x._initForceFitEvent=function(){var S=setTimeout(l.wrapBehavior(this,"forceFit"),200);clearTimeout(this.get("resizeTimer")),this.set("resizeTimer",S)},x._renderLegends=function(){var S=this.get("options"),P=S.legends;if(l.isNil(P)||P!==!1){var A=this.get("legendController");if(A.options=P||{},A.plotRange=this.get("plotRange"),P&&P.custom)A.addCustomLegend();else{var O=this.getAllGeoms(),R=[];l.each(O,function(F){var Z=F.get("view"),V=F.getAttrsForLegend();l.each(V,function(k){var Y=k.type,K=k.getScale(Y);if(K.field&&K.type!=="identity"&&!b(R,K)){R.push(K);var it=Z.getFilteredOutValues(K.field);A.addLegend(K,k,F,it)}})});var W=this.getYScales();R.length===0&&W.length>1&&A.addMixedLegend(W,O)}A.alignLegends()}},x._renderTooltips=function(){var S=this.get("options");if(l.isNil(S.tooltip)||S.tooltip!==!1){var P=this.get("tooltipController");P.options=S.tooltip||{},P.renderTooltip()}},x.getAllGeoms=function(){var S=[];S=S.concat(this.get("geoms"));var P=this.get("views");return l.each(P,function(A){S=S.concat(A.get("geoms"))}),S},x.forceFit=function(){var S=this;if(!(!S||S.destroyed)){var P=S.get("container"),A=S.get("width"),O=h.getWidth(P,A);if(O!==0&&O!==A){var R=S.get("height");S.changeSize(O,R)}return S}},x.resetPlot=function(){var S=this.get("plot"),P=this.get("padding");y(P,S.get("padding"))||(S.set("padding",P),S.repaint())},x.changeSize=function(S,P){var A=this,O=A.get("canvas");O.changeSize(S,P);var R=this.get("plot");return A.set("width",S),A.set("height",P),R.repaint(),this.set("keepPadding",!0),A.repaint(),this.set("keepPadding",!1),this.emit("afterchangesize"),A},x.changeWidth=function(S){return this.changeSize(S,this.get("height"))},x.changeHeight=function(S){return this.changeSize(this.get("width"),S)},x.view=function(S){S=S||{},S.theme=this.get("theme"),S.parent=this,S.backPlot=this.get("backPlot"),S.middlePlot=this.get("middlePlot"),S.frontPlot=this.get("frontPlot"),S.canvas=this.get("canvas"),l.isNil(S.animate)&&(S.animate=this.get("animate")),S.options=l.mix({},this._getSharedOptions(),S.options);var P=new s(S);return P.set("_id","view"+this.get("views").length),this.get("views").push(P),this.emit("addview",{view:P}),P},x.removeView=function(S){var P=this.get("views");l.Array.remove(P,S),S.destroy()},x._getSharedOptions=function(){var S=this.get("options"),P={};return l.each(["scales","coord","axes"],function(A){P[A]=l.cloneDeep(S[A])}),P},x.getViewRegion=function(){var S=this.get("plotRange");return{start:S.bl,end:S.tr}},x.legend=function(S,P){var A=this.get("options");A.legends||(A.legends={});var O={};return S===!1?A.legends=!1:l.isObject(S)?O=S:l.isString(S)?O[S]=P:O=P,l.mix(A.legends,O),this},x.tooltip=function(S,P){var A=this.get("options");return A.tooltip||(A.tooltip={}),S===!1?A.tooltip=!1:l.isObject(S)?l.mix(A.tooltip,S):l.mix(A.tooltip,P),this},x.clear=function(){this.emit("beforeclear");for(var S=this.get("views");S.length>0;){var P=S.shift();P.destroy()}_.prototype.clear.call(this);var A=this.get("canvas");return this.resetPlot(),A.draw(),this.emit("afterclear"),this},x.clearInner=function(){var S=this.get("views");l.each(S,function(O){O.clearInner()});var P=this.get("tooltipController");if(P&&P.clear(),!this.get("keepLegend")){var A=this.get("legendController");A&&A.clear()}_.prototype.clearInner.call(this)},x.drawComponents=function(){_.prototype.drawComponents.call(this),this.get("keepLegend")||this._renderLegends()},x.render=function(){var S=this;if(!S.get("keepPadding")&&S._isAutoPadding()){S.beforeRender(),S.drawComponents();var P=S._getAutoPadding(),A=S.get("plot");y(A.get("padding"),P)||(A.set("padding",P),A.repaint())}var O=S.get("middlePlot");if(S.get("limitInPlot")&&!O.attr("clip")){var R=l.getClipByRange(S.get("plotRange"));O.attr("clip",R)}_.prototype.render.call(this),S._renderTooltips()},x.repaint=function(){this.get("keepPadding")||this.resetPlot(),_.prototype.repaint.call(this)},x.changeVisible=function(S){var P=this.get("wrapperEl"),A=S?"":"none";P.style.display=A},x.toDataURL=function(){var S=this,P=S.get("canvas"),A=S.get("renderer"),O=P.get("el"),R="";if(A==="svg"){var W=O.cloneNode(!0),F=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),Z=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",F);Z.replaceChild(W,Z.documentElement);var V=new XMLSerializer().serializeToString(Z);R="data:image/svg+xml;charset=utf8,"+encodeURIComponent(V)}else A==="canvas"&&(R=O.toDataURL("image/png"));return R},x.downloadImage=function(S){var P=this,A=document.createElement("a"),O=P.get("renderer"),R=(S||"chart")+(O==="svg"?".svg":".png"),W=P.get("canvas");W.get("timeline").stopAllAnimations(),setTimeout(function(){var F=P.toDataURL();if(window.Blob&&window.URL&&O!=="svg"){for(var Z=F.split(","),V=Z[0].match(/:(.*?);/)[1],k=atob(Z[1]),Y=k.length,K=new Uint8Array(Y);Y--;)K[Y]=k.charCodeAt(Y);var it=new Blob([K],{type:V});window.navigator.msSaveBlob?window.navigator.msSaveBlob(it,R):A.addEventListener("click",function(){A.download=R,A.href=window.URL.createObjectURL(it)})}else A.addEventListener("click",function(){A.download=R,A.href=F});var ct=document.createEvent("MouseEvents");ct.initEvent("click",!1,!1),A.dispatchEvent(ct)},16)},x.showTooltip=function(S){var P=this.getViewsByPoint(S);if(P.length){var A=this.get("tooltipController");A.showTooltip(S,P)}return this},x.lockTooltip=function(){var S=this.get("tooltipController");return S.lockTooltip(),this},x.unlockTooltip=function(){var S=this.get("tooltipController");return S.unlockTooltip(),this},x.hideTooltip=function(){var S=this.get("tooltipController");return S.hideTooltip(),this},x.getTooltipItems=function(S){var P=this,A=P.getViewsByPoint(S),O=[];return l.each(A,function(R){var W=R.get("geoms");l.each(W,function(F){var Z=F.get("dataArray"),V=[];l.each(Z,function(k){var Y=F.findPoint(S,k);if(Y){var K=F.getTipItems(Y);V=V.concat(K)}}),O=O.concat(V)})}),O},x.destroy=function(){this.emit("beforedestroy"),clearTimeout(this.get("resizeTimer"));var S=this.get("canvas"),P=this.get("wrapperEl");P.parentNode.removeChild(P),_.prototype.destroy.call(this),S.destroy(),window.removeEventListener("resize",l.getWrapBehavior(this,"_initForceFitEvent")),this.emit("afterdestroy")},M}(s);E.exports=g},function(E,T,e){var t=e(154),l=e(16),s=e(119),c=e(44),r=e(5),h=e(9),n=e(0),i={version:r.version,Animate:s,Chart:c,Global:r,Scale:t,Shape:h,Util:n,G:l,DomUtil:n.DomUtil,MatrixUtil:n.MatrixUtil,PathUtil:n.PathUtil};i.track=function(){console.warn("G2 tracks nothing ;-)")},typeof window!="undefined"&&(window.G2?console.warn("There are multiple versions of G2. Version "+i.version+"'s reference is 'window.G2_3'"):window.G2=i),E.exports=i},function(E,T,e){var t=e(5),l=e(0),s=l.assign,c=l.isNil,r=l.isArray,h=l.cloneDeep,n=l.wrapBehavior,i=l.getWrapBehavior,a=function(){var o=u.prototype;o.getDefaultCfg=function(){return{chart:null,group:null,showTitle:!0,autoSetAxis:!0,padding:10,eachView:null,fields:[],colTitle:{offsetY:-15,style:{fontSize:14,textAlign:"center",fill:"#666",fontFamily:t.fontFamily}},rowTitle:{offsetX:15,style:{fontSize:14,textAlign:"center",rotate:90,fill:"#666",fontFamily:t.fontFamily}}}};function u(f){var v=this.getDefaultCfg();s(this,v,f),this.init()}return o.init=function(){if(!this.chart)throw new Error("Facets Error: please specify the chart!");this._bindEvent(),this.initContainer(),this.chart.get("data")&&this.initViews()},o.initContainer=function(){var v=this.chart,b=v.get("frontPlot"),y=b.addGroup();this.group=y},o.initViews=function(){for(var v=this.chart,b=v.get("data"),y=this.eachView,g=this.generateFacets(b),_=0;_<g.length;_++){var M=g[_],x=M.region,m=v.view({start:x.start,end:x.end,padding:this.padding});m.source(M.data),this.beforeProcessView(m,M),y&&y(m,M),this.afterProcessView(m,M),M.view=m}this.facets=g},o.beforeProcessView=function(){},o.afterProcessView=function(v,b){this.autoSetAxis&&this.processAxis(v,b)},o.processAxis=function(v,b){var y=v.get("options"),g=v.get("geoms");if((!y.coord.type||y.coord.type==="rect")&&g.length){var _=g[0].get("attrOptions").position.field,M=r(_)?_:_.split("*").map(function(P){return P.trim()}),x=M[0],m=M[1];c(y.axes)&&(y.axes={});var S=y.axes;S!==!1&&(x&&S[x]!==!1&&(S[x]=S[x]||{},this.setXAxis(x,S,b)),m&&S[m]!==!1&&(S[m]=S[m]||{},this.setYAxis(m,S,b)))}},o.setXAxis=function(){},o.setYAxis=function(){},o.renderTitle=function(v,b){this.drawColTitle(v,b)},o.getScaleText=function(v,b,y){var g;if(v){var _=y.get("scales"),M=_[v];M||(M=y.createScale(v)),g=M.getText(b)}else g=b;return g},o.drawColTitle=function(v,b){var y=this.getScaleText(b.colField,b.colValue,v),g=s({position:["50%","0%"],content:y},this.colTitle);v.guide().text(g)},o.drawRowTitle=function(v,b){var y=this.getScaleText(b.rowField,b.rowValue,v),g=s({position:["100%","50%"],content:y},h(this.rowTitle));v.guide().text(g)},o.getFilter=function(v){var b=function(g){var _=!0;return v.forEach(function(M){var x=M.field,m=M.value,S=!0;!c(m)&&x&&(S=g[x]===m),_=_&&S}),_};return b},o.getFieldValues=function(v,b){for(var y=[],g={},_=0;_<b.length;_++){var M=b[_],x=M[v];!c(x)&&!g[x]&&(y.push(x),g[x]=!0)}return y},o.getRegion=function(v,b,y,g){var _=1/b,M=1/v,x={x:_*y,y:M*g},m={x:x.x+_,y:x.y+M};return{start:x,end:m}},o.generateFacets=function(){return[]},o._bindEvent=function(){var v=this.chart;v.on("afterchangedata",n(this,"onDataChange")),v.on("beforeclear",n(this,"onClear")),v.on("beforedestroy",n(this,"destroy")),v.on("beforepaint",n(this,"onPaint")),v.on("setdata",n(this,"onDataChange"))},o._clearEvent=function(){var v=this.chart;v&&(v.off("afterchangedata",i(this,"onDataChange")),v.off("beforeclear",i(this,"onClear")),v.off("beforedestroy",i(this,"destroy")),v.off("beforepaint",i(this,"onPaint")),v.off("setdata",i(this,"onDataChange")))},o._clearFacets=function(){var v=this.facets,b=this.chart;if(v)for(var y=0;y<v.length;y++){var g=v[y];b.removeView(g.view)}this.facets=null},o.onClear=function(){this.onRemove()},o.onPaint=function(){if(this.showTitle)for(var v=this.facets,b=0;b<v.length;b++){var y=v[b],g=y.view;this.renderTitle(g,y)}},o.onDataChange=function(){this._clearFacets(),this.initViews()},o.onRemove=function(){this._clearFacets(),this._clearEvent(),this.group&&this.group.remove(),this.chart=null,this.facets=null,this.group=null},o.destroy=function(){this.onRemove(),this.destroyed=!0},u}();E.exports=a},function(E,T,e){var t=e(1);function l(n,i,a,o){return{x:Math.cos(o)*a+n,y:Math.sin(o)*a+i}}function s(n,i,a,o){var u,f;return o?n<i?(u=i-n,f=Math.PI*2-a+n):n>a&&(u=Math.PI*2-n+i,f=n-a):(u=n-i,f=a-n),u>f?a:i}function c(n,i,a,o){var u=0;return a-i>=Math.PI*2&&(u=Math.PI*2),i=t.mod(i,Math.PI*2),a=t.mod(a,Math.PI*2)+u,n=t.mod(n,Math.PI*2),o?i>=a?n>a&&n<i?n:s(n,a,i,!0):n<i||n>a?n:s(n,i,a):i<=a?i<n&&n<a?n:s(n,i,a,!0):n>i||n<a?n:s(n,a,i)}function r(n,i,a,o,u,f,v,b,y){var g=[v,b],_=[n,i],M=[1,0],x=t.vec2.subtract([],g,_),m=t.vec2.angleTo(M,x);m=c(m,o,u,f);var S=[a*Math.cos(m)+n,a*Math.sin(m)+i];y&&(y.x=S[0],y.y=S[1]);var P=t.vec2.distance(S,g);return P}function h(n,i,a,o,u,f){var v=0,b=Math.PI/2,y=Math.PI,g=Math.PI*3/2,_=[],M=c(v,o,u,f);M===v&&_.push(l(n,i,a,v)),M=c(b,o,u,f),M===b&&_.push(l(n,i,a,b)),M=c(y,o,u,f),M===y&&_.push(l(n,i,a,y)),M=c(g,o,u,f),M===g&&_.push(l(n,i,a,g)),_.push(l(n,i,a,o)),_.push(l(n,i,a,u));var x=Infinity,m=-Infinity,S=Infinity,P=-Infinity;return t.each(_,function(A){x>A.x&&(x=A.x),m<A.x&&(m=A.x),S>A.y&&(S=A.y),P<A.y&&(P=A.y)}),{minX:x,minY:S,maxX:m,maxY:P}}E.exports={nearAngle:c,projectPoint:function(i,a,o,u,f,v,b,y){var g={};return r(i,a,o,u,f,v,b,y,g),g},pointDistance:r,box:h}},function(E,T,e){var t=e(1).vec2;E.exports={at:function(s,c,r){return(c-s)*r+s},pointDistance:function(s,c,r,h,n,i){var a=[r-s,h-c];if(t.exactEquals(a,[0,0]))return NaN;var o=[-a[1],a[0]];t.normalize(o,o);var u=[n-s,i-c];return Math.abs(t.dot(u,o))},box:function(s,c,r,h,n){var i=n/2,a=Math.min(s,r),o=Math.max(s,r),u=Math.min(c,h),f=Math.max(c,h);return{minX:a-i,minY:u-i,maxX:o+i,maxY:f+i}},len:function(s,c,r,h){return Math.sqrt((r-s)*(r-s)+(h-c)*(h-c))}}},function(E,T,e){var t=e(37),l=e(50),s=Math.PI,c=Math.sin,r=Math.cos,h=Math.atan2,n=10,i=s/3;function a(f,v,b,y,g,_,M){var x,m,S,P,A,O,R;if(!v.fill){var W=v.arrowLength||n,F=v.arrowAngle?v.arrowAngle*s/180:i;R=h(y-_,b-g),A=Math.abs(v.lineWidth*r(R))/2,O=Math.abs(v.lineWidth*c(R))/2,M&&(A=-A,O=-O),x=g+W*r(R+F/2),m=_+W*c(R+F/2),S=g+W*r(R-F/2),P=_+W*c(R-F/2),f.beginPath(),f.moveTo(x-A,m-O),f.lineTo(g-A,_-O),f.lineTo(S-A,P-O),f.moveTo(g-A,_-O),f.lineTo(g+A,_+O),f.moveTo(g,_),f.stroke()}}function o(f){var v=[],b=t.parsePath(f.path),y;if(!Array.isArray(b)||b.length===0||b[0][0]!=="M"&&b[0][0]!=="m")return!1;for(var g=b.length,_=0;_<b.length;_++){var M=b[_];y=new l(M,y,_===g-1),v.push(y)}return v}function u(f,v,b,y,g,_,M){var x=M?v.startArrow:v.endArrow,m=x.d,S=0,P=g-b,A=_-y,O=Math.atan(P/A);A===0&&P<0?S=Math.PI:P>0&&A>0?S=Math.PI/2-O:P<0&&A<0?S=-Math.PI/2-O:P>=0&&A<0?S=-O-Math.PI/2:P<=0&&A>0&&(S=Math.PI/2-O);var R=o(x);if(!!R){m&&(M?(g=g+Math.sin(Math.abs(O))*m,_=_+Math.cos(Math.abs(O))*m-.5*f.lineWidth):(g=g-Math.sin(Math.abs(O))*m,_=_-Math.cos(Math.abs(O))*m+.5*f.lineWidth)),f.save(),f.beginPath(),f.translate(g,_),f.rotate(S);for(var W=0;W<R.length;W++)R[W].draw(f);f.setTransform(1,0,0,1,0,0),f.fillStyle=f.strokeStyle,f.fill(),f.restore()}}E.exports={addStartArrow:function(v,b,y,g,_,M){typeof b.startArrow=="object"?u(v,b,y,g,_,M,!0):b.startArrow&&a(v,b,y,g,_,M,!0)},addEndArrow:function(v,b,y,g,_,M){typeof b.endArrow=="object"?u(v,b,y,g,_,M,!1):b.endArrow&&a(v,b,y,g,_,M,!1)}}},function(E,T,e){var t=e(1),l=e(76),s=e(75),c=e(144),r=e(143),h=t.vec3,n=t.mat3,i=["m","l","c","a","q","h","v","t","s","z"];function a(g,_,M){return{x:M.x+g,y:M.y+_}}function o(g,_){return{x:_.x+(_.x-g.x),y:_.y+(_.y-g.y)}}function u(g){return Math.sqrt(g[0]*g[0]+g[1]*g[1])}function f(g,_){return(g[0]*_[0]+g[1]*_[1])/(u(g)*u(_))}function v(g,_){return(g[0]*_[1]<g[1]*_[0]?-1:1)*Math.acos(f(g,_))}function b(g,_,M,x,m,S,P){var A=t.mod(t.toRadian(P),Math.PI*2),O=g.x,R=g.y,W=_.x,F=_.y,Z=Math.cos(A)*(O-W)/2+Math.sin(A)*(R-F)/2,V=-1*Math.sin(A)*(O-W)/2+Math.cos(A)*(R-F)/2,k=Z*Z/(m*m)+V*V/(S*S);k>1&&(m*=Math.sqrt(k),S*=Math.sqrt(k));var Y=m*m*(V*V)+S*S*(Z*Z),K=Math.sqrt((m*m*(S*S)-Y)/Y);M===x&&(K*=-1),isNaN(K)&&(K=0);var it=K*m*V/S,ct=K*-S*Z/m,ht=(O+W)/2+Math.cos(A)*it-Math.sin(A)*ct,ut=(R+F)/2+Math.sin(A)*it+Math.cos(A)*ct,It=v([1,0],[(Z-it)/m,(V-ct)/S]),Nt=[(Z-it)/m,(V-ct)/S],Lt=[(-1*Z-it)/m,(-1*V-ct)/S],_t=v(Nt,Lt);return f(Nt,Lt)<=-1&&(_t=Math.PI),f(Nt,Lt)>=1&&(_t=0),x===0&&_t>0&&(_t=_t-2*Math.PI),x===1&&_t<0&&(_t=_t+2*Math.PI),[g,ht,ut,m,S,It,_t,A,x]}var y=function(_,M,x){this.preSegment=M,this.isLast=x,this.init(_,M)};t.augment(y,{init:function(_,M){var x=_[0];M=M||{endPoint:{x:0,y:0}};var m=i.indexOf(x)>=0,S=m?x.toUpperCase():x,P=_,A,O,R,W,F=M.endPoint,Z=P[1],V=P[2];switch(S){default:break;case"M":m?W=a(Z,V,F):W={x:Z,y:V},this.command="M",this.params=[F,W],this.subStart=W,this.endPoint=W;break;case"L":m?W=a(Z,V,F):W={x:Z,y:V},this.command="L",this.params=[F,W],this.subStart=M.subStart,this.endPoint=W,this.endTangent=function(){return[W.x-F.x,W.y-F.y]},this.startTangent=function(){return[F.x-W.x,F.y-W.y]};break;case"H":m?W=a(Z,0,F):W={x:Z,y:F.y},this.command="L",this.params=[F,W],this.subStart=M.subStart,this.endPoint=W,this.endTangent=function(){return[W.x-F.x,W.y-F.y]},this.startTangent=function(){return[F.x-W.x,F.y-W.y]};break;case"V":m?W=a(0,Z,F):W={x:F.x,y:Z},this.command="L",this.params=[F,W],this.subStart=M.subStart,this.endPoint=W,this.endTangent=function(){return[W.x-F.x,W.y-F.y]},this.startTangent=function(){return[F.x-W.x,F.y-W.y]};break;case"Q":m?(A=a(Z,V,F),O=a(P[3],P[4],F)):(A={x:Z,y:V},O={x:P[3],y:P[4]}),this.command="Q",this.params=[F,A,O],this.subStart=M.subStart,this.endPoint=O,this.endTangent=function(){return[O.x-A.x,O.y-A.y]},this.startTangent=function(){return[F.x-A.x,F.y-A.y]};break;case"T":m?O=a(Z,V,F):O={x:Z,y:V},M.command==="Q"?(A=o(M.params[1],F),this.command="Q",this.params=[F,A,O],this.subStart=M.subStart,this.endPoint=O,this.endTangent=function(){return[O.x-A.x,O.y-A.y]},this.startTangent=function(){return[F.x-A.x,F.y-A.y]}):(this.command="TL",this.params=[F,O],this.subStart=M.subStart,this.endPoint=O,this.endTangent=function(){return[O.x-F.x,O.y-F.y]},this.startTangent=function(){return[F.x-O.x,F.y-O.y]});break;case"C":m?(A=a(Z,V,F),O=a(P[3],P[4],F),R=a(P[5],P[6],F)):(A={x:Z,y:V},O={x:P[3],y:P[4]},R={x:P[5],y:P[6]}),this.command="C",this.params=[F,A,O,R],this.subStart=M.subStart,this.endPoint=R,this.endTangent=function(){return[R.x-O.x,R.y-O.y]},this.startTangent=function(){return[F.x-A.x,F.y-A.y]};break;case"S":m?(O=a(Z,V,F),R=a(P[3],P[4],F)):(O={x:Z,y:V},R={x:P[3],y:P[4]}),M.command==="C"?(A=o(M.params[2],F),this.command="C",this.params=[F,A,O,R],this.subStart=M.subStart,this.endPoint=R,this.endTangent=function(){return[R.x-O.x,R.y-O.y]},this.startTangent=function(){return[F.x-A.x,F.y-A.y]}):(this.command="SQ",this.params=[F,O,R],this.subStart=M.subStart,this.endPoint=R,this.endTangent=function(){return[R.x-O.x,R.y-O.y]},this.startTangent=function(){return[F.x-O.x,F.y-O.y]});break;case"A":{var k=Z,Y=V,K=P[3],it=P[4],ct=P[5];m?W=a(P[6],P[7],F):W={x:P[6],y:P[7]},this.command="A";var ht=b(F,W,it,ct,k,Y,K);this.params=ht;var ut=M.subStart;this.subStart=ut,this.endPoint=W;var It=ht[5]%(Math.PI*2);t.isNumberEqual(It,Math.PI*2)&&(It=0);var Nt=ht[6]%(Math.PI*2);t.isNumberEqual(Nt,Math.PI*2)&&(Nt=0);var Lt=.001;this.startTangent=function(){ct===0&&(Lt*=-1);var _t=ht[3]*Math.cos(It-Lt)+ht[1],mt=ht[4]*Math.sin(It-Lt)+ht[2];return[_t-ut.x,mt-ut.y]},this.endTangent=function(){var _t=ht[6];_t-Math.PI*2<1e-4&&(_t=0);var mt=ht[3]*Math.cos(It+_t+Lt)+ht[1],At=ht[4]*Math.sin(It+_t-Lt)+ht[2];return[F.x-mt,F.y-At]};break}case"Z":this.command="Z",this.params=[F,M.subStart],this.subStart=M.subStart,this.endPoint=M.subStart}},isInside:function(_,M,x){var m=this,S=m.command,P=m.params,A=m.box;if(A&&!l.box(A.minX,A.maxX,A.minY,A.maxY,_,M))return!1;switch(S){default:break;case"M":return!1;case"TL":case"L":case"Z":return l.line(P[0].x,P[0].y,P[1].x,P[1].y,x,_,M);case"SQ":case"Q":return l.quadraticline(P[0].x,P[0].y,P[1].x,P[1].y,P[2].x,P[2].y,x,_,M);case"C":return l.cubicline(P[0].x,P[0].y,P[1].x,P[1].y,P[2].x,P[2].y,P[3].x,P[3].y,x,_,M);case"A":{var O=P,R=O[1],W=O[2],F=O[3],Z=O[4],V=O[5],k=O[6],Y=O[7],K=O[8],it=F>Z?F:Z,ct=F>Z?1:F/Z,ht=F>Z?Z/F:1;O=[_,M,1];var ut=[1,0,0,0,1,0,0,0,1];return n.translate(ut,ut,[-R,-W]),n.rotate(ut,ut,-Y),n.scale(ut,ut,[1/ct,1/ht]),h.transformMat3(O,O,ut),l.arcline(0,0,it,V,V+k,1-K,x,O[0],O[1])}}return!1},draw:function(_){var M=this.command,x=this.params,m,S,P;switch(M){default:break;case"M":_.moveTo(x[1].x,x[1].y);break;case"TL":case"L":_.lineTo(x[1].x,x[1].y);break;case"SQ":case"Q":m=x[1],S=x[2],_.quadraticCurveTo(m.x,m.y,S.x,S.y);break;case"C":m=x[1],S=x[2],P=x[3],_.bezierCurveTo(m.x,m.y,S.x,S.y,P.x,P.y);break;case"A":{var A=x,O=A[1],R=A[2],W=O,F=R,Z=A[3],V=A[4],k=A[5],Y=A[6],K=A[7],it=A[8],ct=Z>V?Z:V,ht=Z>V?1:Z/V,ut=Z>V?V/Z:1;_.translate(W,F),_.rotate(K),_.scale(ht,ut),_.arc(0,0,ct,k,k+Y,1-it),_.scale(1/ht,1/ut),_.rotate(-K),_.translate(-W,-F);break}case"Z":_.closePath();break}},getBBox:function(_){var M=_/2,x=this.params,m,S,P,A;switch(this.command){default:case"M":case"Z":break;case"TL":case"L":this.box={minX:Math.min(x[0].x,x[1].x)-M,maxX:Math.max(x[0].x,x[1].x)+M,minY:Math.min(x[0].y,x[1].y)-M,maxY:Math.max(x[0].y,x[1].y)+M};break;case"SQ":case"Q":for(S=c.extrema(x[0].x,x[1].x,x[2].x),P=0,A=S.length;P<A;P++)S[P]=c.at(x[0].x,x[1].x,x[2].x,S[P]);for(S.push(x[0].x,x[2].x),m=c.extrema(x[0].y,x[1].y,x[2].y),P=0,A=m.length;P<A;P++)m[P]=c.at(x[0].y,x[1].y,x[2].y,m);m.push(x[0].y,x[2].y),this.box={minX:Math.min.apply(Math,S)-M,maxX:Math.max.apply(Math,S)+M,minY:Math.min.apply(Math,m)-M,maxY:Math.max.apply(Math,m)+M};break;case"C":for(S=s.extrema(x[0].x,x[1].x,x[2].x,x[3].x),P=0,A=S.length;P<A;P++)S[P]=s.at(x[0].x,x[1].x,x[2].x,x[3].x,S[P]);for(m=s.extrema(x[0].y,x[1].y,x[2].y,x[3].y),P=0,A=m.length;P<A;P++)m[P]=s.at(x[0].y,x[1].y,x[2].y,x[3].y,m[P]);S.push(x[0].x,x[3].x),m.push(x[0].y,x[3].y),this.box={minX:Math.min.apply(Math,S)-M,maxX:Math.max.apply(Math,S)+M,minY:Math.min.apply(Math,m)-M,maxY:Math.max.apply(Math,m)+M};break;case"A":{var O=x,R=O[1],W=O[2],F=O[3],Z=O[4],V=O[5],k=O[6],Y=O[7],K=O[8],it=V,ct=V+k,ht=r.xExtrema(Y,F,Z),ut=Infinity,It=-Infinity,Nt=[it,ct];for(P=-Math.PI*2;P<=Math.PI*2;P+=Math.PI){var Lt=ht+P;K===1?it<Lt&&Lt<ct&&Nt.push(Lt):ct<Lt&&Lt<it&&Nt.push(Lt)}for(P=0,A=Nt.length;P<A;P++){var _t=r.xAt(Y,F,Z,R,Nt[P]);_t<ut&&(ut=_t),_t>It&&(It=_t)}var mt=r.yExtrema(Y,F,Z),At=Infinity,rt=-Infinity,Mt=[it,ct];for(P=-Math.PI*2;P<=Math.PI*2;P+=Math.PI){var z=mt+P;K===1?it<z&&z<ct&&Mt.push(z):ct<z&&z<it&&Mt.push(z)}for(P=0,A=Mt.length;P<A;P++){var $=r.yAt(Y,F,Z,W,Mt[P]);$<At&&(At=$),$>rt&&(rt=$)}this.box={minX:ut-M,maxX:It+M,minY:At-M,maxY:rt+M};break}}}}),E.exports=y},function(E,T,e){function t(n,i){n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i}var l=e(6),s=e(2),c=e(26),r=e(351),h=function(n){t(i,n);function i(){return n.apply(this,arguments)||this}var a=i.prototype;return a._initDefaultCfg=function(){n.prototype._initDefaultCfg.call(this);var u=this;u.type="linear",u.isLinear=!0,u.nice=!1,u.min=null,u.minLimit=null,u.max=null,u.maxLimit=null,u.tickCount=null,u.tickInterval=null,u.minTickInterval=null,u.snapArray=null},a.init=function(){var u=this;if(!u.ticks)u.min=u.translate(u.min),u.max=u.translate(u.max),u.initTicks();else{var f=u.ticks,v=u.translate(f[0]),b=u.translate(f[f.length-1]);(l(u.min)||u.min>v)&&(u.min=v),(l(u.max)||u.max<b)&&(u.max=b)}},a.calculateTicks=function(){var u=this.min,f=this.max,v=this.minLimit,b=this.maxLimit,y=this.tickCount,g=this.tickInterval,_=this.minTickInterval,M=this.snapArray;if(y===1)throw new Error("linear scale'tickCount should not be 1");if(f<u)throw new Error("max: "+f+" should not be less than min: "+u);var x=r({min:u,max:f,minLimit:v,maxLimit:b,minCount:y,maxCount:y,interval:g,minTickInterval:_,snapArray:M});return x.ticks},a.initTicks=function(){var u=this,f=u.calculateTicks();if(u.nice)u.ticks=f,u.min=f[0],u.max=f[f.length-1];else{var v=[];s(f,function(b){b>=u.min&&b<=u.max&&v.push(b)}),v.length||(v.push(u.min),v.push(u.max)),u.ticks=v}},a.scale=function(u){if(l(u))return NaN;var f=this.max,v=this.min;if(f===v)return 0;var b=(u-v)/(f-v),y=this.rangeMin(),g=this.rangeMax();return y+b*(g-y)},a.invert=function(u){var f=(u-this.rangeMin())/(this.rangeMax()-this.rangeMin());return this.min+f*(this.max-this.min)},i}(c);c.Linear=h,E.exports=h},function(E,T,e){var t=e(15),l=e(192);E.exports={toTimeStamp:function(c){return t(c)&&(c.indexOf("T")>0?c=new Date(c).getTime():c=new Date(c.replace(/-/ig,"/")).getTime()),l(c)&&(c=c.getTime()),c}}},function(E,T,e){var t=e(21),l=Array.prototype.indexOf,s=function(r,h){return t(r)?l.call(r,h)>-1:!1};E.exports=s},function(E,T){var e=function(l){for(var s=[],c=0;c<l.length;c++)s=s.concat(l[c]);return s};E.exports=e},function(E,T){var e=1e-5;E.exports=function(l,s){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e;return Math.abs(l-s)<c}},function(E,T,e){E.exports={mat3:e(85),vec2:e(174),vec3:e(175),transform:e(173)}},function(E,T,e){var t=e(21);function l(s){return t(s)?Array.prototype.slice.call(s):[]}E.exports=l},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},l=e(45);function s(r,h){return r===h?r!==0||h!==0||1/r==1/h:r!==r&&h!==h}function c(r){return l.Util.isArray(r)?r.length:l.Util.isObject(r)?Object.keys(r).length:0}T.default=l.Util.mix({},l.Util,{shallowEqual:function(h,n){if(s(h,n))return!0;if((typeof h=="undefined"?"undefined":t(h))!=="object"||h===null||(typeof n=="undefined"?"undefined":t(n))!=="object"||n===null||l.Util.isArray(h)!==l.Util.isArray(n)||c(h)!==c(n))return!1;var i=!0;return l.Util.each(h,function(a,o){return s(a,n[o])?!0:(i=!1,i)}),i},without:function(h){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i={};return l.Util.each(h,function(a,o){l.Util.indexOf(n,o)===-1&&(i[o]=a)}),i},length:c})},function(E,T,e){"use strict";T.a=function(t,l){return t=+t,l-=t,function(s){return t+l*s}}},function(E,T,e){"use strict";T.a=function(t,l){return t=+t,l=+l,function(s){return t*(1-s)+l*s}}},function(E,T,e){"use strict";var t=e(97),l=e(98);function s(r){return function(){var h=this.ownerDocument,n=this.namespaceURI;return n===l.b&&h.documentElement.namespaceURI===l.b?h.createElement(r):h.createElementNS(n,r)}}function c(r){return function(){return this.ownerDocument.createElementNS(r.space,r.local)}}T.a=function(r){var h=e.i(t.a)(r);return(h.local?c:s)(h)}},function(E,T,e){"use strict";T.a=function(t,l){var s=t.ownerSVGElement||t;if(s.createSVGPoint){var c=s.createSVGPoint();return c.x=l.clientX,c.y=l.clientY,c=c.matrixTransform(t.getScreenCTM().inverse()),[c.x,c.y]}var r=t.getBoundingClientRect();return[l.clientX-r.left-t.clientLeft,l.clientY-r.top-t.clientTop]}},function(E,T,e){"use strict";T.b=c;var t=e(13);function l(r,h){var n,i;return function(){var a=e.i(t.e)(this,r),o=a.tween;if(o!==n){i=n=o;for(var u=0,f=i.length;u<f;++u)if(i[u].name===h){i=i.slice(),i.splice(u,1);break}}a.tween=i}}function s(r,h,n){var i,a;if(typeof n!="function")throw new Error;return function(){var o=e.i(t.e)(this,r),u=o.tween;if(u!==i){a=(i=u).slice();for(var f={name:h,value:n},v=0,b=a.length;v<b;++v)if(a[v].name===h){a[v]=f;break}v===b&&a.push(f)}o.tween=a}}T.a=function(r,h){var n=this._id;if(r+="",arguments.length<2){for(var i=e.i(t.f)(this.node(),n).tween,a=0,o=i.length,u;a<o;++a)if((u=i[a]).name===r)return u.value;return null}return this.each((h==null?l:s)(n,r,h))};function c(r,h,n){var i=r._id;return r.each(function(){var a=e.i(t.e)(this,i);(a.value||(a.value={}))[h]=n.apply(this,arguments)}),function(a){return e.i(t.f)(a,i).value[h]}}},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.setTheme=T.track=T.Interactions=T.PathUtil=T.Animate=T.Shape=T.Util=T.G2=T.Facet=T.Label=T.Guide=T.View=T.Geom=T.Tooltip=T.Legend=T.Axis=T.Coord=T.Chart=void 0;var t=e(422);Object.defineProperty(T,"Chart",{enumerable:!0,get:function(){return x(t).default}});var l=e(424);Object.defineProperty(T,"Coord",{enumerable:!0,get:function(){return x(l).default}});var s=e(420);Object.defineProperty(T,"Axis",{enumerable:!0,get:function(){return x(s).default}});var c=e(430);Object.defineProperty(T,"Legend",{enumerable:!0,get:function(){return x(c).default}});var r=e(431);Object.defineProperty(T,"Tooltip",{enumerable:!0,get:function(){return x(r).default}});var h=e(427);Object.defineProperty(T,"Geom",{enumerable:!0,get:function(){return x(h).default}});var n=e(432);Object.defineProperty(T,"View",{enumerable:!0,get:function(){return x(n).default}});var i=e(428);Object.defineProperty(T,"Guide",{enumerable:!0,get:function(){return x(i).default}});var a=e(429);Object.defineProperty(T,"Label",{enumerable:!0,get:function(){return x(a).default}});var o=e(426);Object.defineProperty(T,"Facet",{enumerable:!0,get:function(){return x(o).default}});var u=e(45),f=x(u),v=e(322),b=x(v),y=e(58),g=x(y),_=e(438),M=x(_);function x(A){return A&&A.__esModule?A:{default:A}}T.G2=f.default,T.Util=g.default,T.Shape=u.Shape,T.Animate=u.Animate,T.PathUtil=u.PathUtil,T.Interactions=b.default;var m=T.track=function(){},S=T.setTheme=function(O){var R=O;typeof O=="string"&&M.default[O]&&(R=M.default[O]),f.default.Global.setTheme(R)},P={G2:f.default,Util:g.default,Shape:u.Shape,Animate:u.Animate,PathUtil:u.PathUtil,track:m,setTheme:S,Interactions:b.default};T.default=P},function(E,T,e){E.exports={Position:e(235),Color:e(233),Shape:e(236),Size:e(237),Opacity:e(234),ColorUtil:e(107)}},function(E,T,e){function t(o){return function(){var u=r(o),f;if(c()){var v=r(this).constructor;f=Reflect.construct(u,arguments,v)}else f=u.apply(this,arguments);return l(this,f)}}function l(o,u){return u&&(typeof u=="object"||typeof u=="function")?u:s(o)}function s(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}function r(o){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)},r(o)}function h(o,u){o.prototype=Object.create(u.prototype),o.prototype.constructor=o,o.__proto__=u}var n=e(105),i=e(3),a=function(o){h(v,o);var u=t(v),f=v.prototype;f.getDefaultCfg=function(){return{}};function v(b){var y;y=o.call(this)||this;var g=s(y),_={visible:!0},M=g.getDefaultCfg();return g._attrs=_,i.deepMix(_,M,b),y}return f.get=function(y){return this._attrs[y]},f.set=function(y,g){this._attrs[y]=g},f.changeVisible=function(){},f.destroy=function(){var y=this;y._attrs={},y.removeAllListeners(),y.destroyed=!0},v}(n);E.exports=a},function(E,T,e){function t(g){return function(){var _=r(g),M;if(c()){var x=r(this).constructor;M=Reflect.construct(_,arguments,x)}else M=_.apply(this,arguments);return l(this,M)}}function l(g,_){return _&&(typeof _=="object"||typeof _=="function")?_:s(g)}function s(g){if(g===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(g){return!1}}function r(g){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(M){return M.__proto__||Object.getPrototypeOf(M)},r(g)}function h(g,_){g.prototype=Object.create(_.prototype),g.prototype.constructor=g,g.__proto__=_}var n=e(3),i=e(112),a=e(261),o=e(19),u=o.FONT_FAMILY,f=8,v=n.Event,b=n.Group,y=function(g){h(M,g);var _=t(M);function M(){return g.apply(this,arguments)||this}var x=M.prototype;return x.getDefaultCfg=function(){var S=g.prototype.getDefaultCfg.call(this);return n.mix({},S,{type:"continuous-legend",items:null,layout:"vertical",width:20,height:156,textStyle:{fill:"#333",textAlign:"center",textBaseline:"middle",stroke:"#fff",lineWidth:5,fontFamily:u},hoverTextStyle:{fill:"rgba(0,0,0,0.25)"},slidable:!0,triggerAttr:{fill:"#fff",shadowBlur:10,shadowColor:"rgba(0,0,0,0.65)",radius:2},_range:[0,100],middleBackgroundStyle:{fill:"#D9D9D9"},textOffset:4,lineStyle:{lineWidth:1,stroke:"#fff"},pointerStyle:{fill:"rgb(230, 230, 230)"}})},x._calStartPoint=function(){var S={x:10,y:this.get("titleGap")-f},P=this.get("titleShape");if(P){var A=P.getBBox();S.y+=A.height}return S},x.beforeRender=function(){var S=this.get("items");!n.isArray(S)||n.isEmpty(S)||(g.prototype.beforeRender.call(this),this.set("firstItem",S[0]),this.set("lastItem",S[S.length-1]))},x._formatItemValue=function(S){var P=this.get("formatter")||this.get("itemFormatter");return P&&(S=P.call(this,S)),S},x.render=function(){g.prototype.render.call(this),this.get("slidable")?this._renderSlider():this._renderUnslidable()},x._renderSlider=function(){var S=new b,P=new b,A=new b,O=this._calStartPoint(),R=this.get("group"),W=R.addGroup(a,{minHandleElement:S,maxHandleElement:P,backgroundElement:A,layout:this.get("layout"),range:this.get("_range"),width:this.get("width"),height:this.get("height")});W.translate(O.x,O.y),this.set("slider",W);var F=this._renderSliderShape();F.attr("clip",W.get("middleHandleElement")),this._renderTrigger()},x._addMiddleBar=function(S,P,A){return S.addShape(P,{attrs:n.mix({},A,this.get("middleBackgroundStyle"))}),S.addShape(P,{attrs:A})},x._renderTrigger=function(){var S=this.get("firstItem"),P=this.get("lastItem"),A=this.get("layout"),O=this.get("textStyle"),R=this.get("triggerAttr"),W=n.mix({},R),F=n.mix({},R),Z=n.mix({text:this._formatItemValue(S.value)+""},O),V=n.mix({text:this._formatItemValue(P.value)+""},O);A==="vertical"?(this._addVerticalTrigger("min",W,Z),this._addVerticalTrigger("max",F,V)):(this._addHorizontalTrigger("min",W,Z),this._addHorizontalTrigger("max",F,V))},x._addVerticalTrigger=function(S,P,A){var O=this.get("slider"),R=O.get(S+"HandleElement"),W=this.get("width"),F=R.addShape("rect",{attrs:n.mix({x:W/2-f-2,y:S==="min"?0:-f,width:2*f+2,height:f},P)}),Z=R.addShape("text",{attrs:n.mix(A,{x:W+this.get("textOffset"),y:S==="max"?-4:4,textAlign:"start",lineHeight:1,textBaseline:"middle"})}),V=this.get("layout"),k=V==="vertical"?"ns-resize":"ew-resize";F.attr("cursor",k),Z.attr("cursor",k),this.set(S+"ButtonElement",F),this.set(S+"TextElement",Z)},x._addHorizontalTrigger=function(S,P,A){var O=this.get("slider"),R=O.get(S+"HandleElement"),W=R.addShape("rect",{attrs:n.mix({x:S==="min"?-f:0,y:-f-this.get("height")/2,width:f,height:2*f},P)}),F=R.addShape("text",{attrs:n.mix(A,{x:S==="min"?-f-4:f+4,y:f/2+this.get("textOffset")+10,textAlign:S==="min"?"end":"start",textBaseline:"middle"})}),Z=this.get("layout"),V=Z==="vertical"?"ns-resize":"ew-resize";W.attr("cursor",V),F.attr("cursor",V),this.set(S+"ButtonElement",W),this.set(S+"TextElement",F)},x._bindEvents=function(){var S=this;if(this.get("slidable")){var P=this.get("slider");P.on("sliderchange",function(A){var O=A.range,R=S.get("firstItem").value,W=S.get("lastItem").value,F=R+O[0]/100*(W-R),Z=R+O[1]/100*(W-R);S._updateElement(F,Z);var V=new v("itemfilter",A,!0,!0);V.range=[F,Z],S.emit("itemfilter",V)})}this.get("hoverable")&&(this.get("group").on("mousemove",n.wrapBehavior(this,"_onMouseMove")),this.get("group").on("mouseleave",n.wrapBehavior(this,"_onMouseLeave")))},x._updateElement=function(S,P){var A=this.get("minTextElement"),O=this.get("maxTextElement");P>1&&(S=parseInt(S,10),P=parseInt(P,10)),A.attr("text",this._formatItemValue(S)+""),O.attr("text",this._formatItemValue(P)+"")},x._onMouseLeave=function(){var S=this.get("group").findById("hoverPointer");S&&S.destroy();var P=this.get("group").findById("hoverText");P&&P.destroy(),this.get("canvas").draw()},x._onMouseMove=function(S){var P=this.get("height"),A=this.get("width"),O=this.get("items"),R=this.get("canvas").get("el"),W=R.getBoundingClientRect(),F=this.get("group").getBBox(),Z;if(this.get("layout")==="vertical"){var V=5;this.get("type")==="color-legend"&&(V=30);var k=this.get("titleGap"),Y=this.get("titleShape");Y&&(k+=Y.getBBox().maxY-Y.getBBox().minY);var K=S.clientY||S.event.clientY;K=K-W.y-this.get("group").attr("matrix")[7]+F.y-V+k,Z=O[0].value+(1-K/P)*(O[O.length-1].value-O[0].value)}else{var it=S.clientX||S.event.clientX;it=it-W.x-this.get("group").attr("matrix")[6],Z=O[0].value+it/A*(O[O.length-1].value-O[0].value)}Z=Z.toFixed(2),this.activate(Z),this.emit("mousehover",{value:Z})},x.activate=function(S){if(!!S){var P=this.get("group").findById("hoverPointer"),A=this.get("group").findById("hoverText"),O=this.get("items");if(!(S<O[0].value||S>O[O.length-1].value)){var R=this.get("height"),W=this.get("width"),F=this.get("titleShape"),Z=this.get("titleGap"),V=[],k=(S-O[0].value)/(O[O.length-1].value-O[0].value),Y;if(this.get("layout")==="vertical"){var K=0,it=0;this.get("type")==="color-legend"&&(K=Z,F&&(K+=F.getBBox().height)),this.get("slidable")&&(this.get("type")==="color-legend"?K-=13:(K=Z-15,F&&(K+=F.getBBox().height)),it+=10),k=(1-k)*R,V=[[it,k+K],[it-10,k+K-5],[it-10,k+K+5]],Y=n.mix({},{x:W+this.get("textOffset")/2+it,y:k+K,text:this._formatItemValue(S)+""},this.get("textStyle"),{textAlign:"start"})}else{var ct=0,ht=0;this.get("type")==="color-legend"&&(ct=Z,F&&(ct+=F.getBBox().height)),this.get("slidable")&&(this.get("type")==="color-legend"?ct-=7:(ct=Z,F||(ct-=7)),ht+=10),k*=W,V=[[k+ht,ct],[k+ht-5,ct-10],[k+ht+5,ct-10]],Y=n.mix({},{x:k-5,y:R+this.get("textOffset")+ct,text:this._formatItemValue(S)+""},this.get("textStyle"))}var ut=n.mix(Y,this.get("hoverTextStyle"));A?A.attr(ut):(A=this.get("group").addShape("text",{attrs:ut}),A.set("id","hoverText")),P?P.attr(n.mix({points:V},this.get("pointerStyle"))):(P=this.get("group").addShape("Polygon",{attrs:n.mix({points:V},this.get("pointerStyle"))}),P.set("id","hoverPointer")),this.get("canvas").draw()}}},x.deactivate=function(){var S=this.get("group").findById("hoverPointer");S&&S.destroy();var P=this.get("group").findById("hoverText");P&&P.destroy(),this.get("canvas").draw()},M}(i);E.exports=y},function(E,T,e){function t(o){return function(){var u=r(o),f;if(c()){var v=r(this).constructor;f=Reflect.construct(u,arguments,v)}else f=u.apply(this,arguments);return l(this,f)}}function l(o,u){return u&&(typeof u=="object"||typeof u=="function")?u:s(o)}function s(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}function r(o){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)},r(o)}function h(o,u){o.prototype=Object.create(u.prototype),o.prototype.constructor=o,o.__proto__=u}var n=e(66),i=e(3),a=function(o){h(f,o);var u=t(f);function f(){return o.apply(this,arguments)||this}var v=f.prototype;return v.getDefaultCfg=function(){var y=o.prototype.getDefaultCfg.call(this);return i.mix({},y,{x:0,y:0,items:null,titleContent:null,showTitle:!0,plotRange:null,offset:10,timeStamp:0,inPlot:!0,crosshairs:null})},v.isContentChange=function(y,g){var _=this.get("titleContent"),M=this.get("items"),x=!(y===_&&M.length===g.length);return x||i.each(g,function(m,S){var P=M[S];for(var A in m)if(m.hasOwnProperty(A)&&!i.isObject(m[A])&&m[A]!==P[A]){x=!0;break}if(x)return!1}),x},v.setContent=function(y,g){var _=new Date().valueOf();return this.set("items",g),this.set("titleContent",y),this.set("timeStamp",_),this.render(),this},v.setPosition=function(y,g){this.set("x",y),this.set("y",g)},v.render=function(){},v.clear=function(){},v.show=function(){this.set("visible",!0)},v.hide=function(){this.set("visible",!1)},f}(n);E.exports=a},function(E,T,e){var t=e(16),l=t.Group,s=e(30),c=s.Label,r=e(5),h=e(0),n=["line","point","path"],i="_origin";function a(f){var v=0;return h.each(f,function(b){v+=b}),v/f.length}function o(f,v){if(h.isNumber(f)&&h.isNumber(v))return[f,v];for(var b=-1,y=0,g=0,_,M=f.length-1,x,m=0;++b<f.length;)_=M,M=b,m+=x=f[_]*v[M]-f[M]*v[_],y+=(f[_]+f[M])*x,g+=(v[_]+v[M])*x;return m*=3,[y/m,g/m]}var u=function f(v){f.superclass.constructor.call(this,v)};h.extend(u,l),h.augment(u,{getDefaultCfg:function(){return{label:r.label,labelCfg:null,coord:null,geomType:null,zIndex:6}},_renderUI:function(){u.superclass._renderUI.call(this),this.initLabelsCfg();var v=this.addGroup(),b=this.addGroup({elCls:"x-line-group"}),y=this.get("labelRenderer");this.set("labelsGroup",v),this.set("lineGroup",b),this.get("labelRenderer").set("group",v),y.set("group",v),y.set("lineGroup",b)},initLabelsCfg:function(){var v=this,b=new c,y=v.getDefaultLabelCfg(),g=v.get("labelCfg");h.deepMix(y,g.globalCfg||g.cfg),b.set("config",!1),y.labelLine&&b.set("labelLine",y.labelLine),b.set("coord",v.get("coord")),this.set("labelRenderer",b),v.set("label",y)},getDefaultLabelCfg:function(){var v=this,b=v.get("labelCfg").cfg||v.get("labelCfg").globalCfg,y=v.get("geomType"),g=v.get("viewTheme")||r;return y==="polygon"||b&&b.offset<0&&h.indexOf(n,y)===-1?h.deepMix({},v.get("label"),g.innerLabels,b):h.deepMix({},v.get("label"),g.label,b)},getLabelsItems:function(v,b){var y=this,g=[],_=y.get("geom"),M=y.get("coord");y._getLabelCfgs(v,b);var x=y.get("labelItemCfgs");return h.each(v,function(m,S){var P=m[i],A=x[S];if(!A){g.push(null);return}h.isArray(A.text)||(A.text=[A.text]);var O=A.text.length;h.each(A.text,function(R,W){if(h.isNil(R)||R===""){g.push(null);return}var F=y.getLabelPoint(A,m,W);F=h.mix({},A,F),F.textAlign||(F.textAlign=y.getLabelAlign(F,W,O)),_&&(F._id=_._getShapeId(P)+"-glabel-"+W+"-"+F.text),F.coord=M,g.push(F)})}),g},adjustItems:function(v){return h.each(v,function(b){!b||(b.offsetX&&(b.x+=b.offsetX),b.offsetY&&(b.y+=b.offsetY))}),v},drawLines:function(v){var b=this;h.each(v,function(y){!y||y.offset>0&&b.lineToLabel(y)})},lineToLabel:function(){},getLabelPoint:function(v,b,y){var g=this,_=g.get("coord"),M=v.text.length;function x(O,R){return h.isArray(O)&&(v.text.length===1?O.length<=2?O=O[O.length-1]:O=a(O):O=O[R]),O}var m={text:v.text[y]};if(b&&this.get("geomType")==="polygon"){var S=o(b.x,b.y);m.x=S[0],m.y=S[1]}else m.x=x(b.x,y),m.y=x(b.y,y);if(b&&b.nextPoints&&(b.shape==="funnel"||b.shape==="pyramid")){var P=-Infinity;b.nextPoints.forEach(function(O){O=_.convert(O),O.x>P&&(P=O.x)}),m.x=(m.x+P)/2}b.shape==="pyramid"&&!b.nextPoints&&b.points&&b.points.forEach(function(O){O=_.convert(O),(h.isArray(O.x)&&!b.x.includes(O.x)||h.isNumber(O.x)&&b.x!==O.x)&&(m.x=(m.x+O.x)/2)}),v.position&&g.setLabelPosition(m,b,y,v.position);var A=g.getLabelOffset(v,y,M);return v.offsetX&&(A.x+=v.offsetX),v.offsetY&&(A.y+=v.offsetY),g.transLabelPoint(m),m.start={x:m.x,y:m.y},m.x+=A.x,m.y+=A.y,m.color=b.color,m},setLabelPosition:function(){},transLabelPoint:function(v){var b=this,y=b.get("coord"),g=y.applyMatrix(v.x,v.y,1);v.x=g[0],v.y=g[1]},getOffsetVector:function(v){var b=this,y=v.offset||0,g=b.get("coord"),_;return g.isTransposed?_=g.applyMatrix(y,0):_=g.applyMatrix(0,y),_},getDefaultOffset:function(v){var b=this,y=0,g=b.get("coord"),_=b.getOffsetVector(v);g.isTransposed?y=_[0]:y=_[1];var M=this.get("yScale");if(M&&v.point){var x=v.point[M.field];x<0&&(y=y*-1)}return y},getLabelOffset:function(v,b,y){var g=this,_=g.getDefaultOffset(v),M=g.get("coord"),x=M.isTransposed,m=x?"x":"y",S=x?1:-1,P={x:0,y:0};return b>0||y===1?P[m]=_*S:P[m]=_*S*-1,P},getLabelAlign:function(v,b,y){var g=this,_="center",M=g.get("coord");if(M.isTransposed){var x=g.getDefaultOffset(v);x<0?_="right":x===0?_="center":_="left",y>1&&b===0&&(_==="right"?_="left":_==="left"&&(_="right"))}return _},_getLabelValue:function(v,b){h.isArray(b)||(b=[b]);var y=[];return h.each(b,function(g){var _=v[g.field];if(h.isArray(_)){var M=[];h.each(_,function(x){M.push(g.getText(x))}),_=M}else _=g.getText(_);(h.isNil(_)||_==="")&&y.push(null),y.push(_)}),y},_getLabelCfgs:function(v){var b=this,y=this.get("labelCfg"),g=y.scales,_=this.get("label"),M=b.get("viewTheme")||r,x=[];y.globalCfg&&y.globalCfg.type&&b.set("type",y.globalCfg.type),h.each(v,function(m,S){var P={},A=m[i],O=b._getLabelValue(A,g);if(y.callback){var R=g.map(function(Z){return A[Z.field]});P=y.callback.apply(null,[].concat(R,[m,S]))}if(!P&&P!==0){x.push(null);return}if(h.isString(P)||h.isNumber(P)?P={text:P}:(P.text=P.content||O[0],delete P.content),P=h.mix({},_,y.globalCfg||{},P),m.point=A,P.point=A,P.htmlTemplate&&(P.useHtml=!0,P.text=P.htmlTemplate.call(null,P.text,m,S),delete P.htmlTemplate),P.formatter&&(P.text=P.formatter.call(null,P.text,m,S),delete P.formatter),P.label){var W=P.label;delete P.label,P=h.mix(P,W)}if(P.textStyle){delete P.textStyle.offset;var F=P.textStyle;h.isFunction(F)&&(P.textStyle=F.call(null,P.text,m,S))}P.labelLine&&(P.labelLine=h.mix({},_.labelLine,P.labelLine)),P.textStyle=h.mix({},_.textStyle,M.label.textStyle,P.textStyle),delete P.items,x.push(P)}),this.set("labelItemCfgs",x)},showLabels:function(v,b){var y=this,g=y.get("labelRenderer"),_=y.getLabelsItems(v,b);b=[].concat(b);var M=y.get("type");_=y.adjustItems(_,b),y.drawLines(_),g.set("items",_.filter(function(x,m){return x?!0:(b.splice(m,1),!1)})),M&&(g.set("shapes",b),g.set("type",M),g.set("points",v)),g.set("canvas",this.get("canvas")),g.draw()},destroy:function(){this.get("labelRenderer").destroy(),u.superclass.destroy.call(this)}}),E.exports=u},function(E,T,e){var t=e(5),l=e(0);function s(r,h){var n=r.length;l.isString(r[0])&&(r=r.map(function(u){return h.translate(u)}));for(var i=r[1]-r[0],a=2;a<n;a++){var o=r[a]-r[a-1];i>o&&(i=o)}return i}var c={getDefaultSize:function(){var h=this.get("defaultSize"),n=this.get("viewTheme")||t;if(!h){var i=this.get("coord"),a=this.getXScale(),o=a.values,u=this.get("dataArray"),f;if(a.isLinear&&o.length>1){o.sort();var v=s(o,a);f=(a.max-a.min)/v,o.length>f&&(f=o.length)}else f=o.length;var b=a.range,y=1/f,g=1;if(this.isInCircle()?i.isTransposed&&f>1?g=n.widthRatio.multiplePie:g=n.widthRatio.rose:(a.isLinear&&(y*=b[1]-b[0]),g=n.widthRatio.column),y*=g,this.hasAdjust("dodge")){var _=this._getDodgeCfg(u),M=_.dodgeCount,x=_.dodgeRatio;y=y/M,x>0&&(y=x*y/g)}h=y,this.set("defaultSize",h)}return h},_getDodgeCfg:function(h){var n=this.get("adjusts"),i,a,o=h.length;if(l.each(n,function(v){v.type==="dodge"&&(i=v.dodgeBy,a=v.dodgeRatio)}),i){var u=l.Array.merge(h),f=l.Array.values(u,i);o=f.length}return{dodgeCount:o,dodgeRatio:a}},getDimWidth:function(h){var n=this.get("coord"),i=n.convertPoint({x:0,y:0}),a=n.convertPoint({x:h==="x"?1:0,y:h==="x"?0:1}),o=0;return i&&a&&(o=Math.sqrt(Math.pow(a.x-i.x,2)+Math.pow(a.y-i.y,2))),o},_getWidth:function(){var h=this.get("coord"),n;return this.isInCircle()&&!h.isTransposed?n=(h.endAngle-h.startAngle)*h.radius:n=this.getDimWidth("x"),n},_toNormalizedSize:function(h){var n=this._getWidth();return h/n},_toCoordSize:function(h){var n=this._getWidth();return n*h},getNormalizedSize:function(h){var n=this.getAttrValue("size",h);return l.isNil(n)?n=this.getDefaultSize():n=this._toNormalizedSize(n),n},getSize:function(h){var n=this.getAttrValue("size",h);if(l.isNil(n)){var i=this.getDefaultSize();n=this._toCoordSize(i)}return n}};E.exports=c},function(E,T,e){var t=e(72);E.exports=function(l,s){var c=t(l);if(c&&c[s])return c[s]}},function(E,T){E.exports=function(e){var t=e.get("scaleController")||{};return t.defs}},function(E,T,e){var t=e(0),l=e(52);E.exports=function(s,c){var r,h=c.field,n=c.type,i=t.Array.values(s,h);return n==="linear"?(r=t.Array.getRange(i),c.min<r.min&&(r.min=c.min),c.max>r.max&&(r.max=c.max)):(n==="timeCat"&&(t.each(i,function(a,o){i[o]=l.toTimeStamp(a)}),i.sort(function(a,o){return a-o})),r=i),r}},function(E,T,e){var t=e(1),l=e(7),s=e(37),c=e(50),r=function h(n){h.superclass.constructor.call(this,n)};r.Symbols={circle:function(n,i,a){return[["M",n,i],["m",-a,0],["a",a,a,0,1,0,a*2,0],["a",a,a,0,1,0,-a*2,0]]},square:function(n,i,a){return[["M",n-a,i-a],["L",n+a,i-a],["L",n+a,i+a],["L",n-a,i+a],["Z"]]},diamond:function(n,i,a){return[["M",n-a,i],["L",n,i-a],["L",n+a,i],["L",n,i+a],["Z"]]},triangle:function(n,i,a){var o=a*Math.sin(1/3*Math.PI);return[["M",n-a,i+o],["L",n,i-o],["L",n+a,i+o],["z"]]},"triangle-down":function(n,i,a){var o=a*Math.sin(1/3*Math.PI);return[["M",n-a,i-o],["L",n+a,i-o],["L",n,i+o],["Z"]]}},r.ATTRS={path:null,lineWidth:1},t.extend(r,l),t.augment(r,{type:"marker",canFill:!0,canStroke:!0,getDefaultAttrs:function(){return{x:0,y:0,lineWidth:1}},calculateBox:function(){var n=this._attrs,i=n.x,a=n.y,o=n.radius,u=this.getHitLineWidth(),f=u/2+o;return{minX:i-f,minY:a-f,maxX:i+f,maxY:a+f}},_getPath:function(){var n=this._attrs,i=n.x,a=n.y,o=n.radius||n.r,u=n.symbol||"circle",f;return t.isFunction(u)?f=u:f=r.Symbols[u],f?f(i,a,o):(console.warn(u+" marker is not supported."),null)},createPath:function(n){var i=this._cfg.segments;if(i&&!this._cfg.hasUpdate){n.beginPath();for(var a=0;a<i.length;a++)i[a].draw(n);return}var o=s.parsePath(this._getPath());n.beginPath();var u;i=[];for(var f=0;f<o.length;f++){var v=o[f];u=new c(v,u,f===o.length-1),i.push(u),u.draw(n)}this._cfg.segments=i,this._cfg.hasUpdate=!1}}),E.exports=r},function(E,T,e){var t=e(1),l=t.vec2;function s(a,o,u,f,v){var b=1-v;return b*b*(b*f+3*v*u)+v*v*(v*a+3*b*o)}function c(a,o,u,f,v){var b=1-v;return 3*(((o-a)*b+2*(u-o)*v)*b+(f-u)*v*v)}function r(a,o,u,f,v,b,y,g,_,M,x){var m,S=.005,P=Infinity,A,O,R,W,F,Z,V,k=1e-4,Y=[_,M];for(A=0;A<1;A+=.05)O=[s(a,u,v,y,A),s(o,f,b,g,A)],R=l.squaredDistance(Y,O),R<P&&(m=A,P=R);P=Infinity;for(var K=0;K<32&&!(S<k);K++)Z=m-S,V=m+S,O=[s(a,u,v,y,Z),s(o,f,b,g,Z)],R=l.squaredDistance(Y,O),Z>=0&&R<P?(m=Z,P=R):(F=[s(a,u,v,y,V),s(o,f,b,g,V)],W=l.squaredDistance(Y,F),V<=1&&W<P?(m=V,P=W):S*=.5);return x&&(x.x=s(a,u,v,y,m),x.y=s(o,f,b,g,m)),Math.sqrt(P)}function h(a,o,u,f){var v=3*a-9*o+9*u-3*f,b=6*o-12*u+6*f,y=3*u-3*f,g=[],_,M,x;if(t.isNumberEqual(v,0))t.isNumberEqual(b,0)||(_=-y/b,_>=0&&_<=1&&g.push(_));else{var m=b*b-4*v*y;t.isNumberEqual(m,0)?g.push(-b/(2*v)):m>0&&(x=Math.sqrt(m),_=(-b+x)/(2*v),M=(-b-x)/(2*v),_>=0&&_<=1&&g.push(_),M>=0&&M<=1&&g.push(M))}return g}function n(a,o,u,f,v){var b=-3*o+9*u-9*f+3*v,y=a*b+6*o-12*u+6*f;return a*y-3*o+3*u}function i(a,o,u,f,v,b,y,g,_){t.isNil(_)&&(_=1),_=_>1?1:_<0?0:_;for(var M=_/2,x=12,m=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],S=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],P=0,A=0;A<x;A++){var O=M*m[A]+M,R=n(O,a,u,v,y),W=n(O,o,f,b,g),F=R*R+W*W;P+=S[A]*Math.sqrt(F)}return M*P}E.exports={at:s,derivativeAt:c,projectPoint:function(o,u,f,v,b,y,g,_,M,x){var m={};return r(o,u,f,v,b,y,g,_,M,x,m),m},pointDistance:r,extrema:h,len:i}},function(E,T,e){var t=e(48),l=e(144),s=e(75),c=e(47);E.exports={line:function(h,n,i,a,o,u,f){var v=t.box(h,n,i,a,o);if(!this.box(v.minX,v.maxX,v.minY,v.maxY,u,f))return!1;var b=t.pointDistance(h,n,i,a,u,f);return isNaN(b)?!1:b<=o/2},polyline:function(h,n,i,a){var o=h.length-1;if(o<1)return!1;for(var u=0;u<o;u++){var f=h[u][0],v=h[u][1],b=h[u+1][0],y=h[u+1][1];if(this.line(f,v,b,y,n,i,a))return!0}return!1},cubicline:function(h,n,i,a,o,u,f,v,b,y,g){return s.pointDistance(h,n,i,a,o,u,f,v,y,g)<=b/2},quadraticline:function(h,n,i,a,o,u,f,v,b){return l.pointDistance(h,n,i,a,o,u,v,b)<=f/2},arcline:function(h,n,i,a,o,u,f,v,b){return c.pointDistance(h,n,i,a,o,u,v,b)<=f/2},rect:function(h,n,i,a,o,u){return h<=o&&o<=h+i&&n<=u&&u<=n+a},circle:function(h,n,i,a,o){return Math.pow(a-h,2)+Math.pow(o-n,2)<=Math.pow(i,2)},box:function(h,n,i,a,o,u){return h<=o&&o<=n&&i<=u&&u<=a}}},function(E,T,e){var t=e(150),l=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,s=new RegExp("([a-z])["+l+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+l+"]*,?["+l+"]*)+)","ig"),c=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+l+"]*,?["+l+"]*","ig"),r=function(_t){if(!_t)return null;if(typeof _t==typeof[])return _t;var mt={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},At=[];return String(_t).replace(s,function(rt,Mt,z){var $=[],dt=Mt.toLowerCase();if(z.replace(c,function(et,ot){ot&&$.push(+ot)}),dt==="m"&&$.length>2&&(At.push([Mt].concat($.splice(0,2))),dt="l",Mt=Mt==="m"?"l":"L"),dt==="o"&&$.length===1&&At.push([Mt,$[0]]),dt==="r")At.push([Mt].concat($));else for(;$.length>=mt[dt]&&(At.push([Mt].concat($.splice(0,mt[dt]))),!!mt[dt]););}),At},h=function(_t,mt){for(var At=[],rt=0,Mt=_t.length;Mt-2*!mt>rt;rt+=2){var z=[{x:+_t[rt-2],y:+_t[rt-1]},{x:+_t[rt],y:+_t[rt+1]},{x:+_t[rt+2],y:+_t[rt+3]},{x:+_t[rt+4],y:+_t[rt+5]}];mt?rt?Mt-4===rt?z[3]={x:+_t[0],y:+_t[1]}:Mt-2===rt&&(z[2]={x:+_t[0],y:+_t[1]},z[3]={x:+_t[2],y:+_t[3]}):z[0]={x:+_t[Mt-2],y:+_t[Mt-1]}:Mt-4===rt?z[3]=z[2]:rt||(z[0]={x:+_t[rt],y:+_t[rt+1]}),At.push(["C",(-z[0].x+6*z[1].x+z[2].x)/6,(-z[0].y+6*z[1].y+z[2].y)/6,(z[1].x+6*z[2].x-z[3].x)/6,(z[1].y+6*z[2].y-z[3].y)/6,z[2].x,z[2].y])}return At},n=function(_t,mt,At,rt,Mt){var z=[];if(Mt===null&&rt===null&&(rt=At),_t=+_t,mt=+mt,At=+At,rt=+rt,Mt!==null){var $=Math.PI/180,dt=_t+At*Math.cos(-rt*$),et=_t+At*Math.cos(-Mt*$),ot=mt+At*Math.sin(-rt*$),pt=mt+At*Math.sin(-Mt*$);z=[["M",dt,ot],["A",At,At,0,+(Mt-rt>180),0,et,pt]]}else z=[["M",_t,mt],["m",0,-rt],["a",At,rt,0,1,1,0,2*rt],["a",At,rt,0,1,1,0,-2*rt],["z"]];return z},i=function(_t){if(_t=r(_t),!_t||!_t.length)return[["M",0,0]];var mt=[],At=0,rt=0,Mt=0,z=0,$=0,dt,et;_t[0][0]==="M"&&(At=+_t[0][1],rt=+_t[0][2],Mt=At,z=rt,$++,mt[0]=["M",At,rt]);for(var ot=_t.length===3&&_t[0][0]==="M"&&_t[1][0].toUpperCase()==="R"&&_t[2][0].toUpperCase()==="Z",pt,H,nt=$,at=_t.length;nt<at;nt++){if(mt.push(pt=[]),H=_t[nt],dt=H[0],dt!==dt.toUpperCase())switch(pt[0]=dt.toUpperCase(),pt[0]){case"A":pt[1]=H[1],pt[2]=H[2],pt[3]=H[3],pt[4]=H[4],pt[5]=H[5],pt[6]=+H[6]+At,pt[7]=+H[7]+rt;break;case"V":pt[1]=+H[1]+rt;break;case"H":pt[1]=+H[1]+At;break;case"R":et=[At,rt].concat(H.slice(1));for(var q=2,Et=et.length;q<Et;q++)et[q]=+et[q]+At,et[++q]=+et[q]+rt;mt.pop(),mt=mt.concat(h(et,ot));break;case"O":mt.pop(),et=n(At,rt,H[1],H[2]),et.push(et[0]),mt=mt.concat(et);break;case"U":mt.pop(),mt=mt.concat(n(At,rt,H[1],H[2],H[3])),pt=["U"].concat(mt[mt.length-1].slice(-2));break;case"M":Mt=+H[1]+At,z=+H[2]+rt;break;default:for(var vt=1,Ft=H.length;vt<Ft;vt++)pt[vt]=+H[vt]+(vt%2?At:rt)}else if(dt==="R")et=[At,rt].concat(H.slice(1)),mt.pop(),mt=mt.concat(h(et,ot)),pt=["R"].concat(H.slice(-2));else if(dt==="O")mt.pop(),et=n(At,rt,H[1],H[2]),et.push(et[0]),mt=mt.concat(et);else if(dt==="U")mt.pop(),mt=mt.concat(n(At,rt,H[1],H[2],H[3])),pt=["U"].concat(mt[mt.length-1].slice(-2));else for(var Qt=0,ee=H.length;Qt<ee;Qt++)pt[Qt]=H[Qt];if(dt=dt.toUpperCase(),dt!=="O")switch(pt[0]){case"Z":At=+Mt,rt=+z;break;case"H":At=pt[1];break;case"V":rt=pt[1];break;case"M":Mt=pt[pt.length-2],z=pt[pt.length-1];break;default:At=pt[pt.length-2],rt=pt[pt.length-1]}}return mt},a=function(_t,mt,At,rt){return[_t,mt,At,rt,At,rt]},o=function(_t,mt,At,rt,Mt,z){var $=1/3,dt=2/3;return[$*_t+dt*At,$*mt+dt*rt,$*Mt+dt*At,$*z+dt*rt,Mt,z]},u=function Lt(_t,mt,At,rt,Mt,z,$,dt,et,ot){At===rt&&(At+=1);var pt=Math.PI*120/180,H=Math.PI/180*(+Mt||0),nt=[],at,q,Et,vt,Ft,Qt=function(ue,xe,$e){var Fn=ue*Math.cos($e)-xe*Math.sin($e),rr=ue*Math.sin($e)+xe*Math.cos($e);return{x:Fn,y:rr}};if(ot)q=ot[0],Et=ot[1],vt=ot[2],Ft=ot[3];else{at=Qt(_t,mt,-H),_t=at.x,mt=at.y,at=Qt(dt,et,-H),dt=at.x,et=at.y,_t===dt&&mt===et&&(dt+=1,et+=1);var ee=(_t-dt)/2,Gt=(mt-et)/2,$t=ee*ee/(At*At)+Gt*Gt/(rt*rt);$t>1&&($t=Math.sqrt($t),At=$t*At,rt=$t*rt);var Pe=At*At,me=rt*rt,le=(z===$?-1:1)*Math.sqrt(Math.abs((Pe*me-Pe*Gt*Gt-me*ee*ee)/(Pe*Gt*Gt+me*ee*ee)));vt=le*At*Gt/rt+(_t+dt)/2,Ft=le*-rt*ee/At+(mt+et)/2,q=Math.asin(((mt-Ft)/rt).toFixed(9)),Et=Math.asin(((et-Ft)/rt).toFixed(9)),q=_t<vt?Math.PI-q:q,Et=dt<vt?Math.PI-Et:Et,q<0&&(q=Math.PI*2+q),Et<0&&(Et=Math.PI*2+Et),$&&q>Et&&(q=q-Math.PI*2),!$&&Et>q&&(Et=Et-Math.PI*2)}var be=Et-q;if(Math.abs(be)>pt){var ze=Et,Xe=dt,_n=et;Et=q+pt*($&&Et>q?1:-1),dt=vt+At*Math.cos(Et),et=Ft+rt*Math.sin(Et),nt=Lt(dt,et,At,rt,Mt,0,$,Xe,_n,[Et,ze,vt,Ft])}be=Et-q;var Kn=Math.cos(q),Hn=Math.sin(q),nn=Math.cos(Et),en=Math.sin(Et),An=Math.tan(be/4),Nn=4/3*At*An,hr=4/3*rt*An,fi=[_t,mt],Oe=[_t+Nn*Hn,mt-hr*Kn],Ae=[dt+Nn*en,et-hr*nn],Jt=[dt,et];if(Oe[0]=2*fi[0]-Oe[0],Oe[1]=2*fi[1]-Oe[1],ot)return[Oe,Ae,Jt].concat(nt);nt=[Oe,Ae,Jt].concat(nt).join().split(",");for(var ve=[],Vt=0,ie=nt.length;Vt<ie;Vt++)ve[Vt]=Vt%2?Qt(nt[Vt-1],nt[Vt],H).y:Qt(nt[Vt],nt[Vt+1],H).x;return ve},f=function(_t,mt){var At=i(_t),rt=mt&&i(mt),Mt={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},z={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},$=[],dt=[],et="",ot="",pt,H=function(Gt,$t,Pe){var me,le;if(!Gt)return["C",$t.x,$t.y,$t.x,$t.y,$t.x,$t.y];switch(!(Gt[0]in{T:1,Q:1})&&($t.qx=$t.qy=null),Gt[0]){case"M":$t.X=Gt[1],$t.Y=Gt[2];break;case"A":Gt=["C"].concat(u.apply(0,[$t.x,$t.y].concat(Gt.slice(1))));break;case"S":Pe==="C"||Pe==="S"?(me=$t.x*2-$t.bx,le=$t.y*2-$t.by):(me=$t.x,le=$t.y),Gt=["C",me,le].concat(Gt.slice(1));break;case"T":Pe==="Q"||Pe==="T"?($t.qx=$t.x*2-$t.qx,$t.qy=$t.y*2-$t.qy):($t.qx=$t.x,$t.qy=$t.y),Gt=["C"].concat(o($t.x,$t.y,$t.qx,$t.qy,Gt[1],Gt[2]));break;case"Q":$t.qx=Gt[1],$t.qy=Gt[2],Gt=["C"].concat(o($t.x,$t.y,Gt[1],Gt[2],Gt[3],Gt[4]));break;case"L":Gt=["C"].concat(a($t.x,$t.y,Gt[1],Gt[2]));break;case"H":Gt=["C"].concat(a($t.x,$t.y,Gt[1],$t.y));break;case"V":Gt=["C"].concat(a($t.x,$t.y,$t.x,Gt[1]));break;case"Z":Gt=["C"].concat(a($t.x,$t.y,$t.X,$t.Y));break;default:break}return Gt},nt=function(Gt,$t){if(Gt[$t].length>7){Gt[$t].shift();for(var Pe=Gt[$t];Pe.length;)$[$t]="A",rt&&(dt[$t]="A"),Gt.splice($t++,0,["C"].concat(Pe.splice(0,6)));Gt.splice($t,1),pt=Math.max(At.length,rt&&rt.length||0)}},at=function(Gt,$t,Pe,me,le){Gt&&$t&&Gt[le][0]==="M"&&$t[le][0]!=="M"&&($t.splice(le,0,["M",me.x,me.y]),Pe.bx=0,Pe.by=0,Pe.x=Gt[le][1],Pe.y=Gt[le][2],pt=Math.max(At.length,rt&&rt.length||0))};pt=Math.max(At.length,rt&&rt.length||0);for(var q=0;q<pt;q++){At[q]&&(et=At[q][0]),et!=="C"&&($[q]=et,q&&(ot=$[q-1])),At[q]=H(At[q],Mt,ot),$[q]!=="A"&&et==="C"&&($[q]="C"),nt(At,q),rt&&(rt[q]&&(et=rt[q][0]),et!=="C"&&(dt[q]=et,q&&(ot=dt[q-1])),rt[q]=H(rt[q],z,ot),dt[q]!=="A"&&et==="C"&&(dt[q]="C"),nt(rt,q)),at(At,rt,Mt,z,q),at(rt,At,z,Mt,q);var Et=At[q],vt=rt&&rt[q],Ft=Et.length,Qt=rt&&vt.length;Mt.x=Et[Ft-2],Mt.y=Et[Ft-1],Mt.bx=parseFloat(Et[Ft-4])||Mt.x,Mt.by=parseFloat(Et[Ft-3])||Mt.y,z.bx=rt&&(parseFloat(vt[Qt-4])||z.x),z.by=rt&&(parseFloat(vt[Qt-3])||z.y),z.x=rt&&vt[Qt-2],z.y=rt&&vt[Qt-1]}return rt?[At,rt]:At},v=/,?([a-z]),?/gi,b=function(_t){return _t.join(",").replace(v,"$1")},y=function(_t,mt,At,rt,Mt){var z=-3*mt+9*At-9*rt+3*Mt,$=_t*z+6*mt-12*At+6*rt;return _t*$-3*mt+3*At},g=function(_t,mt,At,rt,Mt,z,$,dt,et){et===null&&(et=1),et=et>1?1:et<0?0:et;for(var ot=et/2,pt=12,H=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],nt=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],at=0,q=0;q<pt;q++){var Et=ot*H[q]+ot,vt=y(Et,_t,At,Mt,$),Ft=y(Et,mt,rt,z,dt),Qt=vt*vt+Ft*Ft;at+=nt[q]*Math.sqrt(Qt)}return ot*at},_=function(_t,mt,At,rt,Mt,z,$,dt){for(var et=[],ot=[[],[]],pt,H,nt,at,q=0;q<2;++q){if(q===0?(H=6*_t-12*At+6*Mt,pt=-3*_t+9*At-9*Mt+3*$,nt=3*At-3*_t):(H=6*mt-12*rt+6*z,pt=-3*mt+9*rt-9*z+3*dt,nt=3*rt-3*mt),Math.abs(pt)<1e-12){if(Math.abs(H)<1e-12)continue;at=-nt/H,at>0&&at<1&&et.push(at);continue}var Et=H*H-4*nt*pt,vt=Math.sqrt(Et);if(!(Et<0)){var Ft=(-H+vt)/(2*pt);Ft>0&&Ft<1&&et.push(Ft);var Qt=(-H-vt)/(2*pt);Qt>0&&Qt<1&&et.push(Qt)}}for(var ee=et.length,Gt=ee,$t;ee--;)at=et[ee],$t=1-at,ot[0][ee]=$t*$t*$t*_t+3*$t*$t*at*At+3*$t*at*at*Mt+at*at*at*$,ot[1][ee]=$t*$t*$t*mt+3*$t*$t*at*rt+3*$t*at*at*z+at*at*at*dt;return ot[0][Gt]=_t,ot[1][Gt]=mt,ot[0][Gt+1]=$,ot[1][Gt+1]=dt,ot[0].length=ot[1].length=Gt+2,{min:{x:Math.min.apply(0,ot[0]),y:Math.min.apply(0,ot[1])},max:{x:Math.max.apply(0,ot[0]),y:Math.max.apply(0,ot[1])}}},M=function(_t,mt,At,rt,Mt,z,$,dt){if(!(Math.max(_t,At)<Math.min(Mt,$)||Math.min(_t,At)>Math.max(Mt,$)||Math.max(mt,rt)<Math.min(z,dt)||Math.min(mt,rt)>Math.max(z,dt))){var et=(_t*rt-mt*At)*(Mt-$)-(_t-At)*(Mt*dt-z*$),ot=(_t*rt-mt*At)*(z-dt)-(mt-rt)*(Mt*dt-z*$),pt=(_t-At)*(z-dt)-(mt-rt)*(Mt-$);if(!!pt){var H=et/pt,nt=ot/pt,at=+H.toFixed(2),q=+nt.toFixed(2);if(!(at<+Math.min(_t,At).toFixed(2)||at>+Math.max(_t,At).toFixed(2)||at<+Math.min(Mt,$).toFixed(2)||at>+Math.max(Mt,$).toFixed(2)||q<+Math.min(mt,rt).toFixed(2)||q>+Math.max(mt,rt).toFixed(2)||q<+Math.min(z,dt).toFixed(2)||q>+Math.max(z,dt).toFixed(2)))return{x:H,y:nt}}}},x=function(_t,mt,At){return mt>=_t.x&&mt<=_t.x+_t.width&&At>=_t.y&&At<=_t.y+_t.height},m=function(_t,mt,At,rt,Mt){if(Mt)return[["M",+_t+ +Mt,mt],["l",At-Mt*2,0],["a",Mt,Mt,0,0,1,Mt,Mt],["l",0,rt-Mt*2],["a",Mt,Mt,0,0,1,-Mt,Mt],["l",Mt*2-At,0],["a",Mt,Mt,0,0,1,-Mt,-Mt],["l",0,Mt*2-rt],["a",Mt,Mt,0,0,1,Mt,-Mt],["z"]];var z=[["M",_t,mt],["l",At,0],["l",0,rt],["l",-At,0],["z"]];return z.parsePathArray=b,z},S=function(_t,mt,At,rt){return _t===null&&(_t=mt=At=rt=0),mt===null&&(mt=_t.y,At=_t.width,rt=_t.height,_t=_t.x),{x:_t,y:mt,width:At,w:At,height:rt,h:rt,x2:_t+At,y2:mt+rt,cx:_t+At/2,cy:mt+rt/2,r1:Math.min(At,rt)/2,r2:Math.max(At,rt)/2,r0:Math.sqrt(At*At+rt*rt)/2,path:m(_t,mt,At,rt),vb:[_t,mt,At,rt].join(" ")}},P=function(_t,mt){return _t=S(_t),mt=S(mt),x(mt,_t.x,_t.y)||x(mt,_t.x2,_t.y)||x(mt,_t.x,_t.y2)||x(mt,_t.x2,_t.y2)||x(_t,mt.x,mt.y)||x(_t,mt.x2,mt.y)||x(_t,mt.x,mt.y2)||x(_t,mt.x2,mt.y2)||(_t.x<mt.x2&&_t.x>mt.x||mt.x<_t.x2&&mt.x>_t.x)&&(_t.y<mt.y2&&_t.y>mt.y||mt.y<_t.y2&&mt.y>_t.y)},A=function(_t,mt,At,rt,Mt,z,$,dt){t.isArray(_t)||(_t=[_t,mt,At,rt,Mt,z,$,dt]);var et=_.apply(null,_t);return S(et.min.x,et.min.y,et.max.x-et.min.x,et.max.y-et.min.y)},O=function(_t,mt,At,rt,Mt,z,$,dt,et){var ot=1-et,pt=Math.pow(ot,3),H=Math.pow(ot,2),nt=et*et,at=nt*et,q=pt*_t+H*3*et*At+ot*3*et*et*Mt+at*$,Et=pt*mt+H*3*et*rt+ot*3*et*et*z+at*dt,vt=_t+2*et*(At-_t)+nt*(Mt-2*At+_t),Ft=mt+2*et*(rt-mt)+nt*(z-2*rt+mt),Qt=At+2*et*(Mt-At)+nt*($-2*Mt+At),ee=rt+2*et*(z-rt)+nt*(dt-2*z+rt),Gt=ot*_t+et*At,$t=ot*mt+et*rt,Pe=ot*Mt+et*$,me=ot*z+et*dt,le=90-Math.atan2(vt-Qt,Ft-ee)*180/Math.PI;return{x:q,y:Et,m:{x:vt,y:Ft},n:{x:Qt,y:ee},start:{x:Gt,y:$t},end:{x:Pe,y:me},alpha:le}},R=function(_t,mt,At){var rt=A(_t),Mt=A(mt);if(!P(rt,Mt))return At?0:[];for(var z=g.apply(0,_t),$=g.apply(0,mt),dt=~~(z/8),et=~~($/8),ot=[],pt=[],H={},nt=At?0:[],at=0;at<dt+1;at++){var q=O.apply(0,_t.concat(at/dt));ot.push({x:q.x,y:q.y,t:at/dt})}for(var Et=0;Et<et+1;Et++){var vt=O.apply(0,mt.concat(Et/et));pt.push({x:vt.x,y:vt.y,t:Et/et})}for(var Ft=0;Ft<dt;Ft++)for(var Qt=0;Qt<et;Qt++){var ee=ot[Ft],Gt=ot[Ft+1],$t=pt[Qt],Pe=pt[Qt+1],me=Math.abs(Gt.x-ee.x)<.001?"y":"x",le=Math.abs(Pe.x-$t.x)<.001?"y":"x",be=M(ee.x,ee.y,Gt.x,Gt.y,$t.x,$t.y,Pe.x,Pe.y);if(be){if(H[be.x.toFixed(4)]===be.y.toFixed(4))continue;H[be.x.toFixed(4)]=be.y.toFixed(4);var ze=ee.t+Math.abs((be[me]-ee[me])/(Gt[me]-ee[me]))*(Gt.t-ee.t),Xe=$t.t+Math.abs((be[le]-$t[le])/(Pe[le]-$t[le]))*(Pe.t-$t.t);ze>=0&&ze<=1&&Xe>=0&&Xe<=1&&(At?nt++:nt.push({x:be.x,y:be.y,t1:ze,t2:Xe}))}}return nt},W=function(_t,mt,At){_t=f(_t),mt=f(mt);for(var rt,Mt,z,$,dt,et,ot,pt,H,nt,at=At?0:[],q=0,Et=_t.length;q<Et;q++){var vt=_t[q];if(vt[0]==="M")rt=dt=vt[1],Mt=et=vt[2];else{vt[0]==="C"?(H=[rt,Mt].concat(vt.slice(1)),rt=H[6],Mt=H[7]):(H=[rt,Mt,rt,Mt,dt,et,dt,et],rt=dt,Mt=et);for(var Ft=0,Qt=mt.length;Ft<Qt;Ft++){var ee=mt[Ft];if(ee[0]==="M")z=ot=ee[1],$=pt=ee[2];else{ee[0]==="C"?(nt=[z,$].concat(ee.slice(1)),z=nt[6],$=nt[7]):(nt=[z,$,z,$,ot,pt,ot,pt],z=ot,$=pt);var Gt=R(H,nt,At);if(At)at+=Gt;else{for(var $t=0,Pe=Gt.length;$t<Pe;$t++)Gt[$t].segment1=q,Gt[$t].segment2=Ft,Gt[$t].bez1=H,Gt[$t].bez2=nt;at=at.concat(Gt)}}}}}return at},F=function(_t,mt){return W(_t,mt)};function Z(Lt,_t){var mt=[],At=[];function rt(Mt,z){if(Mt.length===1)mt.push(Mt[0]),At.push(Mt[0]);else{for(var $=[],dt=0;dt<Mt.length-1;dt++)dt===0&&mt.push(Mt[0]),dt===Mt.length-2&&At.push(Mt[dt+1]),$[dt]=[(1-z)*Mt[dt][0]+z*Mt[dt+1][0],(1-z)*Mt[dt][1]+z*Mt[dt+1][1]];rt($,z)}}return Lt.length&&rt(Lt,_t),{left:mt,right:At.reverse()}}function V(Lt,_t,mt){var At=[[Lt[1],Lt[2]]];mt=mt||2;var rt=[];_t[0]==="A"?(At.push(_t[6]),At.push(_t[7])):_t[0]==="C"?(At.push([_t[1],_t[2]]),At.push([_t[3],_t[4]]),At.push([_t[5],_t[6]])):_t[0]==="S"||_t[0]==="Q"?(At.push([_t[1],_t[2]]),At.push([_t[3],_t[4]])):At.push([_t[1],_t[2]]);for(var Mt=At,z=1/mt,$=0;$<mt-1;$++){var dt=z/(1-z*$),et=Z(Mt,dt);rt.push(et.left),Mt=et.right}rt.push(Mt);var ot=rt.map(function(pt){var H=[];return pt.length===4&&(H.push("C"),H=H.concat(pt[2])),pt.length>=3&&(pt.length===3&&H.push("Q"),H=H.concat(pt[1])),pt.length===2&&H.push("L"),H=H.concat(pt[pt.length-1]),H});return ot}var k=function(_t,mt,At){if(At===1)return[[].concat(_t)];var rt=[];if(mt[0]==="L"||mt[0]==="C"||mt[0]==="Q")rt=rt.concat(V(_t,mt,At));else{var Mt=[].concat(_t);Mt[0]==="M"&&(Mt[0]="L");for(var z=0;z<=At-1;z++)rt.push(Mt)}return rt},Y=function(_t,mt){if(_t.length===1)return _t;var At=_t.length-1,rt=mt.length-1,Mt=At/rt,z=[];if(_t.length===1&&_t[0][0]==="M"){for(var $=0;$<rt-At;$++)_t.push(_t[0]);return _t}for(var dt=0;dt<rt;dt++){var et=Math.floor(Mt*dt);z[et]=(z[et]||0)+1}var ot=z.reduce(function(pt,H,nt){return nt===At?pt.concat(_t[At]):pt.concat(k(_t[nt],_t[nt+1],H))},[]);return ot.unshift(_t[0]),(mt[rt]==="Z"||mt[rt]==="z")&&ot.push("Z"),ot},K=function(_t,mt){if(_t.length!==mt.length)return!1;var At=!0;return t.each(_t,function(rt,Mt){if(rt!==mt[Mt])return At=!1,!1}),At};function it(Lt,_t,mt){var At=null,rt=mt;return _t<rt&&(rt=_t,At="add"),Lt<rt&&(rt=Lt,At="del"),{type:At,min:rt}}var ct=function(_t,mt){var At=_t.length,rt=mt.length,Mt,z,$=0;if(At===0||rt===0)return null;for(var dt=[],et=0;et<=At;et++)dt[et]=[],dt[et][0]={min:et};for(var ot=0;ot<=rt;ot++)dt[0][ot]={min:ot};for(var pt=1;pt<=At;pt++){Mt=_t[pt-1];for(var H=1;H<=rt;H++){z=mt[H-1],K(Mt,z)?$=0:$=1;var nt=dt[pt-1][H].min+1,at=dt[pt][H-1].min+1,q=dt[pt-1][H-1].min+$;dt[pt][H]=it(nt,at,q)}}return dt},ht=function(_t,mt){var At=ct(_t,mt),rt=_t.length,Mt=mt.length,z=[],$=1,dt=1;if(At[rt][Mt]!==rt){for(var et=1;et<=rt;et++){var ot=At[et][et].min;dt=et;for(var pt=$;pt<=Mt;pt++)At[et][pt].min<ot&&(ot=At[et][pt].min,dt=pt);$=dt,At[et][$].type&&z.push({index:et-1,type:At[et][$].type})}for(var H=z.length-1;H>=0;H--)$=z[H].index,z[H].type==="add"?_t.splice($,0,[].concat(_t[$])):_t.splice($,1)}rt=_t.length;var nt=Mt-rt;if(rt<Mt)for(var at=0;at<nt;at++)_t[rt-1][0]==="z"||_t[rt-1][0]==="Z"?_t.splice(rt-2,0,_t[rt-2]):_t.push(_t[rt-1]),rt+=1;return _t};function ut(Lt,_t,mt){for(var At=[].concat(Lt),rt,Mt=1/(mt+1),z=It(_t)[0],$=1;$<=mt;$++)Mt*=$,rt=Math.floor(Lt.length*Mt),rt===0?At.unshift([z[0]*Mt+Lt[rt][0]*(1-Mt),z[1]*Mt+Lt[rt][1]*(1-Mt)]):At.splice(rt,0,[z[0]*Mt+Lt[rt][0]*(1-Mt),z[1]*Mt+Lt[rt][1]*(1-Mt)]);return At}function It(Lt){var _t=[];switch(Lt[0]){case"M":_t.push([Lt[1],Lt[2]]);break;case"L":_t.push([Lt[1],Lt[2]]);break;case"A":_t.push([Lt[6],Lt[7]]);break;case"Q":_t.push([Lt[3],Lt[4]]),_t.push([Lt[1],Lt[2]]);break;case"T":_t.push([Lt[1],Lt[2]]);break;case"C":_t.push([Lt[5],Lt[6]]),_t.push([Lt[1],Lt[2]]),_t.push([Lt[3],Lt[4]]);break;case"S":_t.push([Lt[3],Lt[4]]),_t.push([Lt[1],Lt[2]]);break;case"H":_t.push([Lt[1],Lt[1]]);break;case"V":_t.push([Lt[1],Lt[1]]);break;default:}return _t}var Nt=function(_t,mt){if(_t.length<=1)return _t;for(var At,rt=0;rt<mt.length;rt++)if(_t[rt][0]!==mt[rt][0])switch(At=It(_t[rt]),mt[rt][0]){case"M":_t[rt]=["M"].concat(At[0]);break;case"L":_t[rt]=["L"].concat(At[0]);break;case"A":_t[rt]=[].concat(mt[rt]),_t[rt][6]=At[0][0],_t[rt][7]=At[0][1];break;case"Q":if(At.length<2)if(rt>0)At=ut(At,_t[rt-1],1);else{_t[rt]=mt[rt];break}_t[rt]=["Q"].concat(At.reduce(function(Mt,z){return Mt.concat(z)},[]));break;case"T":_t[rt]=["T"].concat(At[0]);break;case"C":if(At.length<3)if(rt>0)At=ut(At,_t[rt-1],2);else{_t[rt]=mt[rt];break}_t[rt]=["C"].concat(At.reduce(function(Mt,z){return Mt.concat(z)},[]));break;case"S":if(At.length<2)if(rt>0)At=ut(At,_t[rt-1],1);else{_t[rt]=mt[rt];break}_t[rt]=["S"].concat(At.reduce(function(Mt,z){return Mt.concat(z)},[]));break;default:_t[rt]=mt[rt]}return _t};E.exports={parsePathString:r,parsePathArray:b,pathTocurve:f,pathToAbsolute:i,catmullRomToBezier:h,rectPath:m,fillPath:Y,fillPathByDiff:ht,formatPath:Nt,intersection:F}},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.setMatrixArrayType=c,T.toRadian=h,T.equals=n;var t=T.EPSILON=1e-6,l=T.ARRAY_TYPE=typeof Float32Array!="undefined"?Float32Array:Array,s=T.RANDOM=Math.random;function c(i){T.ARRAY_TYPE=l=i}var r=Math.PI/180;function h(i){return i*r}function n(i,a){return Math.abs(i-a)<=t*Math.max(1,Math.abs(i),Math.abs(a))}},function(E,T,e){var t=e(6),l=e(4),s=e(2);E.exports=function(r,h){for(var n=[],i={},a=0;a<r.length;a++){var o=r[a],u=o[h];t(u)||(l(u)||(u=[u]),s(u,function(f){i[f]||(n.push(f),i[f]=!0)}))}return n}},function(E,T,e){var t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},l=e(4),s=function c(r){if((typeof r=="undefined"?"undefined":t(r))!=="object"||r===null)return r;var h=void 0;if(l(r)){h=[];for(var n=0,i=r.length;n<i;n++)t(r[n])==="object"&&r[n]!=null?h[n]=c(r[n]):h[n]=r[n]}else{h={};for(var a in r)t(r[a])==="object"&&r[a]!=null?h[a]=c(r[a]):h[a]=r[a]}return h};E.exports=s},function(E,T,e){var t=e(40),l=e(4),s=5;function c(h,n,i,a){i=i||0,a=a||s;for(var o in n)if(n.hasOwnProperty(o)){var u=n[o];u!==null&&t(u)?(t(h[o])||(h[o]={}),i<a?c(h[o],u,i+1,a):h[o]=n[o]):l(u)?(h[o]=[],h[o]=h[o].concat(u)):u!==void 0&&(h[o]=u)}}var r=function(){for(var n=new Array(arguments.length),i=n.length,a=0;a<i;a++)n[a]=arguments[a];for(var o=n[0],u=1;u<i;u++)c(o,n[u]);return o};E.exports=r},function(E,T,e){var t=e(2),l=e(21),s=function(r,h){if(!l(r))return r;var n=[];return t(r,function(i,a){h(i,a)&&n.push(i)}),n};E.exports=s},function(E,T,e){var t=e(86),l=e(21),s=e(15),c=function r(h,n){if(h===n)return!0;if(!h||!n||s(h)||s(n))return!1;if(l(h)||l(n)){if(h.length!==n.length)return!1;for(var i=!0,a=0;a<h.length&&(i=r(h[a],n[a]),!!i);a++);return i}if(t(h)||t(n)){var o=Object.keys(h),u=Object.keys(n);if(o.length!==u.length)return!1;for(var f=!0,v=0;v<o.length&&(f=r(h[o[v]],n[o[v]]),!!f);v++);return f}return!1};E.exports=c},function(E,T){var e=function(l,s,c){return l<s?s:l>c?c:l};E.exports=e},function(E,T,e){var t=e(348);t.translate=function(l,s,c){var r=new Array(9);return t.fromTranslation(r,c),t.multiply(l,r,s)},t.rotate=function(l,s,c){var r=new Array(9);return t.fromRotation(r,c),t.multiply(l,r,s)},t.scale=function(l,s,c){var r=new Array(9);return t.fromScaling(r,c),t.multiply(l,r,s)},E.exports=t},function(E,T){var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},t=function(s){return(typeof s=="undefined"?"undefined":e(s))==="object"&&s!==null};E.exports=t},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t={Chart:"deleteChart",Coord:"deleteCoord",Geom:"deleteGeom",Axis:"deleteAxis",Tooltip:"deleteTooltip",Legend:"deleteLegend",Label:"deleteLabel",View:"deleteView",Guide:"deleteGuide",GuideLine:"deleteTypedGuide",GuideImage:"deleteTypedGuide",GuideText:"deleteTypedGuide",GuideRegion:"deleteTypedGuide",GuideHtml:"deleteTypedGuide",GuideArc:"deleteTypedGuide",GuideRegionFilter:"deleteTypedGuide",GuideDataMarker:"deleteTypedGuide",GuideDataRegion:"deleteTypedGuide",Facet:"deleteFacet"},l={merge:function(c,r,h,n){this.mergeDelete(c,r,h),this.mergeUpdate(c,n)},mergeDelete:function(c,r,h){var n=this;Object.keys(r).forEach(function(i){var a=t[h[i].name],o=c;h[i].viewId&&(o=c.views[h[i].viewId]),n[a]&&n[a](o,i,h[i].parentInfo.id)})},deleteAxis:function(c,r){!c||delete c.axises[r]},deleteTooltip:function(c){!c||delete c.tooltip},deleteCoord:function(c){!c||delete c.coord},deleteLegend:function(c,r){!c||delete c.legends[r]},deleteGuide:function(c){!c||delete c.guide},deleteGeom:function(c,r){!c||!c.geoms||delete c.geoms[r]},deleteLabel:function(c,r,h){!c||!c.geoms||!c.geoms[h]||delete c.geoms[h].label},deleteFacet:function(c){!c||delete c.facet},deleteTypedGuide:function(c,r){!c||!c.guide||delete c.guide.elements[r]},deleteView:function(c,r){!c||delete c.views[r]},mergeUpdate:function(c,r){this.mergeChart(c,r),this.mergeAxises(c,r),this.mergeCoord(c,r),this.mergeGeoms(c.geoms,r),this.mergeLegends(c.legends,r),this.mergeTooltip(c,r),this.mergeViews(c.views,r),this.mergeGuide(c.guide,r)},mergeChart:function(c,r){c.chart&&c.chart.updateProps&&(c.chart.props=c.chart.updateProps),r&&delete c.chart.g2Instance},mergeAxises:function(c,r){var h=c.axises;if(!h!=null)for(var n in h)h[n]&&h[n].updateProps&&(h[n].props=h[n].updateProps),r&&delete h[n].g2Instance},mergeTooltip:function(c,r){!c.tooltip||(r&&delete c.tooltip.g2Instance,c.tooltip.updateProps&&(c.tooltip.props=c.tooltip.updateProps))},mergeCoord:function(c,r){!c.coord||(r&&delete c.coord.g2Instance,c.coord.updateProps&&(c.coord.props=c.coord.updateProps))},mergeLegends:function(c,r){if(!!c){for(var h in c)if(c[h]){var n=c[h];r&&delete n.g2Instance,n.updateProps&&(n.props=n.updateProps)}}},mergeGeoms:function(c,r){if(c!=null)for(var h in c)c[h]&&(r&&(delete c[h].g2Instance,c[h].label&&c[h].label.g2Instance&&(c[h].label.updateProps&&(c[h].label.props=c[h].label.updateProps),delete c[h].label.g2Instance)),c[h].updateProps&&(c[h].props=c[h].updateProps))},mergeGuide:function(c,r){if(c!=null){var h=c.elements;for(var n in h)h[n]&&(r&&delete h[n].g2Instance,h[n].updateProps&&(h[n].props=h[n].updateProps))}},mergeView:function(c,r){!c||(r&&c.g2Instance&&delete c.g2Instance,c.updateProps&&(c.props=c.updateProps),this.mergeCoord(c,r),this.mergeAxises(c,r),this.mergeGeoms(c.geoms,r),this.mergeGuide(c.guide,r))},mergeViews:function(c,r){if(c!=null)for(var h in c)c[h]&&this.mergeView(c[h],r)}};T.default=l},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.Prop=T.Util=void 0;var t=e(58),l=r(t),s=e(437),c=r(s);function r(h){return h&&h.__esModule?h:{default:h}}T.Util=l.default,T.Prop=c.default},function(E,T,e){"use strict";T.c=l,e.d(T,"e",function(){return s}),e.d(T,"d",function(){return c}),T.h=x,T.b=P,T.g=A,T.a=O,T.f=k;var t=e(90);function l(){}var s=.7,c=1/s,r="\\s*([+-]?\\d+)\\s*",h="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",n="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",i=/^#([0-9a-f]{3,8})$/,a=new RegExp("^rgb\\("+[r,r,r]+"\\)$"),o=new RegExp("^rgb\\("+[n,n,n]+"\\)$"),u=new RegExp("^rgba\\("+[r,r,r,h]+"\\)$"),f=new RegExp("^rgba\\("+[n,n,n,h]+"\\)$"),v=new RegExp("^hsl\\("+[h,n,n]+"\\)$"),b=new RegExp("^hsla\\("+[h,n,n,h]+"\\)$"),y={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};e.i(t.a)(l,x,{copy:function(it){return Object.assign(new this.constructor,this,it)},displayable:function(){return this.rgb().displayable()},hex:g,formatHex:g,formatHsl:_,formatRgb:M,toString:M});function g(){return this.rgb().formatHex()}function _(){return V(this).formatHsl()}function M(){return this.rgb().formatRgb()}function x(it){var ct,ht;return it=(it+"").trim().toLowerCase(),(ct=i.exec(it))?(ht=ct[1].length,ct=parseInt(ct[1],16),ht===6?m(ct):ht===3?new O(ct>>8&15|ct>>4&240,ct>>4&15|ct&240,(ct&15)<<4|ct&15,1):ht===8?S(ct>>24&255,ct>>16&255,ct>>8&255,(ct&255)/255):ht===4?S(ct>>12&15|ct>>8&240,ct>>8&15|ct>>4&240,ct>>4&15|ct&240,((ct&15)<<4|ct&15)/255):null):(ct=a.exec(it))?new O(ct[1],ct[2],ct[3],1):(ct=o.exec(it))?new O(ct[1]*255/100,ct[2]*255/100,ct[3]*255/100,1):(ct=u.exec(it))?S(ct[1],ct[2],ct[3],ct[4]):(ct=f.exec(it))?S(ct[1]*255/100,ct[2]*255/100,ct[3]*255/100,ct[4]):(ct=v.exec(it))?Z(ct[1],ct[2]/100,ct[3]/100,1):(ct=b.exec(it))?Z(ct[1],ct[2]/100,ct[3]/100,ct[4]):y.hasOwnProperty(it)?m(y[it]):it==="transparent"?new O(NaN,NaN,NaN,0):null}function m(it){return new O(it>>16&255,it>>8&255,it&255,1)}function S(it,ct,ht,ut){return ut<=0&&(it=ct=ht=NaN),new O(it,ct,ht,ut)}function P(it){return it instanceof l||(it=x(it)),it?(it=it.rgb(),new O(it.r,it.g,it.b,it.opacity)):new O}function A(it,ct,ht,ut){return arguments.length===1?P(it):new O(it,ct,ht,ut==null?1:ut)}function O(it,ct,ht,ut){this.r=+it,this.g=+ct,this.b=+ht,this.opacity=+ut}e.i(t.a)(O,A,e.i(t.b)(l,{brighter:function(it){return it=it==null?c:Math.pow(c,it),new O(this.r*it,this.g*it,this.b*it,this.opacity)},darker:function(it){return it=it==null?s:Math.pow(s,it),new O(this.r*it,this.g*it,this.b*it,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:R,formatHex:R,formatRgb:W,toString:W}));function R(){return"#"+F(this.r)+F(this.g)+F(this.b)}function W(){var it=this.opacity;return it=isNaN(it)?1:Math.max(0,Math.min(1,it)),(it===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(it===1?")":", "+it+")")}function F(it){return it=Math.max(0,Math.min(255,Math.round(it)||0)),(it<16?"0":"")+it.toString(16)}function Z(it,ct,ht,ut){return ut<=0?it=ct=ht=NaN:ht<=0||ht>=1?it=ct=NaN:ct<=0&&(it=NaN),new Y(it,ct,ht,ut)}function V(it){if(it instanceof Y)return new Y(it.h,it.s,it.l,it.opacity);if(it instanceof l||(it=x(it)),!it)return new Y;if(it instanceof Y)return it;it=it.rgb();var ct=it.r/255,ht=it.g/255,ut=it.b/255,It=Math.min(ct,ht,ut),Nt=Math.max(ct,ht,ut),Lt=NaN,_t=Nt-It,mt=(Nt+It)/2;return _t?(ct===Nt?Lt=(ht-ut)/_t+(ht<ut)*6:ht===Nt?Lt=(ut-ct)/_t+2:Lt=(ct-ht)/_t+4,_t/=mt<.5?Nt+It:2-Nt-It,Lt*=60):_t=mt>0&&mt<1?0:Lt,new Y(Lt,_t,mt,it.opacity)}function k(it,ct,ht,ut){return arguments.length===1?V(it):new Y(it,ct,ht,ut==null?1:ut)}function Y(it,ct,ht,ut){this.h=+it,this.s=+ct,this.l=+ht,this.opacity=+ut}e.i(t.a)(Y,k,e.i(t.b)(l,{brighter:function(it){return it=it==null?c:Math.pow(c,it),new Y(this.h,this.s,this.l*it,this.opacity)},darker:function(it){return it=it==null?s:Math.pow(s,it),new Y(this.h,this.s,this.l*it,this.opacity)},rgb:function(){var it=this.h%360+(this.h<0)*360,ct=isNaN(it)||isNaN(this.s)?0:this.s,ht=this.l,ut=ht+(ht<.5?ht:1-ht)*ct,It=2*ht-ut;return new O(K(it>=240?it-240:it+120,It,ut),K(it,It,ut),K(it<120?it+240:it-120,It,ut),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var it=this.opacity;return it=isNaN(it)?1:Math.max(0,Math.min(1,it)),(it===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(it===1?")":", "+it+")")}}));function K(it,ct,ht){return(it<60?ct+(ht-ct)*it/60:it<180?ht:it<240?ct+(ht-ct)*(240-it)/60:ct)*255}},function(E,T,e){"use strict";T.b=t,T.a=function(l,s,c){l.prototype=s.prototype=c,c.constructor=l};function t(l,s){var c=Object.create(l.prototype);for(var r in s)c[r]=s[r];return c}},function(E,T,e){"use strict";T.b=t;function t(l,s,c,r,h){var n=l*l,i=n*l;return((1-3*l+3*n-i)*s+(4-6*n+3*i)*c+(1+3*l+3*n-3*i)*r+i*h)/6}T.a=function(l){var s=l.length-1;return function(c){var r=c<=0?c=0:c>=1?(c=1,s-1):Math.floor(c*s),h=l[r],n=l[r+1],i=r>0?l[r-1]:2*h-n,a=r<s-1?l[r+2]:2*n-h;return t((c-r/s)*s,i,h,n,a)}}},function(E,T,e){"use strict";var t=e(12),l=e(205),s=e(200),c=e(203),r=e(59),h=e(204),n=e(206),i=e(202);T.a=function(a,o){var u=typeof o,f;return o==null||u==="boolean"?e.i(i.a)(o):(u==="number"?r.a:u==="string"?(f=e.i(t.f)(o))?(o=f,l.a):n.a:o instanceof t.f?l.a:o instanceof Date?c.a:Array.isArray(o)?s.a:typeof o.valueOf!="function"&&typeof o.toString!="function"||isNaN(o)?h.a:r.a)(a,o)}},function(E,T,e){"use strict";T.b=t;function t(l,s,c,r,h){var n=l*l,i=n*l;return((1-3*l+3*n-i)*s+(4-6*n+3*i)*c+(1+3*l+3*n-3*i)*r+i*h)/6}T.a=function(l){var s=l.length-1;return function(c){var r=c<=0?c=0:c>=1?(c=1,s-1):Math.floor(c*s),h=l[r],n=l[r+1],i=r>0?l[r-1]:2*h-n,a=r<s-1?l[r+2]:2*n-h;return t((c-r/s)*s,i,h,n,a)}}},function(E,T,e){"use strict";var t=e(96),l=e(207),s=e(93),c=e(208),r=e(210),h=e(465),n=e(468),i=e(60);e.d(T,"b",function(){return i.a});var a=e(95),o=e(211),u=e(472),f=e(213);e.d(T,"d",function(){return f.a});var v=e(474);e.d(T,"a",function(){return v.a}),e.d(T,"e",function(){return v.b});var b=e(476),y=e(212);e.d(T,"c",function(){return y.a});var g=e(467),_=e(469),M=e(466),x=e(464),m=e(470),S=e(471)},function(E,T,e){"use strict";T.a=t,T.b=function(l,s){s||(s=[]);var c=l?Math.min(s.length,l.length):0,r=s.slice(),h;return function(n){for(h=0;h<c;++h)r[h]=l[h]*(1-n)+s[h]*n;return r}};function t(l){return ArrayBuffer.isView(l)&&!(l instanceof DataView)}},function(E,T,e){"use strict";var t=e(12),l=e(212),s=e(207),c=e(210),r=e(60),h=e(211),n=e(213),i=e(209),a=e(95);T.a=function(o,u){var f=typeof u,v;return u==null||f==="boolean"?e.i(i.a)(u):(f==="number"?r.a:f==="string"?(v=e.i(t.f)(u))?(u=v,l.a):n.a:u instanceof t.f?l.a:u instanceof Date?c.a:e.i(a.a)(u)?a.b:Array.isArray(u)?s.a:typeof u.valueOf!="function"&&typeof u.toString!="function"||isNaN(u)?h.a:r.a)(o,u)}},function(E,T,e){"use strict";var t=e(98);T.a=function(l){var s=l+="",c=s.indexOf(":");return c>=0&&(s=l.slice(0,c))!=="xmlns"&&(l=l.slice(c+1)),t.a.hasOwnProperty(s)?{space:t.a[s],local:l}:l}},function(E,T,e){"use strict";e.d(T,"b",function(){return t});var t="http://www.w3.org/1999/xhtml";T.a={svg:"http://www.w3.org/2000/svg",xhtml:t,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}},function(E,T,e){"use strict";e.d(T,"a",function(){return l}),T.b=a;var t={},l=null;if(typeof document!="undefined"){var s=document.documentElement;"onmouseenter"in s||(t={mouseenter:"mouseover",mouseleave:"mouseout"})}function c(o,u,f){return o=r(o,u,f),function(v){var b=v.relatedTarget;(!b||b!==this&&!(b.compareDocumentPosition(this)&8))&&o.call(this,v)}}function r(o,u,f){return function(v){var b=l;l=v;try{o.call(this,this.__data__,u,f)}finally{l=b}}}function h(o){return o.trim().split(/^|\s+/).map(function(u){var f="",v=u.indexOf(".");return v>=0&&(f=u.slice(v+1),u=u.slice(0,v)),{type:u,name:f}})}function n(o){return function(){var u=this.__on;if(!!u){for(var f=0,v=-1,b=u.length,y;f<b;++f)y=u[f],(!o.type||y.type===o.type)&&y.name===o.name?this.removeEventListener(y.type,y.listener,y.capture):u[++v]=y;++v?u.length=v:delete this.__on}}}function i(o,u,f){var v=t.hasOwnProperty(o.type)?c:r;return function(b,y,g){var _=this.__on,M,x=v(u,y,g);if(_){for(var m=0,S=_.length;m<S;++m)if((M=_[m]).type===o.type&&M.name===o.name){this.removeEventListener(M.type,M.listener,M.capture),this.addEventListener(M.type,M.listener=x,M.capture=f),M.value=u;return}}this.addEventListener(o.type,x,f),M={type:o.type,name:o.name,value:u,listener:x,capture:f},_?_.push(M):this.__on=[M]}}T.c=function(o,u,f){var v=h(o+""),b,y=v.length,g;if(arguments.length<2){var _=this.node().__on;if(_){for(var M=0,x=_.length,m;M<x;++M)for(b=0,m=_[M];b<y;++b)if((g=v[b]).type===m.type&&g.name===m.name)return m.value}return}for(_=u?i:n,f==null&&(f=!1),b=0;b<y;++b)this.each(_(v[b],u,f));return this};function a(o,u,f,v){var b=l;o.sourceEvent=l,l=o;try{return u.apply(f,v)}finally{l=b}}},function(E,T,e){"use strict";function t(){}T.a=function(l){return l==null?t:function(){return this.querySelector(l)}}},function(E,T,e){"use strict";var t=e(99);T.a=function(){for(var l=t.a,s;s=l.sourceEvent;)l=s;return l}},function(E,T,e){"use strict";T.a=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(104);e.d(T,"now",function(){return t.a}),e.d(T,"timer",function(){return t.b}),e.d(T,"timerFlush",function(){return t.c});var l=e(513);e.d(T,"timeout",function(){return l.a});var s=e(512);e.d(T,"interval",function(){return s.a})},function(E,T,e){"use strict";T.a=f,T.d=b,T.b=y,T.c=g;var t=0,l=0,s=0,c=1e3,r,h,n=0,i=0,a=0,o=typeof performance=="object"&&performance.now?performance:Date,u=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(S){setTimeout(S,17)};function f(){return i||(u(v),i=o.now()+a)}function v(){i=0}function b(){this._call=this._time=this._next=null}b.prototype=y.prototype={constructor:b,restart:function(S,P,A){if(typeof S!="function")throw new TypeError("callback is not a function");A=(A==null?f():+A)+(P==null?0:+P),!this._next&&h!==this&&(h?h._next=this:r=this,h=this),this._call=S,this._time=A,m()},stop:function(){this._call&&(this._call=null,this._time=Infinity,m())}};function y(S,P,A){var O=new b;return O.restart(S,P,A),O}function g(){f(),++t;for(var S=r,P;S;)(P=i-S._time)>=0&&S._call.call(null,P),S=S._next;--t}function _(){i=(n=o.now())+a,t=l=0;try{g()}finally{t=0,x(),i=0}}function M(){var S=o.now(),P=S-n;P>c&&(a-=P,n=S)}function x(){for(var S,P=r,A,O=Infinity;P;)P._call?(O>P._time&&(O=P._time),S=P,P=P._next):(A=P._next,P._next=null,P=S?S._next=A:r=A);h=S,m(O)}function m(S){if(!t){l&&(l=clearTimeout(l));var P=S-i;P>24?(S<Infinity&&(l=setTimeout(_,S-o.now()-a)),s&&(s=clearInterval(s))):(s||(n=o.now(),s=setInterval(M,c)),t=1,u(_))}}},function(E,T,e){var t;/*!
* EventEmitter v5.1.0 - git.io/ee
* Unlicense - http://unlicense.org/
* Oliver Caldwell - http://oli.me.uk/
* @preserve
*/(function(l){"use strict";function s(){}var c=s.prototype,r=l.EventEmitter;function h(a,o){for(var u=a.length;u--;)if(a[u].listener===o)return u;return-1}function n(a){return function(){return this[a].apply(this,arguments)}}c.getListeners=function(o){var u=this._getEvents(),f,v;if(o instanceof RegExp){f={};for(v in u)u.hasOwnProperty(v)&&o.test(v)&&(f[v]=u[v])}else f=u[o]||(u[o]=[]);return f},c.flattenListeners=function(o){var u=[],f;for(f=0;f<o.length;f+=1)u.push(o[f].listener);return u},c.getListenersAsObject=function(o){var u=this.getListeners(o),f;return u instanceof Array&&(f={},f[o]=u),f||u};function i(a){return typeof a=="function"||a instanceof RegExp?!0:a&&typeof a=="object"?i(a.listener):!1}c.addListener=function(o,u){if(!i(u))throw new TypeError("listener must be a function");var f=this.getListenersAsObject(o),v=typeof u=="object",b;for(b in f)f.hasOwnProperty(b)&&h(f[b],u)===-1&&f[b].push(v?u:{listener:u,once:!1});return this},c.on=n("addListener"),c.addOnceListener=function(o,u){return this.addListener(o,{listener:u,once:!0})},c.once=n("addOnceListener"),c.defineEvent=function(o){return this.getListeners(o),this},c.defineEvents=function(o){for(var u=0;u<o.length;u+=1)this.defineEvent(o[u]);return this},c.removeListener=function(o,u){var f=this.getListenersAsObject(o),v,b;for(b in f)f.hasOwnProperty(b)&&(v=h(f[b],u),v!==-1&&f[b].splice(v,1));return this},c.off=n("removeListener"),c.addListeners=function(o,u){return this.manipulateListeners(!1,o,u)},c.removeListeners=function(o,u){return this.manipulateListeners(!0,o,u)},c.manipulateListeners=function(o,u,f){var v,b,y=o?this.removeListener:this.addListener,g=o?this.removeListeners:this.addListeners;if(typeof u=="object"&&!(u instanceof RegExp))for(v in u)u.hasOwnProperty(v)&&(b=u[v])&&(typeof b=="function"?y.call(this,v,b):g.call(this,v,b));else for(v=f.length;v--;)y.call(this,u,f[v]);return this},c.removeEvent=function(o){var u=typeof o,f=this._getEvents(),v;if(u==="string")delete f[o];else if(o instanceof RegExp)for(v in f)f.hasOwnProperty(v)&&o.test(v)&&delete f[v];else delete this._events;return this},c.removeAllListeners=n("removeEvent"),c.emitEvent=function(o,u){var f=this.getListenersAsObject(o),v,b,y,g,_;for(g in f)if(f.hasOwnProperty(g))for(v=f[g].slice(0),y=0;y<v.length;y++)b=v[y],b.once===!0&&this.removeListener(o,b.listener),_=b.listener.apply(this,u||[]),_===this._getOnceReturnValue()&&this.removeListener(o,b.listener);return this},c.trigger=n("emitEvent"),c.emit=function(o){var u=Array.prototype.slice.call(arguments,1);return this.emitEvent(o,u)},c.setOnceReturnValue=function(o){return this._onceReturnValue=o,this},c._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},c._getEvents=function(){return this._events||(this._events={})},s.noConflict=function(){return l.EventEmitter=r,s},t=function(){return s}.call(l,e,l,E),t!==void 0&&(E.exports=t)})(this||{})},function(E,T,e){var t=0,l=e(2),s={values:e(79)};E.exports={isAdjust:function(r){return this.adjustNames.indexOf(r)>=0},_getDimValues:function(r){var h=this,n={},i=[];if(h.xField&&h.isAdjust("x")&&i.push(h.xField),h.yField&&h.isAdjust("y")&&i.push(h.yField),l(i,function(u){var f=s.values(r,u);f.sort(function(v,b){return v-b}),n[u]=f}),!h.yField&&h.isAdjust("y")){var a="y",o=[t,1];n[a]=o}return n},adjustData:function(r,h){var n=this,i=n._getDimValues(h);l(r,function(a,o){l(i,function(u,f){n.adjustDim(f,u,a,r.length,o)})})},getAdjustRange:function(r,h,n){var i=this,a=n.indexOf(h),o=n.length,u,f;return!i.yField&&i.isAdjust("y")?(u=0,f=1):o>1?(u=a===0?n[0]:n[a-1],f=a===o-1?n[o-1]:n[a+1],a!==0?u+=(h-u)/2:u-=(f-h)/2,a!==o-1?f-=(f-h)/2:f+=(h-n[o-2])/2):(u=h===0?0:h-.5,f=h===0?1:h+.5),{pre:u,next:f}},groupData:function(r,h){var n={};return l(r,function(i){var a=i[h];a===void 0&&(a=i[h]=t),n[a]||(n[a]=[]),n[a].push(i)}),n}}},function(E,T,e){var t=e(11),l=e(15),s=e(2),c=/rgba?\(([\s.,0-9]+)\)/;function r(){var b=document.createElement("i");return b.title="Web Colour Picker",b.style.display="none",document.body.appendChild(b),b}function h(b,y,g,_){var M=b[_]+(y[_]-b[_])*g;return M}function n(b){return"#"+i(b[0])+i(b[1])+i(b[2])}function i(b){return b=Math.round(b),b=b.toString(16),b.length===1&&(b="0"+b),b}function a(b,y){(isNaN(y)||!t(y)||y<0)&&(y=0),y>1&&(y=1);var g=b.length-1,_=Math.floor(g*y),M=g*y-_,x=b[_],m=_===g?x:b[_+1],S=n([h(x,m,M,0),h(x,m,M,1),h(x,m,M,2)]);return S}function o(b){var y=[];return y.push(parseInt(b.substr(1,2),16)),y.push(parseInt(b.substr(3,2),16)),y.push(parseInt(b.substr(5,2),16)),y}var u={},f=null,v={toRGB:function(y){if(y[0]==="#"&&y.length===7)return y;f||(f=r());var g;if(u[y])g=u[y];else{f.style.color=y,g=document.defaultView.getComputedStyle(f,"").getPropertyValue("color");var _=c.exec(g),M=_[1].split(/\s*,\s*/);g=n(M),u[y]=g}return g},rgb2arr:o,gradient:function(y){var g=[];return l(y)&&(y=y.split("-")),s(y,function(_){_.indexOf("#")===-1&&(_=v.toRGB(_)),g.push(o(_))}),function(_){return a(g,_)}}};E.exports=v},function(E,T,e){var t=e(31),l=t.Group,s=e(3),c=function r(h){r.superclass.constructor.call(this,h)};s.extend(c,l),s.augment(c,{getDefaultCfg:function(){return{zIndex:1,type:"line",lineStyle:null,items:null,alternateColor:null,matrix:null,hideFirstLine:!1,hideLastLine:!1,hightLightZero:!1,zeroLineStyle:{stroke:"#595959",lineDash:[0,0]}}},_renderUI:function(){c.superclass._renderUI.call(this),this._drawLines()},_drawLines:function(){var h=this,n=h.get("lineStyle"),i=h.get("items");i&&i.length&&(h._precessItems(i),h._drawGridLines(i,n))},_precessItems:function(h){var n=this,i;s.each(h,function(a,o){i&&n.get("alternateColor")&&n._drawAlternativeBg(a,i,o),i=a})},_drawGridLines:function(h,n){var i=this,a=this.get("type"),o,u,f,v,b=h.length;a==="line"||a==="polygon"?s.each(h,function(y,g){i.get("hideFirstLine")&&g===0||i.get("hideLastLine")&&g===b-1||(v=y.points,u=[],a==="line"?(u.push(["M",v[0].x,v[0].y]),u.push(["L",v[v.length-1].x,v[v.length-1].y])):s.each(v,function(_,M){M===0?u.push(["M",_.x,_.y]):u.push(["L",_.x,_.y])}),i._drawZeroLine(a,g)?f=s.mix({},i.get("zeroLineStyle"),{path:u}):f=s.mix({},n,{path:u}),o=i.addShape("path",{attrs:f}),o.name="axis-grid",o._id=y._id,o.set("coord",i.get("coord")),i.get("appendInfo")&&o.setSilent("appendInfo",i.get("appendInfo")))}):s.each(h,function(y,g){i.get("hideFirstLine")&&g===0||i.get("hideLastLine")&&g===b-1||(v=y.points,u=[],s.each(v,function(_,M){var x=_.radius;M===0?u.push(["M",_.x,_.y]):u.push(["A",x,x,0,0,_.flag,_.x,_.y])}),f=s.mix({},n,{path:u}),o=i.addShape("path",{attrs:f}),o.name="axis-grid",o._id=y._id,o.set("coord",i.get("coord")),i.get("appendInfo")&&o.setSilent("appendInfo",i.get("appendInfo")))})},_drawZeroLine:function(h,n){var i=this,a=i.get("tickValues");return!!(h==="line"&&a&&a[n]===0&&i.get("hightLightZero"))},_drawAlternativeBg:function(h,n,i){var a=this,o=a.get("alternateColor"),u,f,v;s.isString(o)?f=o:s.isArray(o)&&(f=o[0],v=o[1]),i%2==0?v&&(u=a._getBackItem(n.points,h.points,v)):f&&(u=a._getBackItem(n.points,h.points,f));var b=a.addShape("Path",{attrs:u});b.name="axis-grid-rect",b._id=h._id&&h._id.replace("grid","grid-rect"),b.set("coord",a.get("coord")),a.get("appendInfo")&&b.setSilent("appendInfo",a.get("appendInfo"))},_getBackItem:function(h,n,i){var a=[],o=this.get("type");if(o==="line")a.push(["M",h[0].x,h[0].y]),a.push(["L",h[h.length-1].x,h[h.length-1].y]),a.push(["L",n[n.length-1].x,n[n.length-1].y]),a.push(["L",n[0].x,n[0].y]),a.push(["Z"]);else if(o==="polygon"){s.each(h,function(g,_){_===0?a.push(["M",g.x,g.y]):a.push(["L",g.x,g.y])});for(var u=n.length-1;u>=0;u--)a.push(["L",n[u].x,n[u].y]);a.push(["Z"])}else{var f=h[0].flag;s.each(h,function(g,_){var M=g.radius;_===0?a.push(["M",g.x,g.y]):a.push(["A",M,M,0,0,g.flag,g.x,g.y])});for(var v=n.length-1;v>=0;v--){var b=n[v],y=b.radius;v===n.length-1?a.push(["M",b.x,b.y]):a.push(["A",y,y,0,0,f===1?0:1,b.x,b.y])}}return{fill:i,path:a}}}),E.exports=c},function(E,T,e){var t=e(3);E.exports={getFirstScale:function(s){var c;return t.each(s,function(r){if(r)return c=r,!1}),c}}},function(E,T,e){function t(y){return function(){var g=r(y),_;if(c()){var M=r(this).constructor;_=Reflect.construct(g,arguments,M)}else _=g.apply(this,arguments);return l(this,_)}}function l(y,g){return g&&(typeof g=="object"||typeof g=="function")?g:s(y)}function s(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(y){return!1}}function r(y){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(_){return _.__proto__||Object.getPrototypeOf(_)},r(y)}function h(y,g){y.prototype=Object.create(g.prototype),y.prototype.constructor=y,y.__proto__=g}var n=e(3),i=n.DomUtil,a=e(36),o=e(254),u=e(255),f=e(253),v={scatter:o,map:u,treemap:f},b=function(y){h(_,y);var g=t(_);function _(){return y.apply(this,arguments)||this}var M=_.prototype;return M.getDefaultCfg=function(){var m=y.prototype.getDefaultCfg.call(this);return n.mix({},m,{name:"label",type:"default",textStyle:null,formatter:null,items:null,useHtml:!1,containerTpl:'<div class="g-labels" style="position:absolute;top:0;left:0;"></div>',itemTpl:'<div class="g-label" style="position:absolute;">{text}</div>',labelLine:!1,lineGroup:null,shapes:null,config:!0,capture:!0})},M.clear=function(){var m=this.get("group"),S=this.get("container");m&&!m.get("destroyed")&&m.clear(),S&&(S.innerHTML=""),y.prototype.clear.call(this)},M.destroy=function(){var m=this.get("group"),S=this.get("container");m.destroy||m.destroy(),S&&S.parentNode&&S.parentNode.removeChild(S),y.prototype.destroy.call(this)},M.render=function(){this.clear(),this._init(),this.beforeDraw(),this.draw(),this.afterDraw()},M._dryDraw=function(){var m=this,S=m.get("items"),P=m.getLabels(),A=P.length;n.each(S,function(R,W){if(W<A){var F=P[W];m.changeLabel(F,R)}else{var Z=m._addLabel(R,W);Z&&(Z._id=R._id,Z.set("coord",R.coord))}});for(var O=A-1;O>=S.length;O--)P[O].remove();m._adjustLabels(),(m.get("labelLine")||!m.get("config"))&&m.drawLines()},M.draw=function(){this._dryDraw(),this.get("canvas").draw()},M.changeLabel=function(m,S){if(!!m)if(m.tagName){var P=this._createDom(S);m.innerHTML=P.innerHTML,this._setCustomPosition(S,m)}else m._id=S._id,m.attr("text",S.text),(m.attr("x")!==S.x||m.attr("y")!==S.y)&&(m.resetMatrix(),S.textStyle.rotate&&(m.rotateAtStart(S.textStyle.rotate),delete S.textStyle.rotate),m.attr(S))},M.show=function(){var m=this.get("group"),S=this.get("container");m&&m.show(),S&&(S.style.opacity=1)},M.hide=function(){var m=this.get("group"),S=this.get("container");m&&m.hide(),S&&(S.style.opacity=0)},M.drawLines=function(){var m=this,S=m.get("labelLine");typeof S=="boolean"&&m.set("labelLine",{});var P=m.get("lineGroup");!P||P.get("destroyed")?(P=m.get("group").addGroup({elCls:"x-line-group"}),m.set("lineGroup",P)):P.clear(),n.each(m.get("items"),function(A){m.lineToLabel(A,P)})},M.lineToLabel=function(m,S){var P=this;if(!(!P.get("config")&&!m.labelLine)){var A=m.labelLine||P.get("labelLine"),O=typeof m.capture=="undefined"?P.get("capture"):m.capture,R=A.path;if(R&&n.isFunction(A.path)&&(R=A.path(m)),!R){var W=m.start||{x:m.x-m._offset.x,y:m.y-m._offset.y};R=[["M",W.x,W.y],["L",m.x,m.y]]}var F=m.color;F||(m.textStyle&&m.textStyle.fill?F=m.textStyle.fill:F="#000");var Z=S.addShape("path",{attrs:n.mix({path:R,fill:null,stroke:F},A),capture:O});Z.name=P.get("name"),Z._id=m._id&&m._id.replace("glabel","glabelline"),Z.set("coord",P.get("coord"))}},M._adjustLabels=function(){var m=this,S=m.get("type"),P=m.getLabels(),A=m.get("shapes"),O=v[S];S==="default"||!O||O(P,A)},M.getLabels=function(){var m=this.get("container");return m?n.toArray(m.childNodes):this.get("group").get("children")},M._addLabel=function(m,S){var P=m;return this.get("config")&&(P=this._getLabelCfg(m,S)),this._createText(P)},M._getLabelCfg=function(m,S){var P=this.get("textStyle")||{},A=this.get("formatter"),O=this.get("htmlTemplate");if(!n.isObject(m)){var R=m;m={},m.text=R}n.isFunction(P)&&(P=P(m.text,m,S)),A&&(m.text=A(m.text,m,S)),O&&(m.useHtml=!0,n.isFunction(O)&&(m.text=O(m.text,m,S))),n.isNil(m.text)&&(m.text=""),m.text=m.text+"";var W=n.mix({},m,{textStyle:P},{x:m.x||0,y:m.y||0});return W},M._init=function(){if(!this.get("group")){var m=this.get("canvas").addGroup({id:"label-group"});this.set("group",m)}},M.initHtmlContainer=function(){var m=this.get("container");if(m)n.isString(m)&&(m=document.getElementById(m),m&&this.set("container",m));else{var S=this.get("containerTpl"),P=this.get("canvas").get("el").parentNode;m=i.createDom(S),P.style.position="relative",P.appendChild(m),this.set("container",m)}return m},M._createText=function(m){var S=n.deepMix({},m),P=this.get("container"),A=typeof S.capture=="undefined"?this.get("capture"):S.capture,O;if(S.useHtml||S.htmlTemplate){P||(P=this.initHtmlContainer());var R=this._createDom(S);P.appendChild(R),this._setCustomPosition(S,R)}else{var W=this.get("name"),F=S.point,Z=this.get("group");delete S.point;var V=S.rotate;return S.textStyle&&(S.textStyle.rotate&&(V=S.textStyle.rotate,delete S.textStyle.rotate),S=n.mix({x:S.x,y:S.y,textAlign:S.textAlign,text:S.text},S.textStyle)),O=Z.addShape("text",{attrs:S,capture:A}),V&&(Math.abs(V)>Math.PI*2&&(V=V/180*Math.PI),O.transform([["t",-S.x,-S.y],["r",V],["t",S.x,S.y]])),O.setSilent("origin",F||S),O.name=W,this.get("appendInfo")&&O.setSilent("appendInfo",this.get("appendInfo")),O}},M._createDom=function(m){var S=this.get("itemTpl"),P=n.substitute(S,{text:m.text});return i.createDom(P)},M._setCustomPosition=function(m,S){var P=m.textAlign||"left",A=m.y,O=m.x,R=i.getOuterWidth(S),W=i.getOuterHeight(S);A=A-W/2,P==="center"?O=O-R/2:P==="right"&&(O=O-R),S.style.top=parseInt(A,10)+"px",S.style.left=parseInt(O,10)+"px"},_}(a);E.exports=b},function(E,T){var e=function(){function t(){this.bitmap=[]}var l=t.prototype;return l.hasGap=function(c){for(var r=!0,h=this.bitmap,n=Math.floor(c.minX),i=Math.ceil(c.maxX),a=Math.floor(c.minY),o=Math.ceil(c.maxY)-1,u=n;u<i;u++){if(!h[u]){h[u]=[];continue}if(u===n||u===i-1){for(var f=a;f<=o;f++)if(h[u][f]){r=!1;break}}else if(h[u][a]||h[u][o]){r=!1;break}}return r},l.fillGap=function(c){for(var r=this.bitmap,h=Math.floor(c.minX),n=Math.ceil(c.maxX)-1,i=Math.floor(c.minY),a=Math.ceil(c.maxY)-1,o=h;o<=n;o++){for(var u=i;u<a;u+=8)r[o]||(r[o]=[]),r[o][u]=!0;r[o][a]=!0}for(var f=i;f<=a;f++)r[h][f]=!0,r[n][f]=!0},t}();E.exports=e},function(E,T,e){function t(f){return function(){var v=r(f),b;if(c()){var y=r(this).constructor;b=Reflect.construct(v,arguments,y)}else b=v.apply(this,arguments);return l(this,b)}}function l(f,v){return v&&(typeof v=="object"||typeof v=="function")?v:s(f)}function s(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(f){return!1}}function r(f){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)},r(f)}function h(f,v){f.prototype=Object.create(v.prototype),f.prototype.constructor=f,f.__proto__=v}var n=e(3),i=e(36),a=e(19),o=a.FONT_FAMILY,u=function(f){h(y,f);var v=t(y),b=y.prototype;b.getDefaultCfg=function(){return{container:null,title:null,formatter:null,hoverable:!0,titleGap:15,position:[0,0],offset:[0,0],offsetX:null,offsetY:null}};function y(g){var _;return _=f.call(this,g)||this,_._init(),_.beforeRender(),_.render(),_._adjustPositionOffset(),_._bindEvents(),_}return b._init=function(){var _=this.get("group"),M=this.get("container");this.set("canvas",M.get("canvas"));var x=this.get("position");_||(_=M.addGroup({x:0-x[0],y:0-x[1]})),this.set("group",_)},b._adjustPositionOffset=function(){var _=this.get("position"),M=this.get("offset"),x=this.get("offsetX"),m=this.get("offsetY");if(!n.isArray(M)){var S=this.get("layout");M=S==="vertical"?[M,0]:[0,M]}x&&(M[0]=x),m&&(M[1]=m);var P=this.get("group").getBBox();this.move(-P.minX+_[0]+M[0],-P.minY+_[1]+M[1])},b.beforeRender=function(){var _=this.get("group"),M=_.addGroup();this.set("itemsGroup",M)},b.render=function(){this._renderTitle()},b._renderTitle=function(){var _=this.get("title"),M=this.get("titleGap");if(M=M||0,_&&_.text){var x=this.get("group"),m=x.addShape("text",{attrs:n.mix({x:0,y:0-M,fill:"#333",textBaseline:"middle",fontFamily:o},_)});m.name="legend-title",this.get("appendInfo")&&m.setSilent("appendInfo",this.get("appendInfo")),this.set("titleShape",m)}},b.getCheckedCount=function(){var _=this.get("itemsGroup"),M=_.get("children"),x=n.filter(M,function(m){return m.get("checked")});return x.length},b.setItems=function(_){this.set("items",_),this.clear(),this.render()},b.addItem=function(_){var M=this.get("items");M.push(_),this.clear(),this.render()},b.clear=function(){var _=this.get("itemsGroup");_.clear();var M=this.get("group");M.clear(),this.beforeRender()},b.destroy=function(){var _=this.get("group");_&&_.destroy(),this._attrs={},this.removeAllListeners(),f.prototype.destroy.call(this)},b.getWidth=function(){var _=this.get("group").getBBox();return _.width},b.getHeight=function(){var _=this.get("group").getBBox();return _.height},b.move=function(_,M){this.get("group").move(_,M)},b.draw=function(){this.get("canvas").draw()},y}(i);E.exports=u},function(E,T,e){function t(A){return function(){var O=r(A),R;if(c()){var W=r(this).constructor;R=Reflect.construct(O,arguments,W)}else R=O.apply(this,arguments);return l(this,R)}}function l(A,O){return O&&(typeof O=="object"||typeof O=="function")?O:s(A)}function s(A){if(A===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(A){return!1}}function r(A){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(R){return R.__proto__||Object.getPrototypeOf(R)},r(A)}function h(A,O){A.prototype=Object.create(O.prototype),A.prototype.constructor=A,A.__proto__=O}var n=e(3),i=e(114),a=e(19),o=a.FONT_FAMILY,u=n.DomUtil,f=n.Group,v="g2-legend",b="g2-legend-title",y="g2-legend-list",g="g2-legend-list-item",_="g2-legend-text",M="g2-legend-marker";function x(A,O){return A.getElementsByClassName(O)[0]}function m(A,O){var R=A.className;return n.isNil(R)||(R=R.split(" "),R.indexOf(O)>-1)?A:A.parentNode?A.parentNode.className===v?A.parentNode:m(A.parentNode,O):null}function S(A,O){var R=null,W=O instanceof f?O.get("value"):O;return n.each(A,function(F){if(F.value===W)return R=F,!1}),R}var P=function(A){h(R,A);var O=t(R);function R(){return A.apply(this,arguments)||this}var W=R.prototype;return W.getDefaultCfg=function(){var Z=A.prototype.getDefaultCfg.call(this);return n.mix({},Z,{type:"category-legend",container:null,containerTpl:'<div class="'+v+'"><h4 class="'+b+'"></h4><ul class="'+y+'"></ul></div>',itemTpl:'<li class="'+g+' item-{index} {checked}" data-color="{originColor}" data-value="{originValue}"><i class="'+M+'" style="background-color:{color};"></i><span class="'+_+'">{value}</span></li>',legendStyle:{},textStyle:{fill:"#333",fontSize:12,textAlign:"middle",textBaseline:"top",fontFamily:o},abridgeText:!1,tipTpl:'<div class="textTip"></div>',tipStyle:{display:"none",fontSize:"12px",backgroundColor:"#fff",position:"absolute",width:"auto",height:"auto",padding:"3px",boxShadow:"2px 2px 5px #888"},autoPosition:!0})},W._init=function(){},W.beforeRender=function(){},W.render=function(){this._renderHTML()},W._bindEvents=function(){var Z=this,V=this.get("legendWrapper"),k=x(V,y);this.get("hoverable")&&(k.onmousemove=function(Y){return Z._onMousemove(Y)},k.onmouseout=function(Y){return Z._onMouseleave(Y)}),this.get("clickable")&&(k.onclick=function(Y){return Z._onClick(Y)})},W._onMousemove=function(Z){var V=this.get("items"),k=Z.target,Y=k.className;if(Y=Y.split(" "),!(Y.indexOf(v)>-1||Y.indexOf(y)>-1)){var K=m(k,g),it=S(V,K.getAttribute("data-value"));it?(this.deactivate(),this.activate(K.getAttribute("data-value")),this.emit("itemhover",{item:it,currentTarget:K,checked:it.checked})):it||(this.deactivate(),this.emit("itemunhover",Z))}},W._onMouseleave=function(Z){this.deactivate(),this.emit("itemunhover",Z)},W._onClick=function(Z){var V=this,k=this.get("legendWrapper"),Y=x(k,y),K=this.get("unCheckColor"),it=this.get("items"),ct=this.get("selectedMode"),ht=Y.childNodes,ut=Z.target,It=ut.className;if(It=It.split(" "),!(It.indexOf(v)>-1||It.indexOf(y)>-1)){var Nt=m(ut,g),Lt=x(Nt,_),_t=x(Nt,M),mt=S(it,Nt.getAttribute("data-value"));if(!!mt){var At=Nt.className,rt=Nt.getAttribute("data-color");if(ct==="single")mt.checked=!0,n.each(ht,function($){if($!==Nt){var dt=x($,M);dt.style.backgroundColor=K,$.className=$.className.replace("checked","unChecked"),$.style.color=K;var et=S(it,$.getAttribute("data-value"));et.checked=!1}else Lt&&(Lt.style.color=V.get("textStyle").fill),_t&&(_t.style.backgroundColor=rt),Nt.className=At.replace("unChecked","checked")});else{var Mt=At.indexOf("checked")!==-1,z=0;if(n.each(ht,function($){$.className.indexOf("checked")!==-1&&z++}),!this.get("allowAllCanceled")&&Mt&&z===1){this.emit("clicklastitem",{item:mt,currentTarget:Nt,checked:ct==="single"?!0:mt.checked});return}mt.checked=!mt.checked,Mt?(_t&&(_t.style.backgroundColor=K),Nt.className=At.replace("checked","unChecked"),Nt.style.color=K):(_t&&(_t.style.backgroundColor=rt),Nt.className=At.replace("unChecked","checked"),Nt.style.color=this.get("textStyle").fill)}this.emit("itemclick",{item:mt,currentTarget:Nt,checked:ct==="single"?!0:mt.checked})}}},W.activate=function(Z){var V=this,k=this,Y=k.get("items"),K=S(Y,Z),it=k.get("legendWrapper"),ct=x(it,y),ht=ct.childNodes;ht.forEach(function(ut){var It=x(ut,M),Nt=S(Y,ut.getAttribute("data-value"));if(V.get("highlight")){if(Nt===K&&Nt.checked){It.style.border="1px solid #333";return}}else Nt===K?It.style.opacity=k.get("activeOpacity"):Nt.checked&&(It.style.opacity=k.get("inactiveOpacity"))})},W.deactivate=function(){var Z=this,V=this,k=V.get("legendWrapper"),Y=x(k,y),K=Y.childNodes;K.forEach(function(it){var ct=x(it,M);Z.get("highlight")?ct.style.border="1px solid #fff":ct.style.opacity=V.get("inactiveOpacity")})},W._renderHTML=function(){var Z=this,V=this.get("container"),k=this.get("title"),Y=this.get("containerTpl"),K=u.createDom(Y),it=x(K,b),ct=x(K,y),ht=this.get("unCheckColor"),ut=n.deepMix({},{CONTAINER_CLASS:{height:"auto",width:"auto",position:"absolute",overflowY:"auto",fontSize:"12px",fontFamily:o,lineHeight:"20px",color:"#8C8C8C"},TITLE_CLASS:{marginBottom:this.get("titleGap")+"px",fontSize:"12px",color:"#333",textBaseline:"middle",fontFamily:o},LIST_CLASS:{listStyleType:"none",margin:0,padding:0,textAlign:"center"},LIST_ITEM_CLASS:{cursor:"pointer",marginBottom:"5px",marginRight:"24px"},MARKER_CLASS:{width:"9px",height:"9px",borderRadius:"50%",display:"inline-block",marginRight:"4px",verticalAlign:"middle"}},this.get("legendStyle"));if(/^\#/.test(V)||typeof V=="string"&&V.constructor===String){var It=V.replace("#","");V=document.getElementById(It),V.appendChild(K)}else{var Nt=this.get("position"),Lt={};Nt==="left"||Nt==="right"?Lt={maxHeight:(this.get("maxLength")||V.offsetHeight)+"px"}:Lt={maxWidth:(this.get("maxLength")||V.offsetWidth)+"px"},u.modifyCSS(K,n.mix({},ut.CONTAINER_CLASS,Lt,this.get(v))),V.appendChild(K)}u.modifyCSS(ct,n.mix({},ut.LIST_CLASS,this.get(y))),it&&(k&&k.text?(it.innerHTML=k.text,u.modifyCSS(it,n.mix({},ut.TITLE_CLASS,this.get(b),k))):K.removeChild(it));var _t=this.get("items"),mt=this.get("itemTpl"),At=this.get("position"),rt=this.get("layout"),Mt=At==="right"||At==="left"||rt==="vertical"?"block":"inline-block",z=n.mix({},ut.LIST_ITEM_CLASS,{display:Mt},this.get(g)),$=n.mix({},ut.MARKER_CLASS,this.get(M));if(n.each(_t,function(pt,H){var nt=pt.checked,at=Z._formatItemValue(pt.value),q=pt.marker.fill||pt.marker.stroke,Et=nt?q:ht,vt;n.isFunction(mt)?vt=mt(at,Et,nt,H):vt=mt;var Ft=n.substitute(vt,n.mix({},pt,{index:H,checked:nt?"checked":"unChecked",value:at,color:Et,originColor:q,originValue:pt.value.replace(/\"/g,"&quot;")})),Qt=u.createDom(Ft);Qt.style.color=Z.get("textStyle").fill;var ee=x(Qt,M),Gt=x(Qt,_);if(u.modifyCSS(Qt,z),ee&&u.modifyCSS(ee,$),nt||(Qt.style.color=ht,ee&&(ee.style.backgroundColor=ht)),ct.appendChild(Qt),Z.get("abridgeText")){var $t=at,Pe=Qt.offsetWidth,me=Z.get("textStyle").fontSize;isNaN(me)&&(me.indexOf("pt")!==-1?me=parseFloat(me.substr(0,me.length-2))*1/72*96:me.indexOf("px")!==-1&&(me=parseFloat(me.substr(0,me.length-2))));var le=me*$t.length,be=Math.floor(Pe/me);Pe<2*me?$t="":Pe<le&&be>1&&($t=$t.substr(0,be-1)+"..."),Gt.innerText=$t,Qt.addEventListener("mouseover",function(){var ze=x(K.parentNode,"textTip");ze.style.display="block",ze.style.left=Qt.offsetLeft+Qt.offsetWidth+"px",ze.style.top=Qt.offsetTop+15+"px",ze.innerText=at}),Qt.addEventListener("mouseout",function(){var ze=x(K.parentNode,"textTip");ze.style.display="none"})}}),this.get("abridgeText")){var dt=this.get("tipTpl"),et=u.createDom(dt),ot=this.get("tipStyle");u.modifyCSS(et,ot),K.parentNode.appendChild(et),et.addEventListener("mouseover",function(){et.style.display="none"})}this.set("legendWrapper",K)},W._adjustPositionOffset=function(){var Z=this.get("autoPosition");if(Z!==!1){var V=this.get("position"),k=this.get("offset"),Y=this.get("offsetX"),K=this.get("offsetY");Y&&(k[0]=Y),K&&(k[1]=K);var it=this.get("legendWrapper");it.style.left=V[0]+"px",it.style.top=V[1]+"px",it.style.marginLeft=k[0]+"px",it.style.marginTop=k[1]+"px"}},W.getWidth=function(){return u.getOuterWidth(this.get("legendWrapper"))},W.getHeight=function(){return u.getOuterHeight(this.get("legendWrapper"))},W.move=function(Z,V){/^\#/.test(this.get("container"))?A.prototype.move.call(this,Z,V):(u.modifyCSS(this.get("legendWrapper"),{left:Z+"px",top:V+"px"}),this.set("x",Z),this.set("y",V))},W.destroy=function(){var Z=this.get("legendWrapper");Z&&Z.parentNode&&Z.parentNode.removeChild(Z),A.prototype.destroy.call(this)},R}(i);E.exports=P},function(E,T,e){function t(g){return function(){var _=r(g),M;if(c()){var x=r(this).constructor;M=Reflect.construct(_,arguments,x)}else M=_.apply(this,arguments);return l(this,M)}}function l(g,_){return _&&(typeof _=="object"||typeof _=="function")?_:s(g)}function s(g){if(g===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(g){return!1}}function r(g){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(M){return M.__proto__||Object.getPrototypeOf(M)},r(g)}function h(g,_){g.prototype=Object.create(_.prototype),g.prototype.constructor=g,g.__proto__=_}var n=e(3),i=e(112),a=e(19),o=a.FONT_FAMILY,u=n.Event,f=n.Group;function v(g,_){var M=null,x=_ instanceof f||_.name==="legendGroup"?_.get("value"):_;return n.each(g,function(m){if(m.value===x)return M=m,!1}),M}function b(g,_){return g.findBy(function(M){return M.name===_})}var y=function(g){h(M,g);var _=t(M);function M(){return g.apply(this,arguments)||this}var x=M.prototype;return x.getDefaultCfg=function(){var S=g.prototype.getDefaultCfg.call(this);return n.mix({},S,{type:"category-legend",items:null,itemGap:5,itemMarginBottom:8,itemsGroup:null,layout:"horizontal",allowAllCanceled:!1,backPadding:[0,0,0,0],unCheckColor:"#ccc",background:{fill:"#fff",fillOpacity:0},itemWidth:null,textStyle:{fill:"#333",fontSize:12,textAlign:"start",textBaseline:"middle",fontFamily:o},_wordSpaceing:8,clickable:!0,selectedMode:"multiple",reversed:!1,autoWrap:!0,highlight:!1,activeOpacity:.7,inactiveOpacity:1})},x.render=function(){g.prototype.render.call(this),this._renderItems(),this.get("autoWrap")&&this._adjustItems()},x._bindEvents=function(){this.get("hoverable")&&(this.get("group").on("mousemove",n.wrapBehavior(this,"_onMousemove")),this.get("group").on("mouseleave",n.wrapBehavior(this,"_onMouseleave"))),this.get("clickable")&&this.get("group").on("click",n.wrapBehavior(this,"_onClick"))},x._getLegendItem=function(S){var P=S.get("parent");return P&&P.name==="legendGroup"?P:null},x.activate=function(S){var P=this,A=this,O=A.get("itemsGroup"),R=O.get("children"),W=void 0;R.forEach(function(F){if(W=b(F,"legend-marker"),!!W){var Z=F.get("checked");P.get("highlight")?F.get("value")===S&&Z?W.attr("stroke","#333"):W.attr("stroke",null):F.get("value")===S&&W.attr("fillOpacity",A.get("activeOpacity"))}}),this.get("canvas").draw()},x.deactivate=function(){var S=this,P=this,A=P.get("itemsGroup"),O=A.get("children"),R=void 0,W=this.get("unCheckColor");O.forEach(function(F){if(R=b(F,"legend-marker"),!!R)if(S.get("highlight")){var Z=R.get("oriStroke"),V=F.get("checked");Z&&!V?Z=W:Z="",R.attr("stroke",Z)}else R.attr("fillOpacity",P.get("inactiveOpacity"))}),this.get("canvas").draw()},x._onMousemove=function(S){var P=this._getLegendItem(S.currentTarget);if(P&&P.get("checked")){var A=this.get("items"),O=new u("itemhover",S,!0,!0);O.item=v(A,P),O.checked=P.get("checked"),O.currentTarget=S.currentTarget,this.deactivate(),this.activate(P.get("value")),this.emit("itemhover",O)}else this.deactivate(),this.emit("itemunhover",S);this.get("canvas").draw()},x._onMouseleave=function(S){this.deactivate(),this.get("canvas").draw(),this.emit("itemunhover",S)},x._onClick=function(S){var P=this._getLegendItem(S.currentTarget),A=this.get("items");if(P&&!P.get("destroyed")){var O=P.get("checked"),R=this.get("selectedMode"),W=v(A,P),F=new u("itemclick",S,!0,!0);if(F.item=W,F.currentTarget=P,F.appendInfo=S.currentTarget.get("appendInfo"),F.checked=R==="single"?!0:!O,!this.get("allowAllCanceled")&&O&&this.getCheckedCount()===1){this.emit("clicklastitem",F);return}var Z=this.get("unCheckColor"),V=this.get("textStyle").fill,k=void 0,Y=void 0,K=void 0;if(R==="single"){var it=this.get("itemsGroup"),ct=it.get("children");n.each(ct,function(ht){k=b(ht,"legend-marker"),Y=b(ht,"legend-text"),K=b(ht,"legend-item"),ht!==P?(k.attr("fill")&&k.attr("fill",Z),k.attr("stroke")&&k.attr("stroke",Z),Y.attr("fill",Z),k.setSilent("checked",!1),Y.setSilent("checked",!1),K.setSilent("checked",!1),ht.setSilent("checked",!1)):(k.attr("fill")&&W&&W.marker&&k.attr("fill",W.marker.fill),k.attr("stroke")&&W&&W.marker&&k.attr("stroke",W.marker.stroke),Y.attr("fill",V),k.setSilent("checked",!0),Y.setSilent("checked",!0),K.setSilent("checked",!0),ht.setSilent("checked",!0))})}else k=b(P,"legend-marker"),Y=b(P,"legend-text"),K=b(P,"legend-item"),k.attr("fill")&&W&&W.marker&&k.attr("fill",O?Z:W.marker.fill),k.attr("stroke")&&W&&W.marker&&k.attr("stroke",O?Z:W.marker.stroke),Y.attr("fill",O?Z:V),P.setSilent("checked",!O),k.setSilent("checked",!O),Y.setSilent("checked",!O),K.setSilent("checked",!O);this.emit("itemclick",F)}this.get("canvas").draw()},x._renderItems=function(){var S=this,P=this.get("items");if(this.get("reversed")&&P.reverse(),n.each(P,function(W,F){S._addItem(W,F)}),this.get("highlight")){var A=this.get("itemsGroup"),O=A.get("children"),R=void 0;O.forEach(function(W){R=b(W,"legend-marker");var F=R.get("oriStroke");F||(R.attr("stroke")?R.set("oriStroke",R.attr("stroke")):R.set("oriStroke",""))})}},x._formatItemValue=function(S){var P=this.get("formatter")||this.get("itemFormatter");return P&&(S=P.call(this,S)),S},x._getNextX=function(){var S=this.get("layout"),P=this.get("itemGap"),A=this.get("itemsGroup"),O=this.get("itemWidth"),R=A.get("children"),W=0;return S==="horizontal"&&n.each(R,function(F){W+=(O||F.getBBox().width)+P}),W},x._getNextY=function(){var S=this.get("itemMarginBottom"),P=this.get("titleShape")?this.get("titleGap"):0,A=this.get("layout"),O=this.get("itemsGroup"),R=this.get("titleShape"),W=O.get("children"),F=P;return R&&(F+=R.getBBox().height),A==="vertical"&&n.each(W,function(Z){F+=Z.getBBox().height+S}),F},x._addItem=function(S){var P=this.get("itemsGroup"),A=this._getNextX(),O=this._getNextY(),R=this.get("unCheckColor"),W=P.addGroup({x:A,y:O,value:S.value,checked:S.checked});W.set("viewId",this.get("viewId"));var F=this.get("textStyle"),Z=this.get("_wordSpaceing"),V=0;if(S.marker){var k=n.mix({},S.marker,{x:S.marker.radius+A,y:O});S.checked||(k.fill&&(k.fill=R),k.stroke&&(k.stroke=R));var Y=W.addShape("marker",{type:"marker",attrs:k});Y.attr("cursor","pointer"),Y.name="legend-marker",V+=Y.getBBox().width+Z}var K=n.mix({},{fill:"#333",fontSize:12,textAlign:"start",textBaseline:"middle",fontFamily:o},F,{x:V+A,y:O,text:this._formatItemValue(S.value)});S.checked||n.mix(K,{fill:R});var it=W.addShape("text",{attrs:K});it.attr("cursor","pointer"),it.name="legend-text",this.get("appendInfo")&&it.setSilent("appendInfo",this.get("appendInfo"));var ct=W.getBBox(),ht=this.get("itemWidth"),ut=W.addShape("rect",{attrs:{x:A,y:O-ct.height/2,fill:"#fff",fillOpacity:0,width:ht||ct.width,height:ct.height}});return ut.attr("cursor","pointer"),ut.setSilent("origin",S),ut.name="legend-item",this.get("appendInfo")&&ut.setSilent("appendInfo",this.get("appendInfo")),W.name="legendGroup",W},x._adjustHorizontal=function(){var S=this.get("itemsGroup"),P=S.get("children"),A=this.get("maxLength"),O=this.get("itemGap"),R=this.get("itemMarginBottom"),W=this.get("titleShape")?this.get("titleGap"):0,F=0,Z=0,V=void 0,k=void 0,Y=void 0,K=this.get("itemWidth");S.getBBox().width>A&&n.each(P,function(it){Y=it.getBBox(),V=K||Y.width,k=Y.height+R,A-Z<V&&(F++,Z=0),it.move(Z,F*k+W),Z+=V+O})},x._adjustVertical=function(){var S=this.get("itemsGroup"),P=this.get("titleShape"),A=S.get("children"),O=this.get("maxLength"),R=this.get("itemGap"),W=this.get("itemMarginBottom"),F=this.get("titleGap"),Z=P?P.getBBox().height+F:0,V=this.get("itemWidth"),k=Z,Y=void 0,K=void 0,it=void 0,ct=0,ht=0;S.getBBox().height>O&&n.each(A,function(ut){it=ut.getBBox(),Y=it.width,K=it.height,V?ct=V+R:Y>ct&&(ct=Y+R),O-k<K?(k=Z,ht+=ct,ut.move(ht,Z)):ut.move(ht,k),k+=K+W})},x._adjustItems=function(){var S=this.get("layout");S==="horizontal"?this._adjustHorizontal():this._adjustVertical()},x.getWidth=function(){return g.prototype.getWidth.call(this)},x.getHeight=function(){return g.prototype.getHeight.call(this)},x.move=function(S,P){g.prototype.move.call(this,S,P)},M}(i);E.exports=y},function(E,T,e){function t(M){return function(){var x=r(M),m;if(c()){var S=r(this).constructor;m=Reflect.construct(x,arguments,S)}else m=x.apply(this,arguments);return l(this,m)}}function l(M,x){return x&&(typeof x=="object"||typeof x=="function")?x:s(M)}function s(M){if(M===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(M){return!1}}function r(M){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(m){return m.__proto__||Object.getPrototypeOf(m)},r(M)}function h(M,x){M.prototype=Object.create(x.prototype),M.prototype.constructor=M,M.__proto__=x}var n=e(31),i=e(116),a=e(117),o=e(118),u=e(68),f=e(3),v=e(19),b=v.FONT_FAMILY,y=f.DomUtil,g=f.MatrixUtil,_=function(M){h(S,M);var x=t(S),m=S.prototype;m.getDefaultCfg=function(){var A=M.prototype.getDefaultCfg.call(this);return f.mix({},A,{boardStyle:{x:0,y:0,width:100,height:100,fill:"rgba(255, 255, 255, 0.9)",radius:4,stroke:"#e2e2e2",lineWidth:1},titleStyle:{fontFamily:b,text:"",textBaseline:"top",fontSize:12,fill:"rgb(87, 87, 87)",lineHeight:20,padding:20},markerStyle:{radius:4},nameStyle:{fontFamily:b,fontSize:12,fill:"rgb(87, 87, 87)",textBaseline:"middle",textAlign:"start",padding:8},valueStyle:{fontFamily:b,fontSize:12,fill:"rgb(87, 87, 87)",textBaseline:"middle",textAlign:"start",padding:30},padding:{top:20,right:20,bottom:20,left:20},itemGap:10,animationDuration:200})};function S(P){var A;A=M.call(this,P)||this,f.assign(s(A),o),f.assign(s(A),a);var O=A.get("crosshairs");if(O){var R=O.type==="rect"?A.get("backPlot"):A.get("frontPlot"),W=new i(f.mix({plot:R,plotRange:A.get("plotRange"),canvas:A.get("canvas")},A.get("crosshairs")));W.hide(),A.set("crosshairGroup",W)}return A._init_(),A.get("items")&&A.render(),A}return m._init_=function(){var A=this,O=A.get("padding"),R=A.get("frontPlot"),W=R.addGroup({capture:!1});A.set("markerGroup",W);var F=R.addGroup();F.hide(),A.set("container",F);var Z=F.addShape("rect",{attrs:f.mix({},A.get("boardStyle"))});A.set("board",Z);var V=A.get("titleStyle");if(A.get("showTitle")){var k=F.addShape("text",{attrs:f.mix({x:O.left,y:O.top},V)});A.set("titleShape",k),k.name="tooltip-title"}var Y=F.addGroup();Y.move(O.left,O.top+V.lineHeight+V.padding),A.set("itemsGroup",Y)},m.render=function(){var A=this;A.clear();var O=A.get("container"),R=A.get("board"),W=A.get("showTitle"),F=A.get("titleContent"),Z=this.get("titleShape"),V=this.get("itemsGroup"),k=A.get("items"),Y=A.get("padding");if(Z&&W&&Z.attr("text",F),V){var K=A.get("itemGap"),it=0,ct=0;f.each(k,function(Nt){var Lt=A._addItem(Nt);Lt.move(it,ct),V.add(Lt);var _t=Lt.getBBox().height;ct+=_t+K})}var ht=O.getBBox(),ut=ht.width+Y.right,It=ht.height+Y.bottom;R.attr("width",ut),R.attr("height",It),A._alignToRight(ut)},m.clear=function(){var A=this.get("titleShape"),O=this.get("itemsGroup"),R=this.get("board");A.text="",O.clear(),R.attr("width",0),R.attr("height",0)},m.show=function(){var A=this.get("container");A.show();var O=this.get("crosshairGroup");O&&O.show();var R=this.get("markerGroup");R&&R.show(),M.prototype.show.call(this),this.get("canvas").draw()},m.hide=function(){var A=this.get("container");A.hide();var O=this.get("crosshairGroup");O&&O.hide();var R=this.get("markerGroup");R&&R.hide(),M.prototype.hide.call(this),this.get("canvas").draw()},m.destroy=function(){var A=this.get("container"),O=this.get("crosshairGroup");O&&O.destroy();var R=this.get("markerGroup");R&&R.remove(),M.prototype.destroy.call(this),A.remove()},m.setPosition=function(A,O,R){var W=this.get("container"),F=this.get("canvas").get("el"),Z=y.getWidth(F),V=y.getHeight(F),k=W.getBBox(),Y=k.width,K=k.height,it=A,ct=O,ht;if(this.get("position")){var ut=k.width,It=k.height;ht=this._calcTooltipPosition(A,O,this.get("position"),ut,It,R),A=ht[0],O=ht[1]}else ht=this._constraintPositionInBoundary(A,O,Y,K,Z,V),A=ht[0],O=ht[1];if(this.get("inPlot")){var Nt=this.get("plotRange");ht=this._constraintPositionInPlot(A,O,Y,K,Nt,this.get("enterable")),A=ht[0],O=ht[1]}var Lt=this.get("markerItems");f.isEmpty(Lt)||(it=Lt[0].x,ct=Lt[0].y);var _t=[1,0,0,0,1,0,0,0,1],mt=g.transform(_t,[["t",A,O]]);W.stopAnimate(),W.animate({matrix:mt},this.get("animationDuration"));var At=this.get("crosshairGroup");if(At){var rt=this.get("items");At.setPosition(it,ct,rt)}M.prototype.setPosition.call(this,A,O)},m._addItem=function(A){var O=new n.Group,R=this.get("markerStyle").radius;if(A.marker){var W=f.mix({},A.marker,{x:A.marker.radius/2,y:0,symbol:A.marker.activeSymbol||A.marker.symbol});O.addShape("marker",{attrs:W}),R=A.marker.radius}var F=this.get("nameStyle");O.addShape("text",{attrs:f.mix({x:R+F.padding,y:0,text:A.name},F)});var Z=this.get("valueStyle");return O.addShape("text",{attrs:f.mix({x:O.getBBox().width+Z.padding,y:0,text:A.value},Z)}),O},m._alignToRight=function(A){var O=this,R=this.get("itemsGroup"),W=R.get("children");f.each(W,function(F){var Z=F.get("children"),V=Z[2],k=V.getBBox().width,Y=A-k-O.get("padding").right*2;V.attr("x",Y)})},S}(u);E.exports=_},function(E,T,e){function t(o){return function(){var u=r(o),f;if(c()){var v=r(this).constructor;f=Reflect.construct(u,arguments,v)}else f=u.apply(this,arguments);return l(this,f)}}function l(o,u){return u&&(typeof u=="object"||typeof u=="function")?u:s(o)}function s(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}function r(o){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)},r(o)}function h(o,u){o.prototype=Object.create(u.prototype),o.prototype.constructor=o,o.__proto__=u}var n=e(36),i=e(3),a=function(o){h(v,o);var u=t(v),f=v.prototype;f.getDefaultCfg=function(){var y=o.prototype.getDefaultCfg.call(this);return i.mix({},y,{type:null,plot:null,plotRange:null,rectStyle:{fill:"#CCD6EC",opacity:.3},lineStyle:{stroke:"rgba(0, 0, 0, 0.25)",lineWidth:1},isTransposed:!1})};function v(b){var y;return y=o.call(this,b)||this,y._init_(),y.render(),y}return f._init_=function(){var y=this,g=y.get("plot"),_;y.type==="rect"?_=g.addGroup({zIndex:0}):_=g.addGroup(),this.set("container",_)},f._addLineShape=function(y,g){var _=this.get("container"),M=_.addShape("line",{capture:!1,attrs:y});return this.set("crossLineShape"+g,M),M},f._renderHorizontalLine=function(y,g){var _=i.mix(this.get("lineStyle"),this.get("style")),M=i.mix({x1:g?g.bl.x:y.get("width"),y1:0,x2:g?g.br.x:0,y2:0},_);this._addLineShape(M,"X")},f._renderVerticalLine=function(y,g){var _=i.mix(this.get("lineStyle"),this.get("style")),M=i.mix({x1:0,y1:g?g.bl.y:y.get("height"),x2:0,y2:g?g.tl.y:0},_);this._addLineShape(M,"Y")},f._renderBackground=function(y,g){var _=i.mix(this.get("rectStyle"),this.get("style")),M=this.get("container"),x=i.mix({x:g?g.tl.x:0,y:g?g.tl.y:y.get("height"),width:g?g.br.x-g.bl.x:y.get("width"),height:g?Math.abs(g.tl.y-g.bl.y):y.get("height")},_),m=M.addShape("rect",{attrs:x,capture:!1});return this.set("crosshairsRectShape",m),m},f._updateRectShape=function(y){var g,_=this.get("crosshairsRectShape"),M=this.get("isTransposed"),x=y[0],m=y[y.length-1],S=M?"y":"x",P=M?"height":"width",A=x[S];if(y.length>1&&x[S]>m[S]&&(A=m[S]),this.get("width"))_.attr(S,A-this.get("crosshairs").width/2),_.attr(P,this.get("width"));else if(i.isArray(x.point[S])&&!x.size){var O=x.point[S][1]-x.point[S][0];_.attr(S,x.point[S][0]),_.attr(P,O)}else g=3*x.size/4,_.attr(S,A-g),y.length===1?_.attr(P,3*x.size/2):_.attr(P,Math.abs(m[S]-x[S])+2*g)},f.render=function(){var y=this.get("canvas"),g=this.get("plotRange"),_=this.get("isTransposed");switch(this.clear(),this.get("type")){case"x":this._renderHorizontalLine(y,g);break;case"y":this._renderVerticalLine(y,g);break;case"cross":this._renderHorizontalLine(y,g),this._renderVerticalLine(y,g);break;case"rect":this._renderBackground(y,g);break;default:_?this._renderHorizontalLine(y,g):this._renderVerticalLine(y,g)}},f.show=function(){var y=this.get("container");o.prototype.show.call(this),y.show()},f.hide=function(){var y=this.get("container");o.prototype.hide.call(this),y.hide()},f.clear=function(){var y=this.get("container");this.set("crossLineShapeX",null),this.set("crossLineShapeY",null),this.set("crosshairsRectShape",null),o.prototype.clear.call(this),y.clear()},f.destroy=function(){var y=this.get("container");o.prototype.destroy.call(this),y.remove()},f.setPosition=function(y,g,_){var M=this.get("crossLineShapeX"),x=this.get("crossLineShapeY"),m=this.get("crosshairsRectShape");x&&!x.get("destroyed")&&x.move(y,0),M&&!M.get("destroyed")&&M.move(0,g),m&&!m.get("destroyed")&&this._updateRectShape(_)},v}(n);E.exports=a},function(E,T,e){var t=e(3),l={setMarkers:function(c,r){var h=this,n=h.get("markerGroup"),i=h.get("frontPlot");n?n.clear():(n=i.addGroup({zIndex:1,capture:!1}),h.set("markerGroup",n)),t.each(c,function(a){var o=t.mix({fill:a.color,symbol:"circle",shadowColor:a.color},r,{x:a.x,y:a.y});a.marker&&a.marker.activeSymbol&&(o.symbol=a.marker.activeSymbol),n.addShape("marker",{color:a.color,attrs:o})}),this.set("markerItems",c)},clearMarkers:function(){var c=this.get("markerGroup");c&&c.clear()}};E.exports=l},function(E,T){var e=20,t={_calcTooltipPosition:function(s,c,r,h,n,i){var a=0,o=0,u=20;if(i){var f=i.getBBox();a=f.width,o=f.height,s=f.x,c=f.y,u=5}switch(r){case"inside":s=s+a/2-h/2,c=c+o/2-n/2;break;case"top":s=s+a/2-h/2,c=c-n-u;break;case"left":s=s-h-u,c=c+o/2-n/2;break;case"right":s=s+a+u,c=c+o/2-n/2;break;case"bottom":default:s=s+a/2-h/2,c=c+o+u;break}return[s,c]},_constraintPositionInBoundary:function(s,c,r,h,n,i){return s+r+e>n?(s-=r+e,s=s<0?0:s):s+e<0?s=e:s+=e,c+h+e>i?(c-=h+e,c=c<0?0:c):c+e<0?c=e:c+=e,[s,c]},_constraintPositionInPlot:function(s,c,r,h,n,i){return s+r>n.tr.x&&(i?s-=r+1:s-=r+2*e),s<n.tl.x&&(s=n.tl.x),i||(c+h>n.bl.y&&(c-=h+2*e),c<n.tl.y&&(c=n.tl.y)),[s,c]}};E.exports=t},function(E,T,e){var t=e(0),l=e(270),s={appear:{duration:450,easing:"easeQuadOut"},update:{duration:450,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut",delay:100},leave:{duration:350,easing:"easeQuadIn"}},c={line:{appear:function(){return l.appear.clipIn},enter:function(){return l.enter.clipIn},leave:function(){return l.leave.lineWidthOut}},path:{appear:function(){return l.appear.clipIn},enter:function(){return l.enter.clipIn},leave:function(){return l.leave.lineWidthOut}},area:{appear:function(){return l.appear.clipIn},enter:function(){return l.enter.fadeIn},leave:function(){return l.leave.fadeOut},cfg:{appear:{duration:500,easing:"easeQuadOut"},update:{duration:450,easing:"easeQuadInOut"},enter:{duration:600,delay:150,easing:"easeQuadInOut"},leave:{easing:"easeQuadOut",duration:350}}},polygon:{appear:function(){return l.appear.zoomIn},enter:function(){return l.enter.zoomIn},leave:function(){return l.leave.zoomOut}},edge:{appear:function(){return l.appear.pathIn},enter:function(){return l.enter.pathIn},leave:function(){return l.leave.pathOut}},interval:{appear:function(h){var n;return h.isPolar?(n=l.appear.zoomIn,(h.isTransposed||h.type==="theta")&&(n=l.appear.fanIn)):h.isRect?n=h.isTransposed?l.appear.scaleInX:l.appear.scaleInY:n=l.appear.zoomIn,n},enter:function(h){return h.isRect||h.isTransposed||h.type==="theta"?l.enter.fadeIn:l.enter.zoomIn},leave:function(){return l.leave.fadeOut},update:function(h){if(h.type==="theta")return l.update.fanIn}},point:{appear:function(){return l.appear.zoomIn},enter:function(){return l.enter.zoomIn},leave:function(){return l.leave.zoomOut}},schema:{appear:function(){return l.appear.clipIn},enter:function(){return l.enter.clipIn},leave:function(){return l.leave.lineWidthOut}},contour:null,heatmap:null,label:{appear:function(){return l.appear.fadeIn},enter:function(){return l.enter.fadeIn},leave:function(){return l.leave.fadeOut},cfg:{appear:{duration:900}}},"axis-label":{enter:function(){return l.appear.fadeIn},leave:function(){return l.leave.fadeOut},update:function(h){if(h.isPolar)return l.appear.fadeIn}},"axis-ticks":{enter:function(){return l.appear.fadeIn},leave:function(){return l.leave.fadeOut},update:function(h){if(h.isPolar)return l.appear.fadeIn}},"axis-grid":{enter:function(){return l.appear.fadeIn},leave:function(){return l.leave.fadeOut},update:function(h){if(h.isPolar)return l.appear.fadeIn}},"axis-grid-rect":{enter:function(){return l.appear.fadeIn},leave:function(){return l.leave.fadeOut},update:function(){return l.leave.fadeIn}},labelLine:{appear:function(){return l.appear.pathIn},enter:function(){return l.enter.pathIn},leave:function(){return l.leave.pathOut}}};c.Action=l,c.defaultCfg=s,c.getAnimation=function(r,h,n){var i=this[r];if(i){var a=i[n];if(t.isFunction(a))return a(h)}return!1},c.getAnimateCfg=function(r,h){var n=s[h];return this[r]&&this[r].cfg&&this[r].cfg[h]?t.deepMix({},n,this[r].cfg[h]):n},c.registerAnimation=function(r,h,n){this.Action[r]||(this.Action[r]={}),this.Action[r][h]=n},E.exports=c},function(E,T,e){function t(r,h){r.prototype=Object.create(h.prototype),r.prototype.constructor=r,r.__proto__=h}var l=e(105),s=e(0),c=function(r){t(n,r);var h=n.prototype;h.getDefaultCfg=function(){return{}};function n(i){var a;a=r.call(this)||this;var o={visible:!0},u=a.getDefaultCfg();return a._attrs=o,s.assign(o,u,i),a}return h.get=function(a){return this._attrs[a]},h.set=function(a,o){this._attrs[a]=o},h.show=function(){var a=this.get("visible");a||(this.set("visible",!0),this.changeVisible(!0))},h.hide=function(){var a=this.get("visible");a&&(this.set("visible",!1),this.changeVisible(!1))},h.changeVisible=function(){},h.destroy=function(){this._attrs={},this.removeAllListeners(),this.destroyed=!0},n}(l);E.exports=c},function(E,T,e){E.exports={Scale:e(277),Coord:e(273),Axis:e(272),Guide:e(275),Legend:e(276),Tooltip:e(278),Event:e(274)}},function(E,T,e){var t=e(16),l=e(0),s=e(123);function c(h,n,i){i===void 0&&(i=1);var a=[h.x,h.y,i];return l.vec3.transformMat3(a,a,n),{x:a[0],y:a[1]}}function r(h){var n=h.getBBox(),i={x:n.minX,y:n.minY},a={x:n.maxX,y:n.maxY},o=h.attr("matrix");return i=c(i,o),a=c(a,o),{minX:i.x,minY:i.y,maxX:a.x,maxY:a.y}}E.exports=function(n,i){var a=i;return l.each(n.get("children"),function(o){o instanceof t.Group&&l.each(o.get("children"),function(u){if(u instanceof t.Group&&u.get("children").length||u instanceof t.Path)a=s(a,u.getBBox());else if(u instanceof t.Text){var f=r(u);a=s(a,f)}})}),a}},function(E,T){E.exports=function(t,l){return{minX:Math.min(t.minX,l.minX),minY:Math.min(t.minY,l.minY),maxX:Math.max(t.maxX,l.maxX),maxY:Math.max(t.maxY,l.maxY)}}},function(E,T){E.exports=function(t){return{minX:t.tl.x,minY:t.tl.y,maxX:t.br.x,maxY:t.br.y}}},function(E,T,e){function t(c,r){c.prototype=Object.create(r.prototype),c.prototype.constructor=c,c.__proto__=r}var l=e(46),s=function(c){t(r,c);function r(){return c.apply(this,arguments)||this}var h=r.prototype;return h.getDefaultCfg=function(){var i=c.prototype.getDefaultCfg.call(this);return i.type="list",i.cols=null,i},h.generateFacets=function(i){var a=this,o=a.fields,u=o[0];if(!u)throw"Please specify for the field for facet!";var f=a.getFieldValues(u,i),v=f.length,b=a.cols||v,y=parseInt((v+b-1)/b),g=[];return f.forEach(function(_,M){var x=parseInt(M/b),m=M%b,S=[{field:u,value:_,values:f}],P=a.getFilter(S),A=i.filter(P),O={type:a.type,count:v,colValue:_,colField:u,rowField:null,rowValue:_,colIndex:m,rowIndex:x,cols:b,rows:y,data:A,region:a.getRegion(y,b,m,x)};g.push(O)}),g},h.setXAxis=function(i,a,o){o.rowIndex!==o.rows-1&&o.cols*o.rowIndex+o.colIndex+1+o.cols<=o.count&&(a[i].label=null,a[i].title=null)},h.setYAxis=function(i,a,o){o.colIndex!==0&&(a[i].title=null,a[i].label=null)},r}(l);E.exports=s},function(E,T,e){function t(c,r){c.prototype=Object.create(r.prototype),c.prototype.constructor=c,c.__proto__=r}var l=e(46),s=function(c){t(r,c);function r(){return c.apply(this,arguments)||this}var h=r.prototype;return h.getDefaultCfg=function(){var i=c.prototype.getDefaultCfg.call(this);return i.type="rect",i},h.generateFacets=function(i){var a=this,o=a.fields,u=[],f=1,v=1,b=o[0],y=o[1],g=[""],_=[""];return b&&(g=a.getFieldValues(b,i),v=g.length),y&&(_=a.getFieldValues(y,i),f=_.length),g.forEach(function(M,x){_.forEach(function(m,S){var P=[{field:b,value:M,values:g},{field:y,value:m,values:_}],A=a.getFilter(P),O=i.filter(A),R={type:a.type,colValue:M,rowValue:m,colField:b,rowField:y,colIndex:x,rowIndex:S,cols:v,rows:f,data:O,region:a.getRegion(f,v,x,S)};u.push(R)})}),u},h.setXAxis=function(i,a,o){o.rowIndex!==o.rows-1?(a[i].title=null,a[i].label=null):o.colIndex!==parseInt((o.cols-1)/2)&&(a[i].title=null)},h.setYAxis=function(i,a,o){o.colIndex!==0?(a[i].title=null,a[i].label=null):o.rowIndex!==parseInt((o.rows-1)/2)&&(a[i].title=null)},h.renderTitle=function(i,a){a.rowIndex===0&&this.drawColTitle(i,a),a.colIndex===a.cols-1&&this.drawRowTitle(i,a)},r}(l);E.exports=s},function(E,T,e){var t=e(69),l=e(25),s=e(0),c=function r(h){r.superclass.constructor.call(this,h)};s.extend(c,t),s.augment(c,{getPointRauis:function(h,n){return l.getPointRadius(h,n)},getCirclePoint:function(h,n,i){var a=this,o=a.get("coord"),u=o.getCenter(),f=a._isEmitLabels(),v=a.getPointRauis(o,i);if(v===0)return null;if(o.isTransposed&&v>n&&!f){var b=Math.asin(n/(2*v));h=h+b*2}else v=v+n;return{x:u.x+v*Math.cos(h),y:u.y+v*Math.sin(h),angle:h,r:v}},getArcPoint:function(h,n){var i=this,a;return n=n||0,s.isArray(h.x)||s.isArray(h.y)?a={x:s.isArray(h.x)?h.x[n]:h.x,y:s.isArray(h.y)?h.y[n]:h.y}:a=h,i.transLabelPoint(a),a},getPointAngle:function(h){var n=this,i=n.get("coord");return l.getPointAngle(i,h)},getMiddlePoint:function(h){var n=this,i=n.get("coord"),a=h.length,o={x:0,y:0};return s.each(h,function(u){o.x+=u.x,o.y+=u.y}),o.x/=a,o.y/=a,o=i.convert(o),o},_isToMiddle:function(h){return h.x.length>2},getLabelPoint:function(h,n,i){var a=this,o=h.text[i],u=1,f;a._isToMiddle(n)?f=a.getMiddlePoint(n.points):(h.text.length===1&&i===0?i=1:i===0&&(u=-1),f=a.getArcPoint(n,i));var v=a.getDefaultOffset(h);v=v*u;var b=a.getPointAngle(f),y=a.getCirclePoint(b,v,f);if(y?(y.text=o,y.angle=b,y.color=n.color):y={text:""},h.autoRotate||typeof h.autoRotate=="undefined"){var g=y.textStyle?y.textStyle.rotate:null;g||(g=y.rotate||a.getLabelRotate(b,v,n)),y.rotate=g}return y.start={x:f.x,y:f.y},y},_isEmitLabels:function(){var h=this.get("label");return h.labelEmit},getLabelRotate:function(h){var n=this,i;return i=h*180/Math.PI,i+=90,n._isEmitLabels()&&(i-=90),i&&(i>90?i=i-180:i<-90&&(i=i+180)),i/180*Math.PI},getLabelAlign:function(h){var n=this,i=n.get("coord"),a;if(n._isEmitLabels())h.angle<=Math.PI/2&&h.angle>-Math.PI/2?a="left":a="right";else if(!i.isTransposed)a="center";else{var o=i.getCenter(),u=n.getDefaultOffset(h);Math.abs(h.x-o.x)<1?a="center":h.angle>Math.PI||h.angle<=0?u>0?a="left":a="right":u>0?a="right":a="left"}return a}}),E.exports=c},function(E,T,e){var t=e(0),l=e(5);E.exports={splitData:function(c){var r=this.get("viewTheme")||l;if(!c.length)return[];var h=[],n=[],i=this.getYScale(),a=i.field,o;return t.each(c,function(u){o=u._origin?u._origin[a]:u[a],r.connectNulls?t.isNil(o)||n.push(u):t.isArray(o)&&t.isNil(o[0])||t.isNil(o)?n.length&&(h.push(n),n=[]):n.push(u)}),n.length&&h.push(n),h}}},function(E,T){E.exports={toFront:function(t){var l=t.get("parent"),s=l.get("children").indexOf(t);t.set("_originIndex",s),t.toFront()},resetZIndex:function(t){var l=t.get("parent"),s=t.get("_originIndex"),c=l.get("children"),r=c.indexOf(t);s>=0&&s!==r&&(c.splice(r,1),c.splice(s,0,t))}}},function(E,T,e){function t(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function l(n,i){n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i}var s=e(8),c=e(128),r=e(0),h=function(n){l(a,n);var i=a.prototype;i.getDefaultCfg=function(){var u=n.prototype.getDefaultCfg.call(this);return u.type="path",u.shapeType="line",u};function a(o){var u;return u=n.call(this,o)||this,r.assign(t(u),c),u}return i.getDrawCfg=function(u){var f=n.prototype.getDrawCfg.call(this,u);return f.isStack=this.hasStack(),f},i.draw=function(u,f,v,b){var y=this,g=this.splitData(u),_=this.getDrawCfg(u[0]);y._applyViewThemeShapeStyle(_,_.shape,v),_.origin=u,r.each(g,function(M,x){if(!r.isEmpty(M)){_.splitedIndex=x,_.points=M;var m=v.drawShape(_.shape,_,f);y.appendShapeInfo(m,b+x)}})},a}(s);s.Path=h,E.exports=h},function(E,T){var e,t,l="#1890FF",s=["#1890FF","#2FC25B","#FACC14","#223273","#8543E0","#13C2C2","#3436C7","#F04864"],c=["#1890FF","#41D9C7","#2FC25B","#FACC14","#E6965C","#223273","#7564CC","#8543E0","#5C8EE6","#13C2C2","#5CA3E6","#3436C7","#B381E6","#F04864","#D598D9"],r=["#1890FF","#66B5FF","#41D9C7","#2FC25B","#6EDB8F","#9AE65C","#FACC14","#E6965C","#57AD71","#223273","#738AE6","#7564CC","#8543E0","#A877ED","#5C8EE6","#13C2C2","#70E0E0","#5CA3E6","#3436C7","#8082FF","#DD81E6","#F04864","#FA7D92","#D598D9"],h=["#1890FF","#13C2C2","#2FC25B","#FACC14","#F04864","#8543E0","#3436C7","#223273"],n=["#1890FF","#73C9E6","#13C2C2","#6CD9B3","#2FC25B","#9DD96C","#FACC14","#E6965C","#F04864","#D66BCA","#8543E0","#8E77ED","#3436C7","#737EE6","#223273","#7EA2E6"],i='"-apple-system", BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",SimSun, "sans-serif"',a="g2-tooltip",o="g2-tooltip-title",u="g2-tooltip-list",f="g2-tooltip-list-item",v="g2-tooltip-marker",b="g2-tooltip-value",y="g2-legend",g="g2-legend-title",_="g2-legend-list",M="g2-legend-list-item",x="g2-legend-marker",m={defaultColor:l,plotCfg:{padding:[20,20,95,80]},fontFamily:i,defaultLegendPosition:"bottom",colors:s,colors_16:c,colors_24:r,colors_pie:h,colors_pie_16:n,shapes:{point:["hollowCircle","hollowSquare","hollowDiamond","hollowBowtie","hollowTriangle","hollowHexagon","cross","tick","plus","hyphen","line"],line:["line","dash","dot"],area:["area"]},sizes:[1,10],opacities:[.1,.9],axis:{top:{position:"top",title:null,label:{offset:16,textStyle:{fill:"#545454",fontSize:12,lineHeight:16,textBaseline:"middle",fontFamily:i},autoRotate:!0},line:{lineWidth:1,stroke:"#BFBFBF"},tickLine:{lineWidth:1,stroke:"#BFBFBF",length:4,alignWithLabel:!0}},bottom:{position:"bottom",title:null,label:{offset:16,autoRotate:!0,textStyle:{fill:"#545454",fontSize:12,lineHeight:16,textBaseline:"middle",fontFamily:i}},line:{lineWidth:1,stroke:"#BFBFBF"},tickLine:{lineWidth:1,stroke:"#BFBFBF",length:4,alignWithLabel:!0}},left:{position:"left",title:null,label:{offset:8,autoRotate:!0,textStyle:{fill:"#545454",fontSize:12,lineHeight:16,textBaseline:"middle",fontFamily:i}},line:null,tickLine:null,grid:{zIndex:-1,lineStyle:{stroke:"#E9E9E9",lineWidth:1,lineDash:[3,3]},hideFirstLine:!0}},right:{position:"right",title:null,label:{offset:8,autoRotate:!0,textStyle:{fill:"#545454",fontSize:12,lineHeight:16,textBaseline:"middle",fontFamily:i}},line:null,tickLine:null,grid:{lineStyle:{stroke:"#E9E9E9",lineWidth:1,lineDash:[3,3]},hideFirstLine:!0}},circle:{zIndex:1,title:null,label:{offset:8,textStyle:{fill:"#545454",fontSize:12,lineHeight:16,fontFamily:i}},line:{lineWidth:1,stroke:"#BFBFBF"},tickLine:{lineWidth:1,stroke:"#BFBFBF",length:4,alignWithLabel:!0},grid:{lineStyle:{stroke:"#E9E9E9",lineWidth:1,lineDash:[3,3]},hideFirstLine:!0}},radius:{zIndex:0,label:{offset:12,textStyle:{fill:"#545454",fontSize:12,textBaseline:"middle",lineHeight:16,fontFamily:i}},line:{lineWidth:1,stroke:"#BFBFBF"},tickLine:{lineWidth:1,stroke:"#BFBFBF",length:4,alignWithLabel:!0},grid:{lineStyle:{stroke:"#E9E9E9",lineWidth:1,lineDash:[3,3]},type:"circle"}},helix:{grid:null,label:null,title:null,line:{lineWidth:1,stroke:"#BFBFBF"},tickLine:{lineWidth:1,length:4,stroke:"#BFBFBF",alignWithLabel:!0}}},label:{offset:20,textStyle:{fill:"#545454",fontSize:12,textBaseline:"middle",fontFamily:i}},treemapLabels:{offset:10,textStyle:{fill:"#fff",fontSize:12,textBaseline:"top",fontStyle:"bold",fontFamily:i}},innerLabels:{textStyle:{fill:"#fff",fontSize:12,textBaseline:"middle",fontFamily:i}},thetaLabels:{labelHeight:14,offset:30},legend:{right:{position:"right",layout:"vertical",itemMarginBottom:8,width:16,height:156,title:null,legendStyle:{LIST_CLASS:{textAlign:"left"}},textStyle:{fill:"#8C8C8C",fontSize:12,textAlign:"start",textBaseline:"middle",lineHeight:0,fontFamily:i},unCheckColor:"#bfbfbf"},left:{position:"left",layout:"vertical",itemMarginBottom:8,width:16,height:156,title:null,textStyle:{fill:"#8C8C8C",fontSize:12,textAlign:"start",textBaseline:"middle",lineHeight:20,fontFamily:i},unCheckColor:"#bfbfbf"},top:{position:"top",offset:[0,6],layout:"horizontal",title:null,itemGap:10,width:156,height:16,textStyle:{fill:"#8C8C8C",fontSize:12,textAlign:"start",textBaseline:"middle",lineHeight:20,fontFamily:i},unCheckColor:"#bfbfbf"},bottom:{position:"bottom",offset:[0,6],layout:"horizontal",title:null,itemGap:10,width:156,height:16,textStyle:{fill:"#8C8C8C",fontSize:12,textAlign:"start",textBaseline:"middle",lineHeight:20,fontFamily:i},unCheckColor:"#bfbfbf"},html:(e={},e[""+y]={height:"auto",width:"auto",position:"absolute",overflow:"auto",fontSize:"12px",fontFamily:i,lineHeight:"20px",color:"#8C8C8C"},e[""+g]={marginBottom:"4px"},e[""+_]={listStyleType:"none",margin:0,padding:0},e[""+M]={listStyleType:"none",cursor:"pointer",marginBottom:"5px",marginRight:"24px"},e[""+x]={width:"9px",height:"9px",borderRadius:"50%",display:"inline-block",marginRight:"8px",verticalAlign:"middle"},e),gradient:{textStyle:{fill:"#8C8C8C",fontSize:12,textAlign:"center",textBaseline:"middle",lineHeight:20,fontFamily:i},lineStyle:{lineWidth:1,stroke:"#fff"},unCheckColor:"#bfbfbf"},margin:[0,5,24,5],legendMargin:24},tooltip:(t={useHtml:!0,crosshairs:!1,offset:15,marker:{symbol:"circle",activeSymbol:"circle"}},t[""+a]={position:"absolute",visibility:"hidden",zIndex:8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"0px 0px 10px #aeaeae",borderRadius:"3px",color:"rgb(87, 87, 87)",fontSize:"12px",fontFamily:i,lineHeight:"20px",padding:"10px 10px 6px 10px"},t[""+o]={marginBottom:"4px"},t[""+u]={margin:0,listStyleType:"none",padding:0},t[""+f]={listStyleType:"none",marginBottom:"4px",padding:0,marginTop:0,marginLeft:0,marginRight:0},t[""+v]={width:"5px",height:"5px",display:"inline-block",marginRight:"8px"},t[""+b]={display:"inline-block",float:"right",marginLeft:"30px"},t),tooltipMarker:{symbol:function(P,A,O){return[["M",P,A],["m",-O,0],["a",O,O,0,1,0,O*2,0],["a",O,O,0,1,0,-O*2,0]]},stroke:"#fff",shadowBlur:10,shadowOffsetX:0,shadowOffSetY:0,shadowColor:"rgba(0,0,0,0.09)",lineWidth:2,radius:4},tooltipCrosshairsRect:{type:"rect",rectStyle:{fill:"#CCD6EC",opacity:.3}},tooltipCrosshairsLine:{lineStyle:{stroke:"rgba(0, 0, 0, 0.25)",lineWidth:1}},shape:{point:{lineWidth:1,fill:l,radius:4},hollowPoint:{fill:"#fff",lineWidth:1,stroke:l,radius:3},interval:{lineWidth:0,fill:l,fillOpacity:.85},hollowInterval:{fill:"#fff",stroke:l,fillOpacity:0,lineWidth:2},area:{lineWidth:0,fill:l,fillOpacity:.6},polygon:{lineWidth:0,fill:l,fillOpacity:1},hollowPolygon:{fill:"#fff",stroke:l,fillOpacity:0,lineWidth:2},hollowArea:{fill:"#fff",stroke:l,fillOpacity:0,lineWidth:2},line:{stroke:l,lineWidth:2,fill:null},edge:{stroke:l,lineWidth:1,fill:null},schema:{stroke:l,lineWidth:1,fill:null}},guide:{line:{lineStyle:{stroke:"rgba(0, 0, 0, .65)",lineDash:[2,2],lineWidth:1},text:{position:"start",autoRotate:!0,style:{fill:"rgba(0, 0, 0, .45)",fontSize:12,textAlign:"start",fontFamily:i,textBaseline:"bottom"}}},text:{style:{fill:"rgba(0,0,0,.5)",fontSize:12,textBaseline:"middle",textAlign:"start",fontFamily:i}},region:{style:{lineWidth:0,fill:"#000",fillOpacity:.04}},html:{alignX:"middle",alignY:"middle"},dataRegion:{style:{region:{lineWidth:0,fill:"#000000",opacity:.04},text:{textAlign:"center",textBaseline:"bottom",fontSize:12,fill:"rgba(0, 0, 0, .65)"}}},dataMarker:{top:!0,style:{point:{r:3,fill:"#FFFFFF",stroke:"#1890FF",lineWidth:2},line:{stroke:"#A3B1BF",lineWidth:1},text:{fill:"rgba(0, 0, 0, .65)",opacity:1,fontSize:12,textAlign:"start"}},display:{point:!0,line:!0,text:!0},lineLength:20,direction:"upward",autoAdjust:!0}},pixelRatio:null};E.exports=m},function(E,T,e){var t={default:e(131),dark:e(327)};E.exports=t},function(E,T,e){var t=e(1),l=e(330),s=e(333),c=e(329),r=e(105),h=function(i){this._cfg={zIndex:0,capture:!0,visible:!0,destroyed:!1},t.assign(this._cfg,this.getDefaultCfg(),i),this.initAttrs(this._cfg.attrs),this._cfg.attrs={},this.initTransform(),this.init()};h.CFG={id:null,zIndex:0,canvas:null,parent:null,capture:!0,context:null,visible:!0,destroyed:!1},t.augment(h,l,s,r,c,{init:function(){this.setSilent("animable",!0),this.setSilent("animating",!1)},getParent:function(){return this._cfg.parent},getDefaultCfg:function(){return{}},set:function(i,a){return i==="zIndex"&&this._beforeSetZIndex&&this._beforeSetZIndex(a),i==="loading"&&this._beforeSetLoading&&this._beforeSetLoading(a),this._cfg[i]=a,this},setSilent:function(i,a){this._cfg[i]=a},get:function(i){return this._cfg[i]},show:function(){return this._cfg.visible=!0,this},hide:function(){return this._cfg.visible=!1,this},remove:function(i,a){var o=this._cfg,u=o.parent,f=o.el;return u&&t.remove(u.get("children"),this),f&&(a?u&&u._cfg.tobeRemoved.push(f):f.parentNode.removeChild(f)),(i||i===void 0)&&this.destroy(),this},destroy:function(){var i=this.get("destroyed");i||(this._attrs=null,this.removeEvent(),this._cfg={destroyed:!0})},toFront:function(){var i=this._cfg,a=i.parent;if(!!a){var o=a._cfg.children,u=i.el,f=o.indexOf(this);o.splice(f,1),o.push(this),u&&(u.parentNode.removeChild(u),i.el=null)}},toBack:function(){var i=this._cfg,a=i.parent;if(!!a){var o=a._cfg.children,u=i.el,f=o.indexOf(this);if(o.splice(f,1),o.unshift(this),u){var v=u.parentNode;v.removeChild(u),v.insertBefore(u,v.firstChild)}}},_beforeSetZIndex:function(i){var a=this._cfg.parent;this._cfg.zIndex=i,t.isNil(a)||a.sort();var o=this._cfg.el;if(o){var u=a._cfg.children,f=u.indexOf(this),v=o.parentNode;v.removeChild(o),f===u.length-1?v.appendChild(o):v.insertBefore(o,v.childNodes[f])}return i},_setAttrs:function(i){return this.attr(i),i},setZIndex:function(i){return this._cfg.zIndex=i,this._beforeSetZIndex(i)},clone:function(){return t.clone(this)},getBBox:function(){}}),E.exports=h},function(E,T,e){var t=e(1),l=e(133),s=e(347),c={},r="_INDEX";function h(o){return function(u,f){var v=o(u,f);return v===0?u[r]-f[r]:v}}function n(o,u,f){for(var v,b=o.length-1;b>=0;b--){var y=o[b];if(y._cfg.visible&&y._cfg.capture&&(y.isGroup?v=y.getShape(u,f):y.isHit(u,f)&&(v=y)),v)break}return v}var i=function o(u){o.superclass.constructor.call(this,u),this.set("children",[]),this.set("tobeRemoved",[]),this._beforeRenderUI(),this._renderUI(),this._bindUI()};function a(o){if(!(o._cfg||o===i)){var u=o.superclass.constructor;u&&!u._cfg&&a(u),o._cfg={},t.merge(o._cfg,u._cfg),t.merge(o._cfg,o.CFG)}}t.extend(i,l),t.augment(i,{isGroup:!0,type:"group",canFill:!0,canStroke:!0,getDefaultCfg:function(){return a(this.constructor),t.merge({},this.constructor._cfg)},_beforeRenderUI:function(){},_renderUI:function(){},_bindUI:function(){},addShape:function(u,f){var v=this.get("canvas");f=f||{};var b=c[u];if(b||(b=t.upperFirst(u),c[u]=b),f.attrs&&v){var y=f.attrs;if(u==="text"){var g=v.get("fontFamily");g&&(y.fontFamily=y.fontFamily?y.fontFamily:g)}}f.canvas=v,f.type=u;var _=new s[b](f);return this.add(_),_},addGroup:function(u,f){var v=this.get("canvas"),b;if(f=t.merge({},f),t.isFunction(u))f?(f.canvas=v,f.parent=this,b=new u(f)):b=new u({canvas:v,parent:this}),this.add(b);else if(t.isObject(u))u.canvas=v,b=new i(u),this.add(b);else if(u===void 0)b=new i,this.add(b);else return!1;return b},renderBack:function(u,f){var v=this.get("backShape"),b=this.getBBox();return t.merge(f,{x:b.minX-u[3],y:b.minY-u[0],width:b.width+u[1]+u[3],height:b.height+u[0]+u[2]}),v?v.attr(f):v=this.addShape("rect",{zIndex:-1,attrs:f}),this.set("backShape",v),this.sort(),v},removeChild:function(u,f){if(arguments.length>=2)this.contain(u)&&u.remove(f);else{if(arguments.length===1)if(t.isBoolean(u))f=u;else return this.contain(u)&&u.remove(!0),this;arguments.length===0&&(f=!0),i.superclass.remove.call(this,f)}return this},add:function(u){var f=this,v=f.get("children");if(t.isArray(u))t.each(u,function(g){var _=g.get("parent");_&&_.removeChild(g,!1),f._setCfgProperty(g)}),f._cfg.children=v.concat(u);else{var b=u,y=b.get("parent");y&&y.removeChild(b,!1),f._setCfgProperty(b),v.push(b)}return f},_setCfgProperty:function(u){var f=this._cfg;u.set("parent",this),u.set("canvas",f.canvas),f.timeline&&u.set("timeline",f.timeline)},contain:function(u){var f=this.get("children");return f.indexOf(u)>-1},getChildByIndex:function(u){var f=this.get("children");return f[u]},getFirst:function(){return this.getChildByIndex(0)},getLast:function(){var u=this.get("children").length-1;return this.getChildByIndex(u)},getBBox:function(){var u=this,f=Infinity,v=-Infinity,b=Infinity,y=-Infinity,g=u.get("children");g.length>0?t.each(g,function(M){if(M.get("visible")){if(M.isGroup&&M.get("children").length===0)return;var x=M.getBBox();if(!x)return!0;var m=[x.minX,x.minY,1],S=[x.minX,x.maxY,1],P=[x.maxX,x.minY,1],A=[x.maxX,x.maxY,1];M.apply(m),M.apply(S),M.apply(P),M.apply(A);var O=Math.min(m[0],S[0],P[0],A[0]),R=Math.max(m[0],S[0],P[0],A[0]),W=Math.min(m[1],S[1],P[1],A[1]),F=Math.max(m[1],S[1],P[1],A[1]);O<f&&(f=O),R>v&&(v=R),W<b&&(b=W),F>y&&(y=F)}}):(f=0,v=0,b=0,y=0);var _={minX:f,minY:b,maxX:v,maxY:y};return _.x=_.minX,_.y=_.minY,_.width=_.maxX-_.minX,_.height=_.maxY-_.minY,_},getCount:function(){return this.get("children").length},sort:function(){var u=this.get("children");return t.each(u,function(f,v){return f[r]=v,f}),u.sort(h(function(f,v){return f.get("zIndex")-v.get("zIndex")})),this},findById:function(u){return this.find(function(f){return f.get("id")===u})},find:function(u){if(t.isString(u))return this.findById(u);var f=this.get("children"),v=null;return t.each(f,function(b){if(u(b)?v=b:b.find&&(v=b.find(u)),v)return!1}),v},findAll:function(u){var f=this.get("children"),v=[],b=[];return t.each(f,function(y){u(y)&&v.push(y),y.findAllBy&&(b=y.findAllBy(u),v=v.concat(b))}),v},findBy:function(u){var f=this.get("children"),v=null;return t.each(f,function(b){if(u(b)?v=b:b.findBy&&(v=b.findBy(u)),v)return!1}),v},findAllBy:function(u){var f=this.get("children"),v=[],b=[];return t.each(f,function(y){u(y)&&v.push(y),y.findAllBy&&(b=y.findAllBy(u),v=v.concat(b))}),v},getShape:function(u,f){var v=this,b=v._attrs.clip,y=v._cfg.children,g;if(b){var _=[u,f,1];b.invert(_,v.get("canvas")),b.isPointInPath(_[0],_[1])&&(g=n(y,u,f))}else g=n(y,u,f);return g},clearTotalMatrix:function(){var u=this.get("totalMatrix");if(u){this.setSilent("totalMatrix",null);for(var f=this._cfg.children,v=0;v<f.length;v++){var b=f[v];b.clearTotalMatrix()}}},clear:function(u){for(var f=this._cfg.children,v=f.length-1;v>=0;v--)f[v].remove(!0,u);return this._cfg.children=[],this},destroy:function(){this.get("destroyed")||(this.clear(),i.superclass.destroy.call(this))},clone:function(){var u=this,f=u._cfg.children,v=new i;return t.each(f,function(b){v.add(b.clone())}),v}}),E.exports=i},function(E,T,e){var t=e(1),l=function(c,r,h,n){this.type=c,this.target=null,this.currentTarget=null,this.bubbles=h,this.cancelable=n,this.timeStamp=new Date().getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.removed=!1,this.event=r};t.augment(l,{preventDefault:function(){this.defaultPrevented=this.cancelable&&!0},stopPropagation:function(){this.propagationStopped=!0},remove:function(){this.remove=!0},clone:function(){return t.clone(this)},toString:function(){return"[Event (type="+this.type+")]"}}),E.exports=l},function(E,T,e){var t=e(1),l=e(7),s=e(47),c=e(49);function r(i,a,o){return i+a*Math.cos(o)}function h(i,a,o){return i+a*Math.sin(o)}var n=function i(a){i.superclass.constructor.call(this,a)};n.ATTRS={x:0,y:0,r:0,startAngle:0,endAngle:0,clockwise:!1,lineWidth:1,startArrow:!1,endArrow:!1},t.extend(n,l),t.augment(n,{canStroke:!0,type:"arc",getDefaultAttrs:function(){return{x:0,y:0,r:0,startAngle:0,endAngle:0,clockwise:!1,lineWidth:1,startArrow:!1,endArrow:!1}},calculateBox:function(){var a=this._attrs,o=a.x,u=a.y,f=a.r,v=a.startAngle,b=a.endAngle,y=a.clockwise,g=this.getHitLineWidth(),_=g/2,M=s.box(o,u,f,v,b,y);return M.minX-=_,M.minY-=_,M.maxX+=_,M.maxY+=_,M},getStartTangent:function(){var a=this._attrs,o=a.x,u=a.y,f=a.startAngle,v=a.r,b=a.clockwise,y=Math.PI/180;b&&(y*=-1);var g=[],_=r(o,v,f+y),M=h(u,v,f+y),x=r(o,v,f),m=h(u,v,f);return g.push([_,M]),g.push([x,m]),g},getEndTangent:function(){var a=this._attrs,o=a.x,u=a.y,f=a.endAngle,v=a.r,b=a.clockwise,y=Math.PI/180,g=[];b&&(y*=-1);var _=r(o,v,f+y),M=h(u,v,f+y),x=r(o,v,f),m=h(u,v,f);return g.push([x,m]),g.push([_,M]),g},createPath:function(a){var o=this._attrs,u=o.x,f=o.y,v=o.r,b=o.startAngle,y=o.endAngle,g=o.clockwise;a=a||self.get("context"),a.beginPath(),a.arc(u,f,v,b,y,g)},afterPath:function(a){var o=this._attrs;if(a=a||this.get("context"),o.startArrow){var u=this.getStartTangent();c.addStartArrow(a,o,u[0][0],u[0][1],u[1][0],u[1][1])}if(o.endArrow){var f=this.getEndTangent();c.addEndArrow(a,o,f[0][0],f[0][1],f[1][0],f[1][1])}}}),E.exports=n},function(E,T,e){var t=e(1),l=e(7),s=function c(r){c.superclass.constructor.call(this,r)};s.ATTRS={x:0,y:0,r:0,lineWidth:1},t.extend(s,l),t.augment(s,{canFill:!0,canStroke:!0,type:"circle",getDefaultAttrs:function(){return{lineWidth:1}},calculateBox:function(){var r=this._attrs,h=r.x,n=r.y,i=r.r,a=this.getHitLineWidth(),o=a/2+i;return{minX:h-o,minY:n-o,maxX:h+o,maxY:n+o}},createPath:function(r){var h=this._attrs,n=h.x,i=h.y,a=h.r;r.beginPath(),r.arc(n,i,a,0,Math.PI*2,!1),r.closePath()}}),E.exports=s},function(E,T,e){var t=e(1),l=e(7),s=function c(r){c.superclass.constructor.call(this,r)};t.extend(s,l),t.augment(s,{canFill:!0,canStroke:!0,type:"dom",calculateBox:function(){var r=this,h=r._attrs,n=h.x,i=h.y,a=h.width,o=h.height,u=this.getHitLineWidth(),f=u/2;return{minX:n-f,minY:i-f,maxX:n+a+f,maxY:i+o+f}}}),E.exports=s},function(E,T,e){var t=e(1),l=e(7),s=function c(r){c.superclass.constructor.call(this,r)};s.ATTRS={x:0,y:0,rx:1,ry:1,lineWidth:1},t.extend(s,l),t.augment(s,{canFill:!0,canStroke:!0,type:"ellipse",getDefaultAttrs:function(){return{lineWidth:1}},calculateBox:function(){var r=this._attrs,h=r.x,n=r.y,i=r.rx,a=r.ry,o=this.getHitLineWidth(),u=i+o/2,f=a+o/2;return{minX:h-u,minY:n-f,maxX:h+u,maxY:n+f}},createPath:function(r){var h=this._attrs,n=h.x,i=h.y,a=h.rx,o=h.ry;r=r||self.get("context");var u=a>o?a:o,f=a>o?1:a/o,v=a>o?o/a:1,b=[1,0,0,0,1,0,0,0,1];t.mat3.scale(b,b,[f,v]),t.mat3.translate(b,b,[n,i]),r.beginPath(),r.save(),r.transform(b[0],b[1],b[3],b[4],b[6],b[7]),r.arc(0,0,u,0,Math.PI*2),r.restore(),r.closePath()}}),E.exports=s},function(E,T,e){var t=e(1),l=e(7),s=e(47),c=function r(h){r.superclass.constructor.call(this,h)};c.ATTRS={x:0,y:0,rs:0,re:0,startAngle:0,endAngle:0,clockwise:!1,lineWidth:1},t.extend(c,l),t.augment(c,{canFill:!0,canStroke:!0,type:"fan",getDefaultAttrs:function(){return{clockwise:!1,lineWidth:1,rs:0,re:0}},calculateBox:function(){var h=this,n=h._attrs,i=n.x,a=n.y,o=n.rs,u=n.re,f=n.startAngle,v=n.endAngle,b=n.clockwise,y=this.getHitLineWidth(),g=s.box(i,a,o,f,v,b),_=s.box(i,a,u,f,v,b),M=Math.min(g.minX,_.minX),x=Math.min(g.minY,_.minY),m=Math.max(g.maxX,_.maxX),S=Math.max(g.maxY,_.maxY),P=y/2;return{minX:M-P,minY:x-P,maxX:m+P,maxY:S+P}},createPath:function(h){var n=this._attrs,i=n.x,a=n.y,o=n.rs,u=n.re,f=n.startAngle,v=n.endAngle,b=n.clockwise,y={x:Math.cos(f)*o+i,y:Math.sin(f)*o+a},g={x:Math.cos(f)*u+i,y:Math.sin(f)*u+a},_={x:Math.cos(v)*o+i,y:Math.sin(v)*o+a};h=h||self.get("context"),h.beginPath(),h.moveTo(y.x,y.y),h.lineTo(g.x,g.y),h.arc(i,a,u,f,v,b),h.lineTo(_.x,_.y),h.arc(i,a,o,v,f,!b),h.closePath()}}),E.exports=c},function(E,T,e){var t=e(1),l=e(7),s=function c(r){c.superclass.constructor.call(this,r)};s.ATTRS={x:0,y:0,img:void 0,width:0,height:0,sx:null,sy:null,swidth:null,sheight:null},t.extend(s,l),t.augment(s,{type:"image",isHitBox:function(){return!1},calculateBox:function(){var r=this._attrs;(!this._cfg.attrs||this._cfg.attrs.img!==r.img)&&this._setAttrImg();var h=r.x,n=r.y,i=r.width,a=r.height;return{minX:h,minY:n,maxX:h+i,maxY:n+a}},_beforeSetLoading:function(r){var h=this.get("canvas");return r===!1&&this.get("toDraw")===!0&&(this._cfg.loading=!1,h.draw()),r},_setAttrImg:function(){var r=this,h=r._attrs,n=h.img;if(t.isString(n)){var i=new Image;i.onload=function(){if(r.get("destroyed"))return!1;r.attr("imgSrc",n),r.attr("img",i);var a=r.get("callback");a&&a.call(r),r.set("loading",!1)},i.src=n,i.crossOrigin="Anonymous",r.set("loading",!0)}else return n instanceof Image?(h.width||r.attr("width",n.width),h.height||r.attr("height",n.height),n):n instanceof HTMLElement&&t.isString(n.nodeName)&&n.nodeName.toUpperCase()==="CANVAS"?(h.width||r.attr("width",Number(n.getAttribute("width"))),h.height||r.attr("height",Number(n.getAttribute("height"))),n):n instanceof ImageData?(h.width||r.attr("width",n.width),h.height||r.attr("height",n.height),n):null},drawInner:function(r){if(this._cfg.hasUpdate&&this._setAttrImg(),this.get("loading")){this.set("toDraw",!0);return}this._drawImage(r),this._cfg.hasUpdate=!1},_drawImage:function(r){var h=this._attrs,n=h.x,i=h.y,a=h.img,o=h.width,u=h.height,f=h.sx,v=h.sy,b=h.swidth,y=h.sheight;this.set("toDraw",!1);var g=a;if(g instanceof ImageData&&(g=new Image,g.src=a),g instanceof Image||g instanceof HTMLElement&&t.isString(g.nodeName)&&g.nodeName.toUpperCase()==="CANVAS"){if(t.isNil(f)||t.isNil(v)||t.isNil(b)||t.isNil(y)){r.drawImage(g,n,i,o,u);return}if(!t.isNil(f)&&!t.isNil(v)&&!t.isNil(b)&&!t.isNil(y)){r.drawImage(g,f,v,b,y,n,i,o,u);return}}}}),E.exports=s},function(E,T,e){var t=e(1),l=e(7),s=e(49),c=e(48),r=function h(n){h.superclass.constructor.call(this,n)};r.ATTRS={x1:0,y1:0,x2:0,y2:0,lineWidth:1,startArrow:!1,endArrow:!1},t.extend(r,l),t.augment(r,{canStroke:!0,type:"line",getDefaultAttrs:function(){return{lineWidth:1,startArrow:!1,endArrow:!1}},calculateBox:function(){var n=this._attrs,i=n.x1,a=n.y1,o=n.x2,u=n.y2,f=this.getHitLineWidth();return c.box(i,a,o,u,f)},createPath:function(n){var i=this._attrs,a=i.x1,o=i.y1,u=i.x2,f=i.y2;n=n||self.get("context"),n.beginPath(),n.moveTo(a,o),n.lineTo(u,f)},afterPath:function(n){var i=this._attrs,a=i.x1,o=i.y1,u=i.x2,f=i.y2;n=n||this.get("context"),i.startArrow&&s.addStartArrow(n,i,u,f,a,o),i.endArrow&&s.addEndArrow(n,i,a,o,u,f)},getPoint:function(n){var i=this._attrs;return{x:c.at(i.x1,i.x2,n),y:c.at(i.y1,i.y2,n)}}}),E.exports=r},function(E,T){E.exports={xAt:function(t,l,s,c,r){return l*Math.cos(t)*Math.cos(r)-s*Math.sin(t)*Math.sin(r)+c},yAt:function(t,l,s,c,r){return l*Math.sin(t)*Math.cos(r)+s*Math.cos(t)*Math.sin(r)+c},xExtrema:function(t,l,s){return Math.atan(-s/l*Math.tan(t))},yExtrema:function(t,l,s){return Math.atan(s/(l*Math.tan(t)))}}},function(E,T,e){var t=e(1),l=t.vec2;function s(h,n,i,a){var o=1-a;return o*(o*h+2*a*n)+a*a*i}function c(h,n,i,a,o,u,f,v,b){var y,g=.005,_=Infinity,M,x,m,S,P,A,O=1e-4,R=[f,v];for(S=0;S<1;S+=.05)x=[s(h,i,o,S),s(n,a,u,S)],M=l.squaredDistance(R,x),M<_&&(y=S,_=M);for(_=Infinity,A=0;A<32&&!(g<O);A++){var W=y-g,F=y+g;x=[s(h,i,o,W),s(n,a,u,W)],M=l.squaredDistance(R,x),W>=0&&M<_?(y=W,_=M):(m=[s(h,i,o,F),s(n,a,u,F)],P=l.squaredDistance(R,m),F<=1&&P<_?(y=F,_=P):g*=.5)}return b&&(b.x=s(h,i,o,y),b.y=s(n,a,u,y)),Math.sqrt(_)}function r(h,n,i){var a=h+i-2*n;if(t.isNumberEqual(a,0))return[.5];var o=(h-n)/a;return o<=1&&o>=0?[o]:[]}E.exports={at:s,projectPoint:function(n,i,a,o,u,f,v,b){var y={};return c(n,i,a,o,u,f,v,b,y),y},pointDistance:c,extrema:r}},function(E,T,e){var t=e(1),l=e(7),s=e(50),c=e(37),r=e(49),h=e(77),n=e(75),i=function a(o){a.superclass.constructor.call(this,o)};i.ATTRS={path:null,lineWidth:1,startArrow:!1,endArrow:!1},t.extend(i,l),t.augment(i,{canFill:!0,canStroke:!0,type:"path",getDefaultAttrs:function(){return{lineWidth:1,startArrow:!1,endArrow:!1}},_afterSetAttrPath:function(o){var u=this;if(t.isNil(o)){u.setSilent("segments",null),u.setSilent("box",void 0);return}var f=c.parsePath(o),v,b=[];if(!(!t.isArray(f)||f.length===0||f[0][0]!=="M"&&f[0][0]!=="m")){for(var y=f.length,g=0;g<f.length;g++){var _=f[g];v=new s(_,v,g===y-1),b.push(v)}u.setSilent("segments",b),u.setSilent("tCache",null),u.setSilent("box",null)}},calculateBox:function(){var o=this,u=o.get("segments");if(!u)return null;var f=this.getHitLineWidth(),v=Infinity,b=-Infinity,y=Infinity,g=-Infinity;return t.each(u,function(_){_.getBBox(f);var M=_.box;M&&(M.minX<v&&(v=M.minX),M.maxX>b&&(b=M.maxX),M.minY<y&&(y=M.minY),M.maxY>g&&(g=M.maxY))}),v===Infinity||y===Infinity?{minX:0,minY:0,maxX:0,maxY:0}:{minX:v,minY:y,maxX:b,maxY:g}},_setTcache:function(){var o=0,u=0,f=[],v,b,y,g,_=this._cfg.curve;!_||(t.each(_,function(M,x){y=_[x+1],g=M.length,y&&(o+=n.len(M[g-2],M[g-1],y[1],y[2],y[3],y[4],y[5],y[6]))}),t.each(_,function(M,x){y=_[x+1],g=M.length,y&&(v=[],v[0]=u/o,b=n.len(M[g-2],M[g-1],y[1],y[2],y[3],y[4],y[5],y[6]),u+=b,v[1]=u/o,f.push(v))}),this._cfg.tCache=f)},_calculateCurve:function(){var o=this,u=o._attrs,f=u.path;this._cfg.curve=h.pathTocurve(f)},getStartTangent:function(){var o=this.get("segments"),u,f,v,b;if(o.length>1)if(u=o[0].endPoint,f=o[1].endPoint,v=o[1].startTangent,b=[],t.isFunction(v)){var y=v();b.push([u.x-y[0],u.y-y[1]]),b.push([u.x,u.y])}else b.push([f.x,f.y]),b.push([u.x,u.y]);return b},getEndTangent:function(){var o=this.get("segments"),u=o.length,f,v,b,y;if(u>1)if(f=o[u-2].endPoint,v=o[u-1].endPoint,b=o[u-1].endTangent,y=[],t.isFunction(b)){var g=b();y.push([v.x-g[0],v.y-g[1]]),y.push([v.x,v.y])}else y.push([f.x,f.y]),y.push([v.x,v.y]);return y},getPoint:function(o){var u=this._cfg.tCache,f,v;u||(this._calculateCurve(),this._setTcache(),u=this._cfg.tCache);var b=this._cfg.curve;if(!u)return b?{x:b[0][1],y:b[0][2]}:null;t.each(u,function(M,x){o>=M[0]&&o<=M[1]&&(f=(o-M[0])/(M[1]-M[0]),v=x)});var y=b[v];if(t.isNil(y)||t.isNil(v))return null;var g=y.length,_=b[v+1];return{x:n.at(y[g-2],_[1],_[3],_[5],1-f),y:n.at(y[g-1],_[2],_[4],_[6],1-f)}},createPath:function(o){var u=this,f=u.get("segments");if(!!t.isArray(f)){o=o||u.get("context"),o.beginPath();for(var v=f.length,b=0;b<v;b++)f[b].draw(o)}},afterPath:function(o){var u=this,f=u._attrs,v=u.get("segments"),b=f.path;if(o=o||u.get("context"),!!t.isArray(v)&&v.length!==1&&!(!f.startArrow&&!f.endArrow)&&!(b[b.length-1]==="z"||b[b.length-1]==="Z"||f.fill)){var y=u.getStartTangent();r.addStartArrow(o,f,y[0][0],y[0][1],y[1][0],y[1][1]);var g=u.getEndTangent();r.addEndArrow(o,f,g[0][0],g[0][1],g[1][0],g[1][1])}}}),E.exports=i},function(E,T,e){var t=e(1),l=e(7),s=function c(r){c.superclass.constructor.call(this,r)};s.ATTRS={points:null,lineWidth:1},t.extend(s,l),t.augment(s,{canFill:!0,canStroke:!0,type:"polygon",getDefaultAttrs:function(){return{lineWidth:1}},calculateBox:function(){var r=this,h=r._attrs,n=h.points,i=this.getHitLineWidth();if(!n||n.length===0)return null;var a=Infinity,o=Infinity,u=-Infinity,f=-Infinity;t.each(n,function(b){var y=b[0],g=b[1];y<a&&(a=y),y>u&&(u=y),g<o&&(o=g),g>f&&(f=g)});var v=i/2;return{minX:a-v,minY:o-v,maxX:u+v,maxY:f+v}},createPath:function(r){var h=this,n=h._attrs,i=n.points;i.length<2||(r=r||h.get("context"),r.beginPath(),t.each(i,function(a,o){o===0?r.moveTo(a[0],a[1]):r.lineTo(a[0],a[1])}),r.closePath())}}),E.exports=s},function(E,T,e){var t=e(1),l=e(7),s=e(49),c=e(48),r=function h(n){h.superclass.constructor.call(this,n)};r.ATTRS={points:null,lineWidth:1,startArrow:!1,endArrow:!1,tCache:null},t.extend(r,l),t.augment(r,{canStroke:!0,type:"polyline",tCache:null,getDefaultAttrs:function(){return{lineWidth:1,startArrow:!1,endArrow:!1}},calculateBox:function(){var n=this,i=n._attrs,a=this.getHitLineWidth(),o=i.points;if(!o||o.length===0)return null;var u=Infinity,f=Infinity,v=-Infinity,b=-Infinity;t.each(o,function(g){var _=g[0],M=g[1];_<u&&(u=_),_>v&&(v=_),M<f&&(f=M),M>b&&(b=M)});var y=a/2;return{minX:u-y,minY:f-y,maxX:v+y,maxY:b+y}},_setTcache:function(){var n=this,i=n._attrs,a=i.points,o=0,u=0,f=[],v,b;!a||a.length===0||(t.each(a,function(y,g){a[g+1]&&(o+=c.len(y[0],y[1],a[g+1][0],a[g+1][1]))}),!(o<=0)&&(t.each(a,function(y,g){a[g+1]&&(v=[],v[0]=u/o,b=c.len(y[0],y[1],a[g+1][0],a[g+1][1]),u+=b,v[1]=u/o,f.push(v))}),this.tCache=f))},createPath:function(n){var i=this,a=i._attrs,o=a.points,u,f;if(!(o.length<2)){for(n=n||i.get("context"),n.beginPath(),n.moveTo(o[0][0],o[0][1]),f=1,u=o.length-1;f<u;f++)n.lineTo(o[f][0],o[f][1]);n.lineTo(o[u][0],o[u][1])}},getStartTangent:function(){var n=this.__attrs.points,i=[];return i.push([n[1][0],n[1][1]]),i.push([n[0][0],n[0][1]]),i},getEndTangent:function(){var n=this.__attrs.points,i=n.length-1,a=[];return a.push([n[i-1][0],n[i-1][1]]),a.push([n[i][0],n[i][1]]),a},afterPath:function(n){var i=this,a=i._attrs,o=a.points,u=o.length-1;n=n||i.get("context"),a.startArrow&&s.addStartArrow(n,a,o[1][0],o[1][1],o[0][0],o[0][1]),a.endArrow&&s.addEndArrow(n,a,o[u-1][0],o[u-1][1],o[u][0],o[u][1])},getPoint:function(n){var i=this._attrs,a=i.points,o=this.tCache,u,f;return o||(this._setTcache(),o=this.tCache),t.each(o,function(v,b){n>=v[0]&&n<=v[1]&&(u=(n-v[0])/(v[1]-v[0]),f=b)}),{x:c.at(a[f][0],a[f+1][0],u),y:c.at(a[f][1],a[f+1][1],u)}}}),E.exports=r},function(E,T,e){var t=e(1),l=e(37),s=l.parseRadius,c=e(7),r=function h(n){h.superclass.constructor.call(this,n)};r.ATTRS={x:0,y:0,width:0,height:0,radius:0,lineWidth:1},t.extend(r,c),t.augment(r,{canFill:!0,canStroke:!0,type:"rect",getDefaultAttrs:function(){return{lineWidth:1,radius:0}},calculateBox:function(){var n=this,i=n._attrs,a=i.x,o=i.y,u=i.width,f=i.height,v=this.getHitLineWidth(),b=v/2;return{minX:a-b,minY:o-b,maxX:a+u+b,maxY:o+f+b}},createPath:function(n){var i=this,a=i._attrs,o=a.x,u=a.y,f=a.width,v=a.height,b=a.radius;if(n=n||i.get("context"),n.beginPath(),b===0)n.rect(o,u,f,v);else{var y=s(b);n.moveTo(o+y.r1,u),n.lineTo(o+f-y.r2,u),y.r2!==0&&n.arc(o+f-y.r2,u+y.r2,y.r2,-Math.PI/2,0),n.lineTo(o+f,u+v-y.r3),y.r3!==0&&n.arc(o+f-y.r3,u+v-y.r3,y.r3,0,Math.PI/2),n.lineTo(o+y.r4,u+v),y.r4!==0&&n.arc(o+y.r4,u+v-y.r4,y.r4,Math.PI/2,Math.PI),n.lineTo(o,u+y.r1),y.r1!==0&&n.arc(o+y.r1,u+y.r1,y.r1,Math.PI,Math.PI*1.5),n.closePath()}}}),E.exports=r},function(E,T,e){var t=e(1),l=e(7),s=function c(r){c.superclass.constructor.call(this,r)};s.ATTRS={x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom",lineHeight:null,textArr:null},t.extend(s,l),t.augment(s,{canFill:!0,canStroke:!0,type:"text",getDefaultAttrs:function(){return{lineWidth:1,lineCount:1,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"}},initTransform:function(){var r=this._attrs.fontSize;r&&+r<12&&this.transform([["t",-1*this._attrs.x,-1*this._attrs.y],["s",+r/12,+r/12],["t",this._attrs.x,this._attrs.y]])},_assembleFont:function(){var r=this._attrs,h=r.fontSize,n=r.fontFamily,i=r.fontWeight,a=r.fontStyle,o=r.fontVariant;r.font=[a,o,i,h+"px",n].join(" ")},_setAttrText:function(){var r=this._attrs,h=r.text,n=null;if(t.isString(h)&&h.indexOf(`
`)!==-1){n=h.split(`
`);var i=n.length;r.lineCount=i}r.textArr=n},_getTextHeight:function(){var r=this._attrs,h=r.lineCount,n=r.fontSize*1;if(h>1){var i=this._getSpaceingY();return n*h+i*(h-1)}return n},isHitBox:function(){return!1},calculateBox:function(){var r=this,h=r._attrs,n=this._cfg;(!n.attrs||n.hasUpdate)&&(this._assembleFont(),this._setAttrText()),h.textArr||this._setAttrText();var i=h.x,a=h.y,o=r.measureText();if(!o)return{minX:i,minY:a,maxX:i,maxY:a};var u=r._getTextHeight(),f=h.textAlign,v=h.textBaseline,b=r.getHitLineWidth(),y={x:i,y:a-u};f&&(f==="end"||f==="right"?y.x-=o:f==="center"&&(y.x-=o/2)),v&&(v==="top"?y.y+=u:v==="middle"&&(y.y+=u/2)),this.set("startPoint",y);var g=b/2;return{minX:y.x-g,minY:y.y-g,maxX:y.x+o+g,maxY:y.y+u+g}},_getSpaceingY:function(){var r=this._attrs,h=r.lineHeight,n=r.fontSize*1;return h?h-n:n*.14},drawInner:function(r){var h=this,n=h._attrs,i=this._cfg;(!i.attrs||i.hasUpdate)&&(this._assembleFont(),this._setAttrText()),r.font=n.font;var a=n.text;if(!!a){var o=n.textArr,u=n.x,f=n.y;if(r.beginPath(),h.hasStroke()){var v=n.strokeOpacity;!t.isNil(v)&&v!==1&&(r.globalAlpha=v),o?h._drawTextArr(r,!1):r.strokeText(a,u,f),r.globalAlpha=1}if(h.hasFill()){var b=n.fillOpacity;!t.isNil(b)&&b!==1&&(r.globalAlpha=b),o?h._drawTextArr(r,!0):r.fillText(a,u,f)}i.hasUpdate=!1}},_drawTextArr:function(r,h){var n=this._attrs.textArr,i=this._attrs.textBaseline,a=this._attrs.fontSize*1,o=this._getSpaceingY(),u=this._attrs.x,f=this._attrs.y,v=this.getBBox(),b=v.maxY-v.minY,y;t.each(n,function(g,_){y=f+_*(o+a)-b+a,i==="middle"&&(y+=b-a-(b-a)/2),i==="top"&&(y+=b-a),h?r.fillText(g,u,y):r.strokeText(g,u,y)})},measureText:function(){var r=this,h=r._attrs,n=h.text,i=h.font,a=h.textArr,o,u=0;if(!t.isNil(n)){var f=document.createElement("canvas").getContext("2d");return f.save(),f.font=i,a?t.each(a,function(v){o=f.measureText(v).width,u<o&&(u=o),f.restore()}):(u=f.measureText(n).width,f.restore()),u}}}),E.exports=s},function(E,T,e){E.exports={isFunction:e(14),isObject:e(39),isBoolean:e(191),isNil:e(6),isString:e(15),isArray:e(4),isNumber:e(11),isEmpty:e(167),uniqueId:e(194),clone:e(80),deepMix:e(81),assign:e(10),merge:e(81),upperFirst:e(189),each:e(2),isEqual:e(83),toArray:e(57),extend:e(162),augment:e(158),remove:e(156),isNumberEqual:e(55),toRadian:e(172),toDegree:e(170),mod:e(169),clamp:e(84),createDom:e(159),modifyCSS:e(160),requestAnimationFrame:e(161),getRatio:function(){return window.devicePixelRatio?window.devicePixelRatio:2},mat3:e(85),vec2:e(174),vec3:e(175),transform:e(173)}},function(E,T,e){var t=e(2),l=8,s=4;function c(h){var n=[];return t(h,function(i){n=n.concat(i)}),n}function r(h,n){var i;for(i=n;i>0&&h%i!=0;i--);if(i===1)for(i=n;i>0&&(h-1)%i!=0;i--);return i}E.exports=function(h){var n={},i=[],a=h.isRounding,o=c(h.data),u=o.length,f=h.maxCount||l,v;if(a?(v=r(u-1,f-1)+1,v===2?v=f:v<f-s&&(v=f-s)):v=f,!a&&u<=v+v/2)i=[].concat(o);else{for(var b=parseInt(u/(v-1),10),y=o.map(function(x,m){return m%b==0?o.slice(m,m+b):null}).filter(function(x){return x}),g=1,_=y.length;g<_&&(a?g*b<u-b:g<v-1);g++)i.push(y[g][0]);if(o.length){i.unshift(o[0]);var M=o[u-1];i.indexOf(M)===-1&&i.push(M)}}return n.categories=o,n.ticks=i,n}},function(E,T){var e=12;function t(r){var h=1;if(r===Infinity||r===-Infinity)throw new Error("Not support Infinity!");if(r<1){for(var n=0;r<1;)h=h/10,r=r*10,n++;h.toString().length>e&&(h=parseFloat(h.toFixed(n)))}else for(;r>10;)h=h*10,r=r/10;return h}function l(r,h){var n=r.length;if(n===0)return NaN;var i=r[0];if(h<r[0])return NaN;if(h>=r[n-1])return r[n-1];for(var a=1;a<r.length&&!(h<r[a]);a++)i=r[a];return i}function s(r,h){var n=r.length;if(n===0)return NaN;var i;if(h>r[n-1])return NaN;if(h<r[0])return r[0];for(var a=1;a<r.length;a++)if(h<=r[a]){i=r[a];break}return i}var c={snapFactorTo:function(h,n,i){if(isNaN(h))return NaN;var a=1;if(h!==0){h<0&&(a=-1),h=h*a;var o=t(h);a=a*o,h=h/o}i==="floor"?h=c.snapFloor(n,h):i==="ceil"?h=c.snapCeiling(n,h):h=c.snapTo(n,h);var u=parseFloat((h*a).toPrecision(e));if(Math.abs(a)<1&&u.toString().length>e){var f=parseInt(1/a),v=a>0?1:-1;u=h/f*v}return u},snapMultiple:function(h,n,i){var a;return i==="ceil"?a=Math.ceil(h/n):i==="floor"?a=Math.floor(h/n):a=Math.round(h/n),a*n},snapTo:function(h,n){var i=l(h,n),a=s(h,n);if(isNaN(i)||isNaN(a)){if(h[0]>=n)return h[0];var o=h[h.length-1];if(o<=n)return o}return Math.abs(n-i)<Math.abs(a-n)?i:a},snapFloor:function(h,n){return l(h,n)},snapCeiling:function(h,n){return s(h,n)},fixedBase:function(h,n){var i=n.toString(),a=i.indexOf("."),o=i.indexOf("e-");if(a<0&&o<0)return Math.round(h);var u=o>=0?parseInt(i.substr(o+2),10):i.substr(a+1).length;return u>20&&(u=20),parseFloat(h.toFixed(u))}};E.exports=c},function(E,T,e){function t(i,a){i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.__proto__=a}var l=e(26),s=e(151),c=e(2),r=e(11),h=e(15),n=function(i){t(a,i);function a(){return i.apply(this,arguments)||this}var o=a.prototype;return o._initDefaultCfg=function(){i.prototype._initDefaultCfg.call(this),this.type="cat",this.isCategory=!0,this.isRounding=!0},o.init=function(){var f=this,v=f.values,b=f.tickCount;if(c(v,function(_,M){v[M]=_.toString()}),!f.ticks){var y=v;if(b){var g=s({maxCount:b,data:v,isRounding:f.isRounding});y=g.ticks}this.ticks=y}},o.getText=function(f){return this.values.indexOf(f)===-1&&r(f)&&(f=this.values[Math.round(f)]),i.prototype.getText.call(this,f)},o.translate=function(f){var v=this.values.indexOf(f);return v===-1&&r(f)?v=f:v===-1&&(v=NaN),v},o.scale=function(f){var v=this.rangeMin(),b=this.rangeMax(),y;return(h(f)||this.values.indexOf(f)!==-1)&&(f=this.translate(f)),this.values.length>1?y=f/(this.values.length-1):y=f,v+y*(b-v)},o.invert=function(f){if(h(f))return f;var v=this.rangeMin(),b=this.rangeMax();f<v&&(f=v),f>b&&(f=b);var y=(f-v)/(b-v),g=Math.round(y*(this.values.length-1))%this.values.length;return g=g||0,this.values[g]},a}(l);l.Cat=n,E.exports=n},function(E,T,e){var t=e(187),l=e(26);l.Linear=e(51),l.Identity=e(353),l.Cat=e(153),l.Time=e(357),l.TimeCat=e(356),l.Log=e(354),l.Pow=e(355);var s=function(n){if(l.hasOwnProperty(n)){var i=t(n);l[i]=function(a){return new l[n](a)}}};for(var c in l)s(c);var r=["cat","timeCat"];l.isCategory=function(h){return r.indexOf(h)>=0},E.exports=l},function(E,T,e){var t=e(21),l=Array.prototype.splice,s=function(r,h){if(!t(r))return[];for(var n=r?h.length:0,i=n-1;n--;){var a=void 0,o=h[n];(n===i||o!==a)&&(a=o,l.call(r,o,1))}return r};E.exports=s},function(E,T){var e=Array.prototype,t=e.splice,l=e.indexOf,s=e.slice,c=function(h){for(var n=s.call(arguments,1),i=0;i<n.length;i++)for(var a=n[i],o=-1;(o=l.call(h,a))>-1;)t.call(h,o,1);return h};E.exports=c},function(E,T,e){var t=e(2),l=e(53),s=function(r){var h=[];return t(r,function(n){l(h,n)||h.push(n)}),h};E.exports=s},function(E,T,e){var t=e(14),l=e(57),s=e(10),c=function(h){for(var n=l(arguments),i=1;i<n.length;i++){var a=n[i];t(a)&&(a=a.prototype),s(h.prototype,a)}};E.exports=c},function(E,T){var e=document.createElement("table"),t=document.createElement("tr"),l=/^\s*<(\w+|!)[^>]*>/,s={tr:document.createElement("tbody"),tbody:e,thead:e,tfoot:e,td:t,th:t,"*":document.createElement("div")};E.exports=function(r){var h=l.test(r)&&RegExp.$1;h in s||(h="*");var n=s[h];r=r.replace(/(^\s*)|(\s*$)/g,""),n.innerHTML=""+r;var i=n.childNodes[0];return n.removeChild(i),i}},function(E,T){E.exports=function(t,l){if(t)for(var s in l)l.hasOwnProperty(s)&&(t.style[s]=l[s]);return t}},function(E,T){E.exports=function(t){var l=window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(s){return setTimeout(s,16)};return l(t)}},function(E,T,e){var t=e(14),l=e(10),s=function(r,h,n,i){t(h)||(n=h,h=r,r=function(){});var a=Object.create?function(u,f){return Object.create(u,{constructor:{value:f}})}:function(u,f){function v(){}v.prototype=u;var b=new v;return b.constructor=f,b},o=a(h.prototype,r);return r.prototype=l(o,r.prototype),r.superclass=a(h.prototype,h),l(o,n),l(r,i),r};E.exports=s},function(E,T,e){var t=e(2),l=e(4),s=Object.prototype.hasOwnProperty,c=function(h,n){if(!n||!l(h))return h;var i={},a=null;return t(h,function(o){a=n(o),s.call(i,a)?i[a].push(o):i[a]=[o]}),i};E.exports=c},function(E,T,e){var t=e(14),l=e(4),s=e(163),c=function(h,n){if(!n)return{0:h};if(!t(n)){var i=l(n)?n:n.replace(/\s+/g,"").split("*");n=function(u){for(var f="_",v=0,b=i.length;v<b;v++)f+=u[i[v]]&&u[i[v]].toString();return f}}var a=s(h,n);return a};E.exports=c},function(E,T,e){var t=e(164),l=function(c,r){if(!r)return[c];var h=t(c,r),n=[];for(var i in h)n.push(h[i]);return n};E.exports=l},function(E,T,e){var t=e(2),l=e(10),s=e(378),c=e(364),r=e(380),h=e(382),n=e(390),i=e(56),a=e(401),o=e(405),u=e(409),f=e(414),v={DOMUtil:s,DomUtil:s,MatrixUtil:i,PathUtil:o,arrayUtil:c,domUtil:s,eventUtil:r,formatUtil:h,mathUtil:n,matrixUtil:i,objectUtil:a,stringUtil:u,pathUtil:o,typeUtil:f,augment:e(158),clone:e(80),debounce:e(369),deepMix:e(81),each:t,extend:e(162),filter:e(82),group:e(165),groupBy:e(163),groupToMap:e(164),indexOf:e(386),isEmpty:e(167),isEqual:e(83),isEqualWith:e(387),map:e(388),mix:l,pick:e(408),throttle:e(413),toArray:e(57),toString:e(38),uniqueId:e(194)};t([s,c,r,h,n,i,a,o,u,f],function(b){l(v,b)}),E.exports=v},function(E,T,e){var t=e(6),l=e(21),s=e(190),c=e(193),r=Object.prototype.hasOwnProperty;function h(n){if(t(n))return!0;if(l(n))return!n.length;var i=s(n);if(i==="Map"||i==="Set")return!n.size;if(c(n))return!Object.keys(n).length;for(var a in n)if(r.call(n,a))return!1;return!0}E.exports=h},function(E,T,e){var t=e(4),l=e(14),s=e(2),c=function(h,n){if(!!t(h)){var i=h[0],a=void 0;l(n)?a=n(h[0]):a=h[0][n];var o=void 0;return s(h,function(u){l(n)?o=n(u):o=u[n],o>a&&(i=u,a=o)}),i}};E.exports=c},function(E,T){var e=function(l,s){return(l%s+s)%s};E.exports=e},function(E,T){var e=180/Math.PI,t=function(s){return e*s};E.exports=t},function(E,T){E.exports=parseInt},function(E,T){var e=Math.PI/180,t=function(s){return e*s};E.exports=t},function(E,T,e){var t=e(80),l=e(2),s=e(85);E.exports=function(r,h){return r=t(r),l(h,function(n){switch(n[0]){case"t":s.translate(r,r,[n[1],n[2]]);break;case"s":s.scale(r,r,[n[1],n[2]]);break;case"r":s.rotate(r,r,n[1]);break;case"m":s.multiply(r,r,n[1]);break;default:return!1}}),r}},function(E,T,e){var t=e(349),l=e(84);t.angle=function(s,c){var r=t.dot(s,c)/(t.length(s)*t.length(c));return Math.acos(l(r,-1,1))},t.direction=function(s,c){return s[0]*c[1]-c[0]*s[1]},t.angleTo=function(s,c,r){var h=t.angle(s,c),n=t.direction(s,c)>=0;return r?n?Math.PI*2-h:h:n?h:Math.PI*2-h},t.vertical=function(s,c,r){return r?(s[0]=c[1],s[1]=-1*c[0]):(s[0]=-1*c[1],s[1]=c[0]),s},E.exports=t},function(E,T,e){var t=e(350);E.exports=t},function(E,T){E.exports=function(e,t){return e.hasOwnProperty(t)}},function(E,T,e){var t=e(178),l=e(6);function s(c,r){var h=t(r),n=h.length;if(l(c))return!n;for(var i=0;i<n;i+=1){var a=h[i];if(r[a]!==c[a]||!(a in c))return!1}return!0}E.exports=s},function(E,T,e){var t=e(2),l=e(14),s=Object.keys?function(c){return Object.keys(c)}:function(c){var r=[];return t(c,function(h,n){l(c)&&n==="prototype"||r.push(n)}),r};E.exports=s},function(E,T,e){var t=e(2),l=e(14),s=Object.values?function(c){return Object.values(c)}:function(c){var r=[];return t(c,function(h,n){l(c)&&n==="prototype"||r.push(h)}),r};E.exports=s},function(E,T){E.exports=function(t,l){for(var s=[],c=0,r=t.length;r-2*!l>c;c+=2){var h=[{x:+t[c-2],y:+t[c-1]},{x:+t[c],y:+t[c+1]},{x:+t[c+2],y:+t[c+3]},{x:+t[c+4],y:+t[c+5]}];l?c?r-4===c?h[3]={x:+t[0],y:+t[1]}:r-2===c&&(h[2]={x:+t[0],y:+t[1]},h[3]={x:+t[2],y:+t[3]}):h[0]={x:+t[r-2],y:+t[r-1]}:r-4===c?h[3]=h[2]:c||(h[0]={x:+t[c],y:+t[c+1]}),s.push(["C",(-h[0].x+6*h[1].x+h[2].x)/6,(-h[0].y+6*h[1].y+h[2].y)/6,(h[1].x+6*h[2].x-h[3].x)/6,(h[1].y+6*h[2].y-h[3].y)/6,h[2].x,h[2].y])}return s}},function(E,T){var e=/,?([a-z]),?/gi;E.exports=function(l){return l.join(",").replace(e,"$1")}},function(E,T){var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},t=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,l=new RegExp("([a-z])["+t+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+t+"]*,?["+t+"]*)+)","ig"),s=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+t+"]*,?["+t+"]*","ig");E.exports=function(r){if(!r)return null;if((typeof r=="undefined"?"undefined":e(r))===e([]))return r;var h={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(r).replace(l,function(i,a,o){var u=[],f=a.toLowerCase();if(o.replace(s,function(v,b){b&&u.push(+b)}),f==="m"&&u.length>2&&(n.push([a].concat(u.splice(0,2))),f="l",a=a==="m"?"l":"L"),f==="o"&&u.length===1&&n.push([a,u[0]]),f==="r")n.push([a].concat(u));else for(;u.length>=h[f]&&(n.push([a].concat(u.splice(0,h[f]))),!!h[f]););}),n}},function(E,T,e){var t=e(182),l=e(180);function s(c,r,h,n,i){var a=[];if(i===null&&n===null&&(n=h),c=+c,r=+r,h=+h,n=+n,i!==null){var o=Math.PI/180,u=c+h*Math.cos(-n*o),f=c+h*Math.cos(-i*o),v=r+h*Math.sin(-n*o),b=r+h*Math.sin(-i*o);a=[["M",u,v],["A",h,h,0,+(i-n>180),0,f,b]]}else a=[["M",c,r],["m",0,-n],["a",h,n,0,1,1,0,2*n],["a",h,n,0,1,1,0,-2*n],["z"]];return a}E.exports=function(r){if(r=t(r),!r||!r.length)return[["M",0,0]];var h=[],n=0,i=0,a=0,o=0,u=0,f=void 0,v=void 0;r[0][0]==="M"&&(n=+r[0][1],i=+r[0][2],a=n,o=i,u++,h[0]=["M",n,i]);for(var b=r.length===3&&r[0][0]==="M"&&r[1][0].toUpperCase()==="R"&&r[2][0].toUpperCase()==="Z",y,g,_=u,M=r.length;_<M;_++){if(h.push(y=[]),g=r[_],f=g[0],f!==f.toUpperCase())switch(y[0]=f.toUpperCase(),y[0]){case"A":y[1]=g[1],y[2]=g[2],y[3]=g[3],y[4]=g[4],y[5]=g[5],y[6]=+g[6]+n,y[7]=+g[7]+i;break;case"V":y[1]=+g[1]+i;break;case"H":y[1]=+g[1]+n;break;case"R":v=[n,i].concat(g.slice(1));for(var x=2,m=v.length;x<m;x++)v[x]=+v[x]+n,v[++x]=+v[x]+i;h.pop(),h=h.concat(l(v,b));break;case"O":h.pop(),v=s(n,i,g[1],g[2]),v.push(v[0]),h=h.concat(v);break;case"U":h.pop(),h=h.concat(s(n,i,g[1],g[2],g[3])),y=["U"].concat(h[h.length-1].slice(-2));break;case"M":a=+g[1]+n,o=+g[2]+i;break;default:for(var S=1,P=g.length;S<P;S++)y[S]=+g[S]+(S%2?n:i)}else if(f==="R")v=[n,i].concat(g.slice(1)),h.pop(),h=h.concat(l(v,b)),y=["R"].concat(g.slice(-2));else if(f==="O")h.pop(),v=s(n,i,g[1],g[2]),v.push(v[0]),h=h.concat(v);else if(f==="U")h.pop(),h=h.concat(s(n,i,g[1],g[2],g[3])),y=["U"].concat(h[h.length-1].slice(-2));else for(var A=0,O=g.length;A<O;A++)y[A]=g[A];if(f=f.toUpperCase(),f!=="O")switch(y[0]){case"Z":n=+a,i=+o;break;case"H":n=y[1];break;case"V":i=y[1];break;case"M":a=y[y.length-2],o=y[y.length-1];break;default:n=y[y.length-2],i=y[y.length-1]}}return h}},function(E,T,e){var t=e(183),l=function r(h,n,i,a,o,u,f,v,b,y){i===a&&(i+=1);var g=Math.PI*120/180,_=Math.PI/180*(+o||0),M=[],x=void 0,m=void 0,S=void 0,P=void 0,A=void 0,O=function(pt,H,nt){var at=pt*Math.cos(nt)-H*Math.sin(nt),q=pt*Math.sin(nt)+H*Math.cos(nt);return{x:at,y:q}};if(y)m=y[0],S=y[1],P=y[2],A=y[3];else{x=O(h,n,-_),h=x.x,n=x.y,x=O(v,b,-_),v=x.x,b=x.y,h===v&&n===b&&(v+=1,b+=1);var R=(h-v)/2,W=(n-b)/2,F=R*R/(i*i)+W*W/(a*a);F>1&&(F=Math.sqrt(F),i=F*i,a=F*a);var Z=i*i,V=a*a,k=(u===f?-1:1)*Math.sqrt(Math.abs((Z*V-Z*W*W-V*R*R)/(Z*W*W+V*R*R)));P=k*i*W/a+(h+v)/2,A=k*-a*R/i+(n+b)/2,m=Math.asin(((n-A)/a).toFixed(9)),S=Math.asin(((b-A)/a).toFixed(9)),m=h<P?Math.PI-m:m,S=v<P?Math.PI-S:S,m<0&&(m=Math.PI*2+m),S<0&&(S=Math.PI*2+S),f&&m>S&&(m=m-Math.PI*2),!f&&S>m&&(S=S-Math.PI*2)}var Y=S-m;if(Math.abs(Y)>g){var K=S,it=v,ct=b;S=m+g*(f&&S>m?1:-1),v=P+i*Math.cos(S),b=A+a*Math.sin(S),M=r(v,b,i,a,o,0,f,it,ct,[S,K,P,A])}Y=S-m;var ht=Math.cos(m),ut=Math.sin(m),It=Math.cos(S),Nt=Math.sin(S),Lt=Math.tan(Y/4),_t=4/3*i*Lt,mt=4/3*a*Lt,At=[h,n],rt=[h+_t*ut,n-mt*ht],Mt=[v+_t*Nt,b-mt*It],z=[v,b];if(rt[0]=2*At[0]-rt[0],rt[1]=2*At[1]-rt[1],y)return[rt,Mt,z].concat(M);M=[rt,Mt,z].concat(M).join().split(",");for(var $=[],dt=0,et=M.length;dt<et;dt++)$[dt]=dt%2?O(M[dt-1],M[dt],_).y:O(M[dt],M[dt+1],_).x;return $},s=function(h,n,i,a){return[h,n,i,a,i,a]},c=function(h,n,i,a,o,u){var f=1/3,v=2/3;return[f*h+v*i,f*n+v*a,f*o+v*i,f*u+v*a,o,u]};E.exports=function(h,n){var i=t(h),a=n&&t(n),o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},u={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},f=[],v=[],b="",y="",g=void 0,_=function(W,F,Z){var V=void 0,k=void 0;if(!W)return["C",F.x,F.y,F.x,F.y,F.x,F.y];switch(!(W[0]in{T:1,Q:1})&&(F.qx=F.qy=null),W[0]){case"M":F.X=W[1],F.Y=W[2];break;case"A":W=["C"].concat(l.apply(0,[F.x,F.y].concat(W.slice(1))));break;case"S":Z==="C"||Z==="S"?(V=F.x*2-F.bx,k=F.y*2-F.by):(V=F.x,k=F.y),W=["C",V,k].concat(W.slice(1));break;case"T":Z==="Q"||Z==="T"?(F.qx=F.x*2-F.qx,F.qy=F.y*2-F.qy):(F.qx=F.x,F.qy=F.y),W=["C"].concat(c(F.x,F.y,F.qx,F.qy,W[1],W[2]));break;case"Q":F.qx=W[1],F.qy=W[2],W=["C"].concat(c(F.x,F.y,W[1],W[2],W[3],W[4]));break;case"L":W=["C"].concat(s(F.x,F.y,W[1],W[2]));break;case"H":W=["C"].concat(s(F.x,F.y,W[1],F.y));break;case"V":W=["C"].concat(s(F.x,F.y,F.x,W[1]));break;case"Z":W=["C"].concat(s(F.x,F.y,F.X,F.Y));break;default:break}return W},M=function(W,F){if(W[F].length>7){W[F].shift();for(var Z=W[F];Z.length;)f[F]="A",a&&(v[F]="A"),W.splice(F++,0,["C"].concat(Z.splice(0,6)));W.splice(F,1),g=Math.max(i.length,a&&a.length||0)}},x=function(W,F,Z,V,k){W&&F&&W[k][0]==="M"&&F[k][0]!=="M"&&(F.splice(k,0,["M",V.x,V.y]),Z.bx=0,Z.by=0,Z.x=W[k][1],Z.y=W[k][2],g=Math.max(i.length,a&&a.length||0))};g=Math.max(i.length,a&&a.length||0);for(var m=0;m<g;m++){i[m]&&(b=i[m][0]),b!=="C"&&(f[m]=b,m&&(y=f[m-1])),i[m]=_(i[m],o,y),f[m]!=="A"&&b==="C"&&(f[m]="C"),M(i,m),a&&(a[m]&&(b=a[m][0]),b!=="C"&&(v[m]=b,m&&(y=v[m-1])),a[m]=_(a[m],u,y),v[m]!=="A"&&b==="C"&&(v[m]="C"),M(a,m)),x(i,a,o,u,m),x(a,i,u,o,m);var S=i[m],P=a&&a[m],A=S.length,O=a&&P.length;o.x=S[A-2],o.y=S[A-1],o.bx=parseFloat(S[A-4])||o.x,o.by=parseFloat(S[A-3])||o.y,u.bx=a&&(parseFloat(P[O-4])||u.x),u.by=a&&(parseFloat(P[O-3])||u.y),u.x=a&&P[O-2],u.y=a&&P[O-1]}return a?[i,a]:i}},function(E,T,e){var t=e(181);E.exports=function(s,c,r,h,n){if(n)return[["M",+s+ +n,c],["l",r-n*2,0],["a",n,n,0,0,1,n,n],["l",0,h-n*2],["a",n,n,0,0,1,-n,n],["l",n*2-r,0],["a",n,n,0,0,1,-n,-n],["l",0,n*2-h],["a",n,n,0,0,1,n,-n],["z"]];var i=[["M",s,c],["l",r,0],["l",0,h],["l",-r,0],["z"]];return i.parsePathArray=t,i}},function(E,T,e){var t=e(38),l=function(c){return t(c).toLowerCase()};E.exports=l},function(E,T,e){var t=e(38),l=function(c){var r=t(c);return r.charAt(0).toLowerCase()+r.substring(1)};E.exports=l},function(E,T,e){var t=e(38),l=function(c){return t(c).toUpperCase()};E.exports=l},function(E,T,e){var t=e(38),l=function(c){var r=t(c);return r.charAt(0).toUpperCase()+r.substring(1)};E.exports=l},function(E,T){var e={}.toString,t=function(s){return e.call(s).replace(/^\[object /,"").replace(/\]$/,"")};E.exports=t},function(E,T,e){var t=e(17),l=function(c){return t(c,"Boolean")};E.exports=l},function(E,T,e){var t=e(17),l=function(c){return t(c,"Date")};E.exports=l},function(E,T){var e=Object.prototype,t=function(s){var c=s&&s.constructor,r=typeof c=="function"&&c.prototype||e;return s===r};E.exports=t},function(E,T){var e=function(){var t={};return function(l){return l=l||"g",t[l]?t[l]+=1:t[l]=1,l+t[l]}}();E.exports=e},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default={COORD_FUNC_PROPS:["rotate","scale","reflect","transpose"],GEOM_FUNC_PROPS:["position","color","size","shape","opacity","tooltip","style","animate","active","select","sets"]}},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(29),l=r(t),s=e(58),c=r(s);function r(W){return W&&W.__esModule?W:{default:W}}for(var h=[{prop:"onPlotMove",event:"plotmove"},{prop:"onPlotEnter",event:"plotenter"},{prop:"onPlotLeave",event:"plotleave"},{prop:"onPlotClick",event:"plotclick"},{prop:"onPlotDblClick",event:"plotdblclick"},{prop:"onItemSelected",event:"itemselected"},{prop:"onItemUnselected",event:"itemunselected"},{prop:"onItemSelectedChange",event:"itemselectedchange"},{prop:"onTooltipChange",event:"tooltip:change"},{prop:"onTooltipShow",event:"tooltip:show"},{prop:"onTooltipHide",event:"tooltip:hide"}],n=["mouseenter","mousemove","mouseleave","click","dblclick","mousedown","mouseup","touchstart","touchmove","touchend"],i=["Mouseenter","Mousemove","Mouseleave","Click","Dblclick","Mousedown","Mouseup","Touchstart","Touchmove","Touchend"],a=["point","area","line","path","interval","schema","polygon","edge","axis-title","axis-label","axis-ticks","axis-line","axis-grid","legend-title","legend-item","legend-marker","legend-text","guide-text","guide-region","guide-line","guide-image","label"],o=["onPoint","onArea","onLine","onPath","onInterval","onSchema","onPolygon","onEdge","onAxisTitle","onAxisLabel","onAxisTicks","onAxisLine","onAxisGrid","onLegendTitle","onLegendItem","onLegendMarker","onLegendText","onGuideText","onGuideRegion","onGuideLine","onGuideImage","onLabel"],u=[],f=0;f<a.length;f+=1)for(var v=0;v<n.length;v+=1)u.push({prop:""+o[f]+i[v],event:a[f]+":"+n[v]});var b=h.concat(u);function y(){return[{prop:"onMouseEnter",event:"mouseenter"},{prop:"onMouseMove",event:"mousemove"},{prop:"onMouseLeave",event:"mouseleave"},{prop:"onClick",event:"click"},{prop:"onDblClick",event:"dblclick"},{prop:"onMouseDown",event:"mousedown"},{prop:"onMouseUp",event:"mouseup"},{prop:"onTouchStart",event:"touchstart"},{prop:"onTouchMove",event:"touchmove"},{prop:"onTouchEnd",event:"touchend"}]}function g(W){var F=y();return c.default.map(F,function(Z){var V=Z.event;return Z.event=W+":"+V,Z}),F}var _=y(),M={onMouseEnter:l.default.object,onMouseMove:l.default.object,onMouseLeave:l.default.object,onClick:l.default.oneOfType([l.default.object,l.default.func]),onDblClick:l.default.object,onMouseDown:l.default.object,onMouseUp:l.default.object,onTouchStart:l.default.object,onTouchMove:l.default.object,onTouchEnd:l.default.object},x={onMouseEnter:l.default.func,onMouseMove:l.default.func,onMouseLeave:l.default.func,onClick:l.default.func,onDblClick:l.default.func,onMouseDown:l.default.func,onMouseUp:l.default.func,onTouchStart:l.default.func,onTouchMove:l.default.func,onTouchEnd:l.default.func};function m(W){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Z=arguments[2];c.default.each(F,function(V){var k=V.prop,Y=V.event,K=Z[k];if(c.default.isFunction(K))W.on(Y,K);else if(c.default.isObject(K))for(var it in K)K[it]!==void 0&&W.on(it+":"+Y,K[it])})}function S(W,F){m(W,_,F)}function P(W){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Z=arguments[2],V=arguments[3];c.default.each(F,function(k){var Y=k.prop,K=k.event,it=Z[Y],ct=V[Y],ht=void 0;if(!c.default.shallowEqual(it,ct)){if(c.default.isFunction(it)&&c.default.isFunction(ct))W.off(K,it),W.on(K,ct);else if(c.default.isObject(it)&&c.default.isObject(ct)){for(ht in it)Object.prototype.hasOwnProperty.call(it,ht)&&W.off(ht+":"+K,it[ht]);for(ht in ct)Object.prototype.hasOwnProperty.call(ct,ht)&&W.on(ht+":"+K,ct[ht])}}})}function A(W,F,Z){P(W,_,F,Z)}function O(W){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Z=arguments[2];c.default.each(F,function(V){var k=V.prop,Y=V.event,K=Z[k];if(c.default.isFunction(K))W.off(Y,K);else if(c.default.isObject(K))for(var it in K)Object.prototype.hasOwnProperty.call(K,it)&&W.off(it+":"+Y,K[it])})}function R(W,F){O(W,_,F)}T.default={baseEventObjectTypes:M,baseEventFuncTypes:x,genBaseEvents:y,genItemBaseEvents:g,bindEvents:m,bindBaseEvents:S,updateEvents:P,updateBaseEvents:A,unbindEvents:O,unbindBaseEvents:R,chartEvents:b}},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=Object.assign||function(_){for(var M=1;M<arguments.length;M++){var x=arguments[M];for(var m in x)Object.prototype.hasOwnProperty.call(x,m)&&(_[m]=x[m])}return _},l=e(45),s=f(l),c=e(88),r=e(195),h=u(r),n=e(196),i=u(n),a=e(87),o=u(a);function u(_){return _&&_.__esModule?_:{default:_}}function f(_){if(_&&_.__esModule)return _;var M={};if(_!=null)for(var x in _)Object.prototype.hasOwnProperty.call(_,x)&&(M[x]=_[x]);return M.default=_,M}function v(_){if(Array.isArray(_)){for(var M=0,x=Array(_.length);M<_.length;M++)x[M]=_[M];return x}else return Array.from(_)}function b(_,M){var x={};for(var m in _)M.indexOf(m)>=0||!Object.prototype.hasOwnProperty.call(_,m)||(x[m]=_[m]);return x}var y=h.default.COORD_FUNC_PROPS,g=h.default.GEOM_FUNC_PROPS;T.default={createChart:function(M){var x=M.chart,m=x.props.forceFit;x.props.forceFit=!1;var S=new s.Chart(x.props);return x.props.afterChartInitialized&&x.props.afterChartInitialized(S),m&&S.forceFit(),x.g2Instance=S,S},executeChartConfig:function(M,x){var m=x.chart,S=m.props;M.coord("rect",{}),M.source(S.data,S.scale),(!x.facet&&!S.axis||!x.facet||S.axis===!1)&&M.axis(!1),M.legend(!1),M.tooltip(!1),S.filter&&S.filter.forEach(function(P){M.filter(P[0],P[1])}),i.default.bindEvents(M,i.default.chartEvents,S),i.default.bindBaseEvents(M,S)},coord:function(M,x){var m=x.coord;if(!(!m||m.g2Instance)){var S=m.props,P=S.type,A=b(S,["type"]),O=M.coord(P||"rect",c.Util.without(A,y));c.Prop.init(y,A,function(R,W){W==="reflect"?c.Util.each(R,function(F){return O[W](F)}):W==="transpose"?R[0]===!0&&O[W].apply(O,v(R)):O[W].apply(O,v(R))}),m.g2Instance=O}},createLabel:function(M,x){if(!(!x||x.g2Instance)){var m=x.props,S=m.content,P=b(m,["content"]);S&&(c.Util.isArray(S)?x.g2Instance=M.label(S[0],S[1],P):x.g2Instance=M.label(S,P))}},createGeom:function(M,x){if(x.g2Instance){x.label&&this.createLabel(x.g2Instance,x.label);return}var m=x.props,S=M[m.type||"interval"]();m.adjust&&S.adjust(m.adjust),c.Prop.init(g,m,function(P,A){S[A].apply(S,v(P))}),x.g2Instance=S,this.createLabel(S,x.label)},geoms:function(M,x){var m=x.geoms;if(!!m)for(var S in m)Object.prototype.hasOwnProperty.call(m,S)&&this.createGeom(M,m[S])},legends:function(M,x){var m=x.legends;for(var S in m)if(m[S]){var P=m[S];if(P.g2Instance)return;var A=P.props,O=A.name,R=A.visible,W=b(A,["name","visible"]),F=R;Object.prototype.hasOwnProperty.call(P.props,"visible")||(F=!0);var Z=F&&W;P.g2Instance=M.legend.apply(M,v(O?[O,Z]:[Z]))}},tooltip:function(M,x){var m=x.tooltip;!m||m.g2Instance||(m.g2Instance=M.tooltip(t({},m.props)))},createAxis:function(M,x){if(!x.g2Instance){var m=x.props,S=m.name,P=m.visible,A=b(m,["name","visible"]);P||!Object.prototype.hasOwnProperty.call(x.props,"visible")?x.g2Instance=M.axis(S,A):x.g2Instance=M.axis(S,!1)}},axises:function(M,x){var m=x.axises;for(var S in m)m[S]&&this.createAxis(M,m[S])},views:function(M,x){var m=x.views;for(var S in m)m[S]&&this.createView(M,m[S])},createView:function(M,x){if(x.parentInfo.name!=="Facet"){if(x.g2Instance){x.filter&&x.filter.forEach(function(V){x.g2Instance.filter(V[0],V[1])}),this.coord(x.g2Instance,x),this.axises(x.g2Instance,x),this.geoms(x.g2Instance,x),this.guide(x.g2Instance,x.guide);return}var m=x.props,S=m.scale,P=m.data,A=m.instance,O=m.axis,R=m.filter,W=m.geoms,F=b(m,["scale","data","instance","axis","filter","geoms"]),Z=void 0;A?Z=A:Z=M.view(t({},F)),P&&Z.source(P,S),S&&Z.scale(S),R&&R.forEach(function(V){Z.filter(V[0],V[1])}),O===!0||A||Z.axis(!1),x.g2Instance=Z,this.coord(Z,x),this.axises(Z,x),this.geoms(Z,x),this.guide(Z,x.guide)}},facetView:function(M,x){var m=x.props,S=m.scale,P=m.data,A=m.axis,O=m.geoms,R=b(m,["scale","data","axis","geoms"]);P&&M.source(P,S),S&&M.scale(S),A===!1&&M.axis(!1),this.coord(M,x),this.axises(M,x),this.geoms(M,x),this.guide(M,x.guide),o.default.mergeView(x,!0)},guide:function(M,x){if(!!x){var m=x.elements;for(var S in m)if(m[S]){var P=m[S];if(!P.g2Instance){var A=P.props,O=A.type,R=b(A,["type"]);P.g2Instance=M.guide()[P.type](R)}}}},facet:function(M,x){var m=this,S=x.facet;if(!(!S||S.g2Instance)){var P=S.props,A=P.children,O=P.type,R=b(P,["children","type"]);if(!A){M.facet(O,R);return}var W=x.views,F=null;for(var Z in W)if(W[Z]&&W[Z].parentInfo.name==="Facet"&&W[Z].parentInfo.id===S.id){F=W[Z];break}F&&(o.default.mergeView(F,!0),R.eachView=function(V){m.facetView(V,F)},M.facet(O,R))}},synchronizeG2Add:function(M,x){this.coord(M,x),this.axises(M,x),this.legends(M,x),this.tooltip(M,x),this.geoms(M,x),this.facet(M,x),this.views(M,x),this.guide(M,x.guide)},synchronizeG2Views:function(M,x){var m=x.views;for(var S in m)m[S]&&this.synchronizeG2View(m[S].g2Instance,m[S])},synchronizeG2View:function(M,x){M.clear(),this.clearViewG2Instance(x);var m=x.props,S=m.scale,P=m.data,A=m.instance,O=m.axis,R=m.geoms,W=b(m,["scale","data","instance","axis","geoms"]);P&&M.source(P,S),S&&M.scale(S),O===!0||A||M.axis(!1),this.coord(M,x),this.axises(M,x),this.geoms(M,x),this.guide(M,x.guide)},clearViewG2Instance:function(M){M.coord&&delete M.coord.g2Instance,M.axises&&Object.keys(M.axises).forEach(function(x){delete M.axises[x].g2Instance}),M.geoms&&Object.keys(M.geoms).forEach(function(x){delete M.geoms[x].g2Instance,M.geoms[x].label&&delete M.geoms[x].label.g2Instance}),M.guide&&M.guide.elements&&Object.keys(M.guide.elements).forEach(function(x){delete M.guide.elements[x].g2Instance})}}},function(E,T,e){"use strict";e.d(T,"b",function(){return t}),e.d(T,"a",function(){return l});var t=Math.PI/180,l=180/Math.PI},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(449);e.d(T,"easeLinear",function(){return t.a});var l=e(451);e.d(T,"easeQuad",function(){return l.a}),e.d(T,"easeQuadIn",function(){return l.b}),e.d(T,"easeQuadOut",function(){return l.c}),e.d(T,"easeQuadInOut",function(){return l.a});var s=e(446);e.d(T,"easeCubic",function(){return s.a}),e.d(T,"easeCubicIn",function(){return s.b}),e.d(T,"easeCubicOut",function(){return s.c}),e.d(T,"easeCubicInOut",function(){return s.a});var c=e(450);e.d(T,"easePoly",function(){return c.a}),e.d(T,"easePolyIn",function(){return c.b}),e.d(T,"easePolyOut",function(){return c.c}),e.d(T,"easePolyInOut",function(){return c.a});var r=e(452);e.d(T,"easeSin",function(){return r.a}),e.d(T,"easeSinIn",function(){return r.b}),e.d(T,"easeSinOut",function(){return r.c}),e.d(T,"easeSinInOut",function(){return r.a});var h=e(448);e.d(T,"easeExp",function(){return h.a}),e.d(T,"easeExpIn",function(){return h.b}),e.d(T,"easeExpOut",function(){return h.c}),e.d(T,"easeExpInOut",function(){return h.a});var n=e(445);e.d(T,"easeCircle",function(){return n.a}),e.d(T,"easeCircleIn",function(){return n.b}),e.d(T,"easeCircleOut",function(){return n.c}),e.d(T,"easeCircleInOut",function(){return n.a});var i=e(444);e.d(T,"easeBounce",function(){return i.a}),e.d(T,"easeBounceIn",function(){return i.b}),e.d(T,"easeBounceOut",function(){return i.a}),e.d(T,"easeBounceInOut",function(){return i.c});var a=e(443);e.d(T,"easeBack",function(){return a.a}),e.d(T,"easeBackIn",function(){return a.b}),e.d(T,"easeBackOut",function(){return a.c}),e.d(T,"easeBackInOut",function(){return a.a});var o=e(447);e.d(T,"easeElastic",function(){return o.a}),e.d(T,"easeElasticIn",function(){return o.b}),e.d(T,"easeElasticOut",function(){return o.a}),e.d(T,"easeElasticInOut",function(){return o.c})},function(E,T,e){"use strict";var t=e(92);T.a=function(l,s){var c=s?s.length:0,r=l?Math.min(c,l.length):0,h=new Array(r),n=new Array(c),i;for(i=0;i<r;++i)h[i]=e.i(t.a)(l[i],s[i]);for(;i<c;++i)n[i]=s[i];return function(a){for(i=0;i<r;++i)n[i]=h[i](a);return n}}},function(E,T,e){"use strict";var t=e(91);T.a=function(l){var s=l.length;return function(c){var r=Math.floor(((c%=1)<0?++c:c)*s),h=l[(r+s-1)%s],n=l[r%s],i=l[(r+1)%s],a=l[(r+2)%s];return e.i(t.b)((c-r/s)*s,h,n,i,a)}}},function(E,T,e){"use strict";T.a=function(t){return function(){return t}}},function(E,T,e){"use strict";T.a=function(t,l){var s=new Date;return t=+t,l-=t,function(c){return s.setTime(t+l*c),s}}},function(E,T,e){"use strict";var t=e(92);T.a=function(l,s){var c={},r={},h;(l===null||typeof l!="object")&&(l={}),(s===null||typeof s!="object")&&(s={});for(h in s)h in l?c[h]=e.i(t.a)(l[h],s[h]):r[h]=s[h];return function(n){for(h in c)r[h]=c[h](n);return r}}},function(E,T,e){"use strict";e.d(T,"b",function(){return h}),e.d(T,"c",function(){return n});var t=e(12),l=e(91),s=e(201),c=e(41);T.a=function i(a){var o=e.i(c.c)(a);function u(f,v){var b=o((f=e.i(t.e)(f)).r,(v=e.i(t.e)(v)).r),y=o(f.g,v.g),g=o(f.b,v.b),_=e.i(c.a)(f.opacity,v.opacity);return function(M){return f.r=b(M),f.g=y(M),f.b=g(M),f.opacity=_(M),f+""}}return u.gamma=i,u}(1);function r(i){return function(a){var o=a.length,u=new Array(o),f=new Array(o),v=new Array(o),b,y;for(b=0;b<o;++b)y=e.i(t.e)(a[b]),u[b]=y.r||0,f[b]=y.g||0,v[b]=y.b||0;return u=i(u),f=i(f),v=i(v),y.opacity=1,function(g){return y.r=u(g),y.g=f(g),y.b=v(g),y+""}}}var h=r(l.a),n=r(s.a)},function(E,T,e){"use strict";var t=e(59),l=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,s=new RegExp(l.source,"g");function c(h){return function(){return h}}function r(h){return function(n){return h(n)+""}}T.a=function(h,n){var i=l.lastIndex=s.lastIndex=0,a,o,u,f=-1,v=[],b=[];for(h=h+"",n=n+"";(a=l.exec(h))&&(o=s.exec(n));)(u=o.index)>i&&(u=n.slice(i,u),v[f]?v[f]+=u:v[++f]=u),(a=a[0])===(o=o[0])?v[f]?v[f]+=o:v[++f]=o:(v[++f]=null,b.push({i:f,x:e.i(t.a)(a,o)})),i=s.lastIndex;return i<n.length&&(u=n.slice(i),v[f]?v[f]+=u:v[++f]=u),v.length<2?b[0]?r(b[0].x):c(n):(n=b.length,function(y){for(var g=0,_;g<n;++g)v[(_=b[g]).i]=_.x(y);return v.join("")})}},function(E,T,e){"use strict";T.a=c;var t=e(96),l=e(95),s=function(r,h){return(e.i(l.a)(h)?l.b:c)(r,h)};function c(r,h){var n=h?h.length:0,i=r?Math.min(n,r.length):0,a=new Array(i),o=new Array(n),u;for(u=0;u<i;++u)a[u]=e.i(t.a)(r[u],h[u]);for(;u<n;++u)o[u]=h[u];return function(f){for(u=0;u<i;++u)o[u]=a[u](f);return o}}},function(E,T,e){"use strict";var t=e(93);T.a=function(l){var s=l.length;return function(c){var r=Math.floor(((c%=1)<0?++c:c)*s),h=l[(r+s-1)%s],n=l[r%s],i=l[(r+1)%s],a=l[(r+2)%s];return e.i(t.b)((c-r/s)*s,h,n,i,a)}}},function(E,T,e){"use strict";T.a=function(t){return function(){return t}}},function(E,T,e){"use strict";T.a=function(t,l){var s=new Date;return t=+t,l=+l,function(c){return s.setTime(t*(1-c)+l*c),s}}},function(E,T,e){"use strict";var t=e(96);T.a=function(l,s){var c={},r={},h;(l===null||typeof l!="object")&&(l={}),(s===null||typeof s!="object")&&(s={});for(h in s)h in l?c[h]=e.i(t.a)(l[h],s[h]):r[h]=s[h];return function(n){for(h in c)r[h]=c[h](n);return r}}},function(E,T,e){"use strict";var t=e(12),l=e(93),s=e(208),c=e(32);T.a=function i(a){var o=e.i(c.c)(a);function u(f,v){var b=o((f=e.i(t.e)(f)).r,(v=e.i(t.e)(v)).r),y=o(f.g,v.g),g=o(f.b,v.b),_=e.i(c.a)(f.opacity,v.opacity);return function(M){return f.r=b(M),f.g=y(M),f.b=g(M),f.opacity=_(M),f+""}}return u.gamma=i,u}(1);function r(i){return function(a){var o=a.length,u=new Array(o),f=new Array(o),v=new Array(o),b,y;for(b=0;b<o;++b)y=e.i(t.e)(a[b]),u[b]=y.r||0,f[b]=y.g||0,v[b]=y.b||0;return u=i(u),f=i(f),v=i(v),y.opacity=1,function(g){return y.r=u(g),y.g=f(g),y.b=v(g),y+""}}}var h=r(l.a),n=r(s.a)},function(E,T,e){"use strict";var t=e(60),l=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,s=new RegExp(l.source,"g");function c(h){return function(){return h}}function r(h){return function(n){return h(n)+""}}T.a=function(h,n){var i=l.lastIndex=s.lastIndex=0,a,o,u,f=-1,v=[],b=[];for(h=h+"",n=n+"";(a=l.exec(h))&&(o=s.exec(n));)(u=o.index)>i&&(u=n.slice(i,u),v[f]?v[f]+=u:v[++f]=u),(a=a[0])===(o=o[0])?v[f]?v[f]+=o:v[++f]=o:(v[++f]=null,b.push({i:f,x:e.i(t.a)(a,o)})),i=s.lastIndex;return i<n.length&&(u=n.slice(i),v[f]?v[f]+=u:v[++f]=u),v.length<2?b[0]?r(b[0].x):c(n):(n=b.length,function(y){for(var g=0,_;g<n;++g)v[(_=b[g]).i]=_.x(y);return v.join("")})}},function(E,T,e){"use strict";T.a=function(t){return function(){return this.matches(t)}}},function(E,T,e){"use strict";var t=e(18);T.a=function(l){return typeof l=="string"?new t.b([[document.querySelector(l)]],[document.documentElement]):new t.b([[l]],t.c)}},function(E,T,e){"use strict";T.b=s;var t=e(217),l=e(18);T.a=function(){return new l.b(this._enter||this._groups.map(t.a),this._parents)};function s(c,r){this.ownerDocument=c.ownerDocument,this.namespaceURI=c.namespaceURI,this._next=null,this._parent=c,this.__data__=r}s.prototype={constructor:s,appendChild:function(c){return this._parent.insertBefore(c,this._next)},insertBefore:function(c,r){return this._parent.insertBefore(c,r)},querySelector:function(c){return this._parent.querySelector(c)},querySelectorAll:function(c){return this._parent.querySelectorAll(c)}}},function(E,T,e){"use strict";T.a=function(t){return new Array(t.length)}},function(E,T,e){"use strict";T.a=r;var t=e(102);function l(h){return function(){this.style.removeProperty(h)}}function s(h,n,i){return function(){this.style.setProperty(h,n,i)}}function c(h,n,i){return function(){var a=n.apply(this,arguments);a==null?this.style.removeProperty(h):this.style.setProperty(h,a,i)}}T.b=function(h,n,i){return arguments.length>1?this.each((n==null?l:typeof n=="function"?c:s)(h,n,i==null?"":i)):r(this.node(),h)};function r(h,n){return h.style.getPropertyValue(n)||e.i(t.a)(h).getComputedStyle(h,null).getPropertyValue(n)}},function(E,T,e){"use strict";function t(){return[]}T.a=function(l){return l==null?t:function(){return this.querySelectorAll(l)}}},function(E,T,e){"use strict";var t=e(13);T.a=function(l,s){var c=l.__transition,r,h,n=!0,i;if(!!c){s=s==null?null:s+"";for(i in c){if((r=c[i]).name!==s){n=!1;continue}h=r.state>t.a&&r.state<t.b,r.state=t.c,r.timer.stop(),r.on.call(h?"interrupt":"cancel",l,l.__data__,r.index,r.group),delete c[i]}n&&delete l.__transition}}},function(E,T,e){"use strict";var t=e(12),l=e(94);T.a=function(s,c){var r;return(typeof c=="number"?l.b:c instanceof t.f?l.c:(r=e.i(t.f)(c))?(c=r,l.c):l.d)(s,c)}},function(E,T,e){var t;(function(l){"use strict";var s={},c=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,r=/\d\d?/,h=/\d{3}/,n=/\d{4}/,i=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,a=/\[([^]*?)\]/gm,o=function(){};function u(m,S){for(var P=[],A=0,O=m.length;A<O;A++)P.push(m[A].substr(0,S));return P}function f(m){return function(S,P,A){var O=A[m].indexOf(P.charAt(0).toUpperCase()+P.substr(1).toLowerCase());~O&&(S.month=O)}}function v(m,S){for(m=String(m),S=S||2;m.length<S;)m="0"+m;return m}var b=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],y=["January","February","March","April","May","June","July","August","September","October","November","December"],g=u(y,3),_=u(b,3);s.i18n={dayNamesShort:_,dayNames:b,monthNamesShort:g,monthNames:y,amPm:["am","pm"],DoFn:function(S){return S+["th","st","nd","rd"][S%10>3?0:(S-S%10!=10)*S%10]}};var M={D:function(m){return m.getDate()},DD:function(m){return v(m.getDate())},Do:function(m,S){return S.DoFn(m.getDate())},d:function(m){return m.getDay()},dd:function(m){return v(m.getDay())},ddd:function(m,S){return S.dayNamesShort[m.getDay()]},dddd:function(m,S){return S.dayNames[m.getDay()]},M:function(m){return m.getMonth()+1},MM:function(m){return v(m.getMonth()+1)},MMM:function(m,S){return S.monthNamesShort[m.getMonth()]},MMMM:function(m,S){return S.monthNames[m.getMonth()]},YY:function(m){return String(m.getFullYear()).substr(2)},YYYY:function(m){return v(m.getFullYear(),4)},h:function(m){return m.getHours()%12||12},hh:function(m){return v(m.getHours()%12||12)},H:function(m){return m.getHours()},HH:function(m){return v(m.getHours())},m:function(m){return m.getMinutes()},mm:function(m){return v(m.getMinutes())},s:function(m){return m.getSeconds()},ss:function(m){return v(m.getSeconds())},S:function(m){return Math.round(m.getMilliseconds()/100)},SS:function(m){return v(Math.round(m.getMilliseconds()/10),2)},SSS:function(m){return v(m.getMilliseconds(),3)},a:function(m,S){return m.getHours()<12?S.amPm[0]:S.amPm[1]},A:function(m,S){return m.getHours()<12?S.amPm[0].toUpperCase():S.amPm[1].toUpperCase()},ZZ:function(m){var S=m.getTimezoneOffset();return(S>0?"-":"+")+v(Math.floor(Math.abs(S)/60)*100+Math.abs(S)%60,4)}},x={D:[r,function(m,S){m.day=S}],Do:[new RegExp(r.source+i.source),function(m,S){m.day=parseInt(S,10)}],M:[r,function(m,S){m.month=S-1}],YY:[r,function(m,S){var P=new Date,A=+(""+P.getFullYear()).substr(0,2);m.year=""+(S>68?A-1:A)+S}],h:[r,function(m,S){m.hour=S}],m:[r,function(m,S){m.minute=S}],s:[r,function(m,S){m.second=S}],YYYY:[n,function(m,S){m.year=S}],S:[/\d/,function(m,S){m.millisecond=S*100}],SS:[/\d{2}/,function(m,S){m.millisecond=S*10}],SSS:[h,function(m,S){m.millisecond=S}],d:[r,o],ddd:[i,o],MMM:[i,f("monthNamesShort")],MMMM:[i,f("monthNames")],a:[i,function(m,S,P){var A=S.toLowerCase();A===P.amPm[0]?m.isPm=!1:A===P.amPm[1]&&(m.isPm=!0)}],ZZ:[/([\+\-]\d\d:?\d\d|Z)/,function(m,S){S==="Z"&&(S="+00:00");var P=(S+"").match(/([\+\-]|\d\d)/gi),A;P&&(A=+(P[1]*60)+parseInt(P[2],10),m.timezoneOffset=P[0]==="+"?A:-A)}]};x.dd=x.d,x.dddd=x.ddd,x.DD=x.D,x.mm=x.m,x.hh=x.H=x.HH=x.h,x.MM=x.M,x.ss=x.s,x.A=x.a,s.masks={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},s.format=function(m,S,P){var A=P||s.i18n;if(typeof m=="number"&&(m=new Date(m)),Object.prototype.toString.call(m)!=="[object Date]"||isNaN(m.getTime()))throw new Error("Invalid Date in fecha.format");S=s.masks[S]||S||s.masks.default;var O=[];return S=S.replace(a,function(R,W){return O.push(W),"??"}),S=S.replace(c,function(R){return R in M?M[R](m,A):R.slice(1,R.length-1)}),S.replace(/\?\?/g,function(){return O.shift()})},s.parse=function(m,S,P){var A=P||s.i18n;if(typeof S!="string")throw new Error("Invalid format in fecha.parse");if(S=s.masks[S]||S,m.length>1e3)return!1;var O=!0,R={};if(S.replace(c,function(Z){if(x[Z]){var V=x[Z],k=m.search(V[0]);~k?m.replace(V[0],function(Y){return V[1](R,Y,A),m=m.substr(k+Y.length),Y}):O=!1}return x[Z]?"":Z.slice(1,Z.length-1)}),!O)return!1;var W=new Date;R.isPm===!0&&R.hour!=null&&+R.hour!=12?R.hour=+R.hour+12:R.isPm===!1&&+R.hour==12&&(R.hour=0);var F;return R.timezoneOffset!=null?(R.minute=+(R.minute||0)-+R.timezoneOffset,F=new Date(Date.UTC(R.year||W.getFullYear(),R.month||0,R.day||1,R.hour||0,R.minute||0,R.second||0,R.millisecond||0))):F=new Date(R.year||W.getFullYear(),R.month||0,R.day||1,R.hour||0,R.minute||0,R.second||0,R.millisecond||0),F},typeof E!="undefined"&&E.exports?E.exports=s:(t=function(){return s}.call(T,e,T,E),t!==void 0&&(E.exports=t))})(this)},function(E,T,e){"use strict";var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";E.exports=t},function(E,T,e){"use strict";E.exports=e(542)},function(E,T){var e;e=function(){return this}();try{e=e||Function("return this")()||(0,eval)("this")}catch(t){typeof window=="object"&&(e=window)}E.exports=e},function(E,T,e){function t(n,i){n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i}var l=e(33),s=e(2),c=1/2,r=1/2,h=function(n){t(i,n);function i(){return n.apply(this,arguments)||this}var a=i.prototype;return a._initDefaultCfg=function(){this.marginRatio=c,this.dodgeRatio=r,this.adjustNames=["x","y"]},a.getDodgeOffset=function(u,f,v){var b=this,y=u.pre,g=u.next,_=g-y,M=_*b.dodgeRatio/v,x=b.marginRatio*M,m=1/2*(_-v*M-(v-1)*x)+((f+1)*M+f*x)-1/2*M-1/2*_;return(y+g)/2+m},a.processAdjust=function(u){var f=this,v=u.length,b=f.xField;s(u,function(y,g){for(var _=0,M=y.length;_<M;_++){var x=y[_],m=x[b],S={pre:M===1?m-1:m-.5,next:M===1?m+1:m+.5},P=f.getDodgeOffset(S,g,v);x[b]=P}})},i}(l);l.Dodge=h,E.exports=h},function(E,T,e){var t=e(10),l=e(33),s=e(226),c=e(231),r=e(106),h=e(229),n=e(230);t(l.prototype,r),t(s.prototype,r,h),t(c.prototype,n),l.Jitter=e(228),l.Symmetric=e(232),l.Dodge=s,l.Stack=c,E.exports=l},function(E,T,e){function t(i,a){i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.__proto__=a}var l=e(2),s=e(10),c={merge:e(54)},r=e(33),h=e(106),n=function(i){t(a,i);function a(){return i.apply(this,arguments)||this}var o=a.prototype;return o._initDefaultCfg=function(){this.xField=null,this.yField=null,this.adjustNames=["x","y"],this.groupFields=null},o.processAdjust=function(f){var v=this,b=c.merge(f);v.adjDataArray=f,v.mergeData=b,v.adjustData(f,b),v.adjFrames=null,v.mergeData=null},o.getAdjustOffset=function(f,v){var b=Math.random(),y=v-f,g=y*.05;return f+g+y*.9*b},o._adjustGroup=function(f,v,b,y){var g=this,_=g.getAdjustRange(v,b,y);l(f,function(M){M[v]=g.getAdjustOffset(_.pre,_.next)})},o.adjustDim=function(f,v,b){var y=this,g=y.groupData(b,f);l(g,function(_,M){M=parseFloat(M),y._adjustGroup(_,f,M,v)})},a}(r);s(n.prototype,h),r.Jitter=n,E.exports=n},function(E,T,e){var t={merge:e(54),values:e(79)},l=e(165),s=e(2);E.exports={processAdjust:function(r){var h=this,n=t.merge(r),i=h.dodgeBy,a=r;i&&(a=l(n,i)),h.cacheMap={},h.adjDataArray=a,h.mergeData=n,h.adjustData(a,n),h.adjDataArray=null,h.mergeData=null},getDistribution:function(r){var h=this,n=h.adjDataArray,i=h.cacheMap,a=i[r];return a||(a={},s(n,function(o,u){var f=t.values(o,r);f.length||f.push(0),s(f,function(v){a[v]||(a[v]=[]),a[v].push(u)})}),i[r]=a),a},adjustDim:function(r,h,n,i,a){var o=this,u=o.getDistribution(r),f=o.groupData(n,r);s(f,function(v,b){b=parseFloat(b);var y;h.length===1?y={pre:h[0]-1,next:h[0]+1}:y=o.getAdjustRange(r,b,h),s(v,function(g){var _=g[r],M=u[_],x=M.indexOf(a);g[r]=o.getDodgeOffset(y,x,M.length)})})}}},function(E,T){E.exports={_initDefaultCfg:function(){this.xField=null,this.yField=null,this.height=null,this.size=10,this.reverseOrder=!1,this.adjustNames=["y"]},processOneDimStack:function(t){var l=this,s=l.xField,c=l.yField||"y",r=l.height,h={};l.reverseOrder&&(t=t.slice(0).reverse());for(var n=0,i=t.length;n<i;n++)for(var a=t[n],o=0,u=a.length;o<u;o++){var f=a[o],v=f.size||l.size,b=v*2/r,y=f[s];h[y]||(h[y]=b/2),f[c]=h[y],h[y]+=b}},processAdjust:function(t){this.yField?this.processStack(t):this.processOneDimStack(t)}}},function(E,T,e){function t(h,n){h.prototype=Object.create(n.prototype),h.prototype.constructor=h,h.__proto__=n}var l=e(4),s=e(6),c=e(33),r=function(h){t(n,h);function n(){return h.apply(this,arguments)||this}var i=n.prototype;return i._initDefaultCfg=function(){this.xField=null,this.yField=null},i.processAdjust=function(o){this.processStack(o)},i.processStack=function(o){var u=this,f=u.xField,v=u.yField,b=o.length,y={positive:{},negative:{}};u.reverseOrder&&(o=o.slice(0).reverse());for(var g=0;g<b;g++)for(var _=o[g],M=0,x=_.length;M<x;M++){var m=_[M],S=m[f]||0,P=m[v],A=S.toString();if(P=l(P)?P[1]:P,!s(P)){var O=P>=0?"positive":"negative";y[O][A]||(y[O][A]=0),m[v]=[y[O][A],P+y[O][A]],y[O][A]+=P}}},n}(c);c.Stack=r,E.exports=r},function(E,T,e){function t(i,a){i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.__proto__=a}var l=e(2),s=e(168),c=e(4),r={merge:e(54)},h=e(33),n=function(i){t(a,i);function a(){return i.apply(this,arguments)||this}var o=a.prototype;return o._initDefaultCfg=function(){this.xField=null,this.yField=null,this.cacheMax=null,this.adjustNames=["y"],this.groupFields=null},o._getMax=function(f){var v=this,b=v.mergeData,y=s(b,function(M){var x=M[f];return c(x)?Math.max.apply(null,x):x}),g=y[f],_=c(g)?Math.max.apply(null,g):g;return _},o._getXValuesMax=function(){var f=this,v=f.yField,b=f.xField,y={},g=f.mergeData;return l(g,function(_){var M=_[b],x=_[v],m=c(x)?Math.max.apply(null,x):x;y[M]=y[M]||0,y[M]<m&&(y[M]=m)}),y},o.processAdjust=function(f){var v=this,b=r.merge(f);v.mergeData=b,v._processSymmetric(f),v.mergeData=null},o._processSymmetric=function(f){var v=this,b=v.xField,y=v.yField,g=v._getMax(y),_=f[0][0],M;_&&c(_[y])&&(M=v._getXValuesMax()),l(f,function(x){l(x,function(m){var S=m[y],P;if(c(S)){var A=m[b],O=M[A];P=(g-O)/2;var R=[];l(S,function(W){R.push(P+W)}),m[y]=R}else P=(g-S)/2,m[y]=[P,S+P]})})},a}(h);h.Symmetric=n,E.exports=n},function(E,T,e){function t(h,n){h.prototype=Object.create(n.prototype),h.prototype.constructor=h,h.__proto__=n}var l=e(15),s=e(107),c=e(34),r=function(h){t(n,h);function n(a){var o;return o=h.call(this,a)||this,o.names=["color"],o.type="color",o.gradient=null,l(o.values)&&(o.linear=!0),o}var i=n.prototype;return i.getLinearValue=function(o){var u=this.gradient;if(!u){var f=this.values;u=s.gradient(f),this.gradient=u}return u(o)},n}(c);E.exports=r},function(E,T,e){function t(c,r){c.prototype=Object.create(r.prototype),c.prototype.constructor=c,c.__proto__=r}var l=e(34),s=function(c){t(r,c);function r(h){var n;return n=c.call(this,h)||this,n.names=["opacity"],n.type="opacity",n.gradient=null,n}return r}(l);E.exports=s},function(E,T,e){function t(n,i){n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i}var l=e(6),s=e(4),c=e(2),r=e(34),h=function(n){t(i,n);function i(o){var u;return u=n.call(this,o)||this,u.names=["x","y"],u.type="position",u}var a=i.prototype;return a.mapping=function(u,f){var v=this.scales,b=this.coord,y=v[0],g=v[1],_,M,x;if(l(u)||l(f))return[];if(s(f)&&s(u)){_=[],M=[];for(var m=0,S=0,P=u.length,A=f.length;m<P&&S<A;m++,S++)x=b.convertPoint({x:y.scale(u[m]),y:g.scale(f[S])}),_.push(x.x),M.push(x.y)}else if(s(f))u=y.scale(u),M=[],c(f,function(R){R=g.scale(R),x=b.convertPoint({x:u,y:R}),_&&_!==x.x?(s(_)||(_=[_]),_.push(x.x)):_=x.x,M.push(x.y)});else if(s(u))f=g.scale(f),_=[],c(u,function(R){R=y.scale(R),x=b.convertPoint({x:R,y:f}),M&&M!==x.y?(s(M)||(M=[M]),M.push(x.y)):M=x.y,_.push(x.x)});else{u=y.scale(u),f=g.scale(f);var O=b.convertPoint({x:u,y:f});_=O.x,M=O.y}return[_,M]},i}(r);E.exports=h},function(E,T,e){function t(c,r){c.prototype=Object.create(r.prototype),c.prototype.constructor=c,c.__proto__=r}var l=e(34),s=function(c){t(r,c);function r(n){var i;return i=c.call(this,n)||this,i.names=["shape"],i.type="shape",i.gradient=null,i}var h=r.prototype;return h.getLinearValue=function(i){var a=this.values,o=Math.round((a.length-1)*i);return a[o]},r}(l);E.exports=s},function(E,T,e){function t(c,r){c.prototype=Object.create(r.prototype),c.prototype.constructor=c,c.__proto__=r}var l=e(34),s=function(c){t(r,c);function r(h){var n;return n=c.call(this,h)||this,n.names=["size"],n.type="size",n.gradient=null,n}return r}(l);E.exports=s},function(E,T,e){function t(u){return function(){var f=r(u),v;if(c()){var b=r(this).constructor;v=Reflect.construct(f,arguments,b)}else v=f.apply(this,arguments);return l(this,v)}}function l(u,f){return f&&(typeof f=="object"||typeof f=="function")?f:s(u)}function s(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(u){return!1}}function r(u){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(v){return v.__proto__||Object.getPrototypeOf(v)},r(u)}function h(u,f){u.prototype=Object.create(f.prototype),u.prototype.constructor=u,u.__proto__=f}var n=e(3),i=e(35),a=n.MatrixUtil.vec2,o=function(u){h(v,u);var f=t(v);function v(){return u.apply(this,arguments)||this}var b=v.prototype;return b.getDefaultCfg=function(){var g=u.prototype.getDefaultCfg.call(this);return n.mix({},g,{type:"circle",tickInterval:null,startAngle:-Math.PI/2,endAngle:Math.PI*3/2,line:{lineWidth:1,stroke:"#C0D0E0"},tickLine:{lineWidth:1,stroke:"#C0D0E0",length:5},_labelOffset:5})},b.parseTick=function(g,_,M){return{text:g,value:_/M}},b._getCirclePoint=function(g,_){var M=this,x=M.get("center");return _=_||M.get("radius"),{x:x.x+Math.cos(g)*_,y:x.y+Math.sin(g)*_}},b.getTickPoint=function(g){var _=this,M=_.get("startAngle"),x=_.get("endAngle"),m=M+(x-M)*g;return _._getCirclePoint(m)},b.getSideVector=function(g,_){var M=this,x=M.get("center"),m=[_.x-x.x,_.y-x.y];if(!n.isNil(g)){var S=a.length(m);a.scale(m,m,g/S)}return m},b.getSidePoint=function(g,_){var M=this,x=M.getSideVector(_,g);return{x:g.x+x[0],y:g.y+x[1]}},b.getTickEnd=function(g,_){var M=this,x=M.get("tickLine");return _=_||x.length,M.getSidePoint(g,_)},b.getTextAnchor=function(g){var _;return n.snapEqual(g[0],0)?_="center":g[0]>0?_="left":g[0]<0&&(_="right"),_},b.getLinePath=function(){var g=this,_=g.get("center"),M=_.x,x=_.y,m=g.get("radius"),S=m,P=g.get("startAngle"),A=g.get("endAngle"),O=g.get("inner"),R=[];if(Math.abs(A-P)===Math.PI*2)R=[["M",M,x],["m",0,-S],["a",m,S,0,1,1,0,2*S],["a",m,S,0,1,1,0,-2*S],["z"]];else{var W=g._getCirclePoint(P),F=g._getCirclePoint(A),Z=Math.abs(A-P)>Math.PI?1:0,V=P>A?0:1;if(!O)R=[["M",M,x],["L",W.x,W.y],["A",m,S,0,Z,V,F.x,F.y],["L",M,x]];else{var k=g.getSideVector(O*m,W),Y=g.getSideVector(O*m,F),K={x:k[0]+M,y:k[1]+x},it={x:Y[0]+M,y:Y[1]+x};R=[["M",K.x,K.y],["L",W.x,W.y],["A",m,S,0,Z,V,F.x,F.y],["L",it.x,it.y],["A",m*O,S*O,0,Z,Math.abs(V-1),K.x,K.y]]}}return R},b.addLabel=function(g,_,M){var x=this,m=x.get("label").offset||x.get("_labelOffset")||.001;_=x.getSidePoint(_,m),u.prototype.addLabel.call(this,g,_,M)},b.autoRotateLabels=function(){var g=this,_=g.get("ticks"),M=g.get("labelRenderer");if(M&&_.length>12){var x=g.get("radius"),m=g.get("startAngle"),S=g.get("endAngle"),P=S-m,A=P/(_.length-1),O=Math.sin(A/2)*x*2,R=g.getMaxLabelWidth(M);n.each(M.get("group").get("children"),function(W,F){var Z=_[F],V=Z.value*P+m,k=V%(Math.PI*2);R<O?(k<=0&&(V=V+Math.PI),k>Math.PI&&(V=V-Math.PI),V=V-Math.PI/2,W.attr("textAlign","center")):k>Math.PI/2?V=V-Math.PI:k<Math.PI/2*-1&&(V=V+Math.PI),W.rotateAtStart(V)})}},v}(i);E.exports=o},function(E,T,e){function t(v){return function(){var b=r(v),y;if(c()){var g=r(this).constructor;y=Reflect.construct(b,arguments,g)}else y=b.apply(this,arguments);return l(this,y)}}function l(v,b){return b&&(typeof b=="object"||typeof b=="function")?b:s(v)}function s(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(v){return!1}}function r(v){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(y){return y.__proto__||Object.getPrototypeOf(y)},r(v)}function h(v,b){v.prototype=Object.create(b.prototype),v.prototype.constructor=v,v.__proto__=b}var n=e(3),i=e(35),a=n.MatrixUtil,o=n.PathUtil,u=a.vec2,f=function(v){h(y,v);var b=t(y);function y(){return v.apply(this,arguments)||this}var g=y.prototype;return g.getDefaultCfg=function(){var M=v.prototype.getDefaultCfg.call(this);return n.mix({},M,{inner:0,type:"helix",line:{lineWidth:1,stroke:"#C0D0E0"},tickLine:{lineWidth:1,stroke:"#C0D0E0",length:5},startAngle:1.25*Math.PI,endAngle:7.25*Math.PI,a:0,center:null,axisStart:null,crp:[]})},g.getLinePath=function(){var M=this,x=M.get("crp"),m=M.get("axisStart"),S=o.catmullRomToBezier(x);return S.unshift(["M",m.x,m.y]),S},g.getTickPoint=function(M){var x=this,m=x.get("startAngle"),S=x.get("endAngle"),P=m+(S-m)*M;return x._getHelixPoint(P)},g._getHelixPoint=function(M){var x=this,m=x.get("center"),S=x.get("a"),P=S*M+x.get("inner");return{x:m.x+Math.cos(M)*P,y:m.y+Math.sin(M)*P}},g.getSideVector=function(M,x){var m=this,S=m.get("center"),P=[x.x-S.x,x.y-S.y];if(M){var A=u.length(P);u.scale(P,P,M/A)}return P},g.getSidePoint=function(M,x){var m=this,S=m.getSideVector(x,M);return{x:M.x+S[0],y:M.y+S[1]}},g.getTickEnd=function(M,x){var m=this,S=m.get("tickLine");return x=x||S.length,m.getSidePoint(M,x)},y}(i);E.exports=f},function(E,T,e){var t=e(35);t.Base=t,t.Circle=e(238),t.Grid=e(108),t.Helix=e(239),t.Line=e(241),t.Polyline=e(242),E.exports=t},function(E,T,e){function t(f){return function(){var v=r(f),b;if(c()){var y=r(this).constructor;b=Reflect.construct(v,arguments,y)}else b=v.apply(this,arguments);return l(this,b)}}function l(f,v){return v&&(typeof v=="object"||typeof v=="function")?v:s(f)}function s(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(f){return!1}}function r(f){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)},r(f)}function h(f,v){f.prototype=Object.create(v.prototype),f.prototype.constructor=f,f.__proto__=v}var n=e(35),i=e(3),a=i.MatrixUtil,o=a.vec2,u=function(f){h(b,f);var v=t(b);function b(){return f.apply(this,arguments)||this}var y=b.prototype;return y.getDefaultCfg=function(){var _=f.prototype.getDefaultCfg.call(this);return i.mix({},_,{x:null,y:null,line:{lineWidth:1,stroke:"#C0D0E0"},tickLine:{lineWidth:1,stroke:"#C0D0E0",length:5},isVertical:!1,start:null,end:null})},y._getAvgLabelLength=function(_){var M=_.get("group").get("children");return M[1].attr("x")-M[0].attr("x")},y._getAvgLabelHeightSpace=function(_){var M=_.get("group").get("children");return M[1].attr("y")-M[0].attr("y")},y.getSideVector=function(_){var M=this,x=M.get("isVertical"),m=M.get("factor");if(!i.isNumber(_))return[0,0];var S=M.get("start"),P=M.get("end"),A=M.getAxisVector(),O=o.normalize([],A),R=!1;(x&&S.y<P.y||!x&&S.x>P.x)&&(R=!0);var W=o.vertical([],O,R);return o.scale([],W,_*m)},y.getAxisVector=function(){var _=this.get("start"),M=this.get("end");return[M.x-_.x,M.y-_.y]},y.getLinePath=function(){var _=this,M=_.get("start"),x=_.get("end"),m=[];return m.push(["M",M.x,M.y]),m.push(["L",x.x,x.y]),m},y.getTickEnd=function(_,M){var x=this,m=x.getSideVector(M);return{x:_.x+m[0],y:_.y+m[1]}},y.getTickPoint=function(_){var M=this,x=M.get("start"),m=M.get("end"),S=m.x-x.x,P=m.y-x.y;return{x:x.x+S*_,y:x.y+P*_}},y.renderTitle=function(){var _=this,M=_.get("title"),x=_.getTickPoint(.5),m=M.offset;if(i.isNil(m)){m=20;var S=_.get("labelsGroup");if(S){var P=_.getMaxLabelWidth(S),A=_.get("label").offset||_.get("_labelOffset");m+=P+A}}var O=M.textStyle,R=i.mix({},O);if(M.text){var W=_.getAxisVector();if(M.autoRotate&&i.isNil(O.rotate)){var F=0;if(!i.snapEqual(W[1],0)){var Z=[1,0],V=[W[0],W[1]];F=o.angleTo(V,Z,!0)}R.rotate=F*(180/Math.PI)}else i.isNil(O.rotate)||(R.rotate=O.rotate/180*Math.PI);var k=_.getSideVector(m),Y,K=M.position;K==="start"?Y={x:this.get("start").x+k[0],y:this.get("start").y+k[1]}:K==="end"?Y={x:this.get("end").x+k[0],y:this.get("end").y+k[1]}:Y={x:x.x+k[0],y:x.y+k[1]},R.x=Y.x,R.y=Y.y,R.text=M.text;var it=_.get("group"),ct=it.addShape("Text",{zIndex:2,attrs:R});ct.name="axis-title",_.get("appendInfo")&&ct.setSilent("appendInfo",_.get("appendInfo"))}},y.autoRotateLabels=function(){var _=this,M=_.get("labelRenderer"),x=_.get("title");if(M){var m=M.get("group"),S=m.get("children"),P=_.get("label").offset,A=12,O=x?x.offset:48;if(O<0)return;var R=_.getAxisVector(),W,F;if(i.snapEqual(R[0],0)&&x&&x.text)F=_.getMaxLabelWidth(M),F>O-P-A&&(W=Math.acos((O-P-A)/F)*-1);else if(i.snapEqual(R[1],0)&&S.length>1){var Z=Math.abs(_._getAvgLabelLength(M));F=_.getMaxLabelWidth(M),F>Z&&(W=Math.asin((O-P-A)*1.25/F))}if(W){var V=_.get("factor");i.each(S,function(k){k.rotateAtStart(W),i.snapEqual(R[1],0)&&(V>0?k.attr("textAlign","left"):k.attr("textAlign","right"))})}}},y.autoHideLabels=function(){var _=this,M=_.get("labelRenderer"),x,m,S=8;if(M){var P=M.get("group"),A=P.get("children"),O=_.getAxisVector();if(A.length<2)return;if(i.snapEqual(O[0],0)){var R=_.getMaxLabelHeight(M)+S,W=Math.abs(_._getAvgLabelHeightSpace(M));R>W&&(x=R,m=W)}else if(i.snapEqual(O[1],0)&&A.length>1){var F=_.getMaxLabelWidth(M)+S,Z=Math.abs(_._getAvgLabelLength(M));F>Z&&(x=F,m=Z)}if(x&&m){var V=Math.ceil(x/m);i.each(A,function(k,Y){Y%V!=0&&k.attr("text","")})}}},b}(n);E.exports=u},function(E,T,e){function t(v){return function(){var b=r(v),y;if(c()){var g=r(this).constructor;y=Reflect.construct(b,arguments,g)}else y=b.apply(this,arguments);return l(this,y)}}function l(v,b){return b&&(typeof b=="object"||typeof b=="function")?b:s(v)}function s(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(v){return!1}}function r(v){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(y){return y.__proto__||Object.getPrototypeOf(y)},r(v)}function h(v,b){v.prototype=Object.create(b.prototype),v.prototype.constructor=v,v.__proto__=b}var n=e(3),i=e(35),a=n.MatrixUtil,o=n.PathUtil,u=a.vec2,f=function(v){h(y,v);var b=t(y);function y(){return v.apply(this,arguments)||this}var g=y.prototype;return g.getDefaultCfg=function(){var M=v.prototype.getDefaultCfg.call(this);return n.mix({},M,{type:"polyline"})},g.getLinePath=function(){var M=this,x=M.get("tickPoints"),m=M.get("start"),S=M.get("end"),P=[];P.push(m.x),P.push(m.y),n.each(x,function(O){P.push(O.x),P.push(O.y)}),P.push(S.x),P.push(S.y);var A=o.catmullRomToBezier(P);return A.unshift(["M",m.x,m.y]),A},g.getTickPoint=function(M,x){var m=this.get("tickPoints");return m[x]},g.getTickEnd=function(M,x,m){var S=this,P=S.get("tickLine"),A=x||P.length,O=S.getSideVector(A,M,m);return{x:M.x+O[0],y:M.y+O[1]}},g.getSideVector=function(M,x,m){var S=this,P;if(m===0){if(P=S.get("start"),P.x===x.x&&P.y===x.y)return[0,0]}else{var A=S.get("tickPoints");P=A[m-1]}var O=[x.x-P.x,x.y-P.y],R=u.normalize([],O),W=u.vertical([],R,!1);return u.scale([],W,M)},y}(i);E.exports=f},function(E,T,e){function t(v){return function(){var b=r(v),y;if(c()){var g=r(this).constructor;y=Reflect.construct(b,arguments,g)}else y=b.apply(this,arguments);return l(this,y)}}function l(v,b){return b&&(typeof b=="object"||typeof b=="function")?b:s(v)}function s(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(v){return!1}}function r(v){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(y){return y.__proto__||Object.getPrototypeOf(y)},r(v)}function h(v,b){v.prototype=Object.create(b.prototype),v.prototype.constructor=v,v.__proto__=b}var n=e(3),i=e(20),a=Math.PI,o=Math.atan;function u(v,b){var y=v.x-b.x,g=v.y-b.y,_;return g===0?y<0?_=a/2:_=270*a/180:y>=0&&g>0?_=a*2-o(y/g):y<=0&&g<0?_=a-o(y/g):y>0&&g<0?_=a+o(-y/g):y<0&&g>0&&(_=o(y/-g)),_}var f=function(v){h(y,v);var b=t(y);function y(){return v.apply(this,arguments)||this}var g=y.prototype;return g.getDefaultCfg=function(){var M=v.prototype.getDefaultCfg.call(this);return n.mix({},M,{name:"arc",start:null,end:null,style:{stroke:"#999",lineWidth:1}})},g.render=function(M,x){var m=this,S=m.parsePoint(M,m.get("start")),P=m.parsePoint(M,m.get("end"));if(!(!S||!P)){var A=M.getCenter(),O=Math.sqrt((S.x-A.x)*(S.x-A.x)+(S.y-A.y)*(S.y-A.y)),R,W=u(S,A),F=u(P,A);if(F<W&&(F+=a*2),n.isNumberEqual(S.x,P.x)&&n.isNumberEqual(S.y,P.y)&&(m.get("start")[0]!==m.get("end")[0]||m.get("start")[1]!==m.get("end")[1]))R=[["M",S.x,S.y],["A",O,O,0,1,1,2*A.x-S.x,2*A.y-S.y],["A",O,O,0,1,1,S.x,S.y]];else{var Z=(F-W)%(a*2),V=Z>a?1:0;R=[["M",S.x,S.y],["A",O,O,0,V,1,P.x,P.y]]}var k=x.addShape("path",{zIndex:m.get("zIndex"),attrs:n.mix({path:R},m.get("style"))});k.name="guide-arc",m.get("appendInfo")&&k.setSilent("appendInfo",m.get("appendInfo")),m.set("el",k)}},y}(i);E.exports=f},function(E,T,e){function t(o){return function(){var u=r(o),f;if(c()){var v=r(this).constructor;f=Reflect.construct(u,arguments,v)}else f=u.apply(this,arguments);return l(this,f)}}function l(o,u){return u&&(typeof u=="object"||typeof u=="function")?u:s(o)}function s(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}function r(o){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)},r(o)}function h(o,u){o.prototype=Object.create(u.prototype),o.prototype.constructor=o,o.__proto__=u}var n=e(3),i=e(20),a=function(o){h(f,o);var u=t(f);function f(){return o.apply(this,arguments)||this}var v=f.prototype;return v.getDefaultCfg=function(){var y=o.prototype.getDefaultCfg.call(this);return n.mix({},y,{name:"dataMarker",zIndex:1,top:!0,position:null,style:{point:{r:3,fill:"#FFFFFF",stroke:"#1890FF",lineWidth:2},line:{stroke:"#A3B1BF",lineWidth:1},text:{fill:"#000000",opacity:.65,fontSize:12,textAlign:"start"}},display:{point:!0,line:!0,text:!0},lineLength:20,direction:"upward",autoAdjust:!0})},v.render=function(y,g){var _=this,M=_.parsePoint(y,_.get("position"));if(!!M){var x=g.addGroup();x.name="guide-data-marker";var m=_._getElementPosition(M),S=_.get("display"),P,A;if(S.line){var O=m.line;P=_._drawLine(O,x)}if(S.text&&_.get("content")){var R=m.text;A=_._drawText(R,x)}if(S.point){var W=m.point;_._drawPoint(W,x)}if(_.get("autoAdjust")){var F=x.getBBox(),Z=F.minX,V=F.minY,k=F.maxX,Y=F.maxY,K=y.start,it=y.end;if(A){Z<=K.x&&A.attr("textAlign","start"),k>=it.x&&A.attr("textAlign","end");var ct=_.get("direction");if(ct==="upward"&&V<=it.y||ct!=="upward"&&Y>=K.y){var ht,ut;ct==="upward"&&V<=it.y?(ht="top",ut=1):(ht="bottom",ut=-1),A.attr("textBaseline",ht);var It=0;if(_.get("display").line){It=_.get("lineLength");var Nt=[["M",M.x,M.y],["L",M.x,M.y+It*ut]];P.attr("path",Nt)}var Lt=M.y+(It+2)*ut;A.attr("y",Lt)}}}_.get("appendInfo")&&x.setSilent("appendInfo",_.get("appendInfo")),_.set("el",x)}},v._getElementPosition=function(y){var g=this,_=y.x,M=y.y,x=g.get("display").line?g.get("lineLength"):0,m=g.get("direction"),S=g.get("style").text;S.textBaseline=m==="upward"?"bottom":"top";var P=m==="upward"?-1:1,A={x:_,y:M},O={x:_,y:M},R={x:_,y:x*P+M},W={x:_,y:(x+2)*P+M};return{point:A,line:[O,R],text:W}},v._drawLine=function(y,g){var _=this,M=_.get("style").line,x=[["M",y[0].x,y[0].y],["L",y[1].x,y[1].y]],m=g.addShape("path",{attrs:n.mix({path:x},M)});return m},v._drawText=function(y,g){var _=this,M=this.get("style").text,x=g.addShape("text",{attrs:n.mix({text:_.get("content")},M,y)});return x},v._drawPoint=function(y,g){var _=this,M=_.get("style").point,x=g.addShape("circle",{attrs:n.mix({},M,y)});return x},f}(i);E.exports=a},function(E,T,e){function t(u){return function(){var f=r(u),v;if(c()){var b=r(this).constructor;v=Reflect.construct(f,arguments,b)}else v=f.apply(this,arguments);return l(this,v)}}function l(u,f){return f&&(typeof f=="object"||typeof f=="function")?f:s(u)}function s(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(u){return!1}}function r(u){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(v){return v.__proto__||Object.getPrototypeOf(v)},r(u)}function h(u,f){u.prototype=Object.create(f.prototype),u.prototype.constructor=u,u.__proto__=f}var n=e(3),i=e(109),a=e(20),o=function(u){h(v,u);var f=t(v);function v(){return u.apply(this,arguments)||this}var b=v.prototype;return b.getDefaultCfg=function(){var g=u.prototype.getDefaultCfg.call(this);return n.mix({},g,{name:"dataRegion",start:null,end:null,content:"",style:{region:{lineWidth:0,fill:"#000000",opacity:.04},text:{textAlign:"center",textBaseline:"bottom",fontSize:12,fill:"rgba(0, 0, 0, .65)"}}})},b.render=function(g,_,M){var x=this,m=x.get("lineLength")||0,S=x._getRegionData(g,M);if(!!S.length){var P=x._getBBox(S),A=[];A.push(["M",S[0].x,P.yMin-m]);for(var O=0,R=S.length;O<R;O++){var W=["L",S[O].x,S[O].y];A.push(W)}A.push(["L",S[S.length-1].x,P.yMin-m]);var F=x.get("style"),Z=F.region,V=F.text,k=_.addGroup();k.name="guide-data-region",k.addShape("path",{attrs:n.mix({path:A},Z)});var Y=x.get("content");Y&&k.addShape("Text",{attrs:n.mix({x:(P.xMin+P.xMax)/2,y:P.yMin-m,text:Y},V)}),x.get("appendInfo")&&k.setSilent("appendInfo",x.get("appendInfo")),x.set("el",k)}},b._getRegionData=function(g,_){for(var M=this,x=M.get("start"),m=M.get("end"),S=i.getFirstScale(M.get("xScales")).field,P=i.getFirstScale(M.get("yScales")).field,A=n.isArray(x)?x[0]:x[S],O=n.isArray(m)?m[0]:m[S],R,W=[],F=0,Z=_.length;F<Z;F++){var V=_[F];if(V[S]===A&&(R=F),F>=R){var k=M.parsePoint(g,[V[S],V[P]]);k&&W.push(k)}if(V[S]===O)break}return W},b._getBBox=function(g){for(var _=[],M=[],x=0;x<g.length;x++)_.push(g[x].x),M.push(g[x].y);var m=n.arrayUtil.getRange(_),S=n.arrayUtil.getRange(M);return{xMin:m.min,xMax:m.max,yMin:S.min,yMax:S.max}},v}(a);E.exports=o},function(E,T,e){function t(u){return function(){var f=r(u),v;if(c()){var b=r(this).constructor;v=Reflect.construct(f,arguments,b)}else v=f.apply(this,arguments);return l(this,v)}}function l(u,f){return f&&(typeof f=="object"||typeof f=="function")?f:s(u)}function s(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(u){return!1}}function r(u){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(v){return v.__proto__||Object.getPrototypeOf(v)},r(u)}function h(u,f){u.prototype=Object.create(f.prototype),u.prototype.constructor=u,u.__proto__=f}var n=e(3),i=n.DomUtil,a=e(20),o=function(u){h(v,u);var f=t(v);function v(){return u.apply(this,arguments)||this}var b=v.prototype;return b.getDefaultCfg=function(){var g=u.prototype.getDefaultCfg.call(this);return n.mix({},g,{name:"html",zIndex:7,position:null,alignX:"middle",alignY:"middle",offsetX:null,offsetY:null,html:null})},b.render=function(g,_){var M=this,x=M.parsePoint(g,M.get("position"));if(!!x){var m=_.get("canvas").get("el").parentNode,S=i.createDom('<div class="g-guide"></div>');m.appendChild(S);var P=M.get("htmlContent")||M.get("html");if(n.isFunction(P)){var A=M.get("xScales"),O=M.get("yScales");P=P(A,O)}var R=i.createDom(P);S.appendChild(R),i.modifyCSS(S,{position:"absolute"}),M._setDomPosition(S,R,x),M.set("el",S)}},b._setDomPosition=function(g,_,M){var x=this,m=x.get("alignX"),S=x.get("alignY"),P=i.getOuterWidth(_),A=i.getOuterHeight(_),O={x:M.x,y:M.y};m==="middle"&&S==="top"?O.x-=Math.round(P/2):m==="middle"&&S==="bottom"?(O.x-=Math.round(P/2),O.y-=Math.round(A)):m==="left"&&S==="bottom"?O.y-=Math.round(A):m==="left"&&S==="middle"?O.y-=Math.round(A/2):m==="left"&&S==="top"?(O.x=M.x,O.y=M.y):m==="right"&&S==="bottom"?(O.x-=Math.round(P),O.y-=Math.round(A)):m==="right"&&S==="middle"?(O.x-=Math.round(P),O.y-=Math.round(A/2)):m==="right"&&S==="top"?O.x-=Math.round(P):(O.x-=Math.round(P/2),O.y-=Math.round(A/2));var R=x.get("offsetX");R&&(O.x+=R);var W=x.get("offsetY");W&&(O.y+=W),i.modifyCSS(g,{top:Math.round(O.y)+"px",left:Math.round(O.x)+"px",visibility:"visible",zIndex:x.get("zIndex")})},b.clear=function(){var g=this,_=g.get("el");_&&_.parentNode&&_.parentNode.removeChild(_)},v}(a);E.exports=o},function(E,T,e){function t(o){return function(){var u=r(o),f;if(c()){var v=r(this).constructor;f=Reflect.construct(u,arguments,v)}else f=u.apply(this,arguments);return l(this,f)}}function l(o,u){return u&&(typeof u=="object"||typeof u=="function")?u:s(o)}function s(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}function r(o){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)},r(o)}function h(o,u){o.prototype=Object.create(u.prototype),o.prototype.constructor=o,o.__proto__=u}var n=e(3),i=e(20),a=function(o){h(f,o);var u=t(f);function f(){return o.apply(this,arguments)||this}var v=f.prototype;return v.getDefaultCfg=function(){var y=o.prototype.getDefaultCfg.call(this);return n.mix({},y,{type:"image",start:null,end:null,src:null,offsetX:null,offsetY:null})},v.render=function(y,g){var _=this,M=_.parsePoint(y,_.get("start"));if(!!M){var x={x:M.x,y:M.y};if(x.img=_.get("src"),!_.get("end"))x.width=_.get("width")||32,x.height=_.get("height")||32;else{var m=_.parsePoint(y,_.get("end"));if(!m)return;x.width=m.x-M.x,x.height=m.y-M.y}_.get("offsetX")&&(x.x+=_.get("offsetX")),_.get("offsetY")&&(x.y+=_.get("offsetY"));var S=g.addShape("Image",{zIndex:1,attrs:x});S.name="guide-image",_.get("appendInfo")&&S.setSilent("appendInfo",_.get("appendInfo")),_.set("el",S)}},f}(i);E.exports=a},function(E,T,e){E.exports={Guide:e(20),Arc:e(243),DataMarker:e(244),DataRegion:e(245),Html:e(246),Image:e(247),Line:e(249),Region:e(250),Text:e(251)}},function(E,T,e){function t(v){return function(){var b=r(v),y;if(c()){var g=r(this).constructor;y=Reflect.construct(b,arguments,g)}else y=b.apply(this,arguments);return l(this,y)}}function l(v,b){return b&&(typeof b=="object"||typeof b=="function")?b:s(v)}function s(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(v){return!1}}function r(v){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(y){return y.__proto__||Object.getPrototypeOf(y)},r(v)}function h(v,b){v.prototype=Object.create(b.prototype),v.prototype.constructor=v,v.__proto__=b}var n=e(3),i=e(20),a=n.MatrixUtil.vec2,o=e(19),u=o.FONT_FAMILY,f=function(v){h(y,v);var b=t(y);function y(){return v.apply(this,arguments)||this}var g=y.prototype;return g.getDefaultCfg=function(){var M=v.prototype.getDefaultCfg.call(this);return n.mix({},M,{name:"line",start:null,end:null,lineStyle:{stroke:"#000",lineWidth:1},text:{position:"end",autoRotate:!0,style:{fill:"#999",fontSize:12,fontWeight:500,fontFamily:u},content:null}})},g.render=function(M,x){var m=this,S=m.parsePoint(M,m.get("start")),P=m.parsePoint(M,m.get("end"));if(!(!S||!P)){var A=x.addGroup({viewId:x.get("viewId")});m._drawLines(S,P,A);var O=m.get("text");O&&O.content&&m._drawText(S,P,A),m.set("el",A)}},g._drawLines=function(M,x,m){var S=[["M",M.x,M.y],["L",x.x,x.y]],P=m.addShape("Path",{attrs:n.mix({path:S},this.get("lineStyle"))});P.name="guide-line",this.get("appendInfo")&&P.setSilent("appendInfo",this.get("appendInfo"))},g._drawText=function(M,x,m){var S=this.get("text"),P=S.position,A=S.style||{},O;P==="start"?O=0:P==="center"?O=.5:n.isString(P)&&P.indexOf("%")!==-1?O=parseInt(P,10)/100:n.isNumber(P)?O=P:O=1,(O>1||O<0)&&(O=1);var R={x:M.x+(x.x-M.x)*O,y:M.y+(x.y-M.y)*O};if(S.offsetX&&(R.x+=S.offsetX),S.offsetY&&(R.y+=S.offsetY),R.text=S.content,R=n.mix({},R,A),S.autoRotate&&n.isNil(A.rotate)){var W=a.angleTo([x.x-M.x,x.y-M.y],[1,0],1);R.rotate=W}else n.isNil(A.rotate)||(R.rotate=A.rotate*Math.PI/180);var F=m.addShape("Text",{attrs:R});F.name="guide-line-text",this.get("appendInfo")&&F.setSilent("appendInfo",this.get("appendInfo"))},y}(i);E.exports=f},function(E,T,e){function t(o){return function(){var u=r(o),f;if(c()){var v=r(this).constructor;f=Reflect.construct(u,arguments,v)}else f=u.apply(this,arguments);return l(this,f)}}function l(o,u){return u&&(typeof u=="object"||typeof u=="function")?u:s(o)}function s(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}function r(o){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)},r(o)}function h(o,u){o.prototype=Object.create(u.prototype),o.prototype.constructor=o,o.__proto__=u}var n=e(3),i=e(20),a=function(o){h(f,o);var u=t(f);function f(){return o.apply(this,arguments)||this}var v=f.prototype;return v.getDefaultCfg=function(){var y=o.prototype.getDefaultCfg.call(this);return n.mix({},y,{name:"region",zIndex:1,start:null,end:null,style:{lineWidth:0,fill:"#CCD7EB",opacity:.4}})},v.render=function(y,g){var _=this,M=_.get("style"),x=_._getPath(y);if(!!x.length){var m=g.addShape("path",{zIndex:_.get("zIndex"),attrs:n.mix({path:x},M)});m.name="guide-region",_.get("appendInfo")&&m.setSilent("appendInfo",_.get("appendInfo")),_.set("el",m)}},v._getPath=function(y){var g=this,_=g.parsePoint(y,g.get("start")),M=g.parsePoint(y,g.get("end"));if(!_||!M)return[];var x=[["M",_.x,_.y],["L",M.x,_.y],["L",M.x,M.y],["L",_.x,M.y],["z"]];return x},f}(i);E.exports=a},function(E,T,e){function t(o){return function(){var u=r(o),f;if(c()){var v=r(this).constructor;f=Reflect.construct(u,arguments,v)}else f=u.apply(this,arguments);return l(this,f)}}function l(o,u){return u&&(typeof u=="object"||typeof u=="function")?u:s(o)}function s(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}function r(o){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)},r(o)}function h(o,u){o.prototype=Object.create(u.prototype),o.prototype.constructor=o,o.__proto__=u}var n=e(3),i=e(20),a=function(o){h(f,o);var u=t(f);function f(){return o.apply(this,arguments)||this}var v=f.prototype;return v.getDefaultCfg=function(){var y=o.prototype.getDefaultCfg.call(this);return n.mix({},y,{name:"text",position:null,content:null,style:{fill:"#999",fontSize:12,fontWeight:500,textAlign:"center"},offsetX:null,offsetY:null,top:!0})},v.render=function(y,g){var _=this,M=_.parsePoint(y,_.get("position"));if(!!M){var x=n.mix({},_.get("style")),m=_.get("offsetX"),S=_.get("offsetY");m&&(M.x+=m),S&&(M.y+=S),x.rotate&&(x.rotate=x.rotate*Math.PI/180);var P=g.addShape("Text",{zIndex:_.get("zIndex"),attrs:n.mix({text:_.get("content")},x,M)});P.name="guide-text",_.get("appendInfo")&&P.setSilent("appendInfo",_.get("appendInfo")),_.set("el",P)}},f}(i);E.exports=a},function(E,T,e){var t=e(110);E.exports=t},function(E,T){E.exports=function(t,l){for(var s,c,r=[],h=0;h<t.length;h++)s=t[h].getBBox(),c=l[h].getBBox(),(s.width>c.width||s.height>c.height||s.width*s.height>c.width*c.height)&&r.push(t[h]);for(var n=0;n<r.length;n++)r[n].remove()}},function(E,T,e){var t=e(111);function l(s,c,r,h){var n=s.getBBox(),i=n.width,a=n.height,o={x:c,y:r,textAlign:"center"};switch(h){case 0:o.y-=a/2,o.textAlign="left";break;case 1:o.y-=a/2,o.textAlign="right";break;case 2:o.y+=a/2,o.textAlign="right";break;case 3:o.y+=a/2,o.textAlign="left";break;case 5:o.y-=a/2;break;case 6:o.y+=a/2;break;case 7:o.x+=i/2,o.textAlign="left";break;case 8:o.x-=i/2,o.textAlign="right";break;default:break}return s.attr(o),s.getBBox()}E.exports=function(s){for(var c=new t,r=[],h,n,i,a,o,u=0;u<s.length;u++){n=s[u],i=n.attr("x"),a=n.attr("y"),o=!1;for(var f=0;f<8;f++)if(h=l(n,i,a,f),c.hasGap(h)){c.fillGap(h),o=!0;break}o||r.push(n)}for(var v=0;v<r.length;v++)r[v].remove();return o}},function(E,T,e){var t=e(111),l=20;function s(c,r){var h=-1,n=c.attr("x"),i=c.attr("y"),a=c.getBBox(),o=Math.sqrt(a.width*a.width+a.height*a.height),u,f=-h,v=0,b=0,y=function(x){return[(x*=.1)*Math.cos(x),x*Math.sin(x)]};if(r.hasGap(a))return r.fillGap(a),!0;for(var g=!1,_=0;Math.min(Math.abs(v),Math.abs(b))<o&&_<l;)if(u=y(f+=h),v=~~u[0],b=~~u[1],c.attr({x:n+v,y:i+b}),_++,r.hasGap(c.getBBox())){r.fillGap(a),g=!0;break}return g}E.exports=function(c){for(var r,h=new t,n=[],i=0;i<c.length;i++)r=c[i],s(r,h)||n.push(r);for(var a=0;a<n.length;a++)n[a].remove()}},function(E,T,e){function t(m){return function(){var S=r(m),P;if(c()){var A=r(this).constructor;P=Reflect.construct(S,arguments,A)}else P=S.apply(this,arguments);return l(this,P)}}function l(m,S){return S&&(typeof S=="object"||typeof S=="function")?S:s(m)}function s(m){if(m===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(m){return!1}}function r(m){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},r(m)}function h(m,S){m.prototype=Object.create(S.prototype),m.prototype.constructor=m,m.__proto__=S}var n=e(3),i=e(113),a=e(19),o=a.FONT_FAMILY,u=n.DomUtil,f="g2-legend-list",v="g2-slip",b="g2-caret-up",y="g2-caret-down",g="rgba(0,0,0,0.65)",_="rgba(0,0,0,0.25)";function M(m,S){return m.getElementsByClassName(S)[0]}var x=function(m){h(P,m);var S=t(P);function P(){return m.apply(this,arguments)||this}var A=P.prototype;return A.getDefaultCfg=function(){var R=m.prototype.getDefaultCfg.call(this);return n.mix({},R,{type:"category-page-legend",container:null,caretStyle:{fill:"rgba(0,0,0,0.65)"},pageNumStyle:{display:"inline-block",fontSize:"12px",fontFamily:o,cursor:"default"},slipDomStyle:{width:"auto",height:"auto",position:"absolute"},slipTpl:'<div class="'+v+'" ><svg viewBox="64 64 896 896" class="g2-caret-up" data-icon="left" style = "display:inline-block;vertical-align:middle;" width="1em" height="1em" aria-hidden="true"><path d="M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 0 0 0 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"></path></svg><p class="cur-pagenum" style = "display:inline-block;vertical-align:middle;">1</p><p class="next-pagenum" style = "display:inline-block;vertical-align:middle;"">/2</p><svg viewBox="64 64 896 896" class="g2-caret-down" data-icon="right" style = "display:inline-block;vertical-align:middle;" width="1em" height="1em" aria-hidden="true"><path d="M765.7 486.8L314.9 134.7A7.97 7.97 0 0 0 302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 0 0 0-50.4z"></path></svg></div>',slipWidth:65,legendOverflow:"unset"})},A.render=function(){m.prototype._renderHTML.call(this),this._renderFlipPage()},A._renderFlipPage=function(){var R=this.get("legendWrapper"),W=M(R,f),F=this.get("position"),Z=this.get("layout"),V=F==="right"||F==="left"||Z==="vertical",k=V?"block":"inline-block",Y=R.offsetHeight;if(R.scrollHeight>Y){var K=this.get("slipTpl"),it=u.createDom(K),ct=M(it,b),ht=M(it,y);u.modifyCSS(ct,this.get("caretStyle")),u.modifyCSS(ct,{fill:"rgba(0,0,0,0.25)"}),u.modifyCSS(ht,this.get("caretStyle"));var ut=M(it,"cur-pagenum"),It=M(it,"next-pagenum"),Nt=this.get("pageNumStyle");if(u.modifyCSS(ut,n.mix({},Nt,{paddingLeft:"10px"})),u.modifyCSS(It,n.mix({},Nt,{opacity:.3,paddingRight:"10px"})),u.modifyCSS(it,n.mix({},this.get("slipDomStyle"),V?{top:Y+"px"}:{right:0,top:"50%",transform:"translate(0, -50%)"})),R.style.overflow=this.get("legendOverflow"),R.appendChild(it),!V){var Lt=Math.max(R.offsetWidth-10-it.offsetWidth,0);u.modifyCSS(W,{maxWidth:Lt+"px"})}for(var _t=W.childNodes,mt=0,At=1,rt=[],Mt=0;Mt<_t.length;Mt++)_t[Mt].style.display=k,mt=_t[Mt].offsetTop+_t[Mt].offsetHeight,mt>Y&&(At++,rt.forEach(function(z){z.style.display="none"}),rt=[]),rt.push(_t[Mt]);It.innerText="/"+At,_t.forEach(function(z){z.style.display=k,mt=z.offsetTop+z.offsetHeight,mt>Y&&(z.style.display="none")}),ct.addEventListener("click",function(){if(_t[0].style.display!==k){var z=-1;_t.forEach(function(et,ot){et.style.display===k&&(z=z===-1?ot:z,et.style.display="none")});for(var $=z-1;$>=0&&(_t[$].style.display=k,mt=_t[z-1].offsetTop+_t[z-1].offsetHeight,_t[$].style.display="none",mt<=Y);$--)_t[$].style.display=k;var dt=Number.parseInt(ut.innerText,10)-1;dt===1?ct.style.fill=_:ct.style.fill=g,ht.style.fill=g,ut.innerText=dt}}),ht.addEventListener("click",function(){if(_t[_t.length-1].style.display!==k){var z=-1;_t.forEach(function(et,ot){et.style.display===k&&(z=ot,et.style.display="none")});for(var $=z+1;$<_t.length&&(_t[$].style.display=k,mt=_t[$].offsetTop+_t[$].offsetHeight,_t[$].style.display="none",mt<=Y);$++)_t[$].style.display=k;var dt=Number.parseInt(ut.innerText,10)+1;dt===At?ht.style.fill=_:ht.style.fill=g,ct.style.fill=g,ut.innerText=dt}}),this.set("slipDom",it)}},A.destroy=function(){var R=this.get("slipDom");R&&R.parentNode&&R.parentNode.removeChild(R),m.prototype.destroy.call(this)},P}(i);E.exports=x},function(E,T,e){function t(f){return function(){var v=r(f),b;if(c()){var y=r(this).constructor;b=Reflect.construct(v,arguments,y)}else b=v.apply(this,arguments);return l(this,b)}}function l(f,v){return v&&(typeof v=="object"||typeof v=="function")?v:s(f)}function s(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(f){return!1}}function r(f){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)},r(f)}function h(f,v){f.prototype=Object.create(v.prototype),f.prototype.constructor=f,f.__proto__=v}var n=e(65),i=n.ColorUtil,a=e(3),o=e(67),u=function(f){h(b,f);var v=t(b);function b(){return f.apply(this,arguments)||this}var y=b.prototype;return y.getDefaultCfg=function(){var _=f.prototype.getDefaultCfg.call(this);return a.mix({},_,{type:"color-legend",layout:"vertical",triggerAttr:{fill:"#fff",shadowOffsetX:-2,shadowOffsetY:2,shadowBlur:10,shadowColor:"#ccc",radius:3},isSegment:!1})},y._setPercentage=function(){var _=this.get("items");if(!_[0].percentage){var M=_[0].value,x=_[_.length-1].value;a.each(_,function(m){m.percentage=(m.value-M)/(x-M)})}},y._renderSliderShape=function(){this._setPercentage();var _=this.get("slider"),M=_.get("backgroundElement"),x=this.get("width"),m=this.get("height"),S=this.get("layout"),P=this.get("items"),A="",O;return S==="vertical"?(A+="l (90) ",a.each(P,function(R){O=i.toRGB(R.color),A+=1-R.percentage+":"+O+" "})):(A+="l (0) ",a.each(P,function(R){O=i.toRGB(R.color),A+=R.percentage+":"+O+" "})),this._addMiddleBar(M,"Rect",{x:0,y:0,width:x,height:m,fill:A,strokeOpacity:0})},y._renderUnslidable=function(){this._setPercentage();var _=this.get("titleShape"),M=this.get("titleGap");M=_?_.getBBox().height+M:M;var x=this.get("width"),m=this.get("height"),S=this.get("layout"),P=this.get("items"),A="",O,R=[],W=this.get("group"),F=W.addGroup(),Z=P.length;if(S==="vertical"){A+="l (90) ";for(var V=0;V<Z;V+=1){if(V!==0&&V!==Z-1&&(R.push(["M",0,m-P[V].percentage*m]),R.push(["L",x,m-P[V].percentage*m])),O=i.toRGB(P[V].color),A+=1-P[V].percentage+":"+O+" ",this.get("isSegment")&&V>0){var k=i.toRGB(P[V-1].color);A+=1-P[V].percentage+":"+k+" "}F.addShape("text",{attrs:a.mix({},{x:x+this.get("textOffset")/2,y:m-P[V].percentage*m,text:this._formatItemValue(P[V].value)+""},this.get("textStyle"),{textAlign:"start"})})}}else{A+="l (0) ";for(var Y=0;Y<Z;Y+=1){if(Y!==0&&Y!==Z-1&&(R.push(["M",P[Y].percentage*x,0]),R.push(["L",P[Y].percentage*x,m])),O=i.toRGB(P[Y].color),this.get("isSegment")&&Y>0){var K=i.toRGB(P[Y-1].color);A+=P[Y].percentage+":"+K+" "}A+=P[Y].percentage+":"+O+" ",F.addShape("text",{attrs:a.mix({},{x:P[Y].percentage*x,y:m+5+this.get("textOffset"),text:this._formatItemValue(P[Y].value)+""},this.get("textStyle"))})}}F.addShape("rect",{attrs:{x:0,y:0,width:x,height:m,fill:A,strokeOpacity:0}}),F.addShape("path",{attrs:a.mix({path:R},this.get("lineStyle"))}),F.move(0,M)},b}(o);E.exports=u},function(E,T,e){E.exports={Category:e(114),CatHtml:e(113),CatPageHtml:e(256),Color:e(257),Size:e(260),CircleSize:e(259)}},function(E,T,e){function t(b){return function(){var y=r(b),g;if(c()){var _=r(this).constructor;g=Reflect.construct(y,arguments,_)}else g=y.apply(this,arguments);return l(this,g)}}function l(b,y){return y&&(typeof y=="object"||typeof y=="function")?y:s(b)}function s(b){if(b===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(b){return!1}}function r(b){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},r(b)}function h(b,y){b.prototype=Object.create(y.prototype),b.prototype.constructor=b,b.__proto__=y}var n=e(3),i=e(67),a=2,o=16,u=16,f=5,v=function(b){h(g,b);var y=t(g);function g(){return b.apply(this,arguments)||this}var _=g.prototype;return _.getDefaultCfg=function(){var x=b.prototype.getDefaultCfg.call(this);return n.mix({},x,{type:"size-circle-legend",width:100,height:200,_unslidableCircleStyle:{stroke:"rgb(99, 161, 248)",fill:"rgb(99, 161, 248)",fillOpacity:.3,lineWidth:1.5},triggerAttr:{fill:"white",shadowOffsetX:-2,shadowOffsetY:2,shadowBlur:10,shadowColor:"#ccc"},frontMiddleBarStyle:{fill:"rgb(64, 141, 251)"}})},_._renderSliderShape=function(){var x=f,m=this.get("slider"),S=m.get("backgroundElement"),P=this.get("layout"),A=P==="vertical"?a:this.get("width"),O=P==="vertical"?this.get("height"):a,R=x,W=this.get("height")/2,F=this.get("frontMiddleBarStyle"),Z=P==="vertical"?[[0,0],[A,0],[A,O],[0,O]]:[[0,W+O],[0,W-O],[R+A-4,W-O],[R+A-4,W+O]];return this._addMiddleBar(S,"Polygon",n.mix({points:Z},F))},_._addHorizontalTrigger=function(x,m,S,P){var A=this.get("slider"),O=A.get(x+"HandleElement"),R=-this.get("height")/2,W=O.addShape("circle",{attrs:n.mix({x:0,y:R,r:P},m)}),F=O.addShape("text",{attrs:n.mix(S,{x:0,y:R+P+10,textAlign:"center",textBaseline:"middle"})}),Z=this.get("layout"),V=Z==="vertical"?"ns-resize":"ew-resize";W.attr("cursor",V),F.attr("cursor",V),this.set(x+"ButtonElement",W),this.set(x+"TextElement",F)},_._addVerticalTrigger=function(x,m,S,P){var A=this.get("slider"),O=A.get(x+"HandleElement"),R=O.addShape("circle",{attrs:n.mix({x:0,y:0,r:P},m)}),W=O.addShape("text",{attrs:n.mix(S,{x:P+10,y:0,textAlign:"start",textBaseline:"middle"})}),F=this.get("layout"),Z=F==="vertical"?"ns-resize":"ew-resize";R.attr("cursor",Z),W.attr("cursor",Z),this.set(x+"ButtonElement",R),this.set(x+"TextElement",W)},_._renderTrigger=function(){var x=this.get("firstItem"),m=this.get("lastItem"),S=this.get("layout"),P=this.get("textStyle"),A=this.get("triggerAttr"),O=n.mix({},A),R=n.mix({},A),W=f,F=u,Z=n.mix({text:this._formatItemValue(x.value)+""},P),V=n.mix({text:this._formatItemValue(m.value)+""},P);S==="vertical"?(this._addVerticalTrigger("min",O,Z,W),this._addVerticalTrigger("max",R,V,F)):(this._addHorizontalTrigger("min",O,Z,W),this._addHorizontalTrigger("max",R,V,F))},_._bindEvents=function(){var x=this;if(this.get("slidable")){var m=this.get("slider");m.on("sliderchange",function(S){var P=S.range,A=x.get("firstItem").value,O=x.get("lastItem").value,R=A+P[0]/100*(O-A),W=A+P[1]/100*(O-A),F=f+P[0]/100*(u-f),Z=f+P[1]/100*(u-f);x._updateElement(R,W,F,Z);var V=new Event("itemfilter",S,!0,!0);V.range=[R,W],x.emit("itemfilter",V)})}},_._updateElement=function(x,m,S,P){b.prototype._updateElement.call(this,x,m);var A=this.get("minTextElement"),O=this.get("maxTextElement"),R=this.get("minButtonElement"),W=this.get("maxButtonElement");R.attr("r",S),W.attr("r",P);var F=this.get("layout");if(F==="vertical")A.attr("x",S+10),O.attr("x",P+10);else{var Z=-this.get("height")/2;A.attr("y",Z+S+10),O.attr("y",Z+P+10)}},_._addCircle=function(x,m,S,P,A){var O=this.get("group"),R=O.addGroup(),W=this.get("_unslidableCircleStyle"),F=this.get("textStyle"),Z=this.get("titleShape"),V=this.get("titleGap");Z&&(V+=Z.getBBox().height),R.addShape("circle",{attrs:n.mix({x,y:m+V,r:S===0?1:S},W)}),this.get("layout")==="vertical"?R.addShape("text",{attrs:n.mix({x:A+20+this.get("textOffset"),y:m+V,text:P===0?"0":P},F)}):R.addShape("text",{attrs:n.mix({x,y:m+V+A+13+this.get("textOffset"),text:P===0?"0":P},F)})},_._renderUnslidable=function(){var x=this.get("firstItem").value,m=this.get("lastItem").value;if(x>m){var S=m;m=x,x=S}var P=this._formatItemValue(x),A=this._formatItemValue(m),O=x<f?f:x,R=m>u?u:m;O>R&&(O=f,R=u),this.get("layout")==="vertical"?(this._addCircle(R,R,O,P,2*R),this._addCircle(R,R*2+o+O,R,A,2*R)):(this._addCircle(R,R,O,P,2*R),this._addCircle(R*2+o+O,R,R,A,2*R))},_.activate=function(x){!this.get("slidable")||b.prototype.activate.call(this,x)},g}(i);E.exports=v},function(E,T,e){function t(o){return function(){var u=r(o),f;if(c()){var v=r(this).constructor;f=Reflect.construct(u,arguments,v)}else f=u.apply(this,arguments);return l(this,f)}}function l(o,u){return u&&(typeof u=="object"||typeof u=="function")?u:s(o)}function s(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}function r(o){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)},r(o)}function h(o,u){o.prototype=Object.create(u.prototype),o.prototype.constructor=o,o.__proto__=u}var n=e(3),i=e(67),a=function(o){h(f,o);var u=t(f);function f(){return o.apply(this,arguments)||this}var v=f.prototype;return v.getDefaultCfg=function(){var y=o.prototype.getDefaultCfg.call(this);return n.mix({},y,{type:"size-legend",width:100,height:200,_unslidableElementStyle:{fill:"#4E7CCC",fillOpacity:1},frontMiddleBarStyle:{fill:"rgb(64, 141, 251)"}})},v._renderSliderShape=function(){var y=this.get("slider"),g=y.get("backgroundElement"),_=this.get("layout"),M=this.get("width"),x=this.get("height"),m=this.get("height")/2,S=this.get("frontMiddleBarStyle"),P=_==="vertical"?[[0,0],[M,0],[M,x],[M-4,x]]:[[0,m+x/2],[0,m+x/2-4],[M,m-x/2],[M,m+x/2]];return this._addMiddleBar(g,"Polygon",n.mix({points:P},S))},v._renderUnslidable=function(){var y=this.get("layout"),g=this.get("width"),_=this.get("height"),M=this.get("frontMiddleBarStyle"),x=y==="vertical"?[[0,0],[g,0],[g,_],[g-4,_]]:[[0,_],[0,_-4],[g,0],[g,_]],m=this.get("group"),S=m.addGroup();S.addShape("Polygon",{attrs:n.mix({points:x},M)});var P=this._formatItemValue(this.get("firstItem").value),A=this._formatItemValue(this.get("lastItem").value);this.get("layout")==="vertical"?(this._addText(g+10,_-3,P),this._addText(g+10,3,A)):(this._addText(0,_,P),this._addText(g,_,A))},v._addText=function(y,g,_){var M=this.get("group"),x=M.addGroup(),m=this.get("textStyle"),S=this.get("titleShape"),P=this.get("titleGap");S&&(P+=S.getBBox().height),this.get("layout")==="vertical"?x.addShape("text",{attrs:n.mix({x:y+this.get("textOffset"),y:g,text:_===0?"0":_},m)}):(g+=P+this.get("textOffset")-20,S||(g+=10),x.addShape("text",{attrs:n.mix({x:y,y:g,text:_===0?"0":_},m)}))},f}(i);E.exports=a},function(E,T,e){var t=e(3),l=t.DomUtil,s=t.Group,c=function r(h){r.superclass.constructor.call(this,h)};t.extend(c,s),t.augment(c,{getDefaultCfg:function(){return{range:null,middleAttr:{fill:"#fff",fillOpacity:0},backgroundElement:null,minHandleElement:null,maxHandleElement:null,middleHandleElement:null,currentTarget:null,layout:"vertical",width:null,height:null,pageX:null,pageY:null}},_beforeRenderUI:function(){var h=this.get("layout"),n=this.get("backgroundElement"),i=this.get("minHandleElement"),a=this.get("maxHandleElement"),o=this.addShape("rect",{attrs:this.get("middleAttr")}),u=h==="vertical"?"ns-resize":"ew-resize";this.add([n,i,a]),this.set("middleHandleElement",o),n.set("zIndex",0),o.set("zIndex",1),i.set("zIndex",2),a.set("zIndex",2),o.attr("cursor","move"),i.attr("cursor",u),a.attr("cursor",u),this.sort()},_renderUI:function(){this.get("layout")==="horizontal"?this._renderHorizontal():this._renderVertical()},_transform:function(h){var n=this.get("range"),i=n[0]/100,a=n[1]/100,o=this.get("width"),u=this.get("height"),f=this.get("minHandleElement"),v=this.get("maxHandleElement"),b=this.get("middleHandleElement");f.resetMatrix(),v.resetMatrix(),h==="horizontal"?(b.attr({x:o*i,y:0,width:(a-i)*o,height:u}),f.translate(i*o,u),v.translate(a*o,u)):(b.attr({x:0,y:u*(1-a),width:o,height:(a-i)*u}),f.translate(1,(1-i)*u),v.translate(1,(1-a)*u))},_renderHorizontal:function(){this._transform("horizontal")},_renderVertical:function(){this._transform("vertical")},_bindUI:function(){this.on("mousedown",t.wrapBehavior(this,"_onMouseDown"))},_isElement:function(h,n){var i=this.get(n);if(h===i)return!0;if(i.isGroup){var a=i.get("children");return a.indexOf(h)>-1}return!1},_getRange:function(h,n){var i=h+n;return i=i>100?100:i,i=i<0?0:i,i},_updateStatus:function(h,n){var i=h==="x"?this.get("width"):this.get("height");h=t.upperFirst(h);var a=this.get("range"),o=this.get("page"+h),u=this.get("currentTarget"),f=this.get("rangeStash"),v=this.get("layout"),b=v==="vertical"?-1:1,y=n["page"+h],g=y-o,_=g/i*100*b,M;a[1]<=a[0]?(this._isElement(u,"minHandleElement")||this._isElement(u,"maxHandleElement"))&&(a[0]=this._getRange(_,a[0]),a[1]=this._getRange(_,a[0])):(this._isElement(u,"minHandleElement")&&(a[0]=this._getRange(_,a[0])),this._isElement(u,"maxHandleElement")&&(a[1]=this._getRange(_,a[1]))),this._isElement(u,"middleHandleElement")&&(M=f[1]-f[0],a[0]=this._getRange(_,a[0]),a[1]=a[0]+M,a[1]>100&&(a[1]=100,a[0]=a[1]-M)),this.emit("sliderchange",{range:a}),this.set("page"+h,y),this._renderUI(),this.get("canvas").draw()},_onMouseDown:function(h){var n=h.currentTarget,i=h.event,a=this.get("range");i.stopPropagation(),i.preventDefault(),this.set("pageX",i.pageX),this.set("pageY",i.pageY),this.set("currentTarget",n),this.set("rangeStash",[a[0],a[1]]),this._bindCanvasEvents()},_bindCanvasEvents:function(){var h=this.get("canvas").get("containerDOM");this.onMouseMoveListener=l.addEventListener(h,"mousemove",t.wrapBehavior(this,"_onCanvasMouseMove")),this.onMouseUpListener=l.addEventListener(h,"mouseup",t.wrapBehavior(this,"_onCanvasMouseUp")),this.onMouseLeaveListener=l.addEventListener(h,"mouseleave",t.wrapBehavior(this,"_onCanvasMouseUp"))},_onCanvasMouseMove:function(h){if(!this._mouseOutArea(h)){var n=this.get("layout");n==="horizontal"?this._updateStatus("x",h):this._updateStatus("y",h)}},_onCanvasMouseUp:function(){this._removeDocumentEvents()},_removeDocumentEvents:function(){this.onMouseMoveListener.remove(),this.onMouseUpListener.remove()},_mouseOutArea:function(h){var n=this.get("canvas").get("el"),i=n.getBoundingClientRect(),a=this.get("parent"),o=a.getBBox(),u=a.attr("matrix")[6],f=a.attr("matrix")[7],v=u+o.width,b=f+o.height,y=h.clientX-i.x,g=h.clientY-i.y;return y<u||y>v||g<f||g>b}}),E.exports=c},function(E,T,e){function t(){return t=Object.assign||function(F){for(var Z=1;Z<arguments.length;Z++){var V=arguments[Z];for(var k in V)Object.prototype.hasOwnProperty.call(V,k)&&(F[k]=V[k])}return F},t.apply(this,arguments)}function l(F){return function(){var Z=h(F),V;if(r()){var k=h(this).constructor;V=Reflect.construct(Z,arguments,k)}else V=Z.apply(this,arguments);return s(this,V)}}function s(F,Z){return Z&&(typeof Z=="object"||typeof Z=="function")?Z:c(F)}function c(F){if(F===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F}function r(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(F){return!1}}function h(F){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(V){return V.__proto__||Object.getPrototypeOf(V)},h(F)}function n(F,Z){F.prototype=Object.create(Z.prototype),F.prototype.constructor=F,F.__proto__=Z}var i=e(31),a=e(68),o=e(3),u=o.DomUtil,f=e(265),v=e(116),b=e(118),y=e(117),g="g2-tooltip",_="g2-tooltip-title",M="g2-tooltip-list",x="g2-tooltip-marker",m="g2-tooltip-value",S="g2-tooltip-list-item",P=5,A=i.Marker;function O(F,Z){return F.getElementsByClassName(Z)[0]}function R(F,Z){return Object.keys(F).forEach(function(V){Z[V]&&(F[V]=o.mix(F[V],Z[V]))}),F}var W=function(F){n(k,F);var Z=l(k),V=k.prototype;V.getDefaultCfg=function(){var K=F.prototype.getDefaultCfg.call(this);return o.mix({},K,{containerTpl:' <div class="'+g+'"> <div class="'+_+'"></div><ul class="'+M+'"></ul></div>',itemTpl:`<li data-index={index}>
      <svg viewBox="0 0 `+P+" "+P+'" class="'+x+`"></svg>
      {name}<span class="`+m+'">{value}</span></li>',htmlContent:null,follow:!0,enterable:!1})};function k(Y){var K;K=F.call(this,Y)||this,o.assign(c(K),b),o.assign(c(K),y);var it=f;K.style=R(it,Y),K._init_(),K.get("items")&&K.render();var ct=K.get("crosshairs");if(ct){var ht=ct.type==="rect"?K.get("backPlot"):K.get("frontPlot"),ut=new v(o.mix({plot:ht,plotRange:K.get("plotRange"),canvas:K.get("canvas")},K.get("crosshairs")));ut.hide(),K.set("crosshairGroup",ut)}return K}return V._init_=function(){var K=this,it=K.get("containerTpl"),ct=K.get("canvas").get("el").parentNode,ht;if(!this.get("htmlContent")){if(/^\#/.test(it)){var ut=it.replace("#","");ht=document.getElementById(ut)}else ht=u.createDom(it),u.modifyCSS(ht,K.style[g]),ct.appendChild(ht),ct.style.position="relative";K.set("container",ht)}},V.render=function(){var K=this;if(K.clear(),K.get("htmlContent")){var it=K.get("canvas").get("el").parentNode,ct=K._getHtmlContent();it.appendChild(ct),K.set("container",ct)}else K._renderTpl()},V._renderTpl=function(){var K=this,it=K.get("showTitle"),ct=K.get("titleContent"),ht=K.get("container"),ut=O(ht,_),It=O(ht,M),Nt=K.get("items");ut&&it&&(u.modifyCSS(ut,K.style[_]),ut.innerHTML=ct),It&&(u.modifyCSS(It,K.style[M]),o.each(Nt,function(Lt,_t){It.appendChild(K._addItem(Lt,_t))}))},V.clear=function(){var K=this.get("container");if(this.get("htmlContent"))K&&K.remove();else{var it=O(K,_),ct=O(K,M);it&&(it.innerHTML=""),ct&&(ct.innerHTML="")}},V.show=function(){var K=this.get("container");if(!(!K||this.destroyed)){K.style.visibility="visible",K.style.display="block";var it=this.get("crosshairGroup");it&&it.show();var ct=this.get("markerGroup");ct&&ct.show(),F.prototype.show.call(this),this.get("canvas").draw()}},V.hide=function(){var K=this.get("container");if(!(!K||this.destroyed)){K.style.visibility="hidden",K.style.display="none";var it=this.get("crosshairGroup");it&&it.hide();var ct=this.get("markerGroup");ct&&ct.hide(),F.prototype.hide.call(this),this.get("canvas").draw()}},V.destroy=function(){var K=this,it=K.get("container"),ct=K.get("containerTpl");it&&!/^\#/.test(ct)&&it.parentNode.removeChild(it);var ht=this.get("crosshairGroup");ht&&ht.destroy();var ut=this.get("markerGroup");ut&&ut.remove(),F.prototype.destroy.call(this)},V._getMarkerSvg=function(K){var it=K.marker||{},ct=it.activeSymbol||it.symbol,ht;o.isFunction(ct)?ht=ct:o.isString(ct)&&(ht=A.Symbols[ct]),ht=o.isFunction(ht)?ht:A.Symbols.circle;var ut=ht(P/2,P/2,P/2),It=ut.reduce(function(Nt,Lt){return""+Nt+Lt[0]+Lt.slice(1).join(",")},"");return'<path d="'+It+'" fill="'+(it.fill||"none")+'" stroke="'+(it.stroke||"none")+'" />'},V._addItem=function(K,it){var ct=this.get("itemTpl"),ht=o.substitute(ct,o.mix({index:it},K)),ut=u.createDom(ht);u.modifyCSS(ut,this.style[S]);var It=O(ut,x);if(It){u.modifyCSS(It,t({},this.style[x],{borderRadius:"unset"}));var Nt=this._getMarkerSvg(K);It.innerHTML=Nt}var Lt=O(ut,m);return Lt&&u.modifyCSS(Lt,this.style[m]),ut},V._getHtmlContent=function(){var K=this.get("htmlContent"),it=this.get("titleContent"),ct=this.get("items"),ht=K(it,ct),ut=u.createDom(ht);return ut},V.setPosition=function(K,it,ct){var ht=this.get("container"),ut=this.get("canvas").get("el"),It=u.getWidth(ut),Nt=u.getHeight(ut),Lt=ht.clientWidth,_t=ht.clientHeight,mt=K,At=it,rt,Mt=this.get("prePosition")||{x:0,y:0};if(Lt||(ht.style.display="block",Lt=ht.clientWidth,_t=ht.clientHeight,ht.style.display="none"),this.get("enterable")?(it=it-ht.clientHeight/2,rt=[K,it],Mt&&K-Mt.x>0?K-=ht.clientWidth+1:K+=1):this.get("position")?(rt=this._calcTooltipPosition(K,it,this.get("position"),Lt,_t,ct),K=rt[0],it=rt[1]):(rt=this._constraintPositionInBoundary(K,it,Lt,_t,It,Nt),K=rt[0],it=rt[1]),this.get("inPlot")){var z=this.get("plotRange");rt=this._constraintPositionInPlot(K,it,Lt,_t,z,this.get("enterable")),K=rt[0],it=rt[1]}var $=this.get("markerItems");o.isEmpty($)||(mt=$[0].x,At=$[0].y),this.set("prePosition",rt);var dt=this.get("follow");dt&&(ht.style.left=K+"px",ht.style.top=it+"px");var et=this.get("crosshairGroup");if(et){var ot=this.get("items");et.setPosition(mt,At,ot)}F.prototype.setPosition.call(this,K,it)},k}(a);E.exports=W},function(E,T,e){var t=e(68);t.Html=e(262),t.Canvas=e(115),t.Mini=e(264),E.exports=t},function(E,T,e){function t(b){return function(){var y=r(b),g;if(c()){var _=r(this).constructor;g=Reflect.construct(y,arguments,_)}else g=y.apply(this,arguments);return l(this,g)}}function l(b,y){return y&&(typeof y=="object"||typeof y=="function")?y:s(b)}function s(b){if(b===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(b){return!1}}function r(b){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},r(b)}function h(b,y){b.prototype=Object.create(y.prototype),b.prototype.constructor=b,b.__proto__=y}var n=e(3),i=e(115),a=e(19),o=a.FONT_FAMILY,u=n.DomUtil,f=n.MatrixUtil,v=function(b){h(g,b);var y=t(g);function g(){return b.apply(this,arguments)||this}var _=g.prototype;return _.getDefaultCfg=function(){var x=b.prototype.getDefaultCfg.call(this);return n.mix({},x,{boardStyle:{x:0,y:0,width:0,height:0,radius:3},valueStyle:{x:0,y:0,text:"",fontFamily:o,fontSize:12,stroke:"#fff",lineWidth:2,fill:"black",textBaseline:"top",textAlign:"start"},padding:{top:5,right:5,bottom:0,left:5},triangleWidth:10,triangleHeight:4})},_._init_=function(){var x=this,m=x.get("padding"),S=x.get("frontPlot"),P=S.addGroup();x.set("container",P);var A=P.addShape("rect",{attrs:n.mix({},x.get("boardStyle"))});x.set("board",A);var O=P.addShape("path",{attrs:{fill:x.get("boardStyle").fill}});x.set("triangleShape",O);var R=P.addGroup();R.move(m.left,m.top);var W=R.addShape("text",{attrs:n.mix({},x.get("valueStyle"))});x.set("valueShape",W)},_.render=function(){var x=this;x.clear();var m=x.get("board"),S=x.get("valueShape"),P=x.get("padding"),A=x.get("items")[0];S&&S.attr("text",A.value);var O=S?S.getBBox():{width:80,height:30},R=P.left+O.width+P.right,W=P.top+O.height+P.bottom;m.attr("width",R),m.attr("height",W),x._centerTriangleShape()},_.clear=function(){var x=this.get("valueShape");x.attr("text","")},_.setPosition=function(x,m,S){var P=this,A=P.get("container"),O=P.get("plotRange"),R=A.getBBox(),W=R.width,F=R.height;if(x-=W/2,S&&(S.name==="point"||S.name==="interval")){var Z=S.getBBox().y;m=Z}if(m-=F,this.get("inPlot"))x<O.tl.x?(x=O.tl.x,P._leftTriangleShape()):x+W/2>O.tr.x?(x=O.tr.x-W,P._rightTriangleShape()):P._centerTriangleShape(),m<O.tl.y?m=O.tl.y:m+F>O.bl.y&&(m=O.bl.y-F);else{var V=this.get("canvas").get("el"),k=u.getWidth(V),Y=u.getHeight(V);x<0?(x=0,P._leftTriangleShape()):x+W/2>k?(x=k-W,P._rightTriangleShape()):P._centerTriangleShape(),m<0?m=0:m+F>Y&&(m=Y-F)}var K=[1,0,0,0,1,0,0,0,1],it=f.transform(K,[["t",x,m]]);A.stopAnimate(),A.animate({matrix:it},this.get("animationDuration"))},_._centerTriangleShape=function(){var x=this.get("triangleShape"),m=this.get("triangleWidth"),S=this.get("triangleHeight"),P=this.get("board").getBBox(),A=P.width,O=P.height,R=[["M",0,0],["L",m,0],["L",m/2,S],["L",0,0],["Z"]];x.attr("path",R),x.move(A/2-m/2,O-1)},_._leftTriangleShape=function(){var x=this.get("triangleShape"),m=this.get("triangleWidth"),S=this.get("triangleHeight"),P=this.get("board").getBBox(),A=P.height,O=[["M",0,0],["L",m,0],["L",0,S+3],["L",0,0],["Z"]];x.attr("path",O),x.move(0,A-3)},_._rightTriangleShape=function(){var x=this.get("triangleShape"),m=this.get("triangleWidth"),S=this.get("triangleHeight"),P=this.get("board").getBBox(),A=P.width,O=P.height,R=[["M",0,0],["L",m,0],["L",m,S+4],["L",0,0],["Z"]];x.attr("path",R),x.move(A-m-1,O-4)},g}(i);E.exports=v},function(E,T,e){var t,l=e(19),s=l.FONT_FAMILY,c="g2-tooltip",r="g2-tooltip-title",h="g2-tooltip-list",n="g2-tooltip-list-item",i="g2-tooltip-marker",a="g2-tooltip-value",o=(t={crosshairs:!1,offset:15},t[""+c]={position:"absolute",visibility:"hidden",zIndex:8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"0px 0px 10px #aeaeae",borderRadius:"3px",color:"rgb(87, 87, 87)",fontSize:"12px",fontFamily:s,lineHeight:"20px",padding:"10px 10px 6px 10px"},t[""+r]={marginBottom:"4px"},t[""+h]={margin:0,listStyleType:"none",padding:0},t[""+n]={marginBottom:"4px"},t[""+i]={width:"5px",height:"5px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},t[""+a]={display:"inline-block",float:"right",marginLeft:"30px"},t);E.exports=o},function(E,T,e){"use strict";function t(y){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(_){return typeof _}:t=function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},t(y)}function l(y,g){if(!(y instanceof g))throw new TypeError("Cannot call a class as a function")}function s(y,g){return g&&(t(g)==="object"||typeof g=="function")?g:c(y)}function c(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function r(y,g){for(var _=0;_<g.length;_++){var M=g[_];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(y,M.key,M)}}function h(y,g,_){return g&&r(y.prototype,g),_&&r(y,_),y}function n(y,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(g&&g.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),g&&i(y,g)}function i(y,g){return i=Object.setPrototypeOf||function(M,x){return M.__proto__=x,M},i(y,g)}function a(y,g,_){return typeof Reflect!="undefined"&&Reflect.get?a=Reflect.get:a=function(x,m,S){var P=o(x,m);if(!!P){var A=Object.getOwnPropertyDescriptor(P,m);return A.get?A.get.call(S):A.value}},a(y,g,_||y)}function o(y,g){for(;!Object.prototype.hasOwnProperty.call(y,g)&&(y=u(y),y!==null););return y}function u(y){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(_){return _.__proto__||Object.getPrototypeOf(_)},u(y)}var f=e(10),v=e(43),b=function(y){n(g,y),h(g,[{key:"getDefaultCfg",value:function(){var M=a(u(g.prototype),"getDefaultCfg",this).call(this);return f({},M,{start:{x:0,y:0},end:{x:0,y:0},type:"cartesian",isRect:!0})}}]);function g(_){var M;return l(this,g),M=s(this,u(g).call(this,_)),M._init(),M}return h(g,[{key:"_init",value:function(){var M=this.start,x=this.end,m={start:M.x,end:x.x},S={start:M.y,end:x.y};this.x=m,this.y=S}},{key:"convertPoint",value:function(M){var x,m;return this.isTransposed?(x=M.y,m=M.x):(x=M.x,m=M.y),{x:this.convertDim(x,"x"),y:this.convertDim(m,"y")}}},{key:"invertPoint",value:function(M){var x=this.invertDim(M.x,"x"),m=this.invertDim(M.y,"y");return this.isTransposed?{x:m,y:x}:{x,y:m}}}]),g}(v);E.exports=b},function(E,T,e){"use strict";function t(M){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(m){return typeof m}:t=function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},t(M)}function l(M,x){if(!(M instanceof x))throw new TypeError("Cannot call a class as a function")}function s(M,x){return x&&(t(x)==="object"||typeof x=="function")?x:c(M)}function c(M){if(M===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M}function r(M,x){for(var m=0;m<x.length;m++){var S=x[m];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(M,S.key,S)}}function h(M,x,m){return x&&r(M.prototype,x),m&&r(M,m),M}function n(M,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(x&&x.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),x&&i(M,x)}function i(M,x){return i=Object.setPrototypeOf||function(S,P){return S.__proto__=P,S},i(M,x)}function a(M,x,m){return typeof Reflect!="undefined"&&Reflect.get?a=Reflect.get:a=function(P,A,O){var R=o(P,A);if(!!R){var W=Object.getOwnPropertyDescriptor(R,A);return W.get?W.get.call(O):W.value}},a(M,x,m||M)}function o(M,x){for(;!Object.prototype.hasOwnProperty.call(M,x)&&(M=u(M),M!==null););return M}function u(M){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(m){return m.__proto__||Object.getPrototypeOf(m)},u(M)}var f=e(56),v=e(55),b=e(10),y=e(43),g=f.vec2,_=function(M){n(x,M),h(x,[{key:"getDefaultCfg",value:function(){var S=a(u(x.prototype),"getDefaultCfg",this).call(this);return b({},S,{startAngle:1.25*Math.PI,endAngle:7.25*Math.PI,innerRadius:0,type:"helix",isHelix:!0})}}]);function x(m){var S;return l(this,x),S=s(this,u(x).call(this,m)),S._init(),S}return h(x,[{key:"_init",value:function(){var S=this.width,P=this.height,A=this.radius,O=this.innerRadius,R=this.startAngle,W=this.endAngle,F=(W-R)/(2*Math.PI)+1,Z=Math.min(S,P)/2;A&&A>=0&&A<=1&&(Z=Z*A);var V=Math.floor(Z*(1-O)/F),k=V/(Math.PI*2),Y={start:R,end:W},K={start:O*Z,end:O*Z+V*.99};this.a=k,this.d=V,this.x=Y,this.y=K}},{key:"getCenter",value:function(){return this.center}},{key:"convertPoint",value:function(S){var P=this.a,A=this.center,O,R;this.isTransposed?(O=S.y,R=S.x):(O=S.x,R=S.y);var W=this.convertDim(O,"x"),F=P*W,Z=this.convertDim(R,"y");return{x:A.x+Math.cos(W)*(F+Z),y:A.y+Math.sin(W)*(F+Z)}}},{key:"invertPoint",value:function(S){var P=this.center,A=this.a,O=this.d+this.y.start,R=g.subtract([],[S.x,S.y],[P.x,P.y]),W=g.angleTo(R,[1,0],!0),F=W*A;g.length(R)<F&&(F=g.length(R));var Z=Math.floor((g.length(R)-F)/O);W=2*Z*Math.PI+W;var V=A*W,k=g.length(R)-V;k=v(k,0)?0:k;var Y=this.invertDim(W,"x"),K=this.invertDim(k,"y");Y=v(Y,0)?0:Y,K=v(K,0)?0:K;var it={};return it.x=this.isTransposed?K:Y,it.y=this.isTransposed?Y:K,it}}]),x}(y);E.exports=_},function(E,T,e){"use strict";var t=e(43);t.Cartesian=e(266),t.Rect=t.Cartesian,t.Polar=e(269),t.Helix=e(267),E.exports=t},function(E,T,e){"use strict";function t(m){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(P){return typeof P}:t=function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},t(m)}function l(m,S){if(!(m instanceof S))throw new TypeError("Cannot call a class as a function")}function s(m,S){return S&&(t(S)==="object"||typeof S=="function")?S:c(m)}function c(m){if(m===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}function r(m,S){for(var P=0;P<S.length;P++){var A=S[P];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(m,A.key,A)}}function h(m,S,P){return S&&r(m.prototype,S),P&&r(m,P),m}function n(m,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(S&&S.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),S&&i(m,S)}function i(m,S){return i=Object.setPrototypeOf||function(A,O){return A.__proto__=O,A},i(m,S)}function a(m,S,P){return typeof Reflect!="undefined"&&Reflect.get?a=Reflect.get:a=function(O,R,W){var F=o(O,R);if(!!F){var Z=Object.getOwnPropertyDescriptor(F,R);return Z.get?Z.get.call(W):Z.value}},a(m,S,P||m)}function o(m,S){for(;!Object.prototype.hasOwnProperty.call(m,S)&&(m=u(m),m!==null););return m}function u(m){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},u(m)}var f=e(56),v=e(55),b=e(10),y=e(43),g=f.mat3,_=f.vec2,M=f.vec3,x=function(m){n(S,m),h(S,[{key:"getDefaultCfg",value:function(){var A=a(u(S.prototype),"getDefaultCfg",this).call(this);return b({},A,{startAngle:-Math.PI/2,endAngle:Math.PI*3/2,innerRadius:0,type:"polar",isPolar:!0})}}]);function S(P){var A;return l(this,S),A=s(this,u(S).call(this,P)),A._init(),A}return h(S,[{key:"_init",value:function(){for(var A=this.radius,O=this.innerRadius,R=this.center,W=this.startAngle,F=this.endAngle;F<W;)F+=Math.PI*2;this.endAngle=F;var Z=this.getOneBox(),V=Z.maxX-Z.minX,k=Z.maxY-Z.minY,Y=Math.abs(Z.minX)/V,K=Math.abs(Z.minY)/k,it=this.width,ct=this.height,ht,ut;ct/k>it/V?(ht=it/V,ut={x:R.x-(.5-Y)*it,y:R.y-(.5-K)*ht*k}):(ht=ct/k,ut={x:R.x-(.5-Y)*ht*V,y:R.y-(.5-K)*ct}),A?A>0&&A<=1?A=ht*A:(A<=0||A>ht)&&(A=ht):A=ht;var It={start:W,end:F},Nt={start:O*A,end:A};this.x=It,this.y=Nt,this.radius=A,this.circleCentre=ut,this.center=ut}},{key:"getCenter",value:function(){return this.circleCentre}},{key:"getOneBox",value:function(){var A=this.startAngle,O=this.endAngle;if(Math.abs(O-A)>=Math.PI*2)return{minX:-1,maxX:1,minY:-1,maxY:1};for(var R=[0,Math.cos(A),Math.cos(O)],W=[0,Math.sin(A),Math.sin(O)],F=Math.min(A,O);F<Math.max(A,O);F+=Math.PI/18)R.push(Math.cos(F)),W.push(Math.sin(F));return{minX:Math.min.apply(Math,R),maxX:Math.max.apply(Math,R),minY:Math.min.apply(Math,W),maxY:Math.max.apply(Math,W)}}},{key:"getRadius",value:function(){return this.radius}},{key:"convertPoint",value:function(A){var O=this.getCenter(),R=this.isTransposed?A.y:A.x,W=this.isTransposed?A.x:A.y;return R=this.convertDim(R,"x"),W=this.convertDim(W,"y"),{x:O.x+Math.cos(R)*W,y:O.y+Math.sin(R)*W}}},{key:"invertPoint",value:function(A){var O=this.getCenter(),R=[A.x-O.x,A.y-O.y],W=this.x,F=[1,0,0,0,1,0,0,0,1];g.rotate(F,F,W.start);var Z=[1,0,0];M.transformMat3(Z,Z,F),Z=[Z[0],Z[1]];var V=_.angleTo(Z,R,W.end<W.start);v(V,Math.PI*2)&&(V=0);var k=_.length(R),Y=V/(W.end-W.start);Y=W.end-W.start>0?Y:-Y;var K=this.invertDim(k,"y"),it={};return it.x=this.isTransposed?K:Y,it.y=this.isTransposed?Y:K,it}}]),S}(y);E.exports=x},function(E,T,e){var t=e(0),l=e(16),s=t.PathUtil;function c(S){var P=S.start,A=S.end,O=S.getWidth(),R=S.getHeight(),W=200,F,Z,V,k,Y;return S.isPolar?(k=S.getRadius(),V=S.getCenter(),F=S.startAngle,Z=S.endAngle,Y=new l.Fan({attrs:{x:V.x,y:V.y,rs:0,re:k+W,startAngle:F,endAngle:F}}),Y.endState={endAngle:Z}):(Y=new l.Rect({attrs:{x:P.x-W,y:A.y-W,width:S.isTransposed?O+W*2:0,height:S.isTransposed?0:R+W*2}}),S.isTransposed?Y.endState={height:R+W*2}:Y.endState={width:O+W*2}),Y.isClip=!0,Y}function r(S){if(t.isEmpty(S))return null;var P=S[0].x,A=S[0].x,O=S[0].y,R=S[0].y;return t.each(S,function(W){P=P>W.x?W.x:P,A=A<W.x?W.x:A,O=O>W.y?W.y:O,R=R<W.y?W.y:R}),{minX:P,maxX:A,minY:O,maxY:R,centerX:(P+A)/2,centerY:(O+R)/2}}function h(S,P){var A=S.points||S.get("origin").points,O=r(A),R,W,F=P.startAngle,Z=P.endAngle,V=Z-F;return P.isTransposed?(R=O.maxY*V,W=O.minY*V):(R=O.maxX*V,W=O.minX*V),R+=F,W+=F,{startAngle:W,endAngle:R}}function n(S,P,A){var O={};return S.delay&&(O.delay=t.isFunction(S.delay)?S.delay(P,A):S.delay),O.easing=t.isFunction(S.easing)?S.easing(P,A):S.easing,O.duration=t.isFunction(S.duration)?S.duration(P,A):S.duration,O.callback=S.callback,O}function i(S,P){var A=S._id,O=S.get("index"),R=S.getBBox(),W=S.get("origin").points,F=(R.minX+R.maxX)/2,Z;W[0].y-W[1].y<=0?Z=R.maxY:Z=R.minY;var V=[F,Z,1];S.apply(V),S.attr("transform",[["t",-F,-Z],["s",1,.01],["t",F,Z]]);var k={transform:[["t",-F,-Z],["s",1,100],["t",F,Z]]},Y=n(P,O,A,k);S.animate(k,Y.duration,Y.easing,Y.callback,Y.delay)}function a(S,P){var A=S._id,O=S.get("index"),R=S.getBBox(),W=S.get("origin").points,F,Z=(R.minY+R.maxY)/2;W[0].y-W[1].y>0?F=R.maxX:F=R.minX;var V=[F,Z,1];S.apply(V),S.attr({transform:[["t",-F,-Z],["s",.01,1],["t",F,Z]]});var k={transform:[["t",-F,-Z],["s",100,1],["t",F,Z]]},Y=n(P,O,A,k);S.animate(k,Y.duration,Y.easing,Y.callback,Y.delay)}function o(S,P){var A={lineWidth:0,opacity:0},O=S._id,R=S.get("index"),W=n(P,R,O,A);S.animate(A,W.duration,W.easing,function(){S.remove()},W.delay)}function u(S,P,A){var O=S._id,R=S.get("index"),W,F;if(A.isPolar&&S.name!=="point")W=A.getCenter().x,F=A.getCenter().y;else{var Z=S.getBBox();W=(Z.minX+Z.maxX)/2,F=(Z.minY+Z.maxY)/2}var V=[W,F,1];S.apply(V),S.attr({transform:[["t",-W,-F],["s",.01,.01],["t",W,F]]});var k={transform:[["t",-W,-F],["s",100,100],["t",W,F]]},Y=n(P,R,O,k);S.animate(k,Y.duration,Y.easing,Y.callback,Y.delay)}function f(S,P,A){var O=S._id,R=S.get("index"),W,F;if(A.isPolar&&S.name!=="point")W=A.getCenter().x,F=A.getCenter().y;else{var Z=S.getBBox();W=(Z.minX+Z.maxX)/2,F=(Z.minY+Z.maxY)/2}var V=[W,F,1];S.apply(V);var k={transform:[["t",-W,-F],["s",.01,.01],["t",W,F]]},Y=n(P,R,O,k);S.animate(k,Y.duration,Y.easing,function(){S.remove()},Y.delay)}function v(S,P){if(S.get("type")==="path"){var A=S._id,O=S.get("index"),R=s.pathToAbsolute(S.attr("path"));S.attr("path",[R[0]]);var W={path:R},F=n(P,O,A,W);S.animate(W,F.duration,F.easing,F.callback,F.delay)}}function b(S,P){if(S.get("type")==="path"){var A=S._id,O=S.get("index"),R=s.pathToAbsolute(S.attr("path")),W={path:[R[0]]},F=n(P,O,A,W);S.animate(W,F.duration,F.easing,function(){S.remove()},F.delay)}}function y(S,P,A,O,R){var W=c(A),F=S.get("canvas"),Z=S._id,V=S.get("index"),k;O?(W.attr("startAngle",O),W.attr("endAngle",O),k={endAngle:R}):k=W.endState,W.set("canvas",F),S.attr("clip",W),S.setSilent("animating",!0);var Y=n(P,V,Z,k);W.animate(k,Y.duration,Y.easing,function(){S&&!S.get("destroyed")&&(S.attr("clip",null),S.setSilent("cacheShape",null),S.setSilent("animating",!1),W.remove())},Y.delay)}function g(S,P){var A=S._id,O=S.get("index"),R=t.isNil(S.attr("fillOpacity"))?1:S.attr("fillOpacity"),W=t.isNil(S.attr("strokeOpacity"))?1:S.attr("strokeOpacity");S.attr("fillOpacity",0),S.attr("strokeOpacity",0);var F={fillOpacity:R,strokeOpacity:W},Z=n(P,O,A,F);S.animate(F,Z.duration,Z.easing,Z.callback,Z.delay)}function _(S,P){var A=S._id,O=S.get("index"),R={fillOpacity:0,strokeOpacity:0},W=n(P,O,A,R);S.animate(R,W.duration,W.easing,function(){S.remove()},W.delay)}function M(S,P,A){var O=h(S,A),R=O.endAngle,W=O.startAngle;y(S,P,A,W,R)}function x(S,P,A){if(S.name==="line"){var O=S.get("canvas"),R=S.get("cacheShape"),W=S._id,F=S.get("index"),Z=new l.Rect({attrs:{x:A.start.x,y:A.end.y,width:A.getWidth(),height:A.getHeight()}});Z.isClip=!0,Z.set("canvas",O);var V=s.pathToAbsolute(R.attrs.path),k=s.pathToAbsolute(S.attr("path")),Y=V[1][1]-V[0][1],K=V[V.length-1][1]+Y,it=k[k.length-1][2],ct=V.concat([["L",K,it]]),ht=[0,0,1];S.apply(ht),S.attr("clip",Z),S.attr("path",ct);var ut={transform:[["t",-Y,0]]},It=n(P,F,W,ut);S.animate(ut,It.duration,It.easing,function(){S&&!S.get("destroyed")&&(S.attr("path",k),S.attr({transform:[["t",Y,0]]}),S.attr("clip",null),S.setSilent("cacheShape",null),Z.remove())},It.delay)}}function m(S,P,A){if(S.name==="area"){var O=S.get("canvas"),R=S.get("cacheShape"),W=S._id,F=S.get("index"),Z=new l.Rect({attrs:{x:A.start.x,y:A.end.y,width:A.getWidth(),height:A.getHeight()}});Z.isClip=!0,Z.set("canvas",O);var V=s.pathToAbsolute(R.attrs.path),k=s.pathToAbsolute(S.attr("path")),Y=V[1][1]-V[0][1],K=Math.floor(V.length/2),it=V[K-1][1]+Y,ct=k[K-1][2],ht=[].concat(V.slice(0,K),[["L",it,ct],["L",it,k[K][2]]],V.slice(K)),ut=[0,0,1];S.apply(ut),S.attr("clip",Z),S.attr("path",ht);var It={transform:[["t",-Y,0]]},Nt=n(P,F,W,It);S.animate(It,Nt.duration,Nt.easing,function(){S&&!S.get("destroyed")&&(S.attr("path",k),S.attr({transform:[["t",Y,0]]}),S.attr("clip",null),S.setSilent("cacheShape",null),Z.remove())},Nt.delay)}}E.exports={enter:{clipIn:y,zoomIn:u,pathIn:v,scaleInY:i,scaleInX:a,fanIn:M,fadeIn:g},leave:{lineWidthOut:o,zoomOut:f,pathOut:b,fadeOut:_},appear:{clipIn:y,zoomIn:u,pathIn:v,scaleInY:i,scaleInX:a,fanIn:M,fadeIn:g},update:{fadeIn:g,fanIn:M,lineSlideLeft:x,areaSlideLeft:m}}},function(E,T,e){var t=e(0),l=e(119),s=t.MatrixUtil,c=s.mat3;function r(o,u){var f=[];if(o.get("animate")===!1)return[];var v=o.get("children");return t.each(v,function(b){if(b.isGroup)f=f.concat(r(b,u));else if(b.isShape&&b._id){var y=b._id;y=y.split("-")[0],y===u&&f.push(b)}}),f}function h(o){var u={};return t.each(o,function(f){if(!(!f._id||f.isClip)){var v=f._id;u[v]={_id:v,type:f.get("type"),attrs:t.cloneDeep(f.attr()),name:f.name,index:f.get("index"),animateCfg:f.get("animateCfg"),coord:f.get("coord")}}}),u}function n(o,u,f,v){var b;return v?b=l.Action[f][v]:b=l.getAnimation(o,u,f),b}function i(o,u,f){var v=l.getAnimateCfg(o,u);return f&&f[u]?t.deepMix({},v,f[u]):v}function a(o,u,f,v){var b,y,g=!1;if(v){var _=[],M=[];t.each(u,function(x){var m=o[x._id];m?(x.setSilent("cacheShape",m),_.push(x),delete o[x._id]):M.push(x)}),t.each(o,function(x){var m=x.name,S=x.coord,P=x._id,A=x.attrs,O=x.index,R=x.type;if(y=i(m,"leave",x.animateCfg),b=n(m,S,"leave",y.animation),t.isFunction(b)){var W=f.addShape(R,{attrs:A,index:O});if(W._id=P,W.name=m,S&&m!=="label"){var F=W.getMatrix(),Z=c.multiply([],F,S.matrix);W.setMatrix(Z)}g=!0,b(W,y,S)}}),t.each(_,function(x){var m=x.name,S=x.get("coord"),P=x.get("cacheShape").attrs;if(!t.isEqual(P,x.attr())){if(y=i(m,"update",x.get("animateCfg")),b=n(m,S,"update",y.animation),t.isFunction(b))b(x,y,S);else{var A=t.cloneDeep(x.attr());x.attr(P),x.animate(A,y.duration,y.easing,function(){x.setSilent("cacheShape",null)})}g=!0}}),t.each(M,function(x){var m=x.name,S=x.get("coord");y=i(m,"enter",x.get("animateCfg")),b=n(m,S,"enter",y.animation),t.isFunction(b)&&(b(x,y,S),g=!0)})}else t.each(u,function(x){var m=x.name,S=x.get("coord");y=i(m,"appear",x.get("animateCfg")),b=n(m,S,"appear",y.animation),t.isFunction(b)&&(b(x,y,S),g=!0)});return g}E.exports={execAnimation:function(u,f){var v=u.get("middlePlot"),b=u.get("backPlot"),y=u.get("_id"),g=u.get("canvas"),_=g.get(y+"caches")||[];_.length===0&&(f=!1);var M=r(v,y),x=r(b,y),m=M.concat(x);g.setSilent(y+"caches",h(m));var S;f?S=a(_,m,g,f):S=a(_,M,g,f),S||g.draw()}}},function(E,T,e){var t=e(0),l=e(30),s=l.Axis,c=t.MatrixUtil.vec2;function r(a){var o=[];if(a.length>0){o=a.slice(0);var u=o[0],f=o[o.length-1];u.value!==0&&o.unshift({value:0}),f.value!==1&&o.push({value:1})}return o}function h(a,o,u){var f=[];return a.length<1||(a.length>=2&&o&&u&&f.push({text:"",tickValue:"",value:0}),a[0].value!==0&&f.push({text:"",tickValue:"",value:0}),f=f.concat(a),f[f.length-1].value!==1&&f.push({text:"",tickValue:"",value:1})),f}function n(a,o){return o===void 0&&(o=0),a==="middle"&&(o=.5),a.includes("%")&&(o=parseInt(a,10)/100),o}var i=function(){function a(u){this.visible=!0,this.canvas=null,this.container=null,this.coord=null,this.options=null,this.axes=[],t.mix(this,u)}var o=a.prototype;return o._isHide=function(f){var v=this.options;return!!(v&&v[f]===!1)},o._getMiddleValue=function(f,v,b,y){if(f===0&&!y)return 0;if(f===1)return 1;var g=v[b+1].value;return!y&&g===1?1:(f+g)/2},o._getLineRange=function(f,v,b,y){var g,_,M,x=v.field,m=this.options,S="";if(m[x]&&m[x].position&&(S=m[x].position),b==="x"){var P=S==="top"?1:0;P=n(S,P),g={x:0,y:P},_={x:1,y:P},M=!1}else{if(y){var A=S==="left"?0:1;A=n(S,A),g={x:A,y:0},_={x:A,y:1}}else{var O=S==="right"?1:0;O=n(S,O),g={x:O,y:0},_={x:O,y:1}}M=!0}return g=f.convert(g),_=f.convert(_),{start:g,end:_,isVertical:M}},o._getLineCfg=function(f,v,b,y){var g,_=this._getLineRange(f,v,b,y),M=_.isVertical,x=_.start,m=_.end,S=f.center;return f.isTransposed&&(M=!M),M&&x.x>S.x||!M&&x.y>S.y?g=1:g=-1,{isVertical:M,factor:g,start:x,end:m}},o._getCircleCfg=function(f){var v={},b=f.x,y=f.y,g=y.start>y.end,_;f.isTransposed?_={x:g?0:1,y:0}:_={x:0,y:g?0:1},_=f.convert(_);var M=f.circleCentre,x=[_.x-M.x,_.y-M.y],m=[1,0],S;_.y>M.y?S=c.angle(x,m):S=c.angle(x,m)*-1;var P=S+(b.end-b.start);return v.startAngle=S,v.endAngle=P,v.center=M,v.radius=Math.sqrt(Math.pow(_.x-M.x,2)+Math.pow(_.y-M.y,2)),v.inner=f.innerRadius||0,v},o._getRadiusCfg=function(f){var v=f.x.start,b=v<0?-1:1,y,g;return f.isTransposed?(y={x:0,y:0},g={x:1,y:0}):(y={x:0,y:0},g={x:0,y:1}),{factor:b,start:f.convert(y),end:f.convert(g)}},o._getAxisPosition=function(f,v,b,y){var g="",_=this.options;if(_[y]&&_[y].position)g=_[y].position;else{var M=f.type;f.isRect?v==="x"?g="bottom":v==="y"&&(b?g="right":g="left"):M==="helix"?g="helix":v==="x"?g=f.isTransposed?"radius":"circle":g=f.isTransposed?"circle":"radius"}return g},o._getAxisDefaultCfg=function(f,v,b,y){var g=this,_=g.viewTheme,M={},x=g.options,m=v.field;if(M=t.deepMix({},_.axis[y],M,x[m]),M.viewTheme=_,M.title){var S=t.isPlainObject(M.title)?M.title:{};S.text=S.text||v.alias||m,t.deepMix(M,{title:S})}return M.ticks=v.getTicks(),f.isPolar&&!v.isCategory&&b==="x"&&Math.abs(f.endAngle-f.startAngle)===Math.PI*2&&M.ticks.pop(),M.coord=f,M.label&&t.isNil(M.label.autoRotate)&&(M.label.autoRotate=!0),x.hasOwnProperty("xField")&&x.xField.hasOwnProperty("grid")&&M.position==="left"&&t.deepMix(M,x.xField),M},o._getAxisCfg=function(f,v,b,y,g,_){g===void 0&&(g="");var M=this,x=M._getAxisPosition(f,y,g,v.field),m=M._getAxisDefaultCfg(f,v,y,x);if(!t.isEmpty(m.grid)&&b){var S=[],P=[],A=r(b.getTicks());if(A.length){var O=h(m.ticks,v.isLinear,m.grid.align==="center");t.each(O,function(R,W){P.push(R.tickValue);var F=[],Z=R.value;if(m.grid.align==="center"&&(Z=M._getMiddleValue(Z,O,W,v.isLinear)),!t.isNil(Z)){var V=f.x,k=f.y;t.each(A,function(Y){var K=y==="x"?Z:Y.value,it=y==="x"?Y.value:Z,ct=f.convert({x:K,y:it});if(f.isPolar){var ht=f.circleCentre;k.start>k.end&&(it=1-it),ct.flag=V.start>V.end?0:1,ct.radius=Math.sqrt(Math.pow(ct.x-ht.x,2)+Math.pow(ct.y-ht.y,2))}F.push(ct)}),S.push({_id:_+"-"+y+g+"-grid-"+R.tickValue,points:F})}})}m.grid.items=S,m.grid.tickValues=P}return m.type=v.type,m},o._getHelixCfg=function(f){for(var v={},b=f.a,y=f.startAngle,g=f.endAngle,_=100,M=[],x=0;x<=_;x++){var m=f.convert({x:x/100,y:0});M.push(m.x),M.push(m.y)}var S=f.convert({x:0,y:0});return v.a=b,v.startAngle=y,v.endAngle=g,v.crp=M,v.axisStart=S,v.center=f.center,v.inner=f.y.start,v},o._drawAxis=function(f,v,b,y,g,_,M){var x=this.container,m=this.canvas,S,P;f.type==="cartesian"?(S=s.Line,P=this._getLineCfg(f,v,y,M)):f.type==="helix"&&y==="x"?(S=s.Helix,P=this._getHelixCfg(f)):y==="x"?(S=s.Circle,P=this._getCircleCfg(f)):(S=s.Line,P=this._getRadiusCfg(f));var A=this._getAxisCfg(f,v,b,y,M,g);A=t.mix({},A,P),y==="y"&&_&&_.get("type")==="circle"&&(A.circle=_),A._id=g+"-"+y,t.isNil(M)||(A._id=g+"-"+y+M),t.mix(A,{canvas:m,group:x.addGroup({viewId:g})});var O=new S(A);return O.render(),this.axes.push(O),O},o.createAxis=function(f,v,b){var y=this,g=this.coord,_=g.type;if(_!=="theta"&&!(_==="polar"&&g.isTransposed)){var M;f&&!y._isHide(f.field)&&(M=y._drawAxis(g,f,v[0],"x",b)),!t.isEmpty(v)&&_!=="helix"&&t.each(v,function(x,m){y._isHide(x.field)||y._drawAxis(g,x,f,"y",b,M,m)})}},o.changeVisible=function(f){var v=this.axes;t.each(v,function(b){b.set("visible",f)})},o.clear=function(){var f=this,v=f.axes;t.each(v,function(b){b.destroy()}),f.axes=[]},a}();E.exports=i},function(E,T,e){var t=e(0),l=e(268),s=function(){function c(h){this.type="rect",this.actions=[],this.cfg={},t.mix(this,h),this.option=h||{}}var r=c.prototype;return r.reset=function(n){return this.actions=n.actions||[],this.type=n.type,this.cfg=n.cfg,this.option.actions=this.actions,this.option.type=this.type,this.option.cfg=this.cfg,this},r._execActions=function(n){var i=this.actions;t.each(i,function(a){var o=a[0];n[o](a[1],a[2])})},r.hasAction=function(n){var i=this.actions,a=!1;return t.each(i,function(o){if(n===o[0])return a=!0,!1}),a},r.createCoord=function(n,i){var a=this,o=a.type,u=a.cfg,f,v,b=t.mix({start:n,end:i},u);return o==="theta"?(f=l.Polar,a.hasAction("transpose")||a.transpose(),v=new f(b),v.type=o):(f=l[t.upperFirst(o||"")]||l.Rect,v=new f(b)),a._execActions(v),v},r.rotate=function(n){return n=n*Math.PI/180,this.actions.push(["rotate",n]),this},r.reflect=function(n){return this.actions.push(["reflect",n]),this},r.scale=function(n,i){return this.actions.push(["scale",n,i]),this},r.transpose=function(){return this.actions.push(["transpose"]),this},c}();E.exports=s},function(E,T,e){var t=e(0);function l(r,h){if(t.isNil(r)||t.isNil(h))return!1;var n=r.get("origin"),i=h.get("origin");return t.isNil(n)&&t.isNil(i)?t.isEqual(r,h):t.isEqual(n,i)}function s(r){r.shape&&r.shape.get("origin")&&(r.data=r.shape.get("origin"))}var c=function(){function r(n){this.view=null,this.canvas=null,t.assign(this,n),this._init()}var h=r.prototype;return h._init=function(){this.pixelRatio=this.canvas.get("pixelRatio")},h._getShapeEventObj=function(i){return{x:i.x/this.pixelRatio,y:i.y/this.pixelRatio,target:i.target,toElement:i.event.toElement||i.event.relatedTarget}},h._getShape=function(i,a){var o=this.view,u=o.get("canvas");return u.getShape(i,a)},h._getPointInfo=function(i){var a=this.view,o={x:i.x/this.pixelRatio,y:i.y/this.pixelRatio},u=a.getViewsByPoint(o);return o.views=u,o},h._getEventObj=function(i,a,o){return{x:a.x,y:a.y,target:i.target,toElement:i.event.toElement||i.event.relatedTarget,views:o}},h.bindEvents=function(){var i=this.canvas;i.on("mousedown",t.wrapBehavior(this,"onDown")),i.on("mousemove",t.wrapBehavior(this,"onMove")),i.on("mouseleave",t.wrapBehavior(this,"onOut")),i.on("mouseup",t.wrapBehavior(this,"onUp")),i.on("click",t.wrapBehavior(this,"onClick")),i.on("dblclick",t.wrapBehavior(this,"onClick")),i.on("touchstart",t.wrapBehavior(this,"onTouchstart")),i.on("touchmove",t.wrapBehavior(this,"onTouchmove")),i.on("touchend",t.wrapBehavior(this,"onTouchend"))},h._triggerShapeEvent=function(i,a,o){if(i&&i.name&&!i.get("destroyed")){var u=this.view;if(u.isShapeInView(i)){var f=i.name+":"+a;o.view=u,o.appendInfo=i.get("appendInfo"),u.emit(f,o);var v=u.get("parent");v&&v.emit(f,o)}}},h.onDown=function(i){var a=this.view,o=this._getShapeEventObj(i);o.shape=this.currentShape,s(o),a.emit("mousedown",o),this._triggerShapeEvent(this.currentShape,"mousedown",o)},h.onMove=function(i){var a=this,o=a.view,u=a.currentShape;u&&u.get("destroyed")&&(u=null,a.currentShape=null);var f=a._getShape(i.x,i.y)||i.currentTarget,v=a._getShapeEventObj(i);if(v.shape=f,s(v),o.emit("mousemove",v),a._triggerShapeEvent(f,"mousemove",v),u&&!l(u,f)){var b=a._getShapeEventObj(i);b.shape=u,b.toShape=f,s(b),a._triggerShapeEvent(u,"mouseleave",b)}if(f&&!l(u,f)){var y=a._getShapeEventObj(i);y.shape=f,y.fromShape=u,s(y),a._triggerShapeEvent(f,"mouseenter",y)}a.currentShape=f;var g=a._getPointInfo(i),_=a.curViews||[];_.length===0&&g.views.length&&o.emit("plotenter",a._getEventObj(i,g,g.views)),_.length&&g.views.length===0&&o.emit("plotleave",a._getEventObj(i,g,_)),g.views.length&&(v=a._getEventObj(i,g,g.views),v.shape=f,s(v),o.emit("plotmove",v)),a.curViews=g.views},h.onOut=function(i){var a=this,o=a.view,u=a._getPointInfo(i),f=a.curViews||[],v=a._getEventObj(i,u,f);a.curViews&&a.curViews.length!==0&&(!v.toElement||v.toElement.tagName!=="CANVAS")&&(o.emit("plotleave",v),a.curViews=[])},h.onUp=function(i){var a=this.view,o=this._getShapeEventObj(i);o.shape=this.currentShape,a.emit("mouseup",o),this._triggerShapeEvent(this.currentShape,"mouseup",o)},h.onClick=function(i){var a=this,o=a.view,u=a._getShape(i.x,i.y)||i.currentTarget,f=a._getShapeEventObj(i);f.shape=u,s(f),o.emit("click",f),a._triggerShapeEvent(u,i.type,f),a.currentShape=u;var v=a._getPointInfo(i),b=v.views;if(!t.isEmpty(b)){var y=a._getEventObj(i,v,b);if(a.currentShape){var g=a.currentShape;y.shape=g,s(y)}i.type==="dblclick"?(o.emit("plotdblclick",y),o.emit("dblclick",f)):o.emit("plotclick",y)}},h.onTouchstart=function(i){var a=this.view,o=this._getShape(i.x,i.y)||i.currentTarget,u=this._getShapeEventObj(i);u.shape=o,s(u),a.emit("touchstart",u),this._triggerShapeEvent(o,"touchstart",u),this.currentShape=o},h.onTouchmove=function(i){var a=this.view,o=this._getShape(i.x,i.y)||i.currentTarget,u=this._getShapeEventObj(i);u.shape=o,s(u),a.emit("touchmove",u),this._triggerShapeEvent(o,"touchmove",u),this.currentShape=o},h.onTouchend=function(i){var a=this.view,o=this._getShapeEventObj(i);o.shape=this.currentShape,s(o),a.emit("touchend",o),this._triggerShapeEvent(this.currentShape,"touchend",o)},h.clearEvents=function(){var i=this.canvas;i.off("mousemove",t.getWrapBehavior(this,"onMove")),i.off("mouseleave",t.getWrapBehavior(this,"onOut")),i.off("mousedown",t.getWrapBehavior(this,"onDown")),i.off("mouseup",t.getWrapBehavior(this,"onUp")),i.off("click",t.getWrapBehavior(this,"onClick")),i.off("dblclick",t.getWrapBehavior(this,"onClick")),i.off("touchstart",t.getWrapBehavior(this,"onTouchstart")),i.off("touchmove",t.getWrapBehavior(this,"onTouchmove")),i.off("touchend",t.getWrapBehavior(this,"onTouchend"))},r}();E.exports=c},function(E,T,e){var t=e(0),l=e(280),s=function(){function c(h){this.guides=[],this.options=[],this.xScales=null,this.yScales=null,this.view=null,this.viewTheme=null,this.frontGroup=null,this.backGroup=null,t.mix(this,h)}var r=c.prototype;return r._creatGuides=function(){var n=this,i=this.options,a=this.xScales,o=this.yScales,u=this.view,f=this.viewTheme;return this.backContainer&&u&&(this.backGroup=this.backContainer.addGroup({viewId:u.get("_id")})),this.frontContainer&&u&&(this.frontGroup=this.frontContainer.addGroup({viewId:u.get("_id")})),i.forEach(function(v){var b=v.type,y=t.deepMix({xScales:a,yScales:o,viewTheme:f},f?f.guide[b]:{},v);b=t.upperFirst(b);var g=new l[b](y);n.guides.push(g)}),n.guides},r.line=function(n){return n===void 0&&(n={}),this.options.push(t.mix({type:"line"},n)),this},r.arc=function(n){return n===void 0&&(n={}),this.options.push(t.mix({type:"arc"},n)),this},r.text=function(n){return n===void 0&&(n={}),this.options.push(t.mix({type:"text"},n)),this},r.image=function(n){return n===void 0&&(n={}),this.options.push(t.mix({type:"image"},n)),this},r.region=function(n){return n===void 0&&(n={}),this.options.push(t.mix({type:"region"},n)),this},r.regionFilter=function(n){return n===void 0&&(n={}),this.options.push(t.mix({type:"regionFilter"},n)),this},r.dataMarker=function(n){return n===void 0&&(n={}),this.options.push(t.mix({type:"dataMarker"},n)),this},r.dataRegion=function(n){return n===void 0&&(n={}),this.options.push(t.mix({type:"dataRegion"},n)),this},r.html=function(n){return n===void 0&&(n={}),this.options.push(t.mix({type:"html"},n)),this},r.render=function(n){var i=this,a=i.view,o=a&&a.get("data"),u=i._creatGuides();t.each(u,function(f){var v;f.get("top")?v=i.frontGroup||i.frontContainer:v=i.backGroup||i.backContainer,f.render(n,v,o,a)})},r.clear=function(){this.options=[],this.reset()},r.changeVisible=function(n){var i=this.guides;t.each(i,function(a){a.changeVisible(n)})},r.reset=function(){var n=this.guides;t.each(n,function(i){i.clear()}),this.guides=[],this.backGroup&&this.backGroup.remove(),this.frontGroup&&this.frontGroup.remove()},c}();E.exports=s},function(E,T,e){function t(){return t=Object.assign||function(_){for(var M=1;M<arguments.length;M++){var x=arguments[M];for(var m in x)Object.prototype.hasOwnProperty.call(x,m)&&(_[m]=x[m])}return _},t.apply(this,arguments)}var l=e(0),s=e(30),c=s.Legend,r=e(282),h=e(9),n=e(122),i=e(124),a=e(5),o="_origin",u=4.5,f=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,v=["cross","tick","plus","hyphen","line","hollowCircle","hollowSquare","hollowDiamond","hollowTriangle","hollowTriangleDown","hollowHexagon","hollowBowtie"];function b(_,M,x){var m;return l.isNil(x)?!1:(_=x.translate(_),M=x.translate(M),x.isCategory?m=_===M:m=Math.abs(_-M)<=1,m)}function y(_,M){var x;return l.each(_,function(m){if(m.get("visible")){var S=m.getYScale();if(S.field===M){x=m;return}}}),x}var g=function(){function _(x){var m=this;m.options={},l.mix(m,x),m.clear();var S=m.chart;m.container=S.get("frontPlot"),m.plotRange=S.get("plotRange")}var M=_.prototype;return M.clear=function(){var m=this.legends;this.backRange=null,l.each(m,function(S){l.each(S,function(P){P.destroy()})}),this.legends={}},M.getBackRange=function(){var m=this.backRange;if(!m){var S=this.chart.get("backPlot");m=n(S,i(this.chart.get("plotRange")));var P=this.plotRange;m.maxX-m.minX<P.br.x-P.tl.x&&m.maxY-m.minY<P.br.y-P.tl.y&&(m={minX:P.tl.x,minY:P.tl.y,maxX:P.br.x,maxY:P.br.y}),this.backRange=m}return m},M._isFieldInView=function(m,S,P){var A=!1,O=P.get("scales"),R=O[m];return R&&R.values&&(A=l.inArray(R.values,S)),A},M._bindClickEvent=function(m,S,P){var A=this,O=A.chart,R=O.get("views"),W=S.field,F=A.options;m.on("itemclick",function(Z){if(F.onClick&&F.defaultClickHandlerEnabled!==!0)F.onClick(Z);else{var V=Z.item,k=Z.checked,Y=m.get("selectedMode")==="single",K=V.dataValue;k?(l.Array.remove(P,K),A._isFieldInView(W,K,O)&&O.filter(W,function(it){return Y?it===K:!l.inArray(P,it)}),l.each(R,function(it){A._isFieldInView(W,K,it)&&it.filter(W,function(ct){return Y?ct===K:!l.inArray(P,ct)})})):Y||(P.push(K),A._isFieldInView(W,K,O)&&O.filter(W,function(it){return!l.inArray(P,it)}),l.each(R,function(it){A._isFieldInView(W,K,it)&&it.filter(W,function(ct){return!l.inArray(P,ct)})})),F.onClick&&F.onClick(Z),O.set("keepLegend",!0),O.set("keepPadding",!0),O.repaint(),O.set("keepPadding",!1),O.set("keepLegend",!1)}})},M._bindClickEventForMix=function(m){var S=this,P=S.chart,A=P.getAllGeoms();m.on("itemclick",function(O){var R=O.item.field,W=O.checked;W?l.each(A,function(F){var Z=F.getYScale().field;Z===R&&F.show()}):l.each(A,function(F){var Z=F.getYScale().field;Z===R&&F.hide()})})},M._filterLabels=function(m,S,P){if(m.get("gLabel"))m.get("gLabel").set("visible",P);else{var A=S.get("labelCfg");if(A&&A.fields&&A.fields.length>0){var O=S.getXScale(),R=S.getYScale(),W=O.field,F=R.field,Z=m.get("origin")._origin,V=S.get("labelContainer"),k=V.get("labelsGroup").get("children");l.each(k,function(Y){var K=Y.get("origin")||[];K[W]===Z[W]&&K[F]===Z[F]&&(Y.set("visible",P),m.set("gLabel",Y))})}}},M._bindFilterEvent=function(m,S){var P=this,A=this.chart,O=S.field;m.on("itemfilter",function(R){var W=R.range;A.filterShape(function(k,Y,K){if(!l.isNil(k[O])){var it=k[O]>=W[0]&&k[O]<=W[1];return P._filterLabels(Y,K,it),it}return!0});for(var F=A.getAllGeoms()||[],Z=function(Y){var K=F[Y];K.get("type")==="heatmap"&&f(function(){K.drawWithRange(W)})},V=0;V<F.length;V++)Z(V)})},M._getShapeData=function(m){var S=m.get("origin");return l.isArray(S)&&(S=S[0]),S[o]},M._bindHoverEvent=function(m,S){var P=this,A=P.chart,O=A.getAllGeoms(),R=P.options,W=A.get("canvas");m.on("itemhover",function(F){var Z=F.item.value,V=P.pre;if(!V)l.each(O,function(k){var Y=k.get("shapeContainer"),K=k.getShapes(),it=[];if(S){var ct=k.get("scales")[S];l.each(K,function(ht){var ut=P._getShapeData(ht);ut&&b(ut[S],Z,ct)&&it.push(ht)})}else k.getYScale().field===Z&&(it=K);l.isEmpty(it)||(F.shapes=it,F.geom=k,R.onHover?(R.onHover(F),Y.sort(),W.draw()):k.setShapesActived(it))}),P.pre=Z;else if(V===Z)return}),m.on("itemunhover",function(F){P.pre=null,R.onUnhover&&R.onUnhover(F),l.each(O,function(Z){Z.get("activeShapes")&&(Z.clearActivedShapes(),W.draw())})})},M._isFiltered=function(m,S,P){if(!m.isCategory)return!0;var A=!0;return P=m.invert(P),l.each(S,function(O){if(m.getText(O)===m.getText(P))return A=!1,!1}),A},M._alignLegend=function(m,S,P,A){var O=this,R=O.viewTheme,W=O.container,F=W.get("canvas"),Z=F.get("width"),V=F.get("height"),k=O.totalRegion,Y=O.plotRange,K=O.getBackRange(),it=m.get("offset")[0]||0,ct=m.get("offset")[1]||0,ht=m.getHeight(),ut=m.getWidth(),It=R.legend.margin,Nt=R.legend.legendMargin,Lt=O.legends[A].length,_t=A.split("-"),mt=0,At=0,rt=Lt>1?k:P;if(_t[0]==="left"||_t[0]==="right")V=Y.br.y,mt=O._getXAlign(_t[0],Z,P,K,ut,It),S?At=(S.get("y")||S.get("group").get("y"))+S.getHeight()+Nt:At=O._getYAlignVertical(_t[1],V,rt,K,0,It,F.get("height"));else if(_t[0]==="top"||_t[0]==="bottom")if(At=O._getYAlignHorizontal(_t[0],V,P,K,ht,It),S){var Mt=S.getWidth();mt=(S.get("x")||S.get("group").get("x"))+Mt+Nt}else mt=O._getXAlign(_t[1],Z,rt,K,0,It),_t[1]==="right"&&(mt=Y.br.x-rt.totalWidth);m.move(mt+it,At+ct)},M._getXAlign=function(m,S,P,A,O,R){var W=A.minX-O-R[3]<0?0:A.minX-O-R[3],F=m==="left"?W:A.maxX+R[1];return m==="center"&&(F=(S-P.totalWidth)/2),F},M._getYAlignHorizontal=function(m,S,P,A,O,R){var W=m==="top"?A.minY-O-R[0]:A.maxY+R[2];return W},M._getYAlignVertical=function(m,S,P,A,O,R,W){var F=m==="top"?A.minY-O-R[0]:S-P.totalHeight;return m==="center"&&(F=(W-P.totalHeight)/2),F},M._getSubRegion=function(m){var S=0,P=0,A=0,O=0;return l.each(m,function(R){var W=R.getWidth(),F=R.getHeight();S<W&&(S=W),A+=W,P<F&&(P=F),O+=F}),{maxWidth:S,totalWidth:A,maxHeight:P,totalHeight:O}},M._getRegion=function(){var m=this,S=m.viewTheme,P=m.legends,A=S.legend.legendMargin,O=[],R=0,W=0;return l.each(P,function(F){var Z=m._getSubRegion(F);O.push(Z),R+=Z.totalWidth+A,W+=Z.totalHeight+A}),{totalWidth:R,totalHeight:W,subs:O}},M._addCategoryLegend=function(m,S,P,A,O){var R=this,W=m.field,F=R.options,Z=F[W];Z&&(F=Z);var V=R.legends;V[O]=V[O]||[];var k=R.container,Y=[],K=m.getTicks(),it=!0,ct=P.get("shapeType")||"point",ht=P.getDefaultValue("shape")||"circle";F[W]&&F[W].marker?(ht=F[W].marker,ct="point",it=!1):F.marker&&(ht=F.marker,ct="point",it=!1);var ut=R.chart,It=R.viewTheme,Nt=ut.get("canvas"),Lt=R.plotRange,_t=O.split("-"),mt=_t[0]==="right"||_t[0]==="left"?Lt.bl.y-Lt.tr.y:Nt.get("width");l.each(K,function($){var dt=$.text,et=dt,ot=$.value,pt=m.invert(ot),H={isInCircle:P.isInCircle()},nt=A?R._isFiltered(m,A,ot):!0,at=P.getAttr("color"),q=P.getAttr("shape");if(at)if(at.callback&&at.callback.length>1){var Et=Array(at.callback.length-1).fill("");H.color=at.mapping.apply(at,[pt].concat(Et)).join("")||It.defaultColor}else H.color=at.mapping(pt).join("")||It.defaultColor;if(it&&q)if(q.callback&&q.callback.length>1){var vt=Array(q.callback.length-1).fill("");ht=q.mapping.apply(q,[pt].concat(vt)).join("")}else ht=q.mapping(pt).join("");var Ft=h.getShapeFactory(ct),Qt=Ft.getMarkerCfg(ht,H);a.legendMarkerRadius&&(Qt.radius=a.legendMarkerRadius),l.isFunction(ht)&&(Qt.symbol=ht),Y.push({value:et,dataValue:pt,checked:nt,marker:Qt})});var At=l.deepMix({},It.legend[_t[0]],F[W]||F,{viewId:ut.get("_id"),maxLength:mt,items:Y,container:k,position:[0,0]});At.title&&l.deepMix(At,{title:{text:m.alias||m.field}});var rt;if(R._isTailLegend(F,P))At.chart=R.chart,At.geom=P,rt=new r(At);else if(F.useHtml){var Mt=k.get("canvas").get("el");if(k=F.container,l.isString(k)&&/^\#/.test(k)){var z=k.replace("#","");k=document.getElementById(z)}k||(k=Mt.parentNode),At.container=k,At.legendStyle===void 0&&(At.legendStyle={}),At.legendStyle.CONTAINER_CLASS=t({},At.legendStyle.CONTAINER_CLASS,{position:"absolute",overflow:"auto","z-index":Mt.style.zIndex===""?1:parseInt(Mt.style.zIndex,10)+1}),F.flipPage?(At.legendStyle.CONTAINER_CLASS.height=_t[0]==="right"||_t[0]==="left"?mt+"px":"auto",At.legendStyle.CONTAINER_CLASS.width=_t[0]==="right"||_t[0]==="left"?"auto":mt+"px",rt=new c.CatPageHtml(At)):rt=new c.CatHtml(At)}else rt=new c.Category(At);return R._bindClickEvent(rt,m,A),V[O].push(rt),rt},M._bindChartMove=function(m){var S=this.chart,P=this.legends;S.on("plotmove",function(A){var O=!1;if(A.target){var R=A.target.get("origin");if(R){var W=R[o]||R[0][o],F=m.field;if(W){var Z=W[F];l.each(P,function(V){l.each(V,function(k){O=!0,!k.destroyed&&k.activate(Z)})})}}}O||l.each(P,function(V){l.each(V,function(k){!k.destroyed&&k.deactivate()})})})},M._addContinuousLegend=function(m,S,P){var A=this,O=A.legends;O[P]=O[P]||[];var R=A.container,W=m.field,F=m.getTicks(),Z=[],V,k,Y,K=A.viewTheme;l.each(F,function(It){var Nt=It.value,Lt=m.invert(Nt),_t=S.mapping(Lt).join("");Z.push({value:It.tickValue,attrValue:_t,color:_t,scaleValue:Nt}),Nt===0&&(k=!0),Nt===1&&(Y=!0)}),k||Z.push({value:m.min,attrValue:S.mapping(0).join(""),color:S.mapping(0).join(""),scaleValue:0}),Y||Z.push({value:m.max,attrValue:S.mapping(1).join(""),color:S.mapping(1).join(""),scaleValue:1});var it=A.options,ct=P.split("-"),ht=K.legend[ct[0]];(it&&it.slidable===!1||it[W]&&it[W].slidable===!1)&&(ht=l.mix({},ht,K.legend.gradient));var ut=l.deepMix({},ht,it[W]||it,{items:Z,attr:S,formatter:m.formatter,container:R,position:[0,0]});if(ut.title&&l.deepMix(ut,{title:{text:m.alias||m.field}}),S.type==="color")V=new c.Color(ut);else if(S.type==="size")it&&it.sizeType==="circle"?V=new c.CircleSize(ut):V=new c.Size(ut);else return;return A._bindFilterEvent(V,m),O[P].push(V),V},M._isTailLegend=function(m,S){if(m.hasOwnProperty("attachLast")&&m.attachLast){var P=S.get("type");if(P==="line"||P==="lineStack"||P==="area"||P==="areaStack")return!0}return!1},M._adjustPosition=function(m,S){var P;if(S)P="right-top";else if(l.isArray(m))P=String(m[0])+"-"+String(m[1]);else{var A=m.split("-");A.length===1?(A[0]==="left"&&(P="left-bottom"),A[0]==="right"&&(P="right-bottom"),A[0]==="top"&&(P="top-center"),A[0]==="bottom"&&(P="bottom-center")):P=m}return P},M.addLegend=function(m,S,P,A){var O=this,R=O.options,W=m.field,F=R[W],Z=O.viewTheme;if(F===!1)return null;if(F&&F.custom)O.addCustomLegend(W);else{var V=R.position||Z.defaultLegendPosition;V=O._adjustPosition(V,O._isTailLegend(R,P)),F&&F.position&&(V=O._adjustPosition(F.position,O._isTailLegend(F,P)));var k;m.isLinear?k=O._addContinuousLegend(m,S,V):k=O._addCategoryLegend(m,S,P,A,V),k&&(O._bindHoverEvent(k,W),R.reactive&&O._bindChartMove(m))}},M.addCustomLegend=function(m){var S=this,P=S.chart,A=S.viewTheme,O=S.container,R=S.options;m&&(R=R[m]);var W=R.position||A.defaultLegendPosition;W=S._adjustPosition(W);var F=S.legends;F[W]=F[W]||[];var Z=R.items;if(!!Z){var V=P.getAllGeoms();l.each(Z,function(Nt){var Lt=y(V,Nt.value);l.isPlainObject(Nt.marker)?Nt.marker.radius=Nt.marker.radius||a.legendMarkerRadius||u:(Nt.marker={symbol:Nt.marker||"circle",radius:a.legendMarkerRadius||u},l.indexOf(v,Nt.marker.symbol)!==-1?Nt.marker.stroke=Nt.fill:Nt.marker.fill=Nt.fill);var _t=Nt.marker.symbol;l.isString(_t)&&_t.indexOf("hollow")!==-1&&(Nt.marker.symbol=l.lowerFirst(_t.substr(6))),Nt.checked=l.isNil(Nt.checked)?!0:Nt.checked,Nt.geom=Lt});var k=P.get("canvas"),Y=S.plotRange,K=W.split("-"),it=K[0]==="right"||K[0]==="left"?Y.bl.y-Y.tr.y:k.get("width"),ct=l.deepMix({},A.legend[K[0]],R,{maxLength:it,items:Z,container:O,position:[0,0]}),ht;if(R.useHtml){var ut=R.container;if(/^\#/.test(O)){var It=ut.replace("#","");ut=document.getElementById(It)}else ut||(ut=O.get("canvas").get("el").parentNode);ct.container=ut,ct.legendStyle===void 0&&(ct.legendStyle={}),ct.legendStyle.CONTAINER_CLASS||(ct.legendStyle.CONTAINER_CLASS={height:K[0]==="right"||K[0]==="left"?it+"px":"auto",width:K[0]==="right"||K[0]==="left"?"auto":it+"px",position:"absolute",overflow:"auto"}),R.flipPage?ht=new c.CatPageHtml(ct):ht=new c.CatHtml(ct)}else ht=new c.Category(ct);return F[W].push(ht),ht.on("itemclick",function(Nt){R.onClick&&R.onClick(Nt)}),S._bindHoverEvent(ht),ht}},M.addMixedLegend=function(m,S){var P=this,A=P.options,O=[];l.each(m,function(F){var Z=F.alias||F.field,V=A[F.field];l.each(S,function(k){if(k.getYScale()===F&&F.values&&F.values.length>0&&V!==!1){var Y=k.get("shapeType")||"point",K=k.getDefaultValue("shape")||"circle",it=h.getShapeFactory(Y),ct={color:k.getDefaultValue("color")},ht=it.getMarkerCfg(K,ct);a.legendMarkerRadius&&(ht.radius=a.legendMarkerRadius);var ut={value:Z,marker:ht,field:F.field};O.push(ut)}})});var R={custom:!0,items:O};P.options=l.deepMix({},R,P.options);var W=P.addCustomLegend();P._bindClickEventForMix(W)},M.alignLegends=function(){var m=this,S=m.legends,P=m._getRegion(S);m.totalRegion=P;var A=0;return l.each(S,function(O,R){var W=P.subs[A];l.each(O,function(F,Z){var V=O[Z-1];F.get("useHtml")&&!F.get("autoPosition")||m._alignLegend(F,V,W,R)}),A++}),this},_}();E.exports=g},function(E,T,e){var t=e(154),l=e(0),s=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]+)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/,c={LINEAR:"linear",CAT:"cat",TIME:"time"},r=function(){function h(i){this.defs={},this.viewTheme={scales:{}},this.filters={},l.assign(this,i)}var n=h.prototype;return n._getDef=function(a){var o=this.defs,u=this.viewTheme,f=null;return(u.scales[a]||o[a])&&(f=l.mix({},u.scales[a]),l.each(o[a],function(v,b){l.isNil(v)?delete f[b]:f[b]=v}),this.filters[a]&&(delete f.min,delete f.max)),f},n._getDefaultType=function(a,o){var u=c.LINEAR,f=l.Array.firstValue(o,a);return l.isArray(f)&&(f=f[0]),s.test(f)?u=c.TIME:l.isString(f)&&(u=c.CAT),u},n._getScaleCfg=function(a,o,u){var f={field:o},v=l.Array.values(u,o);if(f.values=v,!t.isCategory(a)&&a!=="time"){var b=l.Array.getRange(v);f.min=b.min,f.max=b.max,f.nice=!0}return a==="time"&&(f.nice=!1),f},n.createScale=function(a,o){var u=this,f=u._getDef(a),v,b=o||[],y=l.Array.firstValue(b,a);if(l.isNumber(a)||l.isNil(y)&&!f)v=t.identity({value:a,field:a.toString(),values:[a]});else{var g;f&&(g=f.type),g=g||u._getDefaultType(a,b);var _=u._getScaleCfg(g,a,b);f&&l.mix(_,f),v=t[g](_)}return v},h}();E.exports=r},function(E,T,e){function t(){return t=Object.assign||function(g){for(var _=1;_<arguments.length;_++){var M=arguments[_];for(var x in M)Object.prototype.hasOwnProperty.call(M,x)&&(g[x]=M[x])}return g},t.apply(this,arguments)}var l=e(0),s=e(9),c=e(30),r=c.Tooltip,h=l.MatrixUtil,n=h.vec2,i=["line","area","path","areaStack"],a=["line","area","point"],o=["marker","showMarker"];function u(g,_){var M=-1;return l.each(g,function(x,m){var S=!0;for(var P in _)if(_.hasOwnProperty(P)&&!o.includes(P)&&!l.isObject(_[P])&&_[P]!==x[P]){S=!1;break}if(S)return M=m,!1}),M}function f(g,_){if(!g)return!1;var M="";return g.className?(l.isNil(g.className.baseVal)?M=g.className:M=g.className.baseVal,M.includes(_)):!1}function v(g,_){for(var M=g.parentNode,x=!1;M&&M!==document.body;){if(f(M,_)){x=!0;break}M=M.parentNode}return x}function b(g){var _=[];return l.each(g,function(M){var x=u(_,M);x===-1?_.push(M):_[x]=M}),_}var y=function(){function g(M){l.assign(this,M),this.timeStamp=0,this.locked=!1}var _=g.prototype;return _._normalizeEvent=function(x){var m=this.chart,S=this._getCanvas(),P=S.getPointByClient(x.clientX,x.clientY),A=S.get("pixelRatio");P.x=P.x/A,P.y=P.y/A;var O=m.getViewsByPoint(P);return P.views=O,P},_._getCanvas=function(){return this.chart.get("canvas")},_._getTriggerEvent=function(){var x=this.options,m=x.triggerOn,S;return!m||m==="mousemove"?S="plotmove":m==="click"?S="plotclick":m==="none"&&(S=null),S},_._getDefaultTooltipCfg=function(){var x=this,m=x.chart,S=x.viewTheme,P=x.options,A=l.mix({},S.tooltip),O=m.getAllGeoms().filter(function(k){return k.get("visible")}),R=[];l.each(O,function(k){var Y=k.get("type"),K=k.get("adjusts"),it=!1;K&&l.each(K,function(ct){if(ct.type==="symmetric"||ct.type==="Symmetric")return it=!0,!1}),l.indexOf(R,Y)===-1&&!it&&R.push(Y)});var W=O.length&&O[0].get("coord")?O[0].get("coord").isTransposed:!1,F;if(O.length&&O[0].get("coord")&&O[0].get("coord").type==="cartesian"){if(R[0]==="interval"&&P.shared!==!1){var Z=l.mix({},S.tooltipCrosshairsRect);Z.isTransposed=W,F={zIndex:0,crosshairs:Z}}else if(l.indexOf(a,R[0])>-1){var V=l.mix({},S.tooltipCrosshairsLine);V.isTransposed=W,F={crosshairs:V}}}return l.mix(A,F,{})},_._bindEvent=function(){var x=this.chart,m=this._getTriggerEvent();m&&(x.on(m,l.wrapBehavior(this,"onMouseMove")),x.on("plotleave",l.wrapBehavior(this,"onMouseOut")))},_._offEvent=function(){var x=this.chart,m=this._getTriggerEvent();m&&(x.off(m,l.getWrapBehavior(this,"onMouseMove")),x.off("plotleave",l.getWrapBehavior(this,"onMouseOut")))},_._setTooltip=function(x,m,S,P){var A=this,O=A.tooltip,R=A.prePoint;if(!R||R.x!==x.x||R.y!==x.y){m=b(m),A.prePoint=x;var W=A.chart,F=A.viewTheme,Z=l.isArray(x.x)?x.x[x.x.length-1]:x.x,V=l.isArray(x.y)?x.y[x.y.length-1]:x.y;O.get("visible")||W.emit("tooltip:show",{x:Z,y:V,tooltip:O});var k=m[0],Y=k.title||k.name;O.isContentChange(Y,m)&&(W.emit("tooltip:change",{tooltip:O,x:Z,y:V,items:m}),Y=m[0].title||m[0].name,O.setContent(Y,m),l.isEmpty(S)?(O.clearMarkers(),O.set("markerItems",[])):A.options.hideMarkers===!0?O.set("markerItems",S):O.setMarkers(S,F.tooltipMarker));var K=this._getCanvas();P===K&&O.get("type")==="mini"?O.hide():(O.setPosition(Z,V,P),O.show())}},_.hideTooltip=function(){var x=this.tooltip,m=this.chart,S=this._getCanvas();this.prePoint=null,x.hide(),m.emit("tooltip:hide",{tooltip:x}),S.draw()},_.onMouseMove=function(x){if(!(l.isEmpty(x.views)||this.locked)){var m=this.timeStamp,S=+new Date,P={x:x.x,y:x.y};S-m>16&&!this.chart.get("stopTooltip")&&(this.showTooltip(P,x.views,x.shape),this.timeStamp=S)}},_.onMouseOut=function(x){var m=this.tooltip;!m.get("visible")||!m.get("follow")||this.locked||x&&x.toElement&&(f(x.toElement,"g2-tooltip")||v(x.toElement,"g2-tooltip"))||this.hideTooltip()},_.renderTooltip=function(){var x=this;if(!x.tooltip){var m=x.chart,S=x.viewTheme,P=x._getCanvas(),A=x._getDefaultTooltipCfg(),O=x.options;O=l.deepMix({plotRange:m.get("plotRange"),capture:!1,canvas:P,frontPlot:m.get("frontPlot"),viewTheme:S.tooltip,backPlot:m.get("backPlot")},A,O),O.crosshairs&&O.crosshairs.type==="rect"&&(O.zIndex=0),O.visible=!1;var R;O.type==="mini"?(O.crosshairs=!1,O.position="top",R=new r.Mini(O)):O.useHtml?R=new r.Html(O):R=new r.Canvas(O),x.tooltip=R;var W=x._getTriggerEvent(),F=R.get("container");!R.get("enterable")&&W==="plotmove"&&F&&(F.onmousemove=function(Z){var V=x._normalizeEvent(Z);m.emit(W,V)}),F&&(F.onmouseleave=function(){x.locked||x.hideTooltip()}),x._bindEvent()}},_._formatMarkerOfItem=function(x,m,S){var P=this,A=P.options,O=S.point;if(O&&O.x&&O.y){var R=l.isArray(O.x)?O.x[O.x.length-1]:O.x,W=l.isArray(O.y)?O.y[O.y.length-1]:O.y;O=x.applyMatrix(R,W,1),S.x=O[0],S.y=O[1],S.showMarker=!0,S.color.substring(0,2)==="l("&&(!A.hasOwnProperty("useHtml")||A.useHtml)&&(S.color=S.color.split(" ")[1].substring(2));var F=P._getItemMarker(m,S);if(S.marker=F,l.indexOf(i,m.get("type"))!==-1)return S}return null},_.lockTooltip=function(){this.locked=!0},_.unlockTooltip=function(){this.locked=!1},_.showTooltip=function(x,m,S){var P=this,A=this;if(!(l.isEmpty(m)||!x)){this.tooltip||this.renderTooltip();var O=A.options,R=[],W=[];if(l.each(m,function(K){if(!K.get("tooltipEnable"))return!0;var it=K.get("geoms"),ct=K.get("coord");l.each(it,function(ht){var ut=ht.get("type");if(ht.get("visible")&&ht.get("tooltipCfg")!==!1){var It=ht.get("dataArray");if(ht.isShareTooltip()||O.shared===!1&&l.inArray(["area","line","path","polygon"],ut)){var Nt=ht.getXScale(),Lt=ht.getAttr("color"),_t=Lt?Lt.field:void 0;if(ut==="interval"&&Nt.field===_t&&ht.hasAdjust("dodge")){var mt=l.find(It,function($){return!!ht.findPoint(x,$)});l.each(mt,function($){var dt=ht.getTipItems($,O.title);l.each(dt,function(et){var ot=A._formatMarkerOfItem(ct,ht,et);ot&&R.push(ot)}),W=W.concat(dt)})}else l.each(It,function($){var dt=ht.findPoint(x,$);if(dt){var et=ht.getTipItems(dt,O.title);l.each(et,function(ot){var pt=A._formatMarkerOfItem(ct,ht,ot);pt&&R.push(pt)}),W=W.concat(et)}})}else{var At=ht.get("shapeContainer"),rt=At.get("canvas"),Mt=rt.get("pixelRatio"),z=At.getShape(x.x*Mt,x.y*Mt);z&&z.get("visible")&&z.get("origin")&&(W=ht.getTipItems(z.get("origin"),O.title)),l.each(W,function($){var dt=P._formatMarkerOfItem(ct,ht,$);dt&&R.push(dt)})}}}),l.each(W,function(ht){var ut=ht.point,It=l.isArray(ut.x)?ut.x[ut.x.length-1]:ut.x,Nt=l.isArray(ut.y)?ut.y[ut.y.length-1]:ut.y;ut=ct.applyMatrix(It,Nt,1),ht.x=ut[0],ht.y=ut[1]})}),W.length){var F=W[0];if(!W.every(function(K){return K.title===F.title})){var Z=F,V=Infinity;W.forEach(function(K){var it=n.distance([x.x,x.y],[K.x,K.y]);it<V&&(V=it,Z=K)}),W=W.filter(function(K){return K.title===Z.title}),R=R.filter(function(K){return K.title===Z.title})}if(O.shared===!1&&W.length>1){var k=W[0],Y=Math.abs(x.y-k.y);l.each(W,function(K){Math.abs(x.y-K.y)<=Y&&(k=K,Y=Math.abs(x.y-K.y))}),k&&k.x&&k.y&&(R=[k]),W=[k]}A._setTooltip(x,W,R,S)}else A.hideTooltip()}},_.clear=function(){var x=this.tooltip;x&&x.destroy(),this.tooltip=null,this.prePoint=null,this._offEvent()},_._getItemMarker=function(x,m){var S=this.options,P=S.marker||this.viewTheme.tooltip.marker;if(l.isFunction(P)){var A=x.get("shapeType")||"point",O=x.getDefaultValue("shape")||"circle",R=s.getShapeFactory(A),W={color:m.color},F=R.getMarkerCfg(O,W);return P(F,m)}return t({fill:m.color},P)},g}();E.exports=y},function(E,T,e){function t(g){if(g===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}function l(g,_){g.prototype=Object.create(_.prototype),g.prototype.constructor=g,g.__proto__=_}var s=e(120),c=e(8),r=e(0),h=e(121),n=e(5),i=e(132),a="_origin",o=e(271);function u(g){var _=g.startAngle,M=g.endAngle;return!(!r.isNil(_)&&!r.isNil(M)&&M-_<Math.PI*2)}function f(g,_,M){var x=(g-_)/(M-_);return x>=0&&x<=1}function v(g,_){var M=!1;if(g){var x=g.type;if(x==="theta"){var m=g.start,S=g.end;M=f(_.x,m.x,S.x)&&f(_.y,m.y,S.y)}else{var P=g.invert(_);M=P.x>=0&&P.y>=0&&P.x<=1&&P.y<=1}}return M}var b={};r.each(c,function(g,_){var M=r.lowerFirst(_);b[M]=function(x){var m=new g(x);return this.addGeom(m),m}});var y=function(g){l(M,g);var _=M.prototype;_.getDefaultCfg=function(){return{viewContainer:null,coord:null,start:{x:0,y:0},end:{x:1,y:1},geoms:[],scales:{},options:{},scaleController:null,padding:0,theme:null,parent:null,tooltipEnable:!0,animate:n.animate,visible:!0}};function M(x){var m;m=g.call(this,x)||this;var S=t(m);return S._setTheme(),r.each(c,function(P,A){var O=r.lowerFirst(A);S[O]=function(R){R===void 0&&(R={}),R.viewTheme=S.get("viewTheme");var W=new P(R);return S.addGeom(W),W}}),S.init(),m}return _._setTheme=function(){var m=this,S=m.get("theme"),P={},A={};r.isObject(S)?A=S:r.indexOf(Object.keys(i),S)!==-1&&(A=i[S]),r.deepMix(P,n,A),m.set("viewTheme",P)},_.init=function(){this._initViewPlot(),this.get("data")&&this._initData(this.get("data")),this._initOptions(),this._initControllers(),this._bindEvents()},_._initOptions=function(){var m=this,S=r.mix({},m.get("options"));S.scales||(S.scales={}),S.coord||(S.coord={}),S.animate===!1&&this.set("animate",!1),(S.tooltip===!1||r.isNull(S.tooltip))&&this.set("tooltipEnable",!1),S.geoms&&S.geoms.length&&r.each(S.geoms,function(O){m._createGeom(O)});var P=m.get("scaleController");P&&(P.defs=S.scales);var A=m.get("coordController");A&&A.reset(S.coord),this.set("options",S)},_._createGeom=function(m){var S=m.type,P;this[S]&&(P=this[S](),r.each(m,function(A,O){if(P[O])if(r.isObject(A)&&A.field)if(A==="label")P[O](A.field,A.callback,A.cfg);else{var R;r.each(A,function(W,F){F!=="field"&&(R=W)}),P[O](A.field,R)}else P[O](A)}))},_._initControllers=function(){var m=this,S=m.get("options"),P=m.get("viewTheme"),A=m.get("canvas"),O=new h.Scale({viewTheme:P,defs:S.scales}),R=new h.Coord(S.coord);this.set("scaleController",O),this.set("coordController",R);var W=new h.Axis({canvas:A,viewTheme:P});this.set("axisController",W);var F=new h.Guide({viewTheme:P,options:S.guides||[]});this.set("guideController",F)},_._initViewPlot=function(){this.get("viewContainer")||this.set("viewContainer",this.get("middlePlot"))},_._initGeoms=function(){for(var m=this.get("geoms"),S=this.get("filteredData"),P=this.get("coord"),A=this.get("_id"),O=0;O<m.length;O++){var R=m[O];R.set("data",S),R.set("coord",P),R.set("_id",A+"-geom"+O),R.set("keyFields",this.get("keyFields")),R.init()}},_._clearGeoms=function(){for(var m=this,S=m.get("geoms"),P=0;P<S.length;P++){var A=S[P];A.clear()}},_._removeGeoms=function(){for(var m=this,S=m.get("geoms");S.length>0;){var P=S.shift();P.destroy()}},_._drawGeoms=function(){this.emit("beforedrawgeoms");for(var m=this.get("geoms"),S=this.get("coord"),P=0;P<m.length;P++){var A=m[P];A.setCoord(S),A.paint()}this.emit("afterdrawgeoms")},_.isShapeInView=function(m){var S=this.get("_id"),P=m._id;if(P)return P.split("-")[0]===S;for(var A=m;A;){if(A.get("viewId")===S)return!0;A=A.get("parent")}return!1},_.getViewRegion=function(){var m=this,S=m.get("parent"),P,A;if(S){var O=S.getViewRegion(),R=m._getViewRegion(O.start,O.end);P=R.start,A=R.end}else P=m.get("start"),A=m.get("end");return{start:P,end:A}},_._getViewRegion=function(m,S){var P=this.get("start"),A=this.get("end"),O=P.x,R=1-A.y,W=A.x,F=1-P.y,Z=this.get("padding"),V=r.toAllPadding(Z),k=V[0],Y=V[1],K=V[2],it=V[3],ct={x:O*(S.x-m.x)+m.x+it,y:R*(S.y-m.y)+m.y-K},ht={x:W*(S.x-m.x)+m.x-Y,y:F*(S.y-m.y)+m.y+k};return{start:ct,end:ht}},_._createCoord=function(){var m=this.get("coordController"),S=this.getViewRegion(),P=m.createCoord(S.start,S.end);this.set("coord",P)},_._renderAxes=function(){var m=this.get("options"),S=m.axes;if(S!==!1){var P=this.get("axisController");P.container=this.get("backPlot"),P.coord=this.get("coord"),P.options=S||{};var A=this.getXScale(),O=this.getYScales(),R=this.get("_id");P.createAxis(A,O,R)}},_._renderGuides=function(){var m=this.get("guideController");if(!r.isEmpty(m.options)){var S=this.get("coord");m.view=this,m.backContainer=this.get("backPlot"),m.frontContainer=this.get("frontPlot"),m.xScales=this._getScales("x"),m.yScales=this._getScales("y"),m.render(S)}},_._bindEvents=function(){var m=new h.Event({view:this,canvas:this.get("canvas")});m.bindEvents(),this.set("eventController",m)},_._clearEvents=function(){var m=this.get("eventController");m&&m.clearEvents()},_._getScales=function(m){for(var S=this.get("geoms"),P={},A=0;A<S.length;A++){var O=S[A],R=m==="x"?O.getXScale():O.getYScale();R&&!P[R.field]&&(P[R.field]=R)}return P},_._adjustScale=function(){this._setCatScalesRange();for(var m=this.get("geoms"),S=this.get("scaleController"),P=S.defs,A=0;A<m.length;A++){var O=m[A];if(O.get("type")==="interval"){var R=O.getYScale(),W=R.field,F=R.min,Z=R.max,V=R.type;!(P[W]&&P[W].min)&&V!=="time"&&(F>0?R.change({min:0}):Z<=0&&R.change({max:0}))}}},_._setCatScalesRange=function(){var m=this,S=m.get("coord"),P=m.get("viewTheme"),A=m.getXScale(),O=m.getYScales(),R=[];A&&R.push(A),R=R.concat(O);var W=S.isPolar&&u(S),F=m.get("scaleController"),Z=F.defs;r.each(R,function(V){if((V.isCategory||V.isIdentity)&&V.values&&!(Z[V.field]&&Z[V.field].range)){var k=V.values.length,Y;if(k===1)Y=[.5,1];else{var K=1,it=0;W?S.isTransposed?(K=P.widthRatio.multiplePie,it=1/k*K,Y=[it/2,1-it/2]):Y=[0,1-1/k]:(it=1/k*1/2,Y=[it,1-it])}V.range=Y}})},_.getXScale=function(){var m=this.get("geoms"),S=null;return r.isEmpty(m)||(S=m[0].getXScale()),S},_.getYScales=function(){for(var m=this.get("geoms"),S=[],P=0;P<m.length;P++){var A=m[P],O=A.getYScale();O&&r.indexOf(S,O)===-1&&S.push(O)}return S},_.getXY=function(m){var S=this,P=S.get("coord"),A=S._getScales("x"),O=S._getScales("y"),R,W;for(var F in m)A[F]&&(R=A[F].scale(m[F])),O[F]&&(W=O[F].scale(m[F]));return!r.isNil(R)&&!r.isNil(W)?P.convert({x:R,y:W}):null},_.getSnapRecords=function(m){var S=this,P=S.get("geoms"),A=[];return r.each(P,function(O){var R=O.get("dataArray"),W;r.each(R,function(F){W=O.findPoint(m,F),W&&A.push(W)})}),A},_.addGeom=function(m){var S=this,P=S.get("geoms");P.push(m),m.set("view",S);var A=S.get("viewContainer");m.set("container",A),m.set("animate",S.get("animate")),m.bindEvents()},_.removeGeom=function(m){var S=this.get("geoms");r.Array.remove(S,m),m.destroy()},_.createScale=function(m,S){var P=this.get("scales"),A=this.get("parent"),O=P[m];if(!S){var R=this.get("filteredData"),W=this._getFieldsForLegend();R.length&&!W.includes(m)?S=R:S=this.get("data")}var F=this.get("scaleController");if(O){if(O.sync){var V=F.createScale(m,S);this._syncScale(O,V)}}else{if(O=F.createScale(m,S),O.sync&&A){var Z=A.createScale(m,S);O=this._getSyncScale(Z,O)}P[m]=O}return O},_._getFieldsForLegend=function(){var m=[],S=this.get("geoms");return r.each(S,function(P){var A=P.getFieldsForLegend();m=m.concat(A)}),r.uniq(m)},_._getSyncScale=function(m,S){return m.type!==S.type?S:(this._syncScale(m,S),m)},_._syncScale=function(m,S){var P=r.union(m.values,S.values);if(S.isLinear){var A=Math.max(m.max,S.max),O=Math.min(m.min,S.min);(m.max!==A||m.min!==O)&&m.change({min:O,max:A,values:P})}P.length!==m.values.length&&m.change({values:P})},_.getFilteredValues=function(m){var S=this.get("scales")[m],P=S.values,A=this._getFilters(),O;return A&&A[m]?O=P.filter(A[m]):O=P.slice(0),O},_.getFilteredOutValues=function(m){var S=this.get("scales")[m],P=S.values,A=this._getFilters(),O;return A&&A[m]?O=P.filter(function(){return!A[m].apply(A,arguments)}):O=[],O},_.filter=function(m,S){var P=this.get("options");P.filters||(P.filters={}),P.filters[m]=S,this.get("scaleController").filters=P.filters},_._getFilters=function(){var m=this.get("options");return m.filters},_.execFilter=function(m){var S=this,P=S._getFilters();return P&&(m=m.filter(function(A){var O=!0;return r.each(P,function(R,W){if(R&&(O=R(A[W],A),!O))return!1}),O})),m},_.axis=function(m,S){var P=this.get("options");if(m===!1)P.axes=!1;else{P.axes||(P.axes={});var A=P.axes;A[m]=S}return this},_.guide=function(){return this.get("guideController")},_._getKeyFields=function(m){var S=[];r.each(m,function(P,A){P.key&&S.push(A)}),this.set("keyFields",S)},_.scale=function(m,S){var P=this.get("options"),A=P.scales;return r.isObject(m)?r.mix(A,m):A[m]=S,this._getKeyFields(A),this},_.tooltip=function(m){return this.set("tooltipEnable",m),this},_.animate=function(m){var S=this.get("options");return S.animate=m,this.set("animate",m),this},_.changeOptions=function(m){return this.set("options",m),this._initOptions(m),this},_.getViewsByPoint=function(m){var S=[],P=this.get("views");return v(this.get("coord"),m)&&S.push(this),r.each(P,function(A){A.get("visible")&&v(A.get("coord"),m)&&S.push(A)}),S},_.eachShape=function(m){var S=this,P=S.get("views"),A=S.get("canvas");r.each(P,function(R){R.eachShape(m)});var O=this.get("geoms");return r.each(O,function(R){var W=R.getShapes();r.each(W,function(F){var Z=F.get("origin");if(r.isArray(Z)){var V=Z.map(function(Y){return Y[a]});m(V,F,R,S)}else{var k=Z[a];m(k,F,R,S)}})}),A.draw(),this},_.filterShape=function(m){var S=function(A,O,R,W){m(A,O,R,W)?O.show():O.hide()};return this.eachShape(S),this},_.clearInner=function(){this.set("scales",{}),this.emit("beforeclearinner");var m=this.get("options");m.geoms=null,this._clearGeoms(),this.get("guideController")&&this.get("guideController").reset(),this.get("axisController")&&this.get("axisController").clear(),this.emit("afterclearinner")},_.clear=function(){var m=this.get("options");return m.filters=null,this._removeGeoms(),this.clearInner(),this.get("guideController")&&this.get("guideController").clear(),this.set("isUpdate",!1),this.set("keyFields",[]),this},_.coord=function(m,S){var P=this.get("coordController");return P.reset({type:m,cfg:S}),P},_.resetCoord=function(){this._createCoord()},_.source=function(m,S){return this._initData(m),S&&this.scale(S),this.emit("setdata"),this},_.changeData=function(m){return this.emit("beforechangedata"),this._initData(m),this.emit("afterchangedata"),this.repaint(),this},_._initData=function(m){var S=this.get("dataView");S&&(S.off("change",r.getWrapBehavior(this,"_onViewChange")),this.set("dataView",null)),m&&m.isDataView&&(m.on("change",r.wrapBehavior(this,"_onViewChange")),this.set("dataView",m),m=m.rows),this.set("data",m)},_._onViewChange=function(){this.emit("beforechangedata");var m=this.get("dataView"),S=m.rows;this.set("data",S),this.emit("afterchangedata"),this.repaint()},_.beforeRender=function(){var m=this.get("views");r.each(m,function(S){S.beforeRender()}),this.initView()},_.drawComponents=function(){var m=this.get("views");r.each(m,function(S){S.drawComponents()}),this._renderAxes(),this._renderGuides()},_.drawCanvas=function(m){if(!m){var S=this.get("views"),P=this.get("backPlot");P.sort();var A=this.get("canvas"),O=this.get("animate");if(O){var R=this.get("isUpdate");r.each(S,function(W){o.execAnimation(W,R)}),o.execAnimation(this,R)}else A.draw()}},_.render=function(m){return this.clearInner(),this.emit("beforerender"),this.beforeRender(),this.emit("beforepaint"),this.drawComponents(),this.paint(),this.emit("afterpaint"),this.drawCanvas(m),this.emit("afterrender"),this.set("rendered",!0),this},_.initView=function(){var m=this.get("data")||[],S=this.execFilter(m);this.set("filteredData",S),this._createCoord(),this.emit("beforeinitgeoms"),this._initGeoms(),this._adjustScale()},_.paint=function(){var m=this.get("views");r.each(m,function(P){P.paint()});var S=this.get("data");r.isEmpty(S)||this._drawGeoms(),this.get("visible")||this.changeVisible(!1,!0)},_.changeVisible=function(m,S){var P=this.get("geoms");if(r.each(P,function(O){O.changeVisible(m,!0)}),this.get("axisController")&&this.get("axisController").changeVisible(m),this.get("guideController")&&this.get("guideController").changeVisible(m),!S){var A=this.get("canvas");A.draw()}},_.repaint=function(){this.set("isUpdate",!0),this.clearInner(),this.render()},_.destroy=function(){this._clearEvents();var m=this.get("dataView");m&&m.off("change",r.getWrapBehavior(this,"_onViewChange")),this.clear(),g.prototype.destroy.call(this)},M}(s);E.exports=y},function(E,T,e){var t=e(30),l=t.Guide,s=e(281);l.RegionFilter=s,E.exports=l},function(E,T,e){function t(n,i){n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i}var l=e(0),s=e(20),c=e(31),r=c.Path,h=function(n){t(i,n);function i(){return n.apply(this,arguments)||this}var a=i.prototype;return a.getDefaultCfg=function(){var u=n.prototype.getDefaultCfg.call(this);return l.mix({},u,{name:"regionFilter",zIndex:1,top:!0,start:null,end:null,color:null,apply:null,style:{opacity:1}})},a.render=function(u,f,v,b){var y=this,g=f.addGroup();g.name="guide-region-filter",b.once("afterpaint",function(){if(!g.get("destroyed")){y._drawShapes(b,g);var _=y._drawClip(u);g.attr({clip:_}),y.set("clip",_),y.get("appendInfo")&&g.setSilent("appendInfo",y.get("appendInfo")),y.set("el",g)}})},a._drawShapes=function(u,f){var v=this,b=[],y=u.getAllGeoms();return y.map(function(g){var _=g.getShapes(),M=g.get("type"),x=v._geomFilter(M);return x&&_.map(function(m){var S=m.type,P=l.cloneDeep(m.attr());v._adjustDisplay(P);var A=f.addShape(S,{attrs:P});return b.push(A),m}),g}),b},a._drawClip=function(u){var f=this,v=f.parsePoint(u,f.get("start")),b=f.parsePoint(u,f.get("end")),y=[["M",v.x,v.y],["L",b.x,v.y],["L",b.x,b.y],["L",v.x,b.y],["z"]],g=new r({attrs:{path:y,opacity:1}});return g},a._adjustDisplay=function(u){var f=this,v=f.get("color");u.fill&&(u.fill=u.fillStyle=v),u.stroke=u.strokeStyle=v},a._geomFilter=function(u){var f=this,v=f.get("apply");return v?l.contains(v,u):!0},a.clear=function(){n.prototype.clear.call(this);var u=this.get("clip");u&&u.remove()},i}(s);E.exports=h},function(E,T,e){function t(i,a){i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.__proto__=a}var l=e(0),s=e(30),c=e(5),r=s.Legend,h=r.Category,n=function(i){t(a,i);function a(){return i.apply(this,arguments)||this}var o=a.prototype;return o.getDefaultCfg=function(){var f=i.prototype.getDefaultCfg.call(this);return l.mix({},f,{type:"tail-legend",layout:"vertical",autoLayout:!0})},o._addItem=function(f){var v=this.get("itemsGroup"),b=this._getNextX(),y=0,g=this.get("unCheckColor"),_=v.addGroup({x:0,y:0,value:f.value,scaleValue:f.scaleValue,checked:f.checked});_.translate(b,y),_.set("viewId",v.get("viewId"));var M=this.get("textStyle"),x=this.get("_wordSpaceing"),m=0;if(f.marker){var S=l.mix({},f.marker,{x:f.marker.radius,y:0});f.checked||(S.fill&&(S.fill=g),S.stroke&&(S.stroke=g));var P=_.addShape("marker",{type:"marker",attrs:S});P.attr("cursor","pointer"),P.name="legend-marker",m+=P.getBBox().width+x}var A=l.mix({},M,{x:m,y:0,text:this._formatItemValue(f.value)});f.checked||l.mix(A,{fill:g});var O=_.addShape("text",{attrs:A});O.attr("cursor","pointer"),O.name="legend-text",this.get("appendInfo")&&O.setSilent("appendInfo",this.get("appendInfo"));var R=_.getBBox(),W=this.get("itemWidth"),F=_.addShape("rect",{attrs:{x:b,y:y-R.height/2,fill:"#fff",fillOpacity:0,width:W||R.width,height:R.height}});return F.attr("cursor","pointer"),F.setSilent("origin",f),F.name="legend-item",this.get("appendInfo")&&F.setSilent("appendInfo",this.get("appendInfo")),_.name="legendGroup",_},o._adjust=function(){var f=this,v=f.get("geom");if(v){var b=f.get("group").attr("matrix");b[7]=0;var y=f.get("geom").get("dataArray"),g=this.get("itemsGroup").get("children"),_=0;l.each(g,function(M){var x=y[_],m=x[x.length-1].y;l.isArray(m)&&(m=m[1]);var S=M.getBBox().height,P=M.get("x"),A=m-S/2;M.translate(P,A),_++}),f.get("autoLayout")&&f._antiCollision(g)}},o.render=function(){var f=this;i.prototype.render.call(this);var v=this.get("chart");v.once("afterpaint",function(){f._adjust()})},o._getPreviousY=function(f){var v=f.attr("matrix")[7],b=f.getBBox().height;return v+b},o._adjustDenote=function(f,v,b){var y=c.legend.legendMargin,g=-2,_=-y*2;f.addShape("path",{attrs:{path:"M"+g+","+v+"L"+_+","+(b+3),lineWidth:1,lineDash:[2,2],stroke:"#999999"}})},o._antiCollision=function(f){if(f===void 0&&(f=[]),!!f.length){var v=this;f.sort(function(V,k){var Y=V.attr("matrix")[7],K=k.attr("matrix")[7];return Y-K});var b=!0,y=v.get("chart").get("plotRange"),g=y.tl.y,_=Math.abs(g-y.bl.y),M=f[0].getBBox().height,x=Number.MIN_VALUE,m=0,S=f.map(function(V){var k=V.attr("matrix")[7];return k>m&&(m=k),k<x&&(x=k),{size:V.getBBox().height,targets:[k-g]}});x-=g;for(var P=0;b;){for(var A=0;A<S.length;A++){var O=S[A],R=(Math.min.apply(x,O.targets)+Math.max.apply(x,O.targets))/2;O.pos=Math.min(Math.max(x,R-O.size/2),_-O.size)}for(b=!1,P=S.length;P--;)if(P>0){var W=S[P-1],F=S[P];W.pos+W.size>F.pos&&(W.size+=F.size,W.targets=W.targets.concat(F.targets),S.splice(P,1),b=!0)}}P=0;var Z=this.get("itemsGroup").addGroup();S.forEach(function(V){var k=g+M;V.targets.forEach(function(){var Y=f[P].attr("matrix")[7],K=V.pos+k-M/2,it=Math.abs(Y-K);it>M/2&&v._adjustDenote(Z,K,Y-v.get("group").attr("matrix")[7]/2),f[P].translate(0,-Y),f[P].translate(0,K),k+=M,P++})})}},a}(h);E.exports=n},function(E,T,e){var t=e(0),l=e(16),s=l.Group,c="auto",r=function h(n){h.superclass.constructor.call(this,n)};t.extend(r,s),t.augment(r,{getDefaultCfg:function(){return{type:"plotBack",padding:null,background:null,plotRange:null,plotBackground:null}},_beforeRenderUI:function(){this._calculateRange()},_renderUI:function(){this._renderBackground(),this._renderPlotBackground()},_renderBackground:function(){var n=this,i=n.get("background");if(i){var a=this.get("canvas"),o=n.get("width")||a.get("width"),u=n.get("height")||a.get("height"),f={x:0,y:0,width:o,height:u},v=n.get("backgroundShape");v?v.attr(f):(v=this.addShape("rect",{attrs:t.mix(f,i)}),this.set("backgroundShape",v))}else return},_renderPlotBackground:function(){var n=this,i=n.get("plotBackground");if(i){var a=n.get("plotRange"),o=a.br.x-a.bl.x,u=a.br.y-a.tr.y,f=a.tl,v={x:f.x,y:f.y,width:o,height:u},b=n.get("plotBackShape");b?b.attr(v):(i.image?(v.img=i.image,b=n.addShape("image",{attrs:v})):(t.mix(v,i),b=n.addShape("rect",{attrs:v})),n.set("plotBackShape",b))}else return},_convert:function(n,i){if(t.isString(n)){if(n===c)n=0;else if(n.includes("%")){var a=this.get("canvas"),o=this.get("width")||a.get("width"),u=this.get("height")||a.get("height");n=parseInt(n,10)/100,n=i?n*o:n*u}}return n},_calculateRange:function(){var n=this,i=n.get("plotRange");t.isNil(i)&&(i={});var a=n.get("padding"),o=this.get("canvas"),u=n.get("width")||o.get("width"),f=n.get("height")||o.get("height"),v=t.toAllPadding(a),b=n._convert(v[0],!1),y=n._convert(v[1],!0),g=n._convert(v[2],!1),_=n._convert(v[3],!0),M=Math.min(_,u-y),x=Math.max(_,u-y),m=Math.min(f-g,b),S=Math.max(f-g,b);i.tl={x:M,y:m},i.tr={x,y:m},i.bl={x:M,y:S},i.br={x,y:S},i.cc={x:(x+M)/2,y:(S+m)/2},this.set("plotRange",i)},repaint:function(){return this._calculateRange(),this._renderBackground(),this._renderPlotBackground(),this}}),E.exports=r},function(E,T,e){function t(r,h){r.prototype=Object.create(h.prototype),r.prototype.constructor=r,r.__proto__=h}var l=e(46);function s(r,h,n){return{x:r.x+h*Math.cos(n),y:r.y+h*Math.sin(n)}}var c=function(r){t(h,r);function h(){return r.apply(this,arguments)||this}var n=h.prototype;return n.getDefaultCfg=function(){var a=r.prototype.getDefaultCfg.call(this);return a.type="circle",a},n.getRegion=function(a,o){var u=1/2,f=Math.PI*2/a,v=-1*Math.PI/2+f*o,b=u/(1+1/Math.sin(f/2)),y={x:.5,y:.5},g=s(y,u-b,v),_=Math.PI*5/4,M=Math.PI*1/4;return{start:s(g,b,_),end:s(g,b,M)}},n.generateFacets=function(a){var o=this,u=o.fields,f=u[0];if(!f)throw"Please specify for the field for facet!";var v=o.getFieldValues(f,a),b=v.length,y=[];return v.forEach(function(g,_){var M=[{field:f,value:g,values:v}],x=o.getFilter(M),m=a.filter(x),S={type:o.type,colValue:g,colField:f,colIndex:_,cols:b,rows:1,rowIndex:0,data:m,region:o.getRegion(b,_)};y.push(S)}),y},h}(l);E.exports=c},function(E,T,e){var t=e(0),l=e(44),s={};s.Rect=e(126),s.List=e(125),s.Circle=e(284),s.Tree=e(288),s.Mirror=e(287),s.Matrix=e(286),l.prototype.facet=function(c,r){var h=s[t.upperFirst(c)];if(!h)throw new Error("Not support such type of facets as: "+c);var n=this.get("facets");n&&n.destroy(),r.chart=this;var i=new h(r);this.set("facets",i)},E.exports=s},function(E,T,e){function t(c,r){c.prototype=Object.create(r.prototype),c.prototype.constructor=c,c.__proto__=r}var l=e(126),s=function(c){t(r,c);function r(){return c.apply(this,arguments)||this}var h=r.prototype;return h.getDefaultCfg=function(){var i=c.prototype.getDefaultCfg.call(this);return i.type="matrix",i.showTitle=!1,i},h.generateFacets=function(i){for(var a=this,o=a.fields,u=o.length,f=u,v=[],b=0;b<f;b++)for(var y=o[b],g=0;g<u;g++){var _=o[g],M={type:a.type,colValue:y,rowValue:_,colField:y,rowField:_,colIndex:b,rowIndex:g,cols:f,rows:u,data:i,region:a.getRegion(u,f,b,g)};v.push(M)}return v},h.setXAxis=function(i,a,o){o.rowIndex!==o.rows-1&&(a[i].title=null,a[i].label=null)},h.setYAxis=function(i,a,o){o.colIndex!==0&&(a[i].title=null,a[i].label=null)},r}(l);E.exports=s},function(E,T,e){function t(c,r){c.prototype=Object.create(r.prototype),c.prototype.constructor=c,c.__proto__=r}var l=e(125),s=function(c){t(r,c);function r(){return c.apply(this,arguments)||this}var h=r.prototype;return h.getDefaultCfg=function(){var i=c.prototype.getDefaultCfg.call(this);return i.type="mirror",this.transpose=!1,i},h.init=function(){var i=this;i.transpose?(i.cols=2,i.rows=1):(i.cols=1,i.rows=2),c.prototype.init.call(this)},h.beforeProcessView=function(i,a){this.transpose?a.colIndex%2==0?i.coord().transpose().scale(-1,1):i.coord().transpose():a.rowIndex%2!=0&&i.coord().scale(1,-1)},h.renderTitle=function(i,a){this.transpose?this.drawColTitle(i,a):this.drawRowTitle(i,a)},h.setXAxis=function(i,a,o){(o.colIndex===1||o.rowIndex===1)&&(a[i].label=null,a[i].title=null)},h.setYAxis=function(){},r}(l);E.exports=s},function(E,T,e){function t(h,n){h.prototype=Object.create(n.prototype),h.prototype.constructor=h,h.__proto__=n}var l=e(46),s=e(0),c=s.assign,r=function(h){t(n,h);function n(){return h.apply(this,arguments)||this}var i=n.prototype;return i.getDefaultCfg=function(){var o=h.prototype.getDefaultCfg.call(this);return o.type="tree",o.line={lineWidth:1,stroke:"#ddd"},o.lineSmooth=!1,o},i.generateFacets=function(o){var u=this,f=u.fields;if(!f.length)throw"Please specify for the fields for facet!";var v=[],b=u.getRootFacet(o);return v.push(b),b.children=u.getChildFacets(o,1,v),u.setRegion(v),v},i.getRootFacet=function(o){var u=this,f={type:u.type,rows:u.getRows(),rowIndex:0,colIndex:0,colValue:u.rootTitle,data:o};return f},i.getRows=function(){return this.fields.length+1},i.getChildFacets=function(o,u,f){var v=this,b=v.fields,y=b.length;if(!(y<u)){var g=[],_=b[u-1],M=v.getFieldValues(_,o);return M.forEach(function(x,m){var S=[{field:_,value:x,values:M}],P=v.getFilter(S),A=o.filter(P);if(A.length){var O={type:v.type,colValue:x,colField:_,colIndex:m,rows:v.getRows(),rowIndex:u,data:A,children:v.getChildFacets(A,u+1,f)};g.push(O),f.push(O)}}),g}},i.setRegion=function(o){var u=this;u.forceColIndex(o),o.forEach(function(f){f.region=u.getRegion(f.rows,f.cols,f.colIndex,f.rowIndex)})},i.forceColIndex=function(o){var u=this,f=[],v=0;o.forEach(function(x){u.isLeaf(x)&&(f.push(x),x.colIndex=v,v++)}),f.forEach(function(x){x.cols=f.length});for(var b=u.fields.length,y=b-1;y>=0;y--)for(var g=u.getFacetsByLevel(o,y),_=0;_<g.length;_++){var M=g[_];u.isLeaf(M)||(M.originColIndex=M.colIndex,M.colIndex=u.getRegionIndex(M.children),M.cols=f.length)}},i.getFacetsByLevel=function(o,u){var f=[];return o.forEach(function(v){v.rowIndex===u&&f.push(v)}),f},i.getRegion=function(o,u,f,v){var b=1/u,y=1/o,g={x:b*f,y:y*v},_={x:g.x+b,y:g.y+y*2/3};return{start:g,end:_}},i.getRegionIndex=function(o){var u=o[0],f=o[o.length-1];return(f.colIndex-u.colIndex)/2+u.colIndex},i.isLeaf=function(o){return!o.children||!o.children.length},i.setXAxis=function(o,u,f){f.rowIndex!==f.rows-1&&(u[o].label=null,u[o].title=null)},i.setYAxis=function(o,u,f){f.originColIndex!==0&&f.colIndex!==0&&(u[o].title=null,u[o].label=null)},i.onPaint=function(){h.prototype.onPaint.call(this),this.group.clear(),this.facets&&this.line&&this.drawLines(this.facets,this.group)},i.drawLines=function(o,u){var f=this,v=u.addGroup();o.forEach(function(b){if(!f.isLeaf(b)){var y=b.children;f._addFacetLines(b,y,v)}})},i._addFacetLines=function(o,u,f){var v=this,b=o.view,y=b.getViewRegion(),g={x:y.start.x+(y.end.x-y.start.x)/2,y:y.start.y};u.forEach(function(_){var M=_.view.getViewRegion(),x={x:M.start.x+(M.end.x-M.start.x)/2,y:M.end.y},m={x:g.x,y:g.y+(x.y-g.y)/2},S={x:x.x,y:m.y};v._drawLine([g,m,S,x],f)})},i._getPath=function(o){var u=this,f=[],v=u.lineSmooth;return v?(f.push(["M",o[0].x,o[0].y]),f.push(["C",o[1].x,o[1].y,o[2].x,o[2].y,o[3].x,o[3].y])):o.forEach(function(b,y){y===0?f.push(["M",b.x,b.y]):f.push(["L",b.x,b.y])}),f},i._drawLine=function(o,u){var f=this,v=f._getPath(o),b=f.line;u.addShape("path",{attrs:c({path:v},b)})},n}(l);E.exports=r},function(E,T,e){function t(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function l(i,a){i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.__proto__=a}var s=e(8),c=e(128),r=e(0);e(304);var h=function(i){l(o,i);var a=o.prototype;a.getDefaultCfg=function(){var f=i.prototype.getDefaultCfg.call(this);return f.type="area",f.shapeType="area",f.generatePoints=!0,f.sortable=!0,f};function o(u){var f;return f=i.call(this,u)||this,r.assign(t(f),c),f}return a.draw=function(f,v,b,y){var g=this,_=this.getDrawCfg(f[0]);g._applyViewThemeShapeStyle(_,_.shape,b);var M=this.splitData(f);_.origin=f,r.each(M,function(x,m){_.splitedIndex=m;var S=x.map(function(A){return A.points});_.points=S;var P=b.drawShape(_.shape,_,v);g.appendShapeInfo(P,y+m)})},o}(s),n=function(i){l(a,i);function a(){return i.apply(this,arguments)||this}var o=a.prototype;return o.getDefaultCfg=function(){var f=i.prototype.getDefaultCfg.call(this);return f.hasDefaultAdjust=!0,f.adjusts=[{type:"stack"}],f},a}(h);h.Stack=n,s.Area=h,s.AreaStack=n,E.exports=h},function(E,T,e){function t(c,r){c.prototype=Object.create(r.prototype),c.prototype.constructor=c,c.__proto__=r}var l=e(8);e(305);var s=function(c){t(r,c);function r(){return c.apply(this,arguments)||this}var h=r.prototype;return h.getDefaultCfg=function(){var i=c.prototype.getDefaultCfg.call(this);return i.type="edge",i.shapeType="edge",i.generatePoints=!0,i},r}(l);l.Edge=s,E.exports=s},function(E,T,e){function t(b,y){b.prototype=Object.create(y.prototype),b.prototype.constructor=b,b.__proto__=y}var l=e(65),s=l.ColorUtil,c=e(8),r=e(0),h="_origin",n="shadowCanvas",i="valueRange",a="imageShape",o="mappedData",u="grayScaleBlurredCanvas",f="heatmapSize",v=function(b){t(y,b);function y(){return b.apply(this,arguments)||this}var g=y.prototype;return g.getDefaultCfg=function(){var M=b.prototype.getDefaultCfg.call(this);return M.type="heatmap",M.paletteCache={},M},g._prepareRange=function(){var M=this,x=M.get(o),m=M.getAttr("color"),S=m.field,P=Infinity,A=-Infinity;x.forEach(function(R){var W=R[h][S];W>A&&(A=W),W<P&&(P=W)}),P===A&&(P=A-1);var O=[P,A];M.set(i,O)},g._prepareSize=function(){var M=this,x=M.getDefaultValue("size");r.isNumber(x)||(x=M._getDefaultSize());var m=M.get("styleOptions"),S=m&&r.isObject(m.style)?m.style.blur:null;(!r.isFinite(S)||S===null)&&(S=x/2),M.set(f,{blur:S,radius:x})},g._getDefaultSize=function(){var M=this,x=M.getAttr("position"),m=M.get("coord"),S=Math.min(m.width/(x.scales[0].ticks.length*4),m.height/(x.scales[1].ticks.length*4));return S},g._colorize=function(M){for(var x=this,m=x.getAttr("color"),S=M.data,P=x.get("paletteCache"),A=3;A<S.length;A+=4){var O=S[A];if(O){var R=void 0;P[O]?R=P[O]:(R=s.rgb2arr(m.gradient(O/256)),P[O]=R),S[A-3]=R[0],S[A-2]=R[1],S[A-1]=R[2],S[A]=O}}},g._prepareGreyScaleBlurredCircle=function(M,x){var m=this,S=m.get(u);S||(S=document.createElement("canvas"),m.set(u,S));var P=M+x,A=S.getContext("2d");S.width=S.height=P*2,A.clearRect(0,0,S.width,S.height),A.shadowOffsetX=A.shadowOffsetY=P*2,A.shadowBlur=x,A.shadowColor="black",A.beginPath(),A.arc(-P,-P,M,0,Math.PI*2,!0),A.closePath(),A.fill()},g._drawGrayScaleBlurredCircle=function(M,x,m,S,P){var A=this,O=A.get(u);P.globalAlpha=S,P.drawImage(O,M-m,x-m)},g._getShadowCanvasCtx=function(){var M=this,x=M.get(n);x||(x=document.createElement("canvas"),M.set(n,x));var m=M.get("coord");return m&&(x.width=m.width,x.height=m.height),x.getContext("2d")},g._clearShadowCanvasCtx=function(){var M=this._getShadowCanvasCtx();M.clearRect(0,0,M.canvas.width,M.canvas.height)},g._getImageShape=function(){var M=this,x=M.get(a);if(x)return x;var m=M.get("container");return x=m.addShape("Image",{}),M.set(a,x),x},g.clear=function(){this._clearShadowCanvasCtx(),b.prototype.clear.call(this)},g.drawWithRange=function(M){var x=this,m=x.get("coord"),S=m.start,P=m.end,A=m.width,O=m.height,R=x.getAttr("color").field,W=x.get(f);x._clearShadowCanvasCtx();var F=x._getShadowCanvasCtx(),Z=x.get(o);M&&(Z=Z.filter(function(ut){return ut[h][R]<=M[1]&&ut[h][R]>=M[0]}));for(var V=x._getScale(R),k=0;k<Z.length;k++){var Y=Z[k],K=x.getDrawCfg(Y),it=V.scale(Y[h][R]);x._drawGrayScaleBlurredCircle(K.x-S.x,K.y-P.y,W.radius+W.blur,it,F)}var ct=F.getImageData(0,0,A,O);x._clearShadowCanvasCtx(),x._colorize(ct),F.putImageData(ct,0,0);var ht=x._getImageShape();ht.attr("x",S.x),ht.attr("y",P.y),ht.attr("width",A),ht.attr("height",O),ht.attr("img",F.canvas)},g.draw=function(M){var x=this;x.set(o,M),x._prepareRange(),x._prepareSize();var m=x.get(f);x._prepareGreyScaleBlurredCircle(m.radius,m.blur);var S=x.get(i);x.drawWithRange(S)},y}(c);c.Heatmap=v,E.exports=v},function(E,T,e){var t=e(8);t.Point=e(301),t.PointJitter=t.Point.Jitter,t.PointStack=t.Point.Stack,t.Path=e(130),t.Line=e(297),t.LineStack=t.Line.Stack,t.Interval=e(293),t.IntervalStack=t.Interval.Stack,t.IntervalDodge=t.Interval.Dodge,t.IntervalSymmetric=t.Interval.Symmetric,t.Area=e(289),t.AreaStack=t.Area.Stack,t.Polygon=e(302),t.Schema=e(303),t.SchemaDodge=t.Schema.Dodge,t.Edge=e(290),t.Heatmap=e(291),t.Venn=e(315),t.Violin=e(316),E.exports=t},function(E,T,e){function t(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function l(o,u){o.prototype=Object.create(u.prototype),o.prototype.constructor=o,o.__proto__=u}var s=e(8),c=e(0),r=e(70);e(306);var h=function(o){l(f,o);var u=f.prototype;u.getDefaultCfg=function(){var b=o.prototype.getDefaultCfg.call(this);return b.type="interval",b.shapeType="interval",b.generatePoints=!0,b};function f(v){var b;return b=o.call(this,v)||this,c.assign(t(b),r),b}return u.createShapePointsCfg=function(b){var y=o.prototype.createShapePointsCfg.call(this,b);return y.size=this.getNormalizedSize(b),y},u.clearInner=function(){o.prototype.clearInner.call(this),this.set("defaultSize",null)},f}(s),n=function(o){l(u,o);function u(){return o.apply(this,arguments)||this}var f=u.prototype;return f.getDefaultCfg=function(){var b=o.prototype.getDefaultCfg.call(this);return b.hasDefaultAdjust=!0,b.adjusts=[{type:"stack"}],b},u}(h),i=function(o){l(u,o);function u(){return o.apply(this,arguments)||this}var f=u.prototype;return f.getDefaultCfg=function(){var b=o.prototype.getDefaultCfg.call(this);return b.hasDefaultAdjust=!0,b.adjusts=[{type:"dodge"}],b},u}(h),a=function(o){l(u,o);function u(){return o.apply(this,arguments)||this}var f=u.prototype;return f.getDefaultCfg=function(){var b=o.prototype.getDefaultCfg.call(this);return b.hasDefaultAdjust=!0,b.adjusts=[{type:"symmetric"}],b},u}(h);h.Stack=n,h.Dodge=i,h.Symmetric=a,s.Interval=h,s.IntervalStack=n,s.IntervalDodge=i,s.IntervalSymmetric=a,E.exports=h},function(E,T,e){var t=e(69),l=e(127),s=e(296),c=e(295),r={getLabelsClass:function(n,i){var a=t;return n==="polar"?a=l:n==="theta"?a=s:(i==="interval"||i==="polygon")&&(a=c),a}};E.exports=r},function(E,T,e){var t=e(0),l=e(69),s=function c(r){c.superclass.constructor.call(this,r)};t.extend(s,l),t.augment(s,{setLabelPosition:function(r,h,n,i){t.isFunction(i)&&(i=i(r.text,h._origin,n));var a=this.get("coord"),o=a.isTransposed,u=a.convertPoint(h.points[0]),f=a.convertPoint(h.points[2]),v=(u.x-f.x)/2*(o?-1:1),b=(u.y-f.y)/2*(o?-1:1);switch(i){case"right":o?(r.x-=v,r.y+=b,r.textAlign=r.textAlign||"center"):(r.x-=v,r.y+=b,r.textAlign=r.textAlign||"left");break;case"left":o?(r.x-=v,r.y-=b,r.textAlign=r.textAlign||"center"):(r.x+=v,r.y+=b,r.textAlign=r.textAlign||"right");break;case"bottom":o?(r.x-=v*2,r.textAlign=r.textAlign||"left"):(r.y+=b*2,r.textAlign=r.textAlign||"center");break;case"middle":o?r.x-=v:r.y+=b,r.textAlign=r.textAlign||"center";break;case"top":o?r.textAlign=r.textAlign||"left":r.textAlign=r.textAlign||"center";break;default:break}}}),E.exports=s},function(E,T,e){var t=e(0),l=e(127),s=e(25),c=e(5),r=5;function h(a,o,u){return{x:a.x+u*Math.cos(o),y:a.y+u*Math.sin(o)}}function n(a,o,u,f,v){var b=!0,y=u.start,g=u.end,_=Math.min(y.y,g.y),M=Math.abs(y.y-g.y),x,m=0,S=Number.MIN_VALUE,P=a.map(function(R){return R.y>m&&(m=R.y),R.y<S&&(S=R.y),{size:o,targets:[R.y-_]}});for(S-=_,m-_>M&&(M=m-_);b;)for(P.forEach(function(R){var W=(Math.min.apply(S,R.targets)+Math.max.apply(S,R.targets))/2;R.pos=Math.min(Math.max(S,W-R.size/2),M-R.size)}),b=!1,x=P.length;x--;)if(x>0){var A=P[x-1],O=P[x];A.pos+A.size>O.pos&&(A.size+=O.size,A.targets=A.targets.concat(O.targets),A.pos+A.size>M&&(A.pos=M-A.size),P.splice(x,1),b=!0)}x=0,P.forEach(function(R){var W=_+o/2;R.targets.forEach(function(){a[x].y=R.pos+W,W+=o,x++})}),a.forEach(function(R){var W=R.r*R.r,F=Math.pow(Math.abs(R.y-f.y),2);if(W<F)R.x=f.x;else{var Z=Math.sqrt(W-F);v?R.x=f.x+Z:R.x=f.x-Z}})}var i=function a(o){a.superclass.constructor.call(this,o)};t.extend(i,l),t.augment(i,{getDefaultCfg:function(){return{label:c.thetaLabels}},getDefaultOffset:function(o){return o.offset||0},adjustItems:function(o){var u=this,f=o[0]?o[0].offset:0;return f>0&&(o=u._distribute(o,f)),i.superclass.adjustItems.call(this,o)},_distribute:function(o,u){var f=this,v=f.get("coord"),b=v.getRadius(),y=f.get("label").labelHeight,g=v.getCenter(),_=b+u,M=_*2+y*2,x={start:v.start,end:v.end},m=f.get("geom");if(m){var S=m.get("view");x=S.getViewRegion()}var P=[[],[]];return o.forEach(function(A){!A||(A.textAlign==="right"?P[0].push(A):P[1].push(A))}),P.forEach(function(A,O){var R=parseInt(M/y,10);A.length>R&&(A.sort(function(W,F){return F["..percent"]-W["..percent"]}),A.splice(R,A.length-R)),A.sort(function(W,F){return W.y-F.y}),n(A,y,x,g,O)}),P[0].concat(P[1])},lineToLabel:function(o){var u=this,f=u.get("coord"),v=f.getRadius(),b=o.offset,y=o.orignAngle||o.angle,g=f.getCenter(),_=h(g,y,v+r/2),M=h(g,y,v+b/2);o.labelLine||(o.labelLine=u.get("label").labelLine||{}),o.labelLine.path=["M"+_.x,_.y+" Q"+M.x,M.y+" "+o.x,o.y].join(",")},getLabelRotate:function(o,u){var f;return u<0&&(f=o*180/Math.PI,f>90&&(f=f-180),f<-90&&(f=f+180)),f/180*Math.PI},getLabelAlign:function(o){var u=this,f=u.get("coord"),v=f.getCenter(),b;o.angle<=Math.PI/2&&o.x>=v.x?b="left":b="right";var y=u.getDefaultOffset(o);return y<=0&&(b==="right"?b="left":b="right"),b},getArcPoint:function(o){return o},getPointAngle:function(o){var u=this,f=u.get("coord"),v={x:t.isArray(o.x)?o.x[0]:o.x,y:o.y[0]};u.transLabelPoint(v);var b={x:t.isArray(o.x)?o.x[1]:o.x,y:o.y[1]};u.transLabelPoint(b);var y,g=s.getPointAngle(f,v);if(o.points&&o.points[0].y===o.points[1].y)y=g;else{var _=s.getPointAngle(f,b);g>=_&&(_=_+Math.PI*2),y=g+(_-g)/2}return y},getCirclePoint:function(o,u){var f=this,v=f.get("coord"),b=v.getCenter(),y=v.getRadius()+u,g=h(b,o,y);return g.angle=o,g.r=y,g}}),E.exports=i},function(E,T,e){function t(h,n){h.prototype=Object.create(n.prototype),h.prototype.constructor=h,h.__proto__=n}var l=e(8),s=e(130);e(307);var c=function(h){t(n,h);function n(){return h.apply(this,arguments)||this}var i=n.prototype;return i.getDefaultCfg=function(){var o=h.prototype.getDefaultCfg.call(this);return o.type="line",o.sortable=!0,o},n}(s),r=function(h){t(n,h);function n(){return h.apply(this,arguments)||this}var i=n.prototype;return i.getDefaultCfg=function(){var o=h.prototype.getDefaultCfg.call(this);return o.hasDefaultAdjust=!0,o.adjusts=[{type:"stack"}],o},n}(c);c.Stack=r,l.Line=c,l.LineStack=r,E.exports=c},function(E,T,e){var t=e(0),l="_origin",s=e(129),c="_originActiveAttrs";function r(a,o){if(t.isNil(a)||t.isNil(o))return!1;var u=a.get("origin"),f=o.get("origin");return t.isEqual(u,f)}function h(a,o){if(!a||a.length!==o.length)return!0;var u=!1;return t.each(o,function(f,v){if(!r(f,a[v]))return u=!0,!1}),u}function n(a,o){var u={};return t.each(a,function(f,v){var b=o.attr(v);t.isArray(b)&&(b=t.cloneDeep(b)),u[v]=b}),u}var i={_isAllowActive:function(){var o=this.get("allowActive");if(t.isNil(o)){var u=this.get("view"),f=this.isShareTooltip(),v=u.get("options");if(v.tooltip===!1||!f)return!0}else return o;return!1},_onMouseenter:function(o){var u=this,f=o.shape,v=u.get("shapeContainer");f&&v.contain(f)&&u._isAllowActive()&&u.setShapesActived(f)},_onMouseleave:function(){var o=this,u=o.get("view"),f=u.get("canvas");o.get("activeShapes")&&(o.clearActivedShapes(),f.draw())},_bindActiveAction:function(){var o=this,u=o.get("view"),f=o.get("type");u.on(f+":mouseenter",t.wrapBehavior(o,"_onMouseenter")),u.on(f+":mouseleave",t.wrapBehavior(o,"_onMouseleave"))},_offActiveAction:function(){var o=this,u=o.get("view"),f=o.get("type");u.off(f+":mouseenter",t.getWrapBehavior(o,"_onMouseenter")),u.off(f+":mouseleave",t.getWrapBehavior(o,"_onMouseleave"))},_setActiveShape:function(o){var u=this,f=u.get("activedOptions")||{},v=o.get("origin"),b=v.shape||u.getDefaultValue("shape");t.isArray(b)&&(b=b[0]);var y=u.get("shapeFactory"),g=t.mix({},o.attr(),{origin:v}),_=y.getActiveCfg(b,g);f.style&&t.mix(_,f.style);var M=n(_,o);o.setSilent(c,M),f.animate?o.animate(_,300):o.attr(_),s.toFront(o)},setShapesActived:function(o){var u=this;t.isArray(o)||(o=[o]);var f=u.get("activeShapes");if(!!h(f,o)){var v=u.get("view"),b=v.get("canvas"),y=u.get("activedOptions");y&&y.highlight?(t.each(o,function(g){g.get("animating")&&g.stopAnimate()}),u.highlightShapes(o)):(f&&u.clearActivedShapes(),t.each(o,function(g){g.get("animating")&&g.stopAnimate(),g.get("visible")&&u._setActiveShape(g)})),u.set("activeShapes",o),b.draw()}},clearActivedShapes:function(){var o=this,u=o.get("shapeContainer"),f=o.get("activedOptions"),v=f&&f.animate;if(u&&!u.get("destroyed")){var b=o.get("activeShapes");t.each(b,function(_){var M=_.get(c);v?(_.stopAnimate(),_.animate(M,300)):_.attr(M),s.resetZIndex(_),_.setSilent(c,null)});var y=o.get("preHighlightShapes");if(y){var g=u.get("children");t.each(g,function(_){var M=_.get(c);M&&(v?(_.stopAnimate(),_.animate(M,300)):_.attr(M),s.resetZIndex(_),_.setSilent(c,null))})}o.set("activeShapes",null),o.set("preHighlightShapes",null)}},getGroupShapesByPoint:function(o){var u=this,f=u.get("shapeContainer"),v=[];if(f){var b=u.getXScale().field,y=u.getShapes(),g=u._getOriginByPoint(o);t.each(y,function(_){var M=_.get("origin");if(_.get("visible")&&M){var x=M[l][b];x===g[b]&&v.push(_)}})}return v},getSingleShapeByPoint:function(o){var u=this,f=u.get("shapeContainer"),v=f.get("canvas"),b=v.get("pixelRatio"),y;if(f&&(y=f.getShape(o.x*b,o.y*b)),y&&y.get("origin"))return y},highlightShapes:function(o,u){var f=this;t.isArray(o)||(o=[o]);var v=f.get("activeShapes");if(!!h(v,o)){v&&f.clearActivedShapes();var b=f.getShapes(),y=f.get("activedOptions"),g=y&&y.animate,_=y&&y.style;t.each(b,function(M){var x={};M.stopAnimate(),t.indexOf(o,M)!==-1?(t.mix(x,_,u),s.toFront(M)):(t.mix(x,{fillOpacity:.3,opacity:.3}),s.resetZIndex(M));var m=n(x,M);M.setSilent(c,m),g?M.animate(x,300):M.attr(x)}),f.set("preHighlightShapes",o),f.set("activeShapes",o)}}};E.exports=i},function(E,T,e){var t=e(0),l="_origin",s=e(129);function c(n,i){if(t.isNil(n)||t.isNil(i))return!1;var a=n.get("origin"),o=i.get("origin");return t.isEqual(a,o)}function r(n,i){var a={};return t.each(n,function(o,u){u==="transform"&&(u="matrix");var f=i.attr(u);t.isArray(f)&&(f=t.cloneDeep(f)),a[u]=f}),a}var h={_isAllowSelect:function(){var i=this.get("allowSelect");if(t.isNil(i)){var a=this.get("type"),o=this.get("coord"),u=o&&o.type;if(a==="interval"&&u==="theta")return!0}else return i;return!1},_onClick:function(i){var a=this;if(a._isAllowSelect()){var o=i.shape,u=a.get("shapeContainer");o&&u.contain(o)&&a.setShapeSelected(o)}},_bindSelectedAction:function(){var i=this,a=i.get("view"),o=i.get("type");a.on(o+":click",t.wrapBehavior(i,"_onClick"))},_offSelectedAction:function(){var i=this,a=i.get("view"),o=i.get("type");a.off(o+":click",t.getWrapBehavior(i,"_onClick"))},_setShapeStatus:function(i,a){var o=this,u=o.get("view"),f=o.get("selectedOptions")||{},v=f.animate!==!1,b=u.get("canvas");i.set("selected",a);var y=i.get("origin");if(a){var g=y.shape||o.getDefaultValue("shape");t.isArray(g)&&(g=g[0]);var _=o.get("shapeFactory"),M=t.mix({geom:o,point:y},f),x=_.getSelectedCfg(g,M);t.mix(x,M.style),i.get("_originAttrs")||(i.get("animating")&&i.stopAnimate(),i.set("_originAttrs",r(x,i))),f.toFront&&s.toFront(i),v?i.animate(x,300):(i.attr(x),b.draw())}else{var m=i.get("_originAttrs");f.toFront&&s.resetZIndex(i),i.set("_originAttrs",null),v?i.animate(m,300):(i.attr(m),b.draw())}},setShapeSelected:function(i){var a=this,o=a._getSelectedShapes(),u=a.get("selectedOptions")||{},f=u.cancelable!==!1;if(u.mode==="multiple")t.indexOf(o,i)===-1?(o.push(i),a._setShapeStatus(i,!0)):f&&(t.Array.remove(o,i),a._setShapeStatus(i,!1));else{var v=o[0];f&&(i=c(v,i)?null:i),c(v,i)||(v&&a._setShapeStatus(v,!1),i&&a._setShapeStatus(i,!0))}},clearSelected:function(){var i=this,a=i.get("shapeContainer");if(a&&!a.get("destroyed")){var o=i._getSelectedShapes();t.each(o,function(u){i._setShapeStatus(u,!1),u.set("_originAttrs",null)})}},setSelected:function(i){var a=this,o=a.getShapes();return t.each(o,function(u){var f=u.get("origin");f&&f[l]===i&&a.setShapeSelected(u)}),this},_getSelectedShapes:function(){var i=this,a=i.getShapes(),o=[];return t.each(a,function(u){u.get("selected")&&o.push(u)}),i.set("selectedShapes",o),o}};E.exports=h},function(E,T,e){var t=e(0),l=e(5),s=l.defaultColor,c="_origin";function r(n){return n.alias||n.field}var h={_getIntervalSize:function(i){var a=null,o=this.get("type"),u=this.get("coord");if(u.isRect&&(o==="interval"||o==="schema")){a=this.getSize(i[c]);var f=u.isTransposed?"y":"x";if(t.isArray(i[f])){var v=Math.abs(i[f][1]-i[f][0]);a=a<v?null:a}}return a},_snapEqual:function(i,a,o){var u;return i=o.translate(i),a=o.translate(a),o.isCategory?u=i===a:u=t.snapEqual(i,a),u},_getScaleValueByPoint:function(i){var a=0,o=this.get("coord"),u=this.getXScale(),f=o.invert(i),v=f.x;return this.isInCircle()&&v>(1+u.rangeMax())/2&&(v=u.rangeMin()),a=u.invert(v),u.isCategory&&(a=u.translate(a)),a},_getOriginByPoint:function(i){var a=this.getXScale(),o=this.getYScale(),u=a.field,f=o.field,v=this.get("coord"),b=v.invert(i),y=a.invert(b.x),g=o.invert(b.y),_={};return _[u]=y,_[f]=g,_},_getScale:function(i){var a=this,o=a.get("scales"),u=null;return t.each(o,function(f){if(f.field===i)return u=f,!1}),u},_getTipValueScale:function(){var i=this.getAttrsForLegend(),a;t.each(i,function(f){var v=f.getScale(f.type);if(v.isLinear)return a=v,!1});var o=this.getXScale(),u=this.getYScale();return!a&&u&&u.field==="..y"?o:a||u||o},_getTipTitleScale:function(i){var a=this;if(i)return a._getScale(i);var o=a.getAttr("position"),u=o.getFields(),f;return t.each(u,function(v){if(!v.includes(".."))return f=v,!1}),a._getScale(f)},_filterValue:function(i,a){var o=this.get("coord"),u=this.getYScale(),f=u.field,v=o.invert(a),b=v.y;b=u.invert(b);var y=i[i.length-1];return t.each(i,function(g){var _=g[c];if(_[f][0]<=b&&_[f][1]>=b)return y=g,!1}),y},getXDistance:function(){var i=this,a=i.get("xDistance");if(!a){var o=i.getXScale();if(o.isCategory)a=1;else{var u=o.values,f=o.translate(u[0]),v=f;t.each(u,function(y){y=o.translate(y),y<f&&(f=y),y>v&&(v=y)});var b=u.length;a=(v-f)/(b-1)}i.set("xDistance",a)}return a},findPoint:function(i,a){var o=this,u=o.get("type"),f=o.getXScale(),v=o.getYScale(),b=f.field,y=v.field,g=null;if(t.indexOf(["heatmap","point"],u)>-1){var _=o.get("coord"),M=_.invert(i),x=f.invert(M.x),m=v.invert(M.y),S=Infinity;return t.each(a,function(ht){var ut=Math.pow(ht[c][b]-x,2)+Math.pow(ht[c][y]-m,2);ut<S&&(S=ut,g=ht)}),g}var P=a[0],A=a[a.length-1];if(!P)return g;var O=o._getScaleValueByPoint(i),R=P[c][b],W=P[c][y],F=A[c][b],Z=v.isLinear&&t.isArray(W);if(t.isArray(R))t.each(a,function(ht){var ut=ht[c];if(f.translate(ut[b][0])<=O&&f.translate(ut[b][1])>=O)if(Z)t.isArray(g)||(g=[]),g.push(ht);else return g=ht,!1}),t.isArray(g)&&(g=this._filterValue(g,i));else{var V;if(!f.isLinear&&f.type!=="timeCat")t.each(a,function(ht,ut){var It=ht[c];if(o._snapEqual(It[b],O,f))if(Z)t.isArray(g)||(g=[]),g.push(ht);else return g=ht,!1;else f.translate(It[b])<=O&&(A=ht,V=a[ut+1])}),t.isArray(g)&&(g=this._filterValue(g,i));else{if((O>f.translate(F)||O<f.translate(R))&&(O>f.max||O<f.min))return null;for(var k=0,Y=a.length-1,K;k<=Y;){K=Math.floor((k+Y)/2);var it=a[K][c][b];if(o._snapEqual(it,O,f))return a[K];f.translate(it)<=f.translate(O)?(k=K+1,A=a[K],V=a[K+1]):(Y===0&&(A=a[0]),Y=K-1)}}A&&V&&Math.abs(f.translate(A[c][b])-O)>Math.abs(f.translate(V[c][b])-O)&&(A=V)}var ct=o.getXDistance();return!g&&Math.abs(f.translate(A[c][b])-O)<=ct/2&&(g=A),g},getTipTitle:function(i,a){var o="",u=this._getTipTitleScale(a);if(u){var f=i[u.field];o=u.getText(f)}else if(this.get("type")==="heatmap"){var v=this.getXScale(),b=this.getYScale(),y=v.getText(i[v.field]),g=b.getText(i[b.field]);o="( "+y+", "+g+" )"}return o},getTipValue:function(i,a){var o,u=a.field,f=i.key;if(o=i[u],t.isArray(o)){var v=[];t.each(o,function(b){v.push(a.getText(b))}),o=v.join("-")}else o=a.getText(o,f);return o},getTipName:function(i){var a,o,u=this._getGroupScales();if(u.length&&t.each(u,function(b){return o=b,!1}),o){var f=o.field;a=o.getText(i[f])}else{var v=this._getTipValueScale();a=r(v)}return a},getTipItems:function(i,a){var o=this,u=i[c],f=o.getTipTitle(u,a),v=o.get("tooltipCfg"),b=[],y,g;function _(A,O,R){if(!t.isNil(O)&&O!==""){var W={title:f,point:i,name:A||f,value:O,color:i.color||s,marker:!0};W.size=o._getIntervalSize(i),b.push(t.mix({},W,R))}}if(v){var M=v.fields,x=v.cfg,m=[];if(t.each(M,function(A){m.push(u[A])}),x){t.isFunction(x)&&(x=x.apply(null,m));var S=t.mix({},{point:i,title:f,color:i.color||s,marker:!0},x);S.size=o._getIntervalSize(i),b.push(S)}else t.each(M,function(A){if(!t.isNil(u[A])){var O=o._getScale(A);y=r(O),g=O.getText(u[A]),_(y,g)}})}else{var P=o._getTipValueScale();t.isNil(u[P.field])||(g=o.getTipValue(u,P),y=o.getTipName(u),_(y,g))}return b},isShareTooltip:function(){var i=this.get("shareTooltip"),a=this.get("type"),o=this.get("view"),u;if(o.get("parent")?u=o.get("parent").get("options"):u=o.get("options"),a==="interval"){var f=this.get("coord"),v=f.type;(v==="theta"||v==="polar"&&f.isTransposed)&&(i=!1)}else(!this.getYScale()||t.inArray(["contour","point","polygon","edge"],a))&&(i=!1);return u.tooltip&&t.isBoolean(u.tooltip.shared)&&(i=u.tooltip.shared),i}};E.exports=h},function(E,T,e){function t(n,i){n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i}var l=e(8),s=e(0);e(308);var c=function(n){t(i,n);function i(){return n.apply(this,arguments)||this}var a=i.prototype;return a.getDefaultCfg=function(){var u=n.prototype.getDefaultCfg.call(this);return u.type="point",u.shapeType="point",u.generatePoints=!0,u},a.drawPoint=function(u,f,v,b){var y=this,g=u.shape,_=y.getDrawCfg(u);y._applyViewThemeShapeStyle(_,g,v);var M;if(s.isArray(u.y)){var x=y.hasStack();s.each(u.y,function(m,S){_.y=m,_.yIndex=S,(!x||S!==0)&&(M=v.drawShape(g,_,f),y.appendShapeInfo(M,b+S))})}else s.isNil(u.y)||(M=v.drawShape(g,_,f),y.appendShapeInfo(M,b))},i}(l),r=function(n){t(i,n);function i(){return n.apply(this,arguments)||this}var a=i.prototype;return a.getDefaultCfg=function(){var u=n.prototype.getDefaultCfg.call(this);return u.hasDefaultAdjust=!0,u.adjusts=[{type:"jitter"}],u},i}(c),h=function(n){t(i,n);function i(){return n.apply(this,arguments)||this}var a=i.prototype;return a.getDefaultCfg=function(){var u=n.prototype.getDefaultCfg.call(this);return u.hasDefaultAdjust=!0,u.adjusts=[{type:"stack"}],u},i}(c);c.Jitter=r,c.Stack=h,l.Point=c,l.PointJitter=r,l.PointStack=h,E.exports=c},function(E,T,e){function t(r,h){r.prototype=Object.create(h.prototype),r.prototype.constructor=r,r.__proto__=h}var l=e(8),s=e(0);e(309);var c=function(r){t(h,r);function h(){return r.apply(this,arguments)||this}var n=h.prototype;return n.getDefaultCfg=function(){var a=r.prototype.getDefaultCfg.call(this);return a.type="polygon",a.shapeType="polygon",a.generatePoints=!0,a},n.createShapePointsCfg=function(a){var o=r.prototype.createShapePointsCfg.call(this,a),u=this,f=o.x,v=o.y,b;if(!(s.isArray(f)&&s.isArray(v))){var y=u.getXScale(),g=u.getYScale(),_=y.values?y.values.length:y.ticks.length,M=g.values?g.values.length:g.ticks.length,x=.5*1/_,m=.5*1/M;y.isCategory&&g.isCategory?(f=[f-x,f-x,f+x,f+x],v=[v-m,v+m,v+m,v-m]):s.isArray(f)?(b=f,f=[b[0],b[0],b[1],b[1]],v=[v-m/2,v+m/2,v+m/2,v-m/2]):s.isArray(v)&&(b=v,v=[b[0],b[1],b[1],b[0]],f=[f-x/2,f-x/2,f+x/2,f+x/2]),o.x=f,o.y=v}return o},h}(l);l.Polygon=c,E.exports=c},function(E,T,e){function t(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function l(i,a){i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.__proto__=a}var s=e(8),c=e(0),r=e(70);e(310);var h=function(i){l(o,i);var a=o.prototype;a.getDefaultCfg=function(){var f=i.prototype.getDefaultCfg.call(this);return f.type="schema",f.shapeType="schema",f.generatePoints=!0,f};function o(u){var f;return f=i.call(this,u)||this,c.assign(t(f),r),f}return a.createShapePointsCfg=function(f){var v=i.prototype.createShapePointsCfg.call(this,f);return v.size=this.getNormalizedSize(f),v},a.clearInner=function(){i.prototype.clearInner.call(this),this.set("defaultSize",null)},o}(s),n=function(i){l(a,i);function a(){return i.apply(this,arguments)||this}var o=a.prototype;return o.getDefaultCfg=function(){var f=i.prototype.getDefaultCfg.call(this);return f.hasDefaultAdjust=!0,f.adjusts=[{type:"dodge"}],f},a}(h);h.Dodge=n,s.Schema=h,s.SchemaDodge=n,E.exports=h},function(E,T,e){var t=e(0),l=e(9),s=e(25),c=e(23),r=e(5);function h(v){var b=r.shape.hollowArea,y=t.mix({},b,v.style);return c.addStrokeAttrs(y,v),t.isNumber(v.size)&&(y.lineWidth=v.size),y}function n(v){var b=r.shape.area,y=t.mix({},b,v.style);return c.addFillAttrs(y,v),v.color&&(y.stroke=y.stroke||v.color),t.isNumber(v.size)&&(y.lineWidth=v.size),y}function i(v,b,y){var g=[],_=[],M=[],x=[],m=v.isInCircle;return t.each(v.points,function(S){M.push(S[1]),x.push(S[0])}),x=x.reverse(),_.push(M,x),t.each(_,function(S,P){var A=[];S=y.parsePoints(S);var O=S[0];m&&S.push({x:O.x,y:O.y}),b?A=s.getSplinePath(S,!1,v.constraint):A=s.getLinePath(S,!1),P>0&&(A[0][0]="L"),g=g.concat(A)}),g.push(["Z"]),g}function a(v){return{symbol:function(y,g,_){return[["M",y-_,g-4],["L",y+_,g-4],["L",y+_,g+4],["L",y-_,g+4],["Z"]]},radius:5,fill:v.color,fillOpacity:.6}}function o(v,b){if(v==="line"||v==="smoothLine"){var y=b.lineWidth||0;return{lineWidth:y+1}}var g=b.fillOpacity||b.opacity||1;return{fillOpacity:g-.15,strokeOpacity:g-.15}}function u(v,b,y){var g=v._coord,_=g.convertPoint(b.points[0][1]);return y.addShape("circle",{attrs:t.mix({x:_.x,y:_.y,r:2,fill:b.color},b.style)})}var f=l.registerFactory("area",{defaultShapeType:"area",getDefaultPoints:function(b){var y=[],g=b.x,_=b.y,M=b.y0;return _=t.isArray(_)?_:[M,_],t.each(_,function(x){y.push({x:g,y:x})}),y},getActiveCfg:function(b,y){return o(b,y)},drawShape:function(b,y,g){var _=this.getShape(b),M;return y.points.length===1&&r.showSinglePoint?M=u(this,y,g):M=_.draw(y,g),M&&(M.set("origin",y.origin),M._id=y.splitedIndex?y._id+y.splitedIndex:y._id,M.name=this.name),M},getSelectedCfg:function(b,y){return y&&y.style?y.style:this.getActiveCfg(b,y)}});l.registerShape("area","area",{draw:function(b,y){var g=n(b),_=i(b,!1,this);return y.addShape("path",{attrs:t.mix(g,{path:_})})},getMarkerCfg:function(b){return a(b)}}),l.registerShape("area","smooth",{draw:function(b,y){var g=n(b),_=this._coord;b.constraint=[[_.start.x,_.end.y],[_.end.x,_.start.y]];var M=i(b,!0,this);return y.addShape("path",{attrs:t.mix(g,{path:M})})},getMarkerCfg:function(b){return a(b)}}),l.registerShape("area","line",{draw:function(b,y){var g=h(b),_=i(b,!1,this);return y.addShape("path",{attrs:t.mix(g,{path:_})})},getMarkerCfg:function(b){return a(b)}}),l.registerShape("area","smoothLine",{draw:function(b,y){var g=h(b),_=i(b,!0,this);return y.addShape("path",{attrs:t.mix(g,{path:_})})},getMarkerCfg:function(b){return a(b)}}),f.spline=f.smooth,E.exports=f},function(E,T,e){var t=e(0),l=e(9),s=e(23),c=e(5),r=e(25),h=1/3;function n(y){var g=c.shape.edge,_=t.mix({},g,y.style);return s.addStrokeAttrs(_,y),y.size&&(_.lineWidth=y.size),_}var i=l.registerFactory("edge",{defaultShapeType:"line",getDefaultPoints:function(g){return s.splitPoints(g)},getActiveCfg:function(g,_){var M=_.lineWidth||0;return{lineWidth:M+1}}});function a(y,g){var _=[];_.push({x:y.x,y:y.y*(1-1/2)+g.y*1/2}),_.push({y:y.y*(1-1/2)+g.y*1/2,x:g.x}),_.push(g);var M=["C"];return t.each(_,function(x){M.push(x.x,x.y)}),M}function o(y,g){var _=[];_.push({x:g.x,y:g.y}),_.push(y);var M=["Q"];return t.each(_,function(x){M.push(x.x,x.y)}),M}function u(y,g){var _=a(y,g),M=[["M",y.x,y.y]];return M.push(_),M}function f(y,g,_){var M=o(g,_),x=[["M",y.x,y.y]];return x.push(M),x}function v(y,g){var _=o(y[1],g),M=o(y[3],g),x=[["M",y[0].x,y[0].y]];return x.push(M),x.push(["L",y[3].x,y[3].y]),x.push(["L",y[2].x,y[2].y]),x.push(_),x.push(["L",y[1].x,y[1].y]),x.push(["L",y[0].x,y[0].y]),x.push(["Z"]),x}function b(y,g){var _=[];_.push({y:y.y*(1-h)+g.y*h,x:y.x}),_.push({y:y.y*(1-h)+g.y*h,x:g.x}),_.push(g);var M=[["M",y.x,y.y]];return t.each(_,function(x){M.push(["L",x.x,x.y])}),M}l.registerShape("edge","line",{draw:function(g,_){var M=this.parsePoints(g.points),x=n(g),m=r.getLinePath(M),S=_.addShape("path",{attrs:t.mix(x,{path:m})});return S},getMarkerCfg:function(g){return t.mix({symbol:"circle",radius:4.5},n(g))}}),l.registerShape("edge","vhv",{draw:function(g,_){var M=g.points,x=n(g),m=b(M[0],M[1]);m=this.parsePath(m);var S=_.addShape("path",{attrs:t.mix(x,{path:m})});return S},getMarkerCfg:function(g){return t.mix({symbol:"circle",radius:4.5},n(g))}}),l.registerShape("edge","smooth",{draw:function(g,_){var M=g.points,x=n(g),m=u(M[0],M[1]);m=this.parsePath(m);var S=_.addShape("path",{attrs:t.mix(x,{path:m})});return S},getMarkerCfg:function(g){return t.mix({symbol:"circle",radius:4.5},n(g))}}),l.registerShape("edge","arc",{draw:function(g,_){var M=g.points,x=M.length>2?"weight":"normal",m=n(g),S,P;if(g.isInCircle){var A={x:0,y:1};x==="normal"?P=f(M[0],M[1],A):(m.fill=m.stroke,P=v(M,A)),P=this.parsePath(P),S=_.addShape("path",{attrs:t.mix(m,{path:P})})}else if(x==="normal")M=this.parsePoints(M),S=_.addShape("arc",{attrs:t.mix(m,{x:(M[1].x+M[0].x)/2,y:M[0].y,r:Math.abs(M[1].x-M[0].x)/2,startAngle:Math.PI,endAngle:Math.PI*2})});else{P=[["M",M[0].x,M[0].y],["L",M[1].x,M[1].y]];var O=a(M[1],M[3]),R=a(M[2],M[0]);P.push(O),P.push(["L",M[3].x,M[3].y]),P.push(["L",M[2].x,M[2].y]),P.push(R),P.push(["Z"]),P=this.parsePath(P),m.fill=m.stroke,S=_.addShape("path",{attrs:t.mix(m,{path:P})})}return S},getMarkerCfg:function(g){return t.mix({symbol:"circle",radius:4.5},n(g))}}),E.exports=i},function(E,T,e){var t=e(0),l=e(9),s=e(25),c=e(23),r=e(5),h=e(16),n=t.PathUtil;function i(A,O){var R=A.x,W=A.y,F=A.y0,Z=A.size,V=F,k=W;t.isArray(W)&&(k=W[1],V=W[0]);var Y,K;t.isArray(R)?(Y=R[0],K=R[1]):(Y=R-Z/2,K=R+Z/2);var it=[];return it.push({x:Y,y:V},{x:Y,y:k}),O?it.push({x:K,y:(k+V)/2}):it.push({x:K,y:k},{x:K,y:V}),it}function a(A){for(var O=[],R=0;R<A.length;R++){var W=A[R];if(W){var F=R===0?"M":"L";O.push([F,W.x,W.y])}}var Z=A[0];return O.push(["L",Z.x,Z.y]),O.push(["z"]),O}function o(A){var O=A.x,R=A.y,W=A.y0,F=[];return t.isArray(R)?t.each(R,function(Z,V){F.push({x:t.isArray(O)?O[V]:O,y:Z})}):F.push({x:O,y:R},{x:O,y:W}),F}function u(A){var O=A.x,R=t.isArray(A.y)?A.y[1]:A.y,W=t.isArray(A.y)?A.y[0]:A.y0,F=A.size,Z=[];return Z.push({x:O-F/2,y:R},{x:O+F/2,y:R},{x:O,y:R},{x:O,y:W},{x:O-F/2,y:W},{x:O+F/2,y:W}),Z}function f(A){var O=[];return O.push(["M",A[0].x,A[0].y],["L",A[1].x,A[1].y],["M",A[2].x,A[2].y],["L",A[3].x,A[3].y],["M",A[4].x,A[4].y],["L",A[5].x,A[5].y]),O}function v(A){var O=r.shape.interval,R=t.mix({},O,A.style);return c.addFillAttrs(R,A),A.color&&(R.stroke=R.stroke||A.color),R}function b(A){var O=r.shape.hollowInterval,R=t.mix({},O,A.style);return c.addStrokeAttrs(R,A),R}function y(A,O){var R=[],W=A.points,F=A.nextPoints;return t.isNil(F)?O?R.push(["M",W[0].x,W[0].y],["L",W[1].x,W[1].y],["L",W[2].x,W[2].y],["L",W[3].x,W[3].y],["Z"]):R.push(["M",W[0].x,W[0].y],["L",W[1].x,W[1].y],["L",W[2].x,W[2].y],["L",W[2].x,W[2].y],["Z"]):R.push(["M",W[0].x,W[0].y],["L",W[1].x,W[1].y],["L",F[1].x,F[1].y],["L",F[0].x,F[0].y],["Z"]),R}function g(A,O){var R=O.getRadius(),W=O.innerRadius,F,Z,V=R*W,k,Y;return!t.isArray(A.x)&&t.isArray(A.y)&&(A.x=[A.x,A.x]),t.isArray(A.x)?(k={x:A.x[0],y:A.y[0]},Y={x:A.x[1],y:A.y[1]},F=s.getPointAngle(O,k),Z=s.getPointAngle(O,Y),Z<=F&&(Z=Z+Math.PI*2)):(Y=A,F=O.startAngle,Z=s.getPointAngle(O,Y)),{r:R,ir:V,startAngle:F,endAngle:Z}}function _(A,O){var R=O.geom,W=R.get("coord"),F=O.point,Z=7.5,V;if(W&&W.type==="theta"){var k=g(F,W),Y=(k.endAngle-k.startAngle)/2+k.startAngle,K=Z*Math.cos(Y),it=Z*Math.sin(Y);V={transform:[["t",K,it]]}}return t.mix({},V)}var M=l.registerFactory("interval",{defaultShapeType:"rect",getActiveCfg:function(O,R){if(!O||t.inArray(["rect","funnel","pyramid"],O)){var W=R.fillOpacity||R.opacity||1;return{fillOpacity:W-.15}}var F=R.lineWidth||0;return{lineWidth:F+1}},getDefaultPoints:function(O){return i(O)},getSelectedCfg:function(O,R){return _(O,R)}});l.registerShape("interval","rect",{draw:function(O,R){var W=v(O),F=a(O.points);return F=this.parsePath(F),R.addShape("path",{attrs:t.mix(W,{path:F})})},getMarkerCfg:function(O){var R=v(O),W=O.isInCircle;return t.mix({symbol:W?"circle":"square",radius:W?4.5:4},R)}}),l.registerShape("interval","hollowRect",{draw:function(O,R){var W=b(O),F=a(O.points);return F=this.parsePath(F),R.addShape("path",{attrs:t.mix(W,{path:F})})},getMarkerCfg:function(O){var R=b(O),W=O.isInCircle;return t.mix({symbol:W?"circle":"square",radius:W?4.5:4},R)}}),l.registerShape("interval","line",{getPoints:function(O){return o(O)},draw:function(O,R){var W=b(O);W.lineWidth=O.size||1;var F=a(O.points);return F=this.parsePath(F),R.addShape("path",{attrs:t.mix(W,{path:F})})},getMarkerCfg:function(O){var R=b(O);return t.mix({symbol:"line",radius:5},R)}}),l.registerShape("interval","tick",{getPoints:function(O){return u(O)},draw:function(O,R){var W=b(O);W.lineWidth||(W.lineWidth=2);var F=f(O.points);return F=this.parsePath(F),R.addShape("path",{attrs:t.mix(W,{path:F})})},getMarkerCfg:function(O){var R=b(O);return t.mix({symbol:"tick",radius:5},R)}}),l.registerShape("interval","funnel",{getPoints:function(O){return O.size=O.size*2,i(O)},draw:function(O,R){var W=v(O),F=y(O,!0);return F=this.parsePath(F),R.addShape("path",{attrs:t.mix(W,{path:F})})},getMarkerCfg:function(O){var R=v(O);return t.mix({symbol:"square",radius:4},R)}}),l.registerShape("interval","pyramid",{getPoints:function(O){return O.size=O.size*2,i(O,!0)},draw:function(O,R){var W=v(O),F=y(O,!1);return F=this.parsePath(F),R.addShape("path",{attrs:t.mix(W,{path:F})})},getMarkerCfg:function(O){var R=v(O);return t.mix({symbol:"square",radius:4},R)}});function x(A,O,R,W){return O===0?[[A+1/2*R/Math.PI/2,W/2],[A+1/2*R/Math.PI,W],[A+R/4,W]]:O===1?[[A+1/2*R/Math.PI/2*(Math.PI-2),W],[A+1/2*R/Math.PI/2*(Math.PI-1),W/2],[A+R/4,0]]:O===2?[[A+1/2*R/Math.PI/2,-W/2],[A+1/2*R/Math.PI,-W],[A+R/4,-W]]:[[A+1/2*R/Math.PI/2*(Math.PI-2),-W],[A+1/2*R/Math.PI/2*(Math.PI-1),-W/2],[A+R/4,0]]}function m(A,O,R,W,F,Z,V){for(var k=Math.ceil(2*A/R*4)*2,Y=[];W<-Math.PI*2;)W+=Math.PI*2;for(;W>0;)W-=Math.PI*2;W=W/Math.PI/2*R;var K=Z-A+W-A*2;Y.push(["M",K,O]);for(var it=0,ct=0;ct<k;++ct){var ht=ct%4,ut=x(ct*R/4,ht,R,F);Y.push(["C",ut[0][0]+K,-ut[0][1]+O,ut[1][0]+K,-ut[1][1]+O,ut[2][0]+K,-ut[2][1]+O]),ct===k-1&&(it=ut[2][0])}return Y.push(["L",it+K,V+A]),Y.push(["L",K,V+A]),Y.push(["L",K,O]),Y}function S(A,O,R,W,F,Z,V,k){for(var Y=V.getBBox(),K=Y.maxX-Y.minX,it=Y.maxY-Y.minY,ct=5e3,ht=300,ut=0;ut<W;ut++){var It=Z.addShape("path",{attrs:{path:m(k,Y.minY+it*R,K/4,0,K/64,A,O),fill:F[ut],clip:V}});r.renderer==="canvas"&&It.animate({transform:[["t",K/2,0]],repeat:!0},ct-ut*ht)}}l.registerShape("interval","liquid-fill-gauge",{draw:function(O,R){var W=this,F=.5,Z=0,V=Infinity;t.each(O.points,function(It){It.x<V&&(V=It.x),Z+=It.x});var k=Z/O.points.length,Y=W.parsePoint({x:k,y:F}),K=W.parsePoint({x:V,y:.5}),it=Y.x-K.x,ct=Math.min(it,K.y),ht=v(O),ut=new h.Circle({attrs:{x:Y.x,y:Y.y,r:ct}});return S(Y.x,Y.y,O.y/(2*Y.y),1,[ht.fill],R,ut,ct*4),R.addShape("circle",{attrs:t.mix(b(O),{x:Y.x,y:Y.y,r:ct+ct/8})})}});var P={};l.registerShape("interval","liquid-fill-path",{draw:function(O,R){var W=this,F=t.mix({},v(O)),Z=O.shape[1],V=.5,k=0,Y=Infinity;t.each(O.points,function(ot){ot.x<Y&&(Y=ot.x),k+=ot.x});var K=k/O.points.length,it=W.parsePoint({x:K,y:V}),ct=W.parsePoint({x:Y,y:.5}),ht=it.x-ct.x,ut=Math.min(ht,ct.y),It;if(P[Z])It=P[Z];else{var Nt=n.parsePathString(Z);P[Z]=It={segments:Nt}}var Lt=[];F.rotate&&(Lt.push(["r",F.rotate/180*Math.PI]),delete F.rotate);var _t=R.addShape("path",{attrs:t.mix(F,{fillOpacity:0,path:It.segments})}),mt=t.cloneDeep(_t.getBBox()),At=mt.maxX-mt.minX,rt=mt.maxY-mt.minY,Mt=Math.max(At,rt),z=ut*2/Mt;_t.transform(Lt.concat([["s",z,z]]));var $=z*At/2,dt=z*rt/2;_t.transform([["t",it.x-$,it.y-dt]]),S(it.x,it.y,O.y/(2*it.y),1,[F.fill],R,_t,ct.y*4);var et=R.addShape("path",{attrs:t.mix(b(O),{path:It.segments})});return et.transform(Lt.concat([["s",z,z],["t",it.x-$,it.y-dt]])),et}}),l.registerShape("interval","top-line",{draw:function(O,R){var W=v(O),F=O.style||{},Z=[["M",O.points[1].x,O.points[1].y],["L",O.points[2].x,O.points[2].y]],V={stroke:F.stroke||"white",lineWidth:F.lineWidth||1,path:this.parsePath(Z)},k=a(O.points);k=this.parsePath(k),delete W.stroke;var Y=R.addShape("path",{attrs:t.mix(W,{zIndex:0,path:k})});return R.addShape("path",{zIndex:1,attrs:V}),Y},getMarkerCfg:function(O){var R=v(O),W=O.isInCircle;return t.mix({symbol:W?"circle":"square",radius:W?4.5:4},R)}}),E.exports=M},function(E,T,e){var t=e(0),l=e(25),s=e(23),c=e(9),r=e(5),h=[1,1],n=[5.5,1];function i(P){var A=r.shape.line,O=t.mix({},A,P.style);return s.addStrokeAttrs(O,P),P.size&&(O.lineWidth=P.size),O}function a(P){var A=r.shape.line,O=t.mix({lineWidth:2,radius:6},A,P.style);return s.addStrokeAttrs(O,P),O}function o(P,A,O,R){for(var W=[],F=R.isStack,Z=[],V=0;V<P.length;V++){var k=P[V],Y=s.splitPoints(k);Z.push(Y[0]),W.push(Y[1])}var K=u(W,A,O,R),it=u(Z,A,O,R);return F?K:K.concat(it)}function u(P,A,O,R){var W;if(!A)W=l.getLinePath(P,!1),O&&W.push(["Z"]);else{var F=R.constraint;O&&P.length&&P.push({x:P[0].x,y:P[0].y}),W=l.getSplinePath(P,!1,F)}return W}function f(P,A){var O,R=P.points,W=P.isInCircle,F=R[0];return t.isArray(F.y)?O=o(R,A,W,P):O=u(R,A,W,P),O}function v(P,A){var O=[];return t.each(P,function(R,W){var F=P[W+1];O.push(R),F&&(O=O.concat(A(R,F)))}),O}function b(P){var A=[];return t.each(P,function(O,R){var W=R===0?["M",O.x,O.y]:["L",O.x,O.y];A.push(W)}),A}function y(P,A){var O=v(P.points,A);return b(O)}function g(P,A,O){return[["M",P-O,A],["L",P+O,A]]}function _(P,A,O){return[["M",P-O,A],["A",O/2,O/2,0,1,1,P,A],["A",O/2,O/2,0,1,0,P+O,A]]}function M(P,A){return t.mix({symbol:A?_:g},a(P))}function x(P,A){return t.mix({symbol:A},a(P))}function m(P,A,O){var R=A.points[0];return O.addShape("circle",{attrs:t.mix({x:R.x,y:R.y,r:2,fill:A.color},A.style)})}var S=c.registerFactory("line",{defaultShapeType:"line",getActiveCfg:function(A,O){var R=O.lineWidth||0;return{lineWidth:R+1}},getDefaultPoints:function(A){return s.splitPoints(A)},drawShape:function(A,O,R){var W=this.getShape(A),F;return O.points.length===1&&r.showSinglePoint?F=m(this,O,R):F=W.draw(O,R),F&&(F.set("origin",O.origin),F._id=O.splitedIndex?O._id+O.splitedIndex:O._id,F.name=this.name),F}});c.registerShape("line","line",{draw:function(A,O){var R=i(A),W=f(A,!1);return O.addShape("path",{attrs:t.mix(R,{path:W})})},getMarkerCfg:function(A){return M(A)}}),c.registerShape("line","dot",{draw:function(A,O){var R=i(A),W=f(A,!1);return O.addShape("path",{attrs:t.mix(R,{path:W,lineDash:h})})},getMarkerCfg:function(A){var O=M(A,!1);return O.lineDash=h,O}}),c.registerShape("line","dash",{draw:function(A,O){var R=i(A),W=f(A,!1);return O.addShape("path",{attrs:t.mix({path:W,lineDash:n},R)})},getMarkerCfg:function(A){var O=M(A,!1);return O.lineDash=O.lineDash||n,O}}),c.registerShape("line","smooth",{draw:function(A,O){var R=i(A),W=this._coord;A.constraint=[[W.start.x,W.end.y],[W.end.x,W.start.y]];var F=f(A,!0);return O.addShape("path",{attrs:t.mix(R,{path:F})})},getMarkerCfg:function(A){return M(A,!0)}}),c.registerShape("line","hv",{draw:function(A,O){var R=i(A),W=y(A,function(F,Z){var V=[];return V.push({x:Z.x,y:F.y}),V});return O.addShape("path",{attrs:t.mix(R,{path:W})})},getMarkerCfg:function(A){return x(A,function(O,R,W){return[["M",O-W-1,R-2.5],["L",O,R-2.5],["L",O,R+2.5],["L",O+W+1,R+2.5]]})}}),c.registerShape("line","vh",{draw:function(A,O){var R=i(A),W=y(A,function(F,Z){var V=[];return V.push({x:F.x,y:Z.y}),V});return O.addShape("path",{attrs:t.mix(R,{path:W})})},getMarkerCfg:function(A){return x(A,function(O,R,W){return[["M",O-W-1,R+2.5],["L",O,R+2.5],["L",O,R-2.5],["L",O+W+1,R-2.5]]})}}),c.registerShape("line","hvh",{draw:function(A,O){var R=i(A),W=y(A,function(F,Z){var V=[],k=(Z.x-F.x)/2+F.x;return V.push({x:k,y:F.y}),V.push({x:k,y:Z.y}),V});return O.addShape("path",{attrs:t.mix(R,{path:W})})},getMarkerCfg:function(A){return x(A,function(O,R,W){return[["M",O-(W+1),R+2.5],["L",O-W/2,R+2.5],["L",O-W/2,R-2.5],["L",O+W/2,R-2.5],["L",O+W/2,R+2.5],["L",O+W+1,R+2.5]]})}}),c.registerShape("line","vhv",{draw:function(A,O){var R=i(A),W=y(A,function(F,Z){var V=[],k=(Z.y-F.y)/2+F.y;return V.push({x:F.x,y:k}),V.push({x:Z.x,y:k}),V});return O.addShape("path",{attrs:t.mix(R,{path:W})})},getMarkerCfg:function(A){return x(A,function(O,R){return[["M",O-5,R+2.5],["L",O-5,R],["L",O,R],["L",O,R-3],["L",O,R+3],["L",O+6.5,R+3]]})}}),S.spline=S.smooth,E.exports=S},function(E,T,e){var t=e(0),l=e(23),s=e(5),c=e(9),r=e(16),h=r.Marker,n=t.PathUtil,i=["circle","square","bowtie","diamond","hexagon","triangle","triangle-down"],a=["cross","tick","plus","hyphen","line","pointerLine","pointerArrow"],o=Math.sqrt(3);t.mix(h.Symbols,{hexagon:function(_,M,x){var m=x/2*o;return[["M",_,M-x],["L",_+m,M-x/2],["L",_+m,M+x/2],["L",_,M+x],["L",_-m,M+x/2],["L",_-m,M-x/2],["Z"]]},bowtie:function(_,M,x){var m=x-1.5;return[["M",_-x,M-m],["L",_+x,M+m],["L",_+x,M-m],["L",_-x,M+m],["Z"]]},cross:function(_,M,x){return[["M",_-x,M-x],["L",_+x,M+x],["M",_+x,M-x],["L",_-x,M+x]]},tick:function(_,M,x){return[["M",_-x/2,M-x],["L",_+x/2,M-x],["M",_,M-x],["L",_,M+x],["M",_-x/2,M+x],["L",_+x/2,M+x]]},plus:function(_,M,x){return[["M",_-x,M],["L",_+x,M],["M",_,M-x],["L",_,M+x]]},hyphen:function(_,M,x){return[["M",_-x,M],["L",_+x,M]]},line:function(_,M,x){return[["M",_,M-x],["L",_,M+x]]}});function u(g){var _=s.shape.point,M=t.mix({},_,g.style);return l.addFillAttrs(M,g),t.isNumber(g.size)&&(M.radius=g.size),M}function f(g){var _=s.shape.hollowPoint,M=t.mix({},_,g.style);return l.addStrokeAttrs(M,g),t.isNumber(g.size)&&(M.radius=g.size),M}var v=c.registerFactory("point",{defaultShapeType:"hollowCircle",getActiveCfg:function(_,M){var x=M.radius,m;return _&&(_.indexOf("hollow")===0||t.indexOf(a,_)!==-1)||!_?m=M.stroke||M.strokeStyle:m=M.fill||M.fillStyle,{radius:x+1,shadowBlur:x,shadowColor:m,stroke:m,strokeOpacity:1,lineWidth:1}},getDefaultPoints:function(_){return l.splitPoints(_)}});function b(g){var _=g.points[0].x,M=g.points[0].y,x=g.size[0],m=g.size[1],S=[["M",_-.5*x,M-.5*m],["L",_+.5*x,M-.5*m],["L",_+.5*x,M+.5*m],["L",_-.5*x,M+.5*m],["z"]];return S}c.registerShape("point","rect",{draw:function(_,M){var x=u(_),m=b(_);m=this.parsePath(m);var S=M.addShape("path",{attrs:t.mix(x,{path:m})});return S},getMarkerCfg:function(_){var M=u(_);return M.symbol="rect",M.radius=4.5,M}}),t.each(i,function(g){c.registerShape("point",g,{draw:function(M,x){var m=u(M);return x.addShape("Marker",{attrs:t.mix(m,{symbol:g,x:M.x,y:M.y})})},getMarkerCfg:function(M){var x=u(M);return x.symbol=g,x.radius=4.5,x}}),c.registerShape("point","hollow"+t.upperFirst(g),{draw:function(M,x){var m=f(M);return x.addShape("Marker",{attrs:t.mix(m,{symbol:g,x:M.x,y:M.y})})},getMarkerCfg:function(M){var x=f(M);return x.symbol=g,x.radius=4.5,x}})}),t.each(a,function(g){c.registerShape("point",g,{draw:function(M,x){var m=f(M);return x.addShape("Marker",{attrs:t.mix(m,{symbol:g,x:M.x,y:M.y})})},getMarkerCfg:function(M){var x=f(M);return x.symbol=g,x.radius=4.5,x}})}),c.registerShape("point","image",{draw:function(_,M){return _.points=this.parsePoints(_.points),M.addShape("image",{attrs:{x:_.points[0].x-_.size/2,y:_.points[0].y-_.size,width:_.size,height:_.size,img:_.shape[1]}})}});var y={};c.registerShape("point","path",{draw:function(_,M){var x=t.mix({},f(_),u(_)),m=_.shape[1],S=_.size||10,P;if(y[m])P=y[m];else{var A=n.parsePathString(m),O=t.flatten(A).filter(function(Z){return t.isNumber(Z)});y[m]=P={range:Math.max.apply(null,O)-Math.min.apply(null,O),segments:A}}var R=S/P.range,W=[];x.rotate&&(W.push(["r",x.rotate/180*Math.PI]),delete x.rotate);var F=M.addShape("path",{attrs:t.mix(x,{path:P.segments})});return W.push(["s",R,R],["t",_.x,_.y]),F.transform(W),F}}),E.exports=v},function(E,T,e){var t=e(0),l=e(9),s=e(23),c=e(5);function r(a){var o=c.shape.polygon,u=t.mix({},o,a.style);return s.addFillAttrs(u,a),u}function h(a){var o=c.shape.hollowPolygon,u=t.mix({},o,a.style);return s.addStrokeAttrs(u,a),u}function n(a){for(var o=a[0],u=1,f=[["M",o.x,o.y]];u<a.length;){var v=a[u];(v.x!==a[u-1].x||v.y!==a[u-1].y)&&(f.push(["L",v.x,v.y]),v.x===o.x&&v.y===o.y&&u<a.length-1&&(o=a[u+1],f.push(["Z"]),f.push(["M",o.x,o.y]),u++)),u++}return t.isEqual(f[f.length-1],o)||f.push(["L",o.x,o.y]),f.push(["Z"]),f}var i=l.registerFactory("polygon",{defaultShapeType:"polygon",getDefaultPoints:function(o){var u=[];return t.each(o.x,function(f,v){var b=o.y[v];u.push({x:f,y:b})}),u},getActiveCfg:function(o,u){var f=u.lineWidth||1;if(o==="hollow")return{lineWidth:f+1};var v=u.fillOpacity||u.opacity||1;return{fillOpacity:v-.08}},getSelectedCfg:function(o,u){return u&&u.style?u.style:this.getActiveCfg(o,u)}});l.registerShape("polygon","polygon",{draw:function(o,u){if(!t.isEmpty(o.points)){var f=r(o),v=n(o.points);return v=this.parsePath(v),u.addShape("path",{attrs:t.mix(f,{path:v})})}},getMarkerCfg:function(o){return t.mix({symbol:"square",radius:4},r(o))}}),l.registerShape("polygon","hollow",{draw:function(o,u){if(!t.isEmpty(o.points)){var f=h(o),v=n(o.points);return v=this.parsePath(v),u.addShape("path",{attrs:t.mix(f,{path:v})})}},getMarkerCfg:function(o){return t.mix({symbol:"square",radius:4},r(o))}}),E.exports=i},function(E,T,e){var t=e(0),l=e(9),s=e(23),c=e(5);function r(y){t.isArray(y)||(y=[y]);var g=y[0],_=y[y.length-1],M=y.length>1?y[1]:g,x=y.length>3?y[3]:_,m=y.length>2?y[2]:M;return{min:g,max:_,min1:M,max1:x,median:m}}function h(y,g){t.each(y,function(_){g.push({x:_[0],y:_[1]})})}function n(y){var g=c.shape.schema,_=t.mix({},g,y.style);return s.addStrokeAttrs(_,y),_}function i(y){var g=c.shape.schema,_=t.mix({},g,y.style);return s.addFillAttrs(_,y),y.color&&(_.stroke=y.color||_.stroke),_}function a(y,g,_){var M=[],x,m;return t.isArray(g)?(m=r(g),x=[[y-_/2,m.max],[y+_/2,m.max],[y,m.max],[y,m.max1],[y-_/2,m.min1],[y-_/2,m.max1],[y+_/2,m.max1],[y+_/2,m.min1],[y,m.min1],[y,m.min],[y-_/2,m.min],[y+_/2,m.min],[y-_/2,m.median],[y+_/2,m.median]]):(g=g||.5,m=r(y),x=[[m.min,g-_/2],[m.min,g+_/2],[m.min,g],[m.min1,g],[m.min1,g-_/2],[m.min1,g+_/2],[m.max1,g+_/2],[m.max1,g-_/2],[m.max1,g],[m.max,g],[m.max,g-_/2],[m.max,g+_/2],[m.median,g-_/2],[m.median,g+_/2]]),h(x,M),M}function o(y){t.isArray(y)||(y=[y]);var g=y.sort(function(m,S){return m<S?1:-1}),_=g.length;if(_<4)for(var M=g[_-1],x=0;x<4-_;x++)g.push(M);return g}function u(y,g,_){var M=o(g),x=[{x:y,y:M[0]},{x:y,y:M[1]},{x:y-_/2,y:M[2]},{x:y-_/2,y:M[1]},{x:y+_/2,y:M[1]},{x:y+_/2,y:M[2]},{x:y,y:M[2]},{x:y,y:M[3]}];return x}function f(y){var g=[["M",y[0].x,y[0].y],["L",y[1].x,y[1].y],["M",y[2].x,y[2].y],["L",y[3].x,y[3].y],["M",y[4].x,y[4].y],["L",y[5].x,y[5].y],["L",y[6].x,y[6].y],["L",y[7].x,y[7].y],["L",y[4].x,y[4].y],["Z"],["M",y[8].x,y[8].y],["L",y[9].x,y[9].y],["M",y[10].x,y[10].y],["L",y[11].x,y[11].y],["M",y[12].x,y[12].y],["L",y[13].x,y[13].y]];return g}function v(y){var g=[["M",y[0].x,y[0].y],["L",y[1].x,y[1].y],["M",y[2].x,y[2].y],["L",y[3].x,y[3].y],["L",y[4].x,y[4].y],["L",y[5].x,y[5].y],["Z"],["M",y[6].x,y[6].y],["L",y[7].x,y[7].y]];return g}var b=l.registerFactory("schema",{defaultShapeType:"",getActiveCfg:function(g,_){if(g==="box"){var M=_.lineWidth||1;return{lineWidth:M+1}}var x=_.fillOpacity||_.opacity||1;return{fillOpacity:x-.15,strokeOpacity:x-.15}},getSelectedCfg:function(g,_){return _&&_.style?_.style:this.getActiveCfg(g,_)}});l.registerShape("schema","box",{getPoints:function(g){return a(g.x,g.y,g.size)},draw:function(g,_){var M=n(g),x=f(g.points);return x=this.parsePath(x),_.addShape("path",{attrs:t.mix(M,{path:x})})},getMarkerCfg:function(g){return{symbol:function(M,x,m){var S=[x-6,x-3,x,x+3,x+6],P=a(M,S,m);return[["M",P[0].x+1,P[0].y],["L",P[1].x-1,P[1].y],["M",P[2].x,P[2].y],["L",P[3].x,P[3].y],["M",P[4].x,P[4].y],["L",P[5].x,P[5].y],["L",P[6].x,P[6].y],["L",P[7].x,P[7].y],["L",P[4].x,P[4].y],["Z"],["M",P[8].x,P[8].y],["L",P[9].x,P[9].y],["M",P[10].x+1,P[10].y],["L",P[11].x-1,P[11].y],["M",P[12].x,P[12].y],["L",P[13].x,P[13].y]]},radius:6,lineWidth:1,stroke:g.color}}}),l.registerShape("schema","candle",{getPoints:function(g){return u(g.x,g.y,g.size)},draw:function(g,_){var M=i(g),x=v(g.points);return x=this.parsePath(x),_.addShape("path",{attrs:t.mix(M,{path:x})})},getMarkerCfg:function(g){return{symbol:function(M,x,m){x=[x+7.5,x+3,x-3,x-7.5];var S=u(M,x,m);return[["M",S[0].x,S[0].y],["L",S[1].x,S[1].y],["M",S[2].x,S[2].y],["L",S[3].x,S[3].y],["L",S[4].x,S[4].y],["L",S[5].x,S[5].y],["Z"],["M",S[6].x,S[6].y],["L",S[7].x,S[7].y]]},lineWidth:1,stroke:g.color,fill:g.color,radius:6}}}),E.exports=b},function(E,T,e){var t=e(0),l=e(9),s=e(23),c=e(5),r=t.PathUtil;function h(a){var o=c.shape.venn,u=t.mix({},o,a.style);return s.addFillAttrs(u,a),u}function n(a){var o=c.shape.hollowVenn,u=t.mix({},o,a.style);return s.addStrokeAttrs(u,a),u}var i=l.registerFactory("venn",{defaultShapeType:"venn",getActiveCfg:function(o,u){var f=u.lineWidth||1;if(o==="hollow")return{lineWidth:f+1};var v=u.fillOpacity||u.opacity||1;return{fillOpacity:v-.08}},getSelectedCfg:function(o,u){return u&&u.style?u.style:this.getActiveCfg(o,u)}});l.registerShape("venn","venn",{draw:function(o,u){var f=o.origin._origin,v=f.path,b=h(o),y=r.parsePathString(v),g=u.addShape("path",{attrs:t.mix(b,{path:y})});return g},getMarkerCfg:function(o){return t.mix({symbol:"circle",radius:4},h(o))}}),l.registerShape("venn","hollow",{draw:function(o,u){var f=o.origin._origin,v=f.path,b=n(o),y=r.parsePathString(v),g=u.addShape("path",{attrs:t.mix(b,{path:y})});return g},getMarkerCfg:function(o){return t.mix({symbol:"circle",radius:4},h(o))}}),E.exports=i},function(E,T,e){var t=e(0),l=e(9),s=e(23),c=e(5),r=e(25);function h(f){var v=c.shape.venn,b=t.mix({},v,f.style);return s.addFillAttrs(b,f),f.color&&(b.stroke=b.stroke||f.color),b}function n(f){var v=c.shape.hollowVenn,b=t.mix({},v,f.style);return s.addStrokeAttrs(b,f),b}function i(f){for(var v=[],b=0;b<f.length;b++){var y=f[b];if(y){var g=b===0?"M":"L";v.push([g,y.x,y.y])}}var _=f[0];return _&&(v.push(["L",_.x,_.y]),v.push(["z"])),v}function a(f){for(var v=f.length/2,b=[],y=[],g=0;g<f.length;g++)g<v?b.push(f[g]):y.push(f[g]);var _=r.getSplinePath(b,!1),M=r.getSplinePath(y,!1);y.length&&_.push(["L",y[0].x,y[0].y]),M.shift();var x=_.concat(M);return b.length&&x.push(["L",b[0].x,b[0].y]),x.push(["z"]),x}function o(f){var v=Math.max.apply(null,f);return f.map(function(b){return b/v})}var u=l.registerFactory("violin",{defaultShapeType:"violin",getDefaultPoints:function(v){var b=v.size/2,y=[],g=o(v._size);return t.each(v.y,function(_,M){var x=g[M]*b,m=M===0,S=M===v.y.length-1;y.push({isMin:m,isMax:S,x:v.x-x,y:_}),y.unshift({isMin:m,isMax:S,x:v.x+x,y:_})}),y},getActiveCfg:function(v,b){var y=b.lineWidth||1;if(v==="hollow")return{lineWidth:y+1};var g=b.fillOpacity||b.opacity||1;return{fillOpacity:g-.08}},getSelectedCfg:function(v,b){return b&&b.style?b.style:this.getActiveCfg(v,b)}});l.registerShape("violin","violin",{draw:function(v,b){var y=h(v),g=i(v.points);g=this.parsePath(g);var _=b.addShape("path",{attrs:t.mix(y,{path:g})});return _},getMarkerCfg:function(v){return t.mix({symbol:"circle",radius:4},h(v))}}),l.registerShape("violin","smooth",{draw:function(v,b){var y=h(v),g=a(v.points);g=this.parsePath(g);var _=b.addShape("path",{attrs:t.mix(y,{path:g})});return _},getMarkerCfg:function(v){return t.mix({symbol:"circle",radius:4},h(v))}}),l.registerShape("violin","hollow",{draw:function(v,b){var y=n(v),g=i(v.points);g=this.parsePath(g);var _=b.addShape("path",{attrs:t.mix(y,{path:g})});return _},getMarkerCfg:function(v){return t.mix({symbol:"circle",radius:4},n(v))}}),l.registerShape("violin","smoothHollow",{draw:function(v,b){var y=n(v),g=a(v.points);g=this.parsePath(g);var _=b.addShape("path",{attrs:t.mix(y,{path:g})});return _},getMarkerCfg:function(v){return t.mix({symbol:"circle",radius:4},n(v))}}),E.exports=u},function(E,T,e){var t=e(0);E.exports=function(l){return t.isArray(l)?l:t.isString(l)?l.split("*"):[l]}},function(E,T,e){var t=e(0).MatrixUtil,l=t.vec2;function s(r,h,n,i){var a=[],o,u,f=!!i,v,b;if(f){v=[Infinity,Infinity],b=[-Infinity,-Infinity];for(var y=0,g=r.length;y<g;y++){var _=r[y];v=l.min([],v,_),b=l.max([],b,_)}v=l.min([],v,i[0]),b=l.max([],b,i[1])}for(var M=0,x=r.length;M<x;M++){var m=r[M];if(n)o=r[M?M-1:x-1],u=r[(M+1)%x];else if(M===0||M===x-1){a.push(m);continue}else o=r[M-1],u=r[M+1];var S=[];S=l.sub(S,u,o),S=l.scale(S,S,h);var P=l.distance(m,o),A=l.distance(m,u),O=P+A;O!==0&&(P/=O,A/=O);var R=l.scale([],S,-P),W=l.scale([],S,A),F=l.add([],m,R),Z=l.add([],m,W);f&&(F=l.max([],F,v),F=l.min([],F,b),Z=l.max([],Z,v),Z=l.min([],Z,b)),a.push(F),a.push(Z)}return n&&a.push(a.shift()),a}function c(r,h,n){for(var i=!!h,a=[],o=0,u=r.length;o<u;o+=2)a.push([r[o],r[o+1]]);for(var f=s(a,.4,i,n),v=a.length,b=[],y,g,_,M=0;M<v-1;M++)y=f[M*2],g=f[M*2+1],_=a[M+1],b.push(["C",y[0],y[1],g[0],g[1],_[0],_[1]]);return i&&(y=f[v],g=f[v+1],_=a[0],b.push(["C",y[0],y[1],g[0],g[1],_[0],_[1]])),b}E.exports={catmullRom2bezier:c}},function(E,T,e){function t(u,f){u.prototype=Object.create(f.prototype),u.prototype.constructor=u,u.__proto__=f}var l=e(8),s=e(0),c=e(544),r=c.venn,h=c.scaleSolution,n=c.circlePath,i=c.intersectionAreaPath,a=c.computeTextCentres;e(311);var o=function(u){t(f,u);function f(){return u.apply(this,arguments)||this}var v=f.prototype;return v.getDefaultCfg=function(){var y=u.prototype.getDefaultCfg.call(this);return y.type="venn",y.shapeType="venn",y.generatePoints=!1,y},v._getAttrValues=function(y,g){return y.type==="position"?[g.x,g.y]:u.prototype._getAttrValues.call(this,y,g)},v.sets=function(y){return this.set("setsField",y),this},v._initAttrs=function(){var y=this;u.prototype._initAttrs.call(this);var g=y.get("attrOptions"),_=y.get("setsField")||"sets",M=y.get("data"),x=g.size?g.size.field:"size";M.forEach(function(k){k.sets=k[_],k._sets=k[_].join("&"),k.size=k[x]});var m=r(M),S=y.get("coord"),P=[Math.min(S.x.end,S.x.start),Math.max(S.x.end,S.x.start)],A=[Math.min(S.y.end,S.y.start),Math.max(S.y.end,S.y.start)],O=P[1]-P[0],R=A[1]-A[0],W=y.get("styleOptions"),F=W&&s.isObject(W.style)?W.style.padding:0;s.isFinite(F)||(F=0);var Z=h(m,O,R,F),V=a(Z,M);M.forEach(function(k){var Y=k.sets,K=Y.join(",");if(k.id=K,Y.length===1){var it=Z[K];k.path=n(it.x,it.y,it.radius),s.assign(k,it)}else{var ct=Y.map(function(It){return Z[It]}),ht=i(ct);/[zZ]$/.test(ht)||(ht+="Z"),k.path=ht;var ut=V[K]||{x:0,y:0};s.assign(k,ut)}})},f}(l);l.Venn=o,E.exports=o},function(E,T,e){function t(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function l(i,a){i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.__proto__=a}var s=e(8),c=e(0),r=e(70);e(312);var h=function(i){l(o,i);var a=o.prototype;a.getDefaultCfg=function(){var f=i.prototype.getDefaultCfg.call(this);return f.type="violin",f.shapeType="violin",f.generatePoints=!0,f};function o(u){var f;return f=i.call(this,u)||this,c.assign(t(f),r),f}return a.createShapePointsCfg=function(f){var v=this,b=i.prototype.createShapePointsCfg.call(this,f);b.size=v.getNormalizedSize(f);var y=v.get("_sizeField");return b._size=f._origin[y],b},a.clearInner=function(){i.prototype.clearInner.call(this),this.set("defaultSize",null)},a._initAttrs=function(){var f=this,v=f.get("attrOptions"),b=v.size?v.size.field:f.get("_sizeField")?f.get("_sizeField"):"size";f.set("_sizeField",b),delete v.size,i.prototype._initAttrs.call(this)},o}(s),n=function(i){l(a,i);function a(){return i.apply(this,arguments)||this}var o=a.prototype;return o.getDefaultCfg=function(){var f=i.prototype.getDefaultCfg.call(this);return f.hasDefaultAdjust=!0,f.adjusts=[{type:"dodge"}],f},a}(h);h.Dodge=n,s.Violin=h,s.ViolinDodge=n,E.exports=h},function(E,T,e){function t(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function l(i,a){i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.__proto__=a}var s=e(0),c=e(28),r=["X","Y","XY","POLYGON"],h="XY",n=function(i){l(o,i);var a=o.prototype;a.getDefaultCfg=function(){var f=i.prototype.getDefaultCfg.call(this);return s.mix({},f,{type:h,startPoint:null,brushing:!1,dragging:!1,brushShape:null,container:null,polygonPath:null,style:{fill:"#C5D4EB",opacity:.3,lineWidth:1,stroke:"#82A6DD"},draggable:!1,dragOffX:0,dragOffY:0,inPlot:!0,xField:null,yField:null})};function o(u,f){var v;v=i.call(this,u,f)||this;var b=t(v);b.filter=!b.draggable,b.type=b.type.toUpperCase(),b.chart=f,r.includes(b.type)||(b.type=h);var y=b.canvas;if(y){var g;y.get("children").map(function(m){return m.get("type")==="plotBack"?(g=m.get("plotRange"),!1):m}),b.plot={start:g.bl,end:g.tr}}if(f){var _=f.get("coord");b.plot={start:_.start,end:_.end},f.on("afterrender",function(){b.plot={start:_.start,end:_.end}}),b.isTransposed=_.isTransposed;var M=f._getScales("x"),x=f._getScales("y");b.xScale=b.xField?M[b.xField]:f.getXScale(),b.yScale=b.yField?x[b.yField]:f.getYScales()[0]}return v}return a.start=function(f){var v=this,b=v.canvas,y=v.type,g=v.brushShape;if(!!y){v.brushing&&v.end(f);var _={x:f.offsetX,y:f.offsetY};if(!!_.x){var M=v.plot&&v.inPlot,x=b.get("canvasDOM"),m=b.get("pixelRatio");if(v.selection&&(v.selection=null),v.draggable&&g&&!g.get("destroyed")){if(g.isHit(_.x*m,_.y*m)){if(x.style.cursor="move",v.selection=g,v.dragging=!0,y==="X")v.dragoffX=_.x-g.attr("x"),v.dragoffY=0;else if(y==="Y")v.dragoffX=0,v.dragoffY=_.y-g.attr("y");else if(y==="XY")v.dragoffX=_.x-g.attr("x"),v.dragoffY=_.y-g.attr("y");else if(y==="POLYGON"){var S=g.getBBox();v.dragoffX=_.x-S.minX,v.dragoffY=_.y-S.minY}v.onDragstart&&v.onDragstart(f)}v.prePoint=_}if(!v.dragging){v.onBrushstart&&v.onBrushstart(_);var P=v.container;if(M){var A=v.plot,O=A.start,R=A.end;if(_.x<O.x||_.x>R.x||_.y<R.y||_.y>O.y)return}x.style.cursor="crosshair",v.startPoint=_,v.brushShape=null,v.brushing=!0,P?P.clear():(P=b.addGroup({zIndex:5}),P.initTransform()),v.container=P,y==="POLYGON"&&(v.polygonPath="M "+_.x+" "+_.y)}}}},a.process=function(f){var v=this,b=v.brushing,y=v.dragging,g=v.type,_=v.plot,M=v.startPoint,x=v.xScale,m=v.yScale,S=v.canvas;if(!(!b&&!y)){var P={x:f.offsetX,y:f.offsetY},A=S.get("canvasDOM");if(b){A.style.cursor="crosshair";var O=_.start,R=_.end,W=v.polygonPath,F=v.brushShape,Z=v.container;v.plot&&v.inPlot&&(P=v._limitCoordScope(P));var V,k,Y,K;g==="Y"?(V=O.x,k=P.y>=M.y?M.y:P.y,Y=Math.abs(O.x-R.x),K=Math.abs(M.y-P.y)):g==="X"?(V=P.x>=M.x?M.x:P.x,k=R.y,Y=Math.abs(M.x-P.x),K=Math.abs(R.y-O.y)):g==="XY"?(P.x>=M.x?(V=M.x,k=P.y>=M.y?M.y:P.y):(V=P.x,k=P.y>=M.y?M.y:P.y),Y=Math.abs(M.x-P.x),K=Math.abs(M.y-P.y)):g==="POLYGON"&&(W+="L "+P.x+" "+P.y,v.polygonPath=W,F?!F.get("destroyed")&&F.attr(s.mix({},F._attrs,{path:W})):F=Z.addShape("path",{attrs:s.mix(v.style,{path:W})})),g!=="POLYGON"&&(F?!F.get("destroyed")&&F.attr(s.mix({},F._attrs,{x:V,y:k,width:Y,height:K})):F=Z.addShape("rect",{attrs:s.mix(v.style,{x:V,y:k,width:Y,height:K})})),v.brushShape=F}else if(y){A.style.cursor="move";var it=v.selection;if(it&&!it.get("destroyed"))if(g==="POLYGON"){var ct=v.prePoint;v.selection.translate(P.x-ct.x,P.y-ct.y)}else v.dragoffX&&it.attr("x",P.x-v.dragoffX),v.dragoffY&&it.attr("y",P.y-v.dragoffY)}v.prePoint=P,S.draw();var ht=v._getSelected(),ut=ht.data,It=ht.shapes,Nt=ht.xValues,Lt=ht.yValues,_t={data:ut,shapes:It};x&&(_t[x.field]=Nt),m&&(_t[m.field]=Lt),s.mix(f,_t),_t.x=P.x,_t.y=P.y,v.onDragmove&&v.onDragmove(_t),v.onBrushmove&&v.onBrushmove(_t)}},a.end=function(f){var v=this;if(!(!v.brushing&&!v.dragging)){var b=v.data,y=v.shapes,g=v.xValues,_=v.yValues,M=v.canvas,x=v.type,m=v.startPoint,S=v.chart,P=v.container,A=v.xScale,O=v.yScale,R=f.offsetX,W=f.offsetY,F=M.get("canvasDOM");if(F.style.cursor="default",m!==null){if(Math.abs(m.x-R)<=1&&Math.abs(m.y-W)<=1){v.brushing=!1,v.dragging=!1,P.clear(),M.draw();return}var Z={data:b,shapes:y};if(A&&(Z[A.field]=g),O&&(Z[O.field]=_),s.mix(f,Z),Z.x=R,Z.y=W,v.dragging)v.dragging=!1,v.onDragend&&v.onDragend(Z);else if(v.brushing){v.brushing=!1;var V=v.brushShape,k=v.polygonPath;x==="POLYGON"&&(k+="z",V&&!V.get("destroyed")&&V.attr(s.mix({},V._attrs,{path:k})),v.polygonPath=k,M.draw()),v.onBrushend?v.onBrushend(Z):S&&v.filter&&(P.clear(),!v.isTransposed&&x==="X"||v.isTransposed&&x==="Y"?A&&S.filter(A.field,function(Y){return g.indexOf(Y)>-1}):!v.isTransposed&&x==="Y"||v.isTransposed&&x==="X"?O&&S.filter(O.field,function(Y){return _.indexOf(Y)>-1}):(A&&S.filter(A.field,function(Y){return g.indexOf(Y)>-1}),O&&S.filter(O.field,function(Y){return _.indexOf(Y)>-1})),S.repaint())}}}},a.reset=function(){var f=this,v=f.chart,b=f.filter,y=f.brushShape,g=f.canvas;this._init(),v&&b&&(v.get("options").filters={},v.repaint()),y&&(y.destroy(),g.draw())},a._limitCoordScope=function(f){var v=this.plot,b=v.start,y=v.end;return f.x<b.x&&(f.x=b.x),f.x>y.x&&(f.x=y.x),f.y<y.y&&(f.y=y.y),f.y>b.y&&(f.y=b.y),f},a._getSelected=function(){var f=this,v=f.chart,b=f.xScale,y=f.yScale,g=f.brushShape,_=f.canvas,M=_.get("pixelRatio"),x=[],m=[],S=[],P=[];if(v){var A=v.get("geoms");A.map(function(O){var R=O.getShapes();return R.map(function(W){var F=W.get("origin");return Array.isArray(F)||(F=[F]),F.map(function(Z){if(g.isHit(Z.x*M,Z.y*M)){x.push(W);var V=Z._origin;P.push(V),b&&m.push(V[b.field]),y&&S.push(V[y.field])}return Z}),W}),O})}return f.shapes=x,f.xValues=m,f.yValues=S,f.data=P,_.draw(),{data:P,xValues:m,yValues:S,shapes:x}},o}(c);E.exports=n},function(E,T,e){var t=e(0),l=e(16),s=l.Group,c=t.DomUtil,r=5,h=function n(i){n.superclass.constructor.call(this,i)};t.extend(h,s),t.augment(h,{getDefaultCfg:function(){return{range:null,middleAttr:null,backgroundElement:null,minHandleElement:null,maxHandleElement:null,middleHandleElement:null,currentTarget:null,layout:"vertical",width:null,height:null,pageX:null,pageY:null}},_initHandle:function(i){var a=this,o=a.addGroup(),u=a.get("layout"),f=a.get("handleStyle"),v=f.img,b=f.width,y=f.height,g,_,M;if(u==="horizontal"){var x=f.width;M="ew-resize",_=o.addShape("Image",{attrs:{x:-x/2,y:0,width:x,height:y,img:v,cursor:M}}),g=o.addShape("Text",{attrs:t.mix({x:i==="min"?-(x/2+r):x/2+r,y:y/2,textAlign:i==="min"?"end":"start",textBaseline:"middle",text:i==="min"?this.get("minText"):this.get("maxText"),cursor:M},this.get("textStyle"))})}else M="ns-resize",_=o.addShape("Image",{attrs:{x:0,y:-y/2,width:b,height:y,img:v,cursor:M}}),g=o.addShape("Text",{attrs:t.mix({x:b/2,y:i==="min"?y/2+r:-(y/2+r),textAlign:"center",textBaseline:"middle",text:i==="min"?this.get("minText"):this.get("maxText"),cursor:M},this.get("textStyle"))});return this.set(i+"TextElement",g),this.set(i+"IconElement",_),o},_initSliderBackground:function(){var i=this.addGroup();return i.initTransform(),i.translate(0,0),i.addShape("Rect",{attrs:t.mix({x:0,y:0,width:this.get("width"),height:this.get("height")},this.get("backgroundStyle"))}),i},_beforeRenderUI:function(){var i=this._initSliderBackground(),a=this._initHandle("min"),o=this._initHandle("max"),u=this.addShape("rect",{attrs:this.get("middleAttr")});this.set("middleHandleElement",u),this.set("minHandleElement",a),this.set("maxHandleElement",o),this.set("backgroundElement",i),i.set("zIndex",0),u.set("zIndex",1),a.set("zIndex",2),o.set("zIndex",2),u.attr("cursor","move"),this.sort()},_renderUI:function(){this.get("layout")==="horizontal"?this._renderHorizontal():this._renderVertical()},_transform:function(i){var a=this.get("range"),o=a[0]/100,u=a[1]/100,f=this.get("width"),v=this.get("height"),b=this.get("minHandleElement"),y=this.get("maxHandleElement"),g=this.get("middleHandleElement");b.resetMatrix?(b.resetMatrix(),y.resetMatrix()):(b.initTransform(),y.initTransform()),i==="horizontal"?(g.attr({x:f*o,y:0,width:(u-o)*f,height:v}),b.translate(o*f,0),y.translate(u*f,0)):(g.attr({x:0,y:v*(1-u),width:f,height:(u-o)*v}),b.translate(0,(1-o)*v),y.translate(0,(1-u)*v))},_renderHorizontal:function(){this._transform("horizontal")},_renderVertical:function(){this._transform("vertical")},_bindUI:function(){this.on("mousedown",t.wrapBehavior(this,"_onMouseDown"))},_isElement:function(i,a){var o=this.get(a);if(i===o)return!0;if(o.isGroup){var u=o.get("children");return u.indexOf(i)>-1}return!1},_getRange:function(i,a){var o=i+a;return o=o>100?100:o,o=o<0?0:o,o},_limitRange:function(i,a,o){o[0]=this._getRange(i,o[0]),o[1]=o[0]+a,o[1]>100&&(o[1]=100,o[0]=o[1]-a)},_updateStatus:function(i,a){var o=i==="x"?this.get("width"):this.get("height");i=t.upperFirst(i);var u=this.get("range"),f=this.get("page"+i),v=this.get("currentTarget"),b=this.get("rangeStash"),y=this.get("layout"),g=y==="vertical"?-1:1,_=a["page"+i],M=_-f,x=M/o*100*g,m,S=this.get("minRange"),P=this.get("maxRange");u[1]<=u[0]?(this._isElement(v,"minHandleElement")||this._isElement(v,"maxHandleElement"))&&(u[0]=this._getRange(x,u[0]),u[1]=this._getRange(x,u[0])):(this._isElement(v,"minHandleElement")&&(u[0]=this._getRange(x,u[0]),S&&u[1]-u[0]<=S&&this._limitRange(x,S,u),P&&u[1]-u[0]>=P&&this._limitRange(x,P,u)),this._isElement(v,"maxHandleElement")&&(u[1]=this._getRange(x,u[1]),S&&u[1]-u[0]<=S&&this._limitRange(x,S,u),P&&u[1]-u[0]>=P&&this._limitRange(x,P,u))),this._isElement(v,"middleHandleElement")&&(m=b[1]-b[0],this._limitRange(x,m,u)),this.emit("sliderchange",{range:u}),this.set("page"+i,_),this._renderUI(),this.get("canvas").draw()},_onMouseDown:function(i){var a=i.currentTarget,o=i.event,u=this.get("range");o.stopPropagation(),o.preventDefault(),this.set("pageX",o.pageX),this.set("pageY",o.pageY),this.set("currentTarget",a),this.set("rangeStash",[u[0],u[1]]),this._bindCanvasEvents()},_bindCanvasEvents:function(){var i=this.get("canvas").get("containerDOM");this.onMouseMoveListener=c.addEventListener(i,"mousemove",t.wrapBehavior(this,"_onCanvasMouseMove")),this.onMouseUpListener=c.addEventListener(i,"mouseup",t.wrapBehavior(this,"_onCanvasMouseUp")),this.onMouseLeaveListener=c.addEventListener(i,"mouseleave",t.wrapBehavior(this,"_onCanvasMouseUp"))},_onCanvasMouseMove:function(i){var a=this.get("layout");a==="horizontal"?this._updateStatus("x",i):this._updateStatus("y",i)},_onCanvasMouseUp:function(){this._removeDocumentEvents()},_removeDocumentEvents:function(){this.onMouseMoveListener.remove(),this.onMouseUpListener.remove(),this.onMouseLeaveListener.remove()}}),E.exports=h},function(E,T,e){function t(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}function l(f,v){f.prototype=Object.create(v.prototype),f.prototype.constructor=f,f.__proto__=v}var s=e(0),c=e(28),r=e(320),h=e(71),n=e(73),i=864e5,a=["X","Y","XY"],o="X",u=function(f){l(b,f);var v=b.prototype;v.getDefaultCfg=function(){var g=f.prototype.getDefaultCfg.call(this);return s.mix({},g,{type:o,stepRatio:.05,limitRange:{},stepByField:{},threshold:20,originScaleDefsByField:{},previousPoint:null,isDragging:!1})},v._disableTooltip=function(){var g=this,_=g.chart,M=_.get("tooltipController");M&&(g._showTooltip=!0,_.tooltip(!1))},v._enableTooltip=function(g){var _=this,M=_.chart;_._showTooltip&&(M.tooltip(!0),M.showTooltip(g))};function b(y,g){var _;_=f.call(this,y,g)||this;var M=t(_);M.type=M.type.toUpperCase(),M.chart=g,M.coord=g.get("coord");var x=M.data=g.get("data");r(g);var m=g.getYScales(),S=g.getXScale();m.push(S);var P=g.get("scaleController");return m.forEach(function(A){var O=A.field;M.limitRange[O]=n(x,A);var R=P.defs[O]||{};M.originScaleDefsByField[O]=s.mix(R,{nice:!!R.nice}),A.isLinear&&(M.stepByField[O]=(A.max-A.min)*M.stepRatio)}),a.includes(M.type)||(M.type=o),M._disableTooltip(),_}return v._applyTranslate=function(g,_,M){_===void 0&&(_=0);var x=this;g.isLinear?x._translateLinearScale(g,_,M):x._translateCatScale(g,_,M)},v._translateCatScale=function(g,_,M){var x=this,m=x.chart,S=g.type,P=g.field,A=g.values,O=g.ticks,R=h(m,P),W=x.limitRange[P],F=_/M,Z=A.length,V=Math.max(1,Math.abs(parseInt(F*Z))),k=W.indexOf(A[0]),Y=W.indexOf(A[Z-1]);if(_>0&&k>=0){for(var K=0;K<V&&k>0;K++)k-=1,Y-=1;var it=W.slice(k,Y+1),ct=null;if(S==="timeCat"){for(var ht=O.length>2?O[1]-O[0]:i,ut=O[0]-ht;ut>=it[0];ut-=ht)O.unshift(ut);ct=O}m.scale(P,s.mix({},R,{values:it,ticks:ct}))}else if(_<0&&Y<=W.length-1){for(var It=0;It<V&&Y<W.length-1;It++)k+=1,Y+=1;var Nt=W.slice(k,Y+1),Lt=null;if(S==="timeCat"){for(var _t=O.length>2?O[1]-O[0]:i,mt=O[O.length-1]+_t;mt<=Nt[Nt.length-1];mt+=_t)O.push(mt);Lt=O}m.scale(P,s.mix({},R,{values:Nt,ticks:Lt}))}},v._translateLinearScale=function(g,_,M){var x=this,m=x.chart,S=x.limitRange,P=g.min,A=g.max,O=g.field;if(!(P===S[O].min&&A===S[O].max)){var R=_/M,W=A-P,F=h(m,O);m.scale(O,s.mix({},F,{nice:!1,min:P+R*W,max:A+R*W}))}},v.start=function(g){var _=this,M=_.canvas,x=M.get("canvasDOM");x.style.cursor="pointer",_.isDragging=!0,_.previousPoint={x:g.x,y:g.y},_._disableTooltip()},v.process=function(g){var _=this;if(_.isDragging){var M=_.chart,x=_.type,m=_.canvas,S=_.coord,P=_.threshold,A=m.get("canvasDOM");A.style.cursor="move";var O=_.previousPoint,R=g,W=R.x-O.x,F=R.y-O.y,Z=!1;if(Math.abs(W)>P&&x.indexOf("X")>-1){Z=!0;var V=M.getXScale();_._applyTranslate(V,V.isLinear?-W:W,S.width)}if(Math.abs(F)>P&&x.indexOf("Y")>-1){Z=!0;var k=M.getYScales();k.forEach(function(Y){_._applyTranslate(Y,R.y-O.y,S.height)})}Z&&(_.previousPoint=R,M.repaint())}},v.end=function(g){var _=this;_.isDragging=!1;var M=_.canvas,x=M.get("canvasDOM");x.style.cursor="default",_._enableTooltip(g)},v.reset=function(){var g=this,_=g.view,M=g.originScaleDefsByField,x=_.getYScales(),m=_.getXScale();x.push(m),x.forEach(function(S){if(S.isLinear){var P=S.field;_.scale(P,M[P])}}),_.repaint(),g._disableTooltip()},b}(c);E.exports=u},function(E,T,e){var t=e(0),l=e(52),s=e(72);E.exports=function(c){c.on("beforeinitgeoms",function(){c.set("limitInPlot",!0);var r=c.get("data"),h=s(c);if(!h)return r;var n=c.get("geoms"),i=!1;t.each(n,function(u){if(["area","line","path"].includes(u.get("type")))return i=!0,!1});var a=[];if(t.each(h,function(u,f){!i&&u&&(u.values||u.min||u.max)&&a.push(f)}),a.length===0)return r;var o=[];t.each(r,function(u){var f=!0;t.each(a,function(v){var b=u[v];if(b){var y=h[v];if(y.type==="timeCat"){var g=y.values;t.isNumber(g[0])&&(b=l.toTimeStamp(b))}(y.values&&!y.values.includes(b)||y.min&&b<y.min||y.max&&b>y.max)&&(f=!1)}}),f&&o.push(u)}),c.set("filteredData",o)})}},function(E,T){E.exports=function(e,t,l){if(!e)return[0,1];var s=0,c=0;if(l==="linear"){var r=t.min,h=t.max,n=h-r;s=(e.min-r)/n,c=(e.max-r)/n}else{var i=t,a=e.values,o=i.indexOf(a[0]),u=i.indexOf(a[a.length-1]);s=o/(i.length-1),c=u/(i.length-1)}return[s,c]}},function(E,T,e){var t=e(45),l=e(44),s=e(0),c={Base:e(28),Brush:e(317),Drag:e(319),ScrollBar:e(323),ShapeSelect:e(324),Slider:e(325),Zoom:e(326)};t._Interactions={},t.registerInteraction=function(r,h){t._Interactions[r]=h},t.getInteraction=function(r){return t._Interactions[r]},l.prototype.getInteractions=function(){var r=this;return r._interactions||(r._interactions={}),r._interactions},l.prototype._setInteraction=function(r,h){var n=this,i=n.getInteractions();i[r]&&i[r]!==h&&i[r].destroy(),i[r]=h},l.prototype.clearInteraction=function(r){var h=this,n=h.getInteractions();r?(n[r]&&(n[r]._reset(),n[r].destroy()),delete n[r]):s.each(n,function(i,a){i._reset(),i.destroy(),delete n[a]})},l.prototype.interact=l.prototype.interaction=function(r,h){var n=this,i=t.getInteraction(r),a=new i(h,n);return n._setInteraction(r,a),n},t.registerInteraction("brush",c.Brush),t.registerInteraction("Brush",c.Brush),t.registerInteraction("drag",c.Drag),t.registerInteraction("Drag",c.Drag),t.registerInteraction("zoom",c.Zoom),t.registerInteraction("Zoom",c.Zoom),t.registerInteraction("scroll-bar",c.ScrollBar),t.registerInteraction("ScrollBar",c.ScrollBar),t.registerInteraction("shape-select",c.ShapeSelect),t.registerInteraction("ShapeSelect",c.ShapeSelect),t.registerInteraction("slider",c.Slider),t.registerInteraction("Slider",c.Slider),E.exports=c},function(E,T,e){function t(i,a){i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.__proto__=a}var l=e(0),s=e(28),c=e(321),r=e(73),h="X",n=function(i){t(o,i);var a=o.prototype;a.getDefaultCfg=function(){var f=i.prototype.getDefaultCfg.call(this);return l.mix({},f,{startEvent:null,processEvent:null,endEvent:null,resetEvent:null,type:h,xStyle:{backgroundColor:"rgba(202, 215, 239, .2)",fillerColor:"rgba(202, 215, 239, .75)",size:4,lineCap:"round",offsetX:0,offsetY:-10},yStyle:{backgroundColor:"rgba(202, 215, 239, .2)",fillerColor:"rgba(202, 215, 239, .75)",size:4,lineCap:"round",offsetX:8,offsetY:0}})},a._renderScrollBars=function(){var f=this.chart,v=f.get("_scrollBarCfg");if(!!v){var b=f.get("data"),y=f.get("plotRange");y.width=Math.abs(y.br.x-y.bl.x),y.height=Math.abs(y.tl.y-y.bl.y);var g=f.get("backPlot"),_=f.get("canvas"),M=_.get("height"),x=f.get("_limitRange"),m=v.type;if(m.indexOf("X")>-1){var S=v.xStyle,P=S.offsetX,A=S.offsetY,O=S.lineCap,R=S.backgroundColor,W=S.fillerColor,F=S.size,Z=f.getXScale(),V=x[Z.field];V||(V=r(b,Z),x[Z.field]=V);var k=c(Z,V,Z.type),Y=f.get("_horizontalBar"),K=M-F/2+A;if(Y){var it=Y.get("children")[1];it.attr({x1:Math.max(y.bl.x+y.width*k[0]+P,y.bl.x),x2:Math.min(y.bl.x+y.width*k[1]+P,y.br.x)})}else Y=g.addGroup({className:"horizontalBar"}),Y.addShape("line",{attrs:{x1:y.bl.x+P,y1:K,x2:y.br.x+P,y2:K,lineWidth:F,stroke:R,lineCap:O}}),Y.addShape("line",{attrs:{x1:Math.max(y.bl.x+y.width*k[0]+P,y.bl.x),y1:K,x2:Math.min(y.bl.x+y.width*k[1]+P,y.br.x),y2:K,lineWidth:F,stroke:W,lineCap:O}}),f.set("_horizontalBar",Y)}if(m.indexOf("Y")>-1){var ct=v.yStyle,ht=ct.offsetX,ut=ct.offsetY,It=ct.lineCap,Nt=ct.backgroundColor,Lt=ct.fillerColor,_t=ct.size,mt=f.getYScales()[0],At=x[mt.field];At||(At=r(b,mt),x[mt.field]=At);var rt=c(mt,At,mt.type),Mt=f.get("_verticalBar"),z=_t/2+ht;if(Mt){var $=Mt.get("children")[1];$.attr({y1:Math.max(y.tl.y+y.height*rt[0]+ut,y.tl.y),y2:Math.min(y.tl.y+y.height*rt[1]+ut,y.bl.y)})}else Mt=g.addGroup({className:"verticalBar"}),Mt.addShape("line",{attrs:{x1:z,y1:y.tl.y+ut,x2:z,y2:y.bl.y+ut,lineWidth:_t,stroke:Nt,lineCap:It}}),Mt.addShape("line",{attrs:{x1:z,y1:Math.max(y.tl.y+y.height*rt[0]+ut,y.tl.y),x2:z,y2:Math.min(y.tl.y+y.height*rt[1]+ut,y.bl.y),lineWidth:_t,stroke:Lt,lineCap:It}}),f.set("_verticalBar",Mt)}}};function o(u,f){var v;v=i.call(this,u,f)||this;var b=v.getDefaultCfg();return f.set("_scrollBarCfg",l.deepMix({},b,u)),f.set("_limitRange",{}),!f.get("_horizontalBar")&&!f.get("_verticalBar")&&v._renderScrollBars(),v}return a._clear=function(){var f=this.chart;if(f){var v=f.get("_horizontalBar"),b=f.get("_verticalBar");v&&v.remove(!0),b&&b.remove(!0),f.set("_horizontalBar",null),f.set("_verticalBar",null)}},a._bindEvents=function(){this._onAfterclearOrBeforechangedata=this._onAfterclearOrBeforechangedata.bind(this),this._onAfterclearinner=this._onAfterclearinner.bind(this),this._onAfterdrawgeoms=this._onAfterdrawgeoms.bind(this);var f=this.chart;f.on("afterclear",this._onAfterclearOrBeforechangedata),f.on("beforechangedata",this._onAfterclearOrBeforechangedata),f.on("afterclearinner",this._onAfterclearinner),f.on("afterdrawgeoms",this._onAfterdrawgeoms)},a._onAfterclearOrBeforechangedata=function(){this.chart&&this.chart.set("_limitRange",{})},a._onAfterclearinner=function(){this._clear()},a._onAfterdrawgeoms=function(){this._renderScrollBars()},a._clearEvents=function(){var f=this.chart;f&&(f.off("afterclear",this._onAfterclearOrBeforechangedata),f.off("beforechangedata",this._onAfterclearOrBeforechangedata),f.off("afterclearinner",this._onAfterclearinner),f.off("afterdrawgeoms",this._onAfterdrawgeoms))},a.destroy=function(){this._clearEvents(),this._clear(),this.canvas.draw()},o}(s);E.exports=n},function(E,T,e){function t(h,n){h.prototype=Object.create(n.prototype),h.prototype.constructor=h,h.__proto__=n}var l=e(0),s=e(28);function c(h,n){var i={};for(var a in n)i[a]=h[a];return i}var r=function(h){t(n,h);function n(){return h.apply(this,arguments)||this}var i=n.prototype;return i.getDefaultCfg=function(){var o=h.prototype.getDefaultCfg.call(this);return l.mix({},o,{startEvent:"mouseup",processEvent:null,selectStyle:{fillOpacity:1},unSelectStyle:{fillOpacity:.1},cancelable:!0})},i.start=function(o){var u=this,f=u.view,v,b=[];if(f.eachShape(function(M,x){x.isPointInPath(o.x,o.y)?v=x:b.push(x)}),!v){u.reset();return}if(v.get("_selected")){if(!u.cancelable)return;u.reset()}else{var y=u.selectStyle,g=u.unSelectStyle,_=c(v.attr(),v);v.set("_originAttrs",_),v.attr(y),l.each(b,function(M){var x=M.get("_originAttrs");x&&M.attr(x),M.set("_selected",!1),g&&(x=c(M.attr(),g),M.set("_originAttrs",x),M.attr(g))}),v.set("_selected",!0),u.selectedShape=v,u.canvas.draw()}},i.end=function(o){var u=this.selectedShape;u&&!u.get("destroyed")&&u.get("origin")&&(o.data=u.get("origin")._origin,o.shapeInfo=u.get("origin"),o.shape=u,o.selected=!!u.get("_selected"))},i.reset=function(){var o=this;if(!!o.selectedShape){var u=o.view,f=u.get("geoms")[0],v=f.get("container").get("children")[0],b=v.get("children");l.each(b,function(y){var g=y.get("_originAttrs");g&&(y._attrs=g,y.set("_originAttrs",null)),y.set("_selected",!1)}),o.canvas.draw()}},n}(s);E.exports=r},function(E,T,e){function t(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function l(y,g){y.prototype=Object.create(g.prototype),y.prototype.constructor=y,y.__proto__=g}var s=e(318),c=e(44),r=e(0),h=e(16),n=e(5),i=e(28),a=e(71),o=e(72),u=h.Canvas,f=r.DomUtil,v=r.isNumber,b=function(y){l(_,y);var g=_.prototype;g.getDefaultCfg=function(){var x=y.prototype.getDefaultCfg.call(this);return r.mix({},x,{startEvent:null,processEvent:null,endEvent:null,resetEvent:null,height:26,width:"auto",padding:n.plotCfg.padding,container:null,xAxis:null,yAxis:null,fillerStyle:{fill:"#BDCCED",fillOpacity:.3},backgroundStyle:{stroke:"#CCD6EC",fill:"#CCD6EC",fillOpacity:.3,lineWidth:1},range:[0,100],layout:"horizontal",textStyle:{fill:"#545454"},handleStyle:{img:"https://gw.alipayobjects.com/zos/rmsportal/QXtfhORGlDuRvLXFzpsQ.png",width:5},backgroundChart:{type:["area"],color:"#CCD6EC"}})},g._initContainer=function(){var x=this,m=x.container;if(!m)throw new Error("Please specify the container for the Slider!");r.isString(m)?x.domContainer=document.getElementById(m):x.domContainer=m},g.forceFit=function(){var x=this;if(!(!x||x.destroyed)){var m=f.getWidth(x.domContainer),S=x.height;if(m!==x.domWidth){var P=x.canvas;P.changeSize(m,S),x.bgChart&&x.bgChart.changeWidth(m),P.clear(),x._initWidth(),x._initSlider(),x._bindEvent(),P.draw()}}},g._initForceFitEvent=function(){var x=this,m=setTimeout(r.wrapBehavior(x,"forceFit"),200);clearTimeout(x.resizeTimer),x.resizeTimer=m},g._initStyle=function(){var x=this;x.handleStyle=r.mix({width:x.height,height:x.height},x.handleStyle),x.width==="auto"&&window.addEventListener("resize",r.wrapBehavior(x,"_initForceFitEvent"))},g._initWidth=function(){var x=this,m;x.width==="auto"?m=f.getWidth(x.domContainer):m=x.width,x.domWidth=m;var S=r.toAllPadding(x.padding);x.layout==="horizontal"?(x.plotWidth=m-S[1]-S[3],x.plotPadding=S[3],x.plotHeight=x.height):x.layout==="vertical"&&(x.plotWidth=x.width,x.plotHeight=x.height-S[0]-S[2],x.plotPadding=S[0])},g._initCanvas=function(){var x=this,m=x.domWidth,S=x.height,P=new u({width:m,height:S,containerDOM:x.domContainer,capture:!1}),A=P.get("el");A.style.position="absolute",A.style.top=0,A.style.left=0,A.style.zIndex=3,x.canvas=P},g._initBackground=function(){var x,m=this,S=this.chart,P=S.getAllGeoms[0],A=m.data=m.data||S.get("data"),O=S.getXScale(),R=m.xAxis||O.field,W=m.yAxis||S.getYScales()[0].field,F=r.deepMix((x={},x[""+R]={range:[0,1]},x),o(S),m.scales);if(delete F[R].min,delete F[R].max,!A)throw new Error("Please specify the data!");if(!R)throw new Error("Please specify the xAxis!");if(!W)throw new Error("Please specify the yAxis!");var Z=m.backgroundChart,V=Z.type||P.get("type"),k=Z.color||"grey",Y=Z.shape;r.isArray(V)||(V=[V]);var K=r.toAllPadding(m.padding),it=new c({container:m.container,width:m.domWidth,height:m.height,padding:[0,K[1],0,K[3]],animate:!1});it.source(A),it.scale(F),it.axis(!1),it.tooltip(!1),it.legend(!1),r.each(V,function(ct,ht){var ut=it[ct]().position(R+"*"+W).opacity(1),It=r.isArray(k)?k[ht]:k;It&&(r.isObject(It)?It.field&&ut.color(It.field,It.colors):ut.color(It));var Nt=r.isArray(Y)?Y[ht]:Y;Nt&&(r.isObject(Nt)?Nt.field&&ut.shape(Nt.field,Nt.callback||Nt.shapes):ut.shape(Nt))}),it.render(),m.bgChart=it,m.scale=m.layout==="horizontal"?it.getXScale():it.getYScales()[0],m.layout==="vertical"&&it.destroy()},g._initRange=function(){var x=this,m=x.startRadio,S=x.endRadio,P=x._startValue,A=x._endValue,O=x.scale,R=0,W=1;v(m)?R=m:P&&(R=O.scale(O.translate(P))),v(S)?W=S:A&&(W=O.scale(O.translate(A)));var F=x.minSpan,Z=x.maxSpan,V=0;if(O.type==="time"||O.type==="timeCat"){var k=O.values,Y=k[0],K=k[k.length-1];V=K-Y}else O.isLinear&&(V=O.max-O.min);V&&F&&(x.minRange=F/V*100),V&&Z&&(x.maxRange=Z/V*100);var it=[R*100,W*100];return x.range=it,it},g._getHandleValue=function(x){var m=this,S,P=m.range,A=P[0]/100,O=P[1]/100,R=m.scale;return x==="min"?S=m._startValue?m._startValue:R.invert(A):S=m._endValue?m._endValue:R.invert(O),S},g._initSlider=function(){var x=this,m=x.canvas,S=x._initRange(),P=x.scale,A=m.addGroup(s,{middleAttr:x.fillerStyle,range:S,minRange:x.minRange,maxRange:x.maxRange,layout:x.layout,width:x.plotWidth,height:x.plotHeight,backgroundStyle:x.backgroundStyle,textStyle:x.textStyle,handleStyle:x.handleStyle,minText:P.getText(x._getHandleValue("min")),maxText:P.getText(x._getHandleValue("max"))});x.layout==="horizontal"?A.translate(x.plotPadding,0):x.layout==="vertical"&&A.translate(0,x.plotPadding),x.rangeElement=A},g._updateElement=function(x,m){var S=this,P=S.chart,A=S.scale,O=S.rangeElement,R=A.field,W=O.get("minTextElement"),F=O.get("maxTextElement"),Z=A.invert(x),V=A.invert(m),k=A.getText(Z),Y=A.getText(V);W.attr("text",k),F.attr("text",Y),S._startValue=k,S._endValue=Y,S.onChange&&S.onChange({startText:k,endText:Y,startValue:Z,endValue:V,startRadio:x,endRadio:m}),P.scale(R,r.mix({},a(P,R),{nice:!1,min:Z,max:V})),P.repaint()},g._bindEvent=function(){var x=this,m=x.rangeElement;m.on("sliderchange",function(S){var P=S.range,A=P[0]/100,O=P[1]/100;x._updateElement(A,O)})};function _(M,x){var m;m=y.call(this,M,x)||this;var S=t(m);return S._initContainer(),S._initStyle(),S.render(),m}return g.clear=function(){var x=this;x.canvas.clear(),x.bgChart&&x.bgChart.destroy(),x.bgChart=null,x.scale=null,x.canvas.draw()},g.repaint=function(){var x=this;x.clear(),x.render()},g.render=function(){var x=this;x._initWidth(),x._initCanvas(),x._initBackground(),x._initSlider(),x._bindEvent(),x.canvas.draw()},g.destroy=function(){var x=this;clearTimeout(x.resizeTimer);var m=x.rangeElement;m.off("sliderchange"),x.bgChart&&x.bgChart.destroy(),x.canvas.destroy();for(var S=x.domContainer;S.hasChildNodes();)S.removeChild(S.firstChild);window.removeEventListener("resize",r.getWrapBehavior(x,"_initForceFitEvent")),x.destroyed=!0},_}(i);E.exports=b},function(E,T,e){function t(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function l(o,u){o.prototype=Object.create(u.prototype),o.prototype.constructor=o,o.__proto__=u}var s=e(0),c=e(28),r=e(71),h=e(73),n=["X","Y","XY"],i="X",a=function(o){l(f,o);var u=f.prototype;u.getDefaultCfg=function(){var b=o.prototype.getDefaultCfg.call(this);return s.mix({},b,{processEvent:"mousewheel",type:i,stepRatio:.05,stepByField:{},minScale:1,maxScale:4,catStep:2,limitRange:{},originScaleDefsByField:{}})};function f(v,b){var y;y=o.call(this,v,b)||this;var g=t(y);g.chart=b,g.type=g.type.toUpperCase();var _=g.data=b.get("data"),M=b.getYScales(),x=b.getXScale();M.push(x);var m=b.get("scaleController");return M.forEach(function(S){var P=S.field,A=m.defs[P]||{};g.limitRange[P]=h(_,S),g.originScaleDefsByField[P]=s.mix(A,{nice:!!A.nice}),S.isLinear?g.stepByField[P]=(S.max-S.min)*g.stepRatio:g.stepByField[P]=g.catStep}),n.includes(g.type)||(g.type=i),y}return u._applyScale=function(b,y,g,_){g===void 0&&(g=0);var M=this,x=M.chart,m=M.stepByField;if(b.isLinear){var S=b.min,P=b.max,A=b.field,O=1-g,R=m[A]*y,W=S+R*g,F=P-R*O;if(F>W){var Z=r(x,A);x.scale(A,s.mix({},Z,{nice:!1,min:W,max:F}))}}else{var V=b.field,k=b.values,Y=M.chart,K=Y.get("coord"),it=r(Y,V),ct=M.limitRange[V],ht=ct.length,ut=M.maxScale,It=M.minScale,Nt=ht/ut,Lt=ht/It,_t=k.length,mt=K.invertPoint(_),At=mt.x,rt=_t-y*this.catStep,Mt=parseInt(rt*At),z=rt+Mt;if(y>0&&_t>=Nt){var $=Mt,dt=z;z>_t&&(dt=_t-1,$=_t-rt);var et=k.slice($,dt);Y.scale(V,s.mix({},it,{values:et}))}else if(y<0&&_t<=Lt){var ot=ct.indexOf(k[0]),pt=ct.indexOf(k[_t-1]),H=Math.max(0,ot-Mt),nt=Math.min(pt+z,ht),at=ct.slice(H,nt);Y.scale(V,s.mix({},it,{values:at}))}}},u.process=function(b){var y=this,g=y.chart,_=y.type,M=g.get("coord"),x=b.deltaY,m=M.invertPoint(b);if(x){y.onZoom&&y.onZoom(x,m,y),x>0?y.onZoomin&&y.onZoomin(x,m,y):y.onZoomout&&y.onZoomout(x,m,y);var S=x/Math.abs(x);if(_.indexOf("X")>-1&&y._applyScale(g.getXScale(),S,m.x,b),_.indexOf("Y")>-1){var P=g.getYScales();P.forEach(function(A){y._applyScale(A,S,m.y,b)})}}g.repaint()},u.reset=function(){var b=this,y=b.view,g=b.originScaleDefsByField,_=y.getYScales(),M=y.getXScale();_.push(M),_.forEach(function(x){if(x.isLinear){var m=x.field;y.scale(m,g[m])}}),y.repaint()},f}(c);E.exports=a},function(E,T,e){var t,l,s=e(0),c=e(131),r="g2-tooltip",h="g2-legend",n=s.deepMix({},c,{background:{fill:"#1F1F1F",radius:2},plotBackground:{fill:"#1F1F1F"},axis:{top:{label:{textStyle:{fill:"#A6A6A6"}},line:{stroke:"#737373"},tickLine:{stroke:"#737373"}},bottom:{label:{textStyle:{fill:"#A6A6A6"}},line:{stroke:"#737373"},tickLine:{stroke:"#737373"}},left:{label:{textStyle:{fill:"#A6A6A6"}},grid:{lineStyle:{stroke:"#404040"}}},right:{label:{textStyle:{fill:"#A6A6A6"}},grid:{lineStyle:{stroke:"#404040"}}},circle:{label:{textStyle:{fill:"#A6A6A6"}},line:{stroke:"#737373"},tickLine:{stroke:"#737373"},grid:{lineStyle:{stroke:"#404040"}}},radius:{label:{textStyle:{fill:"#A6A6A6"}},line:{stroke:"#737373"},tickLine:{stroke:"#737373"},grid:{lineStyle:{stroke:"#404040"}}},helix:{line:{stroke:"#737373"},tickLine:{stroke:"#737373"}}},label:{textStyle:{fill:"#A6A6A6"}},legend:{right:{textStyle:{fill:"#737373"},unCheckColor:"#bfbfbf"},left:{textStyle:{fill:"#737373"},unCheckColor:"#bfbfbf"},top:{textStyle:{fill:"#737373"},unCheckColor:"#bfbfbf"},bottom:{textStyle:{fill:"#737373"},unCheckColor:"#bfbfbf"},html:(t={},t[""+h]={color:"#D9D9D9"},t),gradient:{textStyle:{fill:"#D9D9D9"},lineStyle:{stroke:"#404040"}}},tooltip:(l={},l[""+r]={color:"#D9D9D9",backgroundColor:"rgba(0, 0, 0, 0.5)",boxShadow:"0px 0px 2px #000"},l),tooltipCrosshairsRect:{type:"rect",rectStyle:{fill:"#fff",opacity:.1}},tooltipCrosshairsLine:{lineStyle:{stroke:"rgba(255, 255, 255, 0.45)"}},guide:{line:{text:{style:{fill:"#A6A6A6"}}},text:{style:{fill:"#A6A6A6"}},region:{style:{lineWidth:0,fill:"#000",fillOpacity:.04}}}});E.exports=n},function(E,T,e){var t=e(1),l=e(135),s=e(134),c=e(332),r=e(337),h=function n(i){n.superclass.constructor.call(this,i)};h.CFG={eventEnable:!0,width:null,height:null,widthCanvas:null,heightCanvas:null,widthStyle:null,heightStyle:null,containerDOM:null,canvasDOM:null,pixelRatio:null,renderer:"canvas"},t.extend(h,s),t.augment(h,{init:function(){h.superclass.init.call(this),this._setGlobalParam(),this._setContainer(),this._initPainter(),this._scale(),this.get("eventEnable")&&this._registEvents()},getEmitter:function(i,a){if(i)if(t.isEmpty(i._getEvents())){var o=i.get("parent");if(o&&!a.propagationStopped)return this.getEmitter(o,a)}else return i},_getEventObj:function(i,a,o,u){var f=new l(i,a,!0,!0);return f.x=o.x,f.y=o.y,f.clientX=a.clientX,f.clientY=a.clientY,f.currentTarget=u,f.target=u,f},_triggerEvent:function(i,a){var o=this.getPointByClient(a.clientX,a.clientY),u=this.getShape(o.x,o.y,a),f=this.get("el"),v;if(i==="mousemove"){var b=this.get("preShape");if(b&&b!==u){var y=this._getEventObj("mouseleave",a,o,b);v=this.getEmitter(b,a),v&&v.emit("mouseleave",y),f.style.cursor="default"}if(u){var g=this._getEventObj("mousemove",a,o,u);if(v=this.getEmitter(u,a),v&&v.emit("mousemove",g),b!==u){var _=this._getEventObj("mouseenter",a,o,u);v&&v.emit("mouseenter",_,a)}}else{var M=this._getEventObj("mousemove",a,o,this);this.emit("mousemove",M)}this.set("preShape",u)}else{var x=this._getEventObj(i,a,o,u||this);v=this.getEmitter(u,a),v&&v!==this&&v.emit(i,x),this.emit(i,x)}u&&!u.get("destroyed")&&(f.style.cursor=u.attr("cursor")||"default")},_registEvents:function(){var i=this,a=i.get("el"),o=["mouseout","mouseover","mousemove","mousedown","mouseleave","mouseup","click","dblclick"];t.each(o,function(u){a.addEventListener(u,function(f){i._triggerEvent(u,f)},!1)}),a.addEventListener("touchstart",function(u){t.isEmpty(u.touches)||i._triggerEvent("touchstart",u.touches[0])},!1),a.addEventListener("touchmove",function(u){t.isEmpty(u.touches)||i._triggerEvent("touchmove",u.touches[0])},!1),a.addEventListener("touchend",function(u){t.isEmpty(u.changedTouches)||i._triggerEvent("touchend",u.changedTouches[0])},!1)},_scale:function(){var i=this.get("pixelRatio");this.scale(i,i)},_setGlobalParam:function(){var i=this.get("pixelRatio");i||this.set("pixelRatio",t.getRatio());var a=r[this.get("renderer")||"canvas"];this._cfg.renderer=a,this._cfg.canvas=this;var o=new c(this);this._cfg.timeline=o},_setContainer:function(){var i=this.get("containerId"),a=this.get("containerDOM");a||(a=document.getElementById(i),this.set("containerDOM",a)),t.modifyCSS(a,{position:"relative"})},_initPainter:function(){var i=this.get("containerDOM"),a=new this._cfg.renderer.painter(i);this._cfg.painter=a,this._cfg.canvasDOM=this._cfg.el=a.canvas,this.changeSize(this.get("width"),this.get("height"))},_resize:function(){var i=this.get("canvasDOM"),a=this.get("widthCanvas"),o=this.get("heightCanvas"),u=this.get("widthStyle"),f=this.get("heightStyle");i.style.width=u,i.style.height=f,i.setAttribute("width",a),i.setAttribute("height",o)},getWidth:function(){var i=this.get("pixelRatio"),a=this.get("width");return a*i},getHeight:function(){var i=this.get("pixelRatio"),a=this.get("height");return a*i},changeSize:function(i,a){var o=this.get("pixelRatio"),u=i*o,f=a*o;this.set("widthCanvas",u),this.set("heightCanvas",f),this.set("widthStyle",i+"px"),this.set("heightStyle",a+"px"),this.set("width",i),this.set("height",a),this._resize()},getPointByClient:function(i,a){var o=this.get("el"),u=this.get("pixelRatio")||1,f=o.getBoundingClientRect();return{x:(i-f.left)*u,y:(a-f.top)*u}},getClientByPoint:function(i,a){var o=this.get("el"),u=o.getBoundingClientRect(),f=this.get("pixelRatio")||1;return{clientX:i/f+u.left,clientY:a/f+u.top}},draw:function(){this._cfg.painter.draw(this)},getShape:function(i,a,o){return arguments.length===3&&this._cfg.renderer.getShape?this._cfg.renderer.getShape.call(this,i,a,o):h.superclass.getShape.call(this,i,a)},_drawSync:function(){this._cfg.painter.drawSync(this)},destroy:function(){var i=this._cfg,a=i.containerDOM,o=i.canvasDOM;o&&a&&a.removeChild(o),i.timeline.stop(),h.superclass.destroy.call(this)}}),E.exports=h},function(E,T,e){var t=e(1),l={delay:"delay",rotate:"rotate"},s={fill:"fill",stroke:"stroke",fillStyle:"fillStyle",strokeStyle:"strokeStyle"};function c(n,i){var a={},o=i._attrs;for(var u in n.attrs)a[u]=o[u];return a}function r(n,i){var a={matrix:null,attrs:{}},o=i._attrs;for(var u in n)if(u==="transform")a.matrix=t.transform(i.getMatrix(),n[u]);else if(u==="rotate")a.matrix=t.transform(i.getMatrix(),[["r",n[u]]]);else if(u==="matrix")a.matrix=n[u];else{if(s[u]&&/^[r,R,L,l]{1}[\s]*\(/.test(n[u]))continue;!l[u]&&o[u]!==n[u]&&(a.attrs[u]=n[u])}return a}function h(n,i){var a=i.delay,o=Object.prototype.hasOwnProperty;return t.each(i.toAttrs,function(u,f){t.each(n,function(v){a<v.startTime+v.duration&&o.call(v.toAttrs,f)&&(delete v.toAttrs[f],delete v.fromAttrs[f])})}),i.toMatrix&&t.each(n,function(u){a<u.startTime+u.duration&&u.toMatrix&&delete u.toMatrix}),n}E.exports={animate:function(i,a,o,u,f){f===void 0&&(f=0);var v=this;v.set("animating",!0);var b=v.get("timeline");b||(b=v.get("canvas").get("timeline"),v.setSilent("timeline",b));var y=v.get("animators")||[];b._timer||b.initTimer(),t.isNumber(u)&&(f=u,u=null),t.isFunction(o)?(u=o,o="easeLinear"):o=o||"easeLinear";var g=r(i,v),_={fromAttrs:c(g,v),toAttrs:g.attrs,fromMatrix:t.clone(v.getMatrix()),toMatrix:g.matrix,duration:a,easing:o,callback:u,delay:f,startTime:b.getTime(),id:t.uniqueId()};y.length>0?y=h(y,_):b.addAnimator(v),y.push(_),v.setSilent("animators",y),v.setSilent("pause",{isPaused:!1})},stopAnimate:function(){var i=this,a=this.get("animators");t.each(a,function(o){i.attr(o.toAttrs),o.toMatrix&&i.attr("matrix",o.toMatrix),o.callback&&o.callback()}),this.setSilent("animating",!1),this.setSilent("animators",[])},pauseAnimate:function(){var i=this,a=i.get("timeline");return i.setSilent("pause",{isPaused:!0,pauseTime:a.getTime()}),i},resumeAnimate:function(){var i=this,a=i.get("timeline"),o=a.getTime(),u=i.get("animators"),f=i.get("pause").pauseTime;return t.each(u,function(v){v.startTime=v.startTime+(o-f),v._paused=!1,v._pauseTime=null}),i.setSilent("pause",{isPaused:!1}),i.setSilent("animators",u),i}}},function(E,T,e){var t=e(1);E.exports={canFill:!1,canStroke:!1,initAttrs:function(s){return this._attrs={opacity:1,fillOpacity:1,strokeOpacity:1,matrix:[1,0,0,0,1,0,0,0,1]},this.attr(t.assign(this.getDefaultAttrs(),s)),this},getDefaultAttrs:function(){return{}},attr:function(s,c){var r=this;if(arguments.length===0)return r._attrs;if(t.isObject(s)){for(var h in s)this._setAttr(h,s[h]);return r.clearBBox(),this._cfg.hasUpdate=!0,r}return arguments.length===2?(this._setAttr(s,c),r.clearBBox(),this._cfg.hasUpdate=!0,r):r._attrs[s]},_setAttr:function(s,c){var r=this,h=this._attrs;if(h[s]=c,s==="fill"||s==="stroke"){h[s+"Style"]=c;return}if(s==="opacity"){h.globalAlpha=c;return}if(s==="clip"&&c){r._setClip(c);return}if(s==="path"&&r._afterSetAttrPath){r._afterSetAttrPath(c);return}if(s==="transform"){r.transform(c);return}s==="rotate"&&r.rotateAtStart(c)},clearBBox:function(){this.setSilent("box",null)},hasFill:function(){return this.canFill&&this._attrs.fillStyle},hasStroke:function(){return this.canStroke&&this._attrs.strokeStyle},_setClip:function(s){s._cfg.renderer=this._cfg.renderer,s._cfg.canvas=this._cfg.canvas,s._cfg.parent=this._cfg.parent,s.hasFill=function(){return!0}}}},function(E,T,e){var t=e(1),l=e(76),s={arc:e(47),ellipse:e(143),line:e(48)},c=t.createDom('<canvas width="500" height="500"></canvas>'),r=c.getContext("2d");function h(S,P,A){return A.createPath(r),r.isPointInPath(S,P)}var n=function(P,A){var O=this._attrs,R=O.x,W=O.y,F=O.r,Z=O.startAngle,V=O.endAngle,k=O.clockwise,Y=this.getHitLineWidth();return this.hasStroke()?l.arcline(R,W,F,Z,V,k,Y,P,A):!1},i=function(P,A){var O=this._attrs,R=O.x,W=O.y,F=O.r,Z=this.getHitLineWidth(),V=this.hasFill(),k=this.hasStroke();return V&&k?l.circle(R,W,F,P,A)||l.arcline(R,W,F,0,Math.PI*2,!1,Z,P,A):V?l.circle(R,W,F,P,A):k?l.arcline(R,W,F,0,Math.PI*2,!1,Z,P,A):!1},a=function(P,A){var O=this._attrs,R=this.hasFill(),W=this.hasStroke(),F=O.x,Z=O.y,V=O.rx,k=O.ry,Y=this.getHitLineWidth(),K=V>k?V:k,it=V>k?1:V/k,ct=V>k?k/V:1,ht=[P,A,1],ut=[1,0,0,0,1,0,0,0,1];t.mat3.scale(ut,ut,[it,ct]),t.mat3.translate(ut,ut,[F,Z]);var It=t.mat3.invert([],ut);return t.vec3.transformMat3(ht,ht,It),R&&W?l.circle(0,0,K,ht[0],ht[1])||l.arcline(0,0,K,0,Math.PI*2,!1,Y,ht[0],ht[1]):R?l.circle(0,0,K,ht[0],ht[1]):W?l.arcline(0,0,K,0,Math.PI*2,!1,Y,ht[0],ht[1]):!1},o=function(P,A){var O=this,R=O.hasFill(),W=O.hasStroke(),F=O._attrs,Z=F.x,V=F.y,k=F.rs,Y=F.re,K=F.startAngle,it=F.endAngle,ct=F.clockwise,ht=[1,0],ut=[P-Z,A-V],It=t.vec2.angleTo(ht,ut);function Nt(){var _t=s.arc.nearAngle(It,K,it,ct);if(t.isNumberEqual(It,_t)){var mt=t.vec2.squaredLength(ut);if(k*k<=mt&&mt<=Y*Y)return!0}return!1}function Lt(){var _t=O.getHitLineWidth(),mt={x:Math.cos(K)*k+Z,y:Math.sin(K)*k+V},At={x:Math.cos(K)*Y+Z,y:Math.sin(K)*Y+V},rt={x:Math.cos(it)*k+Z,y:Math.sin(it)*k+V},Mt={x:Math.cos(it)*Y+Z,y:Math.sin(it)*Y+V};return!!(l.line(mt.x,mt.y,At.x,At.y,_t,P,A)||l.line(rt.x,rt.y,Mt.x,Mt.y,_t,P,A)||l.arcline(Z,V,k,K,it,ct,_t,P,A)||l.arcline(Z,V,Y,K,it,ct,_t,P,A))}return R&&W?Nt()||Lt():R?Nt():W?Lt():!1},u=function(P,A){var O=this._attrs;if(this.get("toDraw")||!O.img)return!1;(!this._cfg.attrs||this._cfg.attrs.img!==O.img)&&this._setAttrImg();var R=O.x,W=O.y,F=O.width,Z=O.height;return l.rect(R,W,F,Z,P,A)},f=function(P,A){var O=this._attrs,R=O.x1,W=O.y1,F=O.x2,Z=O.y2,V=this.getHitLineWidth();return this.hasStroke()?l.line(R,W,F,Z,V,P,A):!1},v=function(P,A){var O=this,R=O.get("segments"),W=O.hasFill(),F=O.hasStroke();function Z(){if(!t.isEmpty(R)){for(var V=O.getHitLineWidth(),k=0,Y=R.length;k<Y;k++)if(R[k].isInside(P,A,V))return!0;return!1}}return W&&F?h(P,A,O)||Z():W?h(P,A,O):F?Z():!1},b=function(P,A){var O=this,R=O.hasFill(),W=O.hasStroke();function F(){var Z=O._attrs,V=Z.points;if(V.length<2)return!1;var k=O.getHitLineWidth(),Y=V.slice(0);return V.length>=3&&Y.push(V[0]),l.polyline(Y,k,P,A)}return R&&W?h(P,A,O)||F():R?h(P,A,O):W?F():!1},y=function(P,A){var O=this._attrs,R=O.x,W=O.y,F=O.radius||O.r,Z=this.getHitLineWidth();return l.circle(R,W,F+Z/2,P,A)},g=function(P,A){var O=this,R=O._attrs;if(O.hasStroke()){var W=R.points;if(W.length<2)return!1;var F=R.lineWidth;return l.polyline(W,F,P,A)}return!1},_=function(P,A){var O=this,R=O.hasFill(),W=O.hasStroke();function F(){var Z=O._attrs,V=Z.x,k=Z.y,Y=Z.width,K=Z.height,it=Z.radius,ct=O.getHitLineWidth();if(it===0){var ht=ct/2;return l.line(V-ht,k,V+Y+ht,k,ct,P,A)||l.line(V+Y,k-ht,V+Y,k+K+ht,ct,P,A)||l.line(V+Y+ht,k+K,V-ht,k+K,ct,P,A)||l.line(V,k+K+ht,V,k-ht,ct,P,A)}return l.line(V+it,k,V+Y-it,k,ct,P,A)||l.line(V+Y,k+it,V+Y,k+K-it,ct,P,A)||l.line(V+Y-it,k+K,V+it,k+K,ct,P,A)||l.line(V,k+K-it,V,k+it,ct,P,A)||l.arcline(V+Y-it,k+it,it,1.5*Math.PI,2*Math.PI,!1,ct,P,A)||l.arcline(V+Y-it,k+K-it,it,0,.5*Math.PI,!1,ct,P,A)||l.arcline(V+it,k+K-it,it,.5*Math.PI,Math.PI,!1,ct,P,A)||l.arcline(V+it,k+it,it,Math.PI,1.5*Math.PI,!1,ct,P,A)}return R&&W?h(P,A,O)||F():R?h(P,A,O):W?F():!1},M=function(P,A){var O=this,R=O.getBBox();if(O.hasFill()||O.hasStroke())return l.box(R.minX,R.maxX,R.minY,R.maxY,P,A)},x=function(P,A){if(!this._cfg.el)return!1;var O=this._cfg.el.getBBox();return l.box(O.x,O.x+O.width,O.y,O.y+O.height,P,A)},m={arc:n,circle:i,dom:x,ellipse:a,fan:o,image:u,line:f,path:v,marker:y,polygon:b,polyline:g,rect:_,text:M};E.exports={isPointInPath:function(P,A){var O=m[this.type];return O?O.call(this,P,A):!1}}},function(E,T,e){var t=e(1),l=e(77),s=e(103),c=e(199),r=e(453),h=r.interpolate,n=r.interpolateArray,i=function(f){this._animators=[],this._current=0,this._timer=null,this.canvas=f};function a(u,f,v){var b={},y=f.toAttrs,g=f.fromAttrs,_=f.toMatrix;if(!u.get("destroyed")){var M;for(var x in y)if(!t.isEqual(g[x],y[x]))if(x==="path"){var m=y[x],S=g[x];m.length>S.length?(m=l.parsePathString(y[x]),S=l.parsePathString(g[x]),S=l.fillPathByDiff(S,m),S=l.formatPath(S,m),f.fromAttrs.path=S,f.toAttrs.path=m):f.pathFormatted||(m=l.parsePathString(y[x]),S=l.parsePathString(g[x]),S=l.formatPath(S,m),f.fromAttrs.path=S,f.toAttrs.path=m,f.pathFormatted=!0),b[x]=[];for(var P=0;P<m.length;P++){for(var A=m[P],O=S[P],R=[],W=0;W<A.length;W++)t.isNumber(A[W])&&O&&t.isNumber(O[W])?(M=h(O[W],A[W]),R.push(M(v))):R.push(A[W]);b[x].push(R)}}else M=h(g[x],y[x]),b[x]=M(v);if(_){var F=n(f.fromMatrix,_),Z=F(v);u.setMatrix(Z)}u.attr(b)}}function o(u,f,v){var b=f.startTime;if(v<b+f.delay||f.isPaused)return!1;var y,g=f.duration,_=f.easing;if(v=v-b-f.delay,f.toAttrs.repeat)y=v%g/g,y=c[_](y);else if(y=v/g,y<1)y=c[_](y);else return u.attr(f.toAttrs),f.toMatrix&&u.setMatrix(f.toMatrix),!0;return a(u,f,y),!1}t.augment(i,{initTimer:function(){var f=this,v=this,b=!1,y,g,_;v._timer=s.timer(function(M){if(v._current=M,f._animators.length>0){for(var x=f._animators.length-1;x>=0;x--){if(y=f._animators[x],y.get("destroyed")){v.removeAnimator(x);continue}if(!y.get("pause").isPaused){g=y.get("animators");for(var m=g.length-1;m>=0;m--)_=g[m],b=o(y,_,M),b&&(g.splice(m,1),b=!1,_.callback&&_.callback())}g.length===0&&v.removeAnimator(x)}f.canvas.draw()}})},addAnimator:function(f){this._animators.push(f)},removeAnimator:function(f){this._animators.splice(f,1)},isAnimating:function(){return!!this._animators.length},stop:function(){this._timer&&this._timer.stop()},stopAllAnimations:function(){this._animators.forEach(function(f){f.stopAnimate()}),this._animators=[],this.canvas.draw()},getTime:function(){return this._current}}),E.exports=i},function(E,T,e){var t=e(1);function l(r){return r[0]===1&&r[1]===0&&r[3]===0&&r[4]===1&&r[6]===0&&r[7]===0}function s(r){return r[1]===0&&r[3]===0&&r[6]===0&&r[7]===0}function c(r,h){l(h)||(s(h)?(r[0]*=h[0],r[4]*=h[4]):t.mat3.multiply(r,r,h))}E.exports={initTransform:function(){},resetMatrix:function(){this.attr("matrix",[1,0,0,0,1,0,0,0,1])},translate:function(h,n){var i=this._attrs.matrix;return t.mat3.translate(i,i,[h,n]),this.clearTotalMatrix(),this.attr("matrix",i),this},rotate:function(h){var n=this._attrs.matrix;return t.mat3.rotate(n,n,h),this.clearTotalMatrix(),this.attr("matrix",n),this},scale:function(h,n){var i=this._attrs.matrix;return t.mat3.scale(i,i,[h,n]),this.clearTotalMatrix(),this.attr("matrix",i),this},rotateAtStart:function(h){var n=this._attrs.x||this._cfg.attrs.x,i=this._attrs.y||this._cfg.attrs.y;return Math.abs(h)>Math.PI*2&&(h=h/180*Math.PI),this.transform([["t",-n,-i],["r",h],["t",n,i]])},move:function(h,n){var i=this.get("x")||0,a=this.get("y")||0;return this.translate(h-i,n-a),this.set("x",h),this.set("y",n),this},transform:function(h){var n=this,i=this._attrs.matrix;return t.each(h,function(a){switch(a[0]){case"t":n.translate(a[1],a[2]);break;case"s":n.scale(a[1],a[2]);break;case"r":n.rotate(a[1]);break;case"m":n.attr("matrix",t.mat3.multiply([],i,a[1])),n.clearTotalMatrix();break;default:break}}),n},setTransform:function(h){return this.attr("matrix",[1,0,0,0,1,0,0,0,1]),this.transform(h)},getMatrix:function(){return this.attr("matrix")},setMatrix:function(h){return this.attr("matrix",h),this.clearTotalMatrix(),this},apply:function(h,n){var i;return n?i=this._getMatrixByRoot(n):i=this.attr("matrix"),t.vec3.transformMat3(h,h,i),this},_getMatrixByRoot:function(h){var n=this;h=h||n;for(var i=n,a=[];i!==h;)a.unshift(i),i=i.get("parent");a.unshift(i);var o=[1,0,0,0,1,0,0,0,1];return t.each(a,function(u){t.mat3.multiply(o,u.attr("matrix"),o)}),o},getTotalMatrix:function(){var h=this._cfg.totalMatrix;if(!h){h=[1,0,0,0,1,0,0,0,1];var n=this._cfg.parent;if(n){var i=n.getTotalMatrix();c(h,i)}c(h,this.attr("matrix")),this._cfg.totalMatrix=h}return h},clearTotalMatrix:function(){},invert:function(h){var n=this.getTotalMatrix();if(s(n))h[0]/=n[0],h[1]/=n[4];else{var i=t.mat3.invert([],n);i&&t.vec3.transformMat3(h,h,i)}return this},resetTransform:function(h){var n=this.attr("matrix");l(n)||h.transform(n[0],n[1],n[3],n[4],n[6],n[7])}}},function(E,T,e){E.exports={painter:e(335)}},function(E,T,e){var t=e(1),l=e(336),s=["fillStyle","font","globalAlpha","lineCap","lineWidth","lineJoin","miterLimit","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","strokeStyle","textAlign","textBaseline","lineDash","lineDashOffset"],c=function(){function r(n){if(!n)return null;var i=t.uniqueId("canvas_"),a=t.createDom('<canvas id="'+i+'"></canvas>');return n.appendChild(a),this.type="canvas",this.canvas=a,this.context=a.getContext("2d"),this.toDraw=!1,this}var h=r.prototype;return h.beforeDraw=function(){var i=this.canvas;this.context&&this.context.clearRect(0,0,i.width,i.height)},h.draw=function(i){var a=this;function o(){a.animateHandler=t.requestAnimationFrame(function(){a.animateHandler=void 0,a.toDraw&&o()}),a.beforeDraw();try{a._drawGroup(i)}catch(u){console.warn("error in draw canvas, detail as:"),console.warn(u),a.toDraw=!1}a.toDraw=!1}a.animateHandler?a.toDraw=!0:o()},h.drawSync=function(i){this.beforeDraw(),this._drawGroup(i)},h._drawGroup=function(i){if(!(i._cfg.removed||i._cfg.destroyed||!i._cfg.visible)){var a=this,o=i._cfg.children,u=null;this.setContext(i);for(var f=0;f<o.length;f++)u=o[f],o[f].isGroup?a._drawGroup(u):a._drawShape(u);this.restoreContext(i)}},h._drawShape=function(i){i._cfg.removed||i._cfg.destroyed||!i._cfg.visible||(this.setContext(i),i.drawInner(this.context),this.restoreContext(i),i._cfg.attrs=i._attrs,i._cfg.hasUpdate=!1)},h.setContext=function(i){var a=this.context,o=i._attrs.clip;a.save(),o&&(o.resetTransform(a),o.createPath(a),a.clip()),this.resetContext(i),i.resetTransform(a)},h.restoreContext=function(){this.context.restore()},h.resetContext=function(i){var a=this.context,o=i._attrs;if(!i.isGroup){for(var u in o)if(s.indexOf(u)>-1){var f=o[u];u==="fillStyle"&&(f=l.parseStyle(f,i,a)),u==="strokeStyle"&&(f=l.parseStyle(f,i,a)),u==="lineDash"&&a.setLineDash?t.isArray(f)?a.setLineDash(f):t.isString(f)&&a.setLineDash(f.split(" ")):a[u]=f}}},r}();E.exports=c},function(E,T,e){var t=e(1),l=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,s=/[^\s\,]+/ig,c=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,r=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,h=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,n=/[\d.]+:(#[^\s]+|[^\)]+\))/ig,i={};function a(v,b){var y=v.match(n);t.each(y,function(g){g=g.split(":"),b.addColorStop(g[0],g[1])})}function o(v,b,y){var g=c.exec(v),_=t.mod(t.toRadian(parseFloat(g[1])),Math.PI*2),M=g[2],x=b.getBBox(),m,S;_>=0&&_<.5*Math.PI?(m={x:x.minX,y:x.minY},S={x:x.maxX,y:x.maxY}):.5*Math.PI<=_&&_<Math.PI?(m={x:x.maxX,y:x.minY},S={x:x.minX,y:x.maxY}):Math.PI<=_&&_<1.5*Math.PI?(m={x:x.maxX,y:x.maxY},S={x:x.minX,y:x.minY}):(m={x:x.minX,y:x.maxY},S={x:x.maxX,y:x.minY});var P=Math.tan(_),A=P*P,O=(S.x-m.x+P*(S.y-m.y))/(A+1)+m.x,R=P*(S.x-m.x+P*(S.y-m.y))/(A+1)+m.y,W=y.createLinearGradient(m.x,m.y,O,R);return a(M,W),W}function u(v,b,y){var g=r.exec(v),_=parseFloat(g[1]),M=parseFloat(g[2]),x=parseFloat(g[3]),m=g[4];if(x===0){var S=m.match(n);return S[S.length-1].split(":")[1]}var P=b.getBBox(),A=P.maxX-P.minX,O=P.maxY-P.minY,R=Math.sqrt(A*A+O*O)/2,W=y.createRadialGradient(P.minX+A*_,P.minY+O*M,x*R,P.minX+A/2,P.minY+O/2,R);return a(m,W),W}function f(v,b,y){if(b.get("patternSource")&&b.get("patternSource")===v)return b.get("pattern");var g,_,M=h.exec(v),x=M[1],m=M[2];function S(){g=y.createPattern(_,x),b.setSilent("pattern",g),b.setSilent("patternSource",v)}switch(x){case"a":x="repeat";break;case"x":x="repeat-x";break;case"y":x="repeat-y";break;case"n":x="no-repeat";break;default:x="no-repeat"}return _=new Image,m.match(/^data:/i)||(_.crossOrigin="Anonymous"),_.src=m,_.complete?S():(_.onload=S,_.src=_.src),g}E.exports={parsePath:function(b){if(b=b||[],t.isArray(b))return b;if(t.isString(b))return b=b.match(l),t.each(b,function(y,g){if(y=y.match(s),y[0].length>1){var _=y[0].charAt(0);y.splice(1,0,y[0].substr(1)),y[0]=_}t.each(y,function(M,x){isNaN(M)||(y[x]=+M)}),b[g]=y}),b},parseStyle:function(b,y,g){if(t.isString(b)){if(b[1]==="("||b[2]==="("){if(b[0]==="l")return o(b,y,g);if(b[0]==="r")return u(b,y,g);if(b[0]==="p")return f(b,y,g)}return b}},numberToColor:function(b){var y=i[b];if(!y){for(var g=b.toString(16),_=g.length;_<6;_++)g="0"+g;y="#"+g,i[b]=y}return y}}},function(E,T,e){E.exports={canvas:e(334),svg:e(345)}},function(E,T,e){var t=e(1),l=e(341),s=e(343),c=e(339),r=e(340),h=e(342),n=function(){function i(o){var u=document.createElementNS("http://www.w3.org/2000/svg","defs"),f=t.uniqueId("defs_");u.id=f,o.appendChild(u),this.children=[],this.defaultArrow={},this.el=u,this.canvas=o}var a=i.prototype;return a.find=function(u,f){for(var v=this.children,b=null,y=0;y<v.length;y++)if(v[y].match(u,f)){b=v[y].id;break}return b},a.findById=function(u){for(var f=this.children,v=null,b=0;b<f.length;b++)if(f[b].id===u){v=f[b];break}return v},a.add=function(u){this.children.push(u),u.canvas=this.canvas,u.parent=this},a.getDefaultArrow=function(u,f){var v=u.stroke||u.strokeStyle;if(this.defaultArrow[v])return this.defaultArrow[v].id;var b=new c(u,f);return this.defaultArrow[v]=b,this.el.appendChild(b.el),b.id},a.addGradient=function(u){var f=new l(u);return this.el.appendChild(f.el),this.add(f),f.id},a.addArrow=function(u,f){var v=new c(u,f);return this.el.appendChild(v.el),v.id},a.addShadow=function(u){var f=new s(u);return this.el.appendChild(f.el),this.add(f),f.id},a.addPattern=function(u){var f=new h(u);return this.el.appendChild(f.el),this.add(f),f.id},a.addClip=function(u){var f=new r(u);return this.el.appendChild(f.el),this.add(f),f.id},i}();E.exports=n},function(E,T,e){var t=e(1),l=function(){function s(r,h){var n=document.createElementNS("http://www.w3.org/2000/svg","marker"),i=t.uniqueId("marker_");n.setAttribute("id",i);var a=document.createElementNS("http://www.w3.org/2000/svg","path");return a.setAttribute("stroke","none"),a.setAttribute("fill",r.stroke||"#000"),n.appendChild(a),n.setAttribute("overflow","visible"),n.setAttribute("orient","auto-start-reverse"),this.el=n,this.child=a,this.id=i,this.cfg=r[h==="marker-start"?"startArrow":"endArrow"],this.stroke=r.stroke||"#000",this.cfg===!0?this._setDefaultPath(h,a):this._setMarker(r.lineWidth,a),this}var c=s.prototype;return c.match=function(){return!1},c._setDefaultPath=function(h,n){var i=this.el;n.setAttribute("d","M0,0 L6,3 L0,6 L3,3Z"),i.setAttribute("refX",3),i.setAttribute("refY",3)},c._setMarker=function(h,n){var i=this.el,a=this.cfg.path,o=this.cfg.d;t.isArray(a)&&(a=a.map(function(u){return u.join(" ")}).join("")),n.setAttribute("d",a),i.appendChild(n),o&&i.setAttribute("refX",o/h)},c.update=function(h){var n=this.child;n.attr?n.attr("fill",h):n.setAttribute("fill",h)},s}();E.exports=l},function(E,T,e){var t=e(1),l=function(){function s(r){this.type="clip";var h=document.createElementNS("http://www.w3.org/2000/svg","clipPath");this.el=h,this.id=t.uniqueId("clip_"),h.id=this.id;var n=r._cfg.el;return h.appendChild(n.cloneNode(!0)),this.cfg=r,this}var c=s.prototype;return c.match=function(){return!1},c.remove=function(){var h=this.el;h.parentNode.removeChild(h)},s}();E.exports=l},function(E,T,e){var t=e(1),l=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,s=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,c=/[\d.]+:(#[^\s]+|[^\)]+\))/ig;function r(a){var o=a.match(c);if(!o)return"";var u="";return o.sort(function(f,v){return f=f.split(":"),v=v.split(":"),Number(f[0])-Number(v[0])}),t.each(o,function(f){f=f.split(":"),u+='<stop offset="'+f[0]+'" stop-color="'+f[1]+'"></stop>'}),u}function h(a,o){var u=l.exec(a),f=t.mod(t.toRadian(parseFloat(u[1])),Math.PI*2),v=u[2],b,y;f>=0&&f<.5*Math.PI?(b={x:0,y:0},y={x:1,y:1}):.5*Math.PI<=f&&f<Math.PI?(b={x:1,y:0},y={x:0,y:1}):Math.PI<=f&&f<1.5*Math.PI?(b={x:1,y:1},y={x:0,y:0}):(b={x:0,y:1},y={x:1,y:0});var g=Math.tan(f),_=g*g,M=(y.x-b.x+g*(y.y-b.y))/(_+1)+b.x,x=g*(y.x-b.x+g*(y.y-b.y))/(_+1)+b.y;o.setAttribute("x1",b.x),o.setAttribute("y1",b.y),o.setAttribute("x2",M),o.setAttribute("y2",x),o.innerHTML=r(v)}function n(a,o){var u=s.exec(a),f=parseFloat(u[1]),v=parseFloat(u[2]),b=parseFloat(u[3]),y=u[4];o.setAttribute("cx",f),o.setAttribute("cy",v),o.setAttribute("r",b),o.innerHTML=r(y)}var i=function(){function a(u){var f=null,v=t.uniqueId("gradient_");return u.toLowerCase()[0]==="l"?(f=document.createElementNS("http://www.w3.org/2000/svg","linearGradient"),h(u,f)):(f=document.createElementNS("http://www.w3.org/2000/svg","radialGradient"),n(u,f)),f.setAttribute("id",v),this.el=f,this.id=v,this.cfg=u,this}var o=a.prototype;return o.match=function(f,v){return this.cfg===v},a}();E.exports=i},function(E,T,e){var t=e(1),l=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,s=function(){function c(h){var n=document.createElementNS("http://www.w3.org/2000/svg","pattern");n.setAttribute("patternUnits","userSpaceOnUse");var i=document.createElementNS("http://www.w3.org/2000/svg","image");n.appendChild(i);var a=t.uniqueId("pattern_");n.id=a,this.el=n,this.id=a,this.cfg=h;var o=l.exec(h),u=o[2];i.setAttribute("href",u);var f=new Image;u.match(/^data:/i)||(f.crossOrigin="Anonymous"),f.src=u;function v(){console.log(f.width,f.height),n.setAttribute("width",f.width),n.setAttribute("height",f.height)}return f.complete?v():(f.onload=v,f.src=f.src),this}var r=c.prototype;return r.match=function(n,i){return this.cfg===i},c}();E.exports=s},function(E,T,e){var t=e(1),l={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},s={x:"-40%",y:"-40%",width:"200%",height:"200%"},c=function(){function r(n){this.type="filter";var i=document.createElementNS("http://www.w3.org/2000/svg","filter");return t.each(s,function(a,o){i.setAttribute(o,a)}),this.el=i,this.id=t.uniqueId("filter_"),this.el.id=this.id,this.cfg=n,this._parseShadow(n,i),this}var h=r.prototype;return h.match=function(i,a){if(this.type!==i)return!1;var o=!0,u=this.cfg;return t.each(Object.keys(u),function(f){if(u[f]!==a[f])return o=!1,!1}),o},h.update=function(i,a){var o=this.cfg;return o[l[i]]=a,this._parseShadow(o,this.el),this},h._parseShadow=function(i,a){var o=`<feDropShadow 
      dx="`+(i.dx||0)+`" 
      dy="`+(i.dy||0)+`" 
      stdDeviation="`+(i.blur?i.blur/10:0)+`"
      flood-color="`+(i.color?i.color:"#000")+`"
      flood-opacity="`+(i.opacity?i.opacity:1)+`"
      />`;a.innerHTML=o},r}();E.exports=c},function(E,T){var e={svg:"svg",circle:"circle",rect:"rect",text:"text",path:"path",foreignObject:"foreignObject",polygon:"polygon",ellipse:"ellipse",image:"image"};E.exports=function(l,s,c){var r=c.target||c.srcElement;if(!e[r.tagName]){for(var h=r.parentNode;h&&!e[h.tagName];)h=h.parentNode;r=h}return this._cfg.el===r?this:this.find(function(n){return n._cfg&&n._cfg.el===r})}},function(E,T,e){E.exports={painter:e(346),getShape:e(344)}},function(E,T,e){var t=e(1),l=e(37),s=l.parseRadius,c=e(74),r=e(338),h={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject",fan:"path",group:"g"},n=.3,i={opacity:"opacity",fillStyle:"fill",strokeOpacity:"stroke-opacity",fillOpacity:"fill-opacity",strokeStyle:"stroke",x:"x",y:"y",r:"r",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"},a={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},o={left:"left",start:"left",center:"middle",right:"end",end:"end"},u=function(){function f(b){if(!b)return null;var y=t.uniqueId("canvas_"),g=t.createDom('<svg id="'+y+'"></svg>');return b.appendChild(g),this.type="svg",this.canvas=g,this.context=new r(g),this.toDraw=!1,this}var v=f.prototype;return v.draw=function(y){var g=this;function _(){g.animateHandler=t.requestAnimationFrame(function(){g.animateHandler=void 0,g.toDraw&&_()});try{y.resetMatrix(),g._drawGroup(y,!1)}catch(M){console.warn("error in draw canvas, detail as:"),console.warn(M),g.toDraw=!1}g.toDraw=!1}g.animateHandler?g.toDraw=!0:_()},v.drawSync=function(y){this._drawChildren(y,!1)},v._drawGroup=function(y,g){var _=y._cfg;_.removed||_.destroyed||(!_.el&&_.attrs&&(g=!0),_.tobeRemoved&&(t.each(_.tobeRemoved,function(M){M.parentNode&&M.parentNode.removeChild(M)}),_.tobeRemoved=[]),this._drawShape(y,g),_.children&&_.children.length>0&&this._drawChildren(y,g))},v._drawChildren=function(y,g){var _=this,M=y._cfg.children,x;if(!!M){if(y._cfg.el&&!g){var m=y._cfg.el.childNodes.length+1;m!==0&&m!==M.length&&(g=!0)}for(var S=0;S<M.length;S++)x=M[S],x.isGroup?_._drawGroup(x,g):_._drawShape(x,g)}},v._drawShape=function(y,g){var _=this,M=y._attrs,x=y._cfg,m=x.el;if(x.removed||x.destroyed){m&&m.parentNode.removeChild(x.el);return}if(g&&m&&(m.parentNode&&m.parentNode.removeChild(m),m=null),!m&&x.parent&&(_._createDom(y),_._updateShape(y)),m=x.el,x.visible===!1){m.setAttribute("visibility","hidden");return}x.visible&&m.hasAttribute("visibility")&&m.removeAttribute("visibility"),x.hasUpdate&&_._updateShape(y),M.clip&&M.clip._cfg.hasUpdate&&_._updateShape(M.clip)},v._updateShape=function(y){var g=this,_=y._attrs,M=y._cfg.attrs;if(!!M){if(y._cfg.el||g._createDom(y),"clip"in _&&this._setClip(y,_.clip),("shadowOffsetX"in _||"shadowOffsetY"in _||"shadowBlur"in _||"shadowColor"in _)&&this._setShadow(y),y.type==="text"){g._updateText(y);return}y.type==="fan"&&g._updateFan(y),y.type==="marker"&&y._cfg.el.setAttribute("d",g._assembleMarker(_)),y.type==="rect"&&y._cfg.el.setAttribute("d",g._assembleRect(_));for(var x in _)_[x]!==M[x]&&g._setAttribute(y,x,_[x]);y._cfg.attrs=t.deepMix({},y._attrs),y._cfg.hasUpdate=!1}},v._setAttribute=function(y,g,_){var M=y.type,x=y._attrs,m=y._cfg.el,S=this.context;if(!((M==="marker"||M==="rect")&&~["x","y","radius","r"].indexOf(g))){if(~["circle","ellipse"].indexOf(M)&&~["x","y"].indexOf(g)){m.setAttribute("c"+g,parseInt(_,10));return}if(M==="polygon"&&g==="points"){(!_||_.length===0)&&(_=""),t.isArray(_)&&(_=_.map(function(A){return A[0]+","+A[1]}),_=_.join(" ")),m.setAttribute("points",_);return}if(g==="path"&&t.isArray(_)){m.setAttribute("d",this._formatPath(_));return}if(g==="img"){this._setImage(y,_);return}if(g==="transform"){if(!_){m.removeAttribute("transform");return}this._setTransform(y);return}if(g==="rotate"){if(!_){m.removeAttribute("transform");return}this._setTransform(y);return}if(g==="matrix"){this._setTransform(y);return}if(g==="fillStyle"||g==="strokeStyle"){this._setColor(y,g,_);return}if(g!=="clip"){if(~g.indexOf("Arrow")){if(g=i[g],!_)y._cfg[g]=null,m.removeAttribute(g);else{var P=null;typeof _=="boolean"?P=S.getDefaultArrow(x,g):P=S.addArrow(x,g),m.setAttribute(g,"url(#"+P+")"),y._cfg[g]=P}return}g==="html"&&(typeof _=="string"?m.innerHTML=_:(m.innerHTML="",m.appendChild(_))),i[g]&&m.setAttribute(i[g],_)}}},v._createDom=function(y){var g=h[y.type],_=y._attrs;if(!g)throw new Error("the type"+y.type+"is not supported by svg");var M=document.createElementNS("http://www.w3.org/2000/svg",g);return y._cfg.el=M,y._cfg.parent&&y._cfg.parent.get("el").appendChild(M),y._cfg.attrs={},y.type==="text"?(M.setAttribute("paint-order","stroke"),M.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")):(!_.stroke&&!_.strokeStyle&&M.setAttribute("stroke","none"),!_.fill&&!_.fillStyle&&M.setAttribute("fill","none")),M},v._assembleMarker=function(y){var g=y.r;if(typeof y.r=="undefined"&&(g=y.radius),isNaN(Number(y.x))||isNaN(Number(y.y))||isNaN(Number(g)))return"";var _="";return typeof y.symbol=="function"?_=y.symbol(y.x,y.y,g):_=c.Symbols[y.symbol||"circle"](y.x,y.y,g),t.isArray(_)&&(_=_.map(function(M){return M.join(" ")}).join("")),_},v._assembleRect=function(y){var g=y.x,_=y.y,M=y.width,x=y.height,m=y.radius;if(!m)return"M "+g+","+_+" l "+M+",0 l 0,"+x+" l"+-M+" 0 z";var S=s(m);t.isArray(m)?m.length===1?S.r1=S.r2=S.r3=S.r4=m[0]:m.length===2?(S.r1=S.r3=m[0],S.r2=S.r4=m[1]):m.length===3?(S.r1=m[0],S.r2=S.r4=m[1],S.r3=m[2]):(S.r1=m[0],S.r2=m[1],S.r3=m[2],S.r4=m[3]):S.r1=S.r2=S.r3=S.r4=m;var P=[["M "+(g+S.r1)+","+_],["l "+(M-S.r1-S.r2)+",0"],["a "+S.r2+","+S.r2+",0,0,1,"+S.r2+","+S.r2],["l 0,"+(x-S.r2-S.r3)],["a "+S.r3+","+S.r3+",0,0,1,"+-S.r3+","+S.r3],["l "+(S.r3+S.r4-M)+",0"],["a "+S.r4+","+S.r4+",0,0,1,"+-S.r4+","+-S.r4],["l 0,"+(S.r4+S.r1-x)],["a "+S.r1+","+S.r1+",0,0,1,"+S.r1+","+-S.r1],["z"]];return P.join(" ")},v._formatPath=function(y){return y=y.map(function(g){return g.join(" ")}).join(""),~y.indexOf("NaN")?"":y},v._setTransform=function(y){for(var g=y._attrs.matrix,_=y._cfg.el,M=[],x=0;x<9;x+=3)M.push(g[x]+","+g[x+1]);M=M.join(","),M.indexOf("NaN")===-1?_.setAttribute("transform","matrix("+M+")"):console.warn("invalid matrix:",g)},v._setImage=function(y,g){var _=y._attrs,M=y._cfg.el;if(t.isString(g))M.setAttribute("href",g);else if(g instanceof Image)_.width||(M.setAttribute("width",g.width),y._attrs.width=g.width),_.height||(M.setAttribute("height",g.height),y._attrs.height=g.height),M.setAttribute("href",g.src);else if(g instanceof HTMLElement&&t.isString(g.nodeName)&&g.nodeName.toUpperCase()==="CANVAS")M.setAttribute("href",g.toDataURL());else if(g instanceof ImageData){var x=document.createElement("canvas");x.setAttribute("width",g.width),x.setAttribute("height",g.height),x.getContext("2d").putImageData(g,0,0),_.width||(M.setAttribute("width",g.width),y._attrs.width=g.width),_.height||(M.setAttribute("height",g.height),y._attrs.height=g.height),M.setAttribute("href",x.toDataURL())}},v._updateFan=function(y){function g(Y,K,it){return{x:K*Math.cos(Y)+it.x,y:K*Math.sin(Y)+it.y}}var _=y._attrs,M=y._cfg,x={x:_.x,y:_.y},m=[],S=_.startAngle,P=_.endAngle;t.isNumberEqual(P-S,Math.PI*2)&&(P-=1e-5);var A=g(S,_.re,x),O=g(P,_.re,x),R=P>S?1:0,W=Math.abs(P-S)>Math.PI?1:0,F=_.rs,Z=_.re,V=g(S,_.rs,x),k=g(P,_.rs,x);_.rs>0?(m.push("M "+O.x+","+O.y),m.push("L "+k.x+","+k.y),m.push("A "+F+","+F+",0,"+W+","+(R===1?0:1)+","+V.x+","+V.y),m.push("L "+A.x+" "+A.y)):(m.push("M "+x.x+","+x.y),m.push("L "+A.x+","+A.y)),m.push("A "+Z+","+Z+",0,"+W+","+R+","+O.x+","+O.y),_.rs>0?m.push("L "+k.x+","+k.y):m.push("Z"),M.el.setAttribute("d",m.join(" "))},v._updateText=function(y){var g=this,_=y._attrs,M=y._cfg.attrs,x=y._cfg.el;this._setFont(y);for(var m in _)if(_[m]!==M[m]){if(m==="text"){g._setText(y,""+_[m]);continue}if(m==="fillStyle"||m==="strokeStyle"){this._setColor(y,m,_[m]);continue}if(m==="matrix"){this._setTransform(y);continue}i[m]&&x.setAttribute(i[m],_[m])}y._cfg.attrs=Object.assign({},y._attrs),y._cfg.hasUpdate=!1},v._setFont=function(y){var g=y.get("el"),_=y._attrs,M=_.fontSize;g.setAttribute("alignment-baseline",a[_.textBaseline]||"baseline"),g.setAttribute("text-anchor",o[_.textAlign]||"left"),M&&+M<12&&(_.matrix=[1,0,0,0,1,0,0,0,1],y.transform([["t",-_.x,-_.y],["s",+M/12,+M/12],["t",_.x,_.y]]))},v._setText=function(y,g){var _=y._cfg.el,M=y._attrs.textBaseline||"bottom";if(!g)_.innerHTML="";else if(~g.indexOf(`
`)){var x=y._attrs.x,m=g.split(`
`),S=m.length-1,P="";t.each(m,function(A,O){O===0?M==="alphabetic"?P+='<tspan x="'+x+'" dy="'+-S+'em">'+A+"</tspan>":M==="top"?P+='<tspan x="'+x+'" dy="0.9em">'+A+"</tspan>":M==="middle"?P+='<tspan x="'+x+'" dy="'+-(S-1)/2+'em">'+A+"</tspan>":M==="bottom"?P+='<tspan x="'+x+'" dy="-'+(S+n)+'em">'+A+"</tspan>":M==="hanging"&&(P+='<tspan x="'+x+'" dy="'+(-(S-1)-n)+'em">'+A+"</tspan>"):P+='<tspan x="'+x+'" dy="1em">'+A+"</tspan>"}),_.innerHTML=P}else _.innerHTML=g},v._setClip=function(y,g){var _=y._cfg.el;if(!g){_.removeAttribute("clip-path");return}if(_.hasAttribute("clip-path"))g._cfg.hasUpdate&&this._updateShape(g);else{this._createDom(g),this._updateShape(g);var M=this.context.addClip(g);_.setAttribute("clip-path","url(#"+M+")")}},v._setColor=function(y,g,_){var M=y._cfg.el,x=this.context;if(!_){M.setAttribute(i[g],"none");return}if(_=_.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(_)){var m=x.find("gradient",_);m||(m=x.addGradient(_)),M.setAttribute(i[g],"url(#"+m+")")}else if(/^[p,P]{1}[\s]*\(/.test(_)){var S=x.find("pattern",_);S||(S=x.addPattern(_)),M.setAttribute(i[g],"url(#"+S+")")}else M.setAttribute(i[g],_)},v._setShadow=function(y){var g=y._cfg.el,_=y._attrs,M={dx:_.shadowOffsetX,dy:_.shadowOffsetY,blur:_.shadowBlur,color:_.shadowColor};if(!M.dx&&!M.dy&&!M.blur&&!M.color)g.removeAttribute("filter");else{var x=this.context.find("filter",M);x||(x=this.context.addShadow(M,this)),g.setAttribute("filter","url(#"+x+")")}},f}();E.exports=u},function(E,T,e){var t=e(7);t.Arc=e(136),t.Circle=e(137),t.Dom=e(138),t.Ellipse=e(139),t.Fan=e(140),t.Image=e(141),t.Line=e(142),t.Marker=e(74),t.Path=e(145),t.Polygon=e(146),t.Polyline=e(147),t.Rect=e(148),t.Text=e(149),E.exports=t},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.sub=T.mul=void 0,T.create=c,T.fromMat4=r,T.clone=h,T.copy=n,T.fromValues=i,T.set=a,T.identity=o,T.transpose=u,T.invert=f,T.adjoint=v,T.determinant=b,T.multiply=y,T.translate=g,T.rotate=_,T.scale=M,T.fromTranslation=x,T.fromRotation=m,T.fromScaling=S,T.fromMat2d=P,T.fromQuat=A,T.normalFromMat4=O,T.projection=R,T.str=W,T.frob=F,T.add=Z,T.subtract=V,T.multiplyScalar=k,T.multiplyScalarAndAdd=Y,T.exactEquals=K,T.equals=it;var t=e(78),l=s(t);function s(ut){if(ut&&ut.__esModule)return ut;var It={};if(ut!=null)for(var Nt in ut)Object.prototype.hasOwnProperty.call(ut,Nt)&&(It[Nt]=ut[Nt]);return It.default=ut,It}function c(){var ut=new l.ARRAY_TYPE(9);return l.ARRAY_TYPE!=Float32Array&&(ut[1]=0,ut[2]=0,ut[3]=0,ut[5]=0,ut[6]=0,ut[7]=0),ut[0]=1,ut[4]=1,ut[8]=1,ut}function r(ut,It){return ut[0]=It[0],ut[1]=It[1],ut[2]=It[2],ut[3]=It[4],ut[4]=It[5],ut[5]=It[6],ut[6]=It[8],ut[7]=It[9],ut[8]=It[10],ut}function h(ut){var It=new l.ARRAY_TYPE(9);return It[0]=ut[0],It[1]=ut[1],It[2]=ut[2],It[3]=ut[3],It[4]=ut[4],It[5]=ut[5],It[6]=ut[6],It[7]=ut[7],It[8]=ut[8],It}function n(ut,It){return ut[0]=It[0],ut[1]=It[1],ut[2]=It[2],ut[3]=It[3],ut[4]=It[4],ut[5]=It[5],ut[6]=It[6],ut[7]=It[7],ut[8]=It[8],ut}function i(ut,It,Nt,Lt,_t,mt,At,rt,Mt){var z=new l.ARRAY_TYPE(9);return z[0]=ut,z[1]=It,z[2]=Nt,z[3]=Lt,z[4]=_t,z[5]=mt,z[6]=At,z[7]=rt,z[8]=Mt,z}function a(ut,It,Nt,Lt,_t,mt,At,rt,Mt,z){return ut[0]=It,ut[1]=Nt,ut[2]=Lt,ut[3]=_t,ut[4]=mt,ut[5]=At,ut[6]=rt,ut[7]=Mt,ut[8]=z,ut}function o(ut){return ut[0]=1,ut[1]=0,ut[2]=0,ut[3]=0,ut[4]=1,ut[5]=0,ut[6]=0,ut[7]=0,ut[8]=1,ut}function u(ut,It){if(ut===It){var Nt=It[1],Lt=It[2],_t=It[5];ut[1]=It[3],ut[2]=It[6],ut[3]=Nt,ut[5]=It[7],ut[6]=Lt,ut[7]=_t}else ut[0]=It[0],ut[1]=It[3],ut[2]=It[6],ut[3]=It[1],ut[4]=It[4],ut[5]=It[7],ut[6]=It[2],ut[7]=It[5],ut[8]=It[8];return ut}function f(ut,It){var Nt=It[0],Lt=It[1],_t=It[2],mt=It[3],At=It[4],rt=It[5],Mt=It[6],z=It[7],$=It[8],dt=$*At-rt*z,et=-$*mt+rt*Mt,ot=z*mt-At*Mt,pt=Nt*dt+Lt*et+_t*ot;return pt?(pt=1/pt,ut[0]=dt*pt,ut[1]=(-$*Lt+_t*z)*pt,ut[2]=(rt*Lt-_t*At)*pt,ut[3]=et*pt,ut[4]=($*Nt-_t*Mt)*pt,ut[5]=(-rt*Nt+_t*mt)*pt,ut[6]=ot*pt,ut[7]=(-z*Nt+Lt*Mt)*pt,ut[8]=(At*Nt-Lt*mt)*pt,ut):null}function v(ut,It){var Nt=It[0],Lt=It[1],_t=It[2],mt=It[3],At=It[4],rt=It[5],Mt=It[6],z=It[7],$=It[8];return ut[0]=At*$-rt*z,ut[1]=_t*z-Lt*$,ut[2]=Lt*rt-_t*At,ut[3]=rt*Mt-mt*$,ut[4]=Nt*$-_t*Mt,ut[5]=_t*mt-Nt*rt,ut[6]=mt*z-At*Mt,ut[7]=Lt*Mt-Nt*z,ut[8]=Nt*At-Lt*mt,ut}function b(ut){var It=ut[0],Nt=ut[1],Lt=ut[2],_t=ut[3],mt=ut[4],At=ut[5],rt=ut[6],Mt=ut[7],z=ut[8];return It*(z*mt-At*Mt)+Nt*(-z*_t+At*rt)+Lt*(Mt*_t-mt*rt)}function y(ut,It,Nt){var Lt=It[0],_t=It[1],mt=It[2],At=It[3],rt=It[4],Mt=It[5],z=It[6],$=It[7],dt=It[8],et=Nt[0],ot=Nt[1],pt=Nt[2],H=Nt[3],nt=Nt[4],at=Nt[5],q=Nt[6],Et=Nt[7],vt=Nt[8];return ut[0]=et*Lt+ot*At+pt*z,ut[1]=et*_t+ot*rt+pt*$,ut[2]=et*mt+ot*Mt+pt*dt,ut[3]=H*Lt+nt*At+at*z,ut[4]=H*_t+nt*rt+at*$,ut[5]=H*mt+nt*Mt+at*dt,ut[6]=q*Lt+Et*At+vt*z,ut[7]=q*_t+Et*rt+vt*$,ut[8]=q*mt+Et*Mt+vt*dt,ut}function g(ut,It,Nt){var Lt=It[0],_t=It[1],mt=It[2],At=It[3],rt=It[4],Mt=It[5],z=It[6],$=It[7],dt=It[8],et=Nt[0],ot=Nt[1];return ut[0]=Lt,ut[1]=_t,ut[2]=mt,ut[3]=At,ut[4]=rt,ut[5]=Mt,ut[6]=et*Lt+ot*At+z,ut[7]=et*_t+ot*rt+$,ut[8]=et*mt+ot*Mt+dt,ut}function _(ut,It,Nt){var Lt=It[0],_t=It[1],mt=It[2],At=It[3],rt=It[4],Mt=It[5],z=It[6],$=It[7],dt=It[8],et=Math.sin(Nt),ot=Math.cos(Nt);return ut[0]=ot*Lt+et*At,ut[1]=ot*_t+et*rt,ut[2]=ot*mt+et*Mt,ut[3]=ot*At-et*Lt,ut[4]=ot*rt-et*_t,ut[5]=ot*Mt-et*mt,ut[6]=z,ut[7]=$,ut[8]=dt,ut}function M(ut,It,Nt){var Lt=Nt[0],_t=Nt[1];return ut[0]=Lt*It[0],ut[1]=Lt*It[1],ut[2]=Lt*It[2],ut[3]=_t*It[3],ut[4]=_t*It[4],ut[5]=_t*It[5],ut[6]=It[6],ut[7]=It[7],ut[8]=It[8],ut}function x(ut,It){return ut[0]=1,ut[1]=0,ut[2]=0,ut[3]=0,ut[4]=1,ut[5]=0,ut[6]=It[0],ut[7]=It[1],ut[8]=1,ut}function m(ut,It){var Nt=Math.sin(It),Lt=Math.cos(It);return ut[0]=Lt,ut[1]=Nt,ut[2]=0,ut[3]=-Nt,ut[4]=Lt,ut[5]=0,ut[6]=0,ut[7]=0,ut[8]=1,ut}function S(ut,It){return ut[0]=It[0],ut[1]=0,ut[2]=0,ut[3]=0,ut[4]=It[1],ut[5]=0,ut[6]=0,ut[7]=0,ut[8]=1,ut}function P(ut,It){return ut[0]=It[0],ut[1]=It[1],ut[2]=0,ut[3]=It[2],ut[4]=It[3],ut[5]=0,ut[6]=It[4],ut[7]=It[5],ut[8]=1,ut}function A(ut,It){var Nt=It[0],Lt=It[1],_t=It[2],mt=It[3],At=Nt+Nt,rt=Lt+Lt,Mt=_t+_t,z=Nt*At,$=Lt*At,dt=Lt*rt,et=_t*At,ot=_t*rt,pt=_t*Mt,H=mt*At,nt=mt*rt,at=mt*Mt;return ut[0]=1-dt-pt,ut[3]=$-at,ut[6]=et+nt,ut[1]=$+at,ut[4]=1-z-pt,ut[7]=ot-H,ut[2]=et-nt,ut[5]=ot+H,ut[8]=1-z-dt,ut}function O(ut,It){var Nt=It[0],Lt=It[1],_t=It[2],mt=It[3],At=It[4],rt=It[5],Mt=It[6],z=It[7],$=It[8],dt=It[9],et=It[10],ot=It[11],pt=It[12],H=It[13],nt=It[14],at=It[15],q=Nt*rt-Lt*At,Et=Nt*Mt-_t*At,vt=Nt*z-mt*At,Ft=Lt*Mt-_t*rt,Qt=Lt*z-mt*rt,ee=_t*z-mt*Mt,Gt=$*H-dt*pt,$t=$*nt-et*pt,Pe=$*at-ot*pt,me=dt*nt-et*H,le=dt*at-ot*H,be=et*at-ot*nt,ze=q*be-Et*le+vt*me+Ft*Pe-Qt*$t+ee*Gt;return ze?(ze=1/ze,ut[0]=(rt*be-Mt*le+z*me)*ze,ut[1]=(Mt*Pe-At*be-z*$t)*ze,ut[2]=(At*le-rt*Pe+z*Gt)*ze,ut[3]=(_t*le-Lt*be-mt*me)*ze,ut[4]=(Nt*be-_t*Pe+mt*$t)*ze,ut[5]=(Lt*Pe-Nt*le-mt*Gt)*ze,ut[6]=(H*ee-nt*Qt+at*Ft)*ze,ut[7]=(nt*vt-pt*ee-at*Et)*ze,ut[8]=(pt*Qt-H*vt+at*q)*ze,ut):null}function R(ut,It,Nt){return ut[0]=2/It,ut[1]=0,ut[2]=0,ut[3]=0,ut[4]=-2/Nt,ut[5]=0,ut[6]=-1,ut[7]=1,ut[8]=1,ut}function W(ut){return"mat3("+ut[0]+", "+ut[1]+", "+ut[2]+", "+ut[3]+", "+ut[4]+", "+ut[5]+", "+ut[6]+", "+ut[7]+", "+ut[8]+")"}function F(ut){return Math.sqrt(Math.pow(ut[0],2)+Math.pow(ut[1],2)+Math.pow(ut[2],2)+Math.pow(ut[3],2)+Math.pow(ut[4],2)+Math.pow(ut[5],2)+Math.pow(ut[6],2)+Math.pow(ut[7],2)+Math.pow(ut[8],2))}function Z(ut,It,Nt){return ut[0]=It[0]+Nt[0],ut[1]=It[1]+Nt[1],ut[2]=It[2]+Nt[2],ut[3]=It[3]+Nt[3],ut[4]=It[4]+Nt[4],ut[5]=It[5]+Nt[5],ut[6]=It[6]+Nt[6],ut[7]=It[7]+Nt[7],ut[8]=It[8]+Nt[8],ut}function V(ut,It,Nt){return ut[0]=It[0]-Nt[0],ut[1]=It[1]-Nt[1],ut[2]=It[2]-Nt[2],ut[3]=It[3]-Nt[3],ut[4]=It[4]-Nt[4],ut[5]=It[5]-Nt[5],ut[6]=It[6]-Nt[6],ut[7]=It[7]-Nt[7],ut[8]=It[8]-Nt[8],ut}function k(ut,It,Nt){return ut[0]=It[0]*Nt,ut[1]=It[1]*Nt,ut[2]=It[2]*Nt,ut[3]=It[3]*Nt,ut[4]=It[4]*Nt,ut[5]=It[5]*Nt,ut[6]=It[6]*Nt,ut[7]=It[7]*Nt,ut[8]=It[8]*Nt,ut}function Y(ut,It,Nt,Lt){return ut[0]=It[0]+Nt[0]*Lt,ut[1]=It[1]+Nt[1]*Lt,ut[2]=It[2]+Nt[2]*Lt,ut[3]=It[3]+Nt[3]*Lt,ut[4]=It[4]+Nt[4]*Lt,ut[5]=It[5]+Nt[5]*Lt,ut[6]=It[6]+Nt[6]*Lt,ut[7]=It[7]+Nt[7]*Lt,ut[8]=It[8]+Nt[8]*Lt,ut}function K(ut,It){return ut[0]===It[0]&&ut[1]===It[1]&&ut[2]===It[2]&&ut[3]===It[3]&&ut[4]===It[4]&&ut[5]===It[5]&&ut[6]===It[6]&&ut[7]===It[7]&&ut[8]===It[8]}function it(ut,It){var Nt=ut[0],Lt=ut[1],_t=ut[2],mt=ut[3],At=ut[4],rt=ut[5],Mt=ut[6],z=ut[7],$=ut[8],dt=It[0],et=It[1],ot=It[2],pt=It[3],H=It[4],nt=It[5],at=It[6],q=It[7],Et=It[8];return Math.abs(Nt-dt)<=l.EPSILON*Math.max(1,Math.abs(Nt),Math.abs(dt))&&Math.abs(Lt-et)<=l.EPSILON*Math.max(1,Math.abs(Lt),Math.abs(et))&&Math.abs(_t-ot)<=l.EPSILON*Math.max(1,Math.abs(_t),Math.abs(ot))&&Math.abs(mt-pt)<=l.EPSILON*Math.max(1,Math.abs(mt),Math.abs(pt))&&Math.abs(At-H)<=l.EPSILON*Math.max(1,Math.abs(At),Math.abs(H))&&Math.abs(rt-nt)<=l.EPSILON*Math.max(1,Math.abs(rt),Math.abs(nt))&&Math.abs(Mt-at)<=l.EPSILON*Math.max(1,Math.abs(Mt),Math.abs(at))&&Math.abs(z-q)<=l.EPSILON*Math.max(1,Math.abs(z),Math.abs(q))&&Math.abs($-Et)<=l.EPSILON*Math.max(1,Math.abs($),Math.abs(Et))}var ct=T.mul=y,ht=T.sub=V},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.forEach=T.sqrLen=T.sqrDist=T.dist=T.div=T.mul=T.sub=T.len=void 0,T.create=c,T.clone=r,T.fromValues=h,T.copy=n,T.set=i,T.add=a,T.subtract=o,T.multiply=u,T.divide=f,T.ceil=v,T.floor=b,T.min=y,T.max=g,T.round=_,T.scale=M,T.scaleAndAdd=x,T.distance=m,T.squaredDistance=S,T.length=P,T.squaredLength=A,T.negate=O,T.inverse=R,T.normalize=W,T.dot=F,T.cross=Z,T.lerp=V,T.random=k,T.transformMat2=Y,T.transformMat2d=K,T.transformMat3=it,T.transformMat4=ct,T.rotate=ht,T.angle=ut,T.str=It,T.exactEquals=Nt,T.equals=Lt;var t=e(78),l=s(t);function s(et){if(et&&et.__esModule)return et;var ot={};if(et!=null)for(var pt in et)Object.prototype.hasOwnProperty.call(et,pt)&&(ot[pt]=et[pt]);return ot.default=et,ot}function c(){var et=new l.ARRAY_TYPE(2);return l.ARRAY_TYPE!=Float32Array&&(et[0]=0,et[1]=0),et}function r(et){var ot=new l.ARRAY_TYPE(2);return ot[0]=et[0],ot[1]=et[1],ot}function h(et,ot){var pt=new l.ARRAY_TYPE(2);return pt[0]=et,pt[1]=ot,pt}function n(et,ot){return et[0]=ot[0],et[1]=ot[1],et}function i(et,ot,pt){return et[0]=ot,et[1]=pt,et}function a(et,ot,pt){return et[0]=ot[0]+pt[0],et[1]=ot[1]+pt[1],et}function o(et,ot,pt){return et[0]=ot[0]-pt[0],et[1]=ot[1]-pt[1],et}function u(et,ot,pt){return et[0]=ot[0]*pt[0],et[1]=ot[1]*pt[1],et}function f(et,ot,pt){return et[0]=ot[0]/pt[0],et[1]=ot[1]/pt[1],et}function v(et,ot){return et[0]=Math.ceil(ot[0]),et[1]=Math.ceil(ot[1]),et}function b(et,ot){return et[0]=Math.floor(ot[0]),et[1]=Math.floor(ot[1]),et}function y(et,ot,pt){return et[0]=Math.min(ot[0],pt[0]),et[1]=Math.min(ot[1],pt[1]),et}function g(et,ot,pt){return et[0]=Math.max(ot[0],pt[0]),et[1]=Math.max(ot[1],pt[1]),et}function _(et,ot){return et[0]=Math.round(ot[0]),et[1]=Math.round(ot[1]),et}function M(et,ot,pt){return et[0]=ot[0]*pt,et[1]=ot[1]*pt,et}function x(et,ot,pt,H){return et[0]=ot[0]+pt[0]*H,et[1]=ot[1]+pt[1]*H,et}function m(et,ot){var pt=ot[0]-et[0],H=ot[1]-et[1];return Math.sqrt(pt*pt+H*H)}function S(et,ot){var pt=ot[0]-et[0],H=ot[1]-et[1];return pt*pt+H*H}function P(et){var ot=et[0],pt=et[1];return Math.sqrt(ot*ot+pt*pt)}function A(et){var ot=et[0],pt=et[1];return ot*ot+pt*pt}function O(et,ot){return et[0]=-ot[0],et[1]=-ot[1],et}function R(et,ot){return et[0]=1/ot[0],et[1]=1/ot[1],et}function W(et,ot){var pt=ot[0],H=ot[1],nt=pt*pt+H*H;return nt>0&&(nt=1/Math.sqrt(nt),et[0]=ot[0]*nt,et[1]=ot[1]*nt),et}function F(et,ot){return et[0]*ot[0]+et[1]*ot[1]}function Z(et,ot,pt){var H=ot[0]*pt[1]-ot[1]*pt[0];return et[0]=et[1]=0,et[2]=H,et}function V(et,ot,pt,H){var nt=ot[0],at=ot[1];return et[0]=nt+H*(pt[0]-nt),et[1]=at+H*(pt[1]-at),et}function k(et,ot){ot=ot||1;var pt=l.RANDOM()*2*Math.PI;return et[0]=Math.cos(pt)*ot,et[1]=Math.sin(pt)*ot,et}function Y(et,ot,pt){var H=ot[0],nt=ot[1];return et[0]=pt[0]*H+pt[2]*nt,et[1]=pt[1]*H+pt[3]*nt,et}function K(et,ot,pt){var H=ot[0],nt=ot[1];return et[0]=pt[0]*H+pt[2]*nt+pt[4],et[1]=pt[1]*H+pt[3]*nt+pt[5],et}function it(et,ot,pt){var H=ot[0],nt=ot[1];return et[0]=pt[0]*H+pt[3]*nt+pt[6],et[1]=pt[1]*H+pt[4]*nt+pt[7],et}function ct(et,ot,pt){var H=ot[0],nt=ot[1];return et[0]=pt[0]*H+pt[4]*nt+pt[12],et[1]=pt[1]*H+pt[5]*nt+pt[13],et}function ht(et,ot,pt,H){var nt=ot[0]-pt[0],at=ot[1]-pt[1],q=Math.sin(H),Et=Math.cos(H);return et[0]=nt*Et-at*q+pt[0],et[1]=nt*q+at*Et+pt[1],et}function ut(et,ot){var pt=et[0],H=et[1],nt=ot[0],at=ot[1],q=pt*pt+H*H;q>0&&(q=1/Math.sqrt(q));var Et=nt*nt+at*at;Et>0&&(Et=1/Math.sqrt(Et));var vt=(pt*nt+H*at)*q*Et;return vt>1?0:vt<-1?Math.PI:Math.acos(vt)}function It(et){return"vec2("+et[0]+", "+et[1]+")"}function Nt(et,ot){return et[0]===ot[0]&&et[1]===ot[1]}function Lt(et,ot){var pt=et[0],H=et[1],nt=ot[0],at=ot[1];return Math.abs(pt-nt)<=l.EPSILON*Math.max(1,Math.abs(pt),Math.abs(nt))&&Math.abs(H-at)<=l.EPSILON*Math.max(1,Math.abs(H),Math.abs(at))}var _t=T.len=P,mt=T.sub=o,At=T.mul=u,rt=T.div=f,Mt=T.dist=m,z=T.sqrDist=S,$=T.sqrLen=A,dt=T.forEach=function(){var et=c();return function(ot,pt,H,nt,at,q){var Et=void 0,vt=void 0;for(pt||(pt=2),H||(H=0),nt?vt=Math.min(nt*pt+H,ot.length):vt=ot.length,Et=H;Et<vt;Et+=pt)et[0]=ot[Et],et[1]=ot[Et+1],at(et,et,q),ot[Et]=et[0],ot[Et+1]=et[1];return ot}}()},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.forEach=T.sqrLen=T.len=T.sqrDist=T.dist=T.div=T.mul=T.sub=void 0,T.create=c,T.clone=r,T.length=h,T.fromValues=n,T.copy=i,T.set=a,T.add=o,T.subtract=u,T.multiply=f,T.divide=v,T.ceil=b,T.floor=y,T.min=g,T.max=_,T.round=M,T.scale=x,T.scaleAndAdd=m,T.distance=S,T.squaredDistance=P,T.squaredLength=A,T.negate=O,T.inverse=R,T.normalize=W,T.dot=F,T.cross=Z,T.lerp=V,T.hermite=k,T.bezier=Y,T.random=K,T.transformMat4=it,T.transformMat3=ct,T.transformQuat=ht,T.rotateX=ut,T.rotateY=It,T.rotateZ=Nt,T.angle=Lt,T.str=_t,T.exactEquals=mt,T.equals=At;var t=e(78),l=s(t);function s(H){if(H&&H.__esModule)return H;var nt={};if(H!=null)for(var at in H)Object.prototype.hasOwnProperty.call(H,at)&&(nt[at]=H[at]);return nt.default=H,nt}function c(){var H=new l.ARRAY_TYPE(3);return l.ARRAY_TYPE!=Float32Array&&(H[0]=0,H[1]=0,H[2]=0),H}function r(H){var nt=new l.ARRAY_TYPE(3);return nt[0]=H[0],nt[1]=H[1],nt[2]=H[2],nt}function h(H){var nt=H[0],at=H[1],q=H[2];return Math.sqrt(nt*nt+at*at+q*q)}function n(H,nt,at){var q=new l.ARRAY_TYPE(3);return q[0]=H,q[1]=nt,q[2]=at,q}function i(H,nt){return H[0]=nt[0],H[1]=nt[1],H[2]=nt[2],H}function a(H,nt,at,q){return H[0]=nt,H[1]=at,H[2]=q,H}function o(H,nt,at){return H[0]=nt[0]+at[0],H[1]=nt[1]+at[1],H[2]=nt[2]+at[2],H}function u(H,nt,at){return H[0]=nt[0]-at[0],H[1]=nt[1]-at[1],H[2]=nt[2]-at[2],H}function f(H,nt,at){return H[0]=nt[0]*at[0],H[1]=nt[1]*at[1],H[2]=nt[2]*at[2],H}function v(H,nt,at){return H[0]=nt[0]/at[0],H[1]=nt[1]/at[1],H[2]=nt[2]/at[2],H}function b(H,nt){return H[0]=Math.ceil(nt[0]),H[1]=Math.ceil(nt[1]),H[2]=Math.ceil(nt[2]),H}function y(H,nt){return H[0]=Math.floor(nt[0]),H[1]=Math.floor(nt[1]),H[2]=Math.floor(nt[2]),H}function g(H,nt,at){return H[0]=Math.min(nt[0],at[0]),H[1]=Math.min(nt[1],at[1]),H[2]=Math.min(nt[2],at[2]),H}function _(H,nt,at){return H[0]=Math.max(nt[0],at[0]),H[1]=Math.max(nt[1],at[1]),H[2]=Math.max(nt[2],at[2]),H}function M(H,nt){return H[0]=Math.round(nt[0]),H[1]=Math.round(nt[1]),H[2]=Math.round(nt[2]),H}function x(H,nt,at){return H[0]=nt[0]*at,H[1]=nt[1]*at,H[2]=nt[2]*at,H}function m(H,nt,at,q){return H[0]=nt[0]+at[0]*q,H[1]=nt[1]+at[1]*q,H[2]=nt[2]+at[2]*q,H}function S(H,nt){var at=nt[0]-H[0],q=nt[1]-H[1],Et=nt[2]-H[2];return Math.sqrt(at*at+q*q+Et*Et)}function P(H,nt){var at=nt[0]-H[0],q=nt[1]-H[1],Et=nt[2]-H[2];return at*at+q*q+Et*Et}function A(H){var nt=H[0],at=H[1],q=H[2];return nt*nt+at*at+q*q}function O(H,nt){return H[0]=-nt[0],H[1]=-nt[1],H[2]=-nt[2],H}function R(H,nt){return H[0]=1/nt[0],H[1]=1/nt[1],H[2]=1/nt[2],H}function W(H,nt){var at=nt[0],q=nt[1],Et=nt[2],vt=at*at+q*q+Et*Et;return vt>0&&(vt=1/Math.sqrt(vt),H[0]=nt[0]*vt,H[1]=nt[1]*vt,H[2]=nt[2]*vt),H}function F(H,nt){return H[0]*nt[0]+H[1]*nt[1]+H[2]*nt[2]}function Z(H,nt,at){var q=nt[0],Et=nt[1],vt=nt[2],Ft=at[0],Qt=at[1],ee=at[2];return H[0]=Et*ee-vt*Qt,H[1]=vt*Ft-q*ee,H[2]=q*Qt-Et*Ft,H}function V(H,nt,at,q){var Et=nt[0],vt=nt[1],Ft=nt[2];return H[0]=Et+q*(at[0]-Et),H[1]=vt+q*(at[1]-vt),H[2]=Ft+q*(at[2]-Ft),H}function k(H,nt,at,q,Et,vt){var Ft=vt*vt,Qt=Ft*(2*vt-3)+1,ee=Ft*(vt-2)+vt,Gt=Ft*(vt-1),$t=Ft*(3-2*vt);return H[0]=nt[0]*Qt+at[0]*ee+q[0]*Gt+Et[0]*$t,H[1]=nt[1]*Qt+at[1]*ee+q[1]*Gt+Et[1]*$t,H[2]=nt[2]*Qt+at[2]*ee+q[2]*Gt+Et[2]*$t,H}function Y(H,nt,at,q,Et,vt){var Ft=1-vt,Qt=Ft*Ft,ee=vt*vt,Gt=Qt*Ft,$t=3*vt*Qt,Pe=3*ee*Ft,me=ee*vt;return H[0]=nt[0]*Gt+at[0]*$t+q[0]*Pe+Et[0]*me,H[1]=nt[1]*Gt+at[1]*$t+q[1]*Pe+Et[1]*me,H[2]=nt[2]*Gt+at[2]*$t+q[2]*Pe+Et[2]*me,H}function K(H,nt){nt=nt||1;var at=l.RANDOM()*2*Math.PI,q=l.RANDOM()*2-1,Et=Math.sqrt(1-q*q)*nt;return H[0]=Math.cos(at)*Et,H[1]=Math.sin(at)*Et,H[2]=q*nt,H}function it(H,nt,at){var q=nt[0],Et=nt[1],vt=nt[2],Ft=at[3]*q+at[7]*Et+at[11]*vt+at[15];return Ft=Ft||1,H[0]=(at[0]*q+at[4]*Et+at[8]*vt+at[12])/Ft,H[1]=(at[1]*q+at[5]*Et+at[9]*vt+at[13])/Ft,H[2]=(at[2]*q+at[6]*Et+at[10]*vt+at[14])/Ft,H}function ct(H,nt,at){var q=nt[0],Et=nt[1],vt=nt[2];return H[0]=q*at[0]+Et*at[3]+vt*at[6],H[1]=q*at[1]+Et*at[4]+vt*at[7],H[2]=q*at[2]+Et*at[5]+vt*at[8],H}function ht(H,nt,at){var q=at[0],Et=at[1],vt=at[2],Ft=at[3],Qt=nt[0],ee=nt[1],Gt=nt[2],$t=Et*Gt-vt*ee,Pe=vt*Qt-q*Gt,me=q*ee-Et*Qt,le=Et*me-vt*Pe,be=vt*$t-q*me,ze=q*Pe-Et*$t,Xe=Ft*2;return $t*=Xe,Pe*=Xe,me*=Xe,le*=2,be*=2,ze*=2,H[0]=Qt+$t+le,H[1]=ee+Pe+be,H[2]=Gt+me+ze,H}function ut(H,nt,at,q){var Et=[],vt=[];return Et[0]=nt[0]-at[0],Et[1]=nt[1]-at[1],Et[2]=nt[2]-at[2],vt[0]=Et[0],vt[1]=Et[1]*Math.cos(q)-Et[2]*Math.sin(q),vt[2]=Et[1]*Math.sin(q)+Et[2]*Math.cos(q),H[0]=vt[0]+at[0],H[1]=vt[1]+at[1],H[2]=vt[2]+at[2],H}function It(H,nt,at,q){var Et=[],vt=[];return Et[0]=nt[0]-at[0],Et[1]=nt[1]-at[1],Et[2]=nt[2]-at[2],vt[0]=Et[2]*Math.sin(q)+Et[0]*Math.cos(q),vt[1]=Et[1],vt[2]=Et[2]*Math.cos(q)-Et[0]*Math.sin(q),H[0]=vt[0]+at[0],H[1]=vt[1]+at[1],H[2]=vt[2]+at[2],H}function Nt(H,nt,at,q){var Et=[],vt=[];return Et[0]=nt[0]-at[0],Et[1]=nt[1]-at[1],Et[2]=nt[2]-at[2],vt[0]=Et[0]*Math.cos(q)-Et[1]*Math.sin(q),vt[1]=Et[0]*Math.sin(q)+Et[1]*Math.cos(q),vt[2]=Et[2],H[0]=vt[0]+at[0],H[1]=vt[1]+at[1],H[2]=vt[2]+at[2],H}function Lt(H,nt){var at=n(H[0],H[1],H[2]),q=n(nt[0],nt[1],nt[2]);W(at,at),W(q,q);var Et=F(at,q);return Et>1?0:Et<-1?Math.PI:Math.acos(Et)}function _t(H){return"vec3("+H[0]+", "+H[1]+", "+H[2]+")"}function mt(H,nt){return H[0]===nt[0]&&H[1]===nt[1]&&H[2]===nt[2]}function At(H,nt){var at=H[0],q=H[1],Et=H[2],vt=nt[0],Ft=nt[1],Qt=nt[2];return Math.abs(at-vt)<=l.EPSILON*Math.max(1,Math.abs(at),Math.abs(vt))&&Math.abs(q-Ft)<=l.EPSILON*Math.max(1,Math.abs(q),Math.abs(Ft))&&Math.abs(Et-Qt)<=l.EPSILON*Math.max(1,Math.abs(Et),Math.abs(Qt))}var rt=T.sub=u,Mt=T.mul=f,z=T.div=v,$=T.dist=S,dt=T.sqrDist=P,et=T.len=h,ot=T.sqrLen=A,pt=T.forEach=function(){var H=c();return function(nt,at,q,Et,vt,Ft){var Qt=void 0,ee=void 0;for(at||(at=3),q||(q=0),Et?ee=Math.min(Et*at+q,nt.length):ee=nt.length,Qt=q;Qt<ee;Qt+=at)H[0]=nt[Qt],H[1]=nt[Qt+1],H[2]=nt[Qt+2],vt(H,H,Ft),nt[Qt]=H[0],nt[Qt+1]=H[1],nt[Qt+2]=H[2];return nt}}()},function(E,T,e){var t=e(6),l=e(11),s=e(152),c=5,r=7,h=[1,1.2,1.5,1.6,2,2.2,2.4,2.5,3,4,5,6,7.5,8,10],n=[1,2,4,5,10],i=1e-12;E.exports=function(a){var o=a.min,u=a.max,f=a.interval,v=a.minTickInterval,b=[],y=a.minCount||c,g=a.maxCount||r,_=y===g,M=t(a.minLimit)?-Infinity:a.minLimit,x=t(a.maxLimit)?Infinity:a.maxLimit,m=(y+g)/2,S=m,P=a.snapArray?a.snapArray:_?h:n;if(o===M&&u===x&&_&&(f=(u-o)/(S-1)),t(o)&&(o=0),t(u)&&(u=0),Math.abs(u-o)<i&&(o===0?u=1:o>0?o=0:u=0,u-o<5&&!f&&u-o>=1&&(f=1)),t(f)){var A=(u-o)/(m-1);f=s.snapFactorTo(A,P,"ceil"),g!==y&&(S=parseInt((u-o)/f,10),S>g&&(S=g),S<y&&(S=y),f=s.snapFactorTo((u-o)/(S-1),P))}if(l(v)&&f<v&&(f=v),a.interval||g!==y){u=Math.min(s.snapMultiple(u,f,"ceil"),x),o=Math.max(s.snapMultiple(o,f,"floor"),M),S=Math.round((u-o)/f),o=s.fixedBase(o,f),u=s.fixedBase(u,f);for(var O=null;o>M&&M>-Infinity&&(O===null||o<O);)O=o,o=s.fixedBase(o-f,f)}else{m=parseInt(m,10);var R=(u+o)/2,W=s.snapMultiple(R,f,"ceil"),F=Math.floor((m-2)/2),Z=W+F*f,V;m%2==0?V=W-F*f:V=W-(F+1)*f;for(var k=null;Z<u&&(k===null||Z>k);)k=Z,Z=s.fixedBase(Z+f,f);for(var Y=null;V>o&&(Y===null||V<Y);)Y=V,V=s.fixedBase(V-f,f);u=Z,o=V}u=Math.min(u,x),o=Math.max(o,M),b.push(o);for(var K=1;K<S;K++){var it=s.fixedBase(f*K+o,f);it<u&&b.push(it)}return b[b.length-1]<u&&b.push(u),{min:o,max:u,interval:f,count:S,ticks:b}}},function(E,T,e){var t=e(152),l=e(6),s=6,c=[1,2,4,6,8,12],r=60*1e3,h=3600*1e3,n=24*3600*1e3;function i(g){return new Date(g).getFullYear()}function a(g){return new Date(g,0,1).getTime()}function o(g){return new Date(g).getMonth()}function u(g,_){var M=i(g),x=i(_),m=o(g),S=o(_);return(x-M)*12+(S-m)%12}function f(g,_){return new Date(g,_,1).getTime()}function v(g,_){return Math.ceil((_-g)/n)}function b(g,_){return Math.ceil((_-g)/h)}function y(g,_){return Math.ceil((_-g)/(60*1e3))}E.exports=function(g){var _=g.minInterval,M=[],x=g.min,m=g.max,S=g.interval,P;if(m===x&&(m=x+n),l(S)){var A=m-x,O=n,R=365*O;S=parseInt(A/(g.maxCount||s),10),_&&_>S&&(S=_);var W=S/R,F=i(x);if(W>.51){for(var Z=Math.ceil(W),V=i(m),k=F;k<=V+Z;k=k+Z)M.push(a(k));S=null}else if(W>.0834){for(var Y=Math.ceil(W/.0834),K=o(x),it=u(x,m),ct=0;ct<=it+Y;ct=ct+Y)M.push(f(F,ct+K));S=null}else if(S>O*.5){var ht=new Date(x),ut=ht.getFullYear(),It=ht.getMonth(x),Nt=ht.getDate(),Lt=Math.ceil(S/O),_t=v(x,m);S=Lt*O;for(var mt=0;mt<_t+Lt;mt=mt+Lt)M.push(new Date(ut,It,Nt+mt).getTime())}else if(S>h){var At=new Date(x),rt=At.getFullYear(),Mt=At.getMonth(x),z=At.getDate(),$=At.getHours(),dt=t.snapTo(c,Math.ceil(S/h)),et=b(x,m);S=dt*h;for(var ot=0;ot<=et+dt;ot=ot+dt)M.push(new Date(rt,Mt,z,$+ot).getTime())}else if(S>r){var pt=y(x,m),H=Math.ceil(S/r);S=H*r;for(var nt=0;nt<=pt+H;nt=nt+H)M.push(x+nt*r)}else{S<1e3&&(S=1e3),x=Math.floor(x/1e3)*1e3;var at=Math.ceil((m-x)/1e3),q=Math.ceil(S/1e3);S=q*1e3;for(var Et=0;Et<at+q;Et=Et+q)M.push(x+Et*1e3)}}if(!M.length){x=Math.floor(x/1e3)*1e3,m=Math.ceil(m/1e3)*1e3,P=(m-x)/S;for(var vt=0;vt<=P;vt++)M.push(t.fixedBase(S*vt+x,S))}return{max:m,min:x,interval:S,ticks:M,count:M.length}}},function(E,T,e){function t(r,h){r.prototype=Object.create(h.prototype),r.prototype.constructor=r,r.__proto__=h}var l=e(26),s=e(11),c=function(r){t(h,r);function h(){return r.apply(this,arguments)||this}var n=h.prototype;return n._initDefaultCfg=function(){r.prototype._initDefaultCfg.call(this),this.isIdentity=!0,this.type="identity",this.value=null},n.getText=function(){return this.value.toString()},n.scale=function(a){return this.value!==a&&s(a)?a:this.range[0]},n.invert=function(){return this.value},h}(l);l.Identity=c,E.exports=c},function(E,T,e){function t(n,i){n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i}var l=e(2),s=e(26),c=e(51);function r(n,i){return n===1?1:Math.log(i)/Math.log(n)}var h=function(n){t(i,n);function i(){return n.apply(this,arguments)||this}var a=i.prototype;return a._initDefaultCfg=function(){n.prototype._initDefaultCfg.call(this),this.type="log",this.tickCount=10,this.base=2,this._minTick=null},a.calculateTicks=function(){var u=this,f=u.base,v;if(u.min<0)throw new Error("The minimum value must be greater than zero!");var b=r(f,u.max);if(u.min>0)v=Math.floor(r(f,u.min));else{var y=u.values,g=u.max;l(y,function(P){P>0&&P<g&&(g=P)}),g===u.max&&(g=u.max/f),g>1&&(g=1),v=Math.floor(r(f,g)),u._minTick=v,u.positiveMin=g}for(var _=b-v,M=u.tickCount,x=Math.ceil(_/M),m=[],S=v;S<b+x;S=S+x)m.push(Math.pow(f,S));return u.min===0&&m.unshift(0),m},a._getScalePercent=function(u){var f=this.max,v=this.min;if(f===v||u<=0)return 0;var b=this.base,y=this.positiveMin;y&&(v=y*1/b);var g;return u<y?g=u/y/(r(b,f)-r(b,v)):g=(r(b,u)-r(b,v))/(r(b,f)-r(b,v)),g},a.scale=function(u){var f=this._getScalePercent(u),v=this.rangeMin(),b=this.rangeMax();return v+f*(b-v)},a.invert=function(u){var f=this.base,v=r(f,this.max),b=this.rangeMin(),y=this.rangeMax()-b,g,_=this.positiveMin;if(_){if(u===0)return 0;g=r(f,_/f);var M=1/(v-g)*y;if(u<M)return u/M*_}else g=r(f,this.min);var x=(u-b)/y,m=x*(v-g)+g;return Math.pow(f,m)},i}(c);s.Log=h,E.exports=h},function(E,T,e){function t(h,n){h.prototype=Object.create(n.prototype),h.prototype.constructor=h,h.__proto__=n}var l=e(26),s=e(51);function c(h,n){var i=Math.E,a=Math.pow(i,Math.log(n)/h);return a}var r=function(h){t(n,h);function n(){return h.apply(this,arguments)||this}var i=n.prototype;return i._initDefaultCfg=function(){h.prototype._initDefaultCfg.call(this),this.type="pow",this.tickCount=10,this.exponent=2},i.calculateTicks=function(){var o=this,u=o.exponent,f,v=Math.ceil(c(u,o.max));if(o.min>=0?f=Math.floor(c(u,o.min)):f=0,f>v){var b=v;v=f,f=b}for(var y=v-f,g=o.tickCount,_=Math.ceil(y/g),M=[],x=f;x<v+_;x=x+_)M.push(Math.pow(x,u));return M},i._getScalePercent=function(o){var u=this.max,f=this.min;if(u===f)return 0;var v=this.exponent,b=(c(v,o)-c(v,f))/(c(v,u)-c(v,f));return b},i.scale=function(o){var u=this._getScalePercent(o),f=this.rangeMin(),v=this.rangeMax();return f+u*(v-f)},i.invert=function(o){var u=(o-this.rangeMin())/(this.rangeMax()-this.rangeMin()),f=this.exponent,v=c(f,this.max),b=c(f,this.min),y=u*(v-b)+b;return Math.pow(y,f)},n}(s);l.Pow=r,E.exports=r},function(E,T,e){function t(f,v){f.prototype=Object.create(v.prototype),f.prototype.constructor=f,f.__proto__=v}var l=e(26),s=e(153),c=e(222),r=e(151),h=e(52),n=e(2),i=e(11),a=e(39),o=e(15),u=function(f){t(v,f);function v(){return f.apply(this,arguments)||this}var b=v.prototype;return b._initDefaultCfg=function(){f.prototype._initDefaultCfg.call(this),this.type="timeCat",this.sortable=!0,this.tickCount=5,this.mask="YYYY-MM-DD"},b.init=function(){var g=this,_=this.values;n(_,function(M,x){_[x]=g._toTimeStamp(M)}),this.sortable&&_.sort(function(M,x){return M-x}),g.ticks||(g.ticks=this.calculateTicks())},b.calculateTicks=function(){var g=this,_=g.tickCount,M;if(_){var x=r({maxCount:_,data:g.values,isRounding:g.isRounding});M=x.ticks}else M=g.values;return M},b.translate=function(g){g=this._toTimeStamp(g);var _=this.values.indexOf(g);return _===-1&&(i(g)&&g<this.values.length?_=g:_=NaN),_},b.scale=function(g){var _=this.rangeMin(),M=this.rangeMax(),x=this.translate(g),m;return this.values.length===1||isNaN(x)?m=x:x>-1?m=x/(this.values.length-1):m=0,_+m*(M-_)},b.getText=function(g){var _="",M=this.translate(g);M>-1?_=this.values[M]:_=g;var x=this.formatter;return _=parseInt(_,10),_=x?x(_):c.format(_,this.mask),_},b.getTicks=function(){var g=this,_=this.ticks,M=[];return n(_,function(x){var m;a(x)?m=x:m={text:o(x)?x:g.getText(x),value:g.scale(x),tickValue:x},M.push(m)}),M},b._toTimeStamp=function(g){return h.toTimeStamp(g)},v}(s);l.TimeCat=u,E.exports=u},function(E,T,e){function t(u,f){u.prototype=Object.create(f.prototype),u.prototype.constructor=u,u.__proto__=f}var l=e(222),s=e(2),c=e(6),r=e(15),h=e(26),n=e(51),i=e(352),a=e(52),o=function(u){t(f,u);function f(){return u.apply(this,arguments)||this}var v=f.prototype;return v._initDefaultCfg=function(){u.prototype._initDefaultCfg.call(this),this.type="time",this.mask="YYYY-MM-DD"},v.init=function(){var y=this,g=y.values;if(g&&g.length){var _=[],M=Infinity,x=M,m=0;s(g,function(S){var P=y._toTimeStamp(S);if(isNaN(P))throw new TypeError("Invalid Time: "+S);M>P?(x=M,M=P):x>P&&(x=P),m<P&&(m=P),_.push(P)}),g.length>1&&(y.minTickInterval=x-M),(c(y.min)||y._toTimeStamp(y.min)>M)&&(y.min=M),(c(y.max)||y._toTimeStamp(y.max)<m)&&(y.max=m)}u.prototype.init.call(this)},v.calculateTicks=function(){var y=this,g=y.min,_=y.max,M=y.tickCount,x=y.tickInterval,m=i({min:g,max:_,minCount:M,maxCount:M,interval:x,minInterval:y.minTickInterval});return m.ticks},v.getText=function(y){var g=this.formatter;return y=this.translate(y),y=g?g(y):l.format(y,this.mask),y},v.scale=function(y){return r(y)&&(y=this.translate(y)),u.prototype.scale.call(this,y)},v.translate=function(y){return this._toTimeStamp(y)},v._toTimeStamp=function(y){return a.toTimeStamp(y)},f}(n);h.Time=o,E.exports=o},function(E,T,e){var t=e(82),l=e(53),s=function(r){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return t(r,function(n){return!l(h,n)})};E.exports=s},function(E,T,e){var t=e(14),l=e(40),s=e(177);function c(r,h){var n=void 0;if(t(h)&&(n=h),l(h)&&(n=function(o){return s(o,h)}),n){for(var i=0;i<r.length;i+=1)if(n(r[i]))return r[i]}return null}E.exports=c},function(E,T,e){var t=e(6),l=e(4),s=function(r,h){for(var n=null,i=0;i<r.length;i++){var a=r[i],o=a[h];if(!t(o)){l(o)?n=o[0]:n=o;break}}return n};E.exports=s},function(E,T,e){var t=e(4),l=function s(c){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(!t(c))r.push(c);else for(var h=0;h<c.length;h+=1)s(c[h],r);return r};E.exports=l},function(E,T,e){var t=e(4),l=e(2),s=function(r){if(!t(r))return r;var h=[];return l(r,function(n){t(n)?l(n,function(i){h.push(i)}):h.push(n)}),h};E.exports=s},function(E,T,e){var t=e(82),l=e(4),s=function(r){if(r=t(r,function(o){return!isNaN(o)}),!r.length)return{min:0,max:0};if(l(r[0])){for(var h=[],n=0;n<r.length;n++)h=h.concat(r[n]);r=h}var i=Math.max.apply(null,r),a=Math.min.apply(null,r);return{min:a,max:i}};E.exports=s},function(E,T,e){E.exports={contains:e(53),difference:e(358),find:e(359),firstValue:e(360),flatten:e(362),flattenDeep:e(361),getRange:e(363),merge:e(54),pull:e(156),pullAt:e(155),reduce:e(365),remove:e(366),sortBy:e(367),union:e(368),uniq:e(157),valuesOfKey:e(79)}},function(E,T,e){var t=e(4),l=e(40),s=e(2),c=function(h,n,i){if(!t(h)&&!l(h))return h;var a=i;return s(h,function(o,u){a=n(a,o,u)}),a};E.exports=c},function(E,T,e){var t=e(21),l=e(155),s=function(r,h){var n=[];if(!t(r))return n;for(var i=-1,a=[],o=r.length;++i<o;){var u=r[i];h(u,i,r)&&(n.push(u),a.push(i))}return l(r,a),n};E.exports=s},function(E,T,e){var t=e(15),l=e(14),s=e(4);function c(r,h){var n=void 0;if(l(h))n=function(o,u){return h(o)-h(u)};else{var i=[];t(h)?i.push(h):s(h)&&(i=h),n=function(o,u){for(var f=0;f<i.length;f+=1){var v=i[f];if(o[v]>u[v])return 1;if(o[v]<u[v])return-1}return 0}}return r.sort(n),r}E.exports=c},function(E,T,e){var t=e(2),l=e(57),s=e(157),c=function(){var h=[],n=l(arguments);return t(n,function(i){h=h.concat(i)}),s(h)};E.exports=c},function(E,T){function e(t,l,s){var c=void 0;return function(){var r=this,h=arguments,n=function(){c=null,s||t.apply(r,h)},i=s&&!c;clearTimeout(c),c=setTimeout(n,l),i&&t.apply(r,h)}}E.exports=e},function(E,T){E.exports=function(t,l,s){if(t){if(t.addEventListener)return t.addEventListener(l,s,!1),{remove:function(){t.removeEventListener(l,s,!1)}};if(t.attachEvent)return t.attachEvent("on"+l,s),{remove:function(){t.detachEvent("on"+l,s)}}}}},function(E,T){E.exports=function(t,l){if(t&&t.getBoundingClientRect){var s=t.getBoundingClientRect(),c=document.documentElement.clientTop,r=document.documentElement.clientLeft;return{top:s.top-c,bottom:s.bottom-c,left:s.left-r,right:s.right-r}}return l||null}},function(E,T){E.exports=function(t,l){var s=this.getStyle(t,"height",l);return s==="auto"&&(s=t.offsetHeight),parseFloat(s)}},function(E,T){E.exports=function(t,l){var s=this.getHeight(t,l),c=parseFloat(this.getStyle(t,"borderTopWidth"))||0,r=parseFloat(this.getStyle(t,"paddingTop"))||0,h=parseFloat(this.getStyle(t,"paddingBottom"))||0,n=parseFloat(this.getStyle(t,"borderBottomWidth"))||0;return s+c+n+r+h}},function(E,T){E.exports=function(t,l){var s=this.getWidth(t,l),c=parseFloat(this.getStyle(t,"borderLeftWidth"))||0,r=parseFloat(this.getStyle(t,"paddingLeft"))||0,h=parseFloat(this.getStyle(t,"paddingRight"))||0,n=parseFloat(this.getStyle(t,"borderRightWidth"))||0;return s+c+n+r+h}},function(E,T){E.exports=function(){return window.devicePixelRatio?window.devicePixelRatio:2}},function(E,T,e){var t=e(6);E.exports=function(s,c,r){try{return window.getComputedStyle?window.getComputedStyle(s,null)[c]:s.currentStyle[c]}catch(h){return t(r)?null:r}}},function(E,T){E.exports=function(t,l){var s=this.getStyle(t,"width",l);return s==="auto"&&(s=t.offsetWidth),parseFloat(s)}},function(E,T,e){E.exports={addEventListener:e(370),createDom:e(159),getBoundingClientRect:e(371),getHeight:e(372),getOuterHeight:e(373),getOuterWidth:e(374),getRatio:e(375),getStyle:e(376),getWidth:e(377),modifyCSS:e(160),requestAnimationFrame:e(161)}},function(E,T){function e(t,l){return t["_wrap_"+l]}E.exports=e},function(E,T,e){E.exports={getWrapBehavior:e(379),wrapBehavior:e(381)}},function(E,T){function e(t,l){if(t["_wrap_"+l])return t["_wrap_"+l];var s=function(r){t[l](r)};return t["_wrap_"+l]=s,s}E.exports=e},function(E,T,e){var t=e(383);E.exports={number2color:t,numberToColor:t,parsePath:e(384),parseRadius:e(385)}},function(E,T){var e={};E.exports=function(l){var s=e[l];if(!s){for(var c=l.toString(16),r=c.length;r<6;r++)c="0"+c;s="#"+c,e[l]=s}return s}},function(E,T,e){var t=e(4),l=e(15),s=e(2),c=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,r=/[^\s\,]+/ig;E.exports=function(n){if(n=n||[],t(n))return n;if(l(n))return n=n.match(c),s(n,function(i,a){if(i=i.match(r),i[0].length>1){var o=i[0].charAt(0);i.splice(1,0,i[0].substr(1)),i[0]=o}s(i,function(u,f){isNaN(u)||(i[f]=+u)}),n[a]=i}),n}},function(E,T,e){var t=e(4);E.exports=function(s){var c=0,r=0,h=0,n=0;return t(s)?s.length===1?c=r=h=n=s[0]:s.length===2?(c=h=s[0],r=n=s[1]):s.length===3?(c=s[0],r=n=s[1],h=s[2]):(c=s[0],r=s[1],h=s[2],n=s[3]):c=r=h=n=s,{r1:c,r2:r,r3:h,r4:n}}},function(E,T,e){var t=e(21),l=function(c,r){if(!t(c))return-1;var h=Array.prototype.indexOf;if(h)return h.call(c,r);for(var n=-1,i=0;i<c.length;i++)if(c[i]===r){n=i;break}return n};E.exports=l},function(E,T,e){var t=e(14),l=e(83),s=function(r,h,n){return t(n)?!!n(r,h):l(r,h)};E.exports=s},function(E,T,e){var t=e(2),l=e(21),s=function(r,h){if(!l(r))return r;var n=[];return t(r,function(i,a){n.push(h(i,a))}),n};E.exports=s},function(E,T){var e=function(l,s){var c=s.toString(),r=c.indexOf(".");if(r===-1)return Math.round(l);var h=c.substr(r+1).length;return h>20&&(h=20),parseFloat(l.toFixed(h))};E.exports=e},function(E,T,e){var t=e(55);E.exports={clamp:e(84),fixedBase:e(389),isDecimal:e(391),isEven:e(392),isInteger:e(393),isNegative:e(394),isNumberEqual:t,isOdd:e(395),isPositive:e(396),maxBy:e(168),minBy:e(397),mod:e(169),snapEqual:t,toDegree:e(170),toInt:e(171),toInteger:e(171),toRadian:e(172)}},function(E,T,e){var t=e(11),l=function(c){return t(c)&&c%1!=0};E.exports=l},function(E,T,e){var t=e(11),l=function(c){return t(c)&&c%2==0};E.exports=l},function(E,T,e){var t=e(11),l=Number.isInteger?Number.isInteger:function(s){return t(s)&&s%1==0};E.exports=l},function(E,T,e){var t=e(11),l=function(c){return t(c)&&c<0};E.exports=l},function(E,T,e){var t=e(11),l=function(c){return t(c)&&c%2!=0};E.exports=l},function(E,T,e){var t=e(11),l=function(c){return t(c)&&c>0};E.exports=l},function(E,T,e){var t=e(4),l=e(14),s=e(2),c=function(h,n){if(!!t(h)){var i=h[0],a=void 0;l(n)?a=n(h[0]):a=h[0][n];var o=void 0;return s(h,function(u){l(n)?o=n(u):o=u[n],o<a&&(i=u,a=o)}),i}};E.exports=c},function(E,T,e){E.exports=e(2)},function(E,T,e){E.exports=e(176)},function(E,T,e){var t=e(53),l=e(179);E.exports=function(s,c){return t(l(s),c)}},function(E,T,e){E.exports={forIn:e(398),has:e(176),hasKey:e(399),hasValue:e(400),keys:e(178),isMatch:e(177),values:e(179)}},function(E,T,e){var t=e(406);function l(c,r,h){var n=null,i=h;return r<i&&(i=r,n="add"),c<i&&(i=c,n="del"),{type:n,min:i}}var s=function(r,h){var n=r.length,i=h.length,a=void 0,o=void 0,u=0;if(n===0||i===0)return null;for(var f=[],v=0;v<=n;v++)f[v]=[],f[v][0]={min:v};for(var b=0;b<=i;b++)f[0][b]={min:b};for(var y=1;y<=n;y++){a=r[y-1];for(var g=1;g<=i;g++){o=h[g-1],t(a,o)?u=0:u=1;var _=f[y-1][g].min+1,M=f[y][g-1].min+1,x=f[y-1][g-1].min+u;f[y][g]=l(_,M,x)}}return f};E.exports=function(r,h){var n=s(r,h),i=r.length,a=h.length,o=[],u=1,f=1;if(n[i][a]!==i){for(var v=1;v<=i;v++){var b=n[v][v].min;f=v;for(var y=u;y<=a;y++)n[v][y].min<b&&(b=n[v][y].min,f=y);u=f,n[v][u].type&&o.push({index:v-1,type:n[v][u].type})}for(var g=o.length-1;g>=0;g--)u=o[g].index,o[g].type==="add"?r.splice(u,0,[].concat(r[u])):r.splice(u,1)}if(i=r.length,i<a)for(var _=0;_<a-i;_++)r[i-1][0]==="z"||r[i-1][0]==="Z"?r.splice(i-2,0,r[i-2]):r.push(r[i-1]);return r}},function(E,T){function e(s,c){var r=[],h=[];function n(i,a){if(i.length===1)r.push(i[0]),h.push(i[0]);else{for(var o=[],u=0;u<i.length-1;u++)u===0&&r.push(i[0]),u===i.length-2&&h.push(i[u+1]),o[u]=[(1-a)*i[u][0]+a*i[u+1][0],(1-a)*i[u][1]+a*i[u+1][1]];n(o,a)}}return s.length&&n(s,c),{left:r,right:h.reverse()}}function t(s,c,r){var h=[[s[1],s[2]]];r=r||2;var n=[];c[0]==="A"?(h.push(c[6]),h.push(c[7])):c[0]==="C"?(h.push([c[1],c[2]]),h.push([c[3],c[4]]),h.push([c[5],c[6]])):c[0]==="S"||c[0]==="Q"?(h.push([c[1],c[2]]),h.push([c[3],c[4]])):h.push([c[1],c[2]]);for(var i=h,a=1/r,o=0;o<r-1;o++){var u=a/(1-a*o),f=e(i,u);n.push(f.left),i=f.right}n.push(i);var v=n.map(function(b){var y=[];return b.length===4&&(y.push("C"),y=y.concat(b[2])),b.length>=3&&(b.length===3&&y.push("Q"),y=y.concat(b[1])),b.length===2&&y.push("L"),y=y.concat(b[b.length-1]),y});return v}function l(s,c,r){if(r===1)return[[].concat(s)];var h=[];if(c[0]==="L"||c[0]==="C"||c[0]==="Q")h=h.concat(t(s,c,r));else{var n=[].concat(s);n[0]==="M"&&(n[0]="L");for(var i=0;i<=r-1;i++)h.push(n)}return h}E.exports=function(c,r){if(c.length===1)return c;var h=c.length-1,n=r.length-1,i=h/n,a=[];if(c.length===1&&c[0][0]==="M"){for(var o=0;o<n-h;o++)c.push(c[0]);return c}for(var u=0;u<n;u++){var f=Math.floor(i*u);a[f]=(a[f]||0)+1}var v=a.reduce(function(b,y,g){return g===h?b.concat(c[h]):b.concat(l(c[g],c[g+1],y))},[]);return v.unshift(c[0]),(r[n]==="Z"||r[n]==="z")&&v.push("Z"),v}},function(E,T){function e(l){var s=[];switch(l[0]){case"M":s.push([l[1],l[2]]);break;case"L":s.push([l[1],l[2]]);break;case"A":s.push([l[6],l[7]]);break;case"Q":s.push([l[3],l[4]]),s.push([l[1],l[2]]);break;case"T":s.push([l[1],l[2]]);break;case"C":s.push([l[5],l[6]]),s.push([l[1],l[2]]),s.push([l[3],l[4]]);break;case"S":s.push([l[3],l[4]]),s.push([l[1],l[2]]);break;case"H":s.push([l[1],l[1]]);break;case"V":s.push([l[1],l[1]]);break;default:}return s}function t(l,s,c){for(var r=[].concat(l),h=void 0,n=1/(c+1),i=e(s)[0],a=1;a<=c;a++)n*=a,h=Math.floor(l.length*n),h===0?r.unshift([i[0]*n+l[h][0]*(1-n),i[1]*n+l[h][1]*(1-n)]):r.splice(h,0,[i[0]*n+l[h][0]*(1-n),i[1]*n+l[h][1]*(1-n)]);return r}E.exports=function(s,c){if(s.length<=1)return s;for(var r=void 0,h=0;h<c.length;h++)if(s[h][0]!==c[h][0])switch(r=e(s[h]),c[h][0]){case"M":s[h]=["M"].concat(r[0]);break;case"L":s[h]=["L"].concat(r[0]);break;case"A":s[h]=[].concat(c[h]),s[h][6]=r[0][0],s[h][7]=r[0][1];break;case"Q":if(r.length<2)if(h>0)r=t(r,s[h-1],1);else{s[h]=c[h];break}s[h]=["Q"].concat(r.reduce(function(n,i){return n.concat(i)},[]));break;case"T":s[h]=["T"].concat(r[0]);break;case"C":if(r.length<3)if(h>0)r=t(r,s[h-1],2);else{s[h]=c[h];break}s[h]=["C"].concat(r.reduce(function(n,i){return n.concat(i)},[]));break;case"S":if(r.length<2)if(h>0)r=t(r,s[h-1],1);else{s[h]=c[h];break}s[h]=["S"].concat(r.reduce(function(n,i){return n.concat(i)},[]));break;default:s[h]=c[h]}return s}},function(E,T,e){var t=e(407),l=e(183),s=e(184),c=e(180);E.exports={catmullRom2Bezier:c,catmullRomToBezier:c,fillPath:e(403),fillPathByDiff:e(402),formatPath:e(404),intersection:t,pathIntersection:t,parsePathArray:e(181),parsePathString:e(182),pathToAbsolute:l,path2absolute:l,pathTocurve:s,path2curve:s,rectPath:e(185)}},function(E,T,e){var t=e(2);E.exports=function(s,c){if(s.length!==c.length)return!1;var r=!0;return t(s,function(h,n){if(h!==c[n])return r=!1,!1}),r}},function(E,T,e){var t=e(4),l=e(185),s=e(184),c=function(g,_,M,x,m){var S=-3*_+9*M-9*x+3*m,P=g*S+6*_-12*M+6*x;return g*P-3*_+3*M},r=function(g,_,M,x,m,S,P,A,O){O===null&&(O=1),O=O>1?1:O<0?0:O;for(var R=O/2,W=12,F=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],Z=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],V=0,k=0;k<W;k++){var Y=R*F[k]+R,K=c(Y,g,M,m,P),it=c(Y,_,x,S,A),ct=K*K+it*it;V+=Z[k]*Math.sqrt(ct)}return R*V},h=function(g,_,M,x,m,S,P,A){for(var O=[],R=[[],[]],W=void 0,F=void 0,Z=void 0,V=void 0,k=0;k<2;++k){if(k===0?(F=6*g-12*M+6*m,W=-3*g+9*M-9*m+3*P,Z=3*M-3*g):(F=6*_-12*x+6*S,W=-3*_+9*x-9*S+3*A,Z=3*x-3*_),Math.abs(W)<1e-12){if(Math.abs(F)<1e-12)continue;V=-Z/F,V>0&&V<1&&O.push(V);continue}var Y=F*F-4*Z*W,K=Math.sqrt(Y);if(!(Y<0)){var it=(-F+K)/(2*W);it>0&&it<1&&O.push(it);var ct=(-F-K)/(2*W);ct>0&&ct<1&&O.push(ct)}}for(var ht=O.length,ut=ht,It=void 0;ht--;)V=O[ht],It=1-V,R[0][ht]=It*It*It*g+3*It*It*V*M+3*It*V*V*m+V*V*V*P,R[1][ht]=It*It*It*_+3*It*It*V*x+3*It*V*V*S+V*V*V*A;return R[0][ut]=g,R[1][ut]=_,R[0][ut+1]=P,R[1][ut+1]=A,R[0].length=R[1].length=ut+2,{min:{x:Math.min.apply(0,R[0]),y:Math.min.apply(0,R[1])},max:{x:Math.max.apply(0,R[0]),y:Math.max.apply(0,R[1])}}},n=function(g,_,M,x,m,S,P,A){if(!(Math.max(g,M)<Math.min(m,P)||Math.min(g,M)>Math.max(m,P)||Math.max(_,x)<Math.min(S,A)||Math.min(_,x)>Math.max(S,A))){var O=(g*x-_*M)*(m-P)-(g-M)*(m*A-S*P),R=(g*x-_*M)*(S-A)-(_-x)*(m*A-S*P),W=(g-M)*(S-A)-(_-x)*(m-P);if(!!W){var F=O/W,Z=R/W,V=+F.toFixed(2),k=+Z.toFixed(2);if(!(V<+Math.min(g,M).toFixed(2)||V>+Math.max(g,M).toFixed(2)||V<+Math.min(m,P).toFixed(2)||V>+Math.max(m,P).toFixed(2)||k<+Math.min(_,x).toFixed(2)||k>+Math.max(_,x).toFixed(2)||k<+Math.min(S,A).toFixed(2)||k>+Math.max(S,A).toFixed(2)))return{x:F,y:Z}}}},i=function(g,_,M){return _>=g.x&&_<=g.x+g.width&&M>=g.y&&M<=g.y+g.height},a=function(g,_,M,x){return g===null&&(g=_=M=x=0),_===null&&(_=g.y,M=g.width,x=g.height,g=g.x),{x:g,y:_,width:M,w:M,height:x,h:x,x2:g+M,y2:_+x,cx:g+M/2,cy:_+x/2,r1:Math.min(M,x)/2,r2:Math.max(M,x)/2,r0:Math.sqrt(M*M+x*x)/2,path:l(g,_,M,x),vb:[g,_,M,x].join(" ")}},o=function(g,_){return g=a(g),_=a(_),i(_,g.x,g.y)||i(_,g.x2,g.y)||i(_,g.x,g.y2)||i(_,g.x2,g.y2)||i(g,_.x,_.y)||i(g,_.x2,_.y)||i(g,_.x,_.y2)||i(g,_.x2,_.y2)||(g.x<_.x2&&g.x>_.x||_.x<g.x2&&_.x>g.x)&&(g.y<_.y2&&g.y>_.y||_.y<g.y2&&_.y>g.y)},u=function(g,_,M,x,m,S,P,A){t(g)||(g=[g,_,M,x,m,S,P,A]);var O=h.apply(null,g);return a(O.min.x,O.min.y,O.max.x-O.min.x,O.max.y-O.min.y)},f=function(g,_,M,x,m,S,P,A,O){var R=1-O,W=Math.pow(R,3),F=Math.pow(R,2),Z=O*O,V=Z*O,k=W*g+F*3*O*M+R*3*O*O*m+V*P,Y=W*_+F*3*O*x+R*3*O*O*S+V*A,K=g+2*O*(M-g)+Z*(m-2*M+g),it=_+2*O*(x-_)+Z*(S-2*x+_),ct=M+2*O*(m-M)+Z*(P-2*m+M),ht=x+2*O*(S-x)+Z*(A-2*S+x),ut=R*g+O*M,It=R*_+O*x,Nt=R*m+O*P,Lt=R*S+O*A,_t=90-Math.atan2(K-ct,it-ht)*180/Math.PI;return{x:k,y:Y,m:{x:K,y:it},n:{x:ct,y:ht},start:{x:ut,y:It},end:{x:Nt,y:Lt},alpha:_t}},v=function(g,_,M){var x=u(g),m=u(_);if(!o(x,m))return M?0:[];for(var S=r.apply(0,g),P=r.apply(0,_),A=~~(S/8),O=~~(P/8),R=[],W=[],F={},Z=M?0:[],V=0;V<A+1;V++){var k=f.apply(0,g.concat(V/A));R.push({x:k.x,y:k.y,t:V/A})}for(var Y=0;Y<O+1;Y++){var K=f.apply(0,_.concat(Y/O));W.push({x:K.x,y:K.y,t:Y/O})}for(var it=0;it<A;it++)for(var ct=0;ct<O;ct++){var ht=R[it],ut=R[it+1],It=W[ct],Nt=W[ct+1],Lt=Math.abs(ut.x-ht.x)<.001?"y":"x",_t=Math.abs(Nt.x-It.x)<.001?"y":"x",mt=n(ht.x,ht.y,ut.x,ut.y,It.x,It.y,Nt.x,Nt.y);if(mt){if(F[mt.x.toFixed(4)]===mt.y.toFixed(4))continue;F[mt.x.toFixed(4)]=mt.y.toFixed(4);var At=ht.t+Math.abs((mt[Lt]-ht[Lt])/(ut[Lt]-ht[Lt]))*(ut.t-ht.t),rt=It.t+Math.abs((mt[_t]-It[_t])/(Nt[_t]-It[_t]))*(Nt.t-It.t);At>=0&&At<=1&&rt>=0&&rt<=1&&(M?Z++:Z.push({x:mt.x,y:mt.y,t1:At,t2:rt}))}}return Z},b=function(g,_,M){g=s(g),_=s(_);for(var x=void 0,m=void 0,S=void 0,P=void 0,A=void 0,O=void 0,R=void 0,W=void 0,F=void 0,Z=void 0,V=M?0:[],k=0,Y=g.length;k<Y;k++){var K=g[k];if(K[0]==="M")x=A=K[1],m=O=K[2];else{K[0]==="C"?(F=[x,m].concat(K.slice(1)),x=F[6],m=F[7]):(F=[x,m,x,m,A,O,A,O],x=A,m=O);for(var it=0,ct=_.length;it<ct;it++){var ht=_[it];if(ht[0]==="M")S=R=ht[1],P=W=ht[2];else{ht[0]==="C"?(Z=[S,P].concat(ht.slice(1)),S=Z[6],P=Z[7]):(Z=[S,P,S,P,R,W,R,W],S=R,P=W);var ut=v(F,Z,M);if(M)V+=ut;else{for(var It=0,Nt=ut.length;It<Nt;It++)ut[It].segment1=k,ut[It].segment2=it,ut[It].bez1=F,ut[It].bez2=Z;V=V.concat(ut)}}}}}return V};E.exports=function(g,_){return b(g,_)}},function(E,T,e){var t=e(2),l=e(40),s=Object.prototype.hasOwnProperty,c=function(h,n){if(h===null||!l(h))return{};var i={};return t(n,function(a){s.call(h,a)&&(i[a]=h[a])}),i};E.exports=c},function(E,T,e){var t={lc:e(410),lowerCase:e(186),lowerFirst:e(187),substitute:e(411),uc:e(412),upperCase:e(188),upperFirst:e(189)};E.exports=t},function(E,T,e){E.exports=e(186)},function(E,T){var e=function(l,s){return!l||!s?l:l.replace(/\\?\{([^{}]+)\}/g,function(c,r){return c.charAt(0)==="\\"?c.slice(1):s[r]===void 0?"":s[r]})};E.exports=e},function(E,T,e){E.exports=e(188)},function(E,T){function e(t,l,s){var c=void 0,r=void 0,h=void 0,n=void 0,i=0;s||(s={});var a=function(){i=s.leading===!1?0:Date.now(),c=null,n=t.apply(r,h),c||(r=h=null)},o=function(){var f=Date.now();!i&&s.leading===!1&&(i=f);var v=l-(f-i);return r=this,h=arguments,v<=0||v>l?(c&&(clearTimeout(c),c=null),i=f,n=t.apply(r,h),c||(r=h=null)):!c&&s.trailing!==!1&&(c=setTimeout(a,v)),n};return o.cancel=function(){clearTimeout(c),i=0,c=r=h=null},o}E.exports=e},function(E,T,e){var t=e(17),l={getType:e(190),isArray:e(4),isArrayLike:e(21),isBoolean:e(191),isFunction:e(14),isNil:e(6),isNull:e(417),isNumber:e(11),isObject:e(39),isObjectLike:e(86),isPlainObject:e(40),isPrototype:e(193),isType:t,isUndefined:e(419),isString:e(15),isRegExp:e(418),isDate:e(192),isArguments:e(415),isError:e(416)};E.exports=l},function(E,T,e){var t=e(17),l=function(c){return t(c,"Arguments")};E.exports=l},function(E,T,e){var t=e(17),l=function(c){return t(c,"Error")};E.exports=l},function(E,T){var e=function(l){return l===null};E.exports=e},function(E,T,e){var t=e(17),l=function(c){return t(c,"RegExp")};E.exports=l},function(E,T){var e=function(l){return l===void 0};E.exports=e},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(24),l=s(t);function s(c){return c&&c.__esModule?c:{default:c}}T.default=l.default.generateBaseTypedComponent("Axis")},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(){function v(b,y){for(var g=0;g<y.length;g++){var _=y[g];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(b,_.key,_)}}return function(b,y,g){return y&&v(b.prototype,y),g&&v(b,g),b}}(),l=e(42),s=i(l),c=e(29),r=i(c),h=e(545),n=i(h);function i(v){return v&&v.__esModule?v:{default:v}}function a(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")}function o(v,b){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:v}function u(v,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);v.prototype=Object.create(b&&b.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(v,b):v.__proto__=b)}(0,n.default)(s.default.PureComponent,"`React.PureComponent` needs React >=15.3.0");var f=function(v){u(b,v);function b(){return a(this,b),o(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return t(b,[{key:"render",value:function(){var g=this.props,_=g.width,M=g.height,x=g.placeholder;return s.default.createElement("div",{style:{width:_,height:M}},x)}}]),b}(s.default.PureComponent||s.default.Component);f.propTypes={width:r.default.oneOfType([r.default.string,r.default.number]),height:r.default.oneOfType([r.default.string,r.default.number]),placeholder:r.default.node},f.defaultProps={width:"100%",placeholder:s.default.createElement("div",{style:{position:"relative",top:"48%",textAlign:"center"}},"\u6682\u65E0\u6570\u636E")},T.default=f},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=Object.assign||function(x){for(var m=1;m<arguments.length;m++){var S=arguments[m];for(var P in S)Object.prototype.hasOwnProperty.call(S,P)&&(x[P]=S[P])}return x},l=function(){function x(m,S){for(var P=0;P<S.length;P++){var A=S[P];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(m,A.key,A)}}return function(m,S,P){return S&&x(m.prototype,S),P&&x(m,P),m}}(),s=e(42),c=u(s),r=e(423),h=u(r),n=e(421),i=u(n),a=e(425),o=u(a);function u(x){return x&&x.__esModule?x:{default:x}}function f(x,m){var S={};for(var P in x)m.indexOf(P)>=0||!Object.prototype.hasOwnProperty.call(x,P)||(S[P]=x[P]);return S}function v(x,m){if(!(x instanceof m))throw new TypeError("Cannot call a class as a function")}function b(x,m){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:x}function y(x,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);x.prototype=Object.create(m&&m.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(x,m):x.__proto__=m)}function g(x){var m=!0;return(x==null||x.length===0||x.rows&&x.rows.length===0)&&(m=!1),!!m}var _=function(x){y(m,x);function m(){var S,P,A,O;v(this,m);for(var R=arguments.length,W=Array(R),F=0;F<R;F++)W[F]=arguments[F];return O=(P=(A=b(this,(S=m.__proto__||Object.getPrototypeOf(m)).call.apply(S,[this].concat(W))),A),A._refCallback=function(Z){Z&&(A.chart=Z.getG2Instance())},A.hasViewSource=function(){var Z=!1;return c.default.Children.map(A.props.children,function(V){!Z&&V&&typeof V.type=="function"&&V.type.name==="View"&&V.props.data&&g(V.props.data)&&(Z=!0)}),Z},P),b(A,O)}return l(m,[{key:"getG2Instance",value:function(){return this.chart}},{key:"render",value:function(){var P=this.props,A=P.data,O=P.width,R=P.height,W=P.placeholder,F=P.className,Z=P.style;return c.default.createElement("div",{className:F,style:Z},g(A)||this.hasViewSource()||!W?c.default.createElement(h.default,t({ref:this._refCallback},this.props)):c.default.createElement(i.default,{width:O,height:R,placeholder:W===!0?void 0:W}))}}]),m}(c.default.PureComponent||c.default.Component),M=function(x){y(m,x);function m(){return v(this,m),b(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return l(m,[{key:"render",value:function(){var P=this.props,A=P.widthErrorBoundary,O=f(P,["widthErrorBoundary"]);return A===!1?c.default.createElement(_,O):c.default.createElement(o.default,null,c.default.createElement(_,O))}}]),m}(c.default.Component);T.default=M},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=Object.assign||function(x){for(var m=1;m<arguments.length;m++){var S=arguments[m];for(var P in S)Object.prototype.hasOwnProperty.call(S,P)&&(x[P]=S[P])}return x},l=function(){function x(m,S){for(var P=0;P<S.length;P++){var A=S[P];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(m,A.key,A)}}return function(m,S,P){return S&&x(m.prototype,S),P&&x(m,P),m}}(),s=e(42),c=v(s),r=e(29),h=v(r),n=e(436),i=v(n),a=e(543),o=v(a),u=e(538),f=v(u);function v(x){return x&&x.__esModule?x:{default:x}}function b(x,m){if(!(x instanceof m))throw new TypeError("Cannot call a class as a function")}function y(x,m){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:x}function g(x,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);x.prototype=Object.create(m&&m.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(x,m):x.__proto__=m)}var _=function(x){g(m,x);function m(S){b(this,m);var P=y(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,S));return M.call(P),P.name="Chart",P.gId=0,P.id=P.createId(),P.g2Processor=new i.default,P.forceFit=(0,f.default)(function(){!P.chart||P.chart.forceFit()},300),P}return l(m,[{key:"getChildContext",value:function(){return{addElement:this.addElement,updateElement:this.updateElement,deleteElement:this.deleteElement,createId:this.createId,getParentInfo:this.getParentInfo,getViewId:this.getViewId}}},{key:"componentDidMount",value:function(){if(this.addElement(this.name,this.id,t({},this.props,{container:this.containerWrap})),this.chart=this.g2Processor.createG2Instance(),this.notifyG2Instance(),this.props.forceFit){var P=new o.default(this.forceFit);P.observe(this.containerWrap),this.observe=P}}},{key:"componentDidUpdate",value:function(){this.updateElement(this.name,this.id,t({},this.props,{container:this.containerWrap}));var P=this.g2Processor.batchedUpdate();this.chart!==P&&(this.chart=P,this.notifyG2Instance()),this.props.forceUpdate&&this.chart.forceFit()}},{key:"componentWillUnmount",value:function(){this.g2Processor.destory(),this.chart=null,this.forceFit&&this.forceFit.cancel(),this.observe&&this.observe.unobserve(this.containerWrap),this.containerWrap=null}},{key:"getG2Instance",value:function(){return this.chart}},{key:"notifyG2Instance",value:function(){this.props.onGetG2Instance&&this.props.onGetG2Instance(this.chart)}},{key:"render",value:function(){return c.default.createElement("div",{ref:this.refHandle},this.props.children)}}]),m}(s.Component);_.propTypes={data:h.default.oneOfType([h.default.arrayOf(h.default.object),h.default.object]),scale:h.default.oneOfType([h.default.object,h.default.array]),animate:h.default.bool,width:h.default.number,height:h.default.number.isRequired,onGetG2Instance:h.default.func,forceFit:h.default.bool,forceUpdate:h.default.bool},_.childContextTypes={addElement:h.default.func,updateElement:h.default.func,deleteElement:h.default.func,createId:h.default.func,getParentInfo:h.default.func,getViewId:h.default.func};var M=function(){var m=this;this.getViewId=function(){},this.getParentInfo=function(){return{id:m.id,name:m.name}},this.createId=function(){return m.gId+=1,m.gId},this.addElement=function(S,P,A,O,R){return m.g2Processor.addElement(S,P,A,O,R)},this.updateElement=function(S,P,A,O,R){m.g2Processor.updateElement(S,P,A,O,R)},this.deleteElement=function(S,P,A){m.g2Processor.deleteElement(S,P,A)},this.refHandle=function(S){m.containerWrap||(m.containerWrap=S)}};T.default=_},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(24),l=s(t);function s(c){return c&&c.__esModule?c:{default:c}}T.default=l.default.generateBaseTypedComponent("Coord")},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(){function a(o,u){for(var f=0;f<u.length;f++){var v=u[f];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(o,v.key,v)}}return function(o,u,f){return u&&a(o.prototype,u),f&&a(o,f),o}}(),l=e(42),s=c(l);function c(a){return a&&a.__esModule?a:{default:a}}function r(a,o){if(!(a instanceof o))throw new TypeError("Cannot call a class as a function")}function h(a,o){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&(typeof o=="object"||typeof o=="function")?o:a}function n(a,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof o);a.prototype=Object.create(o&&o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(a,o):a.__proto__=o)}var i=function(a){n(o,a);function o(u){r(this,o);var f=h(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,u));return f.state={hasError:!1},f}return t(o,[{key:"shouldComponentUpdate",value:function(){return this.state.hasError&&this.setState({hasError:!1}),!0}},{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"unstable_handleError",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?s.default.createElement("h1",null,"bizcharts error."):this.props.children}}]),o}(s.default.Component);T.default=i},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),e(285);var t=e(24),l=s(t);function s(c){return c&&c.__esModule?c:{default:c}}T.default=l.default.generateBaseTypedComponent("Facet")},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),e(292);var t=e(24),l=s(t);function s(c){return c&&c.__esModule?c:{default:c}}T.default=l.default.generateBaseTypedComponent("Geom")},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(24),l=s(t);function s(r){return r&&r.__esModule?r:{default:r}}var c=l.default.generateBaseTypedComponent("Guide");c.Line=l.default.generateBaseTypedComponent("GuideLine"),c.Image=l.default.generateBaseTypedComponent("GuideImage"),c.Text=l.default.generateBaseTypedComponent("GuideText"),c.Region=l.default.generateBaseTypedComponent("GuideRegion"),c.Html=l.default.generateBaseTypedComponent("GuideHtml"),c.Arc=l.default.generateBaseTypedComponent("GuideArc"),c.RegionFilter=l.default.generateBaseTypedComponent("GuideRegionFilter"),c.DataMarker=l.default.generateBaseTypedComponent("GuideDataMarker"),c.DataRegion=l.default.generateBaseTypedComponent("GuideDataRegion"),T.default=c},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(){function v(b,y){for(var g=0;g<y.length;g++){var _=y[g];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(b,_.key,_)}}return function(b,y,g){return y&&v(b.prototype,y),g&&v(b,g),b}}(),l=e(537),s=i(l),c=e(24),r=i(c),h=e(29),n=i(h);function i(v){return v&&v.__esModule?v:{default:v}}function a(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")}function o(v,b){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:v}function u(v,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);v.prototype=Object.create(b&&b.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(v,b):v.__proto__=b)}var f=function(v){u(b,v);function b(y){return a(this,b),o(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,y,"Label"))}return t(b,[{key:"componentWillMount",value:function(){var g=this.context.getParentInfo();(0,s.default)(g.name==="Geom","`<Label />` must be wrapped in `<Geom />`"),this.id=this.context.createId(),this.context.addElement(this.name,this.id,this.props,this.context.getParentInfo(),this.context.getViewId())}}]),b}(r.default);f.contextTypes={addElement:n.default.func,updateElement:n.default.func,deleteElement:n.default.func,createId:n.default.func,getParentInfo:n.default.func,getViewId:n.default.func},f.childContextTypes={addElement:n.default.func,updateElement:n.default.func,deleteElement:n.default.func,createId:n.default.func,getParentInfo:n.default.func,getViewId:n.default.func},T.default=f},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(24),l=r(t),s=e(29),c=r(s);function r(o){return o&&o.__esModule?o:{default:o}}function h(o,u){if(!(o instanceof u))throw new TypeError("Cannot call a class as a function")}function n(o,u){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:o}function i(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);o.prototype=Object.create(u&&u.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(o,u):o.__proto__=u)}var a=function(o){i(u,o);function u(f){return h(this,u),n(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,f,"Legend"))}return u}(l.default);a.contextTypes={addElement:c.default.func,updateElement:c.default.func,deleteElement:c.default.func,createId:c.default.func,getParentInfo:c.default.func,getViewId:c.default.func},a.childContextTypes={addElement:c.default.func,updateElement:c.default.func,deleteElement:c.default.func,createId:c.default.func,getParentInfo:c.default.func,getViewId:c.default.func},a.defaultProps={visible:!0},T.default=a},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(24),l=s(t);function s(c){return c&&c.__esModule?c:{default:c}}T.default=l.default.generateBaseTypedComponent("Tooltip")},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(){function u(f,v){for(var b=0;b<v.length;b++){var y=v[b];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(f,y.key,y)}}return function(f,v,b){return v&&u(f.prototype,v),b&&u(f,b),f}}(),l=e(24),s=h(l),c=e(29),r=h(c);function h(u){return u&&u.__esModule?u:{default:u}}function n(u,f){if(!(u instanceof f))throw new TypeError("Cannot call a class as a function")}function i(u,f){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:u}function a(u,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);u.prototype=Object.create(f&&f.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(u,f):u.__proto__=f)}var o=function(u){a(f,u);function f(v){n(this,f);var b=i(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,v,"View"));return b.getViewId=function(){return b.id},b}return t(f,[{key:"getChildContext",value:function(){return{addElement:this.context.addElement,updateElement:this.context.updateElement,deleteElement:this.context.deleteElement,createId:this.context.createId,getParentInfo:this.getParentInfo,getViewId:this.getViewId}}}]),f}(s.default);o.contextTypes={addElement:r.default.func,updateElement:r.default.func,deleteElement:r.default.func,createId:r.default.func,getParentInfo:r.default.func,getViewId:r.default.func},o.childContextTypes={addElement:r.default.func,updateElement:r.default.func,deleteElement:r.default.func,createId:r.default.func,getParentInfo:r.default.func,getViewId:r.default.func},T.default=o},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t={Chart:"addChart",Coord:"addCoord",Geom:"addGeom",Axis:"addAxis",Tooltip:"addTooltip",Legend:"addLegend",Label:"addLabel",View:"addView",Guide:"addGuide",GuideLine:"addGuideLine",GuideImage:"addGuideImage",GuideText:"addGuideText",GuideRegion:"addGuideRegion",GuideHtml:"addGuideHtml",GuideArc:"addGuideArc",GuideRegionFilter:"addGuideRegionFilter",GuideDataMarker:"addGuideDataMarker",GuideDataRegion:"addGuideDataRegion",Facet:"addFacet"},l={addElement:function(c,r,h){this[t[c]](r,h,h.id,h.viewId,h.parentInfo)},getConfigContainer:function(c,r){return r&&(c.views||(c.views={}),c=c.views[r],c||(c={},c.views[r]=c)),c},addUniqueElement:function(c,r,h,n,i){var a=this.getConfigContainer(c,i);return a[r],a[r]=h,n},addChart:function(c,r,h){return this.addUniqueElement(c,"chart",r,h,null)},addView:function(c,r,h){return c.views||(c.views={}),c.views[h]=r,h},addAxis:function(c,r,h,n){var i=this.getConfigContainer(c,n);return i.axises||(i.axises={}),i.axises[h]=r,h},addCoord:function(c,r,h,n){return this.addUniqueElement(c,"coord",r,h,n)},addGeom:function(c,r,h,n,i){var a=this.getConfigContainer(c,n);return a.geoms||(a.geoms={}),a.geoms[h]?i?a.geoms[h].label=r.label:(a.geoms[h].label||console.log("geom label error"),r.label=a.geoms[h].label,a.geoms[h]=r):a.geoms[h]=r,h},addLabel:function(c,r,h,n,i){var a=this.getConfigContainer(c,n);return a.geoms||(a.geoms={}),this.addGeom(c,{label:r},i.id,n,!0),h},addTooltip:function(c,r,h,n){return this.addUniqueElement(c,"tooltip",r,h,n)},addFacet:function(c,r,h,n){return this.addUniqueElement(c,"facet",r,h,n)},addLegend:function(c,r,h,n){var i=this.getConfigContainer(c,n);return i.legends||(i.legends={}),i.legends[h]=r,h},addGuide:function(c,r,h,n){return this.addUniqueElement(c,"guide",r,h,n)},addTypedGuide:function(c,r,h,n,i,a){var o=this.getConfigContainer(c,i),u=o.guide;return u||(this.addUniqueElement("guide",{},a.id,i),u=o.guide),u.elements||(u.elements={}),h.type=r,u.elements[n]=h,n},addGuideLine:function(c,r,h,n,i){this.addTypedGuide(c,"line",r,h,n,i)},addGuideImage:function(c,r,h,n,i){this.addTypedGuide(c,"image",r,h,n,i)},addGuideText:function(c,r,h,n,i){this.addTypedGuide(c,"text",r,h,n,i)},addGuideRegion:function(c,r,h,n,i){this.addTypedGuide(c,"region",r,h,n,i)},addGuideHtml:function(c,r,h,n,i){this.addTypedGuide(c,"html",r,h,n,i)},addGuideArc:function(c,r,h,n,i){this.addTypedGuide(c,"arc",r,h,n,i)},addGuideRegionFilter:function(c,r,h,n,i){this.addTypedGuide(c,"regionFilter",r,h,n,i)},addGuideDataMarker:function(c,r,h,n,i){this.addTypedGuide(c,"dataMarker",r,h,n,i)},addGuideDataRegion:function(c,r,h,n,i){this.addTypedGuide(c,"dataRegion",r,h,n,i)}};T.default=l},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function t(r){if(Array.isArray(r)){for(var h=0,n=Array(r.length);h<r.length;h++)n[h]=r[h];return n}else return Array.from(r)}var l={Chart:"deleteChart",Coord:"deleteCoord",Geom:"deleteGeom",Axis:"deleteAxis",Tooltip:"deleteTooltip",Legend:"deleteLegend",Label:"deleteLabel",View:"deleteView",Guide:"deleteGuide",GuideLine:"deleteTypedGuide",GuideImage:"deleteTypedGuide",GuideText:"deleteTypedGuide",GuideRegion:"deleteTypedGuide",GuideHtml:"deleteTypedGuide",GuideArc:"deleteTypedGuide",Facet:"deleteFacet"},s={Geom:!0,Label:!0,Facet:!0},c={deleteAxis:function(h,n,i){var a=n.axises[i].props;h.axis(a.name,!1)},deleteTooltip:function(h){h.tooltip(!1)},deleteCoord:function(h){h.coord("rect",{})},deleteLegend:function(h,n,i){var a=n.legends[i].props;h.legend.apply(h,t(a.name?[a.name,!1]:[!1]))},deleteGuide:function(h){h.guide().clear()},deleteView:function(h,n,i){!n.views[i].g2Instance||(h.removeView(n.views[i].g2Instance),delete n.views[i].g2Instance)},deleteViewElement:function(h,n,i,a){var o=this;Object.keys(i).forEach(function(u){var f=a[u],v=f.viewId;v&&(s[f.name]?n.views[v].needReExecute=!0:n.views[v].g2Instance&&o[l[f.name]]&&o[l[f.name]](n.views[v].g2Instance,n.views[v],f.id))})},needReExecute:function(h,n){for(var i in h)if(s[n[i].name]&&!n[i].viewId)return!0;return!1},synchronizeG2Delete:function(h,n,i,a){var o=this;Object.keys(i).forEach(function(u){var f=l[a[u].name];o[f]&&!a[u].viewId&&o[f](h,n,u)}),this.deleteViewElement(h,n,i,a)}};T.default=c},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=Object.assign||function(_){for(var M=1;M<arguments.length;M++){var x=arguments[M];for(var m in x)Object.prototype.hasOwnProperty.call(x,m)&&(_[m]=x[m])}return _},l=e(88),s=e(195),c=u(s),r=e(197),h=u(r),n=e(87),i=u(n),a=e(196),o=u(a);function u(_){return _&&_.__esModule?_:{default:_}}function f(_){if(Array.isArray(_)){for(var M=0,x=Array(_.length);M<_.length;M++)x[M]=_[M];return x}else return Array.from(_)}function v(_,M){var x={};for(var m in _)M.indexOf(m)>=0||!Object.prototype.hasOwnProperty.call(_,m)||(x[m]=_[m]);return x}var b=c.default.COORD_FUNC_PROPS,y=c.default.GEOM_FUNC_PROPS,g={needRebuildChart:function(M){if(M.chart.props==null||M.chart.updateProps==null)return!1;var x=M.chart.props,m=M.chart.updateProps;return!l.Util.shallowEqual(x.padding,m.padding)||!l.Util.shallowEqual(x.background,m.background)||!l.Util.shallowEqual(x.plotBackground,m.plotBackground)||!l.Util.shallowEqual(x.pixelRatio,m.pixelRatio)},needReExecute:function(M){var x=M.geoms;if(x==null)return!1;for(var m in x)if(x[m].props&&x[m].updateProps&&(x[m].props.type!==x[m].updateProps.type||x[m].props.color&&!x[m].updateProps.color||x[m].props.size&&!x[m].updateProps.size||x[m].props.shape&&!x[m].updateProps.shape))return!0;return!1},needRepaint:function(M){var x=M.chart,m=x.props.data,S=x.updateProps.data;return m===S},synchronizeG2Update:function(M,x){this.updateChart(M,x.chart),this.updateAxises(M,x.axises),this.updateTooltip(M,x),this.updateCoord(M,x),this.updateLegends(M,x.legends),this.updateGeoms(M,x.geoms),this.updateGuide(M,x.guide),this.updateFacet(M,x),this.updateViews(M,x)},updateChart:function(M,x){if(!!x){var m=x.props,S=x.updateProps,P=m.width,A=m.height,O=m.animate,R=m.data,W=m.scale,F=S.width,Z=S.height,V=S.animate,k=S.data,Y=S.scale;R!==k&&M.changeData(k),l.Util.shallowEqual(W,Y)||(l.Util.isArray(Y)?M.scale(Y[0],Y[1]):M.scale(Y)),O!==V&&M.animate(V),P!==F&&A!==Z?M.changeSize(F,Z):P!==F?M.changeWidth(F):A!==Z&&M.changeHeight(Z),o.default.updateEvents(M,o.default.chartEvents,x.props,S),o.default.updateBaseEvents(M,x.updateProps,S)}},updateAxis:function(M,x){var m=x.props,S=m.name,P=m.visible,A=v(m,["name","visible"]),O=x.updateProps,R=O.name,W=O.visible,F=v(O,["name","visible"]);P!==W&&M.axis(S,!!W),l.Util.shallowEqual(A,F)||M.axis(S,F)},updateAxises:function(M,x){if(!!x)for(var m in x)x[m]&&x[m].props&&x[m].updateProps&&this.updateAxis(M,x[m])},updateTooltip:function(M,x){if(!!x.tooltip){var m=x.tooltip.props,S=x.tooltip.updateProps;m==null&&S==null||l.Util.shallowEqual(m,S)||M.tooltip(t({},S))}},updateCoord:function(M,x){var m=x.coord;if(!!m){var S=m.props,P=m.updateProps;if(!(S==null||P==null)){var A=l.Util.without(P,b.concat(["type"]));if(!l.Util.shallowEqual(S,P)){var O=M.coord(P.type,A);m.g2Instance=O,l.Prop.init(b,P,function(R,W){W==="reflect"?l.Util.each(R,function(F){return O[W](F)}):W==="transpose"?R[0]===!0&&O[W].apply(O,f(R)):O[W].apply(O,f(R))})}}}},updateLegend:function(M,x){var m=x.props,S=x.updateProps;if(!!S&&!l.Util.shallowEqual(m,S)){var P=S.name,A=S.visible,O=v(S,["name","visible"]),R=A&&O;M.legend.apply(M,f(P?[P,R]:[R]))}},updateLegends:function(M,x){if(x!=null)for(var m in x)x[m]&&this.updateLegend(M,x[m])},updateLabel:function(M,x,m){if(!(x==null||m==null)){var S=x.content,P=v(x,["content"]),A=m.content,O=v(m,["content"]);(!l.Util.shallowEqual(P,O)||!l.Util.shallowEqual(S,A))&&(l.Util.isArray(A)?M.label(A[0],A[1],O):M.label(A,O))}},updateGeom:function(M,x){var m=x.props,S=x.updateProps;if(!(!m||!S)&&m.type===S.type){var P=x.g2Instance;if(l.Util.shallowEqual(m,S)){x.label&&this.updateLabel(P,x.label.props,x.label.updateProps);return}var A=m.adjust,O=v(m,["adjust"]),R=S.adjust,W=v(S,["adjust"]);(A||R)&&P.adjust(R),l.Prop.update(y,O,W,function(F,Z){P[Z].apply(P,f(F))}),x.label&&this.updateLabel(P,x.label.props,x.label.updateProps)}},updateGeoms:function(M,x){if(x==null)return!1;for(var m in x)x[m]&&this.updateGeom(M,x[m]);return!1},isTypedGuideChanged:function(M){return!l.Util.shallowEqual(M.props,M.updateProps)},updateGuide:function(M,x){if(!(!x||!x.elements)){var m=x.elements,S=!1;for(var P in m)if(m[P]&&(m[P].updateProps||this.isTypedGuideChanged(m[P]))){S=!0;break}S&&(i.default.mergeGuide(x,!0),M.guide().clear(),h.default.guide(M,x))}},updateView:function(M,x){if(!(!x||!x.props||!x.updateProps||x.parentInfo.name==="Facet")){var m=x.g2Instance,S=x.props,P=x.updateProps,A=S.scale,O=S.data,R=S.animate,W=S.axis,F=S.filter,Z=P.scale,V=P.animate,k=P.data,Y=P.axis,K=P.filter;R!==V&&m.animate(V),O!==k&&m.changeData(k),l.Util.shallowEqual(A,Z)||m.scale(Z),l.Util.shallowEqual(F,K)||K.forEach(function(it){m.filter(it[0],it[1])}),W!==Y&&m.axis(Y),this.updateCoord(m,x),this.updateAxises(m,x.axises),this.updateGeoms(m,x.geoms),this.updateGuide(m,x.guide)}},updateViews:function(M,x){var m=x.views;if(!!m)for(var S in m){var P=m[S];P&&(P.needReExecute||this.needReExecute(P))?(h.default.synchronizeG2View(P.g2Instance,P),m[S].needReExecute=!1):this.updateView(M,P)}},updateFacet:function(M,x){var m=x.facet;if(!!m){var S=m.props,P=m.updateProps;if(!(S==null||P==null)){var A=S.type,O=v(S,["type"]),R=P.type,W=v(P,["type"]);(A!==R||!l.Util.shallowEqual(O,W))&&(m.props=P,h.default.facet(M,x))}}}};T.default=g},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=Object.assign||function(M){for(var x=1;x<arguments.length;x++){var m=arguments[x];for(var S in m)Object.prototype.hasOwnProperty.call(m,S)&&(M[S]=m[S])}return M},l=function(){function M(x,m){for(var S=0;S<m.length;S++){var P=m[S];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(x,P.key,P)}}return function(x,m,S){return m&&M(x.prototype,m),S&&M(x,S),x}}(),s=e(433),c=b(s),r=e(87),h=b(r),n=e(435),i=b(n),a=e(434),o=b(a),u=e(197),f=b(u),v=e(88);function b(M){return M&&M.__esModule?M:{default:M}}function y(M,x){var m={};for(var S in M)x.indexOf(S)>=0||!Object.prototype.hasOwnProperty.call(M,S)||(m[S]=M[S]);return m}function g(M,x){if(!(M instanceof x))throw new TypeError("Cannot call a class as a function")}var _=function(){function M(){g(this,M),this.config={},this.elementInfos={},this.added=!1,this.initedG2=!1,this.updated=!1,this.deleted=!1,this.deleteInfos={}}return l(M,[{key:"calUpdateFlag",value:function(m,S){var P=this.elementInfos[S].props,A=P.children,O=y(P,["children"]),R=this.elementInfos[S].updateProps,W=R.children,F=y(R,["children"]);if(m==="Chart"||m==="View"){var Z=O.data,V=y(O,["data"]),k=F.data,Y=y(F,["data"]);(Z!==k||!v.Util.isEqual(V,Y))&&(this.updated=!0)}else v.Util.isEqual(O,F)||(this.updated=!0)}},{key:"addElement",value:function(m,S,P,A,O){!this.chart&&this.initedG2||(this.added=!0,this.elementInfos[S]={id:S,viewId:O,parentInfo:A,name:m,props:t({},P)},A&&!this.elementInfos[A.id]&&(this.elementInfos[A.id]={id:A.id,name:A.name}),c.default.addElement(m,this.config,this.elementInfos[S]))}},{key:"updateElement",value:function(m,S,P){this.elementInfos[S].updateProps=t({},P),this.calUpdateFlag(m,S)}},{key:"deleteElement",value:function(m,S){!this.chart||(this.deleteInfos[S]=S,this.deleted=!0)}},{key:"createG2Instance",value:function(){var m=this.config,S=f.default.createChart(m,this.elementInfos);return f.default.executeChartConfig(S,m,this.elementInfos),f.default.synchronizeG2Add(S,m,this.elementInfos),S.render(),this.chart=S,this.initedG2=!0,this.resetStates(),S}},{key:"destory",value:function(){this.chart.destroy(),this.chart=null}},{key:"resetStates",value:function(){var m=this.elementInfos;for(var S in m)m[S].updateProps&&delete m[S].updateProps,this.deleteInfos[S]&&delete m[S];this.added=!1,this.updated=!1,this.deleteInfos={}}},{key:"reExecuteChart",value:function(){return this.chart.clear(),h.default.merge(this.config,this.deleteInfos,this.elementInfos,!0),f.default.executeChartConfig(this.chart,this.config,this.elementInfos),f.default.synchronizeG2Add(this.chart,this.config,this.elementInfos),this.chart.repaint(),this.resetStates(),this.chart}},{key:"batchedUpdate",value:function(){return this.chart==null?null:this.config.chart.props.forceUpdate||i.default.needRebuildChart(this.config)?(h.default.merge(this.config,this.deleteInfos,this.elementInfos,!0),this.chart.destroy(),this.chart="destroy",this.createG2Instance()):o.default.needReExecute(this.deleteInfos,this.elementInfos)||i.default.needReExecute(this.config)?(this.reExecuteChart(),this.chart):(this.deleted&&(o.default.synchronizeG2Delete(this.chart,this.config,this.deleteInfos,this.elementInfos),h.default.mergeDelete(this.config,this.deleteInfos,this.elementInfos)),this.added&&f.default.synchronizeG2Add(this.chart,this.config),this.updated&&i.default.synchronizeG2Update(this.chart,this.config),(this.added||this.deleted||this.updated)&&this.chart.repaint(),h.default.mergeUpdate(this.config,!1),this.resetStates(),this.chart)}}]),M}();T.default=_},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(58),l=s(t);function s(c){return c&&c.__esModule?c:{default:c}}T.default={init:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},h=arguments[1],n=arguments[2];l.default.each(r,function(i){var a=h[i];a!==void 0&&(l.default.isArray(a)||(a=[a]),n(a,i))})},update:function(r,h,n,i){var a=void 0,o=void 0;l.default.each(r,function(u){a=h[u],o=n[u],l.default.shallowEqual(o,a)||(l.default.isArray(o)||(o=[o]),i(o,u))})}}},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default={}},function(E,T,e){"use strict";T.a=v;var t=e(90),l=e(89),s=e(198),c=-.14861,r=1.78277,h=-.29227,n=-.90649,i=1.97294,a=i*n,o=i*r,u=r*h-n*c;function f(y){if(y instanceof b)return new b(y.h,y.s,y.l,y.opacity);y instanceof l.a||(y=e.i(l.b)(y));var g=y.r/255,_=y.g/255,M=y.b/255,x=(u*M+a*g-o*_)/(u+a-o),m=M-x,S=(i*(_-x)-h*m)/n,P=Math.sqrt(S*S+m*m)/(i*x*(1-x)),A=P?Math.atan2(S,m)*s.a-120:NaN;return new b(A<0?A+360:A,P,x,y.opacity)}function v(y,g,_,M){return arguments.length===1?f(y):new b(y,g,_,M==null?1:M)}function b(y,g,_,M){this.h=+y,this.s=+g,this.l=+_,this.opacity=+M}e.i(t.a)(b,v,e.i(t.b)(l.c,{brighter:function(y){return y=y==null?l.d:Math.pow(l.d,y),new b(this.h,this.s,this.l*y,this.opacity)},darker:function(y){return y=y==null?l.e:Math.pow(l.e,y),new b(this.h,this.s,this.l*y,this.opacity)},rgb:function(){var y=isNaN(this.h)?0:(this.h+120)*s.b,g=+this.l,_=isNaN(this.s)?0:this.s*g*(1-g),M=Math.cos(y),x=Math.sin(y);return new l.a(255*(g+_*(c*M+r*x)),255*(g+_*(h*M+n*x)),255*(g+_*(i*M)),this.opacity)}}))},function(E,T,e){"use strict";T.b=b,T.a=P;var t=e(90),l=e(89),s=e(198),c=18,r=.96422,h=1,n=.82521,i=4/29,a=6/29,o=3*a*a,u=a*a*a;function f(R){if(R instanceof y)return new y(R.l,R.a,R.b,R.opacity);if(R instanceof A)return O(R);R instanceof l.a||(R=e.i(l.b)(R));var W=x(R.r),F=x(R.g),Z=x(R.b),V=g((.2225045*W+.7168786*F+.0606169*Z)/h),k,Y;return W===F&&F===Z?k=Y=V:(k=g((.4360747*W+.3850649*F+.1430804*Z)/r),Y=g((.0139322*W+.0971045*F+.7141733*Z)/n)),new y(116*V-16,500*(k-V),200*(V-Y),R.opacity)}function v(R,W){return new y(R,0,0,W==null?1:W)}function b(R,W,F,Z){return arguments.length===1?f(R):new y(R,W,F,Z==null?1:Z)}function y(R,W,F,Z){this.l=+R,this.a=+W,this.b=+F,this.opacity=+Z}e.i(t.a)(y,b,e.i(t.b)(l.c,{brighter:function(R){return new y(this.l+c*(R==null?1:R),this.a,this.b,this.opacity)},darker:function(R){return new y(this.l-c*(R==null?1:R),this.a,this.b,this.opacity)},rgb:function(){var R=(this.l+16)/116,W=isNaN(this.a)?R:R+this.a/500,F=isNaN(this.b)?R:R-this.b/200;return W=r*_(W),R=h*_(R),F=n*_(F),new l.a(M(3.1338561*W-1.6168667*R-.4906146*F),M(-.9787684*W+1.9161415*R+.033454*F),M(.0719453*W-.2289914*R+1.4052427*F),this.opacity)}}));function g(R){return R>u?Math.pow(R,1/3):R/o+i}function _(R){return R>a?R*R*R:o*(R-i)}function M(R){return 255*(R<=.0031308?12.92*R:1.055*Math.pow(R,1/2.4)-.055)}function x(R){return(R/=255)<=.04045?R/12.92:Math.pow((R+.055)/1.055,2.4)}function m(R){if(R instanceof A)return new A(R.h,R.c,R.l,R.opacity);if(R instanceof y||(R=f(R)),R.a===0&&R.b===0)return new A(NaN,0<R.l&&R.l<100?0:NaN,R.l,R.opacity);var W=Math.atan2(R.b,R.a)*s.a;return new A(W<0?W+360:W,Math.sqrt(R.a*R.a+R.b*R.b),R.l,R.opacity)}function S(R,W,F,Z){return arguments.length===1?m(R):new A(F,W,R,Z==null?1:Z)}function P(R,W,F,Z){return arguments.length===1?m(R):new A(R,W,F,Z==null?1:Z)}function A(R,W,F,Z){this.h=+R,this.c=+W,this.l=+F,this.opacity=+Z}function O(R){if(isNaN(R.h))return new y(R.l,0,0,R.opacity);var W=R.h*s.b;return new y(R.l,Math.cos(W)*R.c,Math.sin(W)*R.c,R.opacity)}e.i(t.a)(A,P,e.i(t.b)(l.c,{brighter:function(R){return new A(this.h,this.c,this.l+c*(R==null?1:R),this.opacity)},darker:function(R){return new A(this.h,this.c,this.l-c*(R==null?1:R),this.opacity)},rgb:function(){return O(this).rgb()}}))},function(E,T,e){"use strict";var t={value:function(){}};function l(){for(var n=0,i=arguments.length,a={},o;n<i;++n){if(!(o=arguments[n]+"")||o in a||/[\s.]/.test(o))throw new Error("illegal type: "+o);a[o]=[]}return new s(a)}function s(n){this._=n}function c(n,i){return n.trim().split(/^|\s+/).map(function(a){var o="",u=a.indexOf(".");if(u>=0&&(o=a.slice(u+1),a=a.slice(0,u)),a&&!i.hasOwnProperty(a))throw new Error("unknown type: "+a);return{type:a,name:o}})}s.prototype=l.prototype={constructor:s,on:function(n,i){var a=this._,o=c(n+"",a),u,f=-1,v=o.length;if(arguments.length<2){for(;++f<v;)if((u=(n=o[f]).type)&&(u=r(a[u],n.name)))return u;return}if(i!=null&&typeof i!="function")throw new Error("invalid callback: "+i);for(;++f<v;)if(u=(n=o[f]).type)a[u]=h(a[u],n.name,i);else if(i==null)for(u in a)a[u]=h(a[u],n.name,null);return this},copy:function(){var n={},i=this._;for(var a in i)n[a]=i[a].slice();return new s(n)},call:function(n,i){if((u=arguments.length-2)>0)for(var a=new Array(u),o=0,u,f;o<u;++o)a[o]=arguments[o+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(f=this._[n],o=0,u=f.length;o<u;++o)f[o].value.apply(i,a)},apply:function(n,i,a){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var o=this._[n],u=0,f=o.length;u<f;++u)o[u].value.apply(i,a)}};function r(n,i){for(var a=0,o=n.length,u;a<o;++a)if((u=n[a]).name===i)return u.value}function h(n,i,a){for(var o=0,u=n.length;o<u;++o)if(n[o].name===i){n[o]=t,n=n.slice(0,o).concat(n.slice(o+1));break}return a!=null&&n.push({name:i,value:a}),n}T.a=l},function(E,T,e){"use strict";var t=e(441);e.d(T,"a",function(){return t.a})},function(E,T,e){"use strict";e.d(T,"b",function(){return l}),e.d(T,"c",function(){return s}),e.d(T,"a",function(){return c});var t=1.70158,l=function r(h){h=+h;function n(i){return i*i*((h+1)*i-h)}return n.overshoot=r,n}(t),s=function r(h){h=+h;function n(i){return--i*i*((h+1)*i+h)+1}return n.overshoot=r,n}(t),c=function r(h){h=+h;function n(i){return((i*=2)<1?i*i*((h+1)*i-h):(i-=2)*i*((h+1)*i+h)+2)/2}return n.overshoot=r,n}(t)},function(E,T,e){"use strict";T.b=u,T.a=f,T.c=v;var t=4/11,l=6/11,s=8/11,c=3/4,r=9/11,h=10/11,n=15/16,i=21/22,a=63/64,o=1/t/t;function u(b){return 1-f(1-b)}function f(b){return(b=+b)<t?o*b*b:b<s?o*(b-=l)*b+c:b<h?o*(b-=r)*b+n:o*(b-=i)*b+a}function v(b){return((b*=2)<=1?1-f(1-b):f(b-1)+1)/2}},function(E,T,e){"use strict";T.b=t,T.c=l,T.a=s;function t(c){return 1-Math.sqrt(1-c*c)}function l(c){return Math.sqrt(1- --c*c)}function s(c){return((c*=2)<=1?1-Math.sqrt(1-c*c):Math.sqrt(1-(c-=2)*c)+1)/2}},function(E,T,e){"use strict";T.b=t,T.c=l,T.a=s;function t(c){return c*c*c}function l(c){return--c*c*c+1}function s(c){return((c*=2)<=1?c*c*c:(c-=2)*c*c+2)/2}},function(E,T,e){"use strict";e.d(T,"b",function(){return c}),e.d(T,"a",function(){return r}),e.d(T,"c",function(){return h});var t=2*Math.PI,l=1,s=.3,c=function n(i,a){var o=Math.asin(1/(i=Math.max(1,i)))*(a/=t);function u(f){return i*Math.pow(2,10*--f)*Math.sin((o-f)/a)}return u.amplitude=function(f){return n(f,a*t)},u.period=function(f){return n(i,f)},u}(l,s),r=function n(i,a){var o=Math.asin(1/(i=Math.max(1,i)))*(a/=t);function u(f){return 1-i*Math.pow(2,-10*(f=+f))*Math.sin((f+o)/a)}return u.amplitude=function(f){return n(f,a*t)},u.period=function(f){return n(i,f)},u}(l,s),h=function n(i,a){var o=Math.asin(1/(i=Math.max(1,i)))*(a/=t);function u(f){return((f=f*2-1)<0?i*Math.pow(2,10*f)*Math.sin((o-f)/a):2-i*Math.pow(2,-10*f)*Math.sin((o+f)/a))/2}return u.amplitude=function(f){return n(f,a*t)},u.period=function(f){return n(i,f)},u}(l,s)},function(E,T,e){"use strict";T.b=t,T.c=l,T.a=s;function t(c){return Math.pow(2,10*c-10)}function l(c){return 1-Math.pow(2,-10*c)}function s(c){return((c*=2)<=1?Math.pow(2,10*c-10):2-Math.pow(2,10-10*c))/2}},function(E,T,e){"use strict";T.a=t;function t(l){return+l}},function(E,T,e){"use strict";e.d(T,"b",function(){return l}),e.d(T,"c",function(){return s}),e.d(T,"a",function(){return c});var t=3,l=function r(h){h=+h;function n(i){return Math.pow(i,h)}return n.exponent=r,n}(t),s=function r(h){h=+h;function n(i){return 1-Math.pow(1-i,h)}return n.exponent=r,n}(t),c=function r(h){h=+h;function n(i){return((i*=2)<=1?Math.pow(i,h):2-Math.pow(2-i,h))/2}return n.exponent=r,n}(t)},function(E,T,e){"use strict";T.b=t,T.c=l,T.a=s;function t(c){return c*c}function l(c){return c*(2-c)}function s(c){return((c*=2)<=1?c*c:--c*(2-c)+1)/2}},function(E,T,e){"use strict";T.b=s,T.c=c,T.a=r;var t=Math.PI,l=t/2;function s(h){return 1-Math.cos(h*l)}function c(h){return Math.sin(h*l)}function r(h){return(1-Math.cos(t*h))/2}},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(92);e.d(T,"interpolate",function(){return t.a});var l=e(200);e.d(T,"interpolateArray",function(){return l.a});var s=e(91);e.d(T,"interpolateBasis",function(){return s.a});var c=e(201);e.d(T,"interpolateBasisClosed",function(){return c.a});var r=e(203);e.d(T,"interpolateDate",function(){return r.a});var h=e(59);e.d(T,"interpolateNumber",function(){return h.a});var n=e(204);e.d(T,"interpolateObject",function(){return n.a});var i=e(459);e.d(T,"interpolateRound",function(){return i.a});var a=e(206);e.d(T,"interpolateString",function(){return a.a});var o=e(461);e.d(T,"interpolateTransformCss",function(){return o.a}),e.d(T,"interpolateTransformSvg",function(){return o.b});var u=e(463);e.d(T,"interpolateZoom",function(){return u.a});var f=e(205);e.d(T,"interpolateRgb",function(){return f.a}),e.d(T,"interpolateRgbBasis",function(){return f.b}),e.d(T,"interpolateRgbBasisClosed",function(){return f.c});var v=e(456);e.d(T,"interpolateHsl",function(){return v.a}),e.d(T,"interpolateHslLong",function(){return v.b});var b=e(457);e.d(T,"interpolateLab",function(){return b.a});var y=e(455);e.d(T,"interpolateHcl",function(){return y.a}),e.d(T,"interpolateHclLong",function(){return y.b});var g=e(454);e.d(T,"interpolateCubehelix",function(){return g.a}),e.d(T,"interpolateCubehelixLong",function(){return g.b});var _=e(458);e.d(T,"quantize",function(){return _.a})},function(E,T,e){"use strict";e.d(T,"b",function(){return c});var t=e(12),l=e(41);function s(r){return function h(n){n=+n;function i(a,o){var u=r((a=e.i(t.a)(a)).h,(o=e.i(t.a)(o)).h),f=e.i(l.a)(a.s,o.s),v=e.i(l.a)(a.l,o.l),b=e.i(l.a)(a.opacity,o.opacity);return function(y){return a.h=u(y),a.s=f(y),a.l=v(Math.pow(y,n)),a.opacity=b(y),a+""}}return i.gamma=h,i}(1)}T.a=s(l.b);var c=s(l.a)},function(E,T,e){"use strict";e.d(T,"b",function(){return c});var t=e(12),l=e(41);function s(r){return function(h,n){var i=r((h=e.i(t.b)(h)).h,(n=e.i(t.b)(n)).h),a=e.i(l.a)(h.c,n.c),o=e.i(l.a)(h.l,n.l),u=e.i(l.a)(h.opacity,n.opacity);return function(f){return h.h=i(f),h.c=a(f),h.l=o(f),h.opacity=u(f),h+""}}}T.a=s(l.b);var c=s(l.a)},function(E,T,e){"use strict";e.d(T,"b",function(){return c});var t=e(12),l=e(41);function s(r){return function(h,n){var i=r((h=e.i(t.d)(h)).h,(n=e.i(t.d)(n)).h),a=e.i(l.a)(h.s,n.s),o=e.i(l.a)(h.l,n.l),u=e.i(l.a)(h.opacity,n.opacity);return function(f){return h.h=i(f),h.s=a(f),h.l=o(f),h.opacity=u(f),h+""}}}T.a=s(l.b);var c=s(l.a)},function(E,T,e){"use strict";T.a=s;var t=e(12),l=e(41);function s(c,r){var h=e.i(l.a)((c=e.i(t.c)(c)).l,(r=e.i(t.c)(r)).l),n=e.i(l.a)(c.a,r.a),i=e.i(l.a)(c.b,r.b),a=e.i(l.a)(c.opacity,r.opacity);return function(o){return c.l=h(o),c.a=n(o),c.b=i(o),c.opacity=a(o),c+""}}},function(E,T,e){"use strict";T.a=function(t,l){for(var s=new Array(l),c=0;c<l;++c)s[c]=t(c/(l-1));return s}},function(E,T,e){"use strict";T.a=function(t,l){return t=+t,l-=t,function(s){return Math.round(t+l*s)}}},function(E,T,e){"use strict";e.d(T,"a",function(){return l});var t=180/Math.PI,l={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};T.b=function(s,c,r,h,n,i){var a,o,u;return(a=Math.sqrt(s*s+c*c))&&(s/=a,c/=a),(u=s*r+c*h)&&(r-=s*u,h-=c*u),(o=Math.sqrt(r*r+h*h))&&(r/=o,h/=o,u/=o),s*h<c*r&&(s=-s,c=-c,u=-u,a=-a),{translateX:n,translateY:i,rotate:Math.atan2(c,s)*t,skewX:Math.atan(u)*t,scaleX:a,scaleY:o}}},function(E,T,e){"use strict";e.d(T,"a",function(){return c}),e.d(T,"b",function(){return r});var t=e(59),l=e(462);function s(h,n,i,a){function o(y){return y.length?y.pop()+" ":""}function u(y,g,_,M,x,m){if(y!==_||g!==M){var S=x.push("translate(",null,n,null,i);m.push({i:S-4,x:e.i(t.a)(y,_)},{i:S-2,x:e.i(t.a)(g,M)})}else(_||M)&&x.push("translate("+_+n+M+i)}function f(y,g,_,M){y!==g?(y-g>180?g+=360:g-y>180&&(y+=360),M.push({i:_.push(o(_)+"rotate(",null,a)-2,x:e.i(t.a)(y,g)})):g&&_.push(o(_)+"rotate("+g+a)}function v(y,g,_,M){y!==g?M.push({i:_.push(o(_)+"skewX(",null,a)-2,x:e.i(t.a)(y,g)}):g&&_.push(o(_)+"skewX("+g+a)}function b(y,g,_,M,x,m){if(y!==_||g!==M){var S=x.push(o(x)+"scale(",null,",",null,")");m.push({i:S-4,x:e.i(t.a)(y,_)},{i:S-2,x:e.i(t.a)(g,M)})}else(_!==1||M!==1)&&x.push(o(x)+"scale("+_+","+M+")")}return function(y,g){var _=[],M=[];return y=h(y),g=h(g),u(y.translateX,y.translateY,g.translateX,g.translateY,_,M),f(y.rotate,g.rotate,_,M),v(y.skewX,g.skewX,_,M),b(y.scaleX,y.scaleY,g.scaleX,g.scaleY,_,M),y=g=null,function(x){for(var m=-1,S=M.length,P;++m<S;)_[(P=M[m]).i]=P.x(x);return _.join("")}}}var c=s(l.a,"px, ","px)","deg)"),r=s(l.b,", ",")",")")},function(E,T,e){"use strict";T.a=h,T.b=n;var t=e(460),l,s,c,r;function h(i){return i==="none"?t.a:(l||(l=document.createElement("DIV"),s=document.documentElement,c=document.defaultView),l.style.transform=i,i=c.getComputedStyle(s.appendChild(l),null).getPropertyValue("transform"),s.removeChild(l),i=i.slice(7,-1).split(","),e.i(t.b)(+i[0],+i[1],+i[2],+i[3],+i[4],+i[5]))}function n(i){return i==null||(r||(r=document.createElementNS("http://www.w3.org/2000/svg","g")),r.setAttribute("transform",i),!(i=r.transform.baseVal.consolidate()))?t.a:(i=i.matrix,e.i(t.b)(i.a,i.b,i.c,i.d,i.e,i.f))}},function(E,T,e){"use strict";var t=Math.SQRT2,l=2,s=4,c=1e-12;function r(i){return((i=Math.exp(i))+1/i)/2}function h(i){return((i=Math.exp(i))-1/i)/2}function n(i){return((i=Math.exp(2*i))-1)/(i+1)}T.a=function(i,a){var o=i[0],u=i[1],f=i[2],v=a[0],b=a[1],y=a[2],g=v-o,_=b-u,M=g*g+_*_,x,m;if(M<c)m=Math.log(y/f)/t,x=function(W){return[o+W*g,u+W*_,f*Math.exp(t*W*m)]};else{var S=Math.sqrt(M),P=(y*y-f*f+s*M)/(2*f*l*S),A=(y*y-f*f-s*M)/(2*y*l*S),O=Math.log(Math.sqrt(P*P+1)-P),R=Math.log(Math.sqrt(A*A+1)-A);m=(R-O)/t,x=function(W){var F=W*m,Z=r(O),V=f/(l*S)*(Z*n(t*F+O)-h(O));return[o+V*g,u+V*_,f*Z/r(t*F+O)]}}return x.duration=m*1e3,x}},function(E,T,e){"use strict";var t=e(12),l=e(32);function s(h){return function n(i){i=+i;function a(o,u){var f=h((o=e.i(t.a)(o)).h,(u=e.i(t.a)(u)).h),v=e.i(l.a)(o.s,u.s),b=e.i(l.a)(o.l,u.l),y=e.i(l.a)(o.opacity,u.opacity);return function(g){return o.h=f(g),o.s=v(g),o.l=b(Math.pow(g,i)),o.opacity=y(g),o+""}}return a.gamma=n,a}(1)}var c=s(l.b),r=s(l.a)},function(E,T,e){"use strict";var t=function(l){var s=l.length;return function(c){return l[Math.max(0,Math.min(s-1,Math.floor(c*s)))]}}},function(E,T,e){"use strict";var t=e(12),l=e(32);function s(h){return function(n,i){var a=h((n=e.i(t.b)(n)).h,(i=e.i(t.b)(i)).h),o=e.i(l.a)(n.c,i.c),u=e.i(l.a)(n.l,i.l),f=e.i(l.a)(n.opacity,i.opacity);return function(v){return n.h=a(v),n.c=o(v),n.l=u(v),n.opacity=f(v),n+""}}}var c=s(l.b),r=s(l.a)},function(E,T,e){"use strict";var t=e(12),l=e(32);function s(h){return function(n,i){var a=h((n=e.i(t.d)(n)).h,(i=e.i(t.d)(i)).h),o=e.i(l.a)(n.s,i.s),u=e.i(l.a)(n.l,i.l),f=e.i(l.a)(n.opacity,i.opacity);return function(v){return n.h=a(v),n.s=o(v),n.l=u(v),n.opacity=f(v),n+""}}}var c=s(l.b),r=s(l.a)},function(E,T,e){"use strict";var t=e(32),l=function(s,c){var r=e.i(t.b)(+s,+c);return function(h){var n=r(h);return n-360*Math.floor(n/360)}}},function(E,T,e){"use strict";var t=e(12),l=e(32);function s(c,r){var h=e.i(l.a)((c=e.i(t.c)(c)).l,(r=e.i(t.c)(r)).l),n=e.i(l.a)(c.a,r.a),i=e.i(l.a)(c.b,r.b),a=e.i(l.a)(c.opacity,r.opacity);return function(o){return c.l=h(o),c.a=n(o),c.b=i(o),c.opacity=a(o),c+""}}},function(E,T,e){"use strict";function t(l,s){for(var c=0,r=s.length-1,h=s[0],n=new Array(r<0?0:r);c<r;)n[c]=l(h,h=s[++c]);return function(i){var a=Math.max(0,Math.min(r-1,Math.floor(i*=r)));return n[a](i-a)}}},function(E,T,e){"use strict";var t=function(l,s){for(var c=new Array(s),r=0;r<s;++r)c[r]=l(r/(s-1));return c}},function(E,T,e){"use strict";var t=function(l,s){return l=+l,s=+s,function(c){return Math.round(l*(1-c)+s*c)}}},function(E,T,e){"use strict";e.d(T,"a",function(){return l});var t=180/Math.PI,l={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};T.b=function(s,c,r,h,n,i){var a,o,u;return(a=Math.sqrt(s*s+c*c))&&(s/=a,c/=a),(u=s*r+c*h)&&(r-=s*u,h-=c*u),(o=Math.sqrt(r*r+h*h))&&(r/=o,h/=o,u/=o),s*h<c*r&&(s=-s,c=-c,u=-u,a=-a),{translateX:n,translateY:i,rotate:Math.atan2(c,s)*t,skewX:Math.atan(u)*t,scaleX:a,scaleY:o}}},function(E,T,e){"use strict";e.d(T,"a",function(){return c}),e.d(T,"b",function(){return r});var t=e(60),l=e(475);function s(h,n,i,a){function o(y){return y.length?y.pop()+" ":""}function u(y,g,_,M,x,m){if(y!==_||g!==M){var S=x.push("translate(",null,n,null,i);m.push({i:S-4,x:e.i(t.a)(y,_)},{i:S-2,x:e.i(t.a)(g,M)})}else(_||M)&&x.push("translate("+_+n+M+i)}function f(y,g,_,M){y!==g?(y-g>180?g+=360:g-y>180&&(y+=360),M.push({i:_.push(o(_)+"rotate(",null,a)-2,x:e.i(t.a)(y,g)})):g&&_.push(o(_)+"rotate("+g+a)}function v(y,g,_,M){y!==g?M.push({i:_.push(o(_)+"skewX(",null,a)-2,x:e.i(t.a)(y,g)}):g&&_.push(o(_)+"skewX("+g+a)}function b(y,g,_,M,x,m){if(y!==_||g!==M){var S=x.push(o(x)+"scale(",null,",",null,")");m.push({i:S-4,x:e.i(t.a)(y,_)},{i:S-2,x:e.i(t.a)(g,M)})}else(_!==1||M!==1)&&x.push(o(x)+"scale("+_+","+M+")")}return function(y,g){var _=[],M=[];return y=h(y),g=h(g),u(y.translateX,y.translateY,g.translateX,g.translateY,_,M),f(y.rotate,g.rotate,_,M),v(y.skewX,g.skewX,_,M),b(y.scaleX,y.scaleY,g.scaleX,g.scaleY,_,M),y=g=null,function(x){for(var m=-1,S=M.length,P;++m<S;)_[(P=M[m]).i]=P.x(x);return _.join("")}}}var c=s(l.a,"px, ","px)","deg)"),r=s(l.b,", ",")",")")},function(E,T,e){"use strict";T.a=h,T.b=n;var t=e(473),l,s,c,r;function h(i){return i==="none"?t.a:(l||(l=document.createElement("DIV"),s=document.documentElement,c=document.defaultView),l.style.transform=i,i=c.getComputedStyle(s.appendChild(l),null).getPropertyValue("transform"),s.removeChild(l),i=i.slice(7,-1).split(","),e.i(t.b)(+i[0],+i[1],+i[2],+i[3],+i[4],+i[5]))}function n(i){return i==null||(r||(r=document.createElementNS("http://www.w3.org/2000/svg","g")),r.setAttribute("transform",i),!(i=r.transform.baseVal.consolidate()))?t.a:(i=i.matrix,e.i(t.b)(i.a,i.b,i.c,i.d,i.e,i.f))}},function(E,T,e){"use strict";var t=Math.SQRT2,l=2,s=4,c=1e-12;function r(a){return((a=Math.exp(a))+1/a)/2}function h(a){return((a=Math.exp(a))-1/a)/2}function n(a){return((a=Math.exp(2*a))-1)/(a+1)}var i=function(a,o){var u=a[0],f=a[1],v=a[2],b=o[0],y=o[1],g=o[2],_=b-u,M=y-f,x=_*_+M*M,m,S;if(x<c)S=Math.log(g/v)/t,m=function(F){return[u+F*_,f+F*M,v*Math.exp(t*F*S)]};else{var P=Math.sqrt(x),A=(g*g-v*v+s*x)/(2*v*l*P),O=(g*g-v*v-s*x)/(2*g*l*P),R=Math.log(Math.sqrt(A*A+1)-A),W=Math.log(Math.sqrt(O*O+1)-O);S=(W-R)/t,m=function(F){var Z=F*S,V=r(R),k=v/(l*P)*(V*n(t*Z+R)-h(R));return[u+k*_,f+k*M,v*V/r(t*Z+R)]}}return m.duration=S*1e3,m}},function(E,T,e){"use strict";T.a=function(t){return function(){return t}}},function(E,T,e){"use strict";var t=e(61),l=e(215);T.a=function(s){return e.i(l.a)(e.i(t.a)(s).call(document.documentElement))}},function(E,T,e){"use strict";T.a=l;var t=0;function l(){return new s}function s(){this._="@"+(++t).toString(36)}s.prototype=l.prototype={constructor:s,get:function(c){for(var r=this._;!(r in c);)if(!(c=c.parentNode))return;return c[r]},set:function(c,r){return c[this._]=r},remove:function(c){return this._ in c&&delete c[this._]},toString:function(){return this._}}},function(E,T,e){"use strict";var t=e(101),l=e(62);T.a=function(s){var c=e.i(t.a)();return c.changedTouches&&(c=c.changedTouches[0]),e.i(l.a)(s,c)}},function(E,T,e){"use strict";var t=e(18);T.a=function(l){return typeof l=="string"?new t.b([document.querySelectorAll(l)],[document.documentElement]):new t.b([l==null?[]:l],t.c)}},function(E,T,e){"use strict";var t=e(61);T.a=function(l){var s=typeof l=="function"?l:e.i(t.a)(l);return this.select(function(){return this.appendChild(s.apply(this,arguments))})}},function(E,T,e){"use strict";var t=e(97);function l(i){return function(){this.removeAttribute(i)}}function s(i){return function(){this.removeAttributeNS(i.space,i.local)}}function c(i,a){return function(){this.setAttribute(i,a)}}function r(i,a){return function(){this.setAttributeNS(i.space,i.local,a)}}function h(i,a){return function(){var o=a.apply(this,arguments);o==null?this.removeAttribute(i):this.setAttribute(i,o)}}function n(i,a){return function(){var o=a.apply(this,arguments);o==null?this.removeAttributeNS(i.space,i.local):this.setAttributeNS(i.space,i.local,o)}}T.a=function(i,a){var o=e.i(t.a)(i);if(arguments.length<2){var u=this.node();return o.local?u.getAttributeNS(o.space,o.local):u.getAttribute(o)}return this.each((a==null?o.local?s:l:typeof a=="function"?o.local?n:h:o.local?r:c)(o,a))}},function(E,T,e){"use strict";T.a=function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}},function(E,T,e){"use strict";function t(a){return a.trim().split(/^|\s+/)}function l(a){return a.classList||new s(a)}function s(a){this._node=a,this._names=t(a.getAttribute("class")||"")}s.prototype={add:function(a){var o=this._names.indexOf(a);o<0&&(this._names.push(a),this._node.setAttribute("class",this._names.join(" ")))},remove:function(a){var o=this._names.indexOf(a);o>=0&&(this._names.splice(o,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(a){return this._names.indexOf(a)>=0}};function c(a,o){for(var u=l(a),f=-1,v=o.length;++f<v;)u.add(o[f])}function r(a,o){for(var u=l(a),f=-1,v=o.length;++f<v;)u.remove(o[f])}function h(a){return function(){c(this,a)}}function n(a){return function(){r(this,a)}}function i(a,o){return function(){(o.apply(this,arguments)?c:r)(this,a)}}T.a=function(a,o){var u=t(a+"");if(arguments.length<2){for(var f=l(this.node()),v=-1,b=u.length;++v<b;)if(!f.contains(u[v]))return!1;return!0}return this.each((typeof o=="function"?i:o?h:n)(u,o))}},function(E,T,e){"use strict";function t(){var s=this.cloneNode(!1),c=this.parentNode;return c?c.insertBefore(s,this.nextSibling):s}function l(){var s=this.cloneNode(!0),c=this.parentNode;return c?c.insertBefore(s,this.nextSibling):s}T.a=function(s){return this.select(s?l:t)}},function(E,T,e){"use strict";var t=e(18),l=e(216),s=e(477),c="$";function r(n,i,a,o,u,f){for(var v=0,b,y=i.length,g=f.length;v<g;++v)(b=i[v])?(b.__data__=f[v],o[v]=b):a[v]=new l.b(n,f[v]);for(;v<y;++v)(b=i[v])&&(u[v]=b)}function h(n,i,a,o,u,f,v){var b,y,g={},_=i.length,M=f.length,x=new Array(_),m;for(b=0;b<_;++b)(y=i[b])&&(x[b]=m=c+v.call(y,y.__data__,b,i),m in g?u[b]=y:g[m]=y);for(b=0;b<M;++b)m=c+v.call(n,f[b],b,f),(y=g[m])?(o[b]=y,y.__data__=f[b],g[m]=null):a[b]=new l.b(n,f[b]);for(b=0;b<_;++b)(y=i[b])&&g[x[b]]===y&&(u[b]=y)}T.a=function(n,i){if(!n)return m=new Array(this.size()),g=-1,this.each(function(V){m[++g]=V}),m;var a=i?h:r,o=this._parents,u=this._groups;typeof n!="function"&&(n=e.i(s.a)(n));for(var f=u.length,v=new Array(f),b=new Array(f),y=new Array(f),g=0;g<f;++g){var _=o[g],M=u[g],x=M.length,m=n.call(_,_&&_.__data__,g,o),S=m.length,P=b[g]=new Array(S),A=v[g]=new Array(S),O=y[g]=new Array(x);a(_,M,P,A,O,m,i);for(var R=0,W=0,F,Z;R<S;++R)if(F=P[R]){for(R>=W&&(W=R+1);!(Z=A[W])&&++W<S;);F._next=Z||null}}return v=new t.b(v,o),v._enter=b,v._exit=y,v}},function(E,T,e){"use strict";T.a=function(t){return arguments.length?this.property("__data__",t):this.node().__data__}},function(E,T,e){"use strict";var t=e(102);function l(r,h,n){var i=e.i(t.a)(r),a=i.CustomEvent;typeof a=="function"?a=new a(h,n):(a=i.document.createEvent("Event"),n?(a.initEvent(h,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(h,!1,!1)),r.dispatchEvent(a)}function s(r,h){return function(){return l(this,r,h)}}function c(r,h){return function(){return l(this,r,h.apply(this,arguments))}}T.a=function(r,h){return this.each((typeof h=="function"?c:s)(r,h))}},function(E,T,e){"use strict";T.a=function(t){for(var l=this._groups,s=0,c=l.length;s<c;++s)for(var r=l[s],h=0,n=r.length,i;h<n;++h)(i=r[h])&&t.call(i,i.__data__,h,r);return this}},function(E,T,e){"use strict";T.a=function(){return!this.node()}},function(E,T,e){"use strict";var t=e(217),l=e(18);T.a=function(){return new l.b(this._exit||this._groups.map(t.a),this._parents)}},function(E,T,e){"use strict";var t=e(18),l=e(214);T.a=function(s){typeof s!="function"&&(s=e.i(l.a)(s));for(var c=this._groups,r=c.length,h=new Array(r),n=0;n<r;++n)for(var i=c[n],a=i.length,o=h[n]=[],u,f=0;f<a;++f)(u=i[f])&&s.call(u,u.__data__,f,i)&&o.push(u);return new t.b(h,this._parents)}},function(E,T,e){"use strict";function t(){this.innerHTML=""}function l(c){return function(){this.innerHTML=c}}function s(c){return function(){var r=c.apply(this,arguments);this.innerHTML=r==null?"":r}}T.a=function(c){return arguments.length?this.each(c==null?t:(typeof c=="function"?s:l)(c)):this.node().innerHTML}},function(E,T,e){"use strict";var t=e(61),l=e(100);function s(){return null}T.a=function(c,r){var h=typeof c=="function"?c:e.i(t.a)(c),n=r==null?s:typeof r=="function"?r:e.i(l.a)(r);return this.select(function(){return this.insertBefore(h.apply(this,arguments),n.apply(this,arguments)||null)})}},function(E,T,e){"use strict";T.a=function(t,l,s){var c=this.enter(),r=this,h=this.exit();return c=typeof t=="function"?t(c):c.append(t+""),l!=null&&(r=l(r)),s==null?h.remove():s(h),c&&r?c.merge(r).order():r}},function(E,T,e){"use strict";function t(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}T.a=function(){return this.each(t)}},function(E,T,e){"use strict";var t=e(18);T.a=function(l){for(var s=this._groups,c=l._groups,r=s.length,h=c.length,n=Math.min(r,h),i=new Array(r),a=0;a<n;++a)for(var o=s[a],u=c[a],f=o.length,v=i[a]=new Array(f),b,y=0;y<f;++y)(b=o[y]||u[y])&&(v[y]=b);for(;a<r;++a)i[a]=s[a];return new t.b(i,this._parents)}},function(E,T,e){"use strict";T.a=function(){for(var t=this._groups,l=0,s=t.length;l<s;++l)for(var c=t[l],r=0,h=c.length;r<h;++r){var n=c[r];if(n)return n}return null}},function(E,T,e){"use strict";T.a=function(){var t=new Array(this.size()),l=-1;return this.each(function(){t[++l]=this}),t}},function(E,T,e){"use strict";T.a=function(){for(var t=this._groups,l=-1,s=t.length;++l<s;)for(var c=t[l],r=c.length-1,h=c[r],n;--r>=0;)(n=c[r])&&(h&&n.compareDocumentPosition(h)^4&&h.parentNode.insertBefore(n,h),h=n);return this}},function(E,T,e){"use strict";function t(c){return function(){delete this[c]}}function l(c,r){return function(){this[c]=r}}function s(c,r){return function(){var h=r.apply(this,arguments);h==null?delete this[c]:this[c]=h}}T.a=function(c,r){return arguments.length>1?this.each((r==null?t:typeof r=="function"?s:l)(c,r)):this.node()[c]}},function(E,T,e){"use strict";function t(){this.nextSibling&&this.parentNode.appendChild(this)}T.a=function(){return this.each(t)}},function(E,T,e){"use strict";function t(){var l=this.parentNode;l&&l.removeChild(this)}T.a=function(){return this.each(t)}},function(E,T,e){"use strict";var t=e(18),l=e(100);T.a=function(s){typeof s!="function"&&(s=e.i(l.a)(s));for(var c=this._groups,r=c.length,h=new Array(r),n=0;n<r;++n)for(var i=c[n],a=i.length,o=h[n]=new Array(a),u,f,v=0;v<a;++v)(u=i[v])&&(f=s.call(u,u.__data__,v,i))&&("__data__"in u&&(f.__data__=u.__data__),o[v]=f);return new t.b(h,this._parents)}},function(E,T,e){"use strict";var t=e(18),l=e(219);T.a=function(s){typeof s!="function"&&(s=e.i(l.a)(s));for(var c=this._groups,r=c.length,h=[],n=[],i=0;i<r;++i)for(var a=c[i],o=a.length,u,f=0;f<o;++f)(u=a[f])&&(h.push(s.call(u,u.__data__,f,a)),n.push(u));return new t.b(h,n)}},function(E,T,e){"use strict";T.a=function(){var t=0;return this.each(function(){++t}),t}},function(E,T,e){"use strict";var t=e(18);T.a=function(s){s||(s=l);function c(b,y){return b&&y?s(b.__data__,y.__data__):!b-!y}for(var r=this._groups,h=r.length,n=new Array(h),i=0;i<h;++i){for(var a=r[i],o=a.length,u=n[i]=new Array(o),f,v=0;v<o;++v)(f=a[v])&&(u[v]=f);u.sort(c)}return new t.b(n,this._parents).order()};function l(s,c){return s<c?-1:s>c?1:s>=c?0:NaN}},function(E,T,e){"use strict";function t(){this.textContent=""}function l(c){return function(){this.textContent=c}}function s(c){return function(){var r=c.apply(this,arguments);this.textContent=r==null?"":r}}T.a=function(c){return arguments.length?this.each(c==null?t:(typeof c=="function"?s:l)(c)):this.node().textContent}},function(E,T,e){"use strict";var t=e(101),l=e(62);T.a=function(s,c,r){arguments.length<3&&(r=c,c=e.i(t.a)().changedTouches);for(var h=0,n=c?c.length:0,i;h<n;++h)if((i=c[h]).identifier===r)return e.i(l.a)(s,i);return null}},function(E,T,e){"use strict";var t=e(101),l=e(62);T.a=function(s,c){c==null&&(c=e.i(t.a)().touches);for(var r=0,h=c?c.length:0,n=new Array(h);r<h;++r)n[r]=e.i(l.a)(s,c[r]);return n}},function(E,T,e){"use strict";var t=e(104);T.a=function(l,s,c){var r=new t.d,h=s;return s==null?(r.restart(l,s,c),r):(s=+s,c=c==null?e.i(t.a)():+c,r.restart(function n(i){i+=h,r.restart(n,h+=s,c),l(i)},s,c),r)}},function(E,T,e){"use strict";var t=e(104);T.a=function(l,s,c){var r=new t.d;return s=s==null?0:+s,r.restart(function(h){r.stop(),l(h+s)},s,c),r}},function(E,T,e){"use strict";var t=e(27),l=e(13),s=[null];T.a=function(c,r){var h=c.__transition,n,i;if(h){r=r==null?null:r+"";for(i in h)if((n=h[i]).state>l.d&&n.name===r)return new t.b([[c]],s,r,+i)}return null}},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(516),l=e(27);e.d(T,"transition",function(){return l.a});var s=e(514);e.d(T,"active",function(){return s.a});var c=e(220);e.d(T,"interrupt",function(){return c.a})},function(E,T,e){"use strict";var t=e(22),l=e(517),s=e(518);t.selection.prototype.interrupt=l.a,t.selection.prototype.transition=s.a},function(E,T,e){"use strict";var t=e(220);T.a=function(l){return this.each(function(){e.i(t.a)(this,l)})}},function(E,T,e){"use strict";var t=e(27),l=e(13),s=e(199),c=e(103),r={time:null,delay:0,duration:250,ease:s.easeCubicInOut};function h(n,i){for(var a;!(a=n.__transition)||!(a=a[i]);)if(!(n=n.parentNode))return r.time=e.i(c.now)(),r;return a}T.a=function(n){var i,a;n instanceof t.b?(i=n._id,n=n._name):(i=e.i(t.c)(),(a=r).time=e.i(c.now)(),n=n==null?null:n+"");for(var o=this._groups,u=o.length,f=0;f<u;++f)for(var v=o[f],b=v.length,y,g=0;g<b;++g)(y=v[g])&&e.i(l.h)(y,n,i,g,v,a||h(y,i));return new t.b(o,this._parents,n,i)}},function(E,T,e){"use strict";var t=e(94),l=e(22),s=e(63),c=e(221);function r(u){return function(){this.removeAttribute(u)}}function h(u){return function(){this.removeAttributeNS(u.space,u.local)}}function n(u,f,v){var b,y=v+"",g;return function(){var _=this.getAttribute(u);return _===y?null:_===b?g:g=f(b=_,v)}}function i(u,f,v){var b,y=v+"",g;return function(){var _=this.getAttributeNS(u.space,u.local);return _===y?null:_===b?g:g=f(b=_,v)}}function a(u,f,v){var b,y,g;return function(){var _,M=v(this),x;return M==null?void this.removeAttribute(u):(_=this.getAttribute(u),x=M+"",_===x?null:_===b&&x===y?g:(y=x,g=f(b=_,M)))}}function o(u,f,v){var b,y,g;return function(){var _,M=v(this),x;return M==null?void this.removeAttributeNS(u.space,u.local):(_=this.getAttributeNS(u.space,u.local),x=M+"",_===x?null:_===b&&x===y?g:(y=x,g=f(b=_,M)))}}T.a=function(u,f){var v=e.i(l.namespace)(u),b=v==="transform"?t.e:c.a;return this.attrTween(u,typeof f=="function"?(v.local?o:a)(v,b,e.i(s.b)(this,"attr."+u,f)):f==null?(v.local?h:r)(v):(v.local?i:n)(v,b,f))}},function(E,T,e){"use strict";var t=e(22);function l(h,n){return function(i){this.setAttribute(h,n.call(this,i))}}function s(h,n){return function(i){this.setAttributeNS(h.space,h.local,n.call(this,i))}}function c(h,n){var i,a;function o(){var u=n.apply(this,arguments);return u!==a&&(i=(a=u)&&s(h,u)),i}return o._value=n,o}function r(h,n){var i,a;function o(){var u=n.apply(this,arguments);return u!==a&&(i=(a=u)&&l(h,u)),i}return o._value=n,o}T.a=function(h,n){var i="attr."+h;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(n==null)return this.tween(i,null);if(typeof n!="function")throw new Error;var a=e.i(t.namespace)(h);return this.tween(i,(a.local?c:r)(a,n))}},function(E,T,e){"use strict";var t=e(13);function l(c,r){return function(){e.i(t.g)(this,c).delay=+r.apply(this,arguments)}}function s(c,r){return r=+r,function(){e.i(t.g)(this,c).delay=r}}T.a=function(c){var r=this._id;return arguments.length?this.each((typeof c=="function"?l:s)(r,c)):e.i(t.f)(this.node(),r).delay}},function(E,T,e){"use strict";var t=e(13);function l(c,r){return function(){e.i(t.e)(this,c).duration=+r.apply(this,arguments)}}function s(c,r){return r=+r,function(){e.i(t.e)(this,c).duration=r}}T.a=function(c){var r=this._id;return arguments.length?this.each((typeof c=="function"?l:s)(r,c)):e.i(t.f)(this.node(),r).duration}},function(E,T,e){"use strict";var t=e(13);function l(s,c){if(typeof c!="function")throw new Error;return function(){e.i(t.e)(this,s).ease=c}}T.a=function(s){var c=this._id;return arguments.length?this.each(l(c,s)):e.i(t.f)(this.node(),c).ease}},function(E,T,e){"use strict";var t=e(13);T.a=function(){var l,s,c=this,r=c._id,h=c.size();return new Promise(function(n,i){var a={value:i},o={value:function(){--h==0&&n()}};c.each(function(){var u=e.i(t.e)(this,r),f=u.on;f!==l&&(s=(l=f).copy(),s._.cancel.push(a),s._.interrupt.push(a),s._.end.push(o)),u.on=s})})}},function(E,T,e){"use strict";var t=e(22),l=e(27);T.a=function(s){typeof s!="function"&&(s=e.i(t.matcher)(s));for(var c=this._groups,r=c.length,h=new Array(r),n=0;n<r;++n)for(var i=c[n],a=i.length,o=h[n]=[],u,f=0;f<a;++f)(u=i[f])&&s.call(u,u.__data__,f,i)&&o.push(u);return new l.b(h,this._parents,this._name,this._id)}},function(E,T,e){"use strict";var t=e(27);T.a=function(l){if(l._id!==this._id)throw new Error;for(var s=this._groups,c=l._groups,r=s.length,h=c.length,n=Math.min(r,h),i=new Array(r),a=0;a<n;++a)for(var o=s[a],u=c[a],f=o.length,v=i[a]=new Array(f),b,y=0;y<f;++y)(b=o[y]||u[y])&&(v[y]=b);for(;a<r;++a)i[a]=s[a];return new t.b(i,this._parents,this._name,this._id)}},function(E,T,e){"use strict";var t=e(13);function l(c){return(c+"").trim().split(/^|\s+/).every(function(r){var h=r.indexOf(".");return h>=0&&(r=r.slice(0,h)),!r||r==="start"})}function s(c,r,h){var n,i,a=l(r)?t.g:t.e;return function(){var o=a(this,c),u=o.on;u!==n&&(i=(n=u).copy()).on(r,h),o.on=i}}T.a=function(c,r){var h=this._id;return arguments.length<2?e.i(t.f)(this.node(),h).on.on(c):this.each(s(h,c,r))}},function(E,T,e){"use strict";function t(l){return function(){var s=this.parentNode;for(var c in this.__transition)if(+c!==l)return;s&&s.removeChild(this)}}T.a=function(){return this.on("end.remove",t(this._id))}},function(E,T,e){"use strict";var t=e(22),l=e(27),s=e(13);T.a=function(c){var r=this._name,h=this._id;typeof c!="function"&&(c=e.i(t.selector)(c));for(var n=this._groups,i=n.length,a=new Array(i),o=0;o<i;++o)for(var u=n[o],f=u.length,v=a[o]=new Array(f),b,y,g=0;g<f;++g)(b=u[g])&&(y=c.call(b,b.__data__,g,u))&&("__data__"in b&&(y.__data__=b.__data__),v[g]=y,e.i(s.h)(v[g],r,h,g,v,e.i(s.f)(b,h)));return new l.b(a,this._parents,r,h)}},function(E,T,e){"use strict";var t=e(22),l=e(27),s=e(13);T.a=function(c){var r=this._name,h=this._id;typeof c!="function"&&(c=e.i(t.selectorAll)(c));for(var n=this._groups,i=n.length,a=[],o=[],u=0;u<i;++u)for(var f=n[u],v=f.length,b,y=0;y<v;++y)if(b=f[y]){for(var g=c.call(b,b.__data__,y,f),_,M=e.i(s.f)(b,h),x=0,m=g.length;x<m;++x)(_=g[x])&&e.i(s.h)(_,r,h,x,g,M);a.push(g),o.push(b)}return new l.b(a,o,r,h)}},function(E,T,e){"use strict";var t=e(22),l=t.selection.prototype.constructor;T.a=function(){return new l(this._groups,this._parents)}},function(E,T,e){"use strict";var t=e(94),l=e(22),s=e(13),c=e(63),r=e(221);function h(u,f){var v,b,y;return function(){var g=e.i(l.style)(this,u),_=(this.style.removeProperty(u),e.i(l.style)(this,u));return g===_?null:g===v&&_===b?y:y=f(v=g,b=_)}}function n(u){return function(){this.style.removeProperty(u)}}function i(u,f,v){var b,y=v+"",g;return function(){var _=e.i(l.style)(this,u);return _===y?null:_===b?g:g=f(b=_,v)}}function a(u,f,v){var b,y,g;return function(){var _=e.i(l.style)(this,u),M=v(this),x=M+"";return M==null&&(x=M=(this.style.removeProperty(u),e.i(l.style)(this,u))),_===x?null:_===b&&x===y?g:(y=x,g=f(b=_,M))}}function o(u,f){var v,b,y,g="style."+f,_="end."+g,M;return function(){var x=e.i(s.e)(this,u),m=x.on,S=x.value[g]==null?M||(M=n(f)):void 0;(m!==v||y!==S)&&(b=(v=m).copy()).on(_,y=S),x.on=b}}T.a=function(u,f,v){var b=(u+="")==="transform"?t.a:r.a;return f==null?this.styleTween(u,h(u,b)).on("end.style."+u,n(u)):typeof f=="function"?this.styleTween(u,a(u,b,e.i(c.b)(this,"style."+u,f))).each(o(this._id,u)):this.styleTween(u,i(u,b,f),v).on("end.style."+u,null)}},function(E,T,e){"use strict";function t(s,c,r){return function(h){this.style.setProperty(s,c.call(this,h),r)}}function l(s,c,r){var h,n;function i(){var a=c.apply(this,arguments);return a!==n&&(h=(n=a)&&t(s,a,r)),h}return i._value=c,i}T.a=function(s,c,r){var h="style."+(s+="");if(arguments.length<2)return(h=this.tween(h))&&h._value;if(c==null)return this.tween(h,null);if(typeof c!="function")throw new Error;return this.tween(h,l(s,c,r==null?"":r))}},function(E,T,e){"use strict";var t=e(63);function l(c){return function(){this.textContent=c}}function s(c){return function(){var r=c(this);this.textContent=r==null?"":r}}T.a=function(c){return this.tween("text",typeof c=="function"?s(e.i(t.b)(this,"text",c)):l(c==null?"":c+""))}},function(E,T,e){"use strict";function t(s){return function(c){this.textContent=s.call(this,c)}}function l(s){var c,r;function h(){var n=s.apply(this,arguments);return n!==r&&(c=(r=n)&&t(n)),c}return h._value=s,h}T.a=function(s){var c="text";if(arguments.length<1)return(c=this.tween(c))&&c._value;if(s==null)return this.tween(c,null);if(typeof s!="function")throw new Error;return this.tween(c,l(s))}},function(E,T,e){"use strict";var t=e(27),l=e(13);T.a=function(){for(var s=this._name,c=this._id,r=e.i(t.c)(),h=this._groups,n=h.length,i=0;i<n;++i)for(var a=h[i],o=a.length,u,f=0;f<o;++f)if(u=a[f]){var v=e.i(l.f)(u,c);e.i(l.h)(u,s,r,f,a,{time:v.time+v.delay+v.duration,delay:0,duration:v.duration,ease:v.ease})}return new t.b(h,this._parents,s,r)}},function(E,T,e){"use strict";var t=function(l,s,c,r,h,n,i,a){if(s===void 0)throw new Error("invariant requires an error message argument");if(!l){var o;if(s===void 0)o=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[c,r,h,n,i,a],f=0;o=new Error(s.replace(/%s/g,function(){return u[f++]})),o.name="Invariant Violation"}throw o.framesToPop=1,o}};E.exports=t},function(E,T,e){(function(t){var l="Expected a function",s=0/0,c="[object Symbol]",r=/^\s+|\s+$/g,h=/^[-+]0x[0-9a-f]+$/i,n=/^0b[01]+$/i,i=/^0o[0-7]+$/i,a=parseInt,o=typeof t=="object"&&t&&t.Object===Object&&t,u=typeof self=="object"&&self&&self.Object===Object&&self,f=o||u||Function("return this")(),v=Object.prototype,b=v.toString,y=Math.max,g=Math.min,_=function(){return f.Date.now()};function M(A,O,R){var W,F,Z,V,k,Y,K=0,it=!1,ct=!1,ht=!0;if(typeof A!="function")throw new TypeError(l);O=P(O)||0,x(R)&&(it=!!R.leading,ct="maxWait"in R,Z=ct?y(P(R.maxWait)||0,O):Z,ht="trailing"in R?!!R.trailing:ht);function ut(z){var $=W,dt=F;return W=F=void 0,K=z,V=A.apply(dt,$),V}function It(z){return K=z,k=setTimeout(_t,O),it?ut(z):V}function Nt(z){var $=z-Y,dt=z-K,et=O-$;return ct?g(et,Z-dt):et}function Lt(z){var $=z-Y,dt=z-K;return Y===void 0||$>=O||$<0||ct&&dt>=Z}function _t(){var z=_();if(Lt(z))return mt(z);k=setTimeout(_t,Nt(z))}function mt(z){return k=void 0,ht&&W?ut(z):(W=F=void 0,V)}function At(){k!==void 0&&clearTimeout(k),K=0,W=Y=F=k=void 0}function rt(){return k===void 0?V:mt(_())}function Mt(){var z=_(),$=Lt(z);if(W=arguments,F=this,Y=z,$){if(k===void 0)return It(Y);if(ct)return k=setTimeout(_t,O),ut(Y)}return k===void 0&&(k=setTimeout(_t,O)),V}return Mt.cancel=At,Mt.flush=rt,Mt}function x(A){var O=typeof A;return!!A&&(O=="object"||O=="function")}function m(A){return!!A&&typeof A=="object"}function S(A){return typeof A=="symbol"||m(A)&&b.call(A)==c}function P(A){if(typeof A=="number")return A;if(S(A))return s;if(x(A)){var O=typeof A.valueOf=="function"?A.valueOf():A;A=x(O)?O+"":O}if(typeof A!="string")return A===0?A:+A;A=A.replace(r,"");var R=n.test(A);return R||i.test(A)?a(A.slice(2),R?2:8):h.test(A)?s:+A}E.exports=M}).call(T,e(225))},function(E,T,e){"use strict";/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var t=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;function c(h){if(h==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(h)}function r(){try{if(!Object.assign)return!1;var h=new String("abc");if(h[5]="de",Object.getOwnPropertyNames(h)[0]==="5")return!1;for(var n={},i=0;i<10;i++)n["_"+String.fromCharCode(i)]=i;var a=Object.getOwnPropertyNames(n).map(function(u){return n[u]});if(a.join("")!=="0123456789")return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(u){o[u]=u}),Object.keys(Object.assign({},o)).join("")==="abcdefghijklmnopqrst"}catch(u){return!1}}E.exports=r()?Object.assign:function(h,n){for(var i,a=c(h),o,u=1;u<arguments.length;u++){i=Object(arguments[u]);for(var f in i)l.call(i,f)&&(a[f]=i[f]);if(t){o=t(i);for(var v=0;v<o.length;v++)s.call(i,o[v])&&(a[o[v]]=i[o[v]])}}return a}},function(E,T,e){"use strict";var t=function(){},l=e(223),s={},c=Function.call.bind(Object.prototype.hasOwnProperty);t=function(h){var n="Warning: "+h;typeof console!="undefined"&&console.error(n);try{throw new Error(n)}catch(i){}};function r(h,n,i,a,o){for(var u in h)if(c(h,u)){var f;try{if(typeof h[u]!="function"){var v=Error((a||"React class")+": "+i+" type `"+u+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof h[u]+"`.");throw v.name="Invariant Violation",v}f=h[u](n,u,a,i,null,l)}catch(y){f=y}if(f&&!(f instanceof Error)&&t((a||"React class")+": type specification of "+i+" `"+u+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof f+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),f instanceof Error&&!(f.message in s)){s[f.message]=!0;var b=o?o():"";t("Failed "+i+" type: "+f.message+(b!=null?b:""))}}}r.resetWarningCache=function(){s={}},E.exports=r},function(E,T,e){"use strict";var t=e(224),l=e(539),s=e(223),c=e(540),r=Function.call.bind(Object.prototype.hasOwnProperty),h=function(){};h=function(i){var a="Warning: "+i;typeof console!="undefined"&&console.error(a);try{throw new Error(a)}catch(o){}};function n(){return null}E.exports=function(i,a){var o=typeof Symbol=="function"&&Symbol.iterator,u="@@iterator";function f(ut){var It=ut&&(o&&ut[o]||ut[u]);if(typeof It=="function")return It}var v="<<anonymous>>",b={array:M("array"),bool:M("boolean"),func:M("function"),number:M("number"),object:M("object"),string:M("string"),symbol:M("symbol"),any:x(),arrayOf:m,element:S(),elementType:P(),instanceOf:A,node:F(),objectOf:R,oneOf:O,oneOfType:W,shape:Z,exact:V};function y(ut,It){return ut===It?ut!==0||1/ut==1/It:ut!==ut&&It!==It}function g(ut){this.message=ut,this.stack=""}g.prototype=Error.prototype;function _(ut){var It={},Nt=0;function Lt(mt,At,rt,Mt,z,$,dt){if(Mt=Mt||v,$=$||rt,dt!==s){if(a){var et=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw et.name="Invariant Violation",et}else if(typeof console!="undefined"){var ot=Mt+":"+rt;!It[ot]&&Nt<3&&(h("You are manually calling a React.PropTypes validation function for the `"+$+"` prop on `"+Mt+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),It[ot]=!0,Nt++)}}return At[rt]==null?mt?At[rt]===null?new g("The "+z+" `"+$+"` is marked as required "+("in `"+Mt+"`, but its value is `null`.")):new g("The "+z+" `"+$+"` is marked as required in "+("`"+Mt+"`, but its value is `undefined`.")):null:ut(At,rt,Mt,z,$)}var _t=Lt.bind(null,!1);return _t.isRequired=Lt.bind(null,!0),_t}function M(ut){function It(Nt,Lt,_t,mt,At,rt){var Mt=Nt[Lt],z=K(Mt);if(z!==ut){var $=it(Mt);return new g("Invalid "+mt+" `"+At+"` of type "+("`"+$+"` supplied to `"+_t+"`, expected ")+("`"+ut+"`."))}return null}return _(It)}function x(){return _(n)}function m(ut){function It(Nt,Lt,_t,mt,At){if(typeof ut!="function")return new g("Property `"+At+"` of component `"+_t+"` has invalid PropType notation inside arrayOf.");var rt=Nt[Lt];if(!Array.isArray(rt)){var Mt=K(rt);return new g("Invalid "+mt+" `"+At+"` of type "+("`"+Mt+"` supplied to `"+_t+"`, expected an array."))}for(var z=0;z<rt.length;z++){var $=ut(rt,z,_t,mt,At+"["+z+"]",s);if($ instanceof Error)return $}return null}return _(It)}function S(){function ut(It,Nt,Lt,_t,mt){var At=It[Nt];if(!i(At)){var rt=K(At);return new g("Invalid "+_t+" `"+mt+"` of type "+("`"+rt+"` supplied to `"+Lt+"`, expected a single ReactElement."))}return null}return _(ut)}function P(){function ut(It,Nt,Lt,_t,mt){var At=It[Nt];if(!t.isValidElementType(At)){var rt=K(At);return new g("Invalid "+_t+" `"+mt+"` of type "+("`"+rt+"` supplied to `"+Lt+"`, expected a single ReactElement type."))}return null}return _(ut)}function A(ut){function It(Nt,Lt,_t,mt,At){if(!(Nt[Lt]instanceof ut)){var rt=ut.name||v,Mt=ht(Nt[Lt]);return new g("Invalid "+mt+" `"+At+"` of type "+("`"+Mt+"` supplied to `"+_t+"`, expected ")+("instance of `"+rt+"`."))}return null}return _(It)}function O(ut){if(!Array.isArray(ut))return arguments.length>1?h("Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z])."):h("Invalid argument supplied to oneOf, expected an array."),n;function It(Nt,Lt,_t,mt,At){for(var rt=Nt[Lt],Mt=0;Mt<ut.length;Mt++)if(y(rt,ut[Mt]))return null;var z=JSON.stringify(ut,function(dt,et){var ot=it(et);return ot==="symbol"?String(et):et});return new g("Invalid "+mt+" `"+At+"` of value `"+String(rt)+"` "+("supplied to `"+_t+"`, expected one of "+z+"."))}return _(It)}function R(ut){function It(Nt,Lt,_t,mt,At){if(typeof ut!="function")return new g("Property `"+At+"` of component `"+_t+"` has invalid PropType notation inside objectOf.");var rt=Nt[Lt],Mt=K(rt);if(Mt!=="object")return new g("Invalid "+mt+" `"+At+"` of type "+("`"+Mt+"` supplied to `"+_t+"`, expected an object."));for(var z in rt)if(r(rt,z)){var $=ut(rt,z,_t,mt,At+"."+z,s);if($ instanceof Error)return $}return null}return _(It)}function W(ut){if(!Array.isArray(ut))return h("Invalid argument supplied to oneOfType, expected an instance of array."),n;for(var It=0;It<ut.length;It++){var Nt=ut[It];if(typeof Nt!="function")return h("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+ct(Nt)+" at index "+It+"."),n}function Lt(_t,mt,At,rt,Mt){for(var z=0;z<ut.length;z++){var $=ut[z];if($(_t,mt,At,rt,Mt,s)==null)return null}return new g("Invalid "+rt+" `"+Mt+"` supplied to "+("`"+At+"`."))}return _(Lt)}function F(){function ut(It,Nt,Lt,_t,mt){return k(It[Nt])?null:new g("Invalid "+_t+" `"+mt+"` supplied to "+("`"+Lt+"`, expected a ReactNode."))}return _(ut)}function Z(ut){function It(Nt,Lt,_t,mt,At){var rt=Nt[Lt],Mt=K(rt);if(Mt!=="object")return new g("Invalid "+mt+" `"+At+"` of type `"+Mt+"` "+("supplied to `"+_t+"`, expected `object`."));for(var z in ut){var $=ut[z];if(!!$){var dt=$(rt,z,_t,mt,At+"."+z,s);if(dt)return dt}}return null}return _(It)}function V(ut){function It(Nt,Lt,_t,mt,At){var rt=Nt[Lt],Mt=K(rt);if(Mt!=="object")return new g("Invalid "+mt+" `"+At+"` of type `"+Mt+"` "+("supplied to `"+_t+"`, expected `object`."));var z=l({},Nt[Lt],ut);for(var $ in z){var dt=ut[$];if(!dt)return new g("Invalid "+mt+" `"+At+"` key `"+$+"` supplied to `"+_t+"`.\nBad object: "+JSON.stringify(Nt[Lt],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(ut),null,"  "));var et=dt(rt,$,_t,mt,At+"."+$,s);if(et)return et}return null}return _(It)}function k(ut){switch(typeof ut){case"number":case"string":case"undefined":return!0;case"boolean":return!ut;case"object":if(Array.isArray(ut))return ut.every(k);if(ut===null||i(ut))return!0;var It=f(ut);if(It){var Nt=It.call(ut),Lt;if(It!==ut.entries){for(;!(Lt=Nt.next()).done;)if(!k(Lt.value))return!1}else for(;!(Lt=Nt.next()).done;){var _t=Lt.value;if(_t&&!k(_t[1]))return!1}}else return!1;return!0;default:return!1}}function Y(ut,It){return ut==="symbol"?!0:It?It["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&It instanceof Symbol:!1}function K(ut){var It=typeof ut;return Array.isArray(ut)?"array":ut instanceof RegExp?"object":Y(It,ut)?"symbol":It}function it(ut){if(typeof ut=="undefined"||ut===null)return""+ut;var It=K(ut);if(It==="object"){if(ut instanceof Date)return"date";if(ut instanceof RegExp)return"regexp"}return It}function ct(ut){var It=it(ut);switch(It){case"array":case"object":return"an "+It;case"boolean":case"date":case"regexp":return"a "+It;default:return It}}function ht(ut){return!ut.constructor||!ut.constructor.name?v:ut.constructor.name}return b.checkPropTypes=c,b.resetWarningCache=c.resetWarningCache,b.PropTypes=b,b}},function(E,T,e){"use strict";/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){"use strict";var t=typeof Symbol=="function"&&Symbol.for,l=t?Symbol.for("react.element"):60103,s=t?Symbol.for("react.portal"):60106,c=t?Symbol.for("react.fragment"):60107,r=t?Symbol.for("react.strict_mode"):60108,h=t?Symbol.for("react.profiler"):60114,n=t?Symbol.for("react.provider"):60109,i=t?Symbol.for("react.context"):60110,a=t?Symbol.for("react.async_mode"):60111,o=t?Symbol.for("react.concurrent_mode"):60111,u=t?Symbol.for("react.forward_ref"):60112,f=t?Symbol.for("react.suspense"):60113,v=t?Symbol.for("react.suspense_list"):60120,b=t?Symbol.for("react.memo"):60115,y=t?Symbol.for("react.lazy"):60116,g=t?Symbol.for("react.block"):60121,_=t?Symbol.for("react.fundamental"):60117,M=t?Symbol.for("react.responder"):60118,x=t?Symbol.for("react.scope"):60119;function m(ot){return typeof ot=="string"||typeof ot=="function"||ot===c||ot===o||ot===h||ot===r||ot===f||ot===v||typeof ot=="object"&&ot!==null&&(ot.$$typeof===y||ot.$$typeof===b||ot.$$typeof===n||ot.$$typeof===i||ot.$$typeof===u||ot.$$typeof===_||ot.$$typeof===M||ot.$$typeof===x||ot.$$typeof===g)}function S(ot){if(typeof ot=="object"&&ot!==null){var pt=ot.$$typeof;switch(pt){case l:var H=ot.type;switch(H){case a:case o:case c:case h:case r:case f:return H;default:var nt=H&&H.$$typeof;switch(nt){case i:case u:case y:case b:case n:return nt;default:return pt}}case s:return pt}}}var P=a,A=o,O=i,R=n,W=l,F=u,Z=c,V=y,k=b,Y=s,K=h,it=r,ct=f,ht=!1;function ut(ot){return ht||(ht=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),It(ot)||S(ot)===a}function It(ot){return S(ot)===o}function Nt(ot){return S(ot)===i}function Lt(ot){return S(ot)===n}function _t(ot){return typeof ot=="object"&&ot!==null&&ot.$$typeof===l}function mt(ot){return S(ot)===u}function At(ot){return S(ot)===c}function rt(ot){return S(ot)===y}function Mt(ot){return S(ot)===b}function z(ot){return S(ot)===s}function $(ot){return S(ot)===h}function dt(ot){return S(ot)===r}function et(ot){return S(ot)===f}T.AsyncMode=P,T.ConcurrentMode=A,T.ContextConsumer=O,T.ContextProvider=R,T.Element=W,T.ForwardRef=F,T.Fragment=Z,T.Lazy=V,T.Memo=k,T.Portal=Y,T.Profiler=K,T.StrictMode=it,T.Suspense=ct,T.isAsyncMode=ut,T.isConcurrentMode=It,T.isContextConsumer=Nt,T.isContextProvider=Lt,T.isElement=_t,T.isForwardRef=mt,T.isFragment=At,T.isLazy=rt,T.isMemo=Mt,T.isPortal=z,T.isProfiler=$,T.isStrictMode=dt,T.isSuspense=et,T.isValidElementType=m,T.typeOf=S})()},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),function(t){var l=function(){if(typeof Map!="undefined")return Map;function Y(K,it){var ct=-1;return K.some(function(ht,ut){return ht[0]===it?(ct=ut,!0):!1}),ct}return function(){function K(){this.__entries__=[]}return Object.defineProperty(K.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),K.prototype.get=function(it){var ct=Y(this.__entries__,it),ht=this.__entries__[ct];return ht&&ht[1]},K.prototype.set=function(it,ct){var ht=Y(this.__entries__,it);~ht?this.__entries__[ht][1]=ct:this.__entries__.push([it,ct])},K.prototype.delete=function(it){var ct=this.__entries__,ht=Y(ct,it);~ht&&ct.splice(ht,1)},K.prototype.has=function(it){return!!~Y(this.__entries__,it)},K.prototype.clear=function(){this.__entries__.splice(0)},K.prototype.forEach=function(it,ct){ct===void 0&&(ct=null);for(var ht=0,ut=this.__entries__;ht<ut.length;ht++){var It=ut[ht];it.call(ct,It[1],It[0])}},K}()}(),s=typeof window!="undefined"&&typeof document!="undefined"&&window.document===document,c=function(){return typeof t!="undefined"&&t.Math===Math?t:typeof self!="undefined"&&self.Math===Math?self:typeof window!="undefined"&&window.Math===Math?window:Function("return this")()}(),r=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(c):function(Y){return setTimeout(function(){return Y(Date.now())},1e3/60)}}(),h=2;function n(Y,K){var it=!1,ct=!1,ht=0;function ut(){it&&(it=!1,Y()),ct&&Nt()}function It(){r(ut)}function Nt(){var Lt=Date.now();if(it){if(Lt-ht<h)return;ct=!0}else it=!0,ct=!1,setTimeout(It,K);ht=Lt}return Nt}var i=20,a=["top","right","bottom","left","width","height","size","weight"],o=typeof MutationObserver!="undefined",u=function(){function Y(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=n(this.refresh.bind(this),i)}return Y.prototype.addObserver=function(K){~this.observers_.indexOf(K)||this.observers_.push(K),this.connected_||this.connect_()},Y.prototype.removeObserver=function(K){var it=this.observers_,ct=it.indexOf(K);~ct&&it.splice(ct,1),!it.length&&this.connected_&&this.disconnect_()},Y.prototype.refresh=function(){var K=this.updateObservers_();K&&this.refresh()},Y.prototype.updateObservers_=function(){var K=this.observers_.filter(function(it){return it.gatherActive(),it.hasActive()});return K.forEach(function(it){return it.broadcastActive()}),K.length>0},Y.prototype.connect_=function(){!s||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),o?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},Y.prototype.disconnect_=function(){!s||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},Y.prototype.onTransitionEnd_=function(K){var it=K.propertyName,ct=it===void 0?"":it,ht=a.some(function(ut){return!!~ct.indexOf(ut)});ht&&this.refresh()},Y.getInstance=function(){return this.instance_||(this.instance_=new Y),this.instance_},Y.instance_=null,Y}(),f=function(Y,K){for(var it=0,ct=Object.keys(K);it<ct.length;it++){var ht=ct[it];Object.defineProperty(Y,ht,{value:K[ht],enumerable:!1,writable:!1,configurable:!0})}return Y},v=function(Y){var K=Y&&Y.ownerDocument&&Y.ownerDocument.defaultView;return K||c},b=O(0,0,0,0);function y(Y){return parseFloat(Y)||0}function g(Y){for(var K=[],it=1;it<arguments.length;it++)K[it-1]=arguments[it];return K.reduce(function(ct,ht){var ut=Y["border-"+ht+"-width"];return ct+y(ut)},0)}function _(Y){for(var K=["top","right","bottom","left"],it={},ct=0,ht=K;ct<ht.length;ct++){var ut=ht[ct],It=Y["padding-"+ut];it[ut]=y(It)}return it}function M(Y){var K=Y.getBBox();return O(0,0,K.width,K.height)}function x(Y){var K=Y.clientWidth,it=Y.clientHeight;if(!K&&!it)return b;var ct=v(Y).getComputedStyle(Y),ht=_(ct),ut=ht.left+ht.right,It=ht.top+ht.bottom,Nt=y(ct.width),Lt=y(ct.height);if(ct.boxSizing==="border-box"&&(Math.round(Nt+ut)!==K&&(Nt-=g(ct,"left","right")+ut),Math.round(Lt+It)!==it&&(Lt-=g(ct,"top","bottom")+It)),!S(Y)){var _t=Math.round(Nt+ut)-K,mt=Math.round(Lt+It)-it;Math.abs(_t)!==1&&(Nt-=_t),Math.abs(mt)!==1&&(Lt-=mt)}return O(ht.left,ht.top,Nt,Lt)}var m=function(){return typeof SVGGraphicsElement!="undefined"?function(Y){return Y instanceof v(Y).SVGGraphicsElement}:function(Y){return Y instanceof v(Y).SVGElement&&typeof Y.getBBox=="function"}}();function S(Y){return Y===v(Y).document.documentElement}function P(Y){return s?m(Y)?M(Y):x(Y):b}function A(Y){var K=Y.x,it=Y.y,ct=Y.width,ht=Y.height,ut=typeof DOMRectReadOnly!="undefined"?DOMRectReadOnly:Object,It=Object.create(ut.prototype);return f(It,{x:K,y:it,width:ct,height:ht,top:it,right:K+ct,bottom:ht+it,left:K}),It}function O(Y,K,it,ct){return{x:Y,y:K,width:it,height:ct}}var R=function(){function Y(K){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=O(0,0,0,0),this.target=K}return Y.prototype.isActive=function(){var K=P(this.target);return this.contentRect_=K,K.width!==this.broadcastWidth||K.height!==this.broadcastHeight},Y.prototype.broadcastRect=function(){var K=this.contentRect_;return this.broadcastWidth=K.width,this.broadcastHeight=K.height,K},Y}(),W=function(){function Y(K,it){var ct=A(it);f(this,{target:K,contentRect:ct})}return Y}(),F=function(){function Y(K,it,ct){if(this.activeObservations_=[],this.observations_=new l,typeof K!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=K,this.controller_=it,this.callbackCtx_=ct}return Y.prototype.observe=function(K){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(K instanceof v(K).Element))throw new TypeError('parameter 1 is not of type "Element".');var it=this.observations_;it.has(K)||(it.set(K,new R(K)),this.controller_.addObserver(this),this.controller_.refresh())}},Y.prototype.unobserve=function(K){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(K instanceof v(K).Element))throw new TypeError('parameter 1 is not of type "Element".');var it=this.observations_;!it.has(K)||(it.delete(K),it.size||this.controller_.removeObserver(this))}},Y.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},Y.prototype.gatherActive=function(){var K=this;this.clearActive(),this.observations_.forEach(function(it){it.isActive()&&K.activeObservations_.push(it)})},Y.prototype.broadcastActive=function(){if(!!this.hasActive()){var K=this.callbackCtx_,it=this.activeObservations_.map(function(ct){return new W(ct.target,ct.broadcastRect())});this.callback_.call(K,it,K),this.clearActive()}},Y.prototype.clearActive=function(){this.activeObservations_.splice(0)},Y.prototype.hasActive=function(){return this.activeObservations_.length>0},Y}(),Z=typeof WeakMap!="undefined"?new WeakMap:new l,V=function(){function Y(K){if(!(this instanceof Y))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var it=u.getInstance(),ct=new F(K,it,this);Z.set(this,ct)}return Y}();["observe","unobserve","disconnect"].forEach(function(Y){V.prototype[Y]=function(){var K;return(K=Z.get(this))[Y].apply(K,arguments)}});var k=function(){return typeof c.ResizeObserver!="undefined"?c.ResizeObserver:V}();T.default=k}.call(T,e(225))},function(E,T,e){(function(t,l){l(T,e(22),e(515))})(this,function(t,l,s){"use strict";var c=1e-10;function r(et,ot){var pt=n(et),H=pt.filter(function(nn){return h(nn,et)}),nt=0,at=0,q=[],Et;if(H.length>1){var vt=f(H);for(Et=0;Et<H.length;++Et){var Ft=H[Et];Ft.angle=Math.atan2(Ft.x-vt.x,Ft.y-vt.y)}H.sort(function(nn,en){return en.angle-nn.angle});var Qt=H[H.length-1];for(Et=0;Et<H.length;++Et){var ee=H[Et];at+=(Qt.x+ee.x)*(ee.y-Qt.y);for(var Gt={x:(ee.x+Qt.x)/2,y:(ee.y+Qt.y)/2},$t=null,Pe=0;Pe<ee.parentIndex.length;++Pe)if(Qt.parentIndex.indexOf(ee.parentIndex[Pe])>-1){var me=et[ee.parentIndex[Pe]],le=Math.atan2(ee.x-me.x,ee.y-me.y),be=Math.atan2(Qt.x-me.x,Qt.y-me.y),ze=be-le;ze<0&&(ze+=2*Math.PI);var Xe=be-ze/2,_n=a(Gt,{x:me.x+me.radius*Math.sin(Xe),y:me.y+me.radius*Math.cos(Xe)});_n>me.radius*2&&(_n=me.radius*2),($t===null||$t.width>_n)&&($t={circle:me,width:_n,p1:ee,p2:Qt})}$t!==null&&(q.push($t),nt+=i($t.circle.radius,$t.width),Qt=ee)}}else{var Kn=et[0];for(Et=1;Et<et.length;++Et)et[Et].radius<Kn.radius&&(Kn=et[Et]);var Hn=!1;for(Et=0;Et<et.length;++Et)if(a(et[Et],Kn)>Math.abs(Kn.radius-et[Et].radius)){Hn=!0;break}Hn?nt=at=0:(nt=Kn.radius*Kn.radius*Math.PI,q.push({circle:Kn,p1:{x:Kn.x,y:Kn.y+Kn.radius},p2:{x:Kn.x-c,y:Kn.y+Kn.radius},width:Kn.radius*2}))}return at/=2,ot&&(ot.area=nt+at,ot.arcArea=nt,ot.polygonArea=at,ot.arcs=q,ot.innerPoints=H,ot.intersectionPoints=pt),nt+at}function h(et,ot){for(var pt=0;pt<ot.length;++pt)if(a(et,ot[pt])>ot[pt].radius+c)return!1;return!0}function n(et){for(var ot=[],pt=0;pt<et.length;++pt)for(var H=pt+1;H<et.length;++H)for(var nt=u(et[pt],et[H]),at=0;at<nt.length;++at){var q=nt[at];q.parentIndex=[pt,H],ot.push(q)}return ot}function i(et,ot){return et*et*Math.acos(1-ot/et)-(et-ot)*Math.sqrt(ot*(2*et-ot))}function a(et,ot){return Math.sqrt((et.x-ot.x)*(et.x-ot.x)+(et.y-ot.y)*(et.y-ot.y))}function o(et,ot,pt){if(pt>=et+ot)return 0;if(pt<=Math.abs(et-ot))return Math.PI*Math.min(et,ot)*Math.min(et,ot);var H=et-(pt*pt-ot*ot+et*et)/(2*pt),nt=ot-(pt*pt-et*et+ot*ot)/(2*pt);return i(et,H)+i(ot,nt)}function u(et,ot){var pt=a(et,ot),H=et.radius,nt=ot.radius;if(pt>=H+nt||pt<=Math.abs(H-nt))return[];var at=(H*H-nt*nt+pt*pt)/(2*pt),q=Math.sqrt(H*H-at*at),Et=et.x+at*(ot.x-et.x)/pt,vt=et.y+at*(ot.y-et.y)/pt,Ft=-(ot.y-et.y)*(q/pt),Qt=-(ot.x-et.x)*(q/pt);return[{x:Et+Ft,y:vt-Qt},{x:Et-Ft,y:vt+Qt}]}function f(et){for(var ot={x:0,y:0},pt=0;pt<et.length;++pt)ot.x+=et[pt].x,ot.y+=et[pt].y;return ot.x/=et.length,ot.y/=et.length,ot}function v(et,ot,pt,H){H=H||{};var nt=H.maxIterations||100,at=H.tolerance||1e-10,q=et(ot),Et=et(pt),vt=pt-ot;if(q*Et>0)throw"Initial bisect points must have opposite signs";if(q===0)return ot;if(Et===0)return pt;for(var Ft=0;Ft<nt;++Ft){vt/=2;var Qt=ot+vt,ee=et(Qt);if(ee*q>=0&&(ot=Qt),Math.abs(vt)<at||ee===0)return Qt}return ot+vt}function b(et){for(var ot=new Array(et),pt=0;pt<et;++pt)ot[pt]=0;return ot}function y(et,ot){return b(et).map(function(){return b(ot)})}function g(et,ot){for(var pt=0,H=0;H<et.length;++H)pt+=et[H]*ot[H];return pt}function _(et){return Math.sqrt(g(et,et))}function M(et,ot,pt){for(var H=0;H<ot.length;++H)et[H]=ot[H]*pt}function x(et,ot,pt,H,nt){for(var at=0;at<et.length;++at)et[at]=ot*pt[at]+H*nt[at]}function m(et,ot,pt){pt=pt||{};var H=pt.maxIterations||ot.length*200,nt=pt.nonZeroDelta||1.05,at=pt.zeroDelta||.001,q=pt.minErrorDelta||1e-6,Et=pt.minErrorDelta||1e-5,vt=pt.rho!==void 0?pt.rho:1,Ft=pt.chi!==void 0?pt.chi:2,Qt=pt.psi!==void 0?pt.psi:-.5,ee=pt.sigma!==void 0?pt.sigma:.5,Gt,$t=ot.length,Pe=new Array($t+1);Pe[0]=ot,Pe[0].fx=et(ot),Pe[0].id=0;for(var me=0;me<$t;++me){var le=ot.slice();le[me]=le[me]?le[me]*nt:at,Pe[me+1]=le,Pe[me+1].fx=et(le),Pe[me+1].id=me+1}function be(fi){for(var Oe=0;Oe<fi.length;Oe++)Pe[$t][Oe]=fi[Oe];Pe[$t].fx=fi.fx}for(var ze=function(fi,Oe){return fi.fx-Oe.fx},Xe=ot.slice(),_n=ot.slice(),Kn=ot.slice(),Hn=ot.slice(),nn=0;nn<H;++nn){if(Pe.sort(ze),pt.history){var en=Pe.map(function(fi){var Oe=fi.slice();return Oe.fx=fi.fx,Oe.id=fi.id,Oe});en.sort(function(fi,Oe){return fi.id-Oe.id}),pt.history.push({x:Pe[0].slice(),fx:Pe[0].fx,simplex:en})}for(Gt=0,me=0;me<$t;++me)Gt=Math.max(Gt,Math.abs(Pe[0][me]-Pe[1][me]));if(Math.abs(Pe[0].fx-Pe[$t].fx)<q&&Gt<Et)break;for(me=0;me<$t;++me){Xe[me]=0;for(var An=0;An<$t;++An)Xe[me]+=Pe[An][me];Xe[me]/=$t}var Nn=Pe[$t];if(x(_n,1+vt,Xe,-vt,Nn),_n.fx=et(_n),_n.fx<Pe[0].fx)x(Hn,1+Ft,Xe,-Ft,Nn),Hn.fx=et(Hn),Hn.fx<_n.fx?be(Hn):be(_n);else if(_n.fx>=Pe[$t-1].fx){var hr=!1;if(_n.fx>Nn.fx?(x(Kn,1+Qt,Xe,-Qt,Nn),Kn.fx=et(Kn),Kn.fx<Nn.fx?be(Kn):hr=!0):(x(Kn,1-Qt*vt,Xe,Qt*vt,Nn),Kn.fx=et(Kn),Kn.fx<_n.fx?be(Kn):hr=!0),hr){if(ee>=1)break;for(me=1;me<Pe.length;++me)x(Pe[me],1-ee,Pe[0],ee,Pe[me]),Pe[me].fx=et(Pe[me])}}else be(_n)}return Pe.sort(ze),{fx:Pe[0].fx,x:Pe[0]}}function S(et,ot,pt,H,nt,at,q){var Et=pt.fx,vt=g(pt.fxprime,ot),Ft=Et,Qt=Et,ee=vt,Gt=0;nt=nt||1,at=at||1e-6,q=q||.1;function $t(me,le,be){for(var ze=0;ze<16;++ze)if(nt=(me+le)/2,x(H.x,1,pt.x,nt,ot),Ft=H.fx=et(H.x,H.fxprime),ee=g(H.fxprime,ot),Ft>Et+at*nt*vt||Ft>=be)le=nt;else{if(Math.abs(ee)<=-q*vt)return nt;ee*(le-me)>=0&&(le=me),me=nt,be=Ft}return 0}for(var Pe=0;Pe<10;++Pe){if(x(H.x,1,pt.x,nt,ot),Ft=H.fx=et(H.x,H.fxprime),ee=g(H.fxprime,ot),Ft>Et+at*nt*vt||Pe&&Ft>=Qt)return $t(Gt,nt,Qt);if(Math.abs(ee)<=-q*vt)return nt;if(ee>=0)return $t(nt,Gt,Ft);Qt=Ft,Gt=nt,nt*=2}return nt}function P(et,ot,pt){var H={x:ot.slice(),fx:0,fxprime:ot.slice()},nt={x:ot.slice(),fx:0,fxprime:ot.slice()},at=ot.slice(),q,Et,vt=1,Ft;pt=pt||{},Ft=pt.maxIterations||ot.length*20,H.fx=et(H.x,H.fxprime),q=H.fxprime.slice(),M(q,H.fxprime,-1);for(var Qt=0;Qt<Ft;++Qt){if(vt=S(et,q,H,nt,vt),pt.history&&pt.history.push({x:H.x.slice(),fx:H.fx,fxprime:H.fxprime.slice(),alpha:vt}),!vt)M(q,H.fxprime,-1);else{x(at,1,nt.fxprime,-1,H.fxprime);var ee=g(H.fxprime,H.fxprime),Gt=Math.max(0,g(at,nt.fxprime)/ee);x(q,Gt,q,-1,nt.fxprime),Et=H,H=nt,nt=Et}if(_(H.fxprime)<=1e-5)break}return pt.history&&pt.history.push({x:H.x.slice(),fx:H.fx,fxprime:H.fxprime.slice(),alpha:vt}),H}function A(et,ot){ot=ot||{},ot.maxIterations=ot.maxIterations||500;var pt=ot.initialLayout||V,H=ot.lossFunction||K;et=W(et);var nt=pt(et,ot),at=[],q=[],Et;for(Et in nt)nt.hasOwnProperty(Et)&&(at.push(nt[Et].x),at.push(nt[Et].y),q.push(Et));for(var vt=m(function(ee){for(var Gt={},$t=0;$t<q.length;++$t){var Pe=q[$t];Gt[Pe]={x:ee[2*$t],y:ee[2*$t+1],radius:nt[Pe].radius}}return H(Gt,et)},at,ot),Ft=vt.x,Qt=0;Qt<q.length;++Qt)Et=q[Qt],nt[Et].x=Ft[2*Qt],nt[Et].y=Ft[2*Qt+1];return nt}var O=1e-10;function R(et,ot,pt){return Math.min(et,ot)*Math.min(et,ot)*Math.PI<=pt+O?Math.abs(et-ot):v(function(H){return o(et,ot,H)-pt},0,et+ot)}function W(et){et=et.slice();var ot=[],pt={},H,nt,at,q;for(H=0;H<et.length;++H){var Et=et[H];Et.sets.length==1?ot.push(Et.sets[0]):Et.sets.length==2&&(at=Et.sets[0],q=Et.sets[1],pt[[at,q]]=!0,pt[[q,at]]=!0)}for(ot.sort(function(vt,Ft){return vt>Ft}),H=0;H<ot.length;++H)for(at=ot[H],nt=H+1;nt<ot.length;++nt)q=ot[nt],[at,q]in pt||et.push({sets:[at,q],size:0});return et}function F(et,ot,pt){var H=y(ot.length,ot.length),nt=y(ot.length,ot.length);return et.filter(function(at){return at.sets.length==2}).map(function(at){var q=pt[at.sets[0]],Et=pt[at.sets[1]],vt=Math.sqrt(ot[q].size/Math.PI),Ft=Math.sqrt(ot[Et].size/Math.PI),Qt=R(vt,Ft,at.size);H[q][Et]=H[Et][q]=Qt;var ee=0;at.size+1e-10>=Math.min(ot[q].size,ot[Et].size)?ee=1:at.size<=1e-10&&(ee=-1),nt[q][Et]=nt[Et][q]=ee}),{distances:H,constraints:nt}}function Z(et,ot,pt,H){var nt=0,at;for(at=0;at<ot.length;++at)ot[at]=0;for(at=0;at<pt.length;++at)for(var q=et[2*at],Et=et[2*at+1],vt=at+1;vt<pt.length;++vt){var Ft=et[2*vt],Qt=et[2*vt+1],ee=pt[at][vt],Gt=H[at][vt],$t=(Ft-q)*(Ft-q)+(Qt-Et)*(Qt-Et),Pe=Math.sqrt($t),me=$t-ee*ee;Gt>0&&Pe<=ee||Gt<0&&Pe>=ee||(nt+=2*me*me,ot[2*at]+=4*me*(q-Ft),ot[2*at+1]+=4*me*(Et-Qt),ot[2*vt]+=4*me*(Ft-q),ot[2*vt+1]+=4*me*(Qt-Et))}return nt}function V(et,ot){var pt=Y(et,ot),H=ot.lossFunction||K;if(et.length>=8){var nt=k(et,ot),at=H(nt,et),q=H(pt,et);at+1e-8<q&&(pt=nt)}return pt}function k(et,ot){ot=ot||{};var pt=ot.restarts||10,H=[],nt={},at;for(at=0;at<et.length;++at){var q=et[at];q.sets.length==1&&(nt[q.sets[0]]=H.length,H.push(q))}var Et=F(et,H,nt),vt=Et.distances,Ft=Et.constraints,Qt=_(vt.map(_))/vt.length;vt=vt.map(function(ze){return ze.map(function(Xe){return Xe/Qt})});var ee=function(ze,Xe){return Z(ze,Xe,vt,Ft)},Gt,$t;for(at=0;at<pt;++at){var Pe=b(vt.length*2).map(Math.random);$t=P(ee,Pe,ot),(!Gt||$t.fx<Gt.fx)&&(Gt=$t)}var me=Gt.x,le={};for(at=0;at<H.length;++at){var be=H[at];le[be.sets[0]]={x:me[2*at]*Qt,y:me[2*at+1]*Qt,radius:Math.sqrt(be.size/Math.PI)}}if(ot.history)for(at=0;at<ot.history.length;++at)M(ot.history[at].x,Qt);return le}function Y(et,ot){for(var pt=ot&&ot.lossFunction?ot.lossFunction:K,H={},nt={},at,q=0;q<et.length;++q){var Et=et[q];Et.sets.length==1&&(at=Et.sets[0],H[at]={x:1e10,y:1e10,rowid:H.length,size:Et.size,radius:Math.sqrt(Et.size/Math.PI)},nt[at]=[])}for(et=et.filter(function(ve){return ve.sets.length==2}),q=0;q<et.length;++q){var vt=et[q],Ft=vt.hasOwnProperty("weight")?vt.weight:1,Qt=vt.sets[0],ee=vt.sets[1];vt.size+O>=Math.min(H[Qt].size,H[ee].size)&&(Ft=0),nt[Qt].push({set:ee,size:vt.size,weight:Ft}),nt[ee].push({set:Qt,size:vt.size,weight:Ft})}var Gt=[];for(at in nt)if(nt.hasOwnProperty(at)){var $t=0;for(q=0;q<nt[at].length;++q)$t+=nt[at][q].size*nt[at][q].weight;Gt.push({set:at,size:$t})}function Pe(ve,Vt){return Vt.size-ve.size}Gt.sort(Pe);var me={};function le(ve){return ve.set in me}function be(ve,Vt){H[Vt].x=ve.x,H[Vt].y=ve.y,me[Vt]=!0}for(be({x:0,y:0},Gt[0].set),q=1;q<Gt.length;++q){var ze=Gt[q].set,Xe=nt[ze].filter(le);if(at=H[ze],Xe.sort(Pe),Xe.length===0)throw"ERROR: missing pairwise overlap information";for(var _n=[],Kn=0;Kn<Xe.length;++Kn){var Hn=H[Xe[Kn].set],nn=R(at.radius,Hn.radius,Xe[Kn].size);_n.push({x:Hn.x+nn,y:Hn.y}),_n.push({x:Hn.x-nn,y:Hn.y}),_n.push({y:Hn.y+nn,x:Hn.x}),_n.push({y:Hn.y-nn,x:Hn.x});for(var en=Kn+1;en<Xe.length;++en)for(var An=H[Xe[en].set],Nn=R(at.radius,An.radius,Xe[en].size),hr=u({x:Hn.x,y:Hn.y,radius:nn},{x:An.x,y:An.y,radius:Nn}),fi=0;fi<hr.length;++fi)_n.push(hr[fi])}var Oe=1e50,Ae=_n[0];for(Kn=0;Kn<_n.length;++Kn){H[ze].x=_n[Kn].x,H[ze].y=_n[Kn].y;var Jt=pt(H,et);Jt<Oe&&(Oe=Jt,Ae=_n[Kn])}be(Ae,ze)}return H}function K(et,ot){var pt=0;function H(Qt){return Qt.map(function(ee){return et[ee]})}for(var nt=0;nt<ot.length;++nt){var at=ot[nt],q;if(at.sets.length!=1){if(at.sets.length==2){var Et=et[at.sets[0]],vt=et[at.sets[1]];q=o(Et.radius,vt.radius,a(Et,vt))}else q=r(H(at.sets));var Ft=at.hasOwnProperty("weight")?at.weight:1;pt+=Ft*(q-at.size)*(q-at.size)}}return pt}function it(et,ot,pt){pt===null?et.sort(function(me,le){return le.radius-me.radius}):et.sort(pt);var H;if(et.length>0){var nt=et[0].x,at=et[0].y;for(H=0;H<et.length;++H)et[H].x-=nt,et[H].y-=at}if(et.length==2){var q=a(et[0],et[1]);q<Math.abs(et[1].radius-et[0].radius)&&(et[1].x=et[0].x+et[0].radius-et[1].radius-1e-10,et[1].y=et[0].y)}if(et.length>1){var Et=Math.atan2(et[1].x,et[1].y)-ot,vt=Math.cos(Et),Ft=Math.sin(Et),Qt,ee;for(H=0;H<et.length;++H)Qt=et[H].x,ee=et[H].y,et[H].x=vt*Qt-Ft*ee,et[H].y=Ft*Qt+vt*ee}if(et.length>2){for(var Gt=Math.atan2(et[2].x,et[2].y)-ot;Gt<0;)Gt+=2*Math.PI;for(;Gt>2*Math.PI;)Gt-=2*Math.PI;if(Gt>Math.PI){var $t=et[1].y/(1e-10+et[1].x);for(H=0;H<et.length;++H){var Pe=(et[H].x+$t*et[H].y)/(1+$t*$t);et[H].x=2*Pe-et[H].x,et[H].y=2*Pe*$t-et[H].y}}}}function ct(et){et.map(function(Ft){Ft.parent=Ft});function ot(Ft){return Ft.parent!==Ft&&(Ft.parent=ot(Ft.parent)),Ft.parent}function pt(Ft,Qt){var ee=ot(Ft),Gt=ot(Qt);ee.parent=Gt}for(var H=0;H<et.length;++H)for(var nt=H+1;nt<et.length;++nt){var at=et[H].radius+et[nt].radius;a(et[H],et[nt])+1e-10<at&&pt(et[nt],et[H])}var q={},Et;for(H=0;H<et.length;++H)Et=ot(et[H]).parent.setid,Et in q||(q[Et]=[]),q[Et].push(et[H]);et.map(function(Ft){delete Ft.parent});var vt=[];for(Et in q)q.hasOwnProperty(Et)&&vt.push(q[Et]);return vt}function ht(et){var ot=function(pt){var H=Math.max.apply(null,et.map(function(at){return at[pt]+at.radius})),nt=Math.min.apply(null,et.map(function(at){return at[pt]-at.radius}));return{max:H,min:nt}};return{xRange:ot("x"),yRange:ot("y")}}function ut(et,ot,pt){ot===null&&(ot=Math.PI/2);var H=[],nt,at;for(at in et)if(et.hasOwnProperty(at)){var q=et[at];H.push({x:q.x,y:q.y,radius:q.radius,setid:at})}var Et=ct(H);for(nt=0;nt<Et.length;++nt){it(Et[nt],ot,pt);var vt=ht(Et[nt]);Et[nt].size=(vt.xRange.max-vt.xRange.min)*(vt.yRange.max-vt.yRange.min),Et[nt].bounds=vt}Et.sort(function(Pe,me){return me.size-Pe.size}),H=Et[0];var Ft=H.bounds,Qt=(Ft.xRange.max-Ft.xRange.min)/50;function ee(Pe,me,le){if(!!Pe){var be=Pe.bounds,ze,Xe,_n;me?ze=Ft.xRange.max-be.xRange.min+Qt:(ze=Ft.xRange.max-be.xRange.max,_n=(be.xRange.max-be.xRange.min)/2-(Ft.xRange.max-Ft.xRange.min)/2,_n<0&&(ze+=_n)),le?Xe=Ft.yRange.max-be.yRange.min+Qt:(Xe=Ft.yRange.max-be.yRange.max,_n=(be.yRange.max-be.yRange.min)/2-(Ft.yRange.max-Ft.yRange.min)/2,_n<0&&(Xe+=_n));for(var Kn=0;Kn<Pe.length;++Kn)Pe[Kn].x+=ze,Pe[Kn].y+=Xe,H.push(Pe[Kn])}}for(var Gt=1;Gt<Et.length;)ee(Et[Gt],!0,!1),ee(Et[Gt+1],!1,!0),ee(Et[Gt+2],!0,!0),Gt+=3,Ft=ht(H);var $t={};for(nt=0;nt<H.length;++nt)$t[H[nt].setid]=H[nt];return $t}function It(et,ot,pt,H){var nt=[],at=[];for(var q in et)et.hasOwnProperty(q)&&(at.push(q),nt.push(et[q]));ot-=2*H,pt-=2*H;var Et=ht(nt),vt=Et.xRange,Ft=Et.yRange;if(vt.max==vt.min||Ft.max==Ft.min)return console.log("not scaling solution: zero size detected"),et;for(var Qt=ot/(vt.max-vt.min),ee=pt/(Ft.max-Ft.min),Gt=Math.min(ee,Qt),$t=(ot-(vt.max-vt.min)*Gt)/2,Pe=(pt-(Ft.max-Ft.min)*Gt)/2,me={},le=0;le<nt.length;++le){var be=nt[le];me[at[le]]={radius:Gt*be.radius,x:H+$t+(be.x-vt.min)*Gt,y:H+Pe+(be.y-Ft.min)*Gt}}return me}function Nt(){var et=600,ot=350,pt=15,H=1e3,nt=Math.PI/2,at=!0,q=!0,Et=!0,vt=null,Ft=null,Qt={},ee=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],Gt=0,$t=function(be){if(be in Qt)return Qt[be];var ze=Qt[be]=ee[Gt];return Gt+=1,Gt>=ee.length&&(Gt=0),ze},Pe=A,me=K;function le(be){var ze=be.datum(),Xe={};ze.forEach(function(xe){xe.size==0&&xe.sets.length==1&&(Xe[xe.sets[0]]=1)}),ze=ze.filter(function(xe){return!xe.sets.some(function($e){return $e in Xe})});var _n={},Kn={};if(ze.length>0){var Hn=Pe(ze,{lossFunction:me});at&&(Hn=ut(Hn,nt,Ft)),_n=It(Hn,et,ot,pt),Kn=rt(_n,ze)}var nn={};ze.forEach(function(xe){xe.label&&(nn[xe.sets]=xe.label)});function en(xe){if(xe.sets in nn)return nn[xe.sets];if(xe.sets.length==1)return""+xe.sets[0]}be.selectAll("svg").data([_n]).enter().append("svg");var An=be.select("svg").attr("width",et).attr("height",ot),Nn={},hr=!1;An.selectAll(".venn-area path").each(function(xe){var $e=l.select(this).attr("d");xe.sets.length==1&&$e&&(hr=!0,Nn[xe.sets[0]]=$($e))});var fi=function(xe){return function($e){var Fn=xe.sets.map(function(rr){var En=Nn[rr],Pn=_n[rr];return En||(En={x:et/2,y:ot/2,radius:1}),Pn||(Pn={x:et/2,y:ot/2,radius:1}),{x:En.x*(1-$e)+Pn.x*$e,y:En.y*(1-$e)+Pn.y*$e,radius:En.radius*(1-$e)+Pn.radius*$e}});return dt(Fn)}},Oe=An.selectAll(".venn-area").data(ze,function(xe){return xe.sets}),Ae=Oe.enter().append("g").attr("class",function(xe){return"venn-area venn-"+(xe.sets.length==1?"circle":"intersection")}).attr("data-venn-sets",function(xe){return xe.sets.join("_")}),Jt=Ae.append("path"),ve=Ae.append("text").attr("class","label").text(function(xe){return en(xe)}).attr("text-anchor","middle").attr("dy",".35em").attr("x",et/2).attr("y",ot/2);Et&&(Jt.style("fill-opacity","0").filter(function(xe){return xe.sets.length==1}).style("fill",function(xe){return $t(xe.sets)}).style("fill-opacity",".25"),ve.style("fill",function(xe){return xe.sets.length==1?$t(xe.sets):"#444"}));var Vt=be;hr?(Vt=be.transition("venn").duration(H),Vt.selectAll("path").attrTween("d",fi)):Vt.selectAll("path").attr("d",function(xe){return dt(xe.sets.map(function($e){return _n[$e]}))});var ie=Vt.selectAll("text").filter(function(xe){return xe.sets in Kn}).text(function(xe){return en(xe)}).attr("x",function(xe){return Math.floor(Kn[xe.sets].x)}).attr("y",function(xe){return Math.floor(Kn[xe.sets].y)});q&&(hr?"on"in ie?ie.on("end",Lt(_n,en)):ie.each("end",Lt(_n,en)):ie.each(Lt(_n,en)));var Ce=Oe.exit().transition("venn").duration(H).remove();Ce.selectAll("path").attrTween("d",fi);var ue=Ce.selectAll("text").attr("x",et/2).attr("y",ot/2);return vt!==null&&(ve.style("font-size","0px"),ie.style("font-size",vt),ue.style("font-size","0px")),{circles:_n,textCentres:Kn,nodes:Oe,enter:Ae,update:Vt,exit:Ce}}return le.wrap=function(be){return arguments.length?(q=be,le):q},le.width=function(be){return arguments.length?(et=be,le):et},le.height=function(be){return arguments.length?(ot=be,le):ot},le.padding=function(be){return arguments.length?(pt=be,le):pt},le.colours=function(be){return arguments.length?($t=be,le):$t},le.fontSize=function(be){return arguments.length?(vt=be,le):vt},le.duration=function(be){return arguments.length?(H=be,le):H},le.layoutFunction=function(be){return arguments.length?(Pe=be,le):Pe},le.normalize=function(be){return arguments.length?(at=be,le):at},le.styled=function(be){return arguments.length?(Et=be,le):Et},le.orientation=function(be){return arguments.length?(nt=be,le):nt},le.orientationOrder=function(be){return arguments.length?(Ft=be,le):Ft},le.lossFunction=function(be){return arguments.length?(me=be,le):me},le}function Lt(et,ot){return function(){for(var pt=l.select(this),H=pt.datum(),nt=et[H.sets[0]].radius||50,at=ot(H)||"",q=at.split(/\s+/).reverse(),Et=3,vt=(at.length+q.length)/Et,Ft=q.pop(),Qt=[Ft],ee,Gt=0,$t=1.1,Pe=pt.text(null).append("tspan").text(Ft);Ft=q.pop(),!!Ft;)Qt.push(Ft),ee=Qt.join(" "),Pe.text(ee),ee.length>vt&&Pe.node().getComputedTextLength()>nt&&(Qt.pop(),Pe.text(Qt.join(" ")),Qt=[Ft],Pe=pt.append("tspan").text(Ft),Gt++);var me=.35-Gt*$t/2,le=pt.attr("x"),be=pt.attr("y");pt.selectAll("tspan").attr("x",le).attr("y",be).attr("dy",function(ze,Xe){return me+Xe*$t+"em"})}}function _t(et,ot,pt){var H=ot[0].radius-a(ot[0],et),nt,at;for(nt=1;nt<ot.length;++nt)at=ot[nt].radius-a(ot[nt],et),at<=H&&(H=at);for(nt=0;nt<pt.length;++nt)at=a(pt[nt],et)-pt[nt].radius,at<=H&&(H=at);return H}function mt(et,ot){var pt=[],H;for(H=0;H<et.length;++H){var nt=et[H];pt.push({x:nt.x,y:nt.y}),pt.push({x:nt.x+nt.radius/2,y:nt.y}),pt.push({x:nt.x-nt.radius/2,y:nt.y}),pt.push({x:nt.x,y:nt.y+nt.radius/2}),pt.push({x:nt.x,y:nt.y-nt.radius/2})}var at=pt[0],q=_t(pt[0],et,ot);for(H=1;H<pt.length;++H){var Et=_t(pt[H],et,ot);Et>=q&&(at=pt[H],q=Et)}var vt=m(function(Gt){return-1*_t({x:Gt[0],y:Gt[1]},et,ot)},[at.x,at.y],{maxIterations:500,minErrorDelta:1e-10}).x,Ft={x:vt[0],y:vt[1]},Qt=!0;for(H=0;H<et.length;++H)if(a(Ft,et[H])>et[H].radius){Qt=!1;break}for(H=0;H<ot.length;++H)if(a(Ft,ot[H])<ot[H].radius){Qt=!1;break}if(!Qt)if(et.length==1)Ft={x:et[0].x,y:et[0].y};else{var ee={};r(et,ee),ee.arcs.length===0?Ft={x:0,y:-1e3,disjoint:!0}:ee.arcs.length==1?Ft={x:ee.arcs[0].circle.x,y:ee.arcs[0].circle.y}:ot.length?Ft=mt(et,[]):Ft=f(ee.arcs.map(function(Gt){return Gt.p1}))}return Ft}function At(et){var ot={},pt=[];for(var H in et)pt.push(H),ot[H]=[];for(var nt=0;nt<pt.length;nt++)for(var at=et[pt[nt]],q=nt+1;q<pt.length;++q){var Et=et[pt[q]],vt=a(at,Et);vt+Et.radius<=at.radius+1e-10?ot[pt[q]].push(pt[nt]):vt+at.radius<=Et.radius+1e-10&&ot[pt[nt]].push(pt[q])}return ot}function rt(et,ot){for(var pt={},H=At(et),nt=0;nt<ot.length;++nt){for(var at=ot[nt].sets,q={},Et={},vt=0;vt<at.length;++vt){q[at[vt]]=!0;for(var Ft=H[at[vt]],Qt=0;Qt<Ft.length;++Qt)Et[Ft[Qt]]=!0}var ee=[],Gt=[];for(var $t in et)$t in q?ee.push(et[$t]):$t in Et||Gt.push(et[$t]);var Pe=mt(ee,Gt);pt[at]=Pe,Pe.disjoint&&ot[nt].size>0&&console.log("WARNING: area "+at+" not represented on screen")}return pt}function Mt(et,ot){for(var pt=At(et.selectAll("svg").datum()),H={},nt=0;nt<ot.sets.length;++nt){var at=ot.sets[nt];for(var q in pt)for(var Et=pt[q],vt=0;vt<Et.length;++vt)if(Et[vt]==at){H[q]=!0;break}}function Ft(Qt){for(var ee=0;ee<Qt.length;++ee)if(!(Qt[ee]in H))return!1;return!0}et.selectAll("g").sort(function(Qt,ee){return Qt.sets.length!=ee.sets.length?Qt.sets.length-ee.sets.length:Qt==ot?Ft(ee.sets)?-1:1:ee==ot?Ft(Qt.sets)?1:-1:ee.size-Qt.size})}function z(et,ot,pt){var H=[];return H.push(`
M`,et,ot),H.push(`
m`,-pt,0),H.push(`
a`,pt,pt,0,1,0,pt*2,0),H.push(`
a`,pt,pt,0,1,0,-pt*2,0),H.join(" ")}function $(et){var ot=et.split(" ");return{x:parseFloat(ot[1]),y:parseFloat(ot[2]),radius:-parseFloat(ot[4])}}function dt(et){var ot={};r(et,ot);var pt=ot.arcs;if(pt.length===0)return"M 0 0";if(pt.length==1){var H=pt[0].circle;return z(H.x,H.y,H.radius)}else{for(var nt=[`
M`,pt[0].p2.x,pt[0].p2.y],at=0;at<pt.length;++at){var q=pt[at],Et=q.circle.radius,vt=q.width>Et;nt.push(`
A`,Et,Et,0,vt?1:0,1,q.p1.x,q.p1.y)}return nt.join(" ")}}t.intersectionArea=r,t.circleCircleIntersection=u,t.circleOverlap=o,t.circleArea=i,t.distance=a,t.venn=A,t.greedyLayout=Y,t.scaleSolution=It,t.normalizeSolution=ut,t.bestInitialLayout=V,t.lossFunction=K,t.disjointCluster=ct,t.distanceFromIntersectArea=R,t.VennDiagram=Nt,t.wrapText=Lt,t.computeTextCentres=rt,t.computeTextCentre=mt,t.sortAreas=Mt,t.circlePath=z,t.circleFromPath=$,t.intersectionAreaPath=dt,Object.defineProperty(t,"__esModule",{value:!0})})},function(E,T,e){"use strict";var t=function(){};t=function(l,s,c){var r=arguments.length;c=new Array(r>2?r-2:0);for(var h=2;h<r;h++)c[h-2]=arguments[h];if(s===void 0)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(s.length<10||/^[s\W]*$/.test(s))throw new Error("The warning format should be able to uniquely identify this warning. Please, use a more descriptive format than: "+s);if(!l){var n=0,i="Warning: "+s.replace(/%s/g,function(){return c[n++]});typeof console!="undefined"&&console.error(i);try{throw new Error(i)}catch(a){}}},E.exports=t},function(E,T,e){e(64),E.exports=e(64)}])})},yU0y:function(Se,ft,L){"use strict";L.d(ft,"b",function(){return U}),L.d(ft,"a",function(){return E}),L.d(ft,"c",function(){return T});var U=1e-6,E=typeof Float32Array!="undefined"?Float32Array:Array,T=Math.random;function e(c){E=c}var t=Math.PI/180;function l(c){return c*t}function s(c,r){return Math.abs(c-r)<=U*Math.max(1,Math.abs(c),Math.abs(r))}Math.hypot||(Math.hypot=function(){for(var c=0,r=arguments.length;r--;)c+=arguments[r]*arguments[r];return Math.sqrt(c)})},yXPU:function(Se,ft){function L(E,T,e,t,l,s,c){try{var r=E[s](c),h=r.value}catch(n){e(n);return}r.done?T(h):Promise.resolve(h).then(t,l)}function U(E){return function(){var T=this,e=arguments;return new Promise(function(t,l){var s=E.apply(T,e);function c(h){L(s,t,l,c,r,"next",h)}function r(h){L(s,t,l,c,r,"throw",h)}c(void 0)})}}Se.exports=U,Se.exports.default=Se.exports,Se.exports.__esModule=!0},ycre:function(Se,ft,L){var U=L("711d"),E=U("length");Se.exports=E},z4Hk:function(Se,ft,L){"use strict";Object.defineProperty(ft,"__esModule",{value:!0}),ft.BindingWhenSyntax=void 0;var U=L("406g"),E=L("RR/i"),T=function(){function e(t){this._binding=t}return e.prototype.when=function(t){return this._binding.constraint=t,new U.BindingOnSyntax(this._binding)},e.prototype.whenTargetNamed=function(t){return this._binding.constraint=E.namedConstraint(t),new U.BindingOnSyntax(this._binding)},e.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(t){var l=t.target!==null&&!t.target.isNamed()&&!t.target.isTagged();return l},new U.BindingOnSyntax(this._binding)},e.prototype.whenTargetTagged=function(t,l){return this._binding.constraint=E.taggedConstraint(t)(l),new U.BindingOnSyntax(this._binding)},e.prototype.whenInjectedInto=function(t){return this._binding.constraint=function(l){return E.typeConstraint(t)(l.parentRequest)},new U.BindingOnSyntax(this._binding)},e.prototype.whenParentNamed=function(t){return this._binding.constraint=function(l){return E.namedConstraint(t)(l.parentRequest)},new U.BindingOnSyntax(this._binding)},e.prototype.whenParentTagged=function(t,l){return this._binding.constraint=function(s){return E.taggedConstraint(t)(l)(s.parentRequest)},new U.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorIs=function(t){return this._binding.constraint=function(l){return E.traverseAncerstors(l,E.typeConstraint(t))},new U.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorIs=function(t){return this._binding.constraint=function(l){return!E.traverseAncerstors(l,E.typeConstraint(t))},new U.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorNamed=function(t){return this._binding.constraint=function(l){return E.traverseAncerstors(l,E.namedConstraint(t))},new U.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorNamed=function(t){return this._binding.constraint=function(l){return!E.traverseAncerstors(l,E.namedConstraint(t))},new U.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorTagged=function(t,l){return this._binding.constraint=function(s){return E.traverseAncerstors(s,E.taggedConstraint(t)(l))},new U.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorTagged=function(t,l){return this._binding.constraint=function(s){return!E.traverseAncerstors(s,E.taggedConstraint(t)(l))},new U.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorMatches=function(t){return this._binding.constraint=function(l){return E.traverseAncerstors(l,t)},new U.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorMatches=function(t){return this._binding.constraint=function(l){return!E.traverseAncerstors(l,t)},new U.BindingOnSyntax(this._binding)},e}();ft.BindingWhenSyntax=T},zEVN:function(Se,ft,L){var U=L("Gi0A"),E=L("sEf8"),T=L("mdPL"),e=T&&T.isMap,t=e?E(e):U;Se.exports=t},zZ0H:function(Se,ft){function L(U){return U}Se.exports=L},zZPE:function(Se,ft){var L="[object Object]";function U(i){var a=!1;if(i!=null&&typeof i.toString!="function")try{a=!!(i+"")}catch(o){}return a}function E(i,a){return function(o){return i(a(o))}}var T=Function.prototype,e=Object.prototype,t=T.toString,l=e.hasOwnProperty,s=t.call(Object),c=e.toString,r=E(Object.getPrototypeOf,Object);function h(i){return!!i&&typeof i=="object"}function n(i){if(!h(i)||c.call(i)!=L||U(i))return!1;var a=r(i);if(a===null)return!0;var o=l.call(a,"constructor")&&a.constructor;return typeof o=="function"&&o instanceof o&&t.call(o)==s}Se.exports=n},zoYe:function(Se,ft,L){var U=L("nmnc"),E=L("eUgh"),T=L("Z0cm"),e=L("/9aa"),t=1/0,l=U?U.prototype:void 0,s=l?l.toString:void 0;function c(r){if(typeof r=="string")return r;if(T(r))return E(r,c)+"";if(e(r))return s?s.call(r):"";var h=r+"";return h=="0"&&1/r==-t?"-0":h}Se.exports=c},zvhG:function(Se,ft){Se.exports=L;function L(U,E,T,e){this.cx=3*U,this.bx=3*(T-U)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*E,this.by=3*(e-E)-this.cy,this.ay=1-this.cy-this.by,this.p1x=U,this.p1y=e,this.p2x=T,this.p2y=e}L.prototype.sampleCurveX=function(U){return((this.ax*U+this.bx)*U+this.cx)*U},L.prototype.sampleCurveY=function(U){return((this.ay*U+this.by)*U+this.cy)*U},L.prototype.sampleCurveDerivativeX=function(U){return(3*this.ax*U+2*this.bx)*U+this.cx},L.prototype.solveCurveX=function(U,E){typeof E=="undefined"&&(E=1e-6);var T,e,t,l,s;for(t=U,s=0;s<8;s++){if(l=this.sampleCurveX(t)-U,Math.abs(l)<E)return t;var c=this.sampleCurveDerivativeX(t);if(Math.abs(c)<1e-6)break;t=t-l/c}if(T=0,e=1,t=U,t<T)return T;if(t>e)return e;for(;T<e;){if(l=this.sampleCurveX(t),Math.abs(l-U)<E)return t;U>l?T=t:e=t,t=(e-T)*.5+T}return t},L.prototype.solve=function(U,E){return this.sampleCurveY(this.solveCurveX(U,E))}},zxMA:function(Se,ft,L){"use strict";Object.defineProperty(ft,"__esModule",{value:!0}),ft.QueryableString=void 0;var U=function(){function E(T){this.str=T}return E.prototype.startsWith=function(T){return this.str.indexOf(T)===0},E.prototype.endsWith=function(T){var e="",t=T.split("").reverse().join("");return e=this.str.split("").reverse().join(""),this.startsWith.call({str:e},t)},E.prototype.contains=function(T){return this.str.indexOf(T)!==-1},E.prototype.equals=function(T){return this.str===T},E.prototype.value=function(){return this.str},E}();ft.QueryableString=U}}]);
